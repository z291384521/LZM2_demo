/***************************************************************************
 * 
 *  全局常量定义
 * 
 ***************************************************************************/
/**干掉所有输出 */
//console.log = function(){};
// 全局配置模块
// var CLIENT_VERSION_NUMBER = 120050508;				// 客户端版本号
// 
var PRIVATE_CLIENT_VERSION_NUMBER=20210719,CLIENT_VERSION_NUMBER=120200313,CLIENT_JS_VERSION_NUMBER=20200818,RUNLOGINCODE=0,RUNGATECODE=2857740885,RUNGATECODEX=2862262938,DEFBLOCKSIZE=16,HUMANFRAME=600,g_furious_collision_ing=!1,g_furious_collision_end=!1,g_rocker_moving=!1,g_initTimes,ROLE_PLAYER=0,ROLE_HERO=1,ROLE_NPC=2,ROLE_MONSTER=3,BTN_BAG=0,BTN_TRADE=1,BTN_TEAM=2,BTN_ZHAOMU=3,BTN_REDPACKED=4,BTN_GUILD=5,BTN_BAITAN=6,BTN_FRIENDS=7,SELL_ITEM_TYPE,DIR_UP=0,DIR_RIGHT_UP=1,DIR_RIGHT=2,DIR_RIGHT_DOWN=3,DIR_DOWN=4,DIR_LEFT_DOWN=5,DIR_LEFT=6,DIR_LEFT_UP=7,ROLE_STAND=0,ROLE_WALK=1,ROLE_RUN=2,ROLE_ATTACK_OVER=3,ROLE_ATTACK_1=4,ROLE_ATTACK_2=5,ROLE_ATTACK_3=6,ROLE_SKILL=7,ROLE_DUG=8,ROLE_BE_ATTACKED=9,ROLE_DEAD=10,CGM_DATA=1,CGM_COMPDATA=2,CGM_ACTIVE=3,ROCKER_RUN=2,ROCKER_WALK=1,CHANGEPWDSCENE_EXIST=!1,REGSCENE_EXIST=!1,DELAY_TIME=0,DELAY_INTERVAL=2E3,SOUND_PLAY={},disAfterTargetMoved=0,otherPlayerCatch=!1,CUSTOM_EVENT_SERVERCONNECT="CUSTOM_EVENT_SERVERCONNECT",CUSTOM_EVENT_ROCKERTOUCHMOVED="CUSTOM_EVENT_ROCKERTOUCHMOVED",CUSTOM_EVENT_ROCKERTOUCHEND="CUSTOM_EVENT_ROCKERTOUCHEND",CUSTOM_EVENT_SHARETHEMAINPLAYER="CUSTOM_EVENT_SHARETHEMAINPLAYER",RECEIVE_ONMESSAGEFROMSERVER="RECEIVE_ONMESSAGEFROMSERVER",RECEIVE_ONHEARTBAETFROMSVR="RECEIVE_ONHEARTBAETFROMSVR",wRace_Role=0,wRace_Actor=1,wRace_Npc=50,eWalkTime=480,eRunTime=600;g_GameType=null;firstName=[];lastName=[];skilldesclist=[];g_ItemDesc=[];g_ItemDescTop="";sound_json=[];role_json=[];obj_config=[];g_GameMoneyType=[];g_hintAnime=[];g_customBtn=[];g_gameGold=[];Charge_Value="";g_serverconfig=[];g_serverconfigtxt=[];g_selfdropitem=[];g_GameConfigWEB=lookHumData=g_DiyGoldList=g_DiyButtonList=g_GameConfig=g_BaseConfig=null;g_ServerList=[];g_nHeroSpellRecover=g_nHeroHealthRecover=g_nHeroPoisonRecover=g_nHeroAntiPoison=g_nHeroAntiMagic=g_nHeroSpeedPoint=g_nHeroHitPoint=g_nMySpellRecover=g_nMyHealthRecover=g_nMyPoisonRecover=g_nMyAntiPoison=g_nMyAntiMagic=g_nMySpeedPoint=g_nMyHitPoint=null;g_ridingShow=!0;g_RoleName=m_DoubleExp=m_nGameGold=null;g_RoleBodyState=0;g_RoleCallName=g_playerName=null;g_RoleLevelUp=0;g_ItemScoreRecord=null;g_EquipScoreExList=[];g_EquipScoreList=[];IsBlendFileName=[];quick_Server_ID=0;g_ServerName=g_Server_Name="";g_Cai_GameID=0;g_simScreen=g_openhook="1";g_npcTxtSize=14;g_autopick=!1;g_atlasinfo={};g_atlasRule={};g_boKeepSkill=g_boMagicGood=!1;g_sdk_userUid=g_sdk_userName=g_sdk_userID="";g_strokewidth=g_MRGameH5_userId=0;var ItemHeard=null,U_BOXITEM=-1,U_DRESS=0,U_WEAPON=1,U_RIGHTHAND=2,U_NECKLACE=3,U_HELMET=4,U_ARMRINGL=5,U_ARMRINGR=6,U_RINGL=7,U_RINGR=8,U_BUJUK=9,U_BELT=10,U_BOOTS=11,U_CHARM=12,U_HAT=13,U_DRUM=14,U_HORSE=15,U_SHIELD=16,U_JADE=17,U_FASHIONDRESS=18,U_FASHIONWEAPON=19,U_FASHIONNECKLACE=20,U_FASHIONHELMET=21,U_FASHIONARMRINGL=22,U_FASHIONARMRINGR=23,U_FASHIONRINGL=24,U_FASHIONRINGR=25,U_FASHIONRIGHTHAND=26,U_FASHIONBELT=27,U_FASHIONBOOTS=28,U_FASHIONCHARM=29,U_JEWELRY1=30,U_JEWELRY2=31,U_JEWELRY3=32,U_JEWELRY4=33,U_JEWELRY5=34,U_JEWELRY6=35,_U_JEWELRY7=36,_U_JEWELRY8=37,_U_JEWELRY9=38,_U_JEWELRY10=39,U_JEWELRYRandom=209,U_ANYPOS=208,U_JEWELRYGODBLESSANYPOS=207,U_JEWELRYMAX=U_JEWELRY6,U_GODBLESS1=40,U_GODBLESS2=41,U_GODBLESS3=42,U_GODBLESS4=43,U_GODBLESS5=44,U_GODBLESS6=45,U_GODBLESS7=46,U_GODBLESS8=47,U_GODBLESS9=48,U_GODBLESS10=49,U_GODBLESS11=50,U_GODBLESS12=51,U_ADDUSERITEMMAX=U_GODBLESS12,U_USERITEMMAX=U_GODBLESS12,U_ICON=U_GODBLESS12+1,U_ICON2=U_GODBLESS12+1,U_BOOK=21,U_DRUG=22,MAXBAGITEM=46,GlobalCfglist={},G_RollMsg={},G_RollMsg1=[],G_newLineMsm0=[],G_newLineMsm1=[],G_newLineMsm2=[],G_SHOW_ITEM_NAME=!0,G_ATUO_GET_ITEMS=!0,G_SHOW_ROLE_NAME=!0,G_SHOW_ROLE_HP=!0,G_SHOW_EXP=!0,G_SHOW_NAME=!0,G_SHOW_MONSTER_NAME=!0,G_SHOW_TITLE=!0,G_SpotDlgMode=1,G_NPC_ID=0,G_Show_Item_Price=0,G_Trade_Other_Name="",G_Team_Grop_List=[],G_Last_Select_Team_Name="",G_Team_Group_State=!1,G_Cur_Shop_Page=0,G_Total_Shop_Page=0,G_Money_Type="",G_Notice_Guald="",G_KillGuilds_Guald="",G_AllyGuilds_Guald="",G_Guald_Title_List=[],G_Guald_User_List=[],G_Guald_WaiJiao_String=[],G_Guald_HangHui_World_List=[],G_Guald_Last_Name="",G_Guald_Info="",G_WaiJiaoStr="",G_Guald_Can_Lianmeng=0,G_att_type="",g_mapdesc=[],G_PRIVATE_CHAT_list=[],g_customItemAttr=null,CUSTOMITEMABIL_LEN=10,CUSTOMITEMPROGRESSBAR_LEN=2,g_BaseScale=1,g_server_area,G_Cur_Store_Page=0,G_Total_Store_num=0,G_Cur_Item_Page=0,G_Total_Item_num=0,G_Guald_OnlineCount=0,G_Guald_NowCount=0,G_Guald_MaxCount=0,G_Guald_Admin=0,G_Guald_Admin_Name="",G_Guald_Show_List=[],G_Guald_Chat_List=[],G_Guald_Notice_List=[],G_Guald_User_List=[],G_Guald_Show_All=!1,G_Ohter_User_Data={},G_Show_Editor_Type="",g_Trade_GameIcon=0,g_guildEventInfo=[],G_Friend_List=[],G_Friend_RedPack_List=[],G_Friend_HMD_List=[],G_Friend_Target_List=[],G_Friend_Option_Type=0,G_Friend_Info={},G_SkillTime=0,G_BaseSetList=[],G_SysSetList=[],G_FightSetList=[],G_BaiTanData=null,baitanGoldTypes=[],G_ShowBaiTanDataIsSelf=!1,G_BaiTanName="",g_nMagicItemRate=100,g_HPStoneAdd=0,g_HPStoneDec=0,g_MPStoneAdd=0,g_MPStoneDec=0,g_Move_Type=2,g_Show_Bag_Type="",g_GameInitFinish=!1,g_CMDlist=[],g_res_clearlist=[],g_ani_clearlist={},g_ani_keeplist={},g_item_clearlist={},g_boCobWeb=!1,ItemHeard=null,g_GameGoldName="",g_GamePointName="",g_GameGoldNum={key:"",value:0},g_GamePointNum={key:"",value:0},g_GameCionNum={key:"",value:0},g_gameGlory={key:"",value:0},g_gamePopNum={key:"",value:0},g_bindCionNum={key:"",value:0},g_bindGoldNum={key:"",value:0},g_nGameDiamond={key:"",value:0},g_nGameGird={key:"",value:0},g_CurGameDlgZorder=99,g_ItemInfoFromShop=!1,g_showWeatherEffect=null,g_showChatItem=[],g_getAtlas={},TFishState={fsIdle:0,fsRodBreaking:1,fsRodBreaked:2,fsParsing:3,fsParsed:4,fsPushing:5,fsAllowPush:6,fsPushed:7,fsFooling:8},sndacasketState={disabled:0,active:1,show:2},E_MUSICFORMAT={MP3:".mp3",WAV:".wav",OGG:".ogg"},E_PARALYSISACTIVE={WALK:"walk",RUN:"run",ATTACK:"attack",MAGIC:"magic"},E_OBJECTTYPE={MONSTER:1,NPC:2,PLAYER:3},g_babyList=[],g_FishInfo_List={},g_JoinInfo_List=[],G_Guald_Name="",g_npc_opt_list=G_Guald_MaxCount=G_Guald_NowCount=G_Guald_OnlineCount="",g_npc_opt_boxid=0,g_crystal_token="",g_crystal_userid="",g_crystalInfo="",g_animation_force_blend=!0,g_sprite_force_blend=!0,g_GameMainBtnResList={btn_vip:"\u4f1a\u5458",bnt_new_user:"\u73b0\u91d1\u63d0\u73b0",btn_rank_list:"\u6392\u884c\u699c",bnt_chongzi:"\u5145\u503c\u94fe\u63a5",bnt_game_hd:"\u6d3b\u52a8\u4ecb\u7ecd",bnt_game_fl:"\u798f\u5229\u5927\u5385",btn_recharge_reward:"\u9996\u51b2\u5956\u52b1",bnt_bysc:"\u94bb\u77f3\u5546\u57ce",onLine:"\u5728\u7ebf\u9886\u5956"},g_imgNpcPak=["Icon","Items","DnItems","Prguse","Prguse2","Prguse3","Items1","DoItems1","UI1","UI3","GamePlan","Magic","Magic2","Magic3","Magic4","Magic5","Magic6","Magic7","Magic8","Magic9","Magic10","magic7-16","Magic8-16","Magicico","UI2","StateEffect","Face",,"Npcface"],G_BaseSetList=[{txt:"\u5141\u8bb8\u7ec4\u961f",val:G_Team_Group_State},{txt:"\u5141\u8bb8\u7ec4\u961f1",val:G_Team_Group_State},{txt:"\u5141\u8bb8\u7ec4\u961f2",val:G_Team_Group_State}],G_SysSetList=[{txt:"\u81ea\u52a8\u6361\u53bb\u7269\u54c1",val:G_SHOW_ITEM_NAME},{txt:"\u663e\u793a\u7269\u54c1\u540d\u5b57",val:G_ATUO_GET_ITEMS},{txt:"\u81ea\u52a8\u8865\u5145Hp",val:"\u91d1\u521b\u836f(\u5c0f)\u5305",use:"\u91d1\u521b\u836f(\u5c0f\u91cf)"},{txt:"\u81ea\u52a8\u8865\u5145Mp",val:"\u9b54\u6cd5\u836f(\u5c0f)\u5305",use:"\u9b54\u6cd5\u836f(\u5c0f\u91cf)"},{txt:"\u7d27\u6025\u9003\u547d\u5377",val:"\u968f\u673a\u4f20\u9001\u5377\u5305",use:"\u968f\u673a\u4f20\u9001\u5377"}],G_FightSetList=[{txt:"\u81ea\u52a8\u6218\u6597",val:!0},{txt:"\u81ea\u52a8\u6218\u65971",val:!0},{txt:"\u81ea\u52a8\u6218\u65972",val:!0}];g_face_list="wx pz se fd dy hx bz shuai dk gg fn tp cy jy ng kuk lengh zk tuu tx ka baiy am jie kun jk lh hanx db fendou yiw xu yun shuai kl qiao zj kb gz qd huaix zhh yhh hq bs wq kk yx qq xia kel cd xig pj lq pp kf fan zt mg dx sa xin xs dg shd zhd dao zq pch bb yl ty lw yb qiang ruo ws bq gy qt cj aini bu hd aiq fw tiao fad oh zhq kt ht".split(" ");var g_LegTzItemList=[],clBlack="#000000",clMaroon="#000080",clGreen="#008000",clOlive="#008080",clNavy="#800000",clPurple="#800080",clTeal="#808000",clGray="#808080",clSilver="#C0C0C0",clRed="#0000FF",clLime="#00FF00",clYellow="#FFFF00",clBlue="#FF0000",clFuchsia="#FF00FF",clAqua="#00FFFF",clLtGray="#C0C0C0",clDkGray="#808080",clWhite="#FFFFFF",StandardColorsCount=16,g_unpackList=[],g_ChannelId=0,g_Termial=1,S_LIMIT_FORMAT="wav",S_LOGIN_GAME="wav/log-in-long2.wav",S_BUTTON_1="wav/103.wav",S_BUTTON_2="wav/104.wav",S_BUTTON_3="wav/105.wav",S_SELECTROLE="wav/sellect-loop2.wav",S_SELECTHOAL="wav/101.wav",S_ROLE_WALK="wav/1.wav",S_ROLE_WALK2="wav/2.wav",S_ROLE_RUN="wav/3.wav",S_ROLE_RUN2="wav/4.wav",S_ROLE_LEVEL="wav/powerup.wav",s_hit_short="wav/50.wav",s_hit_wooden="wav/51.wav",s_hit_sword="wav/52.wav",s_hit_do="wav/53.wav",s_hit_axe="wav/54.wav",s_hit_club="wav/55.wav",s_hit_long="wav/56.wav",s_hit_fist="wav/57.wav",s_cboZs1_start_m="wav/51.wav",s_cboZs1_start_w="wav/51.wav",s_cboZs2_start="wav/51.wav",s_cboZs3_start_m="",s_cboZs3_start_w="",s_cboZs4_start="",s_60HIT="wav/M51-0.wav",s_61HIT="",s_hit_ZRJF_M="",s_hit_ZRJF_W="",s_role_die_m="wav/144.wav",s_role_die_w="wav/145.wav",s_struck_m="wav/138.wav",s_struck_w="wav/139.wav",s_struck_armor_sword="wav/80.wav",s_struck_armor_axe="wav/81.wav",s_struck_armor_longstick="wav/82.wav",s_struck_armor_fist="wav/83.wav",s_struck_body_sword="wav/70.wav",s_struck_body_axe="wav/71.wav",s_struck_body_longstick="wav/72.wav",s_struck_body_fist="wav/73.wav",s_click_drug="wav/108.wav",s_spacemove_out="wav/109.wav",s_spacemove_in="wav/110.wav",s_click_weapon="wav/111.wav",s_click_armor="wav/112.wav",s_click_ring="wav/113.wav",s_click_armring="wav/114.wav",s_click_necklace="wav/115.wav",s_click_helmet="wav/116.wav",s_click_grobes="wav/117.wav",s_itmclick="wav/118.wav",s_temp_play=!1;function initConstSoundSrc(){var b=0,b={};null!=sound_json&&(b=sound_json.length,b=sound_json[b-1].CONST_MUSIC);for(var c in window)-1==c.indexOf("s_")&&-1==c.indexOf("S_")||null==b[c]||(window[c]=b[c])}function initpverallprot(){attackerID=lockingID=0;autopickstate=autohookstate=!1;lockingList=[];chaseing=!1;rolespeed=0;g_rolemovespeed=10;rockerlock=Actionlock=!0;isSocketConnected=roledielock=rockerposview=rockerfirst=!1;rw_recog=0;clickname=taskcomplete=rw_content=rw_pagings=rw_titles="";attack_call_time=skill_use_time=skill_count_cd=0;open_minimap=!1;isOpen=!0;miniflashpoint=0;g_copyName="";TaskOpen=!0;task_tile_list=[];g_RedPack_List=[];g_RedPackOpen=g_RedPackIndex=-1;G_npcShopPage=0;OpenTextColor=!1;G_Friend_List=[];G_Friend_Target_List=[];G_countDownMsg=[];g_Zmu_MinLv="0";g_Zmu_MaxLv="55";g_Zmu_Quyu=g_Zmu_Type="0";g_Zmu_Memo="";g_Zmu_Count=0;Allsuitlist=[];Suitelementlist=[];GomSuitOpen=!1;Gomsuitlist=[];activate_skilltype=activate_skilluse=0;activate_skillpos=null;g_Showitem=[];g_ItemImg=[];g_pak_list=[];g_FishGroup_List=[];g_main_npcdialog=null;g_main_npcdialogopen=!1;g_H_List=[];g_BagItemsList=[];for(var b=0;46>b;b++)g_BagItemsList.push(null);g_OpenJiaoYi=g_OpenMyShop=g_OpenState=g_OpenStore=g_OpenBag=!1;g_nBagIdx=g_OpenIdx=-1;g_MoveItems={};g_WaitItems={};g_AutoItems={};g_MoveItems.Items=null;g_MoveItems.Index=-1;g_WaitItems.Index=-1;g_WaitItems.Items=null;g_AutoItems.Items=null;g_AutoItems.Index=-1;g_UserItemList=[];HighTUseItems=52;g_UserMagicList=[];g_SelectIndex=-1;g_humTitleOn=!1;g_StoreItemList=[];g_StoreType=-1;player_stalls=!1;g_setDrugNumber=g_autoDrugButNumber=g_DrugButNumber=g_StoreCount=g_StoreMaxCount=-1;g_DrugItemsList=[];for(b=0;6>b;b++)g_DrugItemsList[b]=null;g_ItemMemuList=[];g_ItemMemuListInf=[];BagDataIsInit=g_NpcCan_s_repair=g_NpcCan_repair=g_NpcCan_sell=g_NpcCan_buy=!1;CanUserItem=!0;g_Move_Type=2;g_NpcShowtxt="";g_SetupMagicList=[];g_MoveSkill=null;for(b=0;8>b;b++)g_SetupMagicList[b]=null;g_StoreOnline=g_StoreName="";SelectedStoreItem=AddStoreItem=null;g_StoreItemNum=[0,0,0];g_StoreItemIndex=[0,0,0];g_MyShopList=[];g_MyShopGoldList=[];g_SelectedName="";for(b=0;20>b;b++)g_MyShopList[b]=null,g_MyShopGoldList[b]=null;gametakelist=[];g_MyJiaoYiSum=0;g_MyJiaoYiList=[];g_HumJiaoYiList=[];for(b=0;12>b;b++)g_MyJiaoYiList[b]=null,g_HumJiaoYiList[b]=null;activate_ok=null;nGT_X=0;nGT_Y=10;testNpc_Y=testNpc_X=0;g_GameDiamondName="\u91d1\u521a\u77f3";g_GameLingFName="\u7075\u7b26";sNewNpcStr="";MissStringArray=[];g_MissCaptionList=[];for(b=0;20>b;b++)MissStringArray[b]="";g_MissIndex=0;g_sStrMissNv="";g_GlobalList=[];b=new UIAlert;b.zOrder=999998;Laya.stage.addChild(b);g_tempChangerdlg=g_TempNPCLabe=!1;g_Changerpak=g_ChangerIndex=-1;g_Hit_Text=[];g_TimeIndex=-1;g_buffID=[];verify_through=itme_lock=!0;g_cardGame_infoList=[];g_show_fashion=!1;g_DiyNPCList=[];g_IconCList=[];g_ClientConfig=[];G_Guild_Name="";g_Cai_nProductID=0;gm_show_skill=gm_show_npc=gm_show_player=!0;gm_show_pl_name="";gm_show_pl_visible=!0;gm_show_map=-1;g_loadmap=gm_has_socket_timer=gm_print_msg=gm_open_seemap=gm_show_grid=!1;g_myHero=null;g_HeroLoyalPoint=0;g_OpenHeroBag=g_OpenHeroState=!1;g_HeroItemList=[];g_HeroMagicList=[];g_HeroBagCount=g_HeroBagNum=-1;g_HeroBagItemsList=[];g_HeroLockType=0;g_boIsSafeRun=g_boIsSafeRunNPC=g_boNoAcrossNpc=g_boNoAcrossMon=g_boNoAcrossHuman=g_HeroGuardOn=!1;npc_img_name="gameres/png/npc_di.png";g_btSelfShowGodBless=g_btSelfSndacasketState=!1;g_SelfOpenedGodBless=[];for(b=0;12>b;b++)g_SelfOpenedGodBless.push(0);g_HeroOpenedGodBless=g_SelfOpenedGodBless;g_Show_Hero_Fashion=g_btHeroShowGodBless=g_btHeroSndacasketState=!1;g_Cai_ServerIP="";g_Cai_ServerPort=0;g_tempName=g_tempJob="";g_magicId=-1;g_boOpenCaiji=!1;g_rotation=g_levelForCaiji=0;use_skill_sbys=moveing=use_move_start=!1;rocker_move_dir=-1;attack_lock_state=!1;dsOpen=attack_lock_time=0;dsClose=1;dsBroken=2;g_nBonusPoint=0;g_BonusAbilChg=g_NakedAbil=g_BonusAbil=g_BonusTick=null;g_pickPlan1=[];g_pickPlan2=[];dataFromRoleScene=[];g_show_Npcbj=!0;g_friend_request=[];g_boxid=0;g_first_entermap=!0;g_native_code=E_NewPlayerID=0;g_boxItemArr=Array(8);g_register=null;g_superMsg=[];g_mapnpc=null;g_tick_rate=g_tick_error=0;g_tick_check=!1;g_tick_ct=0;matrix=null;native_version=g_overtime=0;version_config=[];g_itemSize=1160;g_rolelevel=g_relevel=0;g_autoEquipItemList=[];g_newTaskList=[];g_taskPanel=null;g_newTaskNodeList=[];g_newTaskNpcIcon=null;g_newTaskClickTick=0;g_mailList=[];g_mailLogo=null;g_extendBagItemCount=g_mailMaxCount=0;g_intervalDeal=!0}function analysistxt(){Skillmodule.onanalyzeJson("json/skill.json");var b=Laya.Loader.getRes("data/json/unpackitem.txt");if(b)for(var c=b.split("\r\n"),a=0;a<c.length;a++)0!=c[a].indexOf(";")&&""!=c[a]&&-1!=c[a].indexOf(":")&&(b=c[a].split(":"),1<b.length&&(g_unpackList[b[0]]=b[1]));if(a=Laya.Loader.getRes("json/firstname.txt"))a=a.toString(),firstName=a.split("\r\n"),Laya.loader.clearRes("json/firstname.txt");if(a=Laya.Loader.getRes("json/lastname.txt"))a=a.toString(),lastName=a.split("\r\n"),Laya.loader.clearRes("json/lastname.txt");if(a=Laya.Loader.getRes("json/register.txt"))a=a.toString(),g_register=a.split("\r\n"),Laya.loader.clearRes("json/register.txt");if(b=Laya.Loader.getRes("data/json/mapdesc.txt")){b=b.toString();b=b.split("\r\n");for(a=0;a<b.length;a++)b[a]&&""!=b[a]&&0!=b[a].indexOf(";")&&-1!=b[a].indexOf(",")&&g_mapdesc.push(b[a].split(","));Laya.loader.clearRes("data/json/mapdesc.txt")}Charge_Value=Laya.loader.getRes("json/chargelist.txt");""!=Charge_Value&&Laya.loader.clearRes("json/chargelist.txt");if(a=Laya.Loader.getRes("json/skilldesc.txt"))a=a.toString(),skilldesclist=a.split("\r"),Laya.loader.clearRes("json/skilldesc.txt");a=Laya.Loader.getRes("data/json/itemdesc.txt");if(a=Laya.loader.getRes("data/json/filteitemlist.txt"))for(var a=a.toString(),d=a.split("\r\n"),a=0;a<d.length;a++){b=d[a].split(" ");if(6>b.length)for(c=0;6>c;c++)b[c]||(b[c]="0");AllItemList.push({});AllItemList[a].itemtype=b[0];AllItemList[a].itemname=b[1];1==b[2]?b[2]=!0:b[2]=!1;1==b[3]?b[3]=!0:b[3]=!1;1==b[4]?b[4]=!0:b[4]=!1;1==b[5]?b[5]=!0:b[5]=!1;AllItemList[a].isshow=b[2];AllItemList[a].ispickup=b[3];AllItemList[a].special=b[4];AllItemList[a].prompt=b[5];g_pickPlan1[a]=[b[2],b[3],b[4],b[5]];g_pickPlan2[a]=[b[2],b[3],b[4],b[5]]}if(a=Laya.loader.getRes("data/json/filtemonsterlist.txt"))for(a=a.toString(),d=a.split("\r\n"),a=0;a<d.length;a++){b=d[a].split(" ");if(6>b.length)for(c=0;6>c;c++)b[c]||(b[c]="0");AllMonsterList.push({});AllMonsterList[a].monsterName=b[0];1==b[1]?b[1]=!0:b[1]=!1;AllMonsterList[a].isExclude=b[1]}if(a=Laya.loader.getRes("json/blendmode.txt"))IsBlendFileName=a.split("\r\n"),Laya.loader.clearRes("json/blendmode.txt");if(sound_json=Laya.loader.getRes("json/sound.json")){for(a=0;a<sound_json.length;++a)sound_json[a].type&&g_sound_list.push("wav/"+sound_json[a].type);Laya.loader.clearRes("json/sound.json")}(role_json=Laya.loader.getRes("json/role.json"))&&Laya.loader.clearRes("json/role.json");(obj_config=Laya.loader.getRes("json/objectconfig.json"))&&Laya.loader.clearRes("json/objectconfig.json");if(a=Laya.Loader.getRes("json/serverconfig.txt")){a=a.toString();b=a.split("\r\n");for(a=0;a<b.length;a++)b[a]&&-1!=b[a].indexOf("\x3d")&&(c=b[a].split("\x3d"),c[0]&&c[1]&&(g_serverconfigtxt[c[0]]=c[1]),"ip"==c[0]?g_serverconfigtxt.ip=c[1]:"port"==c[0]?g_serverconfigtxt.port=c[1]:"admin"==c[0]?g_serverconfigtxt.admin=c[1]:"quickcode"==c[0]?g_serverconfigtxt.quickcode=c[1]:"quickkey"==c[0]?g_serverconfigtxt.quickkey=c[1]:"gamelist"==c[0]?g_serverconfigtxt.gamelist=c[1]+"\x3d"+c[2]:"onGDYPlatform"==c[0]?g_serverconfigtxt.onGDYPlatform=c[1]:"sLimitFormat"==c[0]&&(g_serverconfigtxt.sLimitFormat=c[1],S_LIMIT_FORMAT=c[1]));a=g_serverconfigtxt.ip&&g_serverconfigtxt.port&&g_serverconfigtxt.admin?!0:!1;null!=g_serverconfigtxt.gamelist==1?(g_serverconfigtxt.ip&&g_serverconfigtxt.port&&g_serverconfigtxt.admin&&(a=g_serverconfigtxt.ip,b=g_serverconfigtxt.port,c=g_serverconfigtxt.admin,Sendmessage.connectLoginSvr(a,parseInt(b)),null==c||""==c?server_uuid="admin":server_uuid=c),requestGameListWEB(g_serverconfigtxt.gamelist+"")):(1==a&&(a=g_serverconfigtxt.ip,b=g_serverconfigtxt.port,c=g_serverconfigtxt.admin,Sendmessage.connectLoginSvr(a,parseInt(b)),null==c||""==c?server_uuid="admin":server_uuid=c),Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u9f99\u65cf\u503c\u73ed\u6280\u672f\uff1a\n\u4f60\u4e3a\u5565\u4e0d\u66f4\u65b0\u65b0\u5217\u8868!?",callfn:function(){}}]));(a=Laya.Loader.getRes("json/imageExportRule.json"))&&(g_atlasinfo=a);a=Laya.Loader.getRes("json/imageSetRule.json");null==a&&(a=Laya.Loader.getRes("imageSetRule.json"));a&&(g_atlasRule=a)}if(a=Laya.loader.getRes("data/json/atlasfile.txt"))a=JSON.parse(a),console.log(a);b=[];c="00000";for(a=1;7>a;a++)c=getResStuffZero(a),b.push("gameres/animation/bonus/"+c+a+".png");for(a=1;13>a;a++)c=getResStuffZero(a),b.push("gameres/animation/maillogo/"+c+a+".png");for(a=1;7>a;a++)c=getResStuffZero(a),b.push("gameres/animation/hero_power/"+c+a+".png");for(a=1;7>a;a++)c=getResStuffZero(a),b.push("gameres/animation/halo/"+c+a+".png");Laya.loader.load(b,null,null,Laya.Loader.IMAGE);(a=Laya.loader.getRes("data/json/version.txt"))&&(version_config=a.split("\r\n"))}function getResStuffZero(b){return 10>b?"00000":"0000"}function initgame(){cur_game_type=0;cur_use_app=!1;app_imei="123132";app_simulator=!1;mac_key="";playerID=game_scene_code=gm_timefor_socket=0;open_gm=!1;g_eventBtn=[];g_funBtn=[];sectionInfo=0;server_uuid="";user_version=null;user_tpye=0;g_sound_list=[];g_cannotPick=[];MsgFromLogin=[];user_site="";g_npcCanMove=!0;E_NewRoleTime=0;E_NewRoleName="";E_NewPlayerID=0;AllItemList=[];AllMonsterList=[];client_version=Laya.LocalStorage.getItem("cl_version");console.log("---init----------------");Laya.stage.removeChildren();Offsetmodule=new OffsetModule;ObjectManage=new objectmanage;Movemodule=new MoveModule;Gamemessage=new GameMessage;Fightmodule=new FightModule;Mapmodule=new MapLayer;Objectcontrol=new objectcontrol;AStart=new Astart;Skillmodule=new SkillModule;Mapdata=new MapData;Gameconfig=new GameConfig;AutoHookmodule=new AutoHookModule;Animationmodule=new AnimationModule;Versionmgr=new VersionMgr;g_LogSocket=new LogClientSocket;Sendmessage=new SendMessage;VoiceSocket=new voiceSocket;AStart.setMapData();changescreen();initpverallprot();Laya.Browser.onEdge&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e0d\u652f\u6301edge\u6d4f\u89c8\u5668,\u8bf7\u4f7f\u7528Chrome\u6d4f\u89c8\u5668",callfn:function(){}}]);analysistxt();Skillmodule.onanalyzeJson("json/skill.json");Skillmodule.parseDiySkillFile();window.conch?(cur_use_app=!0,console.log("----------------on native-------------------------\x3e"),changescreen(),sendtonative("loading",100)):(console.log("----------------on web-------------------------\x3e"),1==cur_game_type&&quicksdkinit());var b=new LoginScene;b.centerX=0;b.centerY=0;Laya.stage.addChild(b)}function requestGameListWEB(b){var c=new Laya.HttpRequest;c.once(Laya.Event.COMPLETE,this,successGameListWEB);c.once(Laya.Event.ERROR,this,function(a){console.log("\x3c------\u5217\u8868\u8bf7\u6c42\u5931\u8d25------\x3e:");console.log(a)});Laya.timer.once(100,this,function(){c.send(b,"","get","json",["Content-Type","application/json;charset\x3dUTF-8"])})}function successGameListWEB(b){g_ServerList=b.data;Laya.stage.event("getGameList");console.log("\x3c------\u6e38\u620f\u5217\u8868\u6570\u636e------\x3e:");console.log(g_ServerList)}var E_PLATFORMSDK={DOUYIN:"douyin",BORAN:"boran",BOX:"box",YOUMENG:"youmeng"};function LoginFunction(b,c){dyLogin(b);callAppGetIMEI()}function OtherFunction(b,c){switch(c){case E_PLATFORMSDK.DOUYIN:dyRegister(b);break;case E_PLATFORMSDK.BOX:h5BoxRegister(b);break;case E_PLATFORMSDK.YOUMENG:register()}}var QuickbackData=null;function appcallexitgame(){Sendmessage.sendCloseGameForH5()}function callAppGetIMEI(){1==Laya.Browser.onAndriod&&(b=1);1==Laya.Browser.onAndrIOS&&(b=2);if(0==cur_use_app){var b=3;userAgentH5(navigator.userAgent,b)}else sendtonative("getIMEI",function(c){app_imei=c;console.log((1==b?"\u5b89\u5353":"\u82f9\u679c")+"\u8bbe\u5907\u7801:"+c);userAgentH5(c,b)}.bind(this))}function getAppIMEI(b){if(b){console.log("--------getAppIMEI--------"+b);b=b.split("/");b[0]&&(app_simulator=b[0]);b[1]&&(app_imei=b[1]);null==b[2]&&(b[2]=0);var c=new Laya.Label("version:"+b[2]+"["+b[1]+"]");c.pos(20,browser_height-20);c.color="#ffffff";Laya.stage.addChild(c);native_version=parseInt(b[2])}}function onGeneratePNG(b){var c=b.drawToCanvas(b.width,b.height,0,0);c.toBase64("image/png",.5,function(a){onScreenShot(a);c.releaseResource();c.destroy()})}function onScreenShot(b){cur_use_app&&(console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3djs:onScreenShot\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3e"),sendtonative("screenShot",b))}function getisSimulator(){if(cur_use_app)console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3djs:getisSimulator\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3e"),sendtonative("isSimulator","mr");else if(document&&document.location.href){console.log("-mryz-\x3e ",document.location.href);var b=document.location.href.split("\x26")[1];b&&(b=b.split("\x3d"),"userId"==b[0]&&(cur_game_type=4,g_MRGameH5_userId=b[1],MRGameH5Init()))}}function setgametype(b){-1!=b.indexOf("quickSDK")?(cur_game_type=2,console.log(" cur game type\uff1aquicksdk ")):-1!=b.indexOf("MRGame")&&(cur_game_type=3,console.log(" cur game type\uff1aMRGAME "))}function quicksdkinit(){QuickSDK.init(g_serverconfigtxt.quickcode,g_serverconfigtxt.quickkey,!0,function(){console.log("quick init success!")})}function oncallLocalPhoto(){cur_use_app&&(console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3djs:oncallLocalPhoto\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3e"),g_serverconfig.boPic&&sendtonative("oncallLocalPhoto",g_serverconfig.sPicUrl))}function onGetPhotoURL(b){b&&(console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3djs:onGetPhotoURL\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d"+b),Laya.stage.event("onGetPhotoURL",[b]))}function sendtonative(b,c){if(!cur_use_app||void 0===conchConfig||null===conchConfig)return!1;var a=conchConfig.getOS(),d;"Conch-ios"==a?d=Laya.PlatformClass.createClass("JSBridge"):"Conch-android"==a&&(d=Laya.PlatformClass.createClass("com.testpro.game.JSBridge"));if("Conch-ios"==a)return c?d.call(b+":",c):d.call(b+":","test");if("Conch-android"==a)return c?d.call(b,c):d.call(b)}function quicksdklogin(){1==cur_game_type?QuickSDK.login(function(b){console.log(b);if(b.status){QuickbackData=b;null==b.data.uid&&(b.data.uid=b.data.username);if(null==b.data.username||""==b.data.username)b.data.username=b.data.uid;28<=b.data.username.length&&(b.data.username=b.data.uid);console.log("GameDemo:QuickSDK\u767b\u5f55\u6210\u529f: uid\x3d\x3e"+b.data.uid);showAlert(Base64.encode(b.data.username)+"|"+Base64.encode(b.data.channelId));QuickSDK.setLogoutNotification(function(b){Laya.Browser.window.location.reload()})}else console.log("GameDemo:QuickSDK\u767b\u5f55\u5931\u8d25:"+b.message)}):2==cur_game_type&&sendtonative("onLoginForSDK","login")}function quicksdkpay(b,c,a,d,e,g){orderInfo={};1==cur_game_type&&(orderInfo.productCode=g_serverconfigtxt.quickcode);1==cur_game_type&&(orderInfo.uid=QuickbackData.data.uid);orderInfo.userRoleId=E_NewPlayerID;orderInfo.userRoleName=c;orderInfo.serverId=quick_Server_ID;orderInfo.userServer=g_Server_Name;orderInfo.userLevel=1;orderInfo.cpOrderNo="cpOrderNo000001";orderInfo.amount=e;orderInfo.subject=g;orderInfo.desc=g;orderInfo.callbackUrl="http://47.105.218.233";orderInfo.extrasParams=1==cur_game_type?Base64.encode(c)+"|"+d+"|"+Base64.encode(g_Server_Name)+"|"+Base64.encode(g):"";orderInfo.goodsId=d;orderInfo.count=d;orderInfo.quantifier="\u4e2a";b=JSON.stringify(orderInfo);1==cur_game_type?QuickSDK.pay(b,function(a){console.log("GameDemo:\u4e0b\u5355\u901a\u77e5"+JSON.stringify(a))}):2==cur_game_type&&sendtonative("onPayForSDK",b)}function quicksdkuploadrole(b,c,a,d){b={};b.isCreateRole=E_NewRoleName==c;b.roleCreateTime=E_NewRoleTime;1==cur_game_type&&(b.uid=QuickbackData.data.uid);b.serverId=quick_Server_ID;b.serverName=d;b.userRoleName=c;b.userRoleId=E_NewPlayerID;b.userRoleBalance=1;b.vipLevel=1;b.userRoleLevel=a;b.partyId="1";b.partyName="\u884c\u4f1a\u540d\u79f0";b.gameRoleGender="\u7537";b.gameRolePower=100;b.partyRoleId="1";b.partyRoleName="1";b.professionId="1";b.profession="1";b.friendlist="";b.isCreateRole&&(E_NewRoleName="");c=JSON.stringify(b);1==cur_game_type?QuickSDK.uploadGameRoleInfo(c,function(a){console.log("GameDemo:\u89d2\u8272\u66f4\u65b0"+JSON.stringify(a))}):2==cur_game_type&&sendtonative("onRoleForSDK",c)}function requestpaylist(b){var c=Charge_Value.split("\r\n");if(2<=c.length){var a={};a.value=b;a.url=c[0];b=JSON.stringify(a);sendtonative("getpaylist",b)}}function getpaylist(b){var c=GameUtil.InstanceOfMem(rechargeUI);c||(console.log("----getpaylist---"),c=new UIRecharge,Laya.stage.addChild(c));c.updateMoney(b)}function callJS(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6ce8\u518c\u6210\u529f",callfn:function(){}}])}function changescreen(){var b=Laya.Browser.clientWidth*Laya.Browser.window.devicePixelRatio,c=Laya.Browser.clientHeight*Laya.Browser.window.devicePixelRatio;b<c&&(c=Laya.Browser.clientWidth*Laya.Browser.window.devicePixelRatio,b=Laya.Browser.clientHeight*Laya.Browser.window.devicePixelRatio);browser_width=Math.ceil(b/(c/600));1136>browser_width?(browser_width=1136,browser_height=Math.ceil(c/(b/browser_width))):browser_height=600;Laya.stage.size(browser_width,browser_height)}function showAlert(b){-1!=b.indexOf("unionid")&&(b=JSON.parse(b).unionid);Sendmessage.WECHATANDQQ(b);g_native_code=b}function isWebForYYY(){return!cur_use_app&&window.GameClient}function sdkForYYY(){isWebForYYY()&&(window.gameClient=new GameClient({gid:210,token:function(b){return(b=window.location.search.match(new RegExp("[\x26?]("+b+")\x3d([^\x26?#]*)","i")))?b[2]:null}("token"),apikey:"e021d02cb5efc62482ead02746d68cce"}),gameClient.ready().then(function(b){return gameClient.getUserInfo(function(b){b&&b.uid?window.g_YYY=b.uid+"yyy":console.log("\u672a\u83b7\u53d6\u5230uid")})})["catch"](function(b){switch(b.message){case "-1":gameClient.clientAction.relogin();break;default:console.log(b)}}))}function getinfoforsdk(b,c,a,d){user_version&&-1!=user_version.indexOf("sdkforyyy")&&(Laya.Browser.onIOS?Laya.Browser.window.webkit.messageHandlers.jscallrecharge.postMessage({name:b,lv:c,serverid:"101",sname:d}):jscall.hello(b,c,"101","\u6218\u8bb0\u6e38\u6613\u6e38"))}function callversion(b){changescreen();cur_use_app=!0;g_Termial=3;var c=document.getElementById("js-fullScreen"),a=document.getElementById("js-cancelFullScreen");c&&(c.style.display="none");a&&(a.style.display="none");c=new Laya.Label(b+Laya.Browser.window.screen.width+","+browser_width+","+Laya.Browser.clientWidth);c.color="#ffffff";c.bottom=0;c.zOrder=99999;c.name="versionlb";Laya.stage.addChild(c);window.flag={fake_android:!0};-1!=b.indexOf("ios")?user_tpye=2:user_tpye=1;-1!=b.indexOf("sdkforyyy")?user_version=b:-1!=b.indexOf("sdkforbaidu")&&(user_version=b)}function callactiveforks(b){var c=new Laya.HttpRequest;c.on(Laya.Event.ERROR,this,function(a){console.log("callactiveforks - onerr",a)});c.on(Laya.Event.COMPLETE,this,function(a){console.log("callactiveforks - loadend",a)});var a="http://dy.jauok.com:8080/active?uid\x3d"+b+"\x26sys\x3d"+(Laya.Browser.onAndriod?"android":"ios");console.log("callactiveforks-"+b+a);c.send(a)}var uu_url="http://47.111.117.245:8081",uu_token="8E1B1D0F787411EA8D9300163E0AFD0A",uu_key="24A36C5E6A5049CD9B93B9398FE57D30",uu_sign="",uu_id=0;function callpaylistforuu(b){var c=uu_url+"/api/app/recharge/list";if(null!=md5){var a=md5(uu_token+uu_key).toUpperCase();uu_id=b;$.post(c,{token:uu_token,sign:a,id:uu_id},function(a){if(0==a.code){var b=GameUtil.InstanceOfMem(rechargeUI);b||(b=new UIRecharge,Laya.stage.addChild(b));b.update3Money(a)}else console.log("error: for pay uu")})}}function callpayforuu(b,c){var a=uu_url+"/api/app/order/save",d=md5(uu_token+uu_key).toUpperCase(),e=2001==c?"SMS":"ALIPAY";$.post(a,{token:uu_token,sign:d,id:uu_id,account:g_RoleName,amount:b,payType:e,payType:e,platform:Laya.Browser.onPC?"PC":"APP"},function(a){0==a.code?window.open(a.data):console.log("error: for pay uu")})}function audioDisconnect(){console.log("-----audioDisconnect---------");VoiceSocket.initCMG()}function enterroomsuccess(){console.log("----enterroomsuccess-----");Laya.stage.event("VOICE_EVENT",["onenterroomsuccess"])}function checkNative(){cur_use_app&&3<version_config.length&&"1"==version_config[0]&&native_version<parseInt(version_config[1])&&Laya.stage.event("show_alert_dlg",[{type:1,txt:version_config[3],callfn:function(){sendtonative("gotowebview","openurl:"+version_config[2]);Laya.Browser.window.location.reload()}}])}function MRGameLogin(){sendtonative("MRGameLogin")}function MRGameCheckAge(){sendtonative("MRGameCheckAge")}function MRGameRoleUpate(b,c,a){b=g_RoleAccountId;var d={};d.ServerId=g_Server_Name;d.ServerName=g_Server_Name;d.RoleId=E_NewPlayerID;d.RoleName=g_RoleName;d.RoleLevel=c;d.RoleCTime=E_NewRoleTime;d.Balance=0;d.RoleVip=0;d.Reincarnation=0;d.FightingCapacity=0;d.PartyName=G_Guild_Name;d.UploadType=a;d.account=b;c=JSON.stringify(d);console.log(c);sendtonative("MRGameRoleUpate",c)}function MRGamePay(b,c,a,d){var e={};e.Money=d;e.ProductName=c;e.ProductDec=c;e.ProductId=0;e.ProductCount=b;e.CurrencyName=E_NewRoleTime;e.ExchangeRate=a;e.ExtInfo=0;e.ServerId=g_Server_Name;e.ServerName=g_Server_Name;e.RoleId=E_NewPlayerID;e.RoleName=Laya.LocalStorage.getItem("g_RoleName");e.RoleLevel=g_levelForCaiji;e.Balance=0;e.RoleVip=0;e.PartyName=G_Guild_Name;e.account=g_RoleAccountId;b=JSON.stringify(e);sendtonative("MRGamePay",b)}function MTPLogin(){var b={accid:99,world:0};b.openid=g_Server_Name+"/"+g_RoleName;b.roleid=E_NewPlayerID;b=JSON.stringify(b);sendtonative("MTPLogin",b)}function MRGameH5Init(){window.BRGameSdk&&window.BRGameSdk.initConf({appId:g_serverconfigtxt.brapp_id,appKey:g_serverconfigtxt.brapp_key})}function MRGameH5Pay(b,c){if(null!=window.BRGameSdk){var a=g_serverconfigtxt.brapp_id,d=g_MRGameH5_userId,e=g_Server_Name,g=E_NewPlayerID,f=Laya.LocalStorage.getItem("g_RoleName"),h=g_RoleAccountId;$.ajax({url:g_serverconfigtxt.brapp_url,type:"POST",dataType:"json",data:{appId:a,userId:d,money:b,serverId:e,roleId:g,roleName:f,product:c,extInfo:"1"},beforeSend:function(a){},complete:function(a,d){},error:function(){},success:function(l){1==l.status?(l={appId:a,userId:d,money:b,serverId:e,roleId:g,roleName:f,product:c,extInfo:"1",time:l.payTime,sign:l.paySign,account:h},console.log("H5\u8d26\u53f7account:"+h),window.BRGameSdk.gamePay(l)):console.log("payerr:",l.msg)}})}}function MRGameH5RoleUpate(b,c){var a=g_RoleAccountId;null!=window.BRGameSdk&&(a={appId:g_serverconfigtxt.brapp_id,userId:g_MRGameH5_userId,serverId:g_Server_Name,serverName:g_Server_Name,roleId:E_NewPlayerID,roleName:g_RoleName,roleLevel:b,roleVip:"0",balance:"0",fightingCapacity:"0",partyName:"0",reincarnation:"0",profession:"0",sex:0,uploadType:c,account:a},console.log("BRSDK"),console.log(a),window.BRGameSdk.gameRole(a))}function register(){if(cur_use_app)if(void 0===conchConfig||null===conchConfig)Laya.stage.event("show_alert_dlg",[{type:1,txt:"conchConfig\u70b8\u4e86",callfn:function(){}}]);else{var b={},c=conchConfig.getOS();b.describeKey="register";b.describeValue="addRegister";"Conch-ios"==c?b.code="register01":"Conch-android"==c&&(b.code="register02");b=JSON.stringify(b);sendtonative("onUmengEvent",b)}}function dyRegister(b){if(cur_use_app){var c={};c.type=b;c.success=!0;b=JSON.stringify(c);sendtonative("onDouYinRegisterEvent",b)}}function dyLogin(b){cur_use_app&&sendtonative("onSetDouYinUserID",b)}function dyPayData(b,c){var a={type:"H5\u76d2\u5b50\u652f\u4ed8"};a.name=b;a.id=Laya.Browser.now();a.channel="\u6296\u97f3";a.money=c;a.quota="1";a.success=!0;a=JSON.stringify(a);if(null!=window.appAndroidJS)if(window.appAndroidJS.onDouYinPayEvent)window.appAndroidJS.onDouYinPayEvent(a);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"onDouYinPayEvent\u65b9\u6cd5\u4e0d\u5b58\u5728",callfn:function(){}}]);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"window.appAndroidJS\u4e0d\u5b58\u5728",callfn:function(){}}])}function h5BoxCheck(){return-1!=(window.location.href+"").indexOf("douyinReport")?!0:!1}function h5BoxRegister(b){var c={};c.type=b;c.success=!0;b=JSON.stringify(c);if(null!=window.appAndroidJS)if(window.appAndroidJS.onDouYinRegisterEvent)window.appAndroidJS.onDouYinRegisterEvent(b);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"onDouYinRegisterEvent\u65b9\u6cd5\u4e0d\u5b58\u5728",callfn:function(){}}]);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"window.appAndroidJS\u4e0d\u5b58\u5728",callfn:function(){}}])}function loginCheckYXF(){var b={token:"",username:""},c=new Laya.HttpRequest,a=["username\x3de135059397","memberkey\x3d1630304376349907471","token\x3d1630310574399790530"];b.token=a[2].split("\x3d")[1];b.username=a[0].split("\x3d")[1];console.log(JSON.stringify(b));c.once(Laya.Event.COMPLETE,this,function(a){1==a.code&&(console.log("\x3c------\u767b\u5f55\u6821\u9a8c\u5931\u8d25------\x3e:"),console.log(a));0==a.code&&(console.log("\x3c------\u767b\u5f55\u6821\u9a8c\u6210\u529f------\x3e:"),console.log(a),a=a.data,g_sdk_userID=a.userInfo.userId,g_sdk_userName=a.userInfo.username,g_sdk_userUid=a.idInfo.id)});c.once(Laya.Event.ERROR,this,function(a){console.log("\x3c------\u767b\u5f55\u6821\u9a8c\u5931\u8d25------\x3e:");console.log(a)});c.send("https://sdkapiv2.youxifan.com/sdkapi/members/checkToken",JSON.stringify(b),"post","json",["Content-Type","application/json;charset\x3dUTF-8"])}function payGameH5YXF(b){var c=new Laya.HttpRequest,a={uid:g_sdk_userUid+"",roleid:g_sdk_userID+"",money:b+"",serverid:g_server_area.nIdx+"",appKey:"6a022923229d32f5df632b4a1ad0fef4"};c.once(Laya.Event.COMPLETE,this,function(a){console.log("\x3c------\u8bf7\u6c42\u6210\u529f------\x3e:");console.log(a);a={amount:b,roleid:g_sdk_userID,serverid:g_server_area.nIdx,productname:"\u523a\u6740(\u9f99\u541f)H5",attach:a.cporderid,productdesc:"\u5143\u5b9d",payCpSign:a.sign,cpUid:g_sdk_userUid};null!=window.YXFH5SDK&&(console.log("\u652f\u4ed8\u6e38\u620fFan"),window.YXFH5SDK.openPay(a))});c.once(Laya.Event.ERROR,this,function(a){console.log("\x3c------\u8bf7\u6c42\u5931\u8d25------\x3e:");console.log(a)});c.send("http://140.210.16.91:8066",JSON.stringify(a),"post","json",["Content-Type","application/json;charset\x3dUTF-8"])}function userAgentH5(b,c){var a=new Laya.HttpRequest,d={deviceCode:b.toString(),deviceType:c,gameZone:""};null!=g_GameConfigWEB&&null!=g_GameConfigWEB.id&&(d.gameZone=g_GameConfigWEB.id.toString());a.once(Laya.Event.ERROR,this,function(a){});a.once(Laya.Event.COMPLETE,this,function(a){console.log("\x3c------userAgentH5\u4e0a\u62a5\u6210\u529f------\x3e:");console.log(a)});a.send("https://weblist.longzuyq.com/Statistics/SavePlayerLoginRecord",JSON.stringify(d),"post","json",["Content-Type","application/json;charset\x3dUTF-8"])}var GAME_IP="192.168.8.234",GAME_PORT=8088,port_key="",CM_QUERYUSERNAME=80,CM_QUERYBAGITEMS=81,CM_QUERYUSERSTATE=82,CM_QUERYCHR=100,CM_NEWCHR=101,CM_DELCHR=102,CM_SELCHR=103,CM_SELECTSERVER=104,CM_QUERYDELCHR=105,CM_GETBACKDELCHR=106,CM_NEWGUILD=823,CM_SHOWFASHION=933,CM_QUERYCLOSE=990,CM_DROPITEM=1E3,CM_PICKUP=1001,CM_OPENDOOR=1002,CM_TAKEONITEM=1003,CM_TAKEOFFITEM=1004,CM_EAT=1006,CM_BUTCH=1007,CM_MAGICKEYCHANGE=1008,CM_SOFTCLOSE=1009,CM_CLICKNPC=1010,CM_MERCHANTDLGSELECT=1011,CM_MERCHANTQUERYSELLPRICE=1012,CM_USERSELLITEM=1013,CM_USERBUYITEM=1014,CM_USERGETDETAILITEM=1015,CM_DROPGOLD=1016,CM_1017=1017,CM_LOGINNOTICEOK=1018,CM_GROUPMODE=1019,CM_CREATEGROUP=1020,CM_ADDGROUPMEMBER=1021,CM_DELGROUPMEMBER=1022,CM_USERREPAIRITEM=1023,CM_MERCHANTQUERYREPAIRCOST=1024,CM_DEALTRY=1025,CM_DEALADDITEM=1026,CM_DEALDELITEM=1027,CM_DEALCANCEL=1028,CM_DEALCHGGOLD=1029,CM_DEALEND=1030,CM_USERSTORAGEITEM=1031,CM_USERTAKEBACKSTORAGEITEM=1032,CM_WANTMINIMAP=1033,CM_USERMAKEDRUGITEM=1034,CM_OPENGUILDDLG=1035,CM_GUILDHOME=1036,CM_GUILDMEMBERLIST=1037,CM_GUILDADDMEMBER=1038,CM_GUILDDELMEMBER=1039,CM_GUILDUPDATENOTICE=1040,CM_GUILDUPDATERANKINFO=1041,CM_ADJUST_BONUS=1043,CM_GUILDALLY=1044,CM_GUILDBREAKALLY=1045,CM_MISSIONINFO=1046,CM_USERBINDBUYITEM=1056,CM_CHGPASSWORD=1221,CM_SETPASSWORD=1222,CM_OPENREDPACK=1512,CM_AUTOMOVEACTION=1518,CM_SPEEDHACKUSER=10430,CM_IDPASSWORD=2001,CM_ADDNEWUSER=2002,CM_CHANGEPASSWORD=2003,CM_UPDATEUSER=2004,CM_GETBACKPASSWORD=2010,CM_PASSWORD=3E3,CM_THROW=3005,CM_HORSERUN=3009,CM_TURN=3010,CM_WALK=3011,CM_SITDOWN=3012,CM_RUN=3013,CM_HIT=3014,CM_HEAVYHIT=3015,CM_BIGHIT=3016,CM_SPELL=3017,CM_POWERHIT=3018,CM_LONGHIT=3019,CM_DIYHIT=3020,CM_WIDEHIT=3024,CM_FIREHIT=3025,CM_CRSHIT=3026,CM_TWINHIT=3026,CM_SAY=3030,CM_TWNHIT=3037,CM_43HIT=3038,CM_SWORDHIT=3039,CM_60HIT=3060,CM_61HIT=3061,CM_62HIT=3062,CM_66HIT=3066,CM_100HIT=3067,CM_101HIT=3068,CM_102HIT=3069,CM_103HIT=3070,CM_VALIDATECHANGE=11029,CM_VALIDATE=11030,CM_ZHAOMU=10210,CM_RESOLVEITEM=15532,CM_CLIENTQUERYRESOLVE=15533,CM_FRIENDS=20005,CM_QUICKTAB=20007,CM_BOXITEM=20009,CM_EMOJI=20011,CM_QUERYUSERSET=49999,CM_GETSHOPITEMS=5002,CM_BUYSHOPITEM=5003,SM_BUYSHOPITEM_FAIL=5005,CM_SENTSHOPITEM=25002,SM_SENTSHOPITEM_FAIL=25005,CM_GETRANKING=5007,CM_GETMYRANKING=5008,CM_TAKEOFFBOX=5511,SM_SHOWBOX=5011,CM_OPENBOX=5012,SM_OPENBOX_FAIL=5014,SM_OPENBOX_SUCCESS=5013,CM_ROTATIONBOX=5015,SM_SENDGETBOXITEMINDEX=5016,CM_SENDGETSELBOXITEM=5017,CM_QUERYSERVERNAME=5031,CM_DOMAINNAMEINFO=5033,CM_SENDSELLGAMEGOLDDALITEM=5036,CM_SENDBUYGAMEGOLDDALITEM=5038,CM_SENDCANCELGAMEGOLDDALITEM=5039,CM_OVERLAPITEM=5052,SM_OVERLAPITEM_OK=5054,SM_OVERLAPITEM_FAIL=5055,CM_HEROOVERLAPITEM=5053,SM_HEROOVERLAPITEM_OK=5056,SM_HEROOVERLAPITEM_FAIL=5057,CM_PACKAGEITEM=5058,CM_HEROPACKAGEITEM=5059,CM_REPAIRFIRDRAGON=5066,CM_QUERYUSERSHOPS=5070,CM_GETUSERSHOPS=5071,CM_QUERYUSERSHOPITEMS=5073,CM_GETUSERSHOPITEMS=5074,CM_SEARCHSHOPITEMS=5076,CM_SEARCHGETSHOPITEMS=5077,CM_QUERYMYSHOPSELLINGITEMS=5079,CM_QUERYMYSHOPSELLEDITEMS=5080,CM_QUERYMYSHOPSTORAGEITEMS=5081,CM_GETMYSHOPITEMS=5082,CM_SENDADDTOMYSHOP=5086,CM_SENDCHANGEMYSHOPITEM=5089,CM_SENDMOVEMYSHOPITEM=5092,CM_QUERYSELECTSHOPINFO=5095,SM_QUERYSELECTSHOPINFO_FAIL=5097,SM_VIEWBAITAN=7561,CM_BUYBAITANITEM=7562,CM_SENDSHOPSTALLSTATUS=5098,CM_SENDBUYUSERSHOPITEM=5099,CM_SENDDELETESELLEDITEM=5102,SM_OPENUPGRADEDLG=5108,CM_SENDUSERSPEEDING=5103,CM_CHANGESPEED=5104,CM_UPGRADEDLGITEM=5105,CM_CANCELUPGRADEDLGITEM=5121,CM_SENDCONNECT=5125,CM_SENDDISCONNECT=5126,CM_SENDDATA=5127,CM_CHALLENGETRY=5130,CM_CHALLENGEADDITEM=5131,CM_CHALLENGEDELITEM=5132,CM_CHALLENGECANCEL=5133,CM_CHALLENGECHGGOLD=5134,CM_CHALLENGECHGGAMEDIAMOND=5135,CM_CHALLENGEEND=5136,CM_SENDUPGRADEDIALOG=5153,CM_SENDUPGRADEDIALOGEX=51530,CM_SETTINGGEM=5552,CM_SENDREMOVEGEM=5557,CM_HELPBUTTONCLICK=5158,CM_SENDPLEASEDRINK=5161,CM_SENDGIVENPCWINE=5164,CM_SENDSELECTFINGER=5167,CM_SENDDRINK=5168,CM_SENDGETBACKHERO=5175,CM_ASSESSMENTHERO=5178,CM_SENDHEROAUTOPRACTICE=5182,CM_SENDACUPOINTCLICK=5195,CM_SENDTRAININGMERIDIANCLICK=5196,CM_TRYUSECONTINUOUS=5198,CM_CHANGECONTINUOUSMAGICORDER=5202,CM_SENDMODULEMD5=5210,CM_SENDSHOPNAME=5211,CM_SELLOFFITEM=5216,CM_BUYSELLOFFITEM=5223,CM_GETSELLOFFDETAILITEM=5224,CM_GUI=5239,CM_MSGWINDOWS=5241,CM_CUSTOMBUTTON=5243,CM_STORAGEVIEW=5245,CM_BEAD=5247,CM_GUESSFINGER=5250,CM_GOLDEXCHANGE=5253,CM_OVERLAPDRUG=5258,SM_OVERLAPDRUG_OK=5259,SM_OVERLAPDRUG_FAIL=5260,CM_QUERYNAVIGATE=6020,SM_SELLOFFITEM=5217,SM_SELLITEM_OK=5218,SM_SELLITEM_FULL=5219,SM_SELLITEM_FAIL=5220,SM_SENDSELLITEMSLIST=5221,SM_GETSELLOFFDETAILITEM=5225,SM_BUYSELLOFFTEM_OK=5227,SM_BUYSELLOFFTEM_FAIL=5228,SM_BUYSELLOFFTEM_FULLBAG=5226,SM_H5FUNCBTN=8882,CM_HEROLOGON=1050,CM_HEROLOGOUT=1051,CM_MASTERBAGTOHEROBAG=1100,CM_HEROBAGTOMASTERBAG=1101,CM_HEROTAKEONITEM=1102,CM_HEROTAKEOFFITEM=1103,CM_HEROEAT=1104,CM_HEROTARGET=1105,CM_HERODROPITEM=1106,CM_HEROGROUPATTACK=1108,CM_HEROMAGICKEYCHANGE=1109,CM_HEROPROTECT=1110,CM_FISHMESSAGE=1599,CM_CONFIG=1399,CM_HEROMAGICKEYCHANGE=1109,CM_CONFIG=1399,CM_GDY_MSG=45613,VCM_SENDSAYMSG=1E4,VCM_SENDCLOSEPAGES=10001,VCM_SENDOVER=10002,RCM_UNBINDITEM=100,RCM_AUTOBINDITEM=110,RCM_PLAYMAPMUSIC=101,RCM_RESTOREDEVICE=102,RCM_FREEMYHERO=103,RCM_AutoOrderItem=104,RCM_StartContinuousMagicAttack=105,RCM_PlayBGMgameover=106,RCM_FindModule=107,RCM_USEMAGIC=108,RCM_EatItem=109,CM_PROTOCOL=2E3,CM_IDPASSWORD=2001,CM_ADDNEWUSER=2002,CM_CHANGEPASSWORD=2003,CM_UPDATEUSER=2004,CM_RANDOMCODE=2006,CM_CHANGERANDOMCODE=2007,CM_3037=3037,CM_GAMEGIRD=4080,CM_POWERBLOCK=0,CM_ONHORSE=5059,CM_USERBIGSTORAGEITEM=3071,CM_USERTAKEBACKBIGSTORAGEITEM=3072,CM_OPENITEMBOXEX=16E3,CM_OPENMYBAITAN=7550,SM_OPENMYBAITAN=7551,CM_STOPBAITAN=7552,CM_ADDPAIMAIITEM=7553,SM_ADDPAIMAIITEMFAIL=7554,SM_ADDPAIMAIITEMOK=7555,CM_STARTBAITAN=7559,SM_SENDSHOPNAME=5212,CM_BUYBAITANITEM=7562,CM_VIEWBAITAN=8094,SM_BUYBAITANITEM=7563,CM_SENDTOGATE=6008,CM_MOVEDRAGON=65074,CM_OPENDRAGONBOOK=65075,CM_GETMISSITEM=1111,CM_ACTORBUFFCLICK=60092,CM_ACTORBUFFBUTTON=60091,CM_API_GETITEM=5598,CM_AUTOPICKUPITEMS=6256,CM_LoginConnect_CJ=2098,CM_SelChrConnect_CJ=2099,SM_SENDTICKCOUNT=980,SM_RUSH=6,SM_RUSHKUNG=7,SM_BACKSTEP=9,SM_TURN=10,SM_WALK=11,SM_SITDOWN=12,SM_RUN=13,SM_HIT=14,SM_HEAVYHIT=15,SM_BIGHIT=16,SM_SPELL=17,SM_POWERHIT=18,SM_LONGHIT=19,SM_DIGUP=20,SM_DIGDOWN=21,SM_FLYAXE=22,SM_LIGHTING=23,SM_WIDEHIT=24,SM_FIREHIT=25,SM_CRSHIT=26,SM_ALIVE=27,SM_MOVEFAIL=28,SM_HIDE=29,SM_DISAPPEAR=30,SM_STRUCK=31,SM_DEATH=32,SM_SKELETON=33,SM_NOWDEATH=34,SM_HIT_FAIL=35,SM_TWNHIT=37,SM_TWINHIT1=37,SM_43HIT=38,SM_SWORDHIT=39,SM_HEAR=40,SM_FEATURECHANGED=41,SM_USERNAME=42,SM_WINEXP=44,SM_LEVELUP=45,SM_DAYCHANGING=46,SM_CUTE=47,SM_WINEEXP=48,SM_LOGON=50,SM_NEWMAP=51,SM_ABILITY=52,SM_HEALTHSPELLCHANGED=53,SM_MAPDESCRIPTION=54,SM_GAMEGOLDNAME=55,SM_GAMEPOINTNAME=56,SM_GAMEGLORY=57,SM_60HIT=60,SM_61HIT=61,SM_62HIT=62,SM_66HIT=66,SM_100HIT=67,SM_101HIT=68,SM_102HIT=69,SM_103HIT=70,SM_SYSMESSAGE=100,SM_GROUPMESSAGE=101,SM_CRY=102,SM_WHISPER=103,SM_GUILDMESSAGE=104,SM_MOVEMESSAGE=105,SM_DELAYMESSAGE=106,SM_CENTERMESSAGE=107,SM_TOPCHATBOARDMESSAGE=108,SM_MOVEUPMESSAGE=109,SM_ADDITEM=200,SM_BAGITEMS=201,SM_DELITEM=202,SM_UPDATEITEM=203,SM_ADDMAGIC=210,SM_SENDMYMAGIC=211,SM_DELMAGIC=212,SM_SENDMAGICLIST=217,SM_PASSWD_FAIL=503,SM_NEWID_SUCCESS=504,SM_NEWID_FAIL=505,SM_CHGPASSWD_SUCCESS=506,SM_CHGPASSWD_FAIL=507,SM_GETBACKPASSWD_SUCCESS=508,SM_GETBACKPASSWD_FAIL=509,SM_SENGSHOPITEMS=5006,SM_QUERYCHR=520,SM_NEWCHR_SUCCESS=521,SM_NEWCHR_FAIL=522,SM_DELCHR_SUCCESS=523,SM_DELCHR_FAIL=524,SM_STARTPLAY=525,SM_STARTFAIL=526,SM_QUERYCHR_FAIL=527,SM_OUTOFCONNECTION=528,SM_PASSOK_SELECTSERVER=529,SM_SELECTSERVER_OK=530,SM_NEEDUPDATE_ACCOUNT=531,SM_UPDATEID_SUCCESS=532,SM_UPDATEID_FAIL=533,SM_QUERYDELCHR=534,SM_GETBAKCHAR_SUCCESS=535,SM_GETBAKCHAR_FAIL=536,SM_DROPITEM_SUCCESS=600,SM_DROPITEM_FAIL=601,SM_ITEMSHOW=610,SM_ITEMHIDE=611,SM_OPENDOOR_OK=612,SM_OPENDOOR_LOCK=613,SM_CLOSEDOOR=614,SM_TAKEON_OK=615,SM_TAKEON_FAIL=616,SM_STORAGEVIEW=5246,SM_TAKEOFFITEM=5026,SM_TAKEOFF_OK=619,SM_TAKEOFF_FAIL=620,SM_SENDUSEITEMS=621,SM_WEIGHTCHANGED=622,SM_CLEAROBJECTS=633,SM_CHANGEMAP=634,SM_EAT_OK=635,SM_EAT_FAIL=636,SM_BUTCH=637,SM_MAGICFIRE=638,SM_MAGICFIRE_FAIL=639,SM_MAGIC_LVEXP=640,SM_DURACHANGE=642,SM_MERCHANTSAY=643,SM_MERCHANTDLGCLOSE=644,SM_SENDGOODSLIST=645,SM_SENDUSERSELL=646,SM_SENDBUYPRICE=647,SM_USERSELLITEM_OK=648,SM_USERSELLITEM_FAIL=649,SM_BUYITEM_SUCCESS=650,SM_BUYITEM_FAIL=651,SM_SENDDETAILGOODSLIST=652,SM_GOLDCHANGED=653,SM_CHANGELIGHT=654,SM_LAMPCHANGEDURA=655,SM_CHANGENAMECOLOR=656,SM_CHARSTATUSCHANGED=657,SM_SENDNOTICE=658,SM_GROUPMODECHANGED=659,SM_CREATEGROUP_OK=660,SM_CREATEGROUP_FAIL=661,SM_GROUPADDMEM_OK=662,SM_GROUPDELMEM_OK=663,SM_GROUPADDMEM_FAIL=664,SM_GROUPDELMEM_FAIL=665,SM_GROUPCANCEL=666,SM_GROUPMEMBERS=667,SM_SENDUSERREPAIR=668,SM_USERREPAIRITEM_OK=669,SM_USERREPAIRITEM_FAIL=670,SM_SENDREPAIRCOST=671,SM_DEALMENU=673,SM_DEALTRY_FAIL=674,SM_DEALADDITEM_OK=675,SM_DEALADDITEM_FAIL=676,SM_DEALDELITEM_OK=677,SM_DEALDELITEM_FAIL=678,SM_DEALCANCEL=681,SM_DEALREMOTEADDITEM=682,SM_DEALREMOTEDELITEM=683,SM_DEALCHGGOLD_OK=684,SM_DEALCHGGOLD_FAIL=685,SM_DEALREMOTECHGGOLD=686,SM_DEALSUCCESS=687,SM_SENDUSERSTORAGEITEM=700,SM_STORAGE_OK=701,SM_STORAGE_FULL=702,SM_STORAGE_FAIL=703,SM_SAVEITEMLIST=704,SM_TAKEBACKSTORAGEITEM_OK=705,SM_TAKEBACKSTORAGEITEM_FAIL=706,SM_TAKEBACKSTORAGEITEM_FULLBAG=707,SM_AREASTATE=708,SM_DELITEMS=709,SM_READMINIMAP_OK=710,SM_READMINIMAP_FAIL=711,SM_SENDUSERMAKEDRUGITEMLIST=712,SM_MAKEDRUG_SUCCESS=713,SM_MAKEDRUG_FAIL=714,SM_716=716,SM_CHANGEGUILDNAME=750,SM_SENDUSERSTATE=751,SM_SUBABILITY=752,SM_OPENGUILDDLG=753,SM_OPENGUILDDLG_FAIL=754,SM_SENDGUILDMEMBERLIST=756,SM_GUILDADDMEMBER_OK=757,SM_GUILDADDMEMBER_FAIL=758,SM_GUILDDELMEMBER_OK=759,SM_GUILDDELMEMBER_FAIL=760,SM_GUILDRANKUPDATE_FAIL=761,SM_BUILDGUILD_OK=762,SM_BUILDGUILD_FAIL=763,SM_DONATE_OK=764,SM_DONATE_FAIL=765,SM_MYSTATUS=766,SM_MENU_OK=767,SM_GUILDMAKEALLY_OK=768,SM_GUILDMAKEALLY_FAIL=769,SM_GUILDBREAKALLY_OK=770,SM_GUILDBREAKALLY_FAIL=771,SM_DLGMSG=772,SM_SPACEMOVE_HIDE=800,SM_SPACEMOVE_SHOW=801,SM_RECONNECT=802,SM_GHOST=803,SM_SHOWEVENT=804,SM_SHOWEVENTEX=1804,SM_HIDEEVENT=805,SM_SPACEMOVE_HIDE2=806,SM_SPACEMOVE_SHOW2=807,SM_TIMECHECK_MSG=810,SM_ADJUST_BONUS=811,SM_NEWGUILD=822,SM_OPENMISSIONDLG=931,SM_DELETEDELAYMESSAGE=932,SM_SHOWFASHION=934,CM_GUILDMANAGEEDIT=1066,SM_OPENHEALTH=1100,SM_CLOSEHEALTH=1101,SM_CHANGEFACE=1104,SM_BREAKWEAPON=1102,SM_INSTANCEHEALGUAGE=1103,SM_VERSION_FAIL=1106,SM_ITEMUPDATE=1500,SM_MONSTERSAY=1501,SM_NAVIGATIONINFO=1507,SM_MAGSBYSSHOW=1514,SM_PROGRESSBARDLG=1516,SM_PLAYMAGICBALLEFFECT=1517,SM_PLAYDICE=1200,SM_THROW=65069,SM_HANGUP=1519,SM_HANGUPCLOSE=1520,SM_DIYHIT=2020,SM_DIYMAGIC=8815,SM_SUITITEMLIST=2049,SM_ZHAOMU=4001,SM_ADDZHAOMU=4002,SM_MISSIONNPC=5E3,SM_ATTATCKMODE=5001,SM_SENDGAMELIST=5002,SM_PASSWORD=5009,SM_HORSERUN=5,SM_TAKEONITEM=5025,SM_UNBINDLIST=5048,SM_EFFECTIMAGELIST=5049,SM_CHANGESPEED=5069,SM_SPECIALCMD=5118,SM_WEATHER=5122,SM_ABILITYALCOHOL=5187,SM_OPENCOBWEBWINDING=5192,SM_CLOSECOBWEBWINDING=5193,SM_TRAININGNG=5203,SM_MAPCANRUN=5207,SM_PLUGFILE=5208,SM_MODULEMD5=5209,SM_BLACKMODULEMD5=5210,SM_SENDUSERADDEFFECT=5230,SM_PLAYMAGICBALLEFFECT_GOM=5231,SM_SENDUSEREFFECT=5111,SM_STONEVALUE=5236,SM_BEAD=5248,SM_BINDGOLDCHANGED=5256,SM_HIT_2=5232,SM_HIT_3=5233,SM_HIT_4=5234,SM_HIT_5=5235,SM_ITEMDESCLIST=5252,SM_SAFEPOINT=5298,SM_SENDUSERICONGIF=5309,SM_FILTERITEM=15545,SM_BLUEMISSIONLIST=15547,SM_DOUBLEEXP=15612,SM_POISON_DECHEALTH=17001,SM_POISON_DAMAGEARMOR=17003,SM_POISON_STONE=17007,SM_STRUCK_BLAST=17019,SM_HEROGROUPATTACK=17022,SM_REBOUND=17023,SM_NPCHSPELLCHANGED=5257,SM_SERVERCONFIG=20002,SM_GETITEMINFO=20004,SM_FRIENDS=20006,SM_GETFRIENDINFO=5249,SM_EXCHGTAKEON_OK=65023,SM_EXCHGTAKEON_FAIL=65024,SM_TEST=65037,SM_ACTION_MIN=65070,SM_ACTION_MAX=65071,SM_ACTION2_MIN=65072,SM_ACTION2_MAX=65073,SM_FLASHMISSIONBUTTON=65073,SM_OPENMISSIONWINDOWEX=65076,SM_CLOSEMISSIONWINDOWEX=65077,SM_NEWTASKLIST=65079,CM_NEWTASKOPERATE=65080,SM_NEWTASKOPERATE=65081,CM_GETMAIL=65089,SM_SENDMAILSTATE=65090,SM_SENDUSERMAIL=65091,CM_GETMAILCONTENT=65092,SM_SENDUSERMAILCONTENT=65093,CM_GETMAILITEM=65094,SM_UPDATEUSERMAILITEM=65095,CM_GETALLMAIL=65096,CM_DELETEMAIL=65097,CM_DELETEALLMAIL=65098,CM_READMAIL=65099,CM_READALLMAIL=65100,SM_MAIL_OK=65101,SM_MAIL_FAIL=65102,SM_DELETEALLMAIL=65103,SM_ADDNEWMAIL=65104,SM_OFFLINETIME=10012,SM_EXTENDBAGSLOT=65105,CM_EXTENDLOCKEDBAGSLOT=65106,CM_OPENNEWGUILDDLG=1065,SM_OPENNEWGUILDDLG=785,TK_TICKTIME=1798,CM_GUILDOPERATE=1786,CM_GUILDMANAGERECRUIT=1067,CM_NEWGUILD=823,SM_OPENGUILDINFO=786,CM_GUILDMANAGEADD=1068,SM_OPENBIGMERCHANTBIGDLG=5065,SM_CLOSEBIGMERCHANTBIGDLG=5066,SM_LEGTZLIST=15546,SM_POISON_STONE=17007,SM_LIGHTINGEX=5194,SM_SENDACTORBUFFS=6010,SM_MENU_OK=767,SM_REDPACK=1510,SM_OpenRedPac=1511,CM_OpenRedPack=1512,CM_SENDREDPACKED=15613,CM_SENDREDPACKEDREPLY=15614,SM_OPENMISSIONWINDOW=65071,SM_CLOSECLIENTBUFF=6011,SM_CLOSECLIENTBUFF=6011,SM_ZHAOMU=4001,CM_ZHAOMU=10210,SM_NPCITEMSHOW=1521,SM_FISHMESSAGE=1299,CM_FISHMESSAGE=1599,E_ROLE_CHANGE_HP=100001,E_ROLE_CHANGE_MP=100002,E_ROLE_POISONING_RED=100003,E_ROLE_POISONING_GRE=100004,E_ROLE_ALIVE=100005,E_ROLE_LULL=100006,SM_MERCHANTDLGCLOSE=644,SM_CORRECTPOINT=5566,SM_STOPBAITAN=7566,SM_AUTOGOTOXY=5027,SM_SCREENEFFECT=5051,SM_CUSTOMBUTTON=5244,SM_WEBH5VERSION=5567,SM_SENDH5CODE=5570,CM_H5CLOSE=5571,CM_H5ATTACKMODE=5573,SM_SENDWEBBROWSER=5110,SM_SOFTCLOSE=5159,SM_OPENUPGRADEDIALOG=5154,SM_SENDUPGRADEDIALOG_FAIl=5156,SM_SENDUPGRADEDIALOG_OK=5155,SM_LUASOCKET=6017,CM_LUASOCKET=6018,CM_WECHATANDQQ=2012,SM_WECHATANDQQ=2013,SM_WECHATANDQQRes=2014,SM_GETSERVERLIST=7280,SM_GETH5CONFIG=7281,SM_BIGDATA=15548,SM_USERICONLIST=812,SM_SENDUSERICON=5109,SM_PACKAGEITEM_OK=5060,SM_PACKAGEITEM_FAIL=5061,CM_MAPLOADEND=5568,SM_QUERYUSERSHOPS=5072,SM_SEARCHSHOPITEMS=5078,SM_QUERYSELECTSHOPINFO=5096,SM_QUERYSELECTSHOPINFO_FAIL=5097,SM_QUERYUSERSHOPITEMS=5075,SM_SENDBUYUSERSHOPITEM_OK=5100,SM_SENDBUYUSERSHOPITEM_FAIL=5101,SM_SENDMOVEMYSHOPITEM_OK=5093,SM_SENDMOVEMYSHOPITEM_FAIL=5094,SM_QUERYMYSHOPSELLINGITEMS=5083,SM_QUERYMYSHOPSELLEDITEMS=5084,SM_QUERYMYSHOPSTORAGEITEMS=5085,SM_SENDADDTOMYSHOP_OK=5087,SM_SENDADDTOMYSHOP_FAIL=5088,SM_SENDCHANGEMYSHOPITEM_OK=5090,SM_SENDCHANGEMYSHOPITEM_FAIL=5091,SM_SENDSETTINGGEM_OK=5550,SM_SENDSETTINGGEM_FAIL=5551,SM_BOXITEM=20010,SM_HEROBAGCOUNT=821,SM_HEROBAGITEMS=902,SM_MASTERBAGTOHEROBAG_OK=817,SM_MASTERBAGTOHEROBAG_FAIL=818,SM_HEROBAGTOMASTERBAG_OK=819,SM_HEROBAGTOMASTERBAG_FAIL=820,SM_HEROADDITEM=905,SM_HERODELITEM=906,SM_HEROUPDATEITEM=927,SM_HEROTAKEON_OK=907,SM_HEROTAKEON_FAIL=908,SM_HERODROPITEM_SUCCESS=920,SM_HERODROPITEM_FAIL=921,SM_HEROEAT_OK=911,SM_HEROEAT_FAIL=912,SM_HERODELITEMS=928,SM_HEROTAKEOFF_OK=909,SM_HEROTAKEOFF_FAIL=910,SM_HEROCHANGEITEM=929,SM_HERODURACHANGE=919,SM_HEROPACKAGEITEM_OK=5062,SM_HEROPACKAGEITEM_FAIL=5063,SM_HEROLOGOUT=896,SM_HEROLOGON=897,SM_HEROLOGON_OK=930,SM_HEROLOGOUT_OK=918,SM_HEROLOYAL=898,SM_HEROABILITY=900,SM_HEROSUBABILITY=901,SM_SENDHEROUSEITEMS=903,SM_SENDMYHEROMAGIC=904,SM_HEROADDMAGIC=913,SM_HERODELMAGIC=914,SM_HEROMAGIC_LVEXP=925,SM_HEROLEVELUP=922,SM_HEROWINEXP=923,SM_HEROABILITYNG=5189,SM_HEROABILITYALCOHOL=5190,SM_HEROABILITYMERIDIANS=5191,SM_HEROWEIGHTCHANGED=924,SM_HEROANGERVALUE=916,SM_SENDSUPERSHILEDEFFECT=5112,SM_TZDESCLIST=5352,SM_OPENITEMBOXEX=6E3,SM_AUTOPICKUPITEMS=6255,SM_CJ=714,SM_API_GETITEM=5599,SM_RANDOMCODE=2008,SM_SENDNEWLINEMSG=110,SM_SENDH5TOPEFFECT=5667,SM_UPDATIDCARD=5330,SM_UPDATIDCARD_FAIL=5331,CM_UPDATIDCARD=5329,CM_GETGAMELIST=8280,SM_ITEMSCORE=9098,SM_SERVERCLOSE=10011,SM_RUSHKUNG_STOP=3007,CM_BUYCRISTAL=25010,SM_BUYCRISTAL=25011,CM_SELLCRISTAL=25012,SM_SELLCRISTAL=25013,SM_CRISTALINFO=25014,SM_OPENCRISTALFORM=25019,CM_QUERYCRISTALINFO=25015,SM_UPDATEITEMSCORE=5265,SM_ITEMSCORETEXT=9100,CM_GUILNEWCREATE=1787,CM_GUILOPENNEWCREATE=1788,SM_SENDGUILDCREATESTUFF=1789,ET_MAPEFFECT=100,ET_FIRE=5,ET_KUNMO=4,ET_STONEMINE=11,ET_PILESTONES=3,ET_DIGOUTZOMBI=1,ET_HOLYCURTAIN=4,ET_SCULPEICE=6,ET_FIRELevel1=115,ET_FIRELevel2=116,ET_FIRELevel3=117,ET_ICEPEAK=10,ET_EYEOFDEATH=52,ET_LOCK=51,ET_MAPEFFECT=100,ET_FIREFLOWER_0=78,ET_FIREFLOWER_1=79,ET_FIREFLOWER_2=80,ET_FIREFLOWER_3=81,ET_FIREFLOWER_4=82,ET_FIREFLOWER_5=83,ET_FIREFLOWER_6=84,ET_FIREFLOWER_7=85,ET_FIREFLOWER_8=86,ET_FIREDRAGON=87,ET_FOUNTIAN=88,ET_LAVA=16,mtReady=0,mtFly=1,mtExplosion=2,mtFlyAxe=3,mtFireWind=4,mtFireGun=5,mtLightingThunder=6,mtThunder=7,mtExploBujauk=8,mtBujaukGroundEffect=9,mtKyulKai=10,mtFlyArrow=11,mt12=12,mt13=13,mt14=14,mt15=15,mt16=16,CCMD_CONFIG=1,SCMD_CONFIG=1,CCMD_ROOM=2,SCMD_ROOM=2,SM_PLAYSOUND=5064,SM_PLAYMUSIC=5064;function TSocketHeader(b){var c={};c.dwCode1=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24)>>>0;c.wIdent=b[4]+(b[5]<<8)>>>0;c.wReserved=b[6]+(b[7]<<8)>>>0;c.dwCode2=b[8]+(b[9]<<8)+(b[10]<<16)+(b[11]<<24)>>>0;c.dwCrc=b[12]+(b[13]<<8)+(b[14]<<16)+(b[15]<<24)>>>0;c.nLength=b[16]+(b[17]<<8)+(b[18]<<16)+(b[19]<<24);return c}function TMessageBodyWL(b){var c={};c.lParam1=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24)>>>0;c.lParam2=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24)>>>0;c.lParam3=b[8]+(b[9]<<8)+(b[10]<<16)+(b[11]<<24)>>>0;c.lTag1=b[12]+(b[13]<<8)+(b[14]<<16)+(b[15]<<24)>>>0;c.lTag2=b[16]+(b[17]<<8)+(b[18]<<16)+(b[19]<<24)>>>0;return c}function TMessageBodyL(b){var c={};c.lParam1=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24)>>>0;c.lParam2=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24)>>>0;c.lParam3=b[8]+(b[9]<<8)+(b[10]<<16)+(b[11]<<24)>>>0;return c}function TMessageBodyW(b){var c={};c.Param1=b[0]+(b[1]<<8)>>>0;c.Param2=b[2]+(b[3]<<8)>>>0;c.Tag1=b[4]+(b[5]<<8)>>>0;c.Tag2=b[6]+(b[7]<<8)>>>0;return c}function TFeature(b,c){var a={};a.feature=b;a.buffer=c;return a}function TCharDesc(b){var c={};c.feature=b[0]>>>0;c.status=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24)>>>0;return c}function THumFeature(b){var c={};c.wRace=b[0]+(b[1]<<8)>>>0;c.wWeapon=b[2]+(b[3]<<8)>>>0;c.wDress=b[4]+(b[5]<<8)>>>0;c.wShield=b[6]+(b[7]<<8)>>>0;c.btGender=b[8]>>>0;c.btJob=b[9]>>>0;c.btHair=b[10]>>>0;c.btHorseType=b[11]>>>0;c.btCaseltGuild=b[12]>>>0;c.boShopStall=b[13]>>>0;c.btZhaoMuCount=b[14]>>>0;c.btColor=b[15]>>>0;c.btMagBubbleLevel=b[16]>>>0;c.wDressEffType=b[18]+(b[19]<<8)>>>0;c.nWeaponEffectIndex=b[20]+(b[21]<<8);c.wWeaponEffectOffSet=b[22]+(b[23]<<8)>>>0;c.nDressEffectIndex=b[24]+(b[25]<<8);c.wDressEffectOffSet=b[26]+(b[27]<<8)>>>0;c.nSex=b[28]>>>0;c.nIcon=b[30]+(b[31]<<8)>>>0;65530<=c.nIcon&&(c.nIcon=-1);c.boLeader=b[32];c.boWeaponNormalDraw=b[33];var a=GameUtil.slice(b,35,61);c.sIconName=gbkByteArr2UcsStr(a);c.nWeaponMakeIndex=b[64]+(b[65]<<8)+(b[66]<<16)+(b[67]<<24);c.btIconColor=b[68]>>>0;c.boDressNormalDraw=b[69];c.btHat=b[70];c.boPhantom=b[71];c.btAlpha=b[72];c.nShieldEffectIndex=-1;c.boShieldNormalDraw=0;c.wShieldEffectOffSet=0;c.nReserve=0;c.boShieldNormalDraw=b[73];c.nShieldEffectIndex=b[74]+(b[75]<<8);65530<=c.nShieldEffectIndex&&(c.nShieldEffectIndex=-1);c.wShieldEffectOffSet=b[76]+(b[77]<<8)>>>0;c.nReserve=b[80]+(b[81]<<8)+(b[82]<<16)+(b[83]<<24);return c}function TShopClientItem(b){var c={};c.s=TStdItem(GameUtil.slice(b,0,258));c.GameMoney=b[258];var a=260;c.ImageIndex=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.ImageCount=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);a++;c.Memo1=gbkByteArr2UcsStr(GameUtil.slice(b,a,a+18));a+=19;c.Memo2=gbkByteArr2UcsStr(GameUtil.slice(b,a,a+150));c.Dura=c.s.DuraMax;c.DuraMax=c.s.DuraMax;return c}function TMonFeature(b){var c={};c.wRaceImg=b[0]+(b[1]<<8)>>>0;c.wWeapon=b[2]+(b[3]<<8)>>>0;c.wAppr=b[4]+(b[5]<<8)>>>0;c.btColor=b[6]>>>0;c.reserved=b[7]>>>0;return c}function TAbility(b){var c={},a=new Uint32Array(b.buffer,0,96);c.Level=a[0];c.AC=a[1];c.MaxAC=a[2];c.MAC=a[3];c.MaxMAC=a[4];c.DC=a[5];c.MaxDC=a[6];c.MC=a[7];c.MaxMC=a[8];c.SC=a[9];c.MaxSC=a[10];c.HP=a[11];c.MP=a[12];c.MaxHP=a[13];c.MaxMP=a[14];c.Exp=a[15];c.MaxExp=a[16];c.Weight=a[17];c.MaxWeight=a[18];c.WearWeight=a[19];c.MaxWearWeight=a[20];c.HandWeight=a[21];c.MaxHandWeight=a[22];c.CreditPoint=a[23];c.NewValue=[];c.NewValue[0]=b[96];c.NewValue[1]=b[97];c.NewValue[2]=b[98];c.NewValue[3]=b[99];c.NewValue[4]=b[100];c.NewValue[5]=b[101];c.NewValue[6]=b[102];c.NewValue[7]=b[103];c.NewValue[8]=b[104];c.NewValue[9]=b[105];c.NewValue[10]=b[106];c.NewValue[11]=b[107];c.NewValue[12]=b[108];c.NewValue[13]=b[109];c.NewValue[14]=b[110];c.NewValue[15]=b[111];return c}function TNakedAbility(b){var c={};c.AC=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24);c.MaxAC=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24);c.MAC=b[8]+(b[9]<<8)+(b[10]<<16)+(b[11]<<24);c.MaxMAC=b[12]+(b[13]<<8)+(b[14]<<16)+(b[15]<<24);c.DC=b[16]+(b[17]<<8)+(b[18]<<16)+(b[19]<<24);c.MaxDC=b[20]+(b[21]<<8)+(b[22]<<16)+(b[23]<<24);c.MC=b[24]+(b[25]<<8)+(b[26]<<16)+(b[27]<<24);c.MaxMC=b[28]+(b[29]<<8)+(b[30]<<16)+(b[31]<<24);c.SC=b[32]+(b[33]<<8)+(b[34]<<16)+(b[35]<<24);c.MaxSC=b[36]+(b[37]<<8)+(b[38]<<16)+(b[39]<<24);c.HP=b[40]+(b[41]<<8)+(b[42]<<16)+(b[43]<<24);c.MP=b[44]+(b[45]<<8)+(b[46]<<16)+(b[47]<<24);c.Hit=b[48]+(b[49]<<8)+(b[50]<<16)+(b[51]<<24);c.Speed=b[52]+(b[53]<<8)+(b[54]<<16)+(b[55]<<24);c.X2=b[56]+(b[57]<<8)+(b[58]<<16)+(b[59]<<24);return c}function TPoisonWeapon(b){var c={};c.nRate=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24);c.nDecHp=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24);c.wBaseTime=b[8]+(b[9]<<8)>>>0;c.wRandTime=b[10]+(b[11]<<8)>>>0;return c}function TDropItem(){return{x:0,y:0,id:0,Looks:0,Color:0,Name:"",DBName:"",Width:0,Height:0,Visible:!1,FlashTime:0,FlashStepTime:0,FlashStep:0,BoFlash:!1,ShowFlash:!1,ItemTexture:0,ShowNameTime:0,ShowName:!1,ShowItem:0,NameImageInfo:0,dwGhostTick:0,DropEffectFileIndex:-1,DropEffectStartOffSet:0,DropEffectImageCount:0,DropEffectFrameTime:0,DropEffectOffsetX:0,DropEffectOffsetY:0,DropEffectNormalDraw:!1,DropTickCount:0,DropIdxImage:0}}function TStdItem(b){var c={};c.nIdx=b[0]+(b[1]<<8)>>>0;c.Name=gbkByteArr2UcsStr(GameUtil.slice(b,3,33));c.DBName=gbkByteArr2UcsStr(GameUtil.slice(b,34,63));c.StdMode=b[64]>>>0;c.Shape=b[65]+(b[66]<<8)>>>0;c.Weight=b[67]>>>0;c.AniCount=b[68]+(b[69]<<8);c.Source=127<b[70]?b[70]-256:b[70];c.Reserved=b[71]>>>0;c.NeedIdentify=b[72]>>>0;c.Looks=b[73]+(b[74]<<8)>>>0;c.DuraMax=b[75]+(b[76]<<8)>>>0;c.Reserved1=b[77]+(b[78]<<8)>>>0;c.HP=b[79]+(b[80]<<8)+(b[81]<<16)+(b[82]<<24);c.MP=b[83]+(b[84]<<8)+(b[85]<<16)+(b[86]<<24);c.AC=b[87]+(b[88]<<8)+(b[89]<<16)+(b[90]<<24);c.MaxAC=b[91]+(b[92]<<8)+(b[93]<<16)+(b[94]<<24);c.MAC=b[95]+(b[96]<<8)+(b[97]<<16)+(b[98]<<24);c.MaxMAC=b[99]+(b[100]<<8)+(b[101]<<16)+(b[102]<<24);c.DC=b[103]+(b[104]<<8)+(b[105]<<16)+(b[106]<<24);c.MaxDC=b[107]+(b[108]<<8)+(b[109]<<16)+(b[110]<<24);c.MC=b[111]+(b[112]<<8)+(b[113]<<16)+(b[114]<<24);c.MaxMC=b[115]+(b[116]<<8)+(b[117]<<16)+(b[118]<<24);c.SC=b[119]+(b[120]<<8)+(b[121]<<16)+(b[122]<<24);c.MaxSC=b[123]+(b[124]<<8)+(b[125]<<16)+(b[126]<<24);c.Need=b[127]+(b[128]<<8)+(b[129]<<16)+(b[130]<<24);c.NeedLevel=b[131]+(b[132]<<8)+(b[133]<<16)+(b[134]<<24);c.Price=b[135]+(b[136]<<8)+(b[137]<<16)+(b[138]<<24);c.OverLap=b[139]+(b[140]<<8)>>>0;c.Color=b[141]>>>0;c.Light=b[142]>>>0;c.Stock=b[143]+(b[144]<<8)+(b[145]<<16)+(b[146]<<24);c.btValue=GameUtil.slice(b,147,161);c.btPower=b[161]>>>0;c.btNoHero=b[162]>>>0;c.btUpgradeCount=b[163]>>>0;c.btUpgradeCount2=b[164]>>>0;c.nCurrency=b[165]>>>0;c.AddHP=b[166]+(b[167]<<8)+(b[168]<<16)+(b[169]<<24);c.AddMP=b[170]+(b[171]<<8)+(b[172]<<16)+(b[173]<<24);c.AddAC=b[174]+(b[175]<<8)+(b[176]<<16)+(b[177]<<24);c.AddMAC=b[178]+(b[179]<<8)+(b[180]<<16)+(b[181]<<24);c.AddDC=b[182]+(b[183]<<8)+(b[184]<<16)+(b[185]<<24);c.AddSC=b[186]+(b[187]<<8)+(b[188]<<16)+(b[189]<<24);c.AddMC=b[190]+(b[191]<<8)+(b[192]<<16)+(b[193]<<24);c.NewValue=GameUtil.slice(b,194,214);c.IsBind=b[214];c.Expand1=b[215];c.HideHair=b[216];var a=217;c.EffectFileIndex=b[a++]+(b[a++]<<8);c.EffectStartOffSet=b[a++]+(b[a++]<<8)>>>0;c.EffectImageCount=b[a++]>>>0;c.EffectFrameTime=b[a++]+(b[a++]<<8);c.EffectOffsetX=b[a++]+(b[a++]<<8);c.EffectOffsetY=b[a++]+(b[a++]<<8);c.BodyEffectFileIndex=b[a++]+(b[a++]<<8);c.BodyEffectStartOffSet=b[a++]+(b[a++]<<8)>>>0;c.BodyEffectImageCount=b[a++]>>>0;c.BodyEffectFrameTime=b[a++]+(b[a++]<<8)>>>0;c.BodyEffectOffsetX=b[a++]+(b[a++]<<8);c.BodyEffectOffsetY=b[a++]+(b[a++]<<8);c.PoisonWeapon=TPoisonWeapon(GameUtil.slice(b,a,a+12));a+=12;c.Effect=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Upgrade=b[a++]>>>0;c.BodyEffectNormalDraw=b[a++];c.EffectNormalDraw=b[a];return c}function TItemSrcClient(b){var c={},a=0;c.MakeType=b[a++]>>>0;c.MakeDate=GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(b,a,a+8));a+=9;c.MakeObject=gbkByteArr2UcsStr(GameUtil.slice(b,a,a+30));a+=31;c.MakePlay=gbkByteArr2UcsStr(GameUtil.slice(b,a,a+30));a+=31;c.MakeMap=gbkByteArr2UcsStr(GameUtil.slice(b,a,a+30));return c}function TOStdItem(b){var c={};c.Name=gbkByteArr2UcsStr(GameUtil.slice(b,1,15));c.StdMode=b[15]>>>0;c.Shape=b[16]>>>0;c.Weight=b[17]>>>0;c.AniCount=b[18]>>>0;c.Source=b[19];c.Reserved=b[20]>>>0;c.NeedIdentify=b[21]>>>0;c.Looks=b[22]+(b[23]<<8)>>>0;c.DuraMax=b[24]+(b[25]<<8)>>>0;c.AC=b[26]+(b[27]<<8)+(b[28]<<16)+(b[29]<<24);c.MaxAC=b[30]+(b[31]<<8)+(b[32]<<16)+(b[33]<<24);c.MAC=b[34]+(b[35]<<8)+(b[36]<<16)+(b[37]<<24);c.MaxMAC=b[38]+(b[39]<<8)+(b[40]<<16)+(b[41]<<24);c.DC=b[42]+(b[43]<<8)+(b[44]<<16)+(b[45]<<24);c.MaxDC=b[46]+(b[47]<<8)+(b[48]<<16)+(b[49]<<24);c.MC=b[50]+(b[51]<<8)+(b[52]<<16)+(b[53]<<24);c.MaxMC=b[54]+(b[55]<<8)+(b[56]<<16)+(b[57]<<24);c.SC=b[58]+(b[59]<<8)+(b[60]<<16)+(b[61]<<24);c.MaxSC=b[62]+(b[63]<<8)+(b[64]<<16)+(b[65]<<24);c.Need=b[66]>>>0;c.NeedLevel=b[67]>>>0;c.w26=b[68]+(b[69]<<8)>>>0;c.Price=b[70]+(b[71]<<8)+(b[72]<<16)+(b[73]<<24);return c}function TClientItem(b){var c={},a=258;c.s=TStdItem(GameUtil.slice(b,0,a));c.MakeIndex=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Dura=b[a++]+(b[a++]<<8)>>>0;c.DuraMax=b[a++]+(b[a++]<<8)>>>0;c.ItemSrc=TItemSrcClient(GameUtil.slice(b,a,a+102));a+=102;c.nFlutCount=b[a++]>>>0;c.nGemCount=b[a++]>>>0;c.GemItem=[];for(var d=0;8>d;d++)c.GemItem[d]=TOStdItem(GameUtil.slice(b,a,a+74)),a+=74;c.btResolve=b[a++];c.boDropFree=b[a++];c.TUserItemAdd=TUserItemAdd(b,a);return c}function TUserItemAdd(b,c){var a={};a.nMakeIndex=b[c++]+(b[c++]<<8)+(b[c++]<<16)+(b[c++]<<24);var d=b[c++];a.sTitle=gbkByteArr2UcsStr(GameUtil.slice(b,c,d+c));c+=20;a.nColor=b[c++];a.arrAbilType=SetCustom(CUSTOMITEMABIL_LEN,"byte",GameUtil.slice(b,c,c+CUSTOMITEMABIL_LEN));c+=CUSTOMITEMABIL_LEN;a.arrAbilColor=SetCustom(CUSTOMITEMABIL_LEN,"byte",GameUtil.slice(b,c,c+CUSTOMITEMABIL_LEN));c+=CUSTOMITEMABIL_LEN;a.arrAbilValue=SetCustom(4*CUSTOMITEMABIL_LEN,"longword",GameUtil.slice(b,c,c+4*CUSTOMITEMABIL_LEN));c+=4*CUSTOMITEMABIL_LEN;a.arrAbilMethod=SetCustom(CUSTOMITEMABIL_LEN,"byte",GameUtil.slice(b,c,c+CUSTOMITEMABIL_LEN));c+=CUSTOMITEMABIL_LEN;a.arrAbilLine=SetCustom(CUSTOMITEMABIL_LEN,"byte",GameUtil.slice(b,c,c+CUSTOMITEMABIL_LEN));c+=CUSTOMITEMABIL_LEN;a.arrPrgbarCaption=SetCustom(31*CUSTOMITEMPROGRESSBAR_LEN,"string",GameUtil.slice(b,c,c+31*CUSTOMITEMPROGRESSBAR_LEN));c+=31*CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarColor=SetCustom(CUSTOMITEMPROGRESSBAR_LEN,"byte",GameUtil.slice(b,c,c+CUSTOMITEMPROGRESSBAR_LEN));c+=CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarLevel=SetCustom(2*CUSTOMITEMPROGRESSBAR_LEN,"word",GameUtil.slice(b,c,c+2*CUSTOMITEMPROGRESSBAR_LEN));c+=2*CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarEnabled=SetCustom(CUSTOMITEMPROGRESSBAR_LEN,"byte",GameUtil.slice(b,c,c+CUSTOMITEMPROGRESSBAR_LEN));c+=CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarImg=SetCustom(CUSTOMITEMPROGRESSBAR_LEN,"byte",GameUtil.slice(b,c,c+CUSTOMITEMPROGRESSBAR_LEN));c+=CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarValueCur=SetCustom(4*CUSTOMITEMPROGRESSBAR_LEN,"longword",GameUtil.slice(b,c,c+4*CUSTOMITEMPROGRESSBAR_LEN));c+=4*CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarValueMax=SetCustom(4*CUSTOMITEMPROGRESSBAR_LEN,"longword",GameUtil.slice(b,c,c+4*CUSTOMITEMPROGRESSBAR_LEN));c+=4*CUSTOMITEMPROGRESSBAR_LEN;a.arrPrgbarShowMode=SetCustom(CUSTOMITEMPROGRESSBAR_LEN,"byte",GameUtil.slice(b,c,c+CUSTOMITEMPROGRESSBAR_LEN));return a}function SetCustom(b,c,a){for(var d=[],e=0;e<b;)if("string"==c){var g=a[e++],g=gbkByteArr2UcsStr(GameUtil.slice(a,e,g+e));d.push(g);e+=30}else"word"==c?(d.push(a[e]+(a[e+1]<<8)),e+=2):"longword"==c?(d.push(a[e]+(a[e+1]<<8)+(a[e+2]<<16)+(a[e+3]<<24)),e+=4):(d.push(a[e]),e++);return d}function TClientMagic(b){var c={};c.Key=b[0];c.Level=b[1];c.CurTrain=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24);c.TrainLevel=b[8]+(b[9]<<8)+(b[10]<<16)+(b[11]<<24);c.Def=TMagic(GameUtil.slice(b,12,b.length));return c}function TUserStateInfo(b){var c={};c.RaceServer=(b[0]<<0)+(b[1]<<8)+(b[2]<<16)+(b[3]<<24);c.Feature=TFeature((b[4]<<0)+(b[5]<<8)+(b[6]<<16)+(b[7]<<24),GameUtil.slice(b,8,263));var a=264;c.btshowGodBless=b[a]<<0;c.btSndacasketState=b[a+1]<<0;for(var a=a+2,d=[],e=0;12>e;e++)d[e]=b[a+e];c.OpenedGodBless=d;a+=12;c.UserName=gbkByteArr2UcsStr(GameUtil.slice(b,a+1,a+1+b[a]));a+=34;c.NAMECOLOR=(b[a]<<0)+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=317;c.GuildName=gbkByteArr2UcsStr(GameUtil.slice(b,a,a+b[316]));a=348;c.GuildRankName=gbkByteArr2UcsStr(GameUtil.slice(b,a,a+b[347]));a+=30;c.UseItems=[];for(e=0;53>e;e++)c.UseItems.push(TClientItem(GameUtil.slice(b,e*g_itemSize+a,(e+1)*g_itemSize+a)));a+=53*g_itemSize;c.UserIconList=[];for(e=0;30>e;e++)c.UserIconList.push(TClientItem(GameUtil.slice(b,e*g_itemSize+a,(e+1)*g_itemSize+a)));return c}function TUserItem(b){var c={};c.MakeIndex=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24);c.wIndex=b[4]+(b[5]<<8)>>>0;c.Dura=b[6]+(b[7]<<8)>>>0;c.DuraMax=b[8]+(b[9]<<8)>>>0;b=GameUtil.slice(b,10,b.length);c.MsgStruct=b;return c}function TUserItem_0(b){var c={},a=GameUtil.slice(b,0,14);c.btValue=a;c.btEffect=b[14]>>>0;c.btUpgradeCount=b[15]>>>0;c.boStartTime=b[16];c.nLimitTime=b[17]+(b[18]<<8)+(b[19]<<16)+(b[20]<<24);c.nFlutCount=b[21]>>>0;a=GameUtil.slice(b,22,38);c.nGemIdx=a;a=GameUtil.slice(b,38,45);c.OldbtValue=a;a=GameUtil.slice(b,45,65);c.btNewValue=a;c.btColor=b[65]>>>0;c.boIsBind=b[66];c.boCanotUserDropBindItem=b[67];c.boCanotUserDealBindItem=b[68];c.boCanotUserStorageBindItem=b[69];c.boCanotUserRepairBindItem=b[70];c.boCanotUserSellBindItem=b[71];c.boCanotUserScatterBindItem=b[72];c.boDropFree=b[73];c.btValue2=b[74]>>>0;return c}function TUserItem_1(b){var c={};c.boUsed=b[0];var a=GameUtil.slice(b,1,15);c.sMapDesc=a;a=GameUtil.slice(b,15,36);c.sMapName=a;c.wCurrx=b[36]+(b[37]<<8)>>>0;c.wCurrY=b[38]+(b[39]<<8)>>>0;return c}function TUserItem_2(b){var c={},a=GameUtil.slice(b,0,8);c.dEggLastHatchDateTime=a;c.boEggHatchSucceeded=b[8];b=GameUtil.slice(b,9,17);c.dEggHatchSucceeded=b;return c}function TMagic(b){var c={};c.MagicAttr=b[0];c.wMagicId=b[2]+(b[3]<<8);c.sMagicName=gbkByteArr2UcsStr(GameUtil.slice(b,5,35));c.btEffectType=b[35];c.btEffect=b[36];c.bt11=b[37];c.wSpell=b[38]+(b[39]<<8);c.wPower=b[40]+(b[41]<<8);c.TrainLevel=GameUtil.slice(b,42,57);c.w02=b[58]+(b[59]<<8);c.MaxTrain=[];for(var a=60;75>a;a+=4)c.MaxTrain.push(b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24));c.btTrainLv=b[124];c.btJob=b[125];c.wMagicIdx=b[126]+(b[127]<<8);c.dwDelayTime=b[128]+(b[129]<<8)+(b[130]<<16)+(b[131]<<24);c.btDefSpell=b[132];c.btDefPower=b[133];c.wMaxPower=b[134]+(b[135]<<8);c.btDefMaxPower=b[136];c.sDescr=gbkByteArr2UcsStr(GameUtil.slice(b,138,156));return c}function pingjie(b,c,a){b.push(c.length);for(var d=0;d<a;d++)null==c[d]?b.push(0):b.push(c[d].charCodeAt())}function objEncode6BitBuf(b){if(b){var c=[],a;for(a in b)null!=b[a]&&"function"!=typeof b[a]&&(c.push((b[a]&255)>>0),c.push((b[a]&65280)>>8),c.push((b[a]&16711680)>>16),c.push((b[a]&4278190080)>>24));return fnEncode6BitBuf(c,c.length)}}function TUserEntry(b,c,a,d,e){this.sAccount_20=b.toLowerCase();this.sPassword_20=a;this.sUserName_20=b.toLowerCase();this.sSSNo_18="1";this.sPhone_10="operation";this.sQuiz_20=null==d?"3":d;this.sAnswer_12=null==e?"4":e;this.sEMail_40=c;TUserEntry.prototype.toArray=function(a){var d=[],b;for(b in this)if("function"!=typeof this[b]){var e=b.split("_");if("sAccount"==e[0]||"sPassword"==e[0])e[1]=a;pingjie(d,this[b],parseInt(e[1]))}return d};TUserEntry.prototype.strFormat=function(a,d){var b=[],b="";if(a.length<d)for(var e=0;e<d-a.length;e++)b+="*";b=(a+b).split("");b.unshift(a.length);return b}}function ping_jie(b,c,a){b.push(c.length);for(var d=0;d<a;d++)null==c[d]?b.push(0):b.push(c[d].charCodeAt())}function TUserEntryAdd(b,c,a,d,e){this.sQuiz2_20=null==a?"5":a;this.sAnswer2_12=null==d?"6":d;this.sBirthDay_10=null==e?"1990/01/01":e;this.sMobilePhone_13="operation";this.sMemo_42=b.toLowerCase();this.sMemo2_42=c;TUserEntryAdd.prototype.toArray=function(a){var d=[],b;for(b in this)if("function"!=typeof this[b]){var e=b.split("_");if("sMemo"==e[0]||"sMemo2"==e[0])10==a?e[1]=42:e[1]=32;ping_jie(d,this[b],parseInt(e[1]))}return d};TUserEntryAdd.prototype.strFormat=function(a,d){var b=[],b="";if(a.length<d)for(var e=0;e<d-a.length;e++)b+="*";b=(a+b).split("");b.unshift(a.length);return b}}function TDeleteHumanInfo(b){var c={};c.sChrName=gbkByteArr2UcsStr(GameUtil.slice(b,1,31));c.nLevel=b[32]+(b[33]<<8)+(b[34]<<16)+(b[35]<<24);c.btJob=b[36];c.btSex=b[37];return c}function TNewValueAdd(b){var c={},a=0;c.Index=b[a];a+=4;c.Value=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);return c}function TLEGSuitItemInfo(b){var c={},a=384;c.btValueMode=b[a];a+=4;c.MaxHP=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24)>>>0;c.MaxMP=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24)>>>0;c.AC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MAC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.DC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.SC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.HitPoint=b[a++];c.SpeedPoint=b[a++];c.nAntiMagic=b[a++];c.nAntiPoison=b[a++];c.nPoisonRecover=b[a++];c.HealthRecover=b[a++];c.SpellRecover=b[a++];c.boItemSkill=[];for(var d=0;16>d;d++)c.boItemSkill[d]=0<b[a++];a++;c.btNewValue=[];for(d=0;11>d;d++)c.btNewValue[d]=TNewValueAdd(GameUtil.slice(b,a,a+8)),a+=8;return c}function TLEGTzInfo(b){var c={};c.TzIndex=b[0]+(b[1]<<8)>>>0;c.nItemColor=b[2];c.nAbilColor=b[3];c.ClientShow=b[4];c.sHint=gbkByteArr2UcsStr(GameUtil.slice(b,6,6+(b[5]>>>0)));c.UserItems=gbkByteArr2UcsStr(GameUtil.slice(b,127,127+(b[126]>>>0)));c.Attribute=new TLEGSuitItemInfo(b);return c}function TBlueMission(b){var c={};c.nLabel=b[0];c.nID=b[2]+(b[3]<<8)>>>0;c.sCaption=gbkByteArr2UcsStr(GameUtil.slice(b,5,5+(b[4]>>>0)));return c}function TOpenRedPacket(b){var c={},a=0,d=b[a];c.sUserName=gbkByteArr2UcsStr(GameUtil.slice(b,a+1,a+1+d));a=31;c.nGoldValue=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);a=35;d=b[a];c.sTime=gbkByteArr2UcsStr(GameUtil.slice(b,a+1,a+1+d));a=66;d=b[a];c.sNote=gbkByteArr2UcsStr(GameUtil.slice(b,a+1,a+1+d));return c}function TRedPacketInfo(b){var c={},a=0;c.sUserName=gbkByteArr2UcsStr(GameUtil.slice(b,1,1+b[0]));a=31;c.nGoldNum=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.nRedPacketCount=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.nGoldType=b[a++];c.nType=b[a++];c.nRedRecog=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.OpenRedPacket=[];for(var d=0;100>d;d++)c.OpenRedPacket[d]=TOpenRedPacket(GameUtil.slice(b,a,a+97)),a+=97;c.nGoldBalance=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.nRandomGold=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);d=GameUtil.slice(b,a,a+8);c.nRedPacketTime=GameUtil.GetJSDateTimeFromDelphi8Bytes(d);a=b[a+9];c.sRedPacketTime=gbkByteArr2UcsStr(GameUtil.slice(b,a,a+a));a+=21;a=b[a];c.sMsg=gbkByteArr2UcsStr(GameUtil.slice(b,a,a+a));a+=30;c.bOpened=b[a];return c}function MissTabName(){return{sTabName:"",MissInf:[]}}function MyTaskInf(){return{sTabName:"",sShowtxt:"",sMemo:"",sNvStr:"",sCmdGo:""}}function TaskGloba(){return{sName:"",nCount:""}}function TBaiTanData(b){var c={};c.nRecogId=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24);c.Item=[];c.PriceGold=[];c.Price=[];for(var a=4,d=0;20>d;d++){var e=new TClientItem(GameUtil.slice(b,d*g_itemSize+a,(d+1)*g_itemSize+a));c.Item.push(e)}a=c.Item.length*g_itemSize+a;for(d=0;20>d;d++)c.PriceGold.push(b[a++]);for(d=0;20>d;d++)e=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24),a+=4,c.Price.push(e);return c}function TloadNpcImage(){return{Type:0,sName:"",nX:0,nY:0,sCmd:"",sText:"",sStr:""}}function cardGameInfo(){this.deskID=g_cardGame_infoList[0];this.lastCardName=g_cardGame_infoList[1];this.lastChooseName=g_cardGame_infoList[2];this.lastOutCardType=g_cardGame_infoList[3];this.lastOutCardValue=g_cardGame_infoList[4];this.underCards=g_cardGame_infoList[5];this.isGameOver=g_cardGame_infoList[6];this.baseGoldPer=g_cardGame_infoList[7];this.multiple=g_cardGame_infoList[8];this.lastOutCard=g_cardGame_infoList[9];this.role1name=g_cardGame_infoList[10];this.role1roleCardsTab=g_cardGame_infoList[11];this.role1chooseDiZhuChance=g_cardGame_infoList[12];this.role1isDiZhu=g_cardGame_infoList[13];this.role1outCardChance=g_cardGame_infoList[14];this.role1isReady=g_cardGame_infoList[15];this.role1isWinner=g_cardGame_infoList[16];this.role1winnerNum=g_cardGame_infoList[17];this.role1score=g_cardGame_infoList[18];this.role1isCollocation=g_cardGame_infoList[19];this.role1gameGold=g_cardGame_infoList[20];this.role2name=g_cardGame_infoList[21];this.role2roleCardsTab=g_cardGame_infoList[22];this.role2chooseDiZhuChance=g_cardGame_infoList[23];this.role2isDiZhu=g_cardGame_infoList[24];this.role2outCardChance=g_cardGame_infoList[25];this.role2isReady=g_cardGame_infoList[26];this.role2isWinner=g_cardGame_infoList[27];this.role2winnerNum=g_cardGame_infoList[28];this.role2score=g_cardGame_infoList[29];this.role2isCollocation=g_cardGame_infoList[30];this.role2gameGold=g_cardGame_infoList[31];this.role3name=g_cardGame_infoList[32];this.role3roleCardsTab=g_cardGame_infoList[33];this.role3chooseDiZhuChance=g_cardGame_infoList[34];this.role3isDiZhu=g_cardGame_infoList[35];this.role3outCardChance=g_cardGame_infoList[36];this.role3isReady=g_cardGame_infoList[37];this.role3isWinner=g_cardGame_infoList[38];this.role3winnerNum=g_cardGame_infoList[39];this.role3score=g_cardGame_infoList[40];this.role3isCollocation=g_cardGame_infoList[41];this.role3gameGold=g_cardGame_infoList[42];this.role1isStrongExit=g_cardGame_infoList[43];this.role2isStrongExit=g_cardGame_infoList[44];this.role3isStrongExit=g_cardGame_infoList[45];this.timerNum=g_cardGame_infoList[46]}function cardGameType(){this.solo=[];this["double"]=[];this.triple=[];this.four=[];this.joker2=[]}function TFishJoinPlayInfo(b){var c={};c.sName=gbkByteArr2UcsStr(GameUtil.slice(b,1,b[0]+1));var a=32;c.Level=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=36;c.ID=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);return c}function TAbilityFish(b){var c={};c.Level=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24);c.Exp=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24);c.NeedExp=b[8]+(b[9]<<8)+(b[10]<<16)+(b[11]<<24);c.BiteRate=b[12]+(b[6]<<13)+(b[14]<<16)+(b[15]<<24);return c}function TFishGropInfo(b){var c={},a=0;c.nOwnerID=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);c.sCaption=gbkByteArr2UcsStr(GameUtil.slice(b,a+5,a+5+b[a+4]));a=82;c.nBiteRate=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=42;c.dwBiteWeight=b[a]+(b[a+1]<<8);return c}function TFishInfo(b){var c=0,a={};a.Base=TAbilityFish(GameUtil.slice(b,0,16));a.State=b[16];c=20;a.ID=b[c]+(b[c+1]<<8)+(b[c+2]<<16)+(b[c+3]<<24);c=25;a.sName=gbkByteArr2UcsStr(GameUtil.slice(b,c,c+b[24]));c=56;a.GetCount=b[c]+(b[c+1]<<8)+(b[c+2]<<16)+(b[c+3]<<24);a.OutCount=b[c+4]+(b[c+5]<<8)+(b[c+6]<<16)+(b[c+7]<<24);a.Face=b[c+8]+(b[c+9]<<8)+(b[c+10]<<16)+(b[c+11]<<24);a.boAutoPars=1==b[c+12];a.dwAutoParsTime=b[c+16]+(b[c+17]<<8)+(b[c+18]<<16)+(b[c+19]<<24)>>>0;a.BaitType=b[c+20]+(b[c+21]<<8)+(b[c+22]<<16)+(b[c+23]<<24);a.BaitDura=b[c+24]+(b[c+25]<<8)+(b[c+26]<<26)+(b[c+27]<<24);a.BaitDuraMax=b[c+28]+(b[c+29]<<8)+(b[c+30]<<16)+(b[c+31]<<24);return a}function TActorIcon(b){var c={};c.nFileIndex=b[0]+(b[1]<<8);65535==c.nFileIndex&&(c.nFileIndex=-1);c.nIconIndex=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24);c.nIconCount=b[8];c.nX=b[10]+(b[11]<<8);6E4<c.nX&&(c.nX-=65536);c.nY=b[12]+(b[13]<<8);6E4<c.nY&&(c.nY-=65536);c.boBlend=b[14];c.nMode=b[16]+(b[17]<<8)+(b[18]<<16)+(b[19]<<24);-1==c.nFileIndex&&(c.nMode=-1);c.nSeeMode=b[20]+(b[21]<<8)+(b[22]<<16)+(b[23]<<24);c.nPlayTimeTick=b[24]+(b[25]<<8)+(b[26]<<16)+(b[27]<<24);10>c.nPlayTimeTick&&(c.nPlayTimeTick=10);return c}function TClientImage(b){var c={};c.FileID=b[0]+(b[1]<<8);65535==c.FileID&&(c.FileID=0);c.ImageID=b[2]+(b[3]<<8);return c}function THPBarData(b){var c={};c.OffSetX=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24);c.OffSetY=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24);c.BaseImg=TClientImage(GameUtil.slice(b,8,12));c.BarImg=TClientImage(GameUtil.slice(b,12,16));return c}function TClientImageFrame(b){var c={};c.FileID=b[0]+(b[1]<<8);65535==c.FileID&&(c.FileID=-1);c.ImageID=b[2]+(b[3]<<8);c.Speed=b[4]+(b[5]<<8);c.Count=b[6]+(b[7]<<8);c.OffSetX=b[8]+(b[9]<<8);c.OffSetY=b[10]+(b[11]<<8);c.Mode=b[12];return c}function TDirImageFrame(b){var c={};c.StandBaseImg=TClientImageFrame(GameUtil.slice(b,0,13));c.StandAddImg=TClientImageFrame(GameUtil.slice(b,13,26));c.ActBaseImg=TClientImageFrame(GameUtil.slice(b,26,39));c.ActAddImg=TClientImageFrame(GameUtil.slice(b,39,52));-1==c.StandAddImg.FileID&&(c.StandAddImg=c.StandBaseImg);-1==c.ActAddImg.FileID&&(c.ActAddImg=c.StandBaseImg);-1==c.ActBaseImg.FileID&&(c.ActBaseImg=c.StandBaseImg);return c}function TDiyNpcData(b){var c={},a=b[0];c.sIdent=gbkByteArr2UcsStr(GameUtil.slice(b,1,1+a));a=24;c.Index=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);c.HPBar=THPBarData(GameUtil.slice(b,28,43));a=b[44];c.sClickSound=gbkByteArr2UcsStr(GameUtil.slice(b,45,45+a));a=75;c.UseDirs=[];for(var d=0;8>d;d++)c.UseDirs[d]=b[a+d];a=83;c.ImgFrames=[];for(d=0;8>d;d++)c.ImgFrames[d]=TDirImageFrame(GameUtil.slice(b,a+52*d,a+52*(d+1)));return c}function TClientCMD(b){var c={},a=b[0];c.sCmd=gbkByteArr2UcsStr(GameUtil.slice(b,1,a+1));a=b[26];c.sCaption=gbkByteArr2UcsStr(GameUtil.slice(b,27,27+a));return c}function TClientConfig(b){var c={},a=0;c.btConfigDlgType=b[0];c.btItemSpeed=b[1];c.boParalyCanRun=b[2];c.boParalyCanWalk=b[3];c.boParalyCanHit=b[4];c.boParalyCanSpell=b[5];c.boNoAcrossHuman=b[6];c.boNoAcrossMon=b[7];c.boNoAcrossNpc=b[8];a=9;c.nMoveTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=13;c.nHitTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=17;c.nSpellTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);c.boIsSafeRunNPC=b[21];c.boIsSafeRun=b[22];a=23;c.nHighLevel=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);c.btDieColor=b[27];a=28;c.nFireHitDelayTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=32;c.nKTZHitDelayTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=36;c.nPKJHitDelayTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=40;c.nSwordHitDelayTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=44;c.nLYJFHitWaitTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=48;c.nSkill114HitWaitTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=52;c.nMagicItemRate=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);c.boStartGameAuxiliary=b[56];c.boCanOpenGameConfigDlg=b[57];c.boNotCanUseClientConfig=b[58];c.boNewHealth=b[59];c.boShowMiss=b[60];c.boShowBlast=b[61];c.boShowRebound=b[62];c.boShowPoisonStone=b[63];c.boShowPoisonDeChealth=b[64];c.boShowPoisonDaMageArmor=b[65];c.boShowHeroGroupAttack=b[66];c.boShowRevival=b[67];c.boShowRecoveryHP=b[68];c.boShowRecoveryMP=b[69];c.boShowPlus=b[70];c.boShowMinus=b[71];c.boItemNewAbilAllowUse=b[72];c.boWeaponSimple=b[73];c.boClothesSimple=b[74];c.boMonSimple=b[75];c.nWeaponZ=b[76]+(b[77]<<8);c.nWeaponF=b[78]+(b[79]<<8);c.nWeaponD=b[80]+(b[81]<<8);c.nClothesZ=b[82]+(b[83]<<8);c.nClothesF=b[84]+(b[85]<<8);c.nClothesD=b[86]+(b[87]<<8);c.nMonAppr=b[88]+(b[89]<<8);c.nNPCAppr=b[90]+(b[91]<<8);c.nMoveSpeed=b[92]+(b[93]<<8);32767<=c.nMoveSpeed&&(c.nMoveSpeed-=65536);c.nAttackSpeed=b[94]+(b[95]<<8);32767<=c.nAttackSpeed&&(c.nAttackSpeed-=65536);c.nSpellSpeed=b[96]+(b[97]<<8);32767<=c.nSpellSpeed&&(c.nSpellSpeed-=65536);c.dwUserMoveTime=b[98]+(b[99]<<8)+(b[100]<<16)+(b[101]<<24);c.DActionLogButton=b[102];c.DBotMissionButton=b[103];c.DBotFriendButton=b[104];c.DControlHelpButton=b[105];c.DBotRankButton=b[106];c.DBotWhisperButton=b[107];c.DOpenShopButton=b[108];c.DBotUserShopButton=b[109];c.DWebButton=b[110];c.DOpenHeroButton=b[111];c.DBotChallengeButton=b[112];c.boShowHintWindowFrame=b[113];c.btHintWindowbackgroundColor=b[114];c.btHintWindowbackgroundAlpha=b[115];c.boShowBoundary=b[116];c.btFontSize=b[117]+(b[118]<<8)+(b[119]<<16)+(b[120]<<24);c.boFontWeight=b[121];c.btSuspensionShowItem=b[122];c.boShowItemValue=b[123];c.boShowItemNewValue=b[124];c.boItem25Value=b[125];c.boShowHPLabel=b[126];c.boShowNumberLable=b[127];c.boShowJobAndLevel=b[128];c.boFilterExp=b[129];c.boShowGreenHint=b[130];c.boShowUserName=b[131];c.boOnlyShowCharName=b[132];c.boShowMoveLable=b[133];c.boShowItemName=b[134];c.boShowFilterItem=b[135];c.boItemHint=b[136];c.boDisableSelfStruck=b[137];c.boSpeedSlow=b[138];c.boMagicLock=b[139];c.boAutoPickUpItem=b[140];c.boAutoOrderItem=b[141];c.boAutoCloseGroup=b[142];c.boShowDura=b[143];c.boDuraWarning=b[144];c.boNotNeedShift=b[145];c.boHideGhost=b[146];c.boHideHumEffect=b[147];c.boHideWeaponEffect=b[148];c.boShowMapDesc=b[149];c.boShowHighlightHPLabel=b[150];c.boAutoHideMode=b[151];c.boAutoTakeOnItem=b[152];c.boHumAutoShield=b[153];c.boHumStruckShield=b[154];c.boSmartLongHit=b[155];c.boSmartPosLongHit=b[156];c.boSmartWalkLongHit=b[157];c.boSmartWideHit=b[158];c.boSmartFireHit=b[159];c.boSmartSwordHit=b[160];c.boSmartCrsHit=b[161];c.boSmartTwnHit=b[162];c.boBGMusic=b[163];c.boRepeatBGMusic=b[164];c.boShowMonName=b[165];c.boNotParaly=b[166];c.boHumManuallySnowWind=b[167];c.boHumManuallyFireBoom=b[168];c.boHumShootLightenLockTarget=b[169];c.boHumManuallyMeteorShower=b[170];c.boAutoCHangePoison=b[171];c.boAutoBindItem=b[172];c.boTabCopyHumName=b[173];c.boShowHorseButton=b[174];c.boShowMyShopButton=b[175];c.boHideNeiGuaSpeed=b[176];c.boShowBagGold=b[177];c.boShowHelpButton=b[178];c.boChatShowExp=b[179];c.boDoubleButton=b[180];c.boDynamicButton=b[181];c.boNewItemShowMode=b[182];c.boNoSmartPosLongHit=b[183];c.Params=[];for(var d=0;10>d;d++)a=184+4*d,c.Params[d]=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=224;c.ClientConfigs=[];for(d=0;11>d;d++)c.ClientConfigs[d]=b[a+d];c.boUseSuperMedica=b[235];c.DMerchantDlgHelp=b[236];a=237;c.DBotFuncs=[];for(d=0;6>d;d++)c.DBotFuncs[d]=b[a+d];c.boViewFog=b[243];c.boCanStartRun=b[244];c.boCanFirewind=b[245];c.boAllNameShow=b[246];c.boShowNPCHPBar=b[247];c.boLiveShield=b[248];c.boCanBossHint=b[249];c.boAutoPickItem=b[250];c.boShowAllUserName=b[251];a=252;c.ClientConfigTabSheetVisibles=[];for(d=0;10>d;d++)c.ClientConfigTabSheetVisibles[d]=b[a+d];c.UseSuperMedicaItemNames=[];for(d=0;54>d;d++)a=262+31*d,c.UseSuperMedicaItemNames[d]=gbkByteArr2UcsStr(GameUtil.slice(b,a+1,a+30));a=1936;c.sHomePage=gbkByteArr2UcsStr(GameUtil.slice(b,a+1,a+50));a=1987;c.nHumNeedMagicItem=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);c.boCanMoveChatDlg=b[1991];c.boGuaji=b[1992];a=1993;c.AcupointLevels=[];for(d=0;5>d;d++){c.AcupointLevels[d]=[];for(var e=0;5>e;e++)c.AcupointLevels[d][e]=b[a+5*d+e]}c.boUserMoveCanOnItemEx=b[2018];c.boQuickTab=b[2019];a=b[2020];c.sQuickTab=gbkByteArr2UcsStr(GameUtil.slice(b,a+1,a+60));c.boClosePresentOfShop=b[2081];c.boZhaoMuFunction=b[2082];a=2083;c.nHeroIconStyle=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);c.boMutHeroSelect=b[2087];c.boHideGlory=b[2088];c.boHideWeather=b[2089];c.boShowHeroLock=b[2090];c.boShowGemIcon=b[2091];c.btShowItemType=b[2092];a=2093;c.nNPCDlgLabelX=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nNPCDlgLabelY=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.boMiniMapAutoFindPath=b[a];a+=1;c.nGreenHintInfoX=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nGreenHintInfoY=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nShowDuraHintX=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nShowDuraHintY=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nShowExpHintX=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nShowExpHintY=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGoldMin=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGoldMax=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGameGoldMin=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGameGoldMax=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGamePointMin=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGamePointMax=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGameDiamondMin=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGameDiamondMax=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGameGirdMin=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGameGirdMax=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGameGloryMin=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nRedPackGameGloryMax=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.btRedPackGameUsesOptions=b[a];a+=1;c.nBagItemRBtnFunc=b[a];a+=1;c.boSendItemDescToClient=b[a];a+=1;c.boItemInfoFollowMouse=b[a];a+=1;c.boItemSrcShow=b[a];a+=1;c.boDisabledDoubleFireHitSkill=b[a];a+=1;c.nShowUserIcon=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nUseHPInterval=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nUseMPInterval=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nUseHPMPInterval=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nUseOtherTypeInterval=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nUpHouse=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nDownHouse=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.boDropOverLapItem=b[a];a+=1;c.OrderFee=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.TaxRate=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.OrderExpireHours=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a=a+4+8;c.boCanFoundry=b[a];a+=1;c.nWeaponDura=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nDressDura=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.MoveIntervalTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.AttackIntervalTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.SpellIntervalTime=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);a+=4;c.nMyShopType=b[a];a+=1;c.boHideMissionFrom=b[a];return c}function TClientUserShop(b){var c={},a=b[0];c.sShopName=gbkByteArr2UcsStr(GameUtil.slice(b,1,a+1));a=b[31];c.sMasterName=gbkByteArr2UcsStr(GameUtil.slice(b,32,32+a));c.dCreateDate=GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(b,64,72));c.nSellingItemCount=b[72]+(b[73]<<8)+(b[74]<<16)+(b[75]<<24);c.nSelledItemCount=b[76]+(b[77]<<8)+(b[78]<<16)+(b[79]<<24);c.nStorageItemCount=b[80]+(b[81]<<8)+(b[82]<<16)+(b[83]<<24);c.boBusiness=b[84];c.nCareValue=b[88]+(b[89]<<8)+(b[90]<<16)+(b[91]<<24);c.btState=b[92]>>>0;return c}function TClientUserShopItem(b){var c={Item:[]},a=b[0];c.sShopName=gbkByteArr2UcsStr(GameUtil.slice(b,1,a+1));a=b[31];c.sMasterName=gbkByteArr2UcsStr(GameUtil.slice(b,32,32+a));a=b[62];c.sBuyName=gbkByteArr2UcsStr(GameUtil.slice(b,63,63+a+1));c.btMoneyType=b[93]>>>0;c.btItemType=b[94]>>>0;c.dCreateDate=GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(b,96,104));c.boAllowSell=b[104];c.boGetMoney=b[105];c.Item=TClientItem(GameUtil.slice(b,106,b.length-1));return c}function TBaseObjectEffect(b){var c={};c.nEffectFileIndex=b[0]+(b[1]<<8)-65536;c.nEffectImageOffSet=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24);c.wEffectImageCount=b[8]+(b[9]<<8);c.wEffectFrameTime=b[10]+(b[11]<<8);c.wLoopCount=b[12]+(b[13]<<8);c.nX=b[14]+(b[15]<<8);c.nY=b[16]+(b[17]<<8);c.dwEffectTick=b[20]+(b[21]<<8)+(b[22]<<16)+(b[23]<<24);return c}function TBaseObjectEffectGom(b){var c={};c.nEffectFileIndex=b[0]+(b[1]<<8);c.nEffectImageOffSet=b[4]+(b[5]<<8)+(b[6]<<16)+(b[7]<<24);c.wEffectImageCount=b[8]+(b[9]<<8);c.wEffectFrameTime=b[10]+(b[11]<<8);c.wLoopCount=b[12]+(b[13]<<8);c.nX=b[14]+(b[15]<<8);c.nY=b[16]+(b[17]<<8);return c}function TClientList(b){var c={},a=b[0];c.sServerName=0==a?"":gbkByteArr2UcsStr(GameUtil.slice(b,1,a+1));a=b[41];c.sServerip=0==a?"":gbkByteArr2UcsStr(GameUtil.slice(b,42,42+a));c.nPort=b[62]+(b[63]<<8)+(b[64]<<16)+(b[65]<<24);a=b[66];c.sPassWord=0==a?"":gbkByteArr2UcsStr(GameUtil.slice(b,67,67+a));c.btFun=[];for(a=0;21>a;a++)c.btFun[a]=b[a+87];c.nListIdx=b[108]+(b[109]<<8)+(b[110]<<16)+(b[111]<<24);if(112<b.length){var a=b[112],d=Math.min(a+113,b.length);c.sGroupName=0==a?"":gbkByteArr2UcsStr(GameUtil.slice(b,113,d))}112>=b.length&&(c.sGroupName="");return c}function TBaseConfig(b){var c={},a=b[0];c.nJobmode=b[0];c.nHelmet=b[1];c.nCollect=b[2];c.nSpeed=b[3]+(b[4]<<8);32767<=c.nSpeed&&(c.nSpeed-=65536);c.nQuickregister=b[5];c.nAutohook=b[6];c.nUimode=b[7];c.nSimScreen=b[8];c.nAutopick=b[9];c.nNpcTxtSize=b[10];c.nAtkRange=b[11];c.boVoice=b[12];c.boPic=b[13];c.nVoicePort=b[14]+(b[15]<<8);c.boSmooth=b[16];c.boVirtual=b[17];a=b[18];c.sVoiceIP=gbkByteArr2UcsStr(GameUtil.slice(b,19,19+a));a=b[39];c.sPicUrl=gbkByteArr2UcsStr(GameUtil.slice(b,40,40+a));c.idx=b[240]+(b[241]<<8)+(b[242]<<16)+(b[243]<<24);b[244]&&(c.nH5TxtSize=b[244]);b[245]&&(c.nAppTxtSize=b[245]);return c}function TGameConfig(b){var c={},a=0;c.nOnlyName=b[a++];c.nShowName=b[a++];c.nMonName=b[a++];c.nNpcName=b[a++];c.nBBName=b[a++];c.nShiTi=b[a++];c.nChenghao=b[a++];c.nXueTiao=b[a++];c.nShowExp=b[a++];c.nPingBiHum=b[a++];c.nPingBiMon=b[a++];c.nAutoPack=b[a++];c.nHeroDun=b[a++];c.nYingYue=b[a++];c.nJingZhiMov=b[a++];c.nJingZhiLock=b[a++];c.nDaoDaoCiSha=b[a++];c.nBanYue=b[a++];c.nAutoLongYing=b[a++];c.nChiXuDun=b[a++];c.nChixuShifa=b[a++];c.nAutoFu=b[a++];c.nChiXuYingShen=b[a++];c.nMyZiYu=b[a++];c.nAutoLieHuo=b[a++];c.nAutoZhuRi=b[a++];c.nGeWeiCiSsha=b[a++];c.nAutoKaiTian=b[a++];c.nAutoHP=b[a++];c.nAutoMP=b[a++];c.nShunAutoHP=b[a++];c.nShunAutoMP=b[a++];c.nChuanSongHP=b[a++];c.nChuanSongMP=b[a++];c.nFaShiDanTi=b[a++];c.nFaShiQunTi=b[a++];c.nDaoShiDanTi=b[a++];c.nDaoShiQunTi=b[a++];c.nDaoShiBB=b[a++];c.nDaoShiShiDu=b[a++];c.nDaoShiZhiLiao=b[a++];c.nAutoLianGong=b[a++];c.nHeroAutoHP=b[a++];c.nHeroAutoMP=b[a++];c.nHeroShunAutoHP=b[a++];c.nHeroShunAutoMP=b[a++];c.nHeroZhaoHui=b[a++];c.boUpdate=b[a++];c.nSmooth=b[a++];c.nHumShowBlue=b[a++];c.nAutoMagicMo=b[a++];c.nAutoMagicMFang=b[a++];return c}function TDiyButton(b){var c={};c.nIdx=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24);var a=b[4];c.sName=gbkByteArr2UcsStr(GameUtil.slice(b,5,a+5));c.nX=b[21]+(b[22]<<8);c.nY=b[23]+(b[24]<<8);a=b[25];c.sCmd=gbkByteArr2UcsStr(GameUtil.slice(b,26,a+26));c.nColor=b[42];c.nSize=b[43];c.boOpen=b[44];return c}function TDiyGold(b){var c={};c.nIdx=b[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24);var a=b[4];c.sVarName=gbkByteArr2UcsStr(GameUtil.slice(b,5,a+5));a=b[25];c.sGoldName=gbkByteArr2UcsStr(GameUtil.slice(b,26,a+26));a=b[46];c.sShowUI=gbkByteArr2UcsStr(GameUtil.slice(b,47,a+47));c.boOpen=b[97];c.nX=b[98]+(b[99]<<8);c.nY=b[100]+(b[101]<<8);return c}function TItemScoreRecord(b){var c={},a=0;c.BoOpen=b[a++];a=4;c.AC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MaxAC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MAC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MaxMAC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.DC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MaxDC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MaxMC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.SC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MaxSC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MaxHP=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MaxMP=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.HPRecover=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MPRecover=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.PoisonRecover=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Anger=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.AddDnger=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Crit=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Preciseness=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Alacrity=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.AckSpeed=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Lucky=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Curse=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.TeamUpHurt=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.SacredAdd=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.SacredLess=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.ADDHurt=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.CloseDefense=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.TargetCrit=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.BagWeight=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.WearWeight=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.DecAC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.DecMAC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Rebound=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.ItemAttachEXP=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.AntiPoison=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.AntiMC=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Teleport=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.GuildTeleport=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.HideMode=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Paralysis=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Revival=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.FlameRing=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.RecoveryRing=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MagicShield=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MuscleRing=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.FastTrain=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.ProbeNecklace=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.SupermanItem=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.HongMoSuite=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.MoXieSuite=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.DropExp=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.DroLevel=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.Memory=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.NoDropItem=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.NoDropUseItem=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.UnParalysis=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.UnRevival=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.UnMagicShield=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.boBagShow=b[a];var a=a+4,d=b[a++];c.ResourceName=gbkByteArr2UcsStr(GameUtil.slice(b,a,d+a));a+=15;c.ImageStart=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.ImageEnd=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.boStartArrow=b[a];a+=4;c.PlaySpeed=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.PlayIndex=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.ArrowX=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.ArrowY=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.boItemBaseScore=b[a++];c.boOpenShowItemScore=b[a++];c.boJobShowItemScore=b[a++];return c}function TClientItemItemScore(b){var c={},a=0;c.MakeIndex=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.stdIndex=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);c.iExtItemScore=b[a++]+(b[a++]<<8)+(b[a++]<<16)+(b[a++]<<24);return c}function TActionInfo(b){for(var c=b.buff,a={ActionArr:[]},d=0;3>=d;d++)a.ActionArr[d]=c[b.pos++]|c[b.pos++]<<8;a.boDir_Boolean=0!=c[b.pos++];return a}function TCompleteActionInfo(b){var c=b.buff,a={};a.ActionInfo=TActionInfo(b);a.ActionEffInfo=TActionInfo(b);a.EffFileIdx=c[b.pos++]|c[b.pos++]<<8|c[b.pos++]<<16|c[b.pos++]<<24;return a}function TClientMonMagicInfo(b){for(var c=b.buff,a={AttMaigcEffInfo:[]},d=0;4>=d;d++)a.AttMaigcEffInfo[d]=TActionInfo(b);a.btFlyMaigcType=[];for(d=0;4>=d;d++)a.btFlyMaigcType[d]=c[b.pos++];a.DelayShowMagicTimeArr=[];for(d=0;4>=d;d++)a.DelayShowMagicTimeArr[d]=c[b.pos++]|c[b.pos++]<<8;a.EffFileIdxArr=[];for(d=0;4>=d;d++)a.EffFileIdxArr[d]=c[b.pos++]|c[b.pos++]<<8|c[b.pos++]<<16|c[b.pos++]<<24;a.EffSoundIdxAr=[];for(d=0;4>=d;d++)a.EffSoundIdxAr[d]=c[b.pos++]|c[b.pos++]<<8|c[b.pos++]<<16|c[b.pos++]<<24;a.boBlendArr=[];for(d=0;4>=d;d++)a.boBlendArr[d]=0!=c[b.pos++];a.AttBowMagic=[];for(d=0;4>=d;d++)a.AttBowMagic[d]=TActionInfo(b);a.BowFileIdxArr=[];for(d=0;4>=d;d++)a.BowFileIdxArr[d]=c[b.pos++]|c[b.pos++]<<8|c[b.pos++]<<16|c[b.pos++]<<24;a.BowSoundIdxArr=[];for(d=0;4>=d;d++)a.BowSoundIdxArr[d]=c[b.pos++]|c[b.pos++]<<8|c[b.pos++]<<16|c[b.pos++]<<24;a.EffectFiyedDrawMethod=[];for(d=0;4>=d;d++)a.EffectFiyedDrawMethod[d]=0!=c[b.pos++];return a}function TClientSmartMonster(b){var c=b.buff,a={};a.MonAppr=c[b.pos++]+(c[b.pos++]<<8);a.ActionFileIdx=c[b.pos++]+(c[b.pos++]<<8)+(c[b.pos++]<<16)+(c[b.pos++]<<24);a.SoundMonFileidx=c[b.pos++]+(c[b.pos++]<<8)+(c[b.pos++]<<16)+(c[b.pos++]<<24);a.HPImageX=c[b.pos++]+(c[b.pos++]<<8);a.HPImageY=c[b.pos++]+(c[b.pos++]<<8);a.BaseAction=[];for(var d=0;11>=d;++d)a.BaseAction[d]=TCompleteActionInfo(b);a.LiveAndDieEff=TActionInfo(b);a.EffFileIdx=c[b.pos++]+(c[b.pos++]<<8)+(c[b.pos++]<<16)+(c[b.pos++]<<24);a.ClientMonMagicInfo=TClientMonMagicInfo(b);a.HPImageFileIdx=c[b.pos++]+(c[b.pos++]<<8)+(c[b.pos++]<<16)+(c[b.pos++]<<24);a.HPimageIndex=c[b.pos++]+(c[b.pos++]<<8)+(c[b.pos++]<<16)+(c[b.pos++]<<24);a.HPbgImageX=c[b.pos++]+(c[b.pos++]<<8);a.HPbgImageY=c[b.pos++]+(c[b.pos++]<<8);a.HPsImageX=c[b.pos++]+(c[b.pos++]<<8);a.HPsImageY=c[b.pos++]+(c[b.pos++]<<8);return a}function TClientDiySkillBaseData(b){var c=b.buff,a={};a.btIconFileIndex=c[b.pos++];a.wIconImageIndex=c[b.pos++]|c[b.pos++]<<8;a.btUsesActionType=c[b.pos++];a.wSoundID=c[b.pos++]|c[b.pos++]<<8;a.sSoundFileNameUses=readDephiString(b,20);a.sSoundFileNameFly=readDephiString(b,20);a.sSoundFileNameExp=readDephiString(b,20);a.sSoundFileNameAttackMan=readDephiString(b,20);a.sSoundFileNameAttackMon=readDephiString(b,20);return a}function readDephiString(b,c){var a=b.buff[b.pos++],a=GameUtil.slice(b.buff,b.pos,b.pos+a);b.pos+=c;return gbkByteArr2UcsStr(a)}function TClientDiySkillBaseEffect(b){var c=b.buff,a={};a.btFileIndex=c[b.pos++];a.dwStartIndex=c[b.pos++]|c[b.pos++]<<8|c[b.pos++]<<16|c[b.pos++]<<24;a.btCount=c[b.pos++];a.btSkip=c[b.pos++];a.btBlendMode=c[b.pos++];a.wFrameTime=c[b.pos++]|c[b.pos++]<<8;a.btDirType=c[b.pos++];return a}function TClientDiySkillEffect(b){var c={};c.Base=TClientDiySkillBaseEffect(b);c.Add=TClientDiySkillBaseEffect(b);return c}function TClientDiySkillEffectsFileData(b){var c={};c.Action=TClientDiySkillEffect(b);c.Fly=TClientDiySkillEffect(b);c.Exp=TClientDiySkillEffect(b);return c}function TClientDiySkillDataFileData(b){var c=b.buff,a={};a.btType=c[b.pos++];a.boCanLockTarget=0!=c[b.pos++];a.boNewEffect=0!=c[b.pos++];a.boFiyFried=0!=c[b.pos++];a.btWarriorSkillType=c[b.pos++];a.Bases=[];for(c=0;4>=c;c++)a.Bases[c]=TClientDiySkillBaseData(b);a.Effect=[];for(c=0;4>=c;c++)a.Effect[c]=TClientDiySkillEffectsFileData(b);a.WarriorSkillAddEff=TClientDiySkillBaseEffect(b);return a}function TClientDiySkillFileData(b){var c=b.buff,a={};a.wMagicId=c[b.pos++]+(c[b.pos++]<<8)>>>0;a.Data=TClientDiySkillDataFileData(b);return a}function TClientMailViewInf(b,c){var a={};c*=79;a.nMailIdx=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;c++;a.sSendName=gbkByteArr2UcsStr(GameUtil.slice(b,c,c+30));c+=30;c++;a.sCaption=gbkByteArr2UcsStr(GameUtil.slice(b,c,c+30));c+=30;a.btState=b[c++];a.SendDate=GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(b,c,c+8));c+=8;a.nLimited=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;return a}function TClientMailItemInfo(b){var c={},a=0;c.btIndex=b[a++];c.nCount=b[a++]|b[a++]<<8|b[a++]<<16|b[a++]<<24;c.nCurrentCount=b[a++]|b[a++]<<8|b[a++]<<16|b[a++]<<24;c.item=TClientItem(GameUtil.slice(b,a,b.length));return c}function TClientMailInf(b,c){var a={},d=0;d++;a.sCharName=gbkByteArr2UcsStr(GameUtil.slice(b,d,d+30));d+=30;d++;a.sMemo=gbkByteArr2UcsStr(GameUtil.slice(b,d,d+255));d+=255;a.btType=b[d++];a.btState=b[d++];d+=4;a.items=[];for(var e=0;e<c;e++)a.items.push(TClientMailItemInfo(GameUtil.slice(b,d,d+g_itemSize+9+1))),d+=g_itemSize+9;return a}function TGuildEventInfo(b,c){for(var a=[],d=0,e=0;e<c;e++)a[e]=[],a[e].push(b[d++]),d++,a[e].push(gbkByteArr2UcsStr(GameUtil.slice(b,d,d+30))),d+=30,d++,a[e].push(gbkByteArr2UcsStr(GameUtil.slice(b,d,d+30))),d+=30,d++,a[e].push(gbkByteArr2UcsStr(GameUtil.slice(b,d,d+30))),d+=30,d+=2,a[e].push(GameUtil.GetJSDateTimeFromDelphi8Bytes(GameUtil.slice(b,d,d+8))),d+=8;if(1<c)return a;if(1==c)return a[0]}var USE_NEW_MAP_FORMAT=!0,MapLayer=function(){function b(){this.init()}var c=b.prototype;c.init=function(a){this.object_list=[];this.sp_lists=[];this.grid=[];this.data_lists=[];this.ene_pos=new Laya.Point;Laya.timer.loop(500,this,this.SceneHeartbeat)};c.SceneHeartbeat=function(){if(null!=this.root)for(var a=this.root._childs.length-1;0<=a;a--){var d=this.root._childs[a];d&&(d.sp?(d.is_die?d.zOrder=Math.floor(d.y-d.height-100):d.zOrder=Math.floor(d.y-d.height),-86>=d.height&&(d.zOrder+=d.height+32),d.skin_feature&&98==d.skin_feature.wRaceImg&&(d.zOrder-=100)):d.resname&&(d.zOrder=Math.floor(d.y-32)))}};c.oldMapProcess=function(a,d,b){b&&d==this.sceneid&&(a=new DataView(b.slice(0,4)),this.width_=a.getUint16(0,!0),this.height_=a.getUint16(2,!0),this.map_data=b,this.pieceSize_=Math.floor((this.map_data.byteLength-4)/(this.width_*this.height_)),this.columnByteSize_=this.pieceSize_*this.width_,this.mapMaxX=this.width_,this.mapMaxY=this.height_,this.maxPicCols=Math.ceil(48*this.mapMaxX/480),this.maxPicRows=Math.ceil(32*this.mapMaxY/512),this.onanalyzeJson())};c.newMapProcess=function(a,d,b){if(b&&d==this.sceneid){var c=b.byteLength-8;a=new DataView(b);d=a.getInt32(c,!0);for(var c=a.getInt32(c+4,!0),f=0,h=Array(c),l=Array(c),m=0;m<c;m++){var n=Array(d),q=Array(d);h[m]=n;l[m]=q;for(var p=0;p<d;p++)n[p]=a.getInt8(f++),q[p]=0==n[p]?1:0}AStart.setMapData(this.sceneid,l);this.width_=d;this.height_=c;this.map_data=b;this.map_flags=h;this.old_map_flags=l;this.pieceSize_=Math.floor((this.map_data.byteLength-4)/(this.width_*this.height_));this.mapMaxX=this.width_;this.mapMaxY=this.height_;this.maxPicCols=Math.ceil(48*this.mapMaxX/480);this.maxPicRows=Math.ceil(32*this.mapMaxY/512);this.columnByteSize_=this.pieceSize_*this.width_;this.onanalyzeJson();ObjectManage.updateAlpha()}};c.initmap=function(a,d,b){this.columnByteSize_=this.pieceSize_=this.height_=this.width_=0;Laya.loader.load(a,Laya.Handler.create(this,(USE_NEW_MAP_FORMAT?this.newMapProcess:this.oldMapProcess).bind(this),[a,b]),null,Laya.Loader.BUFFER)};c.getFlagByGridPos=function(a){var d=this.map_flags;return d&&d[0]&&a.y<d.length&&a.x<d[0].length?d[a.y][a.x]:0};c.getgridinfo=function(a,d){var b=4+this.columnByteSize_*d+a*this.pieceSize_,b=new DataView(this.map_data.slice(b,b+3));return new Laya.Point(b.getUint8(0),b.getUint16(1,!0))};c.setParent=function(a){this.root=a};c.loadmapdata=function(){USE_NEW_MAP_FORMAT?this.initmap("map/"+this.sceneid+".bin",!0,this.sceneid):(AStart.obsdata(this.sceneid),this.initmap("data/mapdata/mapbin/"+this.sceneid+".bin",!0,this.sceneid))};c.enterMap=function(a,d,b,c){this.cur_x==d&&this.cur_y==b&&this.sceneid==a?Actionlock=rockerlock=!1:(this.grid=[],this.cur_x=d,this.cur_y=b,this.ene_pos.x=d,this.ene_pos.y=b,this.sceneid=a,0==g_first_entermap&&this.loadmapdata())};c.onLocation=function(a,d){a&&(this.cur_x=a);d&&(this.cur_y=d);this.root.pos(-(48*this.cur_x*this.root.scaleX-browser_width/2)-20,-(32*this.cur_y*this.root.scaleY-browser_height/2+20));Laya.stage.event("LocationLoad",[this.cur_x,this.cur_y])};c.onanalyzeJson=function(){for(var a=0;a<this.sp_lists.length;a++)this.sp_lists[a]._style&&(GameUtil.clearResByUrl(this.sp_lists[a].name),this.root.removeChild(this.sp_lists[a]));this.sp_lists=[];this.drawmap(this.cur_x,this.cur_y);this.drawmask(this.cur_x,this.cur_y);this.onLocation()};c.drawmask=function(a,d){if(!(5<=ObjectManage.object_list.length)){var b=USE_NEW_MAP_FORMAT?12:10,c=USE_NEW_MAP_FORMAT?12:16,f=Math.max(0,a-b),b=Math.min(this.mapMaxX,a+b+10),h=Math.max(0,d-c),c=Math.min(this.mapMaxY,d+c+16),l=this;if(!USE_NEW_MAP_FORMAT)for(var m=f;m<b;++m)for(var n=h;n<c;++n)if(null==this.grid[m+"_"+n]){var q=this.getgridinfo(m,n);if(0!=q.x||0!=q.y){var p=GameUtil.getprefixname(q.y-1,5),q=0==q.x?"data/objects/"+p+".png":"data/objects"+(q.x+1)+"/"+p+".png";this.grid[m+"_"+n]=1;Laya.loader.load(q,Laya.Handler.create(this,function(a,d,f){var b=Laya.loader.getRes(a);if(b&&b.bitmap&&!b.bitmap._recreateLock){var e=new Laya.Image;e.graphics.drawTexture(b,0,-b.height);e.pos(48*d,32*(f+1));e.posx=d;e.posy=f;e.alpha=.7;e.resname=a;l.root.addChild(e);l.sp_lists.push(e)}},[q,m,n]),null,Laya.Loader.IMAGE)}else this.grid[m+"_"+n]=0}this.clearMaskImage(f,b,h,c)}};c.clearMaskImage=function(a,d,b,c){for(var f=this.root._childs.length-1;0<=f;f--){var h=this.root._childs[f];if(null==h.file){if(h._urls){var l=new Laya.Point;h._pos?(l.x=h._pos.x+h.x,l.y=h._pos.y+h.y):(l.x=h.x,l.y=h.y)}h.posx<a||h.posx>d||h.posy<b||h.posy>c?(delete this.grid[h.posx+"_"+h.posy],h.removeSelf()):l&&(l.x/48<a||l.x/48>d||l.y/32<b||l.y/32>c)&&Animationmodule.removeAni(h)}}};c.drawmap=function(a,d){var b=Math.ceil(48*this.width_/480),c=12,f=12;USE_NEW_MAP_FORMAT&&(c=10,f=16);var h=Math.floor(a/c),l=Math.floor(d/f);this.cur_x=a;this.cur_y=d;if(this.ene_pos.x!=l||this.ene_pos.y!=h){this.ene_pos.x=l;this.ene_pos.y=h;for(var m=-1;2>m;m++)for(var n=-2;3>n;n++)if(0<=l+m&&0<=h+n&&l+m<=this.mapMaxY/f&&h+n<=this.mapMaxX/c)if(USE_NEW_MAP_FORMAT){var q=l+m,p=h+n;if(!(p+1>this.maxPicCols||q+1>this.maxPicRows)){var r=GameUtil.getprefixname(b*q+p,5),r="map/"+this.sceneid+"/"+r+".png";this.newmap_createmaps(r,a,d,m,n,this.ene_pos.x,this.ene_pos.y,q,p)}}else q=GameUtil.getprefixname(l+m,3),p=GameUtil.getprefixname(h+n,4),r="data/map/"+this.sceneid+"/"+q+p+".png",this.createmaps(r,a,d,m,n,this.ene_pos.x,this.ene_pos.y);this.clearMapImage()}};c.createmaps=function(a,d,b,c,f,h,l){if(null==this.grid[a]){var m=this;Laya.loader.load(a,Laya.Handler.create(this,function(a,d,f,b,e,c,h){var g=Laya.loader.getRes(a);if(g){m.grid[a]=1;var l=new Laya.Image,B=48*(d-12*h),A=32*(f-12*c);l.name=a;l.height=g.height;l.width=g.width;l.zOrder=0;l.px=c+b;l.py=h+e;l.graphics.drawTexture(g);l.pos(48*d+e*g.width-B,32*f+b*g.height-A);m.root.addChild(l);m.sp_lists.push(l)}},[a,d,b,c,f,h,l]),null,Laya.Loader.IMAGE,0)}};c.newmap_createmaps=function(a,d,b,c,f,h,l,m,n){if(null==this.grid[a]){var q=this;Laya.loader.load(a,Laya.Handler.create(this,function(a,d,f,b,e,c,m,h,g){if(d=Laya.loader.getRes(a))q.grid[a]=1,f=new Laya.Image,f.name=a,f.height=d.height,f.width=d.width,f.zOrder=0,f.px=c+b,f.py=m+e,f.graphics.drawTexture(d),f.pos(480*g,512*h),q.root.addChild(f),q.sp_lists.push(f)},[a,d,b,c,f,h,l,m,n]),null,Laya.Loader.IMAGE,0)}};c.clearMapImage=function(){for(var a=this.sp_lists.length-1;0<=a;a--){var d=this.sp_lists[a];d&&(d.px-1>this.ene_pos.x||d.px+1<this.ene_pos.x||d.py-2>this.ene_pos.y||d.py+2<this.ene_pos.y)&&(delete this.grid[d.name],GameUtil.clearResByUrl(d.name),this.root.removeChild(d),this.sp_lists.splice(a,1))}};c.pointlegality=function(a){return 0>=a.x||0>=a.y||a.x>=this.mapMaxX||a.y>=this.mapMaxY?!1:AStart.cur_matx&&AStart.cur_matx.length>a.y&&AStart.cur_matx[0].length>a.x?1!=AStart.cur_matx[a.y][a.x]:!1};c.CanMove=function(a,d,b){if(null==AStart.cur_matx)return!1;var c=!1;switch(b){case 1:b=GameUtil.getMovePoint(a,d,1);c=this.pointlegality(b);AStart.cur_matx&&AStart.cur_matx.length>b.y&&AStart.cur_matx[0].length>b.x&&0!=AStart.cur_matx[b.y][b.x]&&1!=AStart.cur_matx[b.y][b.x]&&!this.isopendoor&&Sendmessage.sendOpenDoor(b.x,b.y,AStart.cur_matx[b.y][b.x]);break;case 2:b=GameUtil.getMovePoint(a,d,1);var f=GameUtil.getMovePoint(a,d,2),c=this.pointlegality(b)&&this.pointlegality(f);AStart.cur_matx&&AStart.cur_matx.length>b.y&&AStart.cur_matx.length>f.y&&AStart.cur_matx[0].length>b.x&&AStart.cur_matx[0].length>f.x&&0!=AStart.cur_matx[f.y][f.x]&&1!=AStart.cur_matx[f.y][f.x]&&!this.isopendoor&&Sendmessage.sendOpenDoor(f.x,f.y,AStart.cur_matx[f.y][f.x]);break;case 3:b=GameUtil.getMovePoint(a,d,1),f=GameUtil.getMovePoint(a,d,2),a=GameUtil.getMovePoint(a,d,3),c=this.pointlegality(b)&&this.pointlegality(f)&&this.pointlegality(a)}return c};c.opendoor=function(a){if(!(AStart.cur_matx[0].length<a.x)){this.isopendoor=!0;for(var d=a.x-2;d<a.x+2;d++)for(var b=a.y-2;b<a.y+2;b++)d!=a.x&&b!=a.y&&1>=AStart.cur_matx[b][d]&&(AStart.cur_matx[b][d]=0)}};c.closedoor=function(a){this.isopendoor=!1};return b}(),AnimationModule=function(){function b(){this.init()}_proto=b.prototype;_proto.init=function(){this.ani_list=[];Laya.timer.clear(this,this.heartbeat);Laya.timer.frameLoop(1,this,this.heartbeat)};_proto.removeAniname=function(b){for(var a=this.ani_list.length-1;0<=a;a--)this.ani_list[a].name!=b||0>=this.ani_list.length||(this.ani_list[a].destroy(),this.ani_list.splice(a,1))};_proto.removeAni=function(b){if(null==b){for(b=0;b<this.ani_list.length;b++)this.ani_list[b].destroy();this.ani_list=[]}else b=this.ani_list.indexOf(b),-1!=b&&(this.ani_list[b].destroy(),this.ani_list.splice(b,1))};_proto.clearAniCacheAssets=function(){for(var b=this.ani_list.length-1;0<=b;b--)this.ani_list[b]&&this.isclearlist(this.ani_list[b])&&(this.setclearcache(this.ani_list[b]._urls),this.ani_list[b].destroy(),this.ani_list.splice(b,1));for(var a in g_ani_clearlist)a&&(GameUtil.clearResByUrl(a),delete g_ani_clearlist[a])};_proto.setclearcache=function(b){for(var a=0;a<b.length;a++)""==b[a]||g_ani_keeplist[b[a]]||(g_ani_clearlist[b[a]]=!0)};_proto.isclearlist=function(b){for(var a=b._urls,d=b.parent,e=0;e<a.length;e++){var g=a[e];if(-1!=g.indexOf("gameres/animation/addskills/")||-1!=g.indexOf("gameres/animation/bonus/")||-1!=g.indexOf("gameres/animation/task/")||-1!=g.indexOf("gameres/animation/hero_power/")||-1!=g.indexOf("gameres/animation/hp_ani/")||-1!=g.indexOf("gameres/animation/minimap/")||-1!=g.indexOf("gameres/animation/moveing/")||-1!=g.indexOf("gameres/animation/halo/")||-1!=g.indexOf("gameres/animation/autohook/")||"skilllockani"==b.name||"heroatt"==b.name||"RedPacket"==b.name||-1!=g.indexOf("gameres/animation/maillogo/")||"RedPacket2"==b.name||"friendAni"==b.name||d&&d.data&&d.data.record==playerID||0==b.name.indexOf("icongif")||0==b.name.indexOf("humicon")||0==b.name.indexOf("screeneffect"))return g_ani_keeplist[g]=!0,!1}return!0};_proto.heartbeat=function(){for(var b=Laya.Browser.now(),a=this.ani_list.length-1;0<=a;a--){var d=this.ani_list[a];if(d&&b-d._playtime>=d._time){d._playtime=b;if(d._index>=d._urls.length&&(d._loop&&(d._index=0),d._app&&d._callback&&d._callback.call(d._app),d._remove)){d.destroy();this.ani_list.splice(a,1);continue}var e=Laya.loader.getRes(d._urls[d._index]);if(e){-1==d._usepos&&(d.visible=!1);var g=0,f=0;if(!d._off)continue;d._off[d._index]&&(g=d._off[d._index].x,f=d._off[d._index].y);void 0===g&&(g=0);void 0===f&&(f=0);null!=d._pos&&(g+=Math.floor(d._pos.x-(d._usepos?e.width/2:0)),f+=Math.floor(d._pos.y-(d._usepos?e.height/2:0)));e.bitmap&&!e.bitmap._recreateLock&&(d.graphics.clear(),d.graphics.drawTexture(e,g,f))}d._index++}}};_proto.getAtlas=function(b,a){var d={},e=("000000"+a).slice(-6),g=GameUtil.getImageSetNameByPath(b+e),e=g.replace(".atlas","/"+e+".png");d.img=e;d.atlas=g;return d};_proto.playframe=function(b,a,d,e,g,f,h,l,m,n,q,p,r,v){function w(){D&&(D._isblend&&null!=D._style&&GameUtil.IfOpenBlend(d,e)&&(D.blendMode=Laya.BlendMode.OVERLAY),D._off=Offsetmodule.getoffsets(r,e,g),D.visible=!0)}function z(){if(D){for(var a=0;a<u.length;a++)D._isblend&&null!=D._style&&GameUtil.IfOpenBlend(u[a],e)&&(D.blendMode=Laya.BlendMode.OVERLAY);D._off=Offsetmodule.getoffsets(r,e,g);D.visible=!0}}if(null!=a){var C=[],u=[],B=!0;0==d.indexOf("gameres/animation")&&(B=!1);if(p)for(p=g;p>=e;p--){var A=GameUtil.getprefixname(p,6);B?(A=this.getAtlas(d,A),C.push(A.img),u.push(A.atlas)):C.push(d+A+".png")}else for(p=e;p<=g;p++)A=GameUtil.getprefixname(p,6),B?(A=this.getAtlas(d,A),C.push(A.img),u.push(A.atlas)):C.push(d+A+".png");var D=Laya.Pool.getItemByClass("sprite",Laya.Sprite);D.zOrder=999999;D._loop=h;D._remove=l;D._app=n;D._callback=q;D._pos=m;D._index=0;D._urls=C;D._time=f;D._isblend=1==g_animation_force_blend?!0:b;D._playtime=0;D.visible=!1;D._usepos=null==v||v?!0:!1;null==r&&(r=d);a.addChild(D);this.ani_list.push(D);B?Laya.loader.load(u,Laya.Handler.create(this,z),null,Laya.Loader.ATLAS):Laya.loader.load(C,Laya.Handler.create(this,w),null,Laya.Loader.IMAGE);return D}};_proto.playframeEx=function(b,a,d,e,g,f,h,l,m,n,q,p,r,v){function w(){A&&(A._isblend&&null!=A._style&&GameUtil.IfOpenBlend(d,e)&&(A.blendMode=Laya.BlendMode.OVERLAY),A.visible=!0)}if(null!=a){var z=[],C=[];if(p)for(p=g;p>=e;p--){var u=GameUtil.getprefixname(p,6),B="data/"+d+"/"+u;-1==C.indexOf(B)&&C.push(B);z.push(GameMission.getUrl(d,u))}else for(p=e;p<=g;p++)u=GameUtil.getprefixname(p,6),B="data/"+d+"/"+u,-1==C.indexOf(B)&&C.push(B),z.push(GameMission.getUrl(d,u));var A=Laya.Pool.getItemByClass("sprite",Laya.Sprite);A.zOrder=999999;A._loop=h;A._remove=l;A._app=n;A._callback=q;A._pos=m;A._index=0;A._urls=z;A._time=f;A._isblend=b;A._playtime=0;A.visible=!1;A._usepos=null==v||v?!0:!1;null==r&&(r=d);A._off=Offsetmodule.getoffsets(r,e,g);GameUtil.loadImgEx(C,w);a.addChild(A);this.ani_list.push(A);return A}};return b}(),AutoHookModule=function(){function b(){this.init()}_prototype=b.prototype;_prototype.init=function(){this.autocorrect=0;this.findPos=!0;this.randPos=null;this.goDir=-1;this.itemId=this.summontime=this.poison_num=this.errCount=0;this.itemPos=new Laya.Point};_prototype.autorule=function(){var b=ObjectManage.findobject(playerID);if(b.skin_feature)switch(b.skin_feature.btJob){case 0:this.autoskillforZS(b);break;case 1:this.autoskillforFS(b);break;case 2:this.autoskillforDZ(b)}};_prototype.canuseskill=function(b){var a=b.skin_feature.btJob;return(1==a&&this.hastriggerskill(b,GlobalCfglist.single_fs_list)||2==a&&this.hastriggerskill(b,GlobalCfglist.single_ds_list)&&this.canuseAmulet())&&(a=ObjectManage.findobject(lockingID))&&a.grid?6>b.grid.distance(a.grid.x,a.grid.y):!1};_prototype.rangelegal=function(b,a){if(b&&a)return 7>b.grid.distance(a.grid.x,a.grid.y)};_prototype.escaperule=function(b,a){if(4>b.grid.distance(a.grid.x,a.grid.y)){var d=GameUtil.getorientation(b.grid,a.grid);GameUtil.escapedir(d);var d=!1,e=null;if(!d)for(var g=0;8>g&&!(e=g,d=GameUtil.moverule(b.grid,g,2));g++);if(d&&null!=e&&!chaseing)return Objectcontrol.executemove(d,e,3),!0}return!1};_prototype.setSkill=function(b,a){if(b){var d=Skillmodule.getskilldata(b.Def.btEffect,b.Def.wMagicId);if(d&&0==d.mode&&0!=d.fly_frame&&!this.checkFly()&&autohookstate){var d=ObjectManage.findobject(playerID),e=ObjectManage.findobject(lockingID);d&&e&&Movemodule.startmove(d.grid,e.grid)}else activate_skilluse=b.Def.btEffect,activate_skilltype=b.Def.wMagicId,(activate_skillpos=a)?Objectcontrol.useskill(b.Def.btEffect,b.Def.wMagicId,a):Objectcontrol.useskill(b.Def.btEffect,b.Def.wMagicId)}};_prototype.checkFly=function(){var b=ObjectManage.findobject(playerID),a=ObjectManage.findobject(lockingID);if(b&&a){var d=GameUtil.getorientation(b.grid,a.grid);if(-1!=d){for(var e=b.grid,g=b.grid.distance(a.grid.x,a.grid.y);b.grid.distance(e.x,e.y)<g;)if(d=GameUtil.getorientation(e,a.grid),e=GameUtil.getMovePoint(e,d,1),1==AStart.cur_matx[e.y][e.x])return!1;return!0}}return!1};_prototype.autoskillforZS=function(b){Objectcontrol.fight()};_prototype.autoskillforFS=function(b){var a=this.hastriggerskill(b,GlobalCfglist.single_fs_list),d=this.hastriggerskill(b,GlobalCfglist.group_fs_list),e=ObjectManage.findobject(lockingID);if(null==e)lockingID=0;else{var g=this.rangelegal(b,e),f=this.nearbyenemynum(),h=b.getChildByName("eqsecure"+playerID);if(GlobalCfglist.f_autoskill_1&&!h)for(h=0;h<g_UserMagicList.length;h++)if(g_UserMagicList[h]&&"\u9b54\u6cd5\u76fe"==g_UserMagicList[h].Def.sMagicName&&GameUtil.JudgeMagicMp(g_UserMagicList[h],b)){activate_skilluse=29;activate_skilltype=31;Objectcontrol.useskill(29,31);return}3<f&&GlobalCfglist.group_fs&&d?g?this.setSkill(d):Movemodule.startmove(b.grid,e.grid):a&&GlobalCfglist.single_fs?g&&0==e.ddl_state?this.setSkill(a):Movemodule.startmove(b.grid,e.grid):0==e.ddl_state?Objectcontrol.fight():Movemodule.startmove(b.grid,e.grid);a&&!Objectcontrol.use_skill&&!Objectcontrol.use_attack&&GlobalCfglist.auto_dodge&&this.escaperule(b,e)}};_prototype.autoskillforDZ=function(b){var a=this.hastriggerskill(b,GlobalCfglist.single_ds_list),d=this.hastriggerskill(b,"\u65bd\u6bd2\u672f"),e=this.hastriggerskill(b,GlobalCfglist.ds_summon_list),g=this.hastriggerskill(b,GlobalCfglist.group_ds_list),f=ObjectManage.findobject(lockingID);if(null==f)lockingID=0;else{var h=this.rangelegal(b,f),l=this.nearbyenemynum(),m=Laya.Browser.now(),n=AutoHookmodule.hastriggerskill(b,GlobalCfglist.ds_cure_list);n&&GlobalCfglist.ds_cure&&m-Gameconfig.cure_time>1E3*GlobalCfglist.ds_time_slider&&m-Gameconfig.cure_time>1E3*n.Def.w02&&b&&b.m_Abil&&!b.is_die&&b.m_Abil.HP<=b.m_Abil.MaxHP*GlobalCfglist.ds_limit_slider/100?(AutoHookmodule.setSkill(n,b.grid),Gameconfig.cure_time=m):(GlobalCfglist.ds_summon&&this.canuseAmulet()&&5E3<m-this.summontime&&e&&this.checkcallpet(b,GlobalCfglist.ds_summon_list)?(this.setSkill(e),this.summontime=m):3<l&&GlobalCfglist.group_ds&&g?h?this.setSkill(g):Movemodule.startmove(b.grid,f.grid):GlobalCfglist.poison_ds&&d&&this.canusePoison()&&4>this.poison_num?h?(this.setSkill(d),this.poison_num++):Movemodule.startmove(b.grid,f.grid):GlobalCfglist.single_ds&&a&&this.canuseAmulet()?h&&0==f.ddl_state?this.setSkill(a):Movemodule.startmove(b.grid,f.grid):0==f.ddl_state?Objectcontrol.fight():Movemodule.startmove(b.grid,f.grid),a&&!Objectcontrol.use_skill&&!Objectcontrol.use_attack&&GlobalCfglist.auto_dodge&&this.escaperule(b,f))}};_prototype.nearbyenemynum=function(){var b=0,a=ObjectManage.findobject(lockingID);if(a)for(var d=0;d<ObjectManage.object_list.length;d++){var e=ObjectManage.object_list[d];if(e.data&&1==e.type&&!e.is_die){var g=e.grid.x-a.grid.x,e=e.grid.y-a.grid.y;4>g&&-4<g&&4>e&&-4<e&&b++}}return b};_prototype.haswearAmulet=function(){var b=g_UserItemList[9];return b&&(-1!=b.s.Name.indexOf("\u62a4\u8eab\u7b26")||"\u5929\u5c0a\u9053\u7b26"==b.s.Name)&&1<=b.Dura};_prototype.haswearGreenP=function(){var b=g_UserItemList[9];return b&&-1!=b.s.Name.indexOf("\u7070\u8272\u836f\u7c89")};_prototype.haswearRedP=function(){var b=g_UserItemList[9];return b&&-1!=b.s.Name.indexOf("\u9ec4\u8272\u836f\u7c89")};_prototype.hasBagAmulet=function(){for(var b=0;b<g_BagItemsList.length;b++){var a=g_BagItemsList[b];if(a&&(-1!=a.s.Name.indexOf("\u62a4\u8eab\u7b26")||-1!=a.s.Name.indexOf("\u5929\u5c0a\u9053\u7b26")))return!0}return!1};_prototype.hasBagGreenP=function(){for(var b=0;b<g_BagItemsList.length;b++){var a=g_BagItemsList[b];if(a&&-1!=a.s.Name.indexOf("\u7070\u8272\u836f\u7c89"))return!0}return!1};_prototype.hasBagRedP=function(){for(var b=0;b<g_BagItemsList.length;b++){var a=g_BagItemsList[b];if(a&&-1!=a.s.Name.indexOf("\u9ec4\u8272\u836f\u7c89"))return!0}return!1};_prototype.checkcallpet=function(b,a){if(!this.hassubordinates()&&this.hastriggerskill(b,a))return this.canuseAmulet()};_prototype.canuseAmulet=function(){return this.haswearAmulet()||this.hasBagAmulet()&&(2==g_ClientConfig.Params[4]||GlobalCfglist.d_autoskill_3)||1==g_ClientConfig.Params[4]};_prototype.canusePoison=function(){return this.hasBagRedP()&&(2==g_ClientConfig.Params[4]||GlobalCfglist.d_autoskill_3)||this.hasBagGreenP()&&(2==g_ClientConfig.Params[4]||GlobalCfglist.d_autoskill_3)||this.haswearGreenP()||this.haswearRedP()||1==g_ClientConfig.Params[4]};_prototype.hastriggerskill=function(b,a){var d=this.hasskill(a),e=ObjectManage.findobject(lockingID);return b&&d&&(e&&0==e.ddl_state||"\u6cbb\u6108\u672f"==d.Def.sMagicName||"\u7fa4\u4f53\u6cbb\u7597\u672f"==d.Def.sMagicName)&&GameUtil.JudgeMagicMp(d,b)?d:null};_prototype.petCount=function(){for(var b=ObjectManage.findobject(playerID).txt_name.text,a=0,d=0;d<ObjectManage.object_list.length;d++){var e=ObjectManage.object_list[d];e&&e.data&&e.data.record==playerID||!e.txt_name||-1==e.txt_name.text.indexOf(b)||-1==e.txt_name.text.indexOf("\u795e\u517d")&&-1==e.txt_name.text.indexOf("\u767d\u864e")&&-1==e.txt_name.text.indexOf("\u9ab7\u9ac5")||a++}return a};_prototype.hassubordinates=function(){ObjectManage.findobject(playerID);for(var b=0;b<ObjectManage.object_list.length;b++){var a=ObjectManage.object_list[b];if((!a||!a.data||a.data.record!=playerID)&&a.OwnerID&&a.OwnerID==playerID&&0==a.is_die)return!0}return!1};_prototype.hasskill=function(b){for(var a=0;a<g_UserMagicList.length;a++){var d=g_UserMagicList[a];if(d.Def.sMagicName==b)return d}return null};_prototype.randomPoint=function(b,a,d,e){this.randPos=null;for(var g=Mapmodule.width_,f=Mapmodule.height_,h=20;h--;){var l=Math.floor(Math.random()*(a-b+1)+b-1),m=Math.floor(Math.random()*(e-d+1)+d-1);if(0<l&&l<g&&0<m&&m<f&&AStart.cur_matx&&AStart.cur_matx[0]&&m<AStart.cur_matx.length&&l<AStart.cur_matx[0].length&&0==AStart.cur_matx[m][l]){this.randPos=[l,m];break}}};_prototype.getPos=function(){var b=Mapmodule.width_,a=Mapmodule.height_;if(72>b&&48>a&&(this.randomPoint(0,b,0,a),null!=this.randPos))return;var a=ObjectManage.findobject(playerID),b=a.grid.x-12,a=a.grid.y-8,d,e;if(0>this.goDir||7<this.goDir)this.goDir=Math.floor(8*Math.random());switch(this.goDir){case 0:d=b;e=b-24;goMaxY=a;goMinY=a-16;break;case 1:d=b+24;e=b;goMaxY=a;goMinY=a-16;break;case 2:d=b+48;e=b+24;goMaxY=a;goMinY=a-16;break;case 3:d=b+48;e=b+24;goMaxY=a+16;goMinY=a;break;case 4:d=b+48;e=b+24;goMaxY=a+32;goMinY=a+16;break;case 5:d=b+24;e=b;goMaxY=a+32;goMinY=a+16;break;case 6:d=b;e=b-24;goMaxY=a+32;goMinY=a+16;break;case 7:d=b,e=b-24,goMaxY=a+16,goMinY=a}this.randomPoint(e,d,goMinY,goMaxY);null==this.randPos&&(this.goDir=-1)};_prototype.autoflow=function(){if(Objectcontrol.self_obj&&autohookstate&&!rockerfirst&&4!=Objectcontrol.self_obj.cur_state)if(roledielock)autohookstate=!1,Laya.stage.event("guaji_pic");else if(!Actionlock&&!rockerlock&&!player_stalls){var b=Objectcontrol.self_obj;if(!this.getMapItem(999,!0))if(this.findMonster())this.autorule(),this.randPos=null;else if(null==this.randPos?this.getPos():(1==b.cur_state||6==b.cur_state)&&3<this.errCount++&&(this.errCount=0,this.goDir=-1,this.randPos=null),null!=this.randPos&&!moveing){var a=new Laya.Point(this.randPos[0],this.randPos[1]);Fightmodule.leavefight();Movemodule.startmove(b.grid,a)}}};_prototype.findMonster=function(){var b=Objectcontrol.self_obj;if(0!=lockingID)return this.randPos=null,!0;var a=ObjectManage.findlateobject(b.grid,12);if(a){var d=Movemodule.find4path(b.grid,a.grid),b=Math.floor(b.grid.distance(a.grid.x,a.grid.y));if(d||1>=b)return Fightmodule.leavefight(),GameUtil.addhalo(a),Movemodule.stopmove(),this.randPos=null,this.poison_num=0,!0}return!1};_prototype.maxBag=function(){for(var b=0;b<g_BagItemsList.length;b++)if(!g_BagItemsList[b])return!1;Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]);return!0};_prototype.canGet=function(b,a){for(var d=0;d<ObjectManage.object_list.length;d++){var e=ObjectManage.object_list[d];if(e&&!e.is_die&&e.grid.x==b&&e.grid.y==a)return!1}return!0};_prototype.getMapItem=function(b,a){var d=b,e=ObjectManage.findobject(playerID),g=ObjectManage.GetAttr(playerID),f;if(e&&g&&0==lockingID&&!this.maxBag()&&g.Weight<g.MaxWeight){for(g=0;g<Gameconfig.pickItemList.length;g++){var h=Gameconfig.pickItemList[g];if(!(h&&h.id&&g_cannotPick[h.id]||!(h&&h.x&&h.y&&AStart.cur_matx[0]&&h.x<AStart.cur_matx[0].length&&h.y<AStart.cur_matx.length&&0==AStart.cur_matx[h.y][h.x]&&this.canGet(h.x,h.y))||autohookstate&&!Gameconfig.itemCheck(h.Name,3)||autopickstate&&!Gameconfig.itemCheck(h.Name,1))){var l=parseInt(e.grid.distance(h.x,h.y));l<=d&&(d=l,this.itemPos.x=h.x,this.itemPos.y=h.y,this.itemId=h.id,f=h)}}if(d!=b){if((d=ObjectManage.findlateobject(e.grid,d))&&a&&(!GlobalCfglist.pickItemsFirst||this.checkItemsDyingOnPickFirst(f)))return Fightmodule.leavefight(),GameUtil.addhalo(d),Movemodule.stopmove(),!0;Fightmodule.leavefight();d=Laya.Browser.now();if((!g_cannotPick[this.itemId]||3E3<d-g_cannotPick[this.itemId])&&ItemMgr.getInstance().existThisItemInMap(f))return e.grid.x==this.itemPos.x&&e.grid.y==this.itemPos.y||Movemodule.start3move(e.grid,this.itemPos)?!0:!1}}return!1};_prototype.checkItemsDyingOnPickFirst=function(b){return GlobalCfglist.pickItemsFirst&&!ItemMgr.getInstance().existThisItemInMap(b)};return b}(),FightModule=function(){function b(){this.init()}_prototype=b.prototype;_prototype.init=function(){this.att_time=this.use_type=0;this.use_autoattack=!0;this.path_list=[];this.end_point=new Laya.Point;this.AttOff_list=[];this.path=[]};_prototype.leavefight=function(){chaseing=!1;this.path_list=[];attackerID=0;this.path=[]};_prototype.attactsound=function(b){b.data&&b.data.fea&&b.data.fea.buffer&&(b=THumFeature(b.data.fea.buffer),GameUtil.WeaponAttackSound(SM_HIT,b.wWeapon,b.nSex))};_prototype.canuseskill=function(b,a){for(var d=ObjectManage.findobject(playerID),e=0;e<g_UserMagicList.length;++e)if(g_UserMagicList[e]&&g_UserMagicList[e].Def.btEffect==b&&g_UserMagicList[e].Def.wMagicId==a&&d&&GameUtil.JudgeMagicMp(g_UserMagicList[e],d))return!0;return!1};_prototype.checkcd=function(b){var a=Laya.Browser.now(),d=!0;switch(b){case 24:d=a>Gameconfig.lastFireHitTime+Skillmodule.checklegal(24,26)+1E3;break;case 23:d=0==Objectcontrol.is_open_by;break;case 43:d=a>Gameconfig.lastKTZTime+Skillmodule.checklegal(43,95)+1E3;break;case 53:d=a>Gameconfig.lastZRTime+Skillmodule.checklegal(53,76)+1E3;break;case 38:d=a>Gameconfig.lastLYTime+Skillmodule.checklegal(38,43)+1E3}return d};_prototype.newAutohookstateFindPath=function(b,a){this.path=Movemodule.find4path(b.grid,a.grid);if(0<this.path.length){Objectcontrol.move_call_result=!0;var d=this.path[0];if(this.path[1]&&(this.path[1].x!=a.grid.x||this.path[1].y!=a.grid.y))var e=this.path[1];var g=GameUtil.getorientation(b.grid,d);if(e){var f=GameUtil.getorientation(d,e);if(g==f&&Objectcontrol.executemove(e,g,3)){this.AttOff_list=[];this.path.splice(0,2);return}}Objectcontrol.executemove(d,g,2)&&(this.path.shift(),this.AttOff_list=[])}else GameUtil.delhalo(lockingID),g_boMagicGood=!1};_prototype.startchaseing=function(b,a){if(0!=chaseing)if(autohookstate)if(0==this.path_list.length&&(this.path_list=Movemodule.find4path(b.grid,a.grid)),0<this.path_list.length){Objectcontrol.move_call_result=!0;var d=this.path_list[0];if(this.path_list[1]&&(this.path_list[1].x!=a.grid.x||this.path_list[1].y!=a.grid.y))var e=this.path_list[1];var g=GameUtil.getorientation(b.grid,d);if(e){var f=GameUtil.getorientation(d,e);if(g==f&&(this.move_index++,Objectcontrol.executemove(e,g,3))){this.path_list.splice(0,2);return}}Objectcontrol.executemove(d,g,2)&&this.path_list.shift()}else chaseing=!1,this.path_list=[],this.path=[],autohookstate&&0!=lockingID&&(-1==this.AttOff_list.indexOf(lockingID)&&this.AttOff_list.push(lockingID),GameUtil.delhalo(lockingID),lockingID=0),b&&1==b.cur_state&&(attackerID=0);else this.newAutohookstateFindPath(b,a)};_prototype.longrangeattack=function(b,a,d,e){GlobalCfglist.z_autoskill_2&&1>=e&&this.canuseskill(24,26)&&this.checkcd(24)?Objectcontrol.useskill(24):GlobalCfglist.zs_zrjf&&4>=e&&this.hasquadis(b.grid,a.grid)&&this.canuseskill(53,76)&&this.checkcd(53)?Objectcontrol.useskill(53):GlobalCfglist.z_autoskill_4&&4>=e&&this.hasquadis(b.grid,a.grid)&&this.canuseskill(43,95)&&this.checkcd(43)?Objectcontrol.useskill(43):GlobalCfglist.zs_lyjf&&4>=e&&this.hasquadis(b.grid,a.grid)&&this.canuseskill(38,43)&&this.checkcd(38)?Objectcontrol.useskill(38):GlobalCfglist.z_autoskill_3&&this.can_auto_by(b)&&1>=e&&this.canuseskill(23,25)&&!Objectcontrol.is_open_by?Objectcontrol.useskill(23):GlobalCfglist.z_autoskill_3&&!this.can_auto_by(b)&&1>=e&&this.canuseskill(23,25)&&Objectcontrol.is_open_by&&Objectcontrol.useskill(23)};_prototype.isexcavate=function(b){return b&&b.visible&&b.is_die&&(11==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&160==b.skin_feature.wAppr||11==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&161==b.skin_feature.wAppr||19==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&43==b.skin_feature.wAppr||19==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&70==b.skin_feature.wAppr||16==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&24==b.skin_feature.wAppr||52==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&39==b.skin_feature.wAppr||19==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&113==b.skin_feature.wAppr||52==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&93==b.skin_feature.wAppr)};_prototype.excavate=function(b,a){var d=GameUtil.getorientation(b,a);b.changestate(null,12,d,!1,"play_over_test");Sendmessage.sendButchAnimal(b.grid.x,b.grid.y,b.cur_dir,lockingID)};_prototype.hasquadis=function(b,a){var d=Math.abs(b.x-a.x),e=Math.abs(b.y-a.y);return 0==d||0==e||d==e};_prototype.can_auto_by=function(b){for(var a=b.cur_dir,d=0,e=0==a?GameUtil.getMovePoint(b.grid,7,1):GameUtil.getMovePoint(b.grid,(a-1)%7,1),g=GameUtil.getMovePoint(b.grid,a%7,1),f=GameUtil.getMovePoint(b.grid,(a+1)%7,1),a=GameUtil.getMovePoint(b.grid,(a+2)%7,1),h=0;h<ObjectManage.object_list.length;h++){var l=ObjectManage.object_list[h];l!=b&&!l.is_die&&(l.grid.x==e.x&&l.grid.y==e.y||l.grid.x==g.x&&l.grid.y==g.y||l.grid.x==f.x&&l.grid.y==f.y||l.grid.x==a.x&&l.grid.y==a.y)&&d++}return 1<d};_prototype.startattack=function(b){attackerID=lockingID;var a=ObjectManage.findobject(playerID),d=ObjectManage.findobject(attackerID);if(a&&d){a.grid.x=Math.floor(a.x/48);a.grid.y=Math.floor(a.y/32);var e=GameUtil.getorientation(a.grid,d.grid),g=Math.floor(a.grid.distance(d.grid.x,d.grid.y));this.isexcavate(d)?1>=g?(this.excavate(a,d),this.path_list=[],this.path=[]):(chaseing=!0,this.startchaseing(a,d)):(0<disAfterTargetMoved&&(g+=disAfterTargetMoved),this.longrangeattack(a,d,b,g),this.useattack(a,d,b,e,g)||(chaseing=!0,this.startchaseing(a,d)))}else a&&a.grid&&(d=2,g_serverconfig.nAtkRange&&(d=g_serverconfig.nAtkRange),(d=ObjectManage.findlateobject(a.grid,d))?(GameUtil.addhalo(d),this.startattack(b)):(chaseing=!1,this.path_list=[],this.path=[],Laya.stage.event("show_log",[{txt:"\u5f53\u524d\u6ca1\u6709\u53ef\u653b\u51fb\u76ee\u6807\uff01",color:"#ff0000"}]),this.attacking(0,0,a,a,a.cur_dir)))};_prototype.useattack=function(b,a,d,e,g){var f=0;if(1>=g&&24==d&&this.canuseskill(24,26)&&(f=26)||4>=g&&53==d&&this.hasquadis(b.grid,a.grid)&&this.canuseskill(53,76)&&(f=76)||4>=g&&43==d&&this.hasquadis(b.grid,a.grid)&&this.canuseskill(43,95)&&(f=95)||4>=g&&38==d&&this.hasquadis(b.grid,a.grid)&&this.canuseskill(38,43)&&(f=43)||1>=g&&5==d&&this.hasquadis(b.grid,a.grid)&&this.canuseskill(5,7)&&(f=7)||1>=g&&Objectcontrol.is_open_by&&this.canuseskill(23,25)&&0==d&&(d=23)&&(f=25)||(GlobalCfglist.zs_gwcs&&2==g||GlobalCfglist.z_autoskill_1&&1>=g)&&Objectcontrol.is_open_cs&&this.hasquadis(b.grid,a.grid)&&this.canuseskill(13,12)&&(0==d||5==d)&&(d=13)&&(f=12)||1>=g&&0==d){if(2<=g&&5==d&&!GlobalCfglist.zs_gwcs)return!1;this.attacking(d,f,b,a,e);return!0}return 1>=g?(this.attacking(0,f,b,a,e),!0):!1};_prototype.attacking=function(b,a,d,e,g){if(!(0<disAfterTargetMoved)){if(attack_lock_state&&-1!=rocker_move_dir){g=rocker_move_dir;var f=ObjectManage.hasobstacleID(d.grid,g);f&&(e=f,GameUtil.addhalo(f))}this.attactsound(d);Skillmodule.openMsg(b,d.grid,g);g=0==e.target_pos.x?e.grid:e.target_pos;f=this.getSkillLevel(b,a);Skillmodule.playself(b,a,d,g,e.data.record,f);attack_call_time=Laya.Browser.now();Movemodule.stopmove();Objectcontrol.atttype=0}};_prototype.getSkillLevel=function(b,a){for(var d=0;d<g_UserMagicList.length;d++){var e=g_UserMagicList[d];if(e.Def.btEffect==b&&e.Def.wMagicId==a)return e.Level}};return b}(),GameConfig=function(){function b(){this.init()}_prototype=b.prototype;_prototype.init=function(){this.changePoison=!0;this.drugType=this.cure_time=this.lastLYTime=this.lastZRTime=this.lastKTZTime=this.lastFireHitTime=-1;this.exerciseTime=this.transfer_time1=this.transfer_time=this.autoItem_time=this.hp_mp_time=this.mp_time=this.hp_time=0;this.pickItemList=[];this.sszjs_time=this.yld_time=this.transfer_timeH=this.hp_mp_timeH=this.mp_timeH=this.hp_timeH=0;Laya.stage.on("update_pick_item",this,this.addPickItem);Laya.stage.on("del_pick_item",this,this.delPickItem);this.itemlist=[];this.monsterlist=[]};_prototype.timerManager=function(){Laya.timer.clear(this,this.gameconfigupdate);Laya.timer.loop(500,this,this.gameconfigupdate);Laya.timer.clear(this,this.autoSkill);Laya.timer.loop(1E3,this,this.autoSkill)};_prototype.setItemlist=function(){for(var b=0;b<AllItemList.length;b++){var a=AllItemList[b];this.itemlist[a.itemname]=[a.isshow,a.ispickup,a.special,a.prompt]}};_prototype.setMonsterList=function(){for(var b=0;b<AllMonsterList.length;b++){var a=AllMonsterList[b];this.monsterlist[a.monsterName]=[a.isExclude]}};_prototype.monsterCheck=function(b){if(this.monsterlist[b])return this.monsterlist[b][0]};_prototype.itemCheck=function(b,a){if(this.itemlist[b]){var d=this.itemlist[b];switch(a){case 0:return d[0];case 1:return d[1];case 2:return d[2];case 3:return d[3]}}};_prototype.gameconfigupdate=function(){var b=Laya.Browser.now(),a=ObjectManage.findobject(playerID);if(a&&a.m_Abil&&!a.is_die){if(a.m_Abil)var d=a.m_Abil.HP,e=a.m_Abil.MaxHP,g=a.m_Abil.MP,f=a.m_Abil.MaxMP,h=1E3*GlobalCfglist.hptimetext,l=1E3*GlobalCfglist.mptimetext,m=1E3*GlobalCfglist.hptimetext1;GlobalCfglist.autohp_mp&&b-this.hp_mp_time>m&&d<e*GlobalCfglist.hppercentagetext1/100&&(m=GlobalCfglist.hpS_img?GlobalCfglist.hpS_img.s.Name:"\u9ed8\u8ba4")&&this.useBagItem(m,0)&&(this.hp_mp_time=b);GlobalCfglist.autohp_mp2&&b-this.hp_mp_time>l&&g<f*GlobalCfglist.hppercentagetext2/100&&(m=GlobalCfglist.mpS_img?GlobalCfglist.mpS_img.s.Name:"\u9ed8\u8ba4")&&this.useBagItem(m,1)&&(this.hp_mp_time=b);GlobalCfglist.autohp&&b-this.hp_time>h&&d<e*GlobalCfglist.hppercentagetext/100?(d=GlobalCfglist.hpN_img?GlobalCfglist.hpN_img.s.Name:"\u9ed8\u8ba4")&&this.useBagItem(d,0)&&(this.hp_time=b):GlobalCfglist.automp&&b-this.mp_time>l&&g<f*GlobalCfglist.mppercentagetext/100&&(m=GlobalCfglist.mpN_img?GlobalCfglist.mpN_img.s.Name:"\u9ed8\u8ba4")&&this.useBagItem(m,1)&&(this.mp_time=b)}g_myHero&&g_myHero.m_Abil&&0<g_myHero.m_Abil.HP&&(d=g_myHero.m_Abil.HP,e=g_myHero.m_Abil.MaxHP,g=g_myHero.m_Abil.MP,f=g_myHero.m_Abil.MaxMP,h=1E3*GlobalCfglist.hptimetextH,l=1E3*GlobalCfglist.mptimetextH,m=1E3*GlobalCfglist.hptimetext1H,GlobalCfglist.autohp_mpH&&b-this.hp_mp_timeH>m&&d<e*GlobalCfglist.hppercentagetext1H/100?((d=GlobalCfglist.hpS_imgH?GlobalCfglist.hpS_imgH.s.Name:"\u9ed8\u8ba4")&&this.useHeroItem(d,0),this.hp_mp_timeH=b):GlobalCfglist.autohp_mp2H&&b-this.hp_mp_timeH>l&&g<f*GlobalCfglist.hppercentagetext2H/100?((d=GlobalCfglist.mpS_imgH?GlobalCfglist.mpS_imgH.s.Name:"\u9ed8\u8ba4")&&this.useHeroItem(d,1),this.hp_mp_timeH=b):GlobalCfglist.autohpH&&b-this.hp_timeH>h&&d<e*GlobalCfglist.hppercentagetextH/100?((d=GlobalCfglist.hpN_imgH?GlobalCfglist.hpN_imgH.s.Name:"\u9ed8\u8ba4")&&this.useHeroItem(d,0),this.hp_timeH=b):GlobalCfglist.autompH&&b-this.mp_timeH>l&&g<f*GlobalCfglist.mppercentagetextH/100&&((d=GlobalCfglist.mpN_imgH?GlobalCfglist.mpN_imgH.s.Name:"\u9ed8\u8ba4")&&this.useHeroItem(d,1),this.mp_timeH=b));a&&g_UserItemList&&(Laya.stage.event("showDuraHead"),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("showDuraHum"))};_prototype.transfer=function(b,a){var d=Laya.Browser.now();b<=a*GlobalCfglist.tppercentagetext/100&&d-this.transfer_time>=1E3*GlobalCfglist.tptimetext&&GlobalCfglist.tp_img&&this.useBagItem(GlobalCfglist.tp_img.s.Name)&&(this.transfer_time=d)};_prototype.transfer1=function(b,a){var d=Laya.Browser.now();b<=a*GlobalCfglist.tppercentagetext1/100&&d-this.transfer_time1>=1E3*GlobalCfglist.tptimetext1&&GlobalCfglist.tp1_img&&this.useBagItem(GlobalCfglist.tp1_img.s.Name)&&(this.transfer_time1=d)};_prototype.heroCllback=function(b,a){var d=Laya.Browser.now();b<=a*GlobalCfglist.tppercentagetextH/100&&d-this.transfer_timeH>=1E3*GlobalCfglist.tptimetextH&&(g_myHero&&g_myHero.m_Abil&&(Sendmessage.sendConfig(!0),Sendmessage.SendHeroCall()),this.transfer_timeH=d)};_prototype.useBagItem=function(b,a){if(!CanUserItem)return!1;for(var d=0;d<g_BagItemsList.length;d++){var e=g_BagItemsList[d];if(e&&(!(0==e.s.StdMode&&0<e.s.AC&&0<e.s.MAC)||GlobalCfglist.autohp_mp||GlobalCfglist.autohp_mp2)&&("\u9ed8\u8ba4"==b&&0==e.s.StdMode&&(0==a&&0<e.s.AC||1==a&&0<e.s.MAC)||e.s.Name==b))return this.eat(e),CanUserItem=!1,!0}GameApi.autounpack(2,b);return!1};_prototype.useHeroItem=function(b,a){for(var d=0;d<g_HeroBagItemsList.length;d++){var e=g_HeroBagItemsList[d];if(e&&(!(0==e.s.StdMode&&0<e.s.AC&&0<e.s.MAC)||GlobalCfglist.autohp_mp||GlobalCfglist.autohp_mp2)&&("\u9ed8\u8ba4"==b&&0==e.s.StdMode&&(0==a&&0<e.s.AC||1==a&&0<e.s.MAC)||e.s.Name==b)){e&&(g_AutoItems.Items=e,211!=g_AutoItems.Items.s.StdMode&&GameUtil.DelHeroBagItems(g_AutoItems.Items.MakeIndex),Sendmessage.heroEat(g_AutoItems.Items.MakeIndex,g_AutoItems.Items.s.Name),this.checkDrugIdx(g_AutoItems.Items.s.Name));return}}GameApi.heroAutounpack(2,b)};_prototype.eat=function(b){b&&(g_AutoItems.Items=b,211!=g_AutoItems.Items.s.StdMode&&GameUtil.DelBagItems(g_AutoItems.Items.MakeIndex),Sendmessage.sendEat(0,g_AutoItems.Items.MakeIndex,g_AutoItems.Items.s.Name),this.checkDrugIdx(g_AutoItems.Items.s.Name))};_prototype.checkDrugIdx=function(b){for(;0<g_DrugItemsList.length;){var a=g_DrugItemsList[0];null!=a&&a.s.Name==b&&(g_autoDrugButNumber=0);break}};_prototype.autoChangePoison=function(){GlobalCfglist.d_autoskill_3&&("\u4e92\u6362"==GlobalCfglist.d_autoskill_1?(this.changePoison?this.check_userItme(2)||this.changeLD():this.check_userItme(3)||this.changeHD(),this.changePoison=!this.changePoison):"\u7ea2\u6bd2"==GlobalCfglist.d_autoskill_1?(this.check_userItme(3)||this.changeHD(),this.changePoison=!1):"\u7eff\u6bd2"==GlobalCfglist.d_autoskill_1&&(this.check_userItme(2)||this.changeLD(),this.changePoison=!0))};_prototype.autoChangeFu=function(){GlobalCfglist.d_autoskill_3&&!this.check_userItme(1)&&this.changeF()};_prototype.changeLD=function(){for(var b=0;b<g_BagItemsList.length;b++)if(null!=g_BagItemsList[b]&&-1!=g_BagItemsList[b].s.Name.indexOf("\u7070\u8272\u836f\u7c89")){g_WaitItems.Items=g_BagItemsList[b];g_WaitItems.Index=9;Sendmessage.TakeOnItem2(g_BagItemsList[b],9);GameUtil.DelBagItems(g_BagItemsList[b].MakeIndex);break}};_prototype.changeHD=function(){for(var b=0;b<g_BagItemsList.length;b++)if(null!=g_BagItemsList[b]&&-1!=g_BagItemsList[b].s.Name.indexOf("\u9ec4\u8272\u836f\u7c89")){g_WaitItems.Items=g_BagItemsList[b];g_WaitItems.Index=9;Sendmessage.TakeOnItem2(g_BagItemsList[b],9);GameUtil.DelBagItems(g_BagItemsList[b].MakeIndex);break}};_prototype.changeF=function(){for(var b=0;b<g_BagItemsList.length;b++)if(null!=g_BagItemsList[b]&&(-1!=g_BagItemsList[b].s.Name.indexOf("\u62a4\u8eab\u7b26")||"\u5929\u5c0a\u9053\u7b26"==g_BagItemsList[b].s.Name)){g_WaitItems.Items=g_BagItemsList[b];g_WaitItems.Index=9;Sendmessage.TakeOnItem2(g_BagItemsList[b],9);GameUtil.DelBagItems(g_BagItemsList[b].MakeIndex);break}};_prototype.autoSkill=function(){var b=ObjectManage.findobject(playerID);if(b&&!b.is_die&&b.m_Abil){var a=b.getChildByName("eqsecure"+playerID);if(GlobalCfglist.f_autoskill_1&&!a)for(var d=0;d<g_UserMagicList.length;d++)if(g_UserMagicList[d]&&"\u9b54\u6cd5\u76fe"==g_UserMagicList[d].Def.sMagicName&&GameUtil.JudgeMagicMp(g_UserMagicList[d],b)){activate_skilluse=29;activate_skilltype=31;Objectcontrol.useskill(29,31);break}GlobalCfglist.f_keepskill_1&&(a=ObjectManage.findobject(lockingID))&&!a.is_die&&g_boMagicGood&&1==b.cur_state&&0<g_magicId&&Objectcontrol.useskill(g_magicId,g_magicType);if(GlobalCfglist.d_autoskill_2&&.7!=b.alpha)for(d=0;d<g_UserMagicList.length;d++)g_UserMagicList[d]&&"\u9690\u8eab\u672f"==g_UserMagicList[d].Def.sMagicName&&GameUtil.JudgeMagicMp(g_UserMagicList[d],b)&&(this.check_userItme(1)||GlobalCfglist.d_autoskill_3&&this.autoChangeFu(),activate_skilluse=g_UserMagicList[d].Def.btEffect,Objectcontrol.useskill(16,18));if(GlobalCfglist.clear)for(a=0;a<ObjectManage.object_list.length;a++)if((d=ObjectManage.object_list[a])&&d.is_die){if(1==d.type){var e=TMonFeature(d.data.fea.buffer);if(e&&(901==e.wAppr||902==e.wAppr||903==e.wAppr)&&98==e.wRaceImg)continue}d.obj_frames[d.obj_frames.length-1]&&(d.visible=!1)}a=Laya.Browser.now();if(autohookstate&&GlobalCfglist.ds_cure&&a-this.cure_time>1E3*GlobalCfglist.ds_time_slider&&(d=AutoHookmodule.hastriggerskill(b,GlobalCfglist.ds_cure_list))&&b&&b.m_Abil&&!b.is_die&&a-this.cure_time>1E3*d.Def.w02&&b.m_Abil.HP<=b.m_Abil.MaxHP*GlobalCfglist.ds_limit_slider/100){AutoHookmodule.setSkill(d,b.grid);this.cure_time=a;return}GlobalCfglist.exercise&&(d=AutoHookmodule.hasskill(GlobalCfglist.exercise_list))&&a-this.exerciseTime>1E3*GlobalCfglist.exercise_slider&&GameUtil.JudgeMagicMp(d,b)&&(AutoHookmodule.setSkill(d),this.exerciseTime=a);a=Laya.Browser.now();if(GlobalCfglist.d_autoskill_5&&a-this.yld_time>1E3*GlobalCfglist.d_autoskill_7)for(d=0;d<g_UserMagicList.length;d++)if(g_UserMagicList[d]&&"\u5e7d\u7075\u76fe"==g_UserMagicList[d].Def.sMagicName&&GameUtil.JudgeMagicMp(g_UserMagicList[d],b)&&AutoHookmodule.canuseAmulet()&&b&&b.m_Abil&&!b.is_die){AutoHookmodule.setSkill(g_UserMagicList[d],b.grid);this.yld_time=a;break}a=Laya.Browser.now();if(GlobalCfglist.d_autoskill_6&&a-this.sszjs_time>1E3*GlobalCfglist.d_autoskill_8)for(d=0;d<g_UserMagicList.length;d++)if(g_UserMagicList[d]&&"\u795e\u5723\u6218\u7532\u672f"==g_UserMagicList[d].Def.sMagicName&&GameUtil.JudgeMagicMp(g_UserMagicList[d],b)&&AutoHookmodule.canuseAmulet()&&b&&b.m_Abil&&!b.is_die){AutoHookmodule.setSkill(g_UserMagicList[d],b.grid);this.sszjs_time=a;break}}};_prototype.add_Use_Up=function(b){-1!=b.s.Name.indexOf("\u62a4\u8eab\u7b26")||"\u5929\u5c0a\u9053\u7b26"==b.s.Name?this.changeF():-1!=b.s.Name.indexOf("\u7070\u8272\u836f\u7c89")?this.changeLD():-1!=b.s.Name.indexOf("\u9ec4\u8272\u836f\u7c89")&&this.changeHD()};_prototype.check_userItme=function(b){for(var a=0;a<g_UserItemList.length;a++)switch(b){case 1:if(null!=g_UserItemList[a]&&(-1!=g_UserItemList[a].s.Name.indexOf("\u62a4\u8eab\u7b26")||"\u5929\u5c0a\u9053\u7b26"==g_UserItemList[a].s.Name))return!0;break;case 2:if(null!=g_UserItemList[a]&&-1!=g_UserItemList[a].s.Name.indexOf("\u7070\u8272\u836f\u7c89"))return!0;break;case 3:if(null!=g_UserItemList[a]&&-1!=g_UserItemList[a].s.Name.indexOf("\u9ec4\u8272\u836f\u7c89"))return!0}return!1};_prototype.addPickItem=function(b){b&&this.pickItemList.push(b)};_prototype.delPickItem=function(b){for(var a=0;a<this.pickItemList.length;a++){var d=this.pickItemList[a];if(b&&d&&d.id==b){this.pickItemList.splice(a,1);break}}};return b}(),GUIModule=function(){function b(){this.init()}_proto=b.prototype;_proto.init=function(){this.zorder=1};_proto.initView=function(b){for(var a=0;a<b._childs.length;a++){var d=b._childs[a];if(d.name&&-1!=d.name.indexOf("on")){var e=d.name.split("_");d.extend_event=e[0];d.extend_data=e[1];this.bangdingEvent(d)}if(0<d._childs.length)return this.initView(d)}return!0};_proto.bangdingEvent=function(b){switch(b.extend_event){case "onmove":this.moveUI(b);break;case "onclose":this.closeUI(b);break;case "onhide":this.hideUI(b);break;case "onlistdata":this.listdataUI(b);break;case "onclick":this.clickUI(b)}};_proto.openUI=function(b,a){var d=Laya.stage.getChildByName(b);if(a||null==d)d=new Laya.__classmap[b],Laya.stage.addChild(d);d&&(d.visible=!0,d.zOrder=this.zorder++);return d};_proto.closeUI=function(b){b.on(Laya.Event.CLICK,this,function(a){for(;b._parent;){if(b._parent==Laya.stage){b.removeSelf();break}b=b._parent}})};_proto.hideUI=function(b){b.on(Laya.Event.CLICK,this,function(a){for(;b._parent;){if(b._parent==Laya.stage){b.visible=!1;break}b=b._parent}})};_proto.moveUI=function(b){function a(e){b.off(Laya.Event.MOUSE_MOVE,this,d);b.off(Laya.Event.MOUSE_OUT,this,a);b.off(Laya.Event.MOUSE_UP,this,a)}function d(a){for(var d=b;d._parent&&d._parent!=Laya.stage;)d=d._parent;d.x+=a.stageX-b.startpos.x;d.y+=a.stageY-b.startpos.y;b.startpos.x=a.stageX;b.startpos.y=a.stageY}b.startpos=new Laya.Point;b.on(Laya.Event.MOUSE_DOWN,this,function(e){b.startpos.x=e.stageX;b.startpos.y=e.stageY;b.on(Laya.Event.MOUSE_UP,this,a);b.on(Laya.Event.MOUSE_OUT,this,a);b.on(Laya.Event.MOUSE_MOVE,this,d)})};_proto.listdataUI=function(b){Laya.stage.on(b.extend_data+"",this,function(a){b.array=a});b.renderHandler=new Laya.Handler(this,function(a,b){console.log("----updateItem--\x3e",b);for(var e=0;e<a._childs.length;e++){var c=a._childs[e];if(c.name&&-1!=c.name.indexOf("on")){var f=c.name.split("_");c.extend_event=f[0];c.extend_data=f[1];this.bangdingEvent(c)}}})};_proto.clickUI=function(b){b.on(Laya.Event.CLICK,this,function(){Eventmodule.onHandleMsgtoUI(b.extend_data,b)})};return b}(),PUBLIC_CLIENT_VERSION_NUMBER=202203221728,MagicMgr=function(){function b(){this.OnRoleList=[];this.OnRoleMap={};this.UseList=[];this.UseMap=[];this.LastDragMagicNode=null;this.CurSelectIdx=-1;this.StaticMagicList=[]}var c=null,a=b.prototype;a.AddMagicToRole=function(a){void 0==this.OnRoleMap[a.Def.wMagicId]&&(this.OnRoleList.push(a),this.OnRoleMap[a.Def.wMagicId]=a,13==a.Key&&Laya.stage.event("add_magic_attack",[a]))};a.FindMagicFromStatic=function(a){for(var b=0;b<g_UserMagicList.length;b++)if(g_UserMagicList[b].Def.wMagicId==a)return g_UserMagicList[b];return null};a.GetOnRoleMagicList=function(){return this.OnRoleList};a.DeleteFromOnRole=function(a){if(this.OnRoleMap[a]){for(var b=0;b<this.OnRoleList.length;b++)this.OnRoleList[b].Def.wMagicId==a&&(Laya.stage.event("show_log",[{txt:this.OnRoleList[b].Def.sMagicName+" \u5df2\u4ece\u6280\u80fd\u5217\u8868\u5220\u9664",color:"#ff0000"}]),this.OnRoleList.splice(b,1));delete this.OnRoleMap[a]}};a.IsUsedNpos=function(a){for(var b=0;b<this.UseList.length;b++)if(this.UseList[b].Key==a)return!0;return!1};a.AddMagicToUseList=function(a){if(void 0==this.UseMap[a.Def.wMagicId]){for(var b=0;b<this.UseList.length;b++)if(this.UseList[b].Key==a.Key)return!1;this.UseList.push(a);this.UseMap[a.Def.wMagicId]=a;Laya.stage.event("show_log",[{txt:a.Def.sMagicName+" \u5df2\u6dfb\u52a0\u5230\u5feb\u6377\u680f\u4e2d",color:"#00ff00"}]);return!0}return!1};a.DeleteFromUseList=function(a){if(this.UseMap[a]){for(var b=0;b<this.UseList.length;b++)this.UseList[b].Def.wMagicId==a&&(Laya.stage.event("show_log",[{txt:this.UseList[b].Def.sMagicName+" \u5df2\u4ece\u5feb\u6377\u680f\u5220\u9664",color:"#00ff00"}]),this.UseList.splice(b,1));delete this.UseList[a]}};a.DeleteFromUseNpos=function(a){for(var b=0,c=0;c<this.UseList.length;c++)this.UseList[c].Key==a&&(b=this.UseList[c].Def.wMagicId,this.OnRoleMap[b].Key=0,Sendmessage.SendMagicKey(this.UseList[c]),Laya.stage.event("show_log",[{txt:this.UseList[c].Def.sMagicName+" \u5df2\u4ece\u5feb\u6377\u680f\u5220\u9664",color:"#00ff00"}]),this.UseList.splice(c,1));0!=b&&delete this.UseMap[b]};a.GetUseListIndexFromNpos=function(a){for(var b=0;b<this.UseList.length;b++)if(this.UseList[b].Key==a)return b;return-1};a.FindMagicFromUseList=function(a){return this.UseMap[a]};a.FindMagicFromOnRoleList=function(a){return this.OnRoleList[a]};a.DestoryMagic=function(a){var b=this.FindMagicFromUseList(a);b&&(12>=b.Key?Laya.stage.event("remove_magic",[b.Key-1]):13==b.Key&&Laya.stage.event("add_magic_attack"));this.DeleteFromOnRole(a);this.DeleteFromUseList(a);Laya.stage.event("update_magic_list")};a.GetMagicByKey=function(a){for(var b=0;b<this.UseList.length;b++)if(this.UseList[b].Key==a)return this.UseList[b];return null};a.ClearMagic=function(){this.OnRoleList=[];this.OnRoleMap={};this.UseList=[];this.UseMap=[];this.LastDragMagicNode=null;this.CurSelectIdx=-1};return{getInstance:function(){null==c&&(c=new b);return c}}}(),MapData=function(){function b(){this.init()}_prototype=b.prototype;_prototype.init=function(){this.map_npc_data=[];this.npc_type=[];this.cur_music=this.cur_type=this.cur_id=this.cur_name="";this.safeZone=[];this.root=this.cover_sp=this.root_img=null;this.img_list=[];for(var b=0;100>b;b++){var a=new Laya.Image;this.img_list.push(a)}};_prototype.setdata=function(b,a){this.map_npc_data=b;this.npc_type=a};_prototype.getNPClist=function(){for(var b=[],a=0;a<this.map_npc_data.length;++a){var d=this.map_npc_data[a];d.mapid==this.cur_id&&b.push(d)}return b};_prototype.setParent=function(b){this.root=b;this.root_img=new Laya.Image;this.root_img.on(Laya.Event.CLICK,this,function(){isOpen&&(open_minimap=!0);Sendmessage.sendOpenMinimap()});b.addChild(this.root_img);this.cover_sp=new Laya.Sprite;this.cover_sp.pos(0,0);this.cover_sp.name="coversp";this.root_img.addChild(this.cover_sp);this.cover_sp.zOrder=2};_prototype.drawminimap=function(b){this.root_img.graphics.clear();this.cover_sp.graphics.clear();for(this.cover_sp.removeChildren();this.root_img.getChildByName("descName");)this.root_img.removeChildByName("descName");this.minipoint_visible=!1;if(0<=b&&65535>=b){var a="",d=0;1E4<=b?(a="mmap10",d=b-1E4):999<=b?(a="mmap",d=b-999):800<=b?(a="mmap1",d=b-800):(a="mmap",d=b);GameUtil.loadImg(d,a,function(a){Laya.loader.getRes(a)&&(e.root_img.loadImage(a),e.root_img.loadImage(a),e.drawDesc(),e.minipoint_visible=!0)});var e=this}};_prototype.drawDesc=function(){for(var b=this.root_img.width/Mapmodule.mapMaxX,a=this.root_img.height/Mapmodule.mapMaxY,d=0;d<g_mapdesc.length;d++){var e=g_mapdesc[d];if(e&&5<e.length&&e[0]==Mapdata.cur_name&&"1"==e[5]){var g=new Laya.Text;g.text=e[3];g.color="#"+Get3RGB(e[4].substr(1));g.stroke=1;g.strokeColor="#000000";g.name="descName";var f=parseInt(e[1])*b,e=parseInt(e[2])*a;g.pos(f-g.width/2,e-g.height/2);this.root_img.addChild(g);g.zOrder=1}}};_prototype.updateminimap=function(b,a,d){this.minipoint_visible&&this.root_img&&this.root_img.width&&this.root_img.height&&Mapmodule.mapMaxX&&(d*=this.root_img.height/Mapmodule.mapMaxY,a=Math.floor(-(this.root_img.width/Mapmodule.mapMaxX*a-b.pl_mini.width/2)),d=Math.floor(-(d-b.pl_mini.height/2)),a>this.root_img.width&&(a=0),0<d&&(d=0),this.root_img.pos(a,d),this.root_img.x<=-this.root_img.width+b.pl_mini.width&&(this.root_img.x=-this.root_img.width+b.pl_mini.width),0<=this.root_img.x&&(this.root_img.x=0),this.root_img.y<=-this.root_img.height+b.pl_mini.height&&(this.root_img.y=-this.root_img.height+b.pl_mini.height),0<=this.root_img.y&&(this.root_img.y=0),this.updatelistpos())};_prototype.updatelistpos=function(){if(null!=this.cover_sp||null!=this.root_img){this.cover_sp.removeChildren();for(var b=this.root_img.width/Mapmodule.mapMaxX,a=this.root_img.height/Mapmodule.mapMaxY,d=0;d<ObjectManage.object_list.length;++d){var e=ObjectManage.object_list[d];if(!e.is_die&&this.img_list[d]){var g=a*(e.grid.y-1)-1.5;this.img_list[d].x=b*(e.grid.x-1)-1.5;this.img_list[d].y=g;1==e.type?(this.img_list[d].skin="gameres/ui/minimap_red.png",this.img_list[d].zOrder=7,this.cover_sp.addChild(this.img_list[d])):2==e.type?(this.img_list[d].skin="gameres/ui/minimap_green.png",this.img_list[d].zOrder=8,this.cover_sp.addChild(this.img_list[d])):3==e.type&&(e.data.record==playerID?(this.img_list[d].skin="gameres/ui/dir_"+e.cur_dir+".png",this.img_list[d].zOrder=10,this.img_list[d].y-=9,this.img_list[d].x-=5):(this.img_list[d].skin="gameres/ui/minimap_yellow.png",this.img_list[d].zOrder=9),this.cover_sp.addChild(this.img_list[d]))}}}};return b}(),MoveModule=function(){function b(){this.init()}_prototype=b.prototype;_prototype.init=function(){this.move_list=[];this.springbacktimes=this.refindpathtimes=this.move_index=0;this.end_point=null;Laya.stage.on("movespringback",this,function(){moveing&&(this.springbacktimes+=1)})};_prototype.startmove=function(b,a){if(b.x!=a.x||b.y!=a.y)this.move_list=this.find4path(b,a),0<this.move_list.length?(moveing=!0,this.move_index=0):(autohookstate&&0!=lockingID&&(-1==Fightmodule.AttOff_list.indexOf(lockingID)&&Fightmodule.AttOff_list.push(lockingID),GameUtil.delhalo(lockingID),lockingID=0),attackerID=0)};_prototype.start3move=function(b,a){this.move_list=this.find4path(b,a);return 0<this.move_list.length?(moveing=!0,this.move_index=0,!0):!1};_prototype.start2move=function(b,a,d){d||(this.refindpathtimes=0);this.springbacktimes=0;a=this.haveObj(a);this.move_list=this.find2path(b,a);if(0<this.move_list.length)for(moveing=!0,this.move_index=0,b=this.move_list.length-this.move_index,50<this.move_list.length-this.move_index&&(b=50),a=this.move_index+1;a<b;++a)this.drawXunluPoint(this.move_list[a].x,this.move_list[a].y)};_prototype.drawXunluPoint=function(b,a){var d=Laya.Pool.getItemByClass("xunlu_point",Laya.Image);d.skin="gameres/ui/xunlu_point.png";d.name="xunlu";d.pos(48*b+15,32*a+5);Mapmodule.root.addChild(d)};_prototype.moveing=function(b){if(moveing&&Objectcontrol.self_obj&&null!=Objectcontrol.self_obj.lastMoveTarget)this.move_list=[],Objectcontrol.objectmove(null,Objectcontrol.self_obj.lastMoveTarget),Objectcontrol.self_obj.lastMoveTarget=null;else{if(this.end_point&&b.x==this.end_point.x&&b.y==this.end_point.y){if(g_mapnpc&&void 0!=g_mapnpc.x&&void 0!=g_mapnpc.y)for(var a=0;a<ObjectManage.object_list.length;++a){var d=ObjectManage.object_list[a];if(d&&2==d.type&&d.grid.x==g_mapnpc.x&&d.grid.y==g_mapnpc.y){GameApi.ShowNewNpcDlg(!1);Sendmessage.sendNPCClick(d.data.record);g_mapnpc=null;break}}this.end_point=null}if(!autohookstate&&2<this.springbacktimes&&0<this.move_list.length&&5>=this.refindpathtimes)this.retrymove(b);else if(moveing||0!=this.move_list.length||null==this.end_point)if(!moveing||this.move_index>=this.move_list.length||5<this.refindpathtimes)this.refindpathtimes=0,this.stopmove();else if(Objectcontrol.self_obj&&Objectcontrol.self_obj.obj_hores){if(a=this.move_list[this.move_index],d=GameUtil.getorientation(b,a),a){var e=this.move_list[this.move_index+1],g=this.move_list[this.move_index+2];if(e&&g){var f=GameUtil.getorientation(a,e),e=GameUtil.getorientation(e,g);if(d==f&&f==e){Objectcontrol.executemove(g,d,4)?this.move_index+=3:this.retrymove(b);return}}Objectcontrol.executemove(a,d,2)?this.move_index++:this.retrymove(b)}}else{a=this.move_list[this.move_index];e=this.move_list[this.move_index+1];d=GameUtil.getorientation(b,a);if(e&&(f=GameUtil.getorientation(a,e),d==f)){Objectcontrol.executemove(e,d,3)?this.move_index+=2:this.retrymove(b);return}Objectcontrol.executemove(a,d,2)?this.move_index++:this.retrymove(b)}else this.retrymove(b)}};_prototype.retrymove=function(b){var a=this.end_point;this.stopmove();a&&this.start2move(b,a);this.springbacktimes=0;this.refindpathtimes+=1};_prototype.stopmove=function(){if(!(0<disAfterTargetMoved)){AutoHookmodule.randPos=null;moveing=!1;this.move_index=0;this.move_list=[];Fightmodule.path_list=[];Laya.stage.getChildByName("moveing")&&Animationmodule.removeAniname("moveing");for(var b=Mapmodule.root._childs.length-1;0<=b;b--){var a=Mapmodule.root._childs[b];a&&"xunlu"==a.name&&(Laya.Pool.recover("minimap_point",a),a.removeSelf())}}};_prototype.findpath=function(b,a){var d=AStart.findpath(b,a);d.splice(0,1);d.splice(d.length-1,1);return d};_prototype.find2path=function(b,a){var d=[],e=AStart.findpath(b,a);if(e){e.splice(0,1);for(var g=0;g<e.length;g++)d.push(new Laya.Point(e[g][0],e[g][1]))}return d};_prototype.find4path=function(b,a){var d=AStart.find2path(b,a),e=[];if(d){for(;d.x;)e.unshift(new Laya.Point(d.x,d.y)),d=d.father;e.splice(0,1);e.push(new Laya.Point(a.x,a.y))}return e};_prototype.find3path=function(b,a){var d=AStart.find2path(b,a),e=[];if(d){for(;d.x;)e.unshift(new Laya.Point(d.x,d.y)),d=d.father;e.splice(0,1)}return e};_prototype.find5path=function(b,a){var d=GameUtil.getorientation(b,a),e=ObjectManage.hasobstacle(b,d,2),g=Mapmodule.CanMove(b,d,2),f=Math.floor(b.distance(a.x,a.y))-1,f=!(Objectcontrol.is_open_cs&&2>f);if(e&&g&&f)return e=GameUtil.getMovePoint(b,d,2),{pos:e,dir:d,state:2};e=ObjectManage.hasobstacle(b,d,1);g=Mapmodule.CanMove(b,d,1);return e&&g?(e=GameUtil.getMovePoint(b,d,1),{pos:e,dir:d,state:1}):null};_prototype.haveObj=function(b){for(var a=0;a<ObjectManage.object_list.length;++a){var d=ObjectManage.object_list[a];if(!d.is_die&&d.grid.x==b.x&&d.grid.y==b.y)for(d=0;8>d;d++){var e=GameUtil.GetNextPoint(b.x,b.y,d);if(AStart.cur_matx&&AStart.cur_matx[0]&&e.y<AStart.cur_matx.length&&e.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[e.y][e.x]){this.end_point=b=e;break}}}return b};_prototype.autoMove=function(b){if(AStart.cur_matx&&b.x<AStart.cur_matx[0].length&&b.y<AStart.cur_matx.length&&0==AStart.cur_matx[b.y][b.x]){Fightmodule.leavefight();this.stopmove();autohookstate&&Laya.stage.event("onhook",["0"]);this.end_point=b;var a=ObjectManage.findobject(playerID);a&&(20<a.grid.distance(b.x,b.y)?this.start2move(a.grid,b):this.startmove(a.grid,b),b=Laya.stage.getChildByName("moveing"),null==b&&(b=new Laya.Point(browser_width/2,browser_height/2+115),b=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/moveing/",1,12,100,!0,!1,b),b.name="moveing",b.zOrder=0))}};return b}(),OffsetModule=function(){function b(){this.init()}_prototype=b.prototype;_prototype.init=function(){this.dv_=[];this.pieceCount_=[]};_prototype.getoffsets=function(b,a,d){var e=[];if(-1!=b.indexOf("data/"))for(;a<=d;a++){var g=("000000"+a).slice(-6),f=GameUtil.getImageSetNameByPath(b+g);e.push(this.getoffsetfromatlas(f,g))}return e};_prototype.getoffset=function(b,a){if(b){var d=new Laya.Point(0,0);if(-1!=b.indexOf("data/")){var e=("000000"+a).slice(-6),g=GameUtil.getImageSetNameByPath(b+e);t.push(this.getoffsetfromatlas(g,e))}return d}};_prototype.getoffsetfromatlas=function(b,a){var d=new Laya.Point,e=Laya.loader.getRes(b);e&&e.frames&&(e=e.frames[a+".png"])&&e.frame&&(d.x=e.frame.offsetx,d.y=e.frame.offsety);return d};_prototype.parseFile=function(){var b=Laya.loader.getRes("data/json/offsetlist.bin");Laya.loader.clearRes("data/json/offsetlist.bin");for(var a=new Uint8Array(b),d=0,e=a[d++]|a[d++]<<8|a[d++]<<16|a[d++]<<24,g=0;g<e;g++){var f=a[d++]|a[d++]<<8|a[d++]<<16|a[d++]<<24,h=a[d++]|a[d++]<<8|a[d++]<<16|a[d++]<<24,l=GameUtil.slice(a,f+1,f+1+a[f]),l=gbkByteArr2UcsStr(l),f=f+64,l=l.replace(".bin",""),f=b.slice(f,f+h-64),f=new Int16Array(f);this.dv_[l]=f;this.pieceCount_[l]=f.length/2-1}};return b}(),SkillModule=function(){function b(){this.init()}_prototype=b.prototype;_prototype.init=function(){this.fly_list=[];this.target=[];this.skillClass=[];this.getskillClass()};_prototype.getskillClass=function(){var b=Laya.Loader.getRes("json/skillClass.txt");if(b&&""!=b)for(var b=b.split("\r\n"),a=0;a<b.length;a++)b[a]&&""!=b[a]&&0!=b[a].indexOf(";")&&-1!=b[a].indexOf("/")&&this.skillClass.push(b[a].split("/"))};_prototype.getskillid=function(b,a){for(var d=0;d<this.skillClass.length;d++){var e=this.skillClass[d];if(b==e[1]){e[2]&&-1!=e[2].indexOf("-")&&(e[2].substring(0,e[2].indexOf("-")),e[2].substring(e[2].indexOf("-")+1));if(e[3]&&-1!=e[3].indexOf("-"))var g=e[3].substring(0,e[3].indexOf("-")),f=e[3].substring(e[3].indexOf("-")+1);if(e[4]&&-1!=e[4].indexOf("-"))var h=e[4].substring(0,e[4].indexOf("-")),l=e[4].substring(e[4].indexOf("-")+1);if(e[5]&&-1!=e[5].indexOf("-"))var m=e[5].substring(0,e[5].indexOf("-")),n=e[5].substring(e[5].indexOf("-")+1);if(g&&f&&a>=g&&a<=f)return b+2E3;if(h&&l&&a>=h&&a<=l)return b+3E3;if(m&&n&&a>=m&&a<=n)return b+4E3;break}}return b};_prototype.setParent=function(b){this.root=b};_prototype.getSkillParent=function(){return this.root};_prototype.onanalyzeJson=function(b){this.skill_data=Laya.Loader.getRes(b)};_prototype.parseDiySkillFile=function(){this.customSkill=[];var b=Laya.loader.getRes("json/DiySkill.tdm");Laya.loader.clearRes("json/DiySkill.tdm");var a=new Uint8Array(b),b={buff:a,pos:0},d=a[b.pos++]|a[b.pos++]<<8|a[b.pos++]<<16|a[b.pos++]<<24;if(0==(a.length-4)%903)for(a=0;a<d;a++)for(var e=TClientDiySkillFileData(b),g=0;5>g;g++){var f={isCustomSkill:!0};f.id=e.wMagicId;f.name="Unknown";f.type=e.Data.btType;f.levelIndex=g;f.boCanLockTarget=e.Data.boCanLockTarget;f.boFiyFried=e.Data.boFiyFried;f.boNewEffect=e.Data.boNewEffect;f.btWarriorSkillType=e.Data.btWarriorSkillType;f.multilevel=[];var h=e.Data.Bases[g];f.iconFileIndex=h.btIconFileIndex-1;f.usesActionType=h.btUsesActionType;f.sSoundFileNameAttackMan=h.sSoundFileNameAttackMan;f.sSoundFileNameAttackMon=h.sSoundFileNameAttackMon;f.sSoundFileNameExp=h.sSoundFileNameExp;f.sSoundFileNameFly=h.sSoundFileNameFly;f.sSoundFileNameUses=h.sSoundFileNameUses;f.wIconImageIndex=h.wIconImageIndex;f.WSoundID=h.wSoundID;h=e.Data.Effect[g].Action.Base;f.self_start=h.dwStartIndex;f.self_frame_count=h.btCount;f.self_dir=h.btDirType;f.self_empty=h.btSkip;f.self_blend_mode=h.btBlendMode;f.self_file_index=h.btFileIndex;f.self_frame_time=h.wFrameTime;h=e.Data.Effect[g].Action.Add;f.self_start_add=h.dwStartIndex;f.self_frame_add=h.btCount;f.self_dir_add=h.btDirType;f.self_empty_add=h.btSkip;f.self_blend_mode_add=h.btBlendMode;f.self_file_index_add=h.btFileIndex;f.self_frame_time_add=h.wFrameTime;h=e.Data.Effect[g].Fly.Base;f.fly_start=h.dwStartIndex;f.fly_frame_count=h.btCount;f.fly_dir=h.btDirType;f.fly_empty=h.btSkip;f.fly_blend_mode=h.btBlendMode;f.fly_file_index=h.btFileIndex;f.fly_frame_time=h.wFrameTime;h=e.Data.Effect[g].Fly.Add;f.fly_start_add=h.dwStartIndex;f.fly_frame_count_add=h.btCount;f.fly_dir_add=h.btDirType;f.fly_empty_add=h.btSkip;f.fly_blend_mode_add=h.btBlendMode;f.fly_file_index_add=h.btFileIndex;f.fly_frame_time_add=h.wFrameTime;h=e.Data.Effect[g].Exp.Base;f.exp_start=h.dwStartIndex;f.exp_frame_count=h.btCount;f.exp_dir=h.btDirType;f.exp_empty=h.btSkip;f.exp_blend_mode=h.btBlendMode;f.exp_file_index=h.btFileIndex;f.exp_frame_time=h.wFrameTime;h=e.Data.Effect[g].Exp.Add;f.exp_start_add=h.dwStartIndex;f.exp_frame_count_add=h.btCount;f.exp_dir_add=h.btDirType;f.exp_empty_add=h.btSkip;f.exp_blend_mode_add=h.btBlendMode;f.exp_file_index_add=h.btFileIndex;f.exp_frame_time_add=h.wFrameTime;this.customSkill.push(f)}};_prototype.findCustomSkill=function(b,a){if(null==this.customSkill)return null;for(var d=this.customSkill.length,e=0;e<d;e++){var g=this.customSkill[e];if(g.id==b&&(0==g.levelIndex&&0<=a&&3>=a||1==g.levelIndex&&4<=a&&7>=a||2==g.levelIndex&&8<=a&&11>=a||3==g.levelIndex&&12<=a&&15>=a))return g.isCustomSkill=!0,g}return null};_prototype.getskilldata=function(b,a){if(null!=this.skill_data)for(var d=0;d<this.skill_data.length;d++)if(a||0==a){if(this.skill_data[d].type==b&&this.skill_data[d].id==a)return this.skill_data[d]}else if(this.skill_data[d].type==b)return this.skill_data[d]};_prototype.playCustomSkillForTarget=function(b,a,d,e){if(null!=a){e=GameUtil.getorientation(a.grid,d);a.grid.x==d.x&&a.grid.y==d.y&&(e=a.cur_dir);attack_lock_state&&-1!=rocker_move_dir&&(e=rocker_move_dir);if(0!=b.usesActionType){d=11;switch(b.usesActionType){case 1:d=11;break;case 2:d=7;break;case 3:d=11}14!=a.cur_state&&a.changestate(null,d,e,!1,"play_over_test")}b.sSoundFileNameUses&&""!=b.sSoundFileNameUses&&Laya.SoundManager.playSound(GameUtil.FindSoundByID(b.sSoundFileNameUses));if(0!=b.self_file_index&&(d=g_pak_list[b.self_file_index-1])){var g=b.self_start;b.self_dir&&(g+=e*(b.self_frame_count+b.self_empty));var f=g+b.self_frame_count;Animationmodule.playframe(!0,a,"data/"+d+"/",g,f,100,!1,!0)}0!=b.self_file_index_add&&(d=g_pak_list[b.self_file_index_add])&&(g=b.self_start_add,b.self_dir&&(g+=e*(b.self_frame_count_add+b.self_empty_add)),f=g+b.self_frame_count_add,Animationmodule.playframe(!0,a,"data/"+d+"/",g,f,100,!1,!0))}};_prototype.applyCustomSkillForOther=function(b){var a=ObjectManage.findobject(b.record);if(null!=a){var d=b.magicid,e=b.newlv,g=this.findCustomSkill(d,e);g&&(b=new Laya.Point(b.param,b.tag),a.currMagicId=d,this.playCustomSkillForTarget(g,a,b,e))}};_prototype.playCustomSkillMagicfire=function(b,a,d){var e=this.findCustomSkill(a,d.lv);if(e){var g=0!=d.targetid;a=new Laya.Point(d.tx,d.ty);d=GameUtil.getorientation(b.grid,a);b.grid.x==a.x&&b.grid.y==a.y&&(d=b.cur_dir);var f=GameUtil.getAngle(b.grid,a),f=GameUtil.getorientation16(f),h=e.fly_file_index,l=0,m=0,n=null;0!=h&&(n=g_pak_list[h-1])&&(l=e.fly_start,2==e.fly_dir?l+=d*(e.fly_frame_count+e.fly_empty):1==e.fly_dir&&(l+=f*(e.fly_frame_count+e.fly_empty)),m=l+e.fly_frame_count-1);var h=e.exp_file_index,q=0,p=0,r=null;0!=h&&(r=g_pak_list[h-1])&&(q=e.exp_start,2==e.exp_dir?q+=d*(e.exp_frame_count+e.exp_empty):1==e.exp_dir&&(q+=f*(e.exp_frame_count+e.exp_empty)),p=q+e.exp_frame_count-1);var h=e.exp_file_index_add,v=0,w=0,z=null;0!=h&&(z=g_pak_list[h-1])&&(v=e.exp_start_add,2==e.exp_dir_add?v+=d*(e.exp_frame_count_add+e.exp_empty_add):1==e.exp_dir_add&&(v+=f*(e.exp_frame_count_add+e.exp_empty_add)),w=v+e.exp_frame_count_add-1);var h=new Laya.Point(48*a.x,32*a.y),C=e.type;switch(C){case 0:e.sSoundFileNameFly&&""!=e.sSoundFileNameFly&&Laya.SoundManager.playSound(GameUtil.FindSoundByID(e.sSoundFileNameFly));g||(GameUtil.getorientation(b.grid,a),h=new Laya.Point(48*a.x,32*a.y));d=Animationmodule.playframe(!0,this.root,"data/"+n+"/",l,m,100,!1,!0);d.pos(48*b.grid.x,32*b.grid.y);a=60*a.distance(b.grid.x,b.grid.y);Laya.Tween.to(d,{x:h.x,y:h.y},a,null,Laya.Handler.create(this,function(a,b,d,f,m){Animationmodule.removeAni(a);if(g||e.boFiyFried)e.sSoundFileNameExp&&""!=e.sSoundFileNameExp&&Laya.SoundManager.playSound(GameUtil.FindSoundByID(e.sSoundFileNameExp)),r&&(a=Animationmodule.playframe(!0,this.root,"data/"+r+"/",q,p,100,!1,!0),a.pos(f.x,f.y)),z&&(a=Animationmodule.playframe(!0,this.root,"data/"+z+"/",v,w,100,!1,!0),a.pos(f.x,f.y))},[d,C,b,h,g]));break;case 1:case 2:h=e.exp_file_index,p=q=0,r=null,0!=h&&(r=g_pak_list[h-1])&&(q=e.exp_start,1==e.exp_dir?q+=d*(e.exp_frame_count+e.exp_empty):2==e.exp_dir&&(q+=f*(e.exp_frame_count+e.exp_empty)),p=q+e.exp_frame_count-1),e.sSoundFileNameExp&&""!=e.sSoundFileNameExp&&Laya.SoundManager.playSound(GameUtil.FindSoundByID(e.sSoundFileNameExp)),r&&(d=Animationmodule.playframe(!0,b,"data/"+r+"/",q,p,100,!1,!0)),z&&(d=Animationmodule.playframe(!0,b,"data/"+z+"/",v,w,100,!1,!0))}}};_prototype.playself=function(b,a,d,e,g,f){if(null!=d){var h=11;5==b||13==b||23==b||24==b||0==b||43==b||53==b||38==b?h=7:8!=b&&(f=parseInt(f/2));99<b&&2E3>b&&(h=3);if(119==b||121==b||110==b||120==b)h=11;if(d.data.record!=playerID&&4==b)var l=0==f%2;b&&f&&(b=this.getskillid(b,f));var m=this.getskilldata(b,a);if(25!=b)if(g=GameUtil.getorientation(d.grid,e),d.grid.x==e.x&&d.grid.y==e.y&&(g=d.cur_dir),attack_lock_state&&-1!=rocker_move_dir&&(g=rocker_move_dir),14!=d.cur_state&&(0==b&&75==a||d.changestate(null,h,g,!1,"play_over_test")),null==m||0==m.self_frame)10==b&&13==a&&3<f&&Animationmodule.playframe(!0,d,"data/magic8-16/",580,589,100,!1,!0),m&&d&&(13==m.id&&-1<m.name.indexOf("\u7075\u9b42\u706b\u7b26")&&d.skin_feature.btGender?GameUtil.PlayMusicFormat(GameUtil.SkillStartSound(m.id,!d.skin_feature.btGender)):GameUtil.PlayMusicFormat(GameUtil.SkillStartSound(m.id,d.skin_feature.btGender)));else{h=0;16==m.self_dir?(e=GameUtil.getAngle(d.grid,e),h=GameUtil.getorientation16(e)*(m.self_frame+m.self_empty)):8==m.self_dir&&(h=g*(m.self_frame+m.self_empty));var n=m.self_start+h,q=n+m.self_frame-1;if(d&&d.skin_feature&&29==b&&31==a&&3<d.skin_feature.btMagBubbleLevel)Animationmodule.playframe(!0,d,"data/magic6/",690,699,100,!1,!0);else if(20==b&&22==a&&3<f)Animationmodule.playframe(!0,d,"data/magic7-16/",80,87,100,!1,!0);else if(9==b&&11==a&&3<f)Animationmodule.playframe(!0,d,"data/magic7-16/",200,203,d.ftime,!1,!0);else if(31==b&&33==a&&3<f)n=80,q=89,Animationmodule.playframe(!0,d,"data/magic8-16/",n,q,d.ftime,!1,!0);else if(4!=b&&2004!=b&&3004!=b&&4004!=b||6!=a){var p=ObjectManage.analyspeed(d.cur_state,d.type,d.ftime,d),p=Math.max(1,d.ftime-p);43==b&&95==a?Animationmodule.playframe(!0,d,m.fl_name,n,q,p,!1,!0,null,this,function(){Animationmodule.playframe(!0,d,m.fl_name,n+85,q+85,p,!1,!0)}):Animationmodule.playframe(!0,d,m.fl_name,n,q,p,!1,!0)}else{b="green";if(d.data.record==playerID)for(l=0;l<g_UserItemList.length;l++){if(g_UserItemList[l])if(-1!=g_UserItemList[l].s.Name.indexOf("\u7070\u8272\u836f\u7c89")){b="green";break}else if(-1!=g_UserItemList[l].s.Name.indexOf("\u9ec4\u8272\u836f\u7c89")){b="red";break}}else void 0!=l&&(l?b="green":b="red");"green"==b?Animationmodule.playframe(!0,d,m.fl_name,n,q,d.ftime,!1,!0):"red"==b&&f&&(3>=f?Animationmodule.playframe(!0,d,"data/magic/",600,609,d.ftime,!1,!0):4<=f&&7>=f?Animationmodule.playframe(!0,d,"data/magic7-16/",710,719,d.ftime,!1,!0):8<=f&&11>=f?Animationmodule.playframe(!0,d,"data/magic7-16/",730,730,d.ftime,!1,!0):12<=f&&15>=f&&Animationmodule.playframe(!0,d,"data/magic7-16/",750,759,d.ftime,!1,!0))}GameUtil.PlayMusicFormat(GameUtil.SkillStartSound(m.id,d.skin_feature.btGender?0==d.skin_feature.btGende?1:0:d.skin_feature.btGender))}}};_prototype.playEQsecurestruck=function(b){var a=b.getChildByName("eqsecure"+b.data.record);a&&(58==a.type?(a=this.getskilldata(29,58),Animationmodule.playframe(!0,b,a.fl_name,723,725,80,!1,!0)):(a=this.getskilldata(29),Animationmodule.playframe(!0,b,a.fl_name,3900,3902,80,!1,!0)))};_prototype.playfly=function(b,a,d,e,g,f,h){b&&f&&(b=this.getskillid(b,f));var l=this.getskilldata(b);if(null!=l){var m=GameUtil.getAngle(d.grid,e),m=GameUtil.getorientation16(m)*(l.fly_frame+l.fly_empty),n=l.fly_start+m,q=n+l.fly_frame-1,m=new Laya.Point(d.grid.x,d.grid.y);if(999==b&&999==a||1E3==b&&1E3==a||1001==b&&1001==a)m.y-=2,e.y-=2;if(n=Animationmodule.playframe(!0,this.root,l.fl_name,n,q,d.ftime,!0,!1))n.pos(48*m.x,32*m.y),m=60*e.distance(m.x,m.y),Laya.Tween.to(n,{x:48*e.x,y:32*e.y},m,null,Laya.Handler.create(this,function(a,b,d,e,m,c,l){Animationmodule.removeAni(a);(b||h)&&this.playhit(d,e,m,c,h,f)},[n,g,b,a,d,e,h]));GameUtil.PlayMusicFormat(GameUtil.SkillStartSound(l.id,d.skin_feature.btGender?d.skin_feature.btGender:0==d.skin_feature.btGender?1:0))}};_prototype.playhit=function(b,a,d,e,g,f){if(29!=b){b&&f&&(b=this.getskillid(b,f));var h=this.getskilldata(b);if(null!=h&&!(0>=h.gethit_frame)){var l=h.gethit_start,m=l+h.gethit_frame-1;if(g=ObjectManage.findobject(g))e=g.grid;if(99==b){var l=GameUtil.getorientation(d.grid,e)*(h.gethit_start+h.fly_empty),l=h.gethit_start+l,m=l+h.gethit_frame-1,n=Animationmodule.playframe(!0,this.root,h.fl_name,l,m,80,!1,!0,null,null);n&&n.pos(48*e.x,32*e.y)}18==b||30==b?Animationmodule.playframe(!0,g,h.fl_name,l,m,80,!1,!0):119==b?(Animationmodule.playframe(!0,d,h.fl_name,l,m,80,!1,!0,null,null),Laya.stage.event("delskillani")):1016==b&&1016==a&&f?(3<f&&8>f?(l=90,m=106):7<f&&12>f?(l=110,m=127):11<f&&(l=130,m=147),(n=Animationmodule.playframe(!0,this.root,"data/magic8-16/",l,m,80,!1,!0,null,null))&&n.pos(48*e.x,32*e.y)):121==b?(b=Animationmodule.playframe(!0,this.root,h.fl_name,l,m,80,!1,!0,null,null),a=Animationmodule.playframe(!0,this.root,h.fl_name,l,m,80,!1,!0,null,null),f=Animationmodule.playframe(!0,this.root,h.fl_name,l,m,80,!1,!0,null,null),g=Animationmodule.playframe(!0,this.root,h.fl_name,l,m,80,!1,!0,null,null),l=Animationmodule.playframe(!0,this.root,h.fl_name,l,m,80,!1,!0,null,null),b&&a&&f&&g&&l&&(b.pos(48*e.x,32*e.y),a.pos(48*e.x-65,32*e.y-65),f.pos(48*e.x+65,32*e.y-65),g.pos(48*e.x-65,32*e.y+65),l.pos(48*e.x+65,32*e.y+65))):(n=d?Animationmodule.playframe(!0,this.root,h.fl_name,l,m,80,!1,!0,null,this,function(){d.is_call=!0}):Animationmodule.playframe(!0,this.root,h.fl_name,l,m,80,!1,!0,null,null))&&n.pos(48*e.x,32*e.y);GameUtil.PlayMusicFormat(GameUtil.SkillExplosionSound(h.id))}}};_prototype.playhellfire=function(b,a,d,e,g){5<this.fire_index?Laya.timer.clear(this,this.playhellfire):(e=GameUtil.getMovePoint(e.grid,g,this.fire_index++),(b=Animationmodule.playframe(!0,this.root,b,a,d,80,!1,!0))&&b.pos(48*e.x,32*e.y))};_prototype.hellfire=function(b,a,d,e,g){this.fire_index=0;b&&g&&(b=this.getskillid(b,g));b=this.getskilldata(b);a=b.fly_start;g=a+b.fly_frame-1;e=GameUtil.getAngle(d.grid,e);e=GameUtil.get8orientation(e);Laya.timer.loop(100,this,this.playhellfire,[b.fl_name,a,g,d,e])};_prototype.closeEQsecure=function(b){var a=ObjectManage.findobject(b);if(a){var d=a.getChildByName("eqsecure"+b),a=a.getChildByName("eqsecure2"+b);d&&Animationmodule.removeAniname("eqsecure"+b);a&&Animationmodule.removeAniname("eqsecure2"+b)}};_prototype.EQsecure=function(b,a,d){this.fire_index=0;b=this.getskilldata(b,d);var e=b.fly_start,g=e+b.fly_frame-1,f=a.getChildByName("eqsecure"+a.data.record);a.getChildByName("eqsecure2"+a.data.record);if(null==f){if(a&&a.skin_feature&&3<a.skin_feature.btMagBubbleLevel){b=Animationmodule.playframe(!0,a,b.fl_name,e,g,80,!0,!1);var h=Animationmodule.playframe(!0,a,"data/magic6/",720,722,80,!0,!1)}else b=Animationmodule.playframe(!0,a,b.fl_name,e,g,80,!0,!1);58==d&&(b.type=58);b&&(b.name="eqsecure"+a.data.record);h&&(h.name="eqsecure2"+a.data.record)}};_prototype.firewall=function(b,a,d,e){a=this.getskilldata(a);var g=a.gethit_start,f=g+a.gethit_frame-1,h=this.root.getChildByName(""+b);!h&&(h=115==d?Animationmodule.playframe(!0,this.root,"data/magic7-16/",90,97,80,!0,!1):116==d?Animationmodule.playframe(!0,this.root,"data/magic7-16/",100,107,80,!0,!1):117==d?Animationmodule.playframe(!0,this.root,"data/magic7-16/",110,117,80,!0,!1):Animationmodule.playframe(!0,this.root,a.fl_name,g,f,80,!0,!1))&&(h.name=""+b,h.pos(48*e.x,32*e.y),h.zOrder=1)};_prototype.play2skill=function(b,a,d,e,g,f,h,l){e=new Laya.Point(e,g);b=ObjectManage.findobject(b);if(null!=b)switch(0!=f||1!=d&&8!=d||(e=GameUtil.getorientation(b.grid,e),e=GameUtil.getMovePoint(b.grid,e,10)),d){case 1:this.playfly(a,d,b,e,f,h);break;case 2:4==a&&3<h&&0==l?this.playhit(1015,1015,b,e,f,h):31==a&&3<h?this.playhit(1016,1016,b,e,f,h):this.playhit(a,d,b,e,f,h);break;case 3:break;case 4:this.playhit(a,d,b,e,f,h);break;case 5:this.hellfire(a,d,b,e,f,h);break;case 6:break;case 7:3<h?this.playhit(a,d,b,e,f):this.playhit(a,d,b,e,f,h);break;case 8:3<h&&(4<=h&&7>=h?this.playfly(20101,20101,b,e,f,h):8<=h&&11>=h?this.playfly(30101,30101,b,e,f,h):12<=h&&15>=h&&this.playfly(40101,40101,b,e,f,h));this.playfly(a,d,b,e,f,h);break;case 9:this.playfly(a,d,b,e,f,h,!0);break;case 10:break;case 14:this.playhit(a,d,b,e,f);break;default:this.playfly(a,d,b,e,f,h)}};_prototype.hideskill=function(b){null!=this.root&&(b=this.root.getChildByName(""+b))&&(b.removeSelf(),ObjectManage.del2object(b))};_prototype.checklegal=function(b,a){for(var d=0;d<g_UserMagicList.length;++d){var e=g_UserMagicList[d];if(e.Def.btEffect==b&&e.Def.wMagicId==a)return 0==e.Def.w02||13==b||23==b?e.Def.dwDelayTime:1E3*e.Def.w02}return 0};_prototype.handlepoison=function(){if(GlobalCfglist.d_autoskill_1)switch(GlobalCfglist.d_autoskill_1){case "\u4e92\u6362":return"0";case "\u7eff\u6bd2":return"1";case "\u7ea2\u6bd2":return"2"}};_prototype.sendMsg=function(b,a,d,e,g){if(d=1E3<=e&&1500>=e?Skillmodule.findCustomSkill(e,g):this.getskilldata(b,e)){6==d.mode&&(Objectcontrol.move_call_result=!1);g=6==d.id?g=this.handlepoison():g=null;if(GlobalCfglist.d_autoskill_4&&"\u6cbb\u6108\u672f"==d.name){if(b=ObjectManage.findobject(playerID))a=b.grid,Sendmessage.sendSpellMessage(CM_SPELL,a.x,a.y,d.id,null,g)}else{var f=!1;if(17==b&&19==d.id||40==d.type&&57==d.id||40==d.type&&500==d.id)for(var h=0;h<ObjectManage.object_list.length;++h){var l=ObjectManage.object_list[h];l.grid.x==a.x&&l.grid.y==a.y&&(Sendmessage.sendSpellMessage(CM_SPELL,a.x,a.y,d.id,l.data.record,g),f=!0)}f||Sendmessage.sendSpellMessage(CM_SPELL,a.x,a.y,d.id,lockingID,g);29!=b&&28!=b&&16!=b&&17!=b&&11!=b&&12!=b&&15!=b&&(g_magicId=b,g_magicType=e)}for(h=0;h<g_SetupMagicList.length;h++)if(g_SetupMagicList[h]&&g_SetupMagicList[h].Def.sMagicName==d.name){Laya.stage.event("skillcd_ani",h);break}}};_prototype.openMsg=function(b,a,d){switch(b){case 0:Sendmessage.sendSpellMessage(CM_HIT,a.x,a.y,d,lockingID);break;case 5:Sendmessage.sendSpellMessage(CM_POWERHIT,a.x,a.y,d,lockingID);break;case 13:Sendmessage.sendSpellMessage(CM_LONGHIT,a.x,a.y,d,lockingID);break;case 23:Sendmessage.sendSpellMessage(CM_WIDEHIT,a.x,a.y,d,lockingID);break;case 24:Sendmessage.sendSpellMessage(CM_FIREHIT,a.x,a.y,d,lockingID);break;case 38:Sendmessage.sendSpellMessage(CM_TWNHIT,a.x,a.y,d,lockingID);break;case 43:Sendmessage.sendSpellMessage(CM_66HIT,a.x,a.y,d,lockingID);break;case 53:Sendmessage.sendSpellMessage(CM_SWORDHIT,a.x,a.y,d,lockingID)}};return b}(),TNewItem=function(){function b(){this.InBagList=[]}var c=null;b.prototype.AddBagItem=function(a){this.InBagList.push(a);console.log("\x3e\x3e\x3e",this.InBagList.length)};return{getInstance:function(){null==c&&(c=new b);return c}}}();(function(){function b(a,d,e,c,f,h,l){b.__super.call(this);this.Init(a,d,e,c,f,h,l)}Laya["class"](b,"CBlood",Laya.Component);var c=b.prototype;c.Init=function(a,b,e,c,f,h,l){var m=GameUtil.InstanceOfMem(GameSceneUI).maplayer;this.people=h;this.maxBlood=a;this.curBlood=b;this.maxMp=f;this.curMp=c;this.isMainRole=e;this.width=28;this.height=10;this.bgSpr=new Laya.Sprite;a=Laya.loader.getRes("gameres/ui/000000.png");this.bgSpr.graphics.drawTexture(a,0,0);this.bgSpr.anchorX=0;this.bgSpr.anchorY=.5;GameUtil.addChildToGameSceneMapLayer(this.bgSpr,m,999995);this.bloodSpr=new Laya.Sprite;a=Laya.loader.getRes("gameres/ui/000001.png");this.bloodSpr.graphics.drawTexture(a,0,0);this.bloodSpr.anchorX=0;this.bloodSpr.anchorY=.5;GameUtil.addChildToGameSceneMapLayer(this.bloodSpr,m,999996);this.bloodSpr.scaleX=(this.curBlood/this.maxBlood).toFixed(2);this.mpSpr=new Laya.Sprite;a=Laya.loader.getRes("gameres/ui/000004.png");this.mpSpr.graphics.drawTexture(a,0,0);this.mpSpr.anchorX=0;this.mpSpr.anchorY=.5;GameUtil.addChildToGameSceneMapLayer(this.mpSpr,m,999997);this.mpSpr.scaleX=(this.curMp/this.maxMp).toFixed(2);this.mpSpr.visible=!1;this.showBlueBar(l);this.textBlood=new Laya.Text;this.textBlood.color="#FFFFFF";this.textBlood.stroke=g_strokewidth?g_strokewidth:0;this.textBlood.fontSize=14;this.textBlood.text="";GameUtil.addChildToGameSceneMapLayer(this.textBlood,m,999998)};c.updateBloodPos=function(){this.bgSpr&&(this.bgSpr.x=this.x,this.bgSpr.y=this.y);this.bloodSpr&&(this.bloodSpr.x=this.x,this.bloodSpr.y=this.y);this.mpSpr&&(this.mpSpr.x=this.x,this.mpSpr.y=this.y);this.textBlood&&(this.textBlood.x=this.x+this.getTextBloodOffsetValueX(),this.textBlood.y=this.y+this.getTextBloodOffsetValueY())};c.getTextBloodOffsetValueX=function(){return(32-this.textBlood.width)/2};c.getTextBloodOffsetValueY=function(){return-18};c.showBlueBar=function(a){this.mpSpr&&(this.mpSpr.visible=GlobalCfglist.showBlue?a.boMagicShield:!1)};c.SetCurBloodNum=function(a,b,e){a&&(this.curBlood=a);if(this.textBlood){this.textBlood.text=this.people&&"1"==Mapdata.cur_type?Math.ceil(this.curBlood/this.maxBlood*100)+"/100":GameUtil.makeBigNum(this.curBlood)+"/"+GameUtil.makeBigNum(this.maxBlood);if(void 0!=this.bloodSpr||null!=this.bloodSpr)this.bloodSpr.scaleX=(this.curBlood/this.maxBlood).toFixed(2);b&&e&&this.mpSpr&&(this.mpSpr.scaleX=(b/e).toFixed(2))}};c.SetMaxBloodNum=function(a){this.maxBlood=a};c.AliveBlood=function(){this.bloodSpr&&this.curBlood&&this.textBlood&&(this.curBlood=this.maxBlood,this.bloodSpr.scaleX=(this.curBlood/this.maxBlood).toFixed(2),this.textBlood.text=this.people&&"1"==Mapdata.cur_type?Math.ceil(this.curBlood/this.maxBlood*100)+"/100":GameUtil.makeBigNum(this.curBlood)+"/"+GameUtil.makeBigNum(this.maxBlood));this.mpSpr&&this.curMp&&(this.curMp=this.maxMp,this.mpSpr.scaleX=(this.curMp/this.maxMp).toFixed(2))};c.removeBlood=function(){this.bgSpr&&(this.bgSpr.destroy(),this.bgSpr=null);this.bloodSpr&&(this.bloodSpr.destroy(),this.bloodSpr=null);this.mpSpr&&(this.mpSpr.destroy(),this.mpSpr=null);this.textBlood&&(this.textBlood.destroy(),this.textBlood=null)};c.setBloodVisible=function(a){this.bgSpr&&(this.bgSpr.visible=a);this.bloodSpr&&(this.bloodSpr.visible=a);this.textBlood&&(this.textBlood.visible=a)};c.setOffsetPos=function(a,b){this.x=a+8;this.y=b-55}})();
var ItemMgr=function(){function b(){this.InBagList=[];this.InBagMap={};this.UseItemList=[];this.UseItemMap={};this.DropItemList=[];this.DropItemMap={};this.InDepotRoomList=[];this.InDepotRoomMap={};this.BuyItemRoomList=[];this.BuyItemInfoRoomList=[];this.TradeItemList=[];this.TradeOtherList=[];this.BaiTanList=[];this.LastDragItem=this.LastUseItem=this.LastTradeItem=null;this.LastDragFrom="";this.LastBaiTanBuyItem=this.LastBaiTanItem=this.LastRepaceItem=null;this.MainDlgUseList=[null,null,null,null,null,null];this.MainDlgUseMap={};this.ShopItemList=[];this.StrageList=[];this.LastShopItem=null;this.LastTakeOnPos=0;this.CurSelecItem=null;this.CanTakeOnItems=!1;this.SelectEquipNPos=-1;this.UseItemLock=!1}var c=null,a=b.prototype;a.AddItemToBag=function(a,b){void 0==b&&(b=!0);if(null!=a&&void 0!=a.s){var c=this.FindItemFromDropList(a.MakeIndex);c&&this.DelItemFromMap(c.MakeIndex);0==b?(void 0==this.InBagMap[a.MakeIndex]&&this.InBagList.push(a),this.InBagMap[a.MakeIndex]=a):1!=this.IsAddItemToMainDlg(a)&&(this.InBagList.length>=GameUtil.MaxBagItems()?Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#00ff00"}]):(void 0==this.InBagMap[a.MakeIndex]&&this.InBagList.push(a),this.InBagMap[a.MakeIndex]=a))}};a.DeleteTradeItem=function(a){for(var b=0;b<this.TradeItemList.length;b++)this.TradeItemList[b].id==a&&delete this.TradeItemList.splice(b,1)};a.DeleteTradeOtherItem=function(a){for(var b=0;b<this.TradeOtherList.length;b++)this.TradeOtherList[b].id==a&&delete this.TradeOtherList.splice(b,1)};a.AddItemToRole=function(a){void 0!=a.s&&(void 0==this.UseItemMap[a.MakeIndex]&&this.UseItemList.push(a),this.UseItemMap[a.MakeIndex]=a)};a.FindItemFromDropList=function(a){for(var b=0;b<this.DropItemList.length;b++)if(this.DropItemList[b].MakeIndex==a)return this.DropItemList[b];return null};a.AddItemToMap=function(a){return void 0==this.DropItemMap[a.id]?(this.DropItemList.push(a),this.DropItemMap[a.id]=a,Laya.stage.event("update_pick_item",[a]),Objectcontrol.autodrop(a),!0):!1};a.existThisItemInMap=function(a){return a&&this.DropItemMap?this.DropItemMap[a.id]?!0:!1:!1};a.AddItemToDepot=function(a){void 0!=a.s&&(void 0==this.InDepotRoomMap[a.MakeIndex]&&this.InDepotRoomList.push(a),this.InDepotRoomMap[a.MakeIndex]=a)};a.IsAddItemToMainDlg=function(a){if(6<=this.getMainDlgItemLength())return!1;var b=this.getMainDlgItemPos();return 3>=a.s.StdMode?(this.MainDlgUseList[b]||(this.MainDlgUseList[b]=a),Laya.stage.event("udpate_maindlg_items"),!0):!1};a.getMainDlgItemLength=function(){for(var a=0,b=0;b<this.MainDlgUseList.length;b++)null!=this.MainDlgUseList[b]&&a++;return a};a.getMainDlgItemPos=function(){for(var a=0;a<this.MainDlgUseList.length;a++)if(null==this.MainDlgUseList[a])return a;return 0};a.AddItemToMainDlg=function(a){if(void 0==this.MainDlgUseMap[a.MakeIndex])var b=this.getMainDlgItemPos();this.MainDlgUseList[b]=a;this.MainDlgUseMap[a.MakeIndex]=a};a.RemoveItemFromMainDlg=function(a){for(var b=0;b<this.MainDlgUseList.length;b++)this.MainDlgUseList[b]&&this.MainDlgUseList[b].MakeIndex==a&&(this.MainDlgUseList[b]=null);this.MainDlgUseMap[a]&&delete this.MainDlgUseMap[a];Laya.stage.event("udpate_maindlg_items")};a.DelItemFromMap=function(a){void 0==a&&(this.DropItemList=[],this.DropItemMap={});for(var b=0;b<this.DropItemList.length;b++)if(this.DropItemList[b].id==a){this.DropItemList.splice(b,1);g_cannotPick[a]&&(g_cannotPick[a]=null);break}this.DropItemMap[a]&&delete this.DropItemMap[a];Laya.stage.event("del_pick_item",[a])};a.HasDropItemById=function(a){return!!this.DropItemMap[a]};a.DeleteItemFromDepot=function(a){for(var b=0;b<this.InDepotRoomList.length;b++)this.InDepotRoomList[b].MakeIndex!=a&&0!=this.InDepotRoomList[b]||this.InDepotRoomList.splice(b,1);this.InDepotRoomMap[a]&&delete this.InDepotRoomMap[a]};a.DeleteItem=function(a,b){void 0==b&&(b=!0);if(b){for(var c=0;c<this.InBagList.length;c++)this.InBagList[c].MakeIndex==a&&this.InBagList.splice(c,1);this.InBagMap[a]&&delete this.InBagMap[a];Laya.stage.event("show_bag_items")}else{for(c=0;c<this.UseItemList.length;c++)this.UseItemList[c].MakeIndex==a&&this.UseItemList.splice(c,1);this.UseItemMap[a]&&delete this.UseItemMap[a];Laya.stage.event("update_roleeditor")}};a.FindItemFromInBagList=function(a){for(var b=0;b<this.InBagList.length;b++)if(this.InBagList[b].MakeIndex==a)return{tag:b,item:this.InBagList[b]};return null};a.FindItemShapeFromInBag=function(a,b){for(var c=0;c<g_BagItemsList.length;c++)if(g_BagItemsList[c]&&g_BagItemsList[c].s.StdMode==a&&g_BagItemsList[c].s.Shape==b)return{tag:c,item:g_BagItemsList[c]};return null};a.FindItemFromUseList=function(a){for(var b=0;b<this.UseItemList.length;b++)if(this.UseItemList[b].MakeIndex==a)return{tag:b,item:this.UseItemList[b]};return null};a.FindUseItemByType=function(a){for(var b=[],c=0;c<this.UseItemList.length;c++)GameUtil.GetItemType(this.UseItemList[c].s)==a&&b.push(this.UseItemList[c]);return b};a.FindUseItemByNpos=function(a){for(var b=0;b<this.UseItemList.length;b++)if(this.UseItemList[b].tag==a)return this.UseItemList[b];return null};a.RepleaseUseItem=function(a,b){for(var c=0;c<this.UseItemList.length;c++)this.UseItemList[c].MakeIndex==a&&(this.UseItemList[c]=b,this.UseItemMap[a]=b)};a.UpdateItem=function(a){var b=this.FindItemFromInBagList(a.MakeIndex);b&&(this.InBagList[b.tag]=a,this.InBagMap[a.MakeIndex]=a,Laya.stage.event("show_bag_items"));if(b=this.FindItemFromUseList(a.MakeIndex))this.UseItemList[b.tag]=a,this.UseItemMap[a.s.MakeIndex]=a,Laya.stage.event("update_roleeditor")};a.AutoAddHP=function(){b.getInstance();var a=this.GetItemListByName(g_AutoAddHPItemName);this.GetItemListByName(g_AutoAddHPItemGroupName);var e=0,c=0;if(playerID){var f=ObjectManage.findObject(playerID);f&&f.m_Abil&&(c=f.m_Abil.MaxHP,e=f.m_Abil.HP)}(0!=e||0!=c)&&100<c-e&&0<a.length&&this.UseItem(a[0])};a.AutoAddMP=function(){};a.UseItem=function(a){1==this.UseItemLock?Laya.stage.event("show_log",[{txt:"\u7981\u6b62\u8fde\u7eed\u4f7f\u7528\u7269\u54c1",color:"#ff0000"}]):(this.UseItemLock=!0,(this.LastUseItem=a)&&Sendmessage.SendUseItem(a.MakeIndex,a.s.Name),GameUtil.ClickSound(a))};a.GetItemListByName=function(a){for(var b=[],c=0;c<this.InBagList.length;c++)this.InBagList[c].s.DBName==a&&b.push(this.InBagList[c]);return b};a.GetItemListByType=function(a){for(var b=[],c=0;c<this.InBagList.length;c++){var f=GameUtil.GetItemType(this.InBagList[c].s);if(f==a)b.push(this.InBagList[c]);else if(5==a||6==a)5!=f&&6!=f||b.push(this.InBagList[c]);else if(7==a||8==a)8!=f&&7!=f||b.push(this.InBagList[c])}return b};a.RemoveShopRoomItem=function(a){for(var b=!1,c=0;c<this.BuyItemInfoRoomList.length;c++)a.MakeIndex==this.BuyItemInfoRoomList[c].MakeIndex&&(this.BuyItemInfoRoomList.splice(c,1),b=!0);for(c=0;c<this.BuyItemRoomList.length;c++)a.MakeIndex==this.BuyItemRoomList[c].MakeIndex&&(b=!0,this.BuyItemRoomList.splice(c,1));return b};a.GetDropItemByActor=function(a){a=new Laya.Point(a.x,a.y);for(var b=null,c=99999,f=0,h=0;h<this.DropItemList.length;h++)f=a.distance(this.DropItemList[h].x,this.DropItemList[h].y),f<c&&(c=f,b=this.DropItemList[h]);return b};a.GetPotionItems=function(){for(var a=[],b=0;b<this.InBagList.length;b++)3>=this.InBagList[b].s.StdMode&&a.push(this.InBagList[b]);return a};a.GetUseItemCntByName=function(a){for(var b=0,c=0;c<this.UseItemList.length;c++)this.UseItemList[c].s.Name==a&&b++;return b};a.GetUseItemByName=function(a){for(var b=0;b<this.UseItemList.length;b++)if(this.UseItemList[b].s.Name==a)return this.UseItemList[b];return null};a.FindUseItemByPos=function(a){for(var b=0;b<g_UserItemList.length;b++)if(g_UserItemList[b]&&b==a)return g_UserItemList[b];return null};a.ClearItem=function(){this.InBagList=[];this.InBagMap={};this.UseItemList=[];this.UseItemMap={};this.DropItemList=[];this.DropItemMap={};this.InDepotRoomList=[];this.InDepotRoomMap={};this.BuyItemRoomList=[];this.BuyItemInfoRoomList=[];this.TradeItemList=[];this.TradeOtherList=[];this.LastDragItem=this.LastUseItem=this.LastTradeItem=null;this.LastDragFrom="";this.LastRepaceItem=null;this.MainDlgUseList=[null,null,null,null,null,null];this.MainDlgUseMap={}};a.AddItemToBaiTan=function(a){var b=this.FindItemFromInBagList(a.id).item;this.DeleteItem(b.MakeIndex);this.BaiTanList.push({item:b,price:a.num,type:a.type});Laya.stage.event("show_bag_items")};a.AddBaiTanItemToBag=function(){for(var a=0;a<this.BaiTanList.length;a++)this.AddItemToBag(this.BaiTanList[a].item,!1);this.BaiTanList=[];Laya.stage.event("show_bag_items")};return{getInstance:function(){null==c&&(c=new b);return c}}}(),ChatBox=function(b){function c(){this.__super.call(this);this.init()}Laya["class"](c,"ChatBox",b);c.prototype.init=function(){this.timeOut=null;this.displayTime=3E3;this.skin="gameres/png/chat_spr.png";this.sizeGrid="8,8,20,20";this.chat_txt=new Laya.Text;this.chat_txt.color="#ffffff";this.chat_txt.fontSize=16;this.chat_txt.x=10;this.chat_txt.y=10;this.chat_txt.wordWrap=!0;this.addChild(this.chat_txt);this.chat_name=new Laya.Text;this.chat_name.color=Get2RGB("251");this.chat_name.fontSize=16;this.chat_name.x=10;this.chat_name.y=10;this.chat_name.wordWrap=!1;this.addChild(this.chat_name);this.chat_bg=new Laya.Image;this.chat_bg.skin="gameres/png/img_3jibg.png";this.chat_bg.alpha=.3;this.chat_bg.x=10;this.chat_bg.y=10;this.addChild(this.chat_bg)};c.prototype.showMsg=function(a){a=a.split(":");this.chat_name.text=a[0]+":";a[1]&&(this.chat_txt.text=-1!=a[1].indexOf("IMG")?"[\u56fe\u7247]":a[1]);this.chat_txt.pos(this.chat_name.x+this.chat_name.width,this.chat_name.y);this.chat_bg.width=this.chat_name.width;this.chat_bg.height=this.chat_name.height;this.width=this.chat_txt.width+this.chat_name.width+20;this.height=this.chat_txt.height+30+.1*this.chat_txt.height;this.x=-this.chat_txt.width/2-10;this.y=-65;this.pivotY=this.height;this.zOrder=1E6;this.visible=!0;this.hideMsg()};c.prototype.hideMsg=function(a){this.timeOut&&clearTimeout(this.timeOut);this.timeOut=setTimeout(function(){this.chat_txt.text="";this.visible=!1;this.timeOut=null}.bind(this),this.displayTime)};return c}(Laya.Image),Name=function(b){function c(a,b){this.__super.call(this);this.init(a,b);this.cur_name=""}Laya["class"](c,"Name",b);c.prototype.init=function(a,b){this.y=-25;this.fontSize=14;this.stroke=g_strokewidth;this.align="center";this.color="#ffffff";this.wordWrap=!0;this.strokeColor="#000000";this.zOrder=999994;this.nameList=[];this.nameColor="";if(b&&-1===["maindoor","leftwall","centerwall","rightwall"].indexOf(b.split("/")[0].split("\\")[0].toLowerCase())){var e=b.split("/")[0].split("\\"),e=e.filter(function(a){return""!==a});3===a.type&&1<e.length&&this.createTitle(a)}};c.prototype.update=function(a,b,e){if(a){if(this.cur_name=a,-1===["maindoor","leftwall","centerwall","rightwall"].indexOf(a.split("/")[0].split("\\")[0].toLowerCase())){if(0!=a.indexOf("#0")){var c=a.split("#0");a=c[0];c[1]&&-1!=c[1].indexOf("{")&&(c=JSON.parse(c[1]))&&(e.OwnerID=c.OwnerID)}c=a.split("/")[1];this.nametites=a.split("\\\\");a=a.split("/")[0].split("\\");for(var f=[],h=0;h<a.length;h++)""!==a[h]&&"#0"!==a[h]&&f.push(a[h]);this.nameList=a=f;c=(c=c?Number(c):void 0)||b||"#ffffff";c="number"===typeof c?Get2RGB(c):c;switch(e.type){case 1:this.updateMon(a,c);break;case 2:this.updateNpc(a,c,e);break;case 3:this.updateRole(a,c,e)}}}else this.noNameClickAreaHandle(e)};c.prototype.noNameClickAreaHandle=function(a){a&&(a.npcClickAreaData=[],a=a.npcClickAreaData,a[0]=-5,a[1]=-10,a[2]=60,a[3]=60)};c.prototype.createTitle=function(a){a.txt_Img=new Laya.Text;a.txt_Img.y=-25;a.txt_Img.align="center";a.txt_Img.zOrder=999993;a.txt_Img.fontSize=14;a.txt_Img.stroke=g_strokewidth;a.txt_Img.strokeColor="#000000";var b=GameUtil.InstanceOfMem(GameSceneUI).maplayer;b&&b.addChild(a.txt_Img)};c.prototype.updateRole=function(a,b,e){var c="",f=0;if(0<a.length)if(1==a.length)c+=a[0],f=a[0].length;else{for(var h=0;h<a.length;h++)f<a[h].length&&(f=a[h].length),0!=h&&(c+=a[h]+"\n");c+=a[0]}if(a[0]&&-1!=a[0].indexOf("\\")){var l=a[0].split("\\");this.text=l[0];l.shift()}else this.text=c;this.color=b;this.y=-25;this.width=(f+1)*this.fontSize;this.height=a.length*this.fontSize;this.pivotX=-25+this.width/2;this.typeset();1<a.length&&(e.txt_Img||this.createTitle(e),a.shift(),e.txt_Img.width=0,e.txt_Img.text=l?l.concat(a).join("\n"):a.join("\n"),e.txt_Img.color=b,e.txt_Img.width+=2,e.txt_Img.pivotX=-25+e.txt_Img.width/2);this.visible=GlobalCfglist.nameshow3;!0===GlobalCfglist.nameshow3&&!0===GlobalCfglist.ShowName&&0==e.is_halo&&(a=c.split("\n"),this.text=a[a.length-1]);e.txt_Img&&(e.txt_Img.visible=!0===GlobalCfglist.nameshow3&&!1===GlobalCfglist.ShowName,e.txt_Img.visible&&(this.y+=e.txt_Img.height))};c.prototype.updateNpc=function(a,b,e){a.reverse();this.width=0;var c="";a[1]&&(c+=a[1]+"\n");a[0]&&(c+=a[0]+"\n");a[2]&&(c+=a[2]+"\n");this.text=c;this.width+=2;this.pivotX=-25+this.width/2;this.color=b;this.visible=GlobalCfglist.nameshow2;this.npcClickHandle(e)};c.prototype.npcClickHandle=function(a){a&&(this.drawNpcClickArea(a),this.setNpcClickAreaData(a))};c.prototype.drawNpcClickArea=function(a){(a=a.npcClickSp)&&a.graphics.drawRect(this.x-this.pivotX,this.y-30,this.width,this.height+40,null,16777215,1)};c.prototype.setNpcClickAreaData=function(a){if(a=a.npcClickAreaData)a[0]=0,a[1]=-30,a[2]=this.width,a[3]=this.height+40};c.prototype.updateMon=function(a,b){if(a[0])var e=-1!==a[0].indexOf(")");a.reverse();this.width=0;this.text=a.join("\n");this.width=this.fontSize*(this.text.length+1);this.pivotX=-25+this.width/2;this.color=b;this.visible=e?GlobalCfglist.nameshow4:GlobalCfglist.nameshow1};c.prototype.setOffsetPos=function(a,b){this.x=a;this.y=b-25};return c}(Laya.Text),object=function(b){function c(){c.__super.call(this);this.init()}Laya["class"](c,"object",Laya.Sprite);b=c.prototype;b.addNpcClickAreaSprite=function(){this.npcClickSp=new Laya.Sprite;this.addChild(this.npcClickSp)};b.init=function(){this.on(Laya.Event.REMOVED,this,this.onRemovedEvent);this.npcClickAreaData=[];this.m_Abil=[];this.type=0;this.data=null;this.cur_frames=[];this.cur_frame_index=0;this.frame_sprits=[];this.click_sp=null;this.bind_list=[];this.is_loop=!1;this.call_str="";this.cur_state=0;this.skin_feature=this.cur_dis=null;this.nameString="";this.is_born=this.is_die=!1;this.obj_hores=null;this.is_halo=!1;this.grid=new Laya.Point;this.sp=new Laya.Sprite;this.dobule_sp=new Laya.Sprite;this.selfname=new Laya.Sprite;this.sp.zOrder=1;this.addChild(this.sp);this.dobule_sp.zOrder=1;this.addChild(this.dobule_sp);this.chat_txt=null;this.havePoison=0;this.use_hores=this.digfragment=this.is_remove=this.reverseani=!1;this.moveshift=new Laya.Point(48,32);this.msg_list=[];this.play_time=0;this.target_pos=new Laya.Point;this.is_springback=this.is_backstep=!1;this.mouseThrough=!0;this.sp.mouseThrough=!0;this.next_name=null;this.boMagicShield=!1;this.hair_frames=[];this.weapon_frames=[];this.shield_frames=[];this.hores_frames=[];this.wing_frames=[];this.wapeff_frames=[];this.shdeff_frames=[];this.subsp_frames=[];this.sub_file=null;this.action_over=!0;this.ddl_state=0;this.paralysis_state=!1;this.color_num=0;this.fl_name=null;this.off=new Laya.Point;this.guildName="";this.is_use_offest=!0;this.BindGameGold=this.BindGold=0;this.cur_dir=null;this.use_dobule_sp=!1;this.sub_index=0;this.is_moveing=this.res_lock=!1;this.obj_wing=new Laya.Sprite;this.addChild(this.obj_wing);this.super_time=!1;this.res_config_list=[];this.skillsp=this.attsp=this.movesd=this.die_msg=this.play_count=this.trans_count=0;this.is_call=!0;this.lastMoveTarget=null;this.invisable=!1;this.lastBtHair;this.OwnerID=this.lastState=0};b.initdata=function(a,b){this.type=b;this.data=a;this.obj_frames=[];this.ftime=0;1==b||2==b||3==b?(this.grid.x=a.param,this.grid.y=a.tag,this.pos(48*a.param,32*a.tag),this.initobjname(a.str),ObjectManage.updateObjectHp(1,1,a.record)):(this.pos(0,0),this.zOrder=99998);if("\u3000/255"==a.str)4==b;else if(""!=a.str){var e=Laya.loader.getRes("gameres/png/yingzi.png");e&&this.sp.graphics.drawTexture(e)}this.type=b;3==this.type&&(e=new Laya.Rectangle(-10,-60,70,90),this.sp.setBounds(e));2==this.type&&g_newTaskNpcIcon&&GameMission.SetNewTaskNpcIcon(this,g_newTaskNpcIcon);this.updateAlpha()};b.initobjname=function(a){this.txt_name=new Name(this,a);GameUtil.addChildToGameSceneMapLayer(this.txt_name);this.changename(a)};b.isMyRole=function(){return this.data&&this.data.record==playerID};b.changename=function(a,b){this.txt_name||(this.txt_name=new Name(this,a),GameUtil.addChildToGameSceneMapLayer(this.txt_name));this.txt_name.update(a,b,this)};b.showChatTxt=function(a){this.chat_txt||(this.chat_txt=new ChatBox,this.addChild(this.chat_txt));this.chat_txt.showMsg(a)};b.updateObjectBlood=function(a,b,e,c,f,h){null==this.Blood||void 0==this.Blood?(this.Blood=new CBlood(a,b,e,c,f,h,this),GameUtil.addChildToGameSceneMapLayer(this.Blood)):(this.Blood.SetCurBloodNum(b,c,f),this.data.record==lockingID&&Laya.stage.event("updateTargetHp",[b,a,h]));this.is_die?(this.setObjectNameVisible(!1),this.Blood&&(this.Blood.visible=!1,this.Blood.setBloodVisible(!1))):(this.Blood&&(this.Blood.visible=G_SHOW_ROLE_HP,this.Blood.setBloodVisible(G_SHOW_ROLE_HP)),this.type==E_OBJECTTYPE.MONSTER&&0==GlobalCfglist.nameshow1||this.setObjectNameVisible(G_SHOW_ROLE_HP))};b.visibleObjectBlood=function(a){this.Blood&&(this.is_die?(this.Blood.visible=!1,this.setObjectNameVisible(!1),this.Blood.setBloodVisible(!1)):(this.Blood.visible=a,this.setObjectNameVisible(a),this.Blood.setBloodVisible(a)))};b.setObjectNameVisible=function(a){this.txt_Img&&(this.txt_Img.visible=a&&GlobalCfglist.nameshow3);this.txt_name&&(this.txt_name.visible=a&&GlobalCfglist.nameshow3)};b.changeskin=function(a,b,e,c,f){a&&0<a.length&&(a=a[this.cur_frame_index])&&(f&&!this.is91to100Npc()&&(this.sp.graphics.clear(),this.dobule_sp.graphics.clear()),this.createframeobj(a,b,e,c))};b.is91to100Npc=function(){return 2==this.type&&this.skin_feature&&50==this.skin_feature.wRaceImg&&91<=this.skin_feature.wAppr&&100>=this.skin_feature.wAppr};b.updateselfskin=function(a){this.is_moveing&&a&&this.updateselfpos();5==this.cur_dir||6==this.cur_dir||7==this.cur_dir||0==this.cur_dir?(this.weapon_frames&&0<this.weapon_frames.length?(this.changeskin(this.weapon_frames,this.weapon_file,5,this.sp,!0),this.changeskin(this.wapeff_frames,this.wapeff_file,8,this.sp),this.changeskin(this.obj_frames,this.file,this.type,this.sp)):this.changeskin(this.obj_frames,this.file,this.type,this.sp,!0),this.shield_frames&&0<this.shield_frames.length&&(this.changeskin(this.shield_frames,this.shield_file,11,this.sp),this.changeskin(this.shdeff_frames,this.shdeff_file,12,this.sp))):(this.shield_frames&&0<this.shield_frames.length?(this.changeskin(this.shield_frames,this.shield_file,11,this.sp,!0),this.changeskin(this.shdeff_frames,this.shdeff_file,12,this.sp),this.changeskin(this.obj_frames,this.file,this.type,this.sp)):this.changeskin(this.obj_frames,this.file,this.type,this.sp,!0),this.changeskin(this.weapon_frames,this.weapon_file,5,this.sp),this.changeskin(this.wapeff_frames,this.wapeff_file,8,this.sp));this.changeskin(this.wing_frames,this.wing_file,7,this.sp);this.changeskin(this.hair_frames,this.hair_file,4,this.sp);this.changeskin(this.hores_frames,this.hores_file,6,this.sp);this.dobuleSkinbymon(this.file,this.type);this.cur_frame_index++;if(this.isMyRole()&&(this.cur_frame_index>=this.obj_frames.length||1==this.cur_state||6==this.cur_state)){0<this.msg_list.length&&this.playorder();a=!1;if(Objectcontrol.use_skill)a=Objectcontrol.useskill(activate_skilluse,activate_skilltype,activate_skillpos);else if(Objectcontrol.use_attack||chaseing||attackerID)a=Objectcontrol.fight();a||(moveing||null!=Movemodule.end_point?Movemodule.moveing(this.grid):autohookstate?AutoHookmodule.autoflow():autopickstate&&(autopickstate=AutoHookmodule.getMapItem(5,!1)));this.is_die||this.ddl_state||(this.action_over=!0)}this.updateframe(this.obj_frames);this.setPosOfObjectNameAndBlood();this.updateAlpha()};b.setPosOfObjectNameAndBlood=function(){this.Blood&&(this.Blood.setOffsetPos(this.x,this.y),this.Blood.updateBloodPos());this.txt_name&&this.txt_name.setOffsetPos(this.x,this.y)};b.playorder=function(){if(0<this.msg_list.length){var a=this.msg_list[0],b=this.msg_list[1],e=this.msg_list[2];a&&b&&e&&(a.msg.ident==SM_HEALTHSPELLCHANGED||a.msg.ident==SM_STRUCK||a.msg.ident==SM_HIT)?(a.msg.ident==b.msg.ident&&this.msg_list.splice(0,1),b.msg.ident==e.msg.ident&&this.msg_list.splice(0,1)):4!=this.cur_state&&10<this.msg_list.length&&6!=a.msg.ident?this.super_time=!0:this.super_time=!1;a=this.msg_list[0];Gamemessage.onhandlmsg(a.msg,a.bodystr);this.msg_list.splice(0,1)}};b.getstep=function(){var a=0;1==this.type?9==this.cur_state?a=2:a=1:3==this.type&&(2==this.cur_state||4==this.cur_state||15==this.cur_state?a=1:3==this.cur_state&&this.obj_hores?a=3:3==this.cur_state&&(a=2));return a};b.updateselfpos=function(a){if(0<this.obj_frames.length&&this.cur_frame_index<this.obj_frames.length){var b=this.getstep();if(0<b){this.data.record==playerID&&(1==this.cur_frame_index?2==b?GameUtil.PlayMusicFormat(S_ROLE_WALK):GameUtil.PlayMusicFormat(S_ROLE_RUN):4==this.cur_frame_index&&(2==b?GameUtil.PlayMusicFormat(S_ROLE_WALK2):GameUtil.PlayMusicFormat(S_ROLE_RUN2)));var e=this.cur_dir;this.is_backstep&&(e=GameUtil.reverse8dis(this.cur_dir),this.cur_frame_index++);var c=this.cur_frame_index+1;if(!GlobalCfglist.smooth){var f=GameUtil.moveshift(e,b,c,this.obj_frames.length,this.grid.x,this.grid.y),b=GameUtil.movestep(e,this.grid,f,b);b.x&&(this.x=b.x);b.y&&(this.y=b.y);this.selfname.x=this.x;this.selfname.y=this.y;this.data.record==playerID&&Mapmodule.root&&(b.x&&(Mapmodule.root.x=-(b.x*Mapmodule.root.scaleX-browser_width/2)-20),b.y&&(Mapmodule.root.y=-(b.y*Mapmodule.root.scaleY-browser_height/2+20)))}if(c>this.obj_frames.length-1||a)this.trans_count=this.play_count=0,this.action_over=!0,this.is_backstep=!1,use_move_start||(this.is_moveing=!1),this.is_springback=!1,this.grid.x=this.target_pos.x,this.grid.y=this.target_pos.y,this.data.record==playerID&&((new Date).getTime(),Mapmodule.drawmap(this.grid.x,this.grid.y),Mapmodule.drawmask(this.grid.x,this.grid.y),autohookstate&&AutoHookmodule.autoflow(),Laya.stage.event("updatepos"))}}};b.createframeobj=function(a,b,e,c){var f=!1;0==b.indexOf("graphics/")&&(f=!0);f=GameUtil.getresfilename(this,e,b,f)+a;if(f=GameUtil.getImageSetNameByPath(f)){var h,l;h=f.replace(".atlas","/"+a+".png");(l=Laya.loader.getRes(h))?this.getobjPlacements(a,h,b,e,c,l,f):this.specialHandleOfWall(f,c,e,b,a,h)}};b.specialHandleOfWall=function(a,b,e,c,f,h){if(1==this.type){var l=TMonFeature(this.data.fea.buffer);if(l.wRaceImg=901==l.wAppr||902==l.wAppr||903==l.wAppr){var m=this;Laya.loader.load(a,Laya.Handler.create(this,function(l){m.getobjPlacements(f,h,c,e,b,Laya.loader.getRes(h),a)}),null,Laya.Loader.ATLAS)}}};b.getobjPlacements=function(a,b,e,c,f,h,l){l=Offsetmodule.getoffsetfromatlas(l,a);if(h&&l&&h.bitmap&&!h.bitmap._recreateLock){if(1==c||2==c||3==c)this.fl_name=b,this.off=l,f.height=h.height;if(6==c&&this.obj_hores&&null!=f._style)this.obj_hores.graphics.clear(),this.obj_hores.graphics.drawTexture(h,l.x,l.y),this.obj_hores.zOrder=f.zOrder;else if(7==c&&this.obj_wing&&null!=f._style)this.obj_wing.graphics.clear(),this.obj_wing.graphics.drawTexture(h,l.x,l.y),this.obj_wing.blendMode="overlay",this.obj_wing.zOrder=f.zOrder+1;else if(8==c&&this.obj_wapeff&&null!=f._style)this.obj_wapeff.graphics.clear(),this.obj_wapeff.graphics.drawTexture(h,l.x,l.y),this.obj_wapeff.blendMode="overlay",this.obj_wapeff.zOrder=f.zOrder+1;else{a=parseInt(a);1==this.type&&null!=f._style&&"mon4"==e&&(2860<=a&&2869>=a?f.blendMode="overlay":f.blendMode="normal");this.setblendmode(e,a);if(-1!=e.indexOf("hum")||1==this.type||2==this.type)this.height=l.y;this.width=h.width+l.x;this.is_use_offest?f.graphics.drawTexture(h,l.x,l.y):f.graphics.drawTexture(h)}}};b.setblendmode=function(a,b){if(this.skin_feature&&0!=this.skin_feature.wAppr&&50==this.skin_feature.wRaceImg){var e=this.skin_feature.wAppr;null==this.sp._style||83!=e&&84!=e&&85!=e&&86!=e&&87!=e||(this.sp.blendMode="overlay")}this.use_dobule_sp&&null!=this.dobule_sp._style&&(this.dobule_sp.blendMode="overlay");1==g_sprite_force_blend&&1==GameUtil.IfOpenBlend(void 0===a?"":a,void 0===b?-1:b)&&(this.sp.blendMode="overlay")};b.findframeobj=function(a){for(var b=null,e=0;e<this.frame_sprits.length;++e)this.frame_sprits[e].visible=!1,a==this.frame_sprits[e].name&&(b=this.frame_sprits[e]);return b};b.updateframe=function(a){if(this.cur_frame_index>=a.length)if(this.is_born&&(this.is_born=!1,this.changestate(null,1,null,!0)),0<this.msg_list.length)this.playorder();else{this.is_loop&&(this.cur_frame_index=0);if(this.call_str)Laya.stage.event(this.call_str,[this]),this.call_str=null;else if(!(this.is_die||this.ddl_state||this.isMyRole()&&use_move_start||moveing)){var b=this;setTimeout(function(){b.is_moveing||b.changestate(null,1,b.cur_dir,!0)},80)}this.is_remove&&(ObjectManage.del2object(this),this.clearstart())}};b.changestate=function(a,b,e,c,f,h,l){null!=b&&null!=e&&(this.cur_frame_index=0);this.is_moveing=1==this.type&&(2==b||9==b)||3==this.type&&(2==b||3==b||4==b);b==this.cur_state&&e==this.cur_dir&&0<this.obj_frames.length||(this.is_born||this.ddl_state)&&!this.is_die||(this.is_moveing&&(this.trans_count=0),this.updateskin(a,e,b,c,f),this.resetTargetDisOnNoMoveState(),h&&(Laya.stage.event(f,[this]),this.call_str=null),l&&(a=1==l?a=this.obj_frames[this.obj_frames.length-1]:a=this.obj_frames[0],this.obj_frames=[],this.obj_frames.push(a)))};b.resetTargetDisOnNoMoveState=function(){otherPlayerCatch&&this.data.record==playerID&&2!=this.cur_state&&3!=this.cur_state&&(otherPlayerCatch=!1,disAfterTargetMoved=0);attackerID||this.otherPlayerCatch||(disAfterTargetMoved=0);this.data.record==attackerID&&2!=this.cur_state&&3!=this.cur_state&&(disAfterTargetMoved=0)};b.syndata=function(a){for(var b in a)a.hasOwnProperty(b)&&(this.data[b]=a[b])};b.updateskin=function(a,b,e,c,f){null!=a&&this.syndata(a);null!=b&&(this.cur_dir=b);null!=e&&(this.cur_state!==e&&(this.lastState=this.cur_state),this.cur_state=e);null!=c&&(this.is_loop=c);this.call_str=f;null==this.cur_state&&(this.cur_state=1);null==this.cur_dir&&(this.cur_dir=0);if(this.data){switch(this.type){case E_OBJECTTYPE.MONSTER:this.updateSkinbymon();break;case E_OBJECTTYPE.NPC:this.updateSkinbymon();break;case E_OBJECTTYPE.PLAYER:this.updateSkinbyplayer()}3==this.type&&(this.updateSkinByHair(),this.updateskinbyweapon(),this.updateskinbyshield(),this.updateskinbyhores(),this.updateskinbywing(),this.updateskinbywapeff(),this.updateskinbyshdeff(),this.updateskinIcon())}this.reverseani&&this.obj_frames.reverse()};b.updateskinIcon=function(){this.skin_feature=THumFeature(this.data.fea.buffer);-1===this.skin_feature.nIcon?this.title&&(this.title.visible=!1):(this.title||(this.title=new Title,this.addChild(this.title)),this.title.update(this))};b.updateskinbywing=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(50!=this.skin_feature.wDressEffType||!g_ClientConfig||GlobalCfglist.humsimple&&0!=g_ClientConfig.boClothesSimple||g_ClientConfig.boHideHumEffect)if(!(0<this.skin_feature.wDressEffType&&g_ClientConfig)||GlobalCfglist.humsimple&&0!=g_ClientConfig.boClothesSimple||g_ClientConfig.boHideHumEffect){if(a=this.getChildByName("HumBodyEffect"))b=ObjectManage.object_list.indexOf(a),-1!=b&&ObjectManage.object_list.splice(b,1),a.removeSelf(),Animationmodule.removeAni(a)}else{a=GameUtil.rulebywing(this.skin_feature.wDressEffType,this.skin_feature.btGender,this.cur_state,this.cur_dir);this.ftime=a.ftime;this.wing_file=a.file;this.wing_frames=a.frames;a=this.cur_dir+"_"+this.skin_feature.wDressEffType+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_6";this.loadallatlas(a,this.wing_frames,this.wing_file);var a=this.getChildByName("HumBodyEffect");if(a){var b=ObjectManage.object_list.indexOf(a);-1!=b&&ObjectManage.object_list.splice(b,1);a.removeSelf();Animationmodule.removeAni(a)}}else GameUtil.HumBodyEffect(this);(a=GameUtil.DreesEffect(this.skin_feature.nDressEffectIndex,this.skin_feature.wDressEffectOffSet,this.skin_feature.btGender,this.cur_state,this.cur_dir))&&!this.obj_hores&&(!GlobalCfglist.humsimple||g_ClientConfig&&0==g_ClientConfig.boClothesSimple)?(this.ftime=a.ftime,this.wing_file=a.file,this.wing_frames=a.frames,a=this.cur_dir+"_"+this.skin_feature.nDressEffectIndex+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_10_"+this.skin_feature.wDressEffectOffSet+"_"+this.cur_dir,this.loadallatlas(a,this.wing_frames,this.wing_file)):0<this.wing_frames.length&&(0>=this.skin_feature.wDressEffType||g_ClientConfig&&GlobalCfglist.humsimple&&1==g_ClientConfig.boClothesSimple)&&(this.wing_frames=[],this.obj_wing&&this.obj_wing.graphics.clear())};b.updateskinbyshdeff=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(0<this.skin_feature.nShieldEffectIndex&&65535!=this.skin_feature.nShieldEffectIndex&&(!GlobalCfglist.weaponsimple||g_ClientConfig&&0==g_ClientConfig.boWeaponSimple)){var a=GameUtil.rulebyShieldEffect(this.skin_feature.nShieldEffectIndex,this.skin_feature.wShieldEffectOffSet,this.skin_feature.btGender,this.cur_state,this.cur_dir);a&&(this.ftime=a.ftime,this.shdeff_file=a.file,this.shdeff_frames=a.frames,this.loadallatlas(this.cur_dir+"_"+this.skin_feature.nShieldEffectIndex+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_12_"+this.skin_feature.wShieldEffectOffSet,this.shdeff_frames,this.shdeff_file),null==this.obj_shdeff&&(this.obj_shdeff=new Laya.Sprite,this.obj_shdeff.visible=!GlobalCfglist.hidePlayer,this.addChild(this.obj_shdeff)))}else this.shdeff_frames=[],this.obj_shdeff&&(this.obj_shdeff.graphics.clear(),this.obj_shdeff.removeSelf(),this.obj_shdeff=null)};b.updateskinbywapeff=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(!(0<this.skin_feature.nWeaponEffectIndex&&65535!=this.skin_feature.nWeaponEffectIndex&&g_ClientConfig)||GlobalCfglist.weaponsimple&&0!=g_ClientConfig.boWeaponSimple||g_ClientConfig.boHideWeaponEffect)this.wapeff_frames=[],this.obj_wapeff&&(this.obj_wapeff.graphics.clear(),this.obj_wapeff.removeSelf(),this.obj_wapeff=null);else{var a=GameUtil.rulebyweaponeeffect(this.skin_feature.nWeaponEffectIndex,this.skin_feature.wWeaponEffectOffSet,this.skin_feature.btGender,this.cur_state,this.cur_dir);a&&(this.ftime=a.ftime,this.wapeff_file=a.file,this.wapeff_frames=a.frames,this.loadallatlas(this.cur_dir+"_"+this.skin_feature.wWeaponEffectOffSet+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_8_"+this.skin_feature.nWeaponEffectIndex,this.wapeff_frames,this.wapeff_file),null==this.obj_wapeff&&(this.obj_wapeff=new Laya.Sprite,this.obj_wapeff.visible=!GlobalCfglist.hidePlayer,this.addChild(this.obj_wapeff)))}};b.dobuleSkinbymon=function(a,b){if(this.skin_feature){var e=this.skin_feature.wAppr;50==this.skin_feature.wRaceImg&&0<this.subsp_frames.length&&this.sub_file&&0==this.checkNpcDiy(e)&&(this.use_dobule_sp=!0,e=this.sub_index>=this.subsp_frames.length?e=this.subsp_frames[this.sub_index=0]:e=this.subsp_frames[this.sub_index++],this.sub_file&&(a=this.sub_file,b=13),this.createframeobj(e,a,b,this.dobule_sp))}};b.checkNpcDiy=function(a){return 2E4<=a&&21E3>=a?!0:!1};b.updateSkinbymon=function(){this.skin_feature=TMonFeature(this.data.fea.buffer);var a=g_ClientConfig&&null==g_ClientConfig.boMonSimple?0:g_ClientConfig.boMonSimple;g_ClientConfig&&1==this.type&&1==a&&GlobalCfglist.monsimple&&(this.skin_feature.wAppr=g_ClientConfig.nMonAppr);null==this.cur_dir&&(this.cur_dir=0);a=this.skin_feature.wRaceImg+"_"+this.skin_feature.wAppr+"_"+this.cur_state+"_"+this.cur_dir;this.is91to100Npc()&&(this.cur_state=1,this.cur_dir=0);if(null==this.res_config_list[a]){if(999!=this.skin_feature.wAppr){var b=GameUtil.rulebymon(this.skin_feature.wRaceImg,this.skin_feature.wAppr,this.cur_state,this.cur_dir,this.data.series);0!=b.frames.length&&(this.file=b.file,this.obj_frames=b.frames,this.subsp_frames=b.sub_frames,this.sub_file=b.sub_file,this.ftime=b.ftime,this.res_config_list[a]={file:b.file,frames:b.frames,sub_frames:b.sub_frames,ftime:b.ftime});this.loadallatlas(this.cur_dir+"_"+this.skin_feature.wRaceImg+"_"+this.skin_feature.wAppr+"_"+this.cur_state+"_1_"+this.data.series,this.obj_frames,this.file);(a=this.cur_dir+"_"+this.skin_feature.wRaceImg+"_"+this.skin_feature.wAppr+"_"+this.cur_state+"_2_"+this.data.series)&&this.sub_file&&this.loadallatlas(a,this.subsp_frames,this.sub_file)}}else this.file=this.res_config_list[a].file,this.obj_frames=this.res_config_list[a].frames,this.subsp_frames=this.res_config_list[a].sub_frames,this.ftime=this.res_config_list[a].ftime};b.updateSkinbyplayer=function(){this.skin_feature=THumFeature(this.data.fea.buffer);var a=g_ClientConfig&&null==g_ClientConfig.boClothesSimple?0:g_ClientConfig.boClothesSimple;if(g_ClientConfig&&1==a&&GlobalCfglist.humsimple&&1==g_ClientConfig.boClothesSimple&&0!=this.skin_feature.wDress){var a=THumFeature(this.data.fea.buffer).btJob,b=this.skin_feature.btGender;switch(a){case 0:this.skin_feature.wDress=2*g_ClientConfig.nClothesZ+b;break;case 1:this.skin_feature.wDress=2*g_ClientConfig.nClothesF+b;break;case 2:this.skin_feature.wDress=2*g_ClientConfig.nClothesD+b}}if(0<this.skin_feature.btHorseType)a=GameUtil.rulebydressforhores(this.skin_feature.wDress,0,this.cur_state,this.cur_dir),this.ftime=a.ftime,this.file=a.file,this.obj_frames=a.frames,this.use_hores=!0,a=this.cur_dir+"_"+this.skin_feature.wDress+"_0_"+this.cur_state+"_3",this.loadallatlas(a,this.obj_frames,this.file);else if(a=GameUtil.rulebydress(this.skin_feature.wDress,0,this.cur_state,this.cur_dir),this.ftime=a.ftime,this.obj_frames=a.frames,this.use_hores=!1,this.file=a.file,this.yf_xid=a.xid,a=this.cur_dir+"_"+this.skin_feature.wDress+"_0_"+this.cur_state+"_2",this.loadallatlas(a,this.obj_frames,this.file),6==this.cur_state)for(a=0;5>a;a++)this.obj_frames.push("")};b.updateskinbyhores=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(0<this.skin_feature.btHorseType){var a=GameUtil.rulebyhores(this.skin_feature.btHorseType,0,this.cur_state,this.cur_dir);this.hores_file=a.file;this.hores_frames=a.frames;null==this.obj_hores&&(this.obj_hores=new Laya.Sprite,this.obj_hores.visible=!GlobalCfglist.hidePlayer,this.addChild(this.obj_hores));this.loadallatlas(this.cur_dir+"_"+this.skin_feature.btHorseType+"_0_"+this.cur_state+"_4",this.hores_frames,this.hores_file)}else this.hores_file=null,this.hores_frames=[],this.obj_hores&&(this.obj_hores.graphics.clear(),this.obj_hores.removeSelf(),this.obj_hores=null)};b.updateSkinByHair=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(255!=this.skin_feature.btHat){var a=GameUtil.rulebyhat(this.skin_feature.btGender,this.skin_feature.btHat,this.cur_state,this.cur_dir);this.hair_frames=a.frames;this.hair_file=a.file;a=this.cur_dir+"_"+this.skin_feature.btGender+"_"+this.skin_feature.btHat+"_"+this.cur_state+"_5"}else this.use_hores=0<this.skin_feature.btHorseType,a=GameUtil.rulebyhair(this.skin_feature.btHair,this.skin_feature.btGender,this.skin_feature.btHorseType,this.cur_state,this.cur_dir),this.hair_frames=a.frames,this.hair_file=a.file,a=this.cur_dir+"_"+this.skin_feature.btGender+"_"+this.skin_feature.btHorseType+"_"+this.cur_state+"_9_"+this.skin_feature.btHair;this.loadallatlas(a,this.hair_frames,this.hair_file);this.updateNeiGuanHairOnChangeHairstyle(this.skin_feature.btGender,this.skin_feature.btHair);this.lastBtHair=this.skin_feature.btHair};b.updateNeiGuanHairOnChangeHairstyle=function(a,b){this.hasChangeHairStyle(b)&&Laya.stage.event("updateNeiGuanHair",[b,a])};b.hasChangeHairStyle=function(a){return void 0!=this.lastBtHair&&this.lastBtHair!=a};b.updateskinbyshield=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(0<this.skin_feature.btHorseType||0==this.skin_feature.wShield||1==this.skin_feature.wShield)this.shield_frames=null;else if(!GlobalCfglist.weaponsimple||g_ClientConfig&&0==g_ClientConfig.boWeaponSimple){var a=GameUtil.rulebyShield(this.skin_feature.wShield,this.skin_feature.btGender,this.cur_state,this.cur_dir);this.shield_frames=a.frames;this.shield_file=a.file;this.loadallatlas(this.cur_dir+"_"+this.skin_feature.wShield+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_11",this.shield_frames,this.shield_file)}};b.updateskinbyweapon=function(){this.skin_feature=THumFeature(this.data.fea.buffer);if(g_ClientConfig&&1==g_ClientConfig.boWeaponSimple&&GlobalCfglist.weaponsimple&&0!=this.skin_feature.wWeapon)switch(THumFeature(this.data.fea.buffer).btJob){case 0:this.skin_feature.wWeapon=2*g_ClientConfig.nWeaponZ;break;case 1:this.skin_feature.wWeapon=2*g_ClientConfig.nWeaponF;break;case 2:this.skin_feature.wWeapon=2*g_ClientConfig.nWeaponD}if(0<this.skin_feature.btHorseType||0==this.skin_feature.wWeapon||1==this.skin_feature.wWeapon)this.weapon_frames=null;else{var a=GameUtil.rulebyWeapon(this.skin_feature.wWeapon,this.skin_feature.btGender,this.cur_state,this.cur_dir);this.weapon_frames=a.frames;this.weapon_file=a.file;this.loadallatlas(this.cur_dir+"_"+this.skin_feature.wWeapon+"_"+this.skin_feature.btGender+"_"+this.cur_state+"_7",this.weapon_frames,this.weapon_file)}};b.banding=function(a){this.bind_list.push(a)};b.setbodycolor=function(a){var b=null;switch(a){case 1:a=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0];a=new Laya.ColorFilter(a);b=[a];this.havePoison=1;break;case 2:a=[0,0,0,0,0,.5,0,0,0,0,0,0,0,0,0,0,0,0,1,0];a=new Laya.ColorFilter(a);b=[a];this.havePoison=2;break;case 3:a=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0];a=new Laya.ColorFilter(a);b=[a];break;case 4:a=[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0];a=new Laya.ColorFilter(a);b=[a];break;case 5:a=[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0];a=new Laya.ColorFilter(a);b=[a];break;case 6:a=[0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0],a=new Laya.ColorFilter(a),b=[a]}GameUtil.intervalFrameDeal(32,this,function(){this.sp.filters=b}.bind(this))};b.stallssetting=function(a){a?this.openstalls():this.closestalls()};b.openstalls=function(){var a=this.sp.getChildByName("stalls");null==a&&(a=new Laya.Image("gameres/png/00065.png"),a.name="stalls",a.pos(-15,-70),this.sp.addChild(a),this.data.record==playerID&&(player_stalls=Actionlock=!0))};b.closestalls=function(){this.sp.removeChildByName("stalls");this.sp.removeChildByName("stallstxt");this.data.record==playerID&&(Actionlock=player_stalls=!1)};b.stallsname=function(a){var b=this.sp.getChildByName("stallstxt");null==b?(b=new Laya.Text,b.color="#cd950c",b.fontSize=16,b.strokeColor="#000000",b.stroke=2,b.name="stallstxt",b.text=a,b.align="center",b.pos(25-b.width/2,-105),this.sp.addChild(b)):b.text=a};b.addclearlist=function(a,b){g_res_clearlist.push({name:a,res:b})};b.clearRes=function(){for(var a=0;a<g_res_clearlist.length;++a)g_res_clearlist[a]&&(ObjectManage.resloadlist[g_res_clearlist[a].name]=null,GameUtil.clearResByUrl(g_res_clearlist[a].res));g_res_clearlist=[]};b.clearstart=function(a){if(a=this.getChildByName("HumBodyEffect")){var b=ObjectManage.object_list.indexOf(a);-1!=b&&ObjectManage.object_list.splice(b,1);a.removeSelf();Animationmodule.removeAni(a)}};b.clearObjectName=function(){this.txt_Img&&(this.txt_Img.removeSelf(),this.txt_Img=null);this.txt_name&&(this.txt_name.removeSelf(),this.txt_name=null)};b.clearObjectBlood=function(){this.Blood&&(this.Blood.removeBlood(),this.Blood.removeSelf(),this.Blood=null)};b.loadallatlas=function(a,b,e){if(null==ObjectManage.resloadlist[a])for(var c=0;c<b.length;c++){var f="data/"+e+"/"+b[c];e&&0==e.indexOf("graphics/")&&(f=e+"/"+b[c]);f=GameUtil.getImageSetNameByPath(f);null!=f&&""!=f&&(this.addclearlist(a,f),Laya.loader.load(f,null,null,Laya.Loader.ATLAS),ObjectManage.resloadlist[a]=a)}};b.setInvisable=function(a){this.invisable!=a&&(this.invisable=a)};b.updateAlpha=function(){this.alpha=2==Mapmodule.getFlagByGridPos(this.grid)||this.invisable?.7:1};b.onRemovedEvent=function(){Laya.stage.off(Laya.Event.REMOVED,this,this.onRemovedEvent);this.clearObjectName();this.clearObjectBlood()};return c}(Laya.Sprite),objectcontrol=function(){function b(){Laya.stage.on("RockerMoveStart",this,this.objectmove);Laya.stage.on("ClickNPC",this,this.clickNPC);Laya.stage.on("RockerMoveEnd",this,this.moveend);Laya.stage.on("MOVEOVER",this,this.moveover);Laya.stage.on("MSG_SEND_RESULT",this,this.sendresult);Laya.stage.on("MSG_MOVE_RESULT",this,this.moveresult);this.mapbox=this.self_obj=null;this.atttype=this.cur_dir=0;this.skillList=[];this.controltype=0;this.is_open_by=!1;this.is_open_cs=!0;this.is_open_lh=this.is_open_ly=this.is_open_zr=this.is_open_ktz=!1;this.obj_hook=0;this.canAcross=!1;this.path_index=0;this.path_list=[];this.open_findpath=this.find_over=!1;this.remedy_count=10;this.use_skill=this.use_attack=!1;this.show_npcdlg_pos=new Laya.Point(0,0);this.show_npcdlg_max_dis=9;this.move_call_result=!0;this.move_pos=new Laya.Point;this.lastSkillId=0}b.prototype.moveresult=function(b,a,d){var e=ObjectManage.findobject(b);e&&(e.grid.x=a,e.grid.y=d,e.pos(48*a,32*d),e.changestate(null,1,null,!0),b==playerID&&(this.mapbox.pos(-(48*a*Mapmodule.root.scaleX-browser_width/2),-(32*d*Mapmodule.root.scaleY-browser_height/2+20)),Laya.stage.event(Laya.Event.MOUSE_UP)))};b.prototype.springback=function(b,a){this.self_obj&&(this.self_obj.is_moveing=!1,this.self_obj.trans_count=0,this.self_obj.target_pos.x=b,this.self_obj.target_pos.y=a,this.self_obj.grid.x=b,this.self_obj.grid.y=a,ObjectManage.play_count=0,console.log("\u56de\u5f39--\x3e ",this.self_obj.target_pos.x,this.self_obj.target_pos.y,this.self_obj.cur_frame_index),this.path_index=1,this.self_obj.x=48*this.self_obj.target_pos.x,this.self_obj.y=32*this.self_obj.target_pos.y,this.mapbox.x=-(48*this.self_obj.target_pos.x*Mapmodule.root.scaleX-browser_width/2)-20,this.mapbox.y=-(32*this.self_obj.target_pos.y*Mapmodule.root.scaleY-browser_height/2+20),this.move_call_result=!0,Fightmodule.path_list=[],Laya.stage.event("movespringback"))};b.prototype.sendresult=function(b){switch(this.controltype){case 1:"+FAIL!"!=b&&"+GOOD!"==b&&(this.move_pos.x=this.self_obj.target_pos.x,this.move_pos.y=this.self_obj.target_pos.y,this.move_call_result=!0,g_boMagicGood=!1);break;case 2:"+FAIL!"==b?this.use_skill=!1:"+GOOD!"==b&&this.playskill();break;case 3:"+FAIL!"==b&&(chaseing=!1,attackerID=0,this.use_skill=this.use_attack=!1,this.self_obj.trans_count=0,ObjectManage.play_count=0,autohookstate&&(this.move_dir=GameUtil.reverse8dis(this.self_obj.cur_dir),this.contiunemove(this.move_dir,1)));break;case 5:if("\x3dDIG!"==b)this.self_obj.digfragment=!0;else if("+GOOD!"==b&&this.self_obj.digfragment){this.self_obj.digfragment=!1;var a=8*this.self_obj.cur_dir;if(a=Animationmodule.playframe(!0,Mapmodule.root,"data/Effect/",a,a+2,80,!1,!0))a.pos(48*this.self_obj.grid.x,32*this.self_obj.grid.y),a.zOrder=9}}"+PWR!"==b?(this.atttype=5,this.skillList.push(5)):"+WID!"==b?this.move_call_result=this.is_open_by=!0:"+UWID!"==b?(this.is_open_by=!1,this.move_call_result=!0):"+FIR!"==b?(this.atttype=24,this.controltype=3,this.skillList.push(24),this.move_call_result=!0):"+UFIR!"==b?(this.atttype=0,this.controltype=3,this.move_call_result=!0):"+LNG!"==b?this.move_call_result=this.is_open_cs=!0:"+ULNG!"==b?(this.is_open_cs=!1,this.move_call_result=!0):"+KTZ!"==b?(this.atttype=43,this.controltype=3,this.skillList.push(43),this.move_call_result=!0):"+UKTZ!"==b?(this.atttype=0,this.controltype=3,this.move_call_result=!0):"+SWO!"==b?(this.atttype=53,this.controltype=3,this.skillList.push(53),this.move_call_result=!0):"+USWO!"==b?(this.atttype=0,this.controltype=3,this.move_call_result=!0):"+TWN!"==b?(this.atttype=38,this.skillList.push(38),this.move_call_result=!0):"+UTWN!"==b&&(this.atttype=0,this.move_call_result=!0)};b.prototype.clickNPC=function(b,a,d){b.data&&b.data.record!=playerID&&(2!=b.type&&(b.is_die?(11==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&160==b.skin_feature.wAppr||11==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&161==b.skin_feature.wAppr||19==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&43==b.skin_feature.wAppr||19==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&70==b.skin_feature.wAppr||16==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&24==b.skin_feature.wAppr||52==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&39==b.skin_feature.wAppr||19==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&113==b.skin_feature.wAppr||52==b.skin_feature.wRaceImg&&0==b.skin_feature.wWeapon&&93==b.skin_feature.wAppr)&&!autohookstate&&GameUtil.addhalo(b):GameUtil.addhalo(b)),1==a?2==b.type?(GameApi.ShowNewNpcDlg(!1),Sendmessage.sendNPCClick(b.data.record),this.show_npcdlg_pos.x=b.grid.x,this.show_npcdlg_pos.y=b.grid.y,g_ChangerIndex=g_Changerpak=-1):3==b.type&&(ObjectManage.findobject(b.data.record).data.fea.buffer[13]&&b.txt_name&&Sendmessage.QuerySelectShopInfo(b.txt_name.text,b.data.record),b.boisZmu&&(a=ObjectManage.findobject(playerID))&&(a.boisZmu?Laya.stage.event("new_chat_msg",[{info:"\u5f00\u542f\u62db\u52df\u961f\u5458\u529f\u80fd\u540e\u65e0\u6cd5\u52a0\u5165\u5176\u4ed6\u961f\u4f0d!",front:255,bg:56,type:0}]):b.txt_name&&Sendmessage.SendAddZmu(b.txt_name.text,0))):2==a&&(3==b.type&&b.data.record!=playerID?Laya.stage.event("game_dlg_cmd",[{id:"show_roleMenu",name:b.txt_name?b.txt_name.text:"",record:b.data.record,x:b.x,y:b.y,click_x:d.stageX,click_y:d.stageY}]):1==b.type&&lockingID&&!Actionlock&&this.fight()))};b.prototype.bindobj=function(b,a,d,e){b&&(this.self_obj=b,this.mapbox=a,this.self_obj.pos(48*d,32*e),this.self_obj.grid.x=d,this.self_obj.grid.y=e)};b.prototype.updatepos=function(b,a){this.self_obj&&(this.self_obj.grid.x=b,this.self_obj.grid.y=a,this.self_obj.pos(48*b,32*a))};b.prototype.movecheck=function(b,a,d){return b.x==a.x&&b.y==a.y||2==d&&(1<Math.abs(b.x-a.x)||1<Math.abs(b.y-a.y))||3==d&&(2<Math.abs(b.x-a.x)||2<Math.abs(b.y-a.y))?!1:!0};b.prototype.executemove=function(b,a,d){if(0==d||!this.movecheck(b,this.self_obj.grid,d))return Movemodule.stopmove(),!1;var e=ObjectManage.has2obstacle(this.self_obj.grid,a,d);10<this.obj_hook&&!this.move_call_result&&(this.move_call_result=!0);if(!e&&this.move_call_result)return this.move_call_result=!1,this.obj_hook=0,this.move_dir=a,this.controltype=1,this.use_skill=this.use_attack=!1,this.self_obj.action_over=!1,this.self_obj.target_pos.x=b.x,this.self_obj.target_pos.y=b.y,4==d&&this.self_obj.obj_hores?this.self_obj.changestate(null,3,a,!1):this.self_obj.changestate(null,d,a,!1),Sendmessage.sendRoleMessage(2==d?CM_WALK:this.self_obj.obj_hores?CM_HORSERUN:CM_RUN,b.x,b.y,a),(0!=this.show_npcdlg_pos.x||0!=this.show_npcdlg_pos.y)&&this.show_npcdlg_pos.distance(this.self_obj.grid.x,this.self_obj.grid.y)>=this.show_npcdlg_max_dis&&(this.show_npcdlg_pos=new Laya.Point(0,0),GameApi.ShowNewNpcDlg(!1),Laya.stage.event("closestore"),b=GameUtil.InstanceOfMem(ScreenWUI),3!=b.InType&&4!=b.InType&&5!=b.InType||GameApi.ShowScreen(!1)),!0;e&&lockingID&&autohookstate?GameUtil.delhalo(lockingID):autohookstate&&1==this.self_obj.cur_state&&this.obj_hook++;return!1};b.prototype.contiunemove=function(b,a){if(!(roledielock||Actionlock||player_stalls||g_furious_collision_ing)){this.self_obj.grid.x=Math.floor(this.self_obj.x/48);this.self_obj.grid.y=Math.floor(this.self_obj.y/32);var d=GameUtil.getMovePoint(this.self_obj.grid,b,1),e=GameUtil.getMovePoint(this.self_obj.grid,b,2);AStart.cur_matx&&AStart.cur_matx.length>d.y&&AStart.cur_matx.length>e.y&&AStart.cur_matx[0].length>d.x&&AStart.cur_matx[0].length>e.x&&(0!=AStart.cur_matx[d.y][d.x]&&1!=AStart.cur_matx[d.y][d.x]||0!=AStart.cur_matx[e.y][e.x]&&1!=AStart.cur_matx[e.y][e.x])&&(a=1);2==a&&this.self_obj.obj_hores&&(a=3);(d=GameUtil.moverule(this.self_obj.grid,b,a))?this.executemove(d,b,a+1):b!=this.self_obj.cur_dir?(this.move_dir=b,this.self_obj.changestate(null,1,this.move_dir,!0),Sendmessage.ChangDir(this.self_obj.grid.x,this.self_obj.grid.y,this.move_dir)):(e=GameUtil.CountMoveDown(b),(d=GameUtil.moverule(this.self_obj.grid,e,1))?this.executemove(d,e,2):(e=GameUtil.CountMoveUp(b),(d=GameUtil.moverule(this.self_obj.grid,e,1))&&this.executemove(d,e,2)))}};b.prototype.rockerrule=function(){return!this.move_call_result||this.use_attack||this.self_obj.is_springback||attack_lock_state||!(1==this.self_obj.cur_state||this.self_obj.skin_feature&&0==this.self_obj.skin_feature.btJob&&6==this.self_obj.cur_state||this.self_obj.action_over&&5<this.self_obj.cur_frame_index)?!1:!0};b.prototype.objectmove=function(b,a){if(!(roledielock||Actionlock||rockerlock||player_stalls||null==this.self_obj||g_furious_collision_ing)){autopickstate&&(autopickstate=!1);var d=Laya.Browser.now();300<d-attack_lock_time&&(attack_lock_time=d,attack_lock_state=!1);this.rockerrule()&&(null!=b?this.contiunemove(b.dir,b.state):Movemodule.startmove(this.self_obj.grid,a))}};b.prototype.moveend=function(){this.move_state=0;this.use_skill=this.use_attack=!1;this.move_call_result=!0;use_move_start=!1};b.prototype.usefightrule=function(){return this.self_obj&&(1==this.self_obj.cur_state||6==this.self_obj.cur_state||13==this.self_obj.cur_state||this.self_obj.action_over&&5<this.self_obj.cur_frame_index)?!0:!1};b.prototype.getattfasttime=function(){return Math.max(1,g_ClientConfig.AttackIntervalTime-Math.floor(this.self_obj.attsp/100*540)-rolespeed*g_ClientConfig.btItemSpeed)};b.prototype.fight=function(){if(roledielock||Actionlock||player_stalls||this.self_obj&&this.self_obj.obj_hores)return!1;if(this.usefightrule()&&this.move_call_result){if(Laya.Browser.now()-attack_call_time<this.getattfasttime())return this.use_attack=!0,!1;if(GameUtil.hasmining(this.self_obj.grid,this.self_obj.cur_dir)&&8!=this.self_obj.cur_state)this.controltype=5,this.mining();else{this.use_attack=!1;this.controltype=3;this.skillList&&0<this.skillList.length&&(this.atttype=this.skillList[0],this.skillList.shift());if(1==this.self_obj.paralysis_state&&0==GameUtil.checkParalysisM2(E_PARALYSISACTIVE.ATTACK))return!1;Fightmodule.startattack(this.atttype)}return!0}this.use_skill||(this.use_attack=!0);return!1};b.prototype.autolocking=function(b){b==playerID||null!=lockingID&&0!=lockingID||0!=autohookstate||GlobalCfglist.notLock||(b=ObjectManage.findobject(b))&&!b.is_die&&GameUtil.addhalo(b)};b.prototype.useskillrule=function(){if(this.self_obj.action_over&&!this.self_obj.is_die){if(1==this.self_obj.paralysis_state)return 1==GameUtil.checkParalysisM2(E_PARALYSISACTIVE.MAGIC)?!0:!1;if(1==this.self_obj.cur_state||6==this.self_obj.cur_state||5<this.self_obj.cur_frame_index)return!0}return!1};b.prototype.getskillpos=function(b,a,d){var e=new Laya.Point,g=ObjectManage.findobject(lockingID);if(a)e=a;else if(g&&!g.is_die)e.x=g.target_pos.x?g.target_pos.x:g.grid.x,e.y=g.target_pos.y?g.target_pos.y:g.grid.y;else if(GameUtil.isselfskill(b))e=GameUtil.getMovePoint(this.self_obj.grid,this.self_obj.cur_dir,5);else if(a=ObjectManage.findlateobject(this.self_obj.grid,8))e.x=a.grid.x,e.y=a.grid.y,GameUtil.addhalo(a);0==e.x&&0==e.y&&(e=GameUtil.getMovePoint(this.self_obj.grid,this.self_obj.cur_dir,6));25==b&&(1E3>d||1500<d)&&(e.x=this.self_obj.cur_dir,e.y=0);5!=b&&13!=b&&23!=b&&24!=b&&15!=b&&28!=b&&16!=b&&29!=b&&43!=b&&53!=b&&38!=b||!(1E3>d||1500<d)||(e.x=this.self_obj.grid.x,e.y=this.self_obj.grid.y);return e};b.prototype.useskill=function(b,a,d,e){if(0==b||roledielock||Actionlock||player_stalls||null==this.self_obj||this.self_obj.obj_hores)return this.use_skill=!1;if(this.useskillrule()){skill_count_cd=Skillmodule.checklegal(b,a);var g=1E3<=a&&1500>=a?Skillmodule.findCustomSkill(a,e):Skillmodule.getskilldata(b,a);if(!g&&!g)return!1;null==g.use_time&&(g.use_time=0);if(1==(Laya.Browser.now()-g.use_time>skill_count_cd&&Laya.Browser.now()-G_SkillTime>g_ClientConfig.SpellIntervalTime)){G_SkillTime=Laya.Browser.now();g.use_time=Laya.Browser.now();this.self_obj.grid.x=Math.floor(this.self_obj.x/48);this.self_obj.grid.y=Math.floor(this.self_obj.y/32);var f=this.getskillpos(b,d,a);Fightmodule.AttOff_list=[];GlobalCfglist.d_autoskill_3&&(4==b&&Gameconfig.autoChangePoison(),10!=b&&28!=b&&16!=b&&17!=b&&11!=b&&12!=b&&15!=b||Gameconfig.autoChangeFu());this.useskill_id=b;this.useskill_pos=f;this.useskill_type=a;activate_skilluse=0;activate_skillpos=null;this.use_skill=!1;if(13==b||23==b||24==b||43==b||53==b||38==b&&43==a){this.controltype=3;switch(b){case 24:Gameconfig.lastFireHitTime=Laya.Browser.now();break;case 38:Gameconfig.lastLYTime=Laya.Browser.now();break;case 43:Gameconfig.lastKTZTime=Laya.Browser.now();break;case 53:Gameconfig.lastZRTime=Laya.Browser.now()}43==b&&41==a&&Skillmodule.playself(this.useskill_id,this.useskill_type,this.self_obj,this.useskill_pos,null,e)}else{this.controltype=2;if(void 0==e)for(d=0;d<g_UserMagicList.length;d++){var h=g_UserMagicList[d];b==h.Def.btEffect&&a==h.Def.wMagicId&&(e=h.Level)}g.isCustomSkill?Skillmodule.playCustomSkillForTarget(g,this.self_obj,this.useskill_pos,void 0==e?0:e):Skillmodule.playself(this.useskill_id,this.useskill_type,this.self_obj,this.useskill_pos,null,e)}g=2==this.controltype?Math.max(1,3*this.self_obj.ftime-2.5*this.self_obj.skillsp):1;if(25!=b)Laya.timer.once(g,this,function(){this.self_obj.currMagicId=a;Skillmodule.sendMsg(b,f,this.self_obj.cur_dir,a,e)});else this.useFuriousCollisionSkillHandle(b,f,a,e);return!0}}else this.use_attack||(this.use_skill=!0),!autohookstate||15!=b&&28!=b||(AutoHookmodule.summontime=0);return!1};b.prototype.useFuriousCollisionSkillHandle=function(b,a,d,e){var g=this;g_furious_collision_ing=g_furious_collision_end=!1;setTimeout(function(){g_furious_collision_ing=!0;Skillmodule.sendMsg(b,a,g.self_obj.cur_dir,d,e)},35)};b.prototype.isAutoAuxiliaryUseSkill=function(b){return-1!=[14,15,31,2,58].indexOf(b)&&autohookstate?!0:!1};b.prototype.playskill=function(){};b.prototype.mining=function(){if(this.self_obj&&5==this.controltype){var b=ItemMgr.getInstance().FindUseItemByPos(U_WEAPON);b&&b.s&&6==b.s.StdMode&&19==b.s.Shape&&(Sendmessage.sendRoleMessage(CM_HEAVYHIT,this.self_obj.grid.x,this.self_obj.grid.y,this.self_obj.cur_dir),this.self_obj.changestate(null,8,null,!1,"play_by_mining"))}};b.prototype.autodrop=function(b){};return b}(),objectmanage=function(){function b(){this.object_list=[];this.str_attover="play_over_test";this.str_stand="play_by_stand";this.str_dieeff="play_by_die_effects";this.str_mining="play_by_mining";this.move_time=0;Laya.stage.on(this.str_attover,this,this.playover);Laya.stage.on(this.str_stand,this,this.playtostand);Laya.stage.on(this.str_dieeff,this,this.dieeffects);Laya.stage.on(this.str_mining,this,this.callmining);Laya.stage.on("gm_show_role",this,this.gmshowrole);Laya.stage.on("EVENT_START_OBJECT_HB",this,this.startHB);this.obj_load_res=[];this.lock_list=[];this.lock_idx=0;this.resloadlist=[];this.play_count=0;this.shy_a=new Laya.Point;this.shy_b=new Laya.Point;this.fps_time=0;this.fps_list=[]}var c=b.prototype;c.startHB=function(){Laya.timer.clear(this,this.SkinToHeartbeat);Laya.timer.loop(20,this,this.SkinToHeartbeat)};c.analyspeed=function(a,b,e,c){return 3==b?7==a||8==a||6==a?(a=Math.floor(e*(1E3-g_ClientConfig.nAttackSpeed)/1E3),c=Math.floor(c.attsp/100*a),e-a+c+rolespeed*g_ClientConfig.btItemSpeed/6):11==a?(a=Math.max(0,e-Math.floor(e*c.skillsp/100)),c=Math.floor(a*g_ClientConfig.nSpellSpeed/1E3),e-a+c):Math.floor(e*g_ClientConfig.nMoveSpeed/1E3):0};c.SkinToHeartbeat=function(){var a=0;null!=g_ClientConfig&&(a=null!=g_ClientConfig.nMoveSpeed?g_ClientConfig.nMoveSpeed:1E3);var a=Math.max(1,100-Math.floor(100*a/1E3))-g_rolemovespeed,a=a-a%10,b=(this.play_count+=20)>a;b&&(this.play_count=0);this.checkFps();for(var e=this.object_list.length-1;0<=e;e--){var c=this.object_list[e];if(c&&null!=c.obj_frames&&0!=c.obj_frames.length)if((1==c.cur_state||6==c.cur_state)&&0<c.msg_list.length)c.playorder();else if(c.is_moveing){var f=Math.floor(a/20)+1,h=f*c.obj_frames.length;GlobalCfglist.smooth&&(c.grid.x!=c.target_pos.x||c.grid.y!=c.target_pos.y)&&c.trans_count<h&&(this.shy_a.setTo(48*c.grid.x,32*c.grid.y),this.shy_b.setTo(48*c.target_pos.x,32*c.target_pos.y),this.shy_a.x==this.shy_b.x&&(this.shy_a.x+=1),h=GameUtil.equalcoordinate(this.shy_a,this.shy_b,h,++c.trans_count),c.x=h.x,c.y=h.y,c.selfname.x=c.x,c.selfname.y=c.y,c.setPosOfObjectNameAndBlood(),c.data&&c.data.record==playerID&&Mapmodule.root&&(Mapmodule.root.x=-(c.x*Mapmodule.root.scaleX-browser_width/2)-20,Mapmodule.root.y=-(c.y*Mapmodule.root.scaleY-browser_height/2+20)));if(b||c.super_time)c.trans_count<f&&(c.trans_count+=f-c.trans_count),c.play_time=Laya.timer.currTimer,c.updateselfskin(!0)}else if(f=Math.max(1,c.ftime-this.analyspeed(c.cur_state,c.type,c.ftime,c)),3!=c.type||1!==c.cur_state||0!==c.cur_frame_index||2!==c.lastState&&3!==c.lastState||(f=Math.min(80,f)),h=Laya.timer.currTimer,h-c.play_time>=f||c.super_time&&c.data&&c.data.record!=playerID||3==c.type&&c.data.record==playerID&&moveing||this.isFuriousCollisionEnd())1===c.cur_state&&(c.lastState=1),c.play_time=h,c.updateselfskin(!1)}};c.isFuriousCollisionEnd=function(){return g_rocker_moving&&0==g_furious_collision_ing&&1==g_furious_collision_end?(g_furious_collision_end=!1,!0):!1};c.checkFps=function(){var a=Laya.Browser.now();0==this.fps_time&&(this.fps_time=a);this.fps_list.push(a-this.fps_time);50==this.fps_list.length&&(this.fps_list.sort(),30<=this.fps_list[25]&&Laya.stage.event("setSimple"),this.fps_list=[]);this.fps_time=a};c.isloadres=function(a,b,e,c,f){for(var h=0;h<this.obj_load_res.length;h++){var l=this.obj_load_res[h];if(l._race==a&&l._wappr==b&&l._state==e&&l._type==c&&l._off==f)return!0}return!1};c.callmining=function(a){a.changestate(null,6,null,!1);var b=Math.min(MinLevelFastTime,Math.abs(14E4)),b=Math.min(MinLevelFastTime,b+Math.floor(rolespeed*g_ClientConfig.btItemSpeed));if(a&&a.data.record==playerID)Laya.timer.once(b,this,function(){Objectcontrol.mining()})};c.dieeffects=function(a){if(null!=a||null!=a.skin_feature)18==a.skin_feature.wRaceImg&&27==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon3/",2860,2869,100,!1,!0):15==a.skin_feature.wRaceImg&&21==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon3/",340,359,100,!1,!0):40==a.skin_feature.wRaceImg&&205==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon5/",341,348,100,!1,!0):109==a.skin_feature.wRaceImg&&325==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon33/",2770,2779,160,!1,!0):109==a.skin_feature.wRaceImg&&326==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon33/",2880,2889,160,!1,!0):112==a.skin_feature.wRaceImg&&336==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon34/",3300,3305,200,!1,!0):112==a.skin_feature.wRaceImg&&337==a.skin_feature.wAppr?Animationmodule.playframe(!0,a,"data/mon34/",3360,3365,200,!1,!0):165==a.skin_feature.wRaceImg&&376==a.skin_feature.wAppr&&Animationmodule.playframe(!0,a,"data/mon38/",3091,3099,200,!1,!0)};c.attackeffect=function(a,b,e){if(a.grid){var c=new Laya.Point(48*a.grid.x,32*a.grid.y);if(24==e.wDress&&16==e.wRace){var f=1445+10*b,h=f+5-1;(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon3/",f,h,100,!1,!0))&&e.pos(c.x,c.y)}else if(140==e.wDress&&33==e.wRace)(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon15/",100,109,100,!1,!0))&&e.pos(c.x,c.y);else if(31==e.wDress&&20==e.wRace)f=1800+10*b,h=f+7-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon4/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(55==e.wRace)f=820+10*b,h=f+5-1,setTimeout(function(){var a=Animationmodule.playframe(!0,Mapmodule.root,"data/mon18/",f,h,100,!1,!0);a&&a.pos(c.x,c.y)},300);else if(34==e.wDress&&21==e.wRace)f=1900+10*b,h=f+6-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon4/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(63==e.wDress&&49==e.wRace)f=1680+10*b,h=f+8-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon7/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(140==e.wDress&&49==e.wRace)f=1680+10*b,h=f+8-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon7/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(206==e.wDress&&71==e.wRace)f=2783+10*b,h=f+3-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon21/",f,h,200,!1,!0))&&e.pos(c.x,c.y);else if(166==e.wDress&&33==e.wRace)(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon15/",100,109,100,!1,!0))&&e.pos(c.x,c.y);else if(182==e.wDress&&62==e.wRace)f=860+10*b,h=f+6-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon19/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(221==e.wDress&&78==e.wRace)f=3442+10*b,h=f+4-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon22/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(443==e.wDress&&78==e.wRace)f=3442+10*b,h=f+4-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon22/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(449==e.wDress&&78==e.wRace)f=3442+10*b,h=f+4-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon22/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(320==e.wDress&&101==e.wRace)f=352+10*b,h=f+4-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon33/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(325==e.wDress&&109==e.wRace)(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon33/",2750,2759,100,!1,!0))&&e.pos(c.x,c.y);else if(326==e.wDress&&109==e.wRace)(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon33/",2860,2869,100,!1,!0))&&e.pos(c.x,c.y);else if(370==e.wDress&&162==e.wRace)f=430+10*b,h=f+6-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(373==e.wDress&&165==e.wRace)f=1760+10*b,h=f+5-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(375==e.wDress&&165==e.wRace)f=2573+10*b,h=f+3-1,Laya.timer.once(300,this,function(){var a=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",f,h,100,!1,!0);a&&a.pos(c.x,c.y)});else if(376==e.wDress&&165==e.wRace)f=3013+10*b,h=f+3-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(377==e.wDress&&165==e.wRace)f=3530+10*b,h=f+6-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(3710==e.wDress&&165==e.wRace){e=5090+10*b;var l=5173+10*b,m=l+3-1;(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",e,e+10-1,100,!1,!0))&&e.pos(c.x,c.y);Laya.timer.once(400,this,function(){var f=GameUtil.getMovePoint(a.grid,b,1),e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",l,m,100,!1,!0);e&&e.pos(48*f.x,32*f.y)})}else if(3711==e.wDress&&165==e.wRace)f=5693+10*b,h=f+3-1,Laya.timer.once(200,this,function(){var a=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",f,h,100,!1,!0);a&&a.pos(c.x,c.y)});else if(3713==e.wDress&&165==e.wRace)f=7340+10*b,h=f+10-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(340==e.wDress&&113==e.wRace)f=503+10*b,h=f+7-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon35/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if(263==e.wDress&&151==e.wRace)f=1610+10*b,h=f+6-1,(e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon27/",f,h,100,!1,!0))&&e.pos(c.x,c.y);else if((904==e.wDress||e.wDress)&&83==e.wRace||(341==e.wDress||342==e.wDress)&&114==e.wRace){var n=function(){if(2<++p.use_num)Laya.timer.clear(p,n);else for(var b=4+Math.floor(100*Math.random()%4),f=0;f<b;f++){var d=230+10*Math.floor(100*Math.random()%6),e=d+5-1,m=new Laya.Point(a.grid.x+(8-Math.floor(100*Math.random()%16)),a.grid.y+(8-Math.floor(100*Math.random()%16)));(d=Animationmodule.playframe(!0,Mapmodule.root,"data/dragon/",d,e,100,!1,!0))&&d.pos(48*m.x,32*m.y)}};if(8<Math.floor(10*Math.random()+1)){e=Animationmodule.playframe(!0,Mapmodule.root,"data/dragon/",60,80,100,!1,!0);var q=new Laya.Point(a.grid.x,a.grid.y);e&&e.pos(48*q.x,32*q.y)}var p=this;this.use_num=0;Laya.timer.loop(500,p,n)}}};c.levelup=function(a){if(a=this.findobject(a))Animationmodule.playframe(!0,a.sp,"data/prguse2/",110,124,100,!1,!0),GameUtil.PlayMusicFormat(S_ROLE_LEVEL),a.txt_name.text===g_RoleName&&g_RoleLevelUp++};c.raiseKL=function(a){var b=Animationmodule.playframe(!0,Mapmodule.root,"data/mon4/",2860,2869,100,!1,!0);b&&b.pos(48*a.grid.x,32*a.grid.y)};c.attback=function(){if(0!=lockingID)Fightmodule.attackcallback();else{var a=this.findobject(playerID);a&&a.changestate(null,1,null,!0)}};c.playover=function(a){null!=a&&1!=a.type&&(1==a.type?a.changestate(null,1,null,!1):3==a.type&&(a.data.record==playerID&&(Objectcontrol.use_attack=!1,Objectcontrol.use_skill=!1),a.changestate(null,6,a.cur_dir,!1)))};c.playtostand=function(a){a.changestate(null,1,null,!0)};c.newobject=function(a){if(null==a.fea)return null;var b=null,e=THumFeature(a.fea.buffer).wRace;if(0==e||1==e||150==e)b=new object,b.initdata(a,3),a.record==playerID&&(e=CodeUtil._LOBYTE(a.series),b.changestate(a,1,e,!0)),b.updateObjectBlood(1,1,a.record==playerID,1,1,!0);else{var b=new object,c=0;50!=e?(33==a.ident&&(b.is_die=!0),c=1,b.updateObjectBlood(1,1,a.record==playerID,1,1,!1)):c=2;b.initdata(a,c)}this.object_list.push(b);Laya.stage.event("CREATE_OBJECT",b);3==b.type&&b.data.record!=playerID&&(b.sp&&(b.sp.visible=!GlobalCfglist.hidePlayer),b.obj_wing&&(b.obj_wing.visible=!GlobalCfglist.hidePlayer));1==b.type&&(b.sp.visible=!GlobalCfglist.hideMonster);return b};c.mouseClickCheck=function(){for(var a=0;a<this.object_list.length;++a){var b=this.object_list[a];if((null!=b._style||null!=b.sp)&&b.data&&b.sp.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))return!0}return!1};c.checkInArea=function(a,b,e){if(e&&!(0>=e.length)){var c=new Laya.Point(e[0],e[1]);a=a.localToGlobal(c);if(!(b.x<a.x||b.x>a.x+e[2]||b.y<a.y||b.y>a.y+e[3]))return!0}};c.clickNPC=function(a,b){for(var e=0;e<this.object_list.length;++e){var c=this.object_list[e];if((null!=c._style||null!=c.sp)&&c.data&&c.sp.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))if(2==c.type){var f=this.NpcClickHandle(c,b,a,e);if(f)return f}else if(f=this.clickObjHandle(c,b,a))return c.type}return!1};c.NpcClickHandle=function(a,b,e,c){if(this.checkInArea(a.txt_name,new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),a.npcClickAreaData))return this.clickObjHandle(a,b,e);a=this.object_list;for(var f=c+1<a.length?c+1:a.length-1;f<a.length;f++)if(c=a[f],c.sp.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))return this.clickObjHandle(c,b,e)};c.checkOtherOrMonsterHide=function(a){if(1==a.type&&GlobalCfglist.hideMonster||3==a.type&&GlobalCfglist.hidePlayer&&a.data.record!=playerID)return!0};c.clickObjHandle=function(a,b,e){if(!this.checkOtherOrMonsterHide(a))if(a.data.record!=playerID&&a.visible){if((!a.is_die||11==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&160==a.skin_feature.wAppr||11==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&161==a.skin_feature.wAppr||19==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&43==a.skin_feature.wAppr||19==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&70==a.skin_feature.wAppr||16==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&24==a.skin_feature.wAppr||52==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&39==a.skin_feature.wAppr||19==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&113==a.skin_feature.wAppr||52==a.skin_feature.wRaceImg&&0==a.skin_feature.wWeapon&&93==a.skin_feature.wAppr)&&Laya.loader.getRes(a.fl_name))return Laya.stage.event("ClickNPC",[a,e,b]),a.type}else ObjectManage.findobject(a.data.record).data.fea.buffer[13]&&GameApi.ShowMyShop(!0)};c.filterlockin=function(a){for(var b=0;b<lockingList.length;++b){var e=this.findobject(lockingList[b]);if(e&&e.data&&e.data.record==a)return!0}return!1};c.findlateobject=function(a,b,e){e||(e=1);for(var c=null,f=this.findobject(playerID).txt_name.text,h=0;h<this.object_list.length;++h){var l=this.object_list[h];if(!(l.data&&l.data.record==playerID||l.txt_name&&""==l.txt_name.text||!l.txt_name||l.txt_name&&-1!=l.txt_name.text.indexOf(f)||l.txt_name&&-1!=l.txt_name.text.indexOf("(")||l.OwnerID&&0!=l.OwnerID)){if(l.data&&1==l.type){var m=TMonFeature(l.data.fea.buffer);if(71==m.wAppr)continue;if(0==m.wAppr)continue}l.data&&-1!=Fightmodule.AttOff_list.indexOf(l.data.record)||(m=l.txt_name.text&&-1!=l.txt_name.text.indexOf("\n")?l.txt_name.text.split(/[\n/]/)[1]:l.txt_name.text,autohookstate&&m&&Gameconfig.monsterCheck(m)||!(l.type==e||3==l.type&&l.skin_feature&&150==l.skin_feature.wRace)||l.is_die||(m=Math.floor(a.distance(l.grid.x,l.grid.y)),m<=b&&(b=m,c=l)))}}return c};c.findlateobject1=function(a,b,e){e||(e=1);var c=null;if(c=this.findobject(playerID)){for(var f=0;f<this.object_list.length;++f){var h=!0,l=this.object_list[f];if(!(l.data&&l.data.record==playerID||l.txt_name&&""==l.txt_name.text||!l.txt_name||l.txt_name&&-1!=l.txt_name.text.indexOf(c.txt_name.text)||l.txt_name&&-1!=g_babyList.indexOf(l.record)||l.OwnerID&&0!=l.OwnerID)){if(l.data&&1==l.type){var m=TMonFeature(l.data.fea.buffer);if(71==m.wAppr)continue;if(0==m.wAppr)continue}if(!l.data||-1==Fightmodule.AttOff_list.indexOf(l.data.record)){if(l.txt_name&&l.txt_name.nametites)var n=l.txt_name.nametites[0];if(!(autohookstate&&n&&Gameconfig.monsterCheck(n))){if(3==l.type){if("[\u592b\u59bb\u653b\u51fb]"==G_att_type){if(l.txt_name.nametites[1])var q=l.txt_name.nametites[1];!q||""==q||-1==q.indexOf(c.txt_name.text+"\u7684\u8001\u516c")&&-1==q.indexOf(c.txt_name.text+"\u7684\u8001\u5a46")||(h=!1)}else if("[\u5e08\u5f92\u653b\u51fb]"==G_att_type){if(l.txt_name.nametites[1])var p=l.txt_name.nametites[1];!p||""==p||-1==p.indexOf(c.txt_name.text+"\u7684\u5e08\u5085")&&-1==p.indexOf(c.txt_name.text+"\u7684\u5f92\u5f1f")||(h=!1)}else if("[\u7ec4\u961f\u653b\u51fb]"==G_att_type)for(m=0;m<G_Team_Grop_List.length;m++){var r=G_Team_Grop_List[m];r&&0==r.indexOf(l.txt_name.text)&&(h=!1)}else if("[\u884c\u4f1a\u653b\u51fb]"==G_att_type){if(c.guildName)var v=c.guildName.substring(0,c.guildName.indexOf("["));if(l.txt_name.nametites&&l.txt_name.nametites[1])var w=l.txt_name.nametites[1].substring(0,l.txt_name.nametites[1].indexOf("["));v&&w&&""!=v&&v==w&&(h=!1)}else"[\u7ea2\u540d\u653b\u51fb]"!=G_att_type&&"[\u548c\u5e73\u653b\u51fb]"==G_att_type&&(h=!1);if(!h)continue}(l.type==e||3==l.type&&l.skin_feature&&150==l.skin_feature.wRace)&&!l.is_die&&Math.floor(a.distance(l.grid.x,l.grid.y))<=b&&this.lock_list.push(l)}}}}c=this.checkLock();this.lock_list=[];return c}};c.checkLock=function(){var a=this.findobject(playerID);this.lock_list.sort(function(b,d){return a.grid.distance(b.grid.x,b.grid.y)-a.grid.distance(d.grid.x,d.grid.y)});for(var b=0;b<this.lock_list.length;b++)if(b==this.lock_idx)return this.lock_idx++,this.lock_list[b];this.lock_idx=0;return null};c.findobjectforname=function(a){for(var b=0;b<this.object_list.length;++b){var e=this.object_list[b];if(e&&e.txt_name&&e.txt_name.text==a)return e}return null};c.findobject=function(a){for(var b=0;b<this.object_list.length;++b){var e=this.object_list[b];if(e&&e.data&&e.data.record==a)return e}return null};c.del2object=function(a){for(var b=0;b<this.object_list.length;b++)if(this.object_list[b]==a){this.object_list[b].getChildByName("halo")&&(lockingID=0);this.object_list[b].clearstart();this.object_list[b].destroy();this.object_list.splice(b,1);break}};c.delobject=function(a){if(null!=a)for(var b=0;b<this.object_list.length;b++){var e=this.object_list[b];if(e&&e.data&&e.data.record==a){var c=e.getChildByName("halo");c&&(lockingID=0,Laya.stage.event("del_unlock_icon"),Laya.stage.event("show_target_head",[!1]));e.clearstart();e.destroy();this.object_list.splice(b,1);break}}else for(b=this.object_list.length-1;0<=b;b--)if(e=this.object_list[b]){if(-1!=a){if(e.data&&e.data.record==playerID)continue;if(e._parent&&e._parent.data&&e._parent.data.record==playerID)continue}if(c=e.getChildByName("halo"))lockingID=0,Laya.stage.event("del_unlock_icon");e.clearstart(!0);e.clearRes();e.destroy();this.object_list.splice(b,1)}};c.hasobstacleID=function(a,b){for(var e=GameUtil.getMovePoint(a,b,1),c=0;c<this.object_list.length;++c){var f=this.object_list[c];if(!(f.data&&f.data.record==playerID||2!=f.type&&1!=f.type&&3!=f.type||f.is_die||e.x!=f.grid.x||e.y!=f.grid.y||f.is_die))return f}return null};c.is_in_safezone=function(a){for(var b=0;b<Mapdata.safeZone.length;++b){var e=Mapdata.safeZone[b];if(e[0]==Mapdata.cur_id&&5<=e.length&&a.x>=e[1]-e[4]&&a.x<=parseInt(e[1])+parseInt(e[4])&&a.y>=e[2]-e[4]&&a.y<=parseInt(e[2])+parseInt(e[4]))return!0}return!1};c.boCanAcross=function(a){return 2==a&&!g_boNoAcrossNpc||1==a&&!g_boNoAcrossMon||3==a&&!g_boNoAcrossHuman};c.obstructRule=function(a,b,e){var c=b[0].x==a.x&&b[0].y==a.y,f=b[1].x==a.x&&b[1].y==a.y;a=b[2].x==a.x&&b[2].y==a.y;b=!1;switch(e){case 2:b=c;break;case 3:b=c||f;break;case 4:b=c||f||a}return b};c.useAnticipation=function(a,b,e){return this.obstructRule(a.grid,b,e)||this.obstructRule(a.target_pos,b,e)?!0:!1};c.has2obstacle=function(a,b,e){var c=GameUtil.getMovePoint(a,b,e-1);if(g_boIsSafeRun&&this.is_in_safezone(c))return!1;c=[];c.push(GameUtil.getMovePoint(a,b,1));c.push(GameUtil.getMovePoint(a,b,2));c.push(GameUtil.getMovePoint(a,b,3));for(a=0;a<this.object_list.length;++a)if(b=this.object_list[a],!(b.data&&b.data.record==playerID||b.is_die||this.boCanAcross(b.type)&&3==e)&&this.useAnticipation(b,c,e))return!0;return!1};c.hasobstacle=function(a,b,e){var c=!1,f=!0,h=!0,l=!0,m=GameUtil.getMovePoint(a,b,1),n=GameUtil.getMovePoint(a,b,2);b=GameUtil.getMovePoint(a,b,3);if(1!=e&&g_boIsSafeRun&&this.is_in_safezone(a)&&this.is_in_safezone(n))return!0;new Laya.Point;for(a=0;a<this.object_list.length;++a){var q=this.object_list[a];if(!(q.data&&q.data.record==playerID||q.is_die)){if(m.x==q.grid.x&&m.y==q.grid.y||m.x==q.target_pos.x&&m.y==q.target_pos.y)f=1!=e&&this.boCanAcross(q.type)?!0:!1;if(n.x==q.grid.x&&n.y==q.grid.y||n.x==q.target_pos.x&&n.y==q.target_pos.y)h=1!=e&&this.boCanAcross(q.type)?!0:!1;if(b.x==q.grid.x&&b.y==q.grid.y||b.x==q.target_pos.x&&b.y==q.target_pos.y)1!=e&&this.boCanAcross(q.type)?result13=!0:l=!1}}switch(e){case 1:c=f;break;case 2:c=f&&h;break;case 3:c=f&&h&&l}return c};c.hasobstacle_ktz=function(a,b,e){var c=!1;a=GameUtil.getMovePoint(a,b,e);for(b=0;b<this.object_list.length;++b)e=this.object_list[b],e.data&&e.data.record==playerID||2!=e.type&&1!=e.type&&3!=e.type&&e.is_die||a.x!=e.grid.x||a.y!=e.grid.y||e.is_die||(c=!0);return c?!0:c};c.posHasObject=function(a,b,e){a=GameUtil.getMovePoint(a,b,e);b=this.findobject(playerID).txt_name.text;for(e=0;e<this.object_list.length;++e){var c=this.object_list[e];if(!(c.is_die||c.data&&c.data.record==playerID||c.txt_name&&""==c.txt_name.text||c.txt_name&&-1!=c.txt_name.text.indexOf(b)||c.txt_name&&-1!=c.txt_name.text.indexOf("("))){if(c.data){var f=TMonFeature(c.data.fea.buffer);if(71==f.wAppr)continue;if(0==f.wAppr)continue}if(c.grid.x==a.x&&c.grid.y==a.y)return c}}};c.setObjectMaxBlood=function(a,b){var e=this.findobject(a);e&&e.Blood&&e.Blood.SetMaxBloodNum(b)};c.setObjectCurBlood=function(a,b){var e=this.findobject(a);e&&e.Blood&&e.Blood.SetCurBloodNum(b)};c.setObjectName=function(a,b,e){if(a=this.findobject(a))if(a.changename(b,e),e=this.findobject(playerID)){a="("+e.txt_name.text+")";var c=e.txt_name.text+"\u7684\u5b9d\u5b9d";e&&e.txt_name&&(-1!=b.indexOf(a)||-1!=b.indexOf(c))&&Laya.stage.event("show_petBtn")}};c.updateObjectHp=function(a,b,e,c,f,h){var l=this.findobject(e);l&&l.m_Abil&&(l.m_Abil.HP=0!=b?b:l.m_Abil.HP,l.m_Abil.MaxHP=a,l.Blood&&(l.Blood.SetMaxBloodNum(a),l.updateObjectBlood(a,b,e==playerID,c,f,h)))};c.SetAttribute=function(a,b){var e=this.findobject(a);e&&(e.m_Abil=b)};c.GetAttr=function(a){return(a=this.findobject(a))?a.m_Abil:null};c.visibleHpSpr=function(a,b){var e=this.findobject(a);e&&e.visibleObjectBlood(b)};c.setObjectNameColor=function(a,b){var e=this.findobject(a);e&&(e.txt_Img&&(e.txt_Img.color=Get2RGB(b)),e.txt_name&&""!=e.txt_name.text&&(e.txt_name.color=Get2RGB(b),e.txt_name.typeset()))};c.showChatTxt=function(a,b){var e=this.findobject(a);e&&e.showChatTxt(b)};c.setNamePos=function(a,b){a.txt_name&&(a.txt_name.visible=b);3===a.type&&a.txt_Img&&(a.txt_Img.visible=!0===b&&!1===GlobalCfglist.ShowName,a.txt_name.y=a.txt_Img.visible?a.txt_name.y+a.txt_Img.height:-25)};c.ReObjectVisible=function(a){for(var b=0;b<this.object_list.length;++b){var e=this.object_list[b];e&&e.txt_name&&(1==a&&1==e.type&&-1==e.txt_name.text.indexOf("(")?this.setNamePos(e,GlobalCfglist.nameshow1):2==a&&2==e.type?this.setNamePos(e,GlobalCfglist.nameshow2):3==a&&3==e.type?this.setNamePos(e,GlobalCfglist.nameshow3):4==a&&1==e.type&&-1!=e.txt_name.text.indexOf("(")&&(e.txt_name.visible=GlobalCfglist.nameshow4))}};c.ShowName=function(){for(var a=0;a<this.object_list.length;++a)if(3==this.object_list[a].type&&this.object_list[a].txt_Img){this.object_list[a].txt_Img.visible=!0===GlobalCfglist.nameshow3&&!1===GlobalCfglist.ShowName;if(!0===GlobalCfglist.nameshow3&&!0===GlobalCfglist.ShowName){var b=this.object_list[a].txt_name;b.text=b.lines[b.lines.length-1]}else!0===GlobalCfglist.nameshow3&&!1===GlobalCfglist.ShowName&&(b=this.object_list[a].txt_name,b.update(b.cur_name,null,this.object_list[a]));this.object_list[a].txt_name.y=this.object_list[a].txt_Img.visible?this.object_list[a].txt_Img.x+this.object_list[a].txt_Img.height-25:-25}};c.ShowMonsterName=function(){for(var a=0;a<this.object_list.length;a++)1==this.object_list[a].type&&this.object_list[a].txt_Img&&(this.object_list[a].txt_Img.visible=G_SHOW_MONSTER_NAME,this.object_list[a].txt_name.visible=G_SHOW_MONSTER_NAME)};c.ShowTitle=function(){for(var a=0;a<this.object_list.length;++a){this.object_list[a].title&&(this.object_list[a].title.visible=!GlobalCfglist.ShowTitle);for(var b=0;6>b;b++){var e=this.object_list[a].getChildByName("icongif"+b),c=this.object_list[a].getChildByName("humicon"+b);e&&(e.visible=!GlobalCfglist.ShowTitle);c&&(c.visible=!GlobalCfglist.ShowTitle)}}};c.ReObjHpvisible=function(a){for(var b=0;b<this.object_list.length;++b)this.object_list[b].visibleObjectBlood(a)};c.ChangeState=function(a,b){var e=this.findobject(a.record),c=0;null==e&&(e=this.newobject(a));if(null!=e&&(a.level&&(e.level=a.level),null!=a.fea&&(e.boisZmuCount=a.fea.buffer[14],0==e.boisZmuCount&&(e.boisZmuCount=1)),e.is_die&&20<e.die_msg++&&(e.is_die=!1,e.die_msg=0),!e.is_die||SM_ALIVE==a.ident||SM_SKELETON==a.ident)){if(a&&a.str){e.changename(a.str);var f=this.findobject(playerID);if(f){var h=f.txt_name.text+"\u7684\u5b9d\u5b9d";f&&f.txt_name&&(-1!=a.str.indexOf(g_RoleNameOnly)||-1!=a.str.indexOf(h))&&(-1==g_babyList.indexOf(a.record)&&g_babyList.push(a.record),Laya.stage.event("show_petBtn"))}}var l;e.data&&e.data.fea&&e.data.fea.buffer&&(3==e.type?(l=THumFeature(e.data.fea.buffer),GameUtil.WeaponAttackSound(a.ident,l.wWeapon,l.nSex,l.wDress)):l=TMonFeature(e.data.fea.buffer));switch(a.ident){case SM_BACKSTEP:var m=CodeUtil._LOBYTE(a.series);e.target_pos.x=a.param;e.target_pos.y=a.tag;e.is_backstep=!0;e.changestate(a,2,m,!1);break;case SM_SPACEMOVE_SHOW:case SM_TURN:if(a.record==playerID&&1==Mapdata.cur_type)e.changestate(a,e.cur_state,null),GameUtil.setbodycolor(e,g_RoleBodyState,a.record);else{GameUtil.intervalFrameDeal(54,this,function(){GameUtil.setbodycolor(e,e.color_num,a.record)});if(0!=(a.state&2))e.changestate(a,7,m,!1,null,null,2),e.ddl_state=a.state;else{m=CodeUtil._LOBYTE(a.series);33==l.wRaceImg&&(m=0);l&&1==e.type&&71!=l.wAppr&&0!=l.wAppr&&37!=l.wAppr&&72!=l.wAppr&&253!=l.wAppr&&260!=l.wAppr&&261!=l.wAppr&&(c="wav/"+(10*l.wAppr+200)+"-1.wav",g_sound_list&&-1!=g_sound_list.indexOf(c)&&GameUtil.PlayMusicFormat(c));1==e.type&&(l=TMonFeature(e.data.fea.buffer));if(1>e.msg_list.length&&e.obj_frames&&1>e.obj_frames.length||l&&0==l.wAppr)a.record!=playerID&&(e.pos(48*a.param,32*a.tag),e.grid.x=a.param,e.grid.y=a.tag),e.changestate(a,1,m,!0);e.ddl_state=0;GameUtil.setbodycolor(e,a.state,a.record)}900==l.wAppr&&99==l.wRaceImg&&(m=CodeUtil._LOBYTE(a.series),3>m?GameUtil.ApplyDoorState(e.grid.x,e.grid.y,dsClose):GameUtil.ApplyDoorState(e.grid.x,e.grid.y,dsOpen))}break;case SM_RUSH:case SM_RUSHKUNG:Movemodule.end_point=null;Movemodule.stopmove();this.move_call_result=!0;a.ident==SM_RUSH&&(e.is_springback=!0);m=CodeUtil._LOBYTE(a.series);e.target_pos.x=a.param;e.target_pos.y=a.tag;e.changestate(a,4,m,!1);break;case SM_WALK:case SM_100HIT:a.record!=playerID&&(m=CodeUtil._LOBYTE(a.series),3==e.type&&(1<Math.abs(e.grid.x-a.param)||1<Math.abs(e.grid.y-a.tag))&&e.updateselfpos(!0),e.target_pos.x=a.param,e.target_pos.y=a.tag,this.targetMoveHandle(a,e),e.changestate(a,2,m,!1));break;case SM_RUN:case SM_HORSERUN:a.record!=playerID&&(m=CodeUtil._LOBYTE(a.series),(2<Math.abs(e.grid.x-a.param)||2<Math.abs(e.grid.y-a.tag))&&e.updateselfpos(!0),e.target_pos.x=a.param,e.target_pos.y=a.tag,this.targetMoveHandle(a,e),l=340==l.wAppr&&113==l.wRaceImg?l=9:l=3,e.changestate(a,l,m,!1));break;case SM_POWERHIT:m=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(e.grid,m,1);Skillmodule.playself(5,7,e,m,a.record,b);break;case SM_LONGHIT:m=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(e.grid,m,1);Skillmodule.playself(13,12,e,m,a.record,b);break;case SM_WIDEHIT:m=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(e.grid,m,1);Skillmodule.playself(23,25,e,m,a.record,b);break;case SM_FIREHIT:m=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(e.grid,m,1);Skillmodule.playself(24,26,e,m,a.record,b);break;case SM_66HIT:m=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(e.grid,m,1);Skillmodule.playself(43,95,e,m,a.record,b);break;case SM_TWNHIT:m=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(e.grid,m,1);Skillmodule.playself(38,43,e,m,a.record,b);break;case SM_SWORDHIT:m=CodeUtil._LOBYTE(a.series);m=GameUtil.getMovePoint(e.grid,m,1);Skillmodule.playself(53,76,e,m,a.record,b);break;case SM_HEAVYHIT:m=CodeUtil._LOBYTE(a.series);e.changestate(null,8,m,!1,this.str_mining);break;case SM_HIT:case SM_HIT_2:case SM_HIT_3:case SM_HIT_4:case SM_HIT_5:case SM_60HIT:case SM_61HIT:case SM_62HIT:case SM_CRSHIT:case SM_43HIT:case SM_101HIT:case SM_102HIT:case SM_103HIT:case SM_FLYAXE:l&&1==e.type&&71!=l.wAppr&&0!=l.wAppr&&37!=l.wAppr&&253!=l.wAppr&&260!=l.wAppr&&261!=l.wAppr&&(c="wav/"+(10*l.wAppr+200)+"-2.wav",g_sound_list&&-1!=g_sound_list.indexOf(c)&&GameUtil.PlayMusicFormat(c));m=CodeUtil._LOBYTE(a.series);e.pos(48*a.param,32*a.tag);e.grid.x=a.param;e.grid.y=a.tag;e.target_pos.x=a.param;e.target_pos.y=a.tag;3==e.type?e.changestate(null,7,m,!1,this.str_attover):(c=THumFeature(e.data.fea.buffer),33==c.wRace?e.changestate(null,4,0,!1):e.changestate(null,3,m,!1),this.attackeffect(e,m,c));break;case SM_BIGHIT:m=CodeUtil._LOBYTE(a.series);3==e.type?e.changestate(null,9,m,!1,this.str_attover):e.changestate(null,3,m,!1,this.str_stand);break;case SM_STRUCK:l&&(g_ClientConfig.Params&&1==e.type&&!g_ClientConfig.Params[0]?(e.changestate(null,5,e.cur_dir,!1),1==e.type&&71!=l.wAppr&&0!=l.wAppr&&37!=l.wAppr&&253!=l.wAppr&&260!=l.wAppr&&261!=l.wAppr&&(c="wav/"+(10*l.wAppr+200)+"-4.wav",g_sound_list&&-1!=g_sound_list.indexOf(c)&&GameUtil.PlayMusicFormat(c))):g_ClientConfig.Params&&1<g_ClientConfig.Params.length&&3==e.type&&!g_ClientConfig.Params[1]&&!g_ClientConfig.Params[0]&&(e.changestate(null,13,e.cur_dir,!1),0==l.nSex?GameUtil.PlayMusicFormat(s_struck_m):GameUtil.PlayMusicFormat(s_struck_w),Skillmodule.playEQsecurestruck(e)));break;case SM_STRUCK_BLAST:case SM_HEROGROUPATTACK:case SM_REBOUND:l&&(1==e.type&&71!=l.wAppr&&0!=l.wAppr&&37!=l.wAppr&&253!=l.wAppr&&260!=l.wAppr&&261!=l.wAppr?(c="wav/"+(10*l.wAppr+200)+"-4.wav",g_sound_list&&-1!=g_sound_list.indexOf(c)&&GameUtil.PlayMusicFormat(c)):0==l.nSex?GameUtil.PlayMusicFormat(s_struck_m):GameUtil.PlayMusicFormat(s_struck_w),a.ident==SM_STRUCK_BLAST&&(m=new Laya.Point(20,-20),Animationmodule.playframe(!1,e,"gameres/animation/struck/",0,5,80,!1,!0,m)));break;case SM_DEATH:case SM_NOWDEATH:e.is_die=!0;e.data.record==lockingID&&GameUtil.delhalo(lockingID);m=CodeUtil._LOBYTE(a.series);e.is_born=!1;3==e.type?c=14:c=6;0==e.cur_state&&null==e.cur_dir?e.changestate(a,c,m,!1,null,null,1):(e.changestate(a,c,m,!1,this.str_dieeff,!0),l&&(1==e.type&&71!=l.wAppr&&0!=l.wAppr&&253!=l.wAppr&&260!=l.wAppr&&261!=l.wAppr?(c="wav/"+(10*l.wAppr+200)+"-5.wav",g_sound_list&&-1!=g_sound_list.indexOf(c)&&GameUtil.PlayMusicFormat(c)):void 0!=l.nSex&&(0==l.nSex?GameUtil.PlayMusicFormat(s_role_die_m):GameUtil.PlayMusicFormat(s_role_die_w))));900==l.wAppr&&99==l.wRaceImg&&GameUtil.ApplyDoorState(e.grid.x,e.grid.y,dsBroken);break;case SM_FEATURECHANGED:e.data&&e.data.fea.buffer.toString()!=a.fea.buffer.toString()&&(c=1!=e.cur_state?e.cur_state:null,e.updateskin(a,null,c));break;case SM_DIGUP:e.ddl_state=a.state;m=CodeUtil._LOBYTE(a.series);a&&a.fea&&(c=THumFeature(a.fea.buffer),33==c.wRace?(e.changestate(a,2,0,!1),e.visible=!0):(e.reverseani=!1,e.changestate(a,7,m,!1),e.visible=!0,e.is_born=!0));900==l.wAppr&&99==l.wRaceImg&&(GameUtil.ApplyDoorState(e.grid.x,e.grid.y,dsOpen),e.obj_frames=[]);break;case SM_DIGDOWN:a&&a.fea&&(c=THumFeature(a.fea.buffer),33==c.wRace?(e.changestate(a,7,0,!1),Laya.timer.once(1E3,this,function(){e.visible=!1;e.data.record&&this.delobject(e.data.record)})):13==c.wRace?(m=CodeUtil._LOBYTE(a.series),e.reverseani=!0,e.changestate(a,7,m,!1),Laya.timer.once(1E3,this,function(){e.visible=!1;e.data.record&&this.delobject(e.data.record)})):(m=CodeUtil._LOBYTE(a.series),e.reverseani=!0,e.changestate(null,4,m,!1),e.is_born=!0));900==l.wAppr&&99==l.wRaceImg&&GameUtil.ApplyDoorState(e.grid.x,e.grid.y,dsClose);break;case SM_BUTCH:case SM_SITDOWN:m=CodeUtil._LOBYTE(a.series);e.changestate(null,12,m,!1,this.str_stand);break;case SM_SKELETON:e.sp.blendMode="overlay";e.changestate(a,7,0,!1);break;case SM_ALIVE:e.is_die=!1;e.visibleObjectBlood(!0);e.Blood.AliveBlood();e.changestate(a,7,0,!1);a.record==playerID&&Laya.stage.event("ROLE_ALIVE");900==l.wAppr&&99==l.wRaceImg&&GameUtil.ApplyDoorState(e.grid.x,e.grid.y,dsClose);break;case SM_SPELL:m=a.series,l=a.magicid,c=new Laya.Point(a.param,a.tag),61==m||62==m||64==m?(e=ObjectManage.findobject(a.record),f=THumFeature(e.data.fea.buffer).btJob,61==m&&0==f?Skillmodule.playself(611,l,e,c,a.record,b):61==m&&2==f?Skillmodule.playself(61,l,e,c,a.record,b):62==m&&0==f?Skillmodule.playself(621,l,e,c,a.record,b):62==m&&1==f?Skillmodule.playself(62,l,e,c,a.record,b):64==m&&1==f?Skillmodule.playself(641,l,e,c,a.record,b):64==m&&2==f&&Skillmodule.playself(64,l,e,c,a.record,b)):Skillmodule.playself(m,l,e,c,a.record,b)}}};c.targetMoveHandle=function(a,b){if(3==b.type){var e=ObjectManage.findobject(playerID);e&&e.grid&&(a.record==attackerID?(disAfterTargetMoved=Math.floor(e.grid.distance(a.param,a.tag)),2>disAfterTargetMoved?disAfterTargetMoved=0:0!=e.target_pos.x&&0!=e.target_pos.y&&(e.is_moveing=!0)):(otherPlayerCatch=!0,0!=b.target_pos.x&&0!=b.target_pos.y&&(b.is_moveing=!0)))}};c.updateAlpha=function(){};return b}(),Title=function(b){function c(){this.__super.call(this)}Laya["class"](c,"Title",b);c.prototype.update=function(a){function b(f){var d=Laya.loader.getRes(f);c.parent&&d&&(c.skin=f,c.zOrder=1E6,c.y=-(d.height+76),c.x=25-d.width/2,c.width=d.width,c.height=d.height,a.skin_feature.sIconName?(c.titleName&&c.titleName._style?c.titleName.text=a.skin_feature.sIconName:(c.titleName=new Laya.Text,c.titleName.fontSize=14,c.titleName.stroke=2,c.titleName.align="center",c.titleName.color="#ffffff",c.titleName.strokeColor="#000000",c.titleName.text=a.skin_feature.sIconName,c.addChild(c.titleName)),c.titleName.visible=!0,c.titleName.color=0<a.skin_feature.btIconColor?GetRGB(a.skin_feature.btIconColor):"#bea80a",c.titleName.pivotX=-c.width,c.titleName.pivotY=-c.height/2,c.titleName.y=-c.titleName.height/2,c.x=25-(c.width+c.titleName.width)/2):c.titleName&&(c.titleName.visible=!1))}if(!(0>g_ClientConfig.nShowUserIcon||g_ClientConfig.nShowUserIcon>=g_pak_list.length)){var e=g_pak_list[g_ClientConfig.nShowUserIcon];if(""!==e){GameUtil.loadImg(a.skin_feature.nIcon,e,b);this.visible=!GlobalCfglist.ShowTitle;var c=this}}};c.SetIconGif=function(a,b){if(!(1>a.series)&&a.param===b.length){var e=ObjectManage.findobject(a.record);if(e){e.ShowNameList=[];for(var c=fnDecode6BitBuf(b,b.length,!1),c=(new Zlib.Inflate(c.pszDest)).decompress(),f=0,h=1;f<a.series;f++,h++){var l=GameUtil.slice(c,28*f+h,28*f+h+28),l=TActorIcon(l);if(null==l.nSeeMode||1!=l.nSeeMode||a.record==playerID){e.ShowNameList.push(l);var m=e.getChildByName("icongif"+f);m&&(m.removeSelf(),Animationmodule.removeAni(m));if(-1!==l.nFileIndex){var m=g_pak_list[l.nFileIndex],n=new Laya.Point(l.nX+-70,l.nY-100);if(l=Animationmodule.playframe(!1,e,"data/"+m+"/",l.nIconIndex,l.nIconIndex+l.nIconCount-1,100,!0,!1,n,null,null,null,null,!1))l.name="icongif"+f}}}}}};c.SetIcon=function(a,b){if(!(1>a.series)&&a.param===b.length){var e=ObjectManage.findobject(a.record);if(e){e.icon||(e.icon=[]);for(var c=0;c<e.icon.length;c++)e.removeChild(e.icon[c]);e.icon=[];for(var c=fnDecode6BitBuf(b,b.length,!1),f=(new Zlib.Inflate(c.pszDest)).decompress(),c=0,h=1;c<a.series;c++,h++){var l=GameUtil.slice(f,28*c+h,28*c+h+28),l=TActorIcon(l);if(-1!==l.nIconIndex){switch(l.nFileIndex){case 2E3:pak="icon";break;case 65534:pak="prguse3";l.nIconIndex=295;l.nIconCount=1;break;case 65535:pak="prguse3";l.nIconIndex=296;l.nIconCount=1;break;default:pak=g_pak_list[l.nFileIndex]}for(l.nIconIndex=String(l.nIconIndex);5>l.nIconIndex.length;)l.nIconIndex="0"+l.nIconIndex;var m=new Laya.Point(l.nX+10,l.nY-100);if(l=Animationmodule.playframe(!1,e,"data/"+pak+"/",l.nIconIndex,"0"+(+l.nIconIndex+l.nIconCount-1),100,!0,!1,m,null,null,null,null,!1))l.name="humicon"+c}}}}};return c}(Laya.Image),ChangePwdScene=function(b){function c(){b.call(this);this.init()}var a=Laya.Event,d=null,e=!1;Laya["class"](c,"ChangePwdScene",b);c.prototype.init=function(){CHANGEPWDSCENE_EXIST=!0;this.onAssetLoaded();Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect)};c.prototype.onSvrConnect=function(){e=!0};c.prototype.onMsgFromSvr=function(a){if("#"===a[0]){var b=a.substring(1,a.length-1);a=b.substring(0,16);b=b.substring(16,b.length);a=DecodeMessage(a);DecodeString(b);switch(a.ident){case SM_CHGPASSWD_FAIL:this.onChangePwdErrorResult(a.record);break;case SM_CHGPASSWD_SUCCESS:this.onChangePwdSuccess()}}};c.prototype.onChangePwdErrorResult=function(a){-1==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8f93\u5165\u7684\u539f\u59cb\u5bc6\u7801\u4e0d\u6b63\u786e!",callfn:function(){}}]):-2==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u88ab\u9501\u5b9a\uff01",callfn:function(){}}]):100==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u4e2d\u5fc3\u64cd\u4f5c\u5931\u8d25\uff01",callfn:function(){}}]):101==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):102==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):103==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6e20\u9053\u65e0\u6548\uff01",callfn:function(){}}]):104==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u7ec8\u7aef\u65e0\u6548\uff01",callfn:function(){}}]):105==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237Mac\u65e0\u6548\uff01",callfn:function(){}}]):106==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237IP\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):108==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):109==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):110==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e73\u53f0\u4e0d\u5b58\u5728\u6b64\u8d26\u53f7\uff01",callfn:function(){}}]):111==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u8d26\u53f7\u65e0\u6cd5\u767b\u9646\u6b64\u5206\u533a,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",callfn:function(){}}]):112==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\u6b21\u6570\u8fc7\u591a,\u5df2\u88ab\u6c38\u4e45\u9501\u5b9a\uff0c\u89e3\u9501\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",callfn:function(){}}]):113==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u8d26\u53f7\u5df2\u7ed1\u5b9a\u5fae\u4fe1\uff01",callfn:function(){}}]):114==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u8d26\u53f7\u5df2\u7ed1\u5b9a\u90ae\u7bb1\u6216\u624b\u673a\uff01",callfn:function(){}}]):180==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u65b0\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):181==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u65b0\u5bc6\u7801\u548c\u65e7\u5bc6\u7801\u4e0d\u80fd\u76f8\u540c\uff01",callfn:function(){}}]):182==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6743\u9650\u5f02\u5e38\uff01",callfn:function(){}}]):183==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u975e\u5f53\u524d\u6e38\u620f\u6ce8\u518c\u8d26\u53f7\u65e0\u6cd5\u901a\u8fc7\u6b64\u529f\u80fd\u4fee\u6539\u5bc6\u7801\uff01",callfn:function(){}}]):184==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4fee\u6539\u5bc6\u7801\u5f02\u5e38\uff01",callfn:function(){}}]):185==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4fee\u6539\u5bc6\u7801\u5931\u8d25\uff01",callfn:function(){}}]):-1E3==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u670d\u52a1\u5668\u672a\u83b7\u53d6\u5206\u533aID\uff01",callfn:function(){}}]):-1001==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):-1002==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\uff01\uff01",callfn:function(){}}]):-1003==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u8d26\u53f7\u4e0d\u53ef\u767b\u9646\u5230\u6b64\u5206\u533a\uff01",callfn:function(){}}]):-1005==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):-1999==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u8d85\u65f6\u8bf7\u91cd\u65b0\u767b\u5f55\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8f93\u5165\u7684\u65b0\u5bc6\u7801\u957f\u5ea6\u5c0f\u4e8e5\u4f4d\uff01",callfn:function(){}}])};c.prototype.onChangePwdSuccess=function(){this.removeSelf();Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4fee\u6539\u6210\u529f",callfn:function(){}}])};c.prototype.onAssetLoaded=function(){d=new ChangePwdSceneUI;d.x=Laya.stage.width-d.width>>1;d.y=Laya.stage.height-d.height>>1;this.addChild(d);this.initregUI()};c.prototype.initregUI=function(){d.getChildByName("bg2").skin="gameres/png/00773.png";d.getChildByName("btn_ChangePwd").on(a.CLICK,this,this.onBtnClick);d.getChildByName("btn_reback").on(a.CLICK,this,this.onRebackClick);Sendmessage.connectLoginSvr(GAME_IP,GAME_PORT)};c.prototype.onBtnClick=function(){var a=d.getChildByName("username").text,b=d.getChildByName("oldpassword").text,c=d.getChildByName("password").text,l=d.getChildByName("confirmpassword").text;""===a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u540d\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):""===b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u539f\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):""===c?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u65b0\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):0<c.indexOf(" ")?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u5305\u542b\u7a7a\u683c\u5b57\u7b26",callfn:function(){}}]):""===l?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):c!=l?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",callfn:function(){}}]):e&&(d.getChildByName("username").text="",d.getChildByName("oldpassword").text="",d.getChildByName("password").text="",d.getChildByName("confirmpassword").text="",Sendmessage.sendChangePassword(a,b,c))};c.prototype.onRebackClick=function(){d.getChildByName("username").text="";d.getChildByName("oldpassword").text="";d.getChildByName("password").text="";d.getChildByName("confirmpassword").text="";this.removeSelf()};return c}(Laya.View),GameScene=function(b){function c(){c.__super.call(this);this.init()}Laya["class"](c,"GameScene",GameSceneUI);c.prototype.init=function(){this.right=this.left=this.bottom=this.top=0;this.gameMain=new UIMain;this.gameMain.top=0;this.gameMain.bottom=0;this.gameMain.left=0;this.gameMain.right=0;this.addChild(this.gameMain);this.ctrl_role_type=1;this.movetype="walk";this.moveInterval=null;this.lock_drag_screen=!1;this.lasty=this.lastx=this.lastendtime=this.lastclicktime=this.cd_time=0;this.canpick=!0;this.roleEditorLayer=this.bagLayer=null;Skillmodule.setParent(this.maplayer);Mapmodule.setParent(this.maplayer);this.area=new Laya.Sprite;this.area.graphics.drawRect(0,0,240,200);this.area.size(240,200);this.area.pos(45,240);this.area_Y=this.area.y;this.addChild(this.area);this.area.on(Laya.Event.MOUSE_DOWN,this,this.rocker_area);this.walk_rocker=new RockerUI;this.walk_rocker.pos(100,280);this.walk_rocker.visible=!0;this.addChild(this.walk_rocker);this.walk_rocker.setRockerType(g_Move_Type);this.double_rocker=new DoubleRocker;this.double_rocker.alpha=1;this.double_rocker.pos(50,340);this.addChild(this.double_rocker);this.rockertip=new Laya.Image;this.rockertip.loadImage("gameres/ui/rocke_qiu.png");this.rockertip.alpha=1;this.rockertip.left=108;this.rockertip.bottom=125;this.addChild(this.rockertip);this.chatLayer=new UIChat;this.chatLayer.zOrder=1;this.addChild(this.chatLayer);Laya.stage.on("switchRocker",this,this.singleRockerOrDoubleRocker);Laya.stage.on("togologin",this,this.initgamedata);Laya.stage.on("DrawMiniMap",this,this.drawminimap);Laya.stage.on("UPDATA_MAP",this,this.updatamap);Laya.stage.on("CREATE_PLAYER",this,this.createplayer);Laya.stage.on("LocationLoad",this,this.LocationLoad);Laya.stage.on("CREATE_OBJECT",this,this.createobject);Laya.stage.on("ROLE_DIE",this,this.roledie);Laya.stage.on("ROLE_ALIVE",this,this.rolealive);Laya.stage.on("UPDATEBUFFER",this,this.updatebuff);Laya.stage.on("CLEARBUFFER",this,this.clearbuff);Laya.stage.on("update_map_items",this,this.UpdateItems);Laya.stage.on("delete_map_items",this,this.DeleteItems);Laya.stage.on("game_dlg_cmd",this,this.DlgCmd);Laya.stage.on(Laya.Event.RESIZE,this,this.changSize);Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);Laya.stage.on("remove_hanghui_dlg",this,function(){this.HangHuiLayer&&(Laya.stage.offAll("update_notice"),Laya.stage.offAll("update_guald_user"),Laya.stage.offAll("upadte_zm_user"),Laya.stage.offAll("updata_wj_list"),Laya.stage.offAll("show_changetitle_list"),Laya.stage.offAll("show_input_node2"),this.HangHuiLayer.cloneui(),this.HangHuiLayer.removeSelf(),this.HangHuiLayer=null)});Laya.stage.on("rockertip",this,function(a){GlobalCfglist.doubleRocker||rockerposview||(this.rockertip.visible=a)});Laya.stage.on("hideSingleRocker",this,function(a){this.rockertip.visible=a});Laya.stage.on("playDice",this,this.playDice);this.RoleMenu=this.uibox=this.fishLayer=this.fishWarmLayer=this.baitanLayer=this.itemInfoLayer=this.magicEditorLayer=this.magicinfoLayer=this.Auxiliary=this.setLayer=this.friendLayer=this.HangHuiWorldLayer=this.HangHuiLayer=this.npcshopLayer=this.teamLayer=this.tradeLayer=this.shopLayer=this.depotLayer=null;this.mapItemList=[];this.StartDragPos=new Laya.Point(0,0);this.DragItemMoved=!1;this.self_object=this.lastClickAnim=null;Laya.stage.on("gameLoadSuccess",this,this.loadSuccessCall);Laya.stage.on("updatepos",this,this.updatepos);Laya.stage.on("playMapMusic",this,this.playMapMusic);Laya.timer.clear(this,this.updatemini);Laya.timer.loop(1E3,this,this.updatemini);this.maplayer.on(Laya.Event.DOUBLE_CLICK,this,this.clickattack);this.maplayer.on(Laya.Event.MOUSE_DOWN,this,this.onMousedown);this.maplayer.on(Laya.Event.MOUSE_UP,this,this.onMouseup);this.LoadDropItemAni();Laya.SoundManager.useAudioMusic=!1;window.onunload=function(){Sendmessage.sendCloseGameForH5();dyLogin(null)};window.onbeforeunload=function(){Sendmessage.sendCloseGameForH5();dyLogin(null)};Gameconfig.timerManager();this.changSize();g_serverconfig.boVoice&&VoiceSocket.connect(g_serverconfig.sVoiceIP,g_serverconfig.nVoicePort);this.mail=new mail};c.prototype.loadSuccessCall=function(){this.playMapMusic()};c.prototype.singleRockerOrDoubleRocker=function(){this.rockertip.visible=!GlobalCfglist.doubleRocker;this.walk_rocker.visible=GlobalCfglist.doubleRocker?!1:!this.rockertip.visible;var a=!this.rockertip.visible&&!this.walk_rocker.visible;this.double_rocker.visible=GlobalCfglist.doubleRocker||a;this.double_rocker.visible&&Laya.stage.event("updateRocker")};c.prototype.changSize=function(){this.area.y=this.area_Y+(Laya.stage.height-500)};c.prototype.drawminimap=function(a){this.gameMain&&this.gameMain.root&&Mapdata.drawminimap(a,this.gameMain.root)};c.prototype.onSvrConnect=function(){this.startGameScene()};c.prototype.clickattack=function(a){activate_ok||215>(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)).distance(Laya.stage.width,Laya.stage.height)||ObjectManage.clickNPC(2,a)};c.prototype.onMousedown=function(a){autopickstate&&(autopickstate=!1);a=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY);if(!(215>a.distance(Laya.stage.width,Laya.stage.height))){var b=this.maplayer.globalToLocal(a),b=new Laya.Point(Math.floor(b.x/48),Math.floor((b.y+16)/32)),e=ObjectManage.findobject(playerID),c=Laya.stage.getChildByName("openimage");c&&c.removeSelf();if(activate_ok&&e)GameUtil.JudgeMagicMp(activate_ok,e)?(activate_skilluse=activate_ok.Def.btEffect,activate_skilltype=activate_ok.Def.wMagicId,activate_skillpos=b,Objectcontrol.useskill(activate_ok.Def.btEffect,activate_ok.Def.wMagicId,b,activate_ok.Level)):Laya.stage.event("show_log",[{txt:"\u9b54\u6cd5\u4e0d\u8db3",color:"#ff0000"}]);else if(g_myHero&&g_HeroGuardOn)Sendmessage.heroGuard(b),g_HeroGuardOn=!1,Animationmodule.playframe(!1,this.maplayer,"gameres/animation/mouse_click/",1,9,100,!1,!0,a);else if(!ObjectManage.clickNPC(1)&&(this.RoleMenu&&(this.RoleMenu.visible=!1),Laya.stage.event("close_target_menu"),!Actionlock)){if(1==e.paralysis_state){var c=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.WALK),f=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.RUN);if(0==c||0==f)return}null!=this.lastClickAnim&&Animationmodule.removeAni(this.lastClickAnim);this.lastClickAnim=Animationmodule.playframe(!1,this.maplayer,"gameres/animation/mouse_click/",1,9,100,!1,!0,a);this.lastClickAnim.name="mousefloor";this.is_has_item?(g_boCobWeb?(g_Move_Type=1,a=GameUtil.getorientation(e.grid,b),Objectcontrol.objectmove({dir:a,state:g_Move_Type})):(Objectcontrol.self_obj.lastMoveTarget=this.pos,Objectcontrol.objectmove(null,this.pos)),this.is_has_item=!1):GlobalCfglist.banCkilcMove||(g_boCobWeb?(g_Move_Type=1,a=GameUtil.getorientation(e.grid,b),Objectcontrol.objectmove({dir:a,state:g_Move_Type})):(Objectcontrol.self_obj.lastMoveTarget=b,Objectcontrol.objectmove(null,b)))}}};c.prototype.onMouseup=function(a){a.touchId!=this.curTouchid||rockerposview||(this.walk_rocker.visible=!1,this.walk_rocker.is_move=!1,this.walk_rocker.rocker.pos(this.walk_rocker.use_w,this.walk_rocker.use_h),this.walk_rocker.onDragEnd())};c.prototype.rocker_area=function(a){this.curTouchid=a.touchId;this.rockertip.visible=!1;this.walk_rocker.visible=!GlobalCfglist.doubleRocker;rockerposview||this.walk_rocker.pos(Laya.stage.mouseX-this.walk_rocker.use_w,Laya.stage.mouseY-this.walk_rocker.use_h);this.walk_rocker.onDragStart(a)};c.prototype.roledie=function(){result=[new Laya.ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])];this.maplayer.filters=result;0!=lockingID&&GameUtil.delhalo(lockingID);roledielock=!0};c.prototype.rolealive=function(){this.maplayer.filters=null;roledielock=!1};c.prototype.DlgCmd=function(a){g_CurGameDlgZorder++;if("show_chongzhi"==a.id&&isWebForYYY())this.addChild(new UIRecharge);else if("show_depot"==a.id)null==this.depotLayer?(this.depotLayer=new UIDepot,this.addChild(this.depotLayer)):this.depotLayer.visible=!0,this.depotLayer.zOrder=g_CurGameDlgZorder,this.depotLayer.x=0,this.depotLayer.y=0,Laya.stage.event("update_depot");else if("show_trade"==a.id)g_Show_Bag_Type="game_trade",null==this.tradeLayer?(this.tradeLayer=new UITrade,this.addChild(this.tradeLayer)):(this.tradeLayer.visible=!0,this.tradeLayer.ResetTradeUI()),this.tradeLayer.zOrder=g_CurGameDlgZorder,this.Bag();else if("hide_trade"==a.id)this.tradeLayer&&(this.tradeLayer.visible=!1);else if("show_hanghui"==a.id)null==this.HangHuiLayer?(this.HangHuiLayer=new UIHangHui,Laya.stage.addChild(this.HangHuiLayer)):(this.HangHuiLayer.visible=!0,this.HangHuiLayer.ResetUI()),this.HangHuiLayer.zOrder=g_CurGameDlgZorder;else if("show_hanghui_world"==a.id)null==this.HangHuiWorldLayer?(this.HangHuiWorldLayer=new UIHangHuiWorld,Laya.stage.addChild(this.HangHuiWorldLayer)):this.HangHuiWorldLayer.visible=!0,this.HangHuiWorldLayer.zOrder=g_CurGameDlgZorder;else if("show_equip"==a.id)this.RoleEditor(),Laya.stage.event("update_roleeditor");else if("show_Auxiliary"==a.id)null==this.Auxiliary?(this.Auxiliary=new uiAuxiliary,Laya.stage.addChild(this.Auxiliary)):(this.Auxiliary.visible=!this.Auxiliary.visible,this.Auxiliary.visible?this.Auxiliary.ShowDlg():this.Auxiliary.BtnClick()),this.Auxiliary.zOrder=g_CurGameDlgZorder;else if("show_friend"==a.id){var b={1:"btn_friend",2:"btn_nearby",3:"btn_hmd"},e={target:{name:b[a.tag+""]}};null==b[a.tag+""]&&(e.target.name="btn_friend");null==this.friendLayer?(this.friendLayer=new UIFriend,this.friendLayer.BtnClick(e),Laya.stage.addChild(this.friendLayer)):(this.friendLayer.ResetUI(),this.friendLayer.BtnClick(e),this.friendLayer.visible=!0,Laya.stage.event("friendRequest"));this.friendLayer.zOrder=g_CurGameDlgZorder}else"show_team"==a.id?(null==this.teamLayer?(this.teamLayer=new TeamGroup,Laya.stage.addChild(this.teamLayer)):this.teamLayer.visible=!this.teamLayer.visible,this.teamLayer.zOrder=g_CurGameDlgZorder):"show_bag"==a.id?this.Bag():"show_skills"==a.id?(this.RoleEditor(),Laya.stage.event("update_roleeditor")):"show_npc_shop"==a.id?(this.npcshopLayer=Laya.stage.getChildByName("UIShop"),null==this.npcshopLayer?(Sendmessage.GetShopItems(0),Sendmessage.GetStrangeItems(),this.npcshopLayer=new UIShop,this.npcshopLayer.name="UIShop",Laya.stage.addChild(this.npcshopLayer)):this.npcshopLayer.root.visible=!0,this.npcshopLayer.zOrder=g_CurGameDlgZorder):"actor_att"==a.id?(Fightmodule.leavefight(),Movemodule.stopmove(),Objectcontrol.fight(),1==a.type?(a=Laya.Browser.now(),0==attack_lock_time?attack_lock_time=a:300>a-attack_lock_time?(attack_lock_time=a,attack_lock_state=!0):1E3<a-attack_lock_time&&(attack_lock_time=a,attack_lock_state=!1)):(b=ObjectManage.findobject(playerID),(e=g_SetupMagicList[12])&&b&&(GameUtil.israngeskill(e.Def.btEffect)?activate_ok&&activate_ok.Def.btEffect==e.Def.btEffect&&activate_ok.Def.wMagicId==e.Def.wMagicId?(activate_ok=null,Laya.stage.event("show_log",[{txt:"\u6280\u80fd\u5df2\u53d6\u6d88\uff01",color:"#ff0000"}]),Animationmodule.removeAniname("skilllockani")):(Laya.stage.event("show_log",[{txt:"\u70b9\u51fb\u9009\u62e9\u91ca\u653e\u7684\u533a\u57df\uff01",color:"#ff0000"}]),activate_ok=e,Animationmodule.removeAniname("skilllockani"),a=Animationmodule.playframe(!1,a.target,"gameres/animation/mouse_click/",41,52,100,!0,!1),a.name="skilllockani",a.pos(-12,-15)):b.m_Abil.MP>=e.Def.wSpell+e.Def.btDefSpell?(Objectcontrol.useskill(e.Def.btEffect,e.Def.wMagicId),activate_skilluse=e.Def.btEffect,activate_skilltype=e.Def.wMagicId):Laya.stage.event("show_log",[{txt:"\u9b54\u6cd5\u4e0d\u8db3",color:"#ff0000"}])))):"task_scene"==a.id?Laya.stage.addChild(new TaskScene):"exit_to_role"==a.id?this.exitgame():"change_move_type"==a.id?g_Move_Type=1==g_Move_Type?2:1:"show_magicinfo"==a.id?(null==this.magicinfoLayer?(this.magicinfoLayer=new UIMagicInfo,this.addChild(this.magicinfoLayer)):this.magicinfoLayer.ResetUI(),this.magicinfoLayer.zOrder=g_CurGameDlgZorder):"show_magiceditor"==a.id?(null==this.magicEditorLayer?(this.magicEditorLayer=new UIMagicEditor,this.addChild(this.magicEditorLayer)):this.magicEditorLayer.ResetUI(),this.magicEditorLayer.zOrder=g_CurGameDlgZorder):"show_iteminfo"==a.id?(null==this.itemInfoLayer?(this.itemInfoLayer=new UIItemInfo,Laya.stage.addChild(this.itemInfoLayer)):this.itemInfoLayer.ResetUI(a.state),this.itemInfoLayer.zOrder=99999):"show_box"==a.id?(null==this.uibox?(this.uibox=new UIBox(a.boxid),Laya.stage.addChild(this.uibox)):this.uibox.ResetUI(a.boxid),this.uibox.zOrder=99999):"show_roleMenu"==a.id?(null==this.RoleMenu?(this.RoleMenu=new UIRoleMenu(a.x,a.y,a.name,a.record,a.click_x,a.click_y),this.RoleMenu.zOrder=100,Laya.stage.addChild(this.RoleMenu)):(this.RoleMenu.visible=!0,this.RoleMenu.ResetUI(a.x,a.y,a.name,a.record,a.click_x,a.click_y)),this.RoleMenu.zOrder=g_CurGameDlgZorder):"open_box"==a.id?this.uibox&&this.uibox.showboxitemlist(a.items):"openbox_fail"==a.id?this.uibox&&this.uibox.ClosesBox():"getbox_itemindex"==a.id?this.uibox.GetBoxItemIndex(a.itemindex):"remvoe_friend"==a.id?this.friendLayer&&(this.friendLayer.removeSelf(),this.friendLayer=null):"show_baitan"==a.id?(null==this.baitanLayer?(this.baitanLayer=new UIBaiTan(a.data),this.addChild(this.baitanLayer)):this.baitanLayer.ShowDlg(a.data),this.baitanLayer.zOrder=g_CurGameDlgZorder):"show_fishwarm"==a.id?(null==this.fishWarmLayer?(this.fishWarmLayer=new FishWarn(a.data,a.tag),this.addChild(this.fishWarmLayer)):this.fishWarmLayer.ShowDlg(a.data,a.tag),this.fishWarmLayer.zOrder=g_CurGameDlgZorder):"show_fish"==a.id?(null==this.fishLayer?(this.fishLayer=new UIFish,this.addChild(this.fishLayer)):this.fishLayer.ShowDlg(),this.fishLayer.zOrder=g_CurGameDlgZorder):"open_user_mail"==a.id&&this.mail&&this.mail.openMail()};c.prototype.UpdateItems=function(a){var b=this;GameUtil.loadImg(a.Looks,"dnitems",function(e){if(ItemMgr.getInstance().HasDropItemById(a.id)){var c=new Laya.Image(e);g_item_clearlist[e]=!0;c.anchorX=.5;c.anchorY=.5;c.pivotX=c.width/2;c.pivotY=c.height/2;e=new Laya.Text;e.text=a.Name;Gameconfig.itemCheck(e.text,2)?e.color=Get2RGB(a.Color):e.color=Get2RGB(8);e.strokeColor="#000000";e.stroke=g_strokewidth;Gameconfig.itemCheck(e.text,0)||(e.visible=!1);b.maplayer.addChild(e);e.zOrder=999992;e.id=a.id;e.fontSize=16;b.mapItemList.push(e);c.on(Laya.Event.MOUSE_DOWN,b,b.ClickMapItem);c.x=48*a.x+24;c.y=32*a.y+16;c.id=a.id;b.mapItemList.push(c);b.maplayer.addChild(c);e.x=c.x-e.width/2;e.y=c.y-e.height-10;if(-1!=a.DropEffectFileIndex){e="";g_pak_list[a.DropEffectFileIndex]&&(e="data/"+g_pak_list[a.DropEffectFileIndex]+"/");var f=a.DropEffectStartOffSet,h=a.DropEffectImageCount+f-1,c=new Laya.Point(c.x+a.DropEffectOffsetX+15,c.y+a.DropEffectOffsetY+15);if(c=Animationmodule.playframe(!a.DropEffectNormalDraw,b.maplayer,e,f,h,a.DropEffectFrameTime,!0,!1,c))c.name="item"+a.id,c.id=a.id,c.zOrder=999990}}})};c.prototype.LoadDropItemAni=function(){this.reslist=[];for(var a=0;11>a;a++){var b="gameres/animation/drop_item_ani/000"+(600+a)+".png";this.reslist.push(b)}a=[];b=this.reslist;a.push({url:b,type:Laya.Loader.IMAGE});Laya.loader.load(a,Laya.Handler.create(this,function(){}))};c.prototype.ShowDropItemAni=function(a){if(void 0==a._childs[1]){var b=new Laya.Image;b.blendMode="overlay";a.addChild(b)}var e=0,c=this;a.droptimer=setInterval(function(a){a._childs[1].skin="";c.reslist[e]?(a._childs[1].skin=c.reslist[e],a._childs[1].pivotX=a._childs[1].width/2-a.width/2,a._childs[1].pivotY=a._childs[1].height/2-a.width/2,e++):(a._childs[1].skin="",clearInterval(a.droptimer))},80,a)};c.prototype.ClickMapItem=function(a){a=new Laya.Point(Math.floor(a.target.x/48),Math.floor(a.target.y/32));this.is_has_item=!0;this.pos=a};c.prototype.DeleteItems=function(a){for(var b=this.mapItemList.length-1;0<=b;b--){var e=this.mapItemList[b];if(e.id==a||1==a)this.mapItemList.splice(b,1),e.visible=!1,e.id==a?Animationmodule.removeAniname("item"+a):e.destroy()}};c.prototype.ParseItemNameFormat=function(a){var b="";1E4<=a&&(a-=1E4);for(var e=a.toString().length;5>e;e++)b+="0";return 1E4<=a?"data/dnitems1/"+b+a+".png":"data/dnitems/"+b+a+".png"};c.prototype.ParseNameFormat=function(a){for(var b="",e=a.toString().length;5>e;e++)b+="0";return"data/magicion/"+b+a+".png"};c.prototype.createplayer=function(a){this.self_object=ObjectManage.newobject(a);Objectcontrol.bindobj(this.self_object,this.maplayer,a.param,a.tag)};c.prototype.createobject=function(a){this.maplayer.addChild(a)};c.prototype.updatebuff=function(a){this.gameMain&&GameUtil.updatebuff(a,this.gameMain)};c.prototype.clearbuff=function(a){this.gameMain&&this.gameMain.root&&(a=this.gameMain.root.onLine_bonus.getChildByName(a))&&a.removeSelf()};c.prototype.updatemini=function(){this.self_object&&this.gameMain&&this.gameMain.root&&this.gameMain.root&&Mapdata.updateminimap(this.gameMain.root,this.self_object.grid.x,this.self_object.grid.y);g_tick_check&&g_tick_rate++};c.prototype.playMapMusic=function(){Laya.timer.once(350,this,function(){Laya.SoundManager.stopAll();null!=Mapdata&&""!=Mapdata.cur_music&&GameUtil.PlayMusicFormat(Mapdata.cur_music)}.bind(this))};c.prototype.updatepos=function(){if(this.self_object){var a=Math.floor(this.self_object.x/48),b=Math.floor(this.self_object.y/32);if(a!=this.lastx||b!=this.lasty)this.canpick=!0;if(!this.self_object.is_die)for(var e=ItemMgr.getInstance().DropItemList,c=0;c<e.length;c++){var f=e[c].y;if(e[c].x==a&&f==b){var h=e[c].Name;if(h){for(var l=!0,f=0;f<g_BagItemsList.length;f++)null==g_BagItemsList[f]&&(l=!1);if(l){this.canpick&&(Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]),this.lastx=a,this.lasty=b,this.canpick=!1);break}Gameconfig.itemCheck(h,1)&&!autohookstate?(e[c].show=!1,Sendmessage.ClickMapItem(a,b)):autohookstate&&Gameconfig.itemCheck(h,3)&&(e[c].show=!1,Sendmessage.ClickMapItem(a,b),f=Laya.Browser.now(),g_cannotPick[e[c].id]=f)}}}this.gameMain&&this.gameMain.root&&this.gameMain.AttNode&&this.self_object&&this.gameMain.root.panel_node&&this.gameMain.root.lbl_map_name&&this.gameMain.root.lbl_map_grid&&Mapdata&&(this.gameMain.root.lbl_map_name.text=Mapdata.cur_name,this.gameMain.root.lbl_map_grid.text=this.self_object.grid.x+":"+this.self_object.grid.y,this.btn_edge.y=32*this.self_object.grid.y-this.btn_edge.height/2,this.btn_edge.x=-400);if(Movemodule.move_list&&0<Movemodule.move_list.length&&null!=Movemodule.end_point){for(f=Mapmodule.root._childs.length-1;0<=f;f--)(a=Mapmodule.root._childs[f])&&"xunlu"==a.name&&(Laya.Pool.recover("minimap_point",a),a.removeSelf());a=Movemodule.move_list.length-Movemodule.move_index;50<Movemodule.move_list.length-Movemodule.move_index&&(a=50);for(f=Movemodule.move_index+1;f<a+Movemodule.move_index;++f)Movemodule.drawXunluPoint(Movemodule.move_list[f].x,Movemodule.move_list[f].y)}}};c.prototype.Bag=function(){null==this.bagLayer?(this.bagLayer=new UIBag,this.bagLayer.name="bagLayer",this.addChild(this.bagLayer)):(this.bagLayer.visible=!0,this.bagLayer.ShowDlg());g_CurGameDlgZorder++;this.bagLayer.zOrder=g_CurGameDlgZorder};c.prototype.Trade=function(){};c.prototype.RoleEditor=function(a){0!=playerID&&(null==this.roleEditorLayer?(this.roleEditorLayer=new UIRoleEditor(0),this.roleEditorLayer.name="roleEditorLayer",this.roleEditorLayer.zOrder=g_CurGameDlgZorder,this.addChild(this.roleEditorLayer)):(this.roleEditorLayer.visible=!0,this.roleEditorLayer.zOrder=g_CurGameDlgZorder,this.roleEditorLayer.ShowDlg(),Laya.stage.event("update_roleeditor")))};c.prototype.initgamedata=function(){Laya.stage.event("npc_log_close");Laya.stage.event("closeTimer_simplescreen");ObjectManage.delobject(-1);Animationmodule.removeAniname("autohook");Laya.stage.removeChildren();Sendmessage.SendExitToLogin();Laya.timer.clear(Gameconfig,Gameconfig.gameconfigupdate);Laya.timer.clearAll(this.gameMain);Laya.timer.clearAll(this.walk_rocker);Laya.timer.clearAll(this);Laya.stage.off("togologin",this,this.initgamedata);Laya.stage.off("DrawMiniMap",this,this.drawminimap);Laya.stage.off("UPDATA_MAP",this,this.updatamap);Laya.stage.off("CREATE_PLAYER",this,this.createplayer);Laya.stage.off("LocationLoad",this,this.LocationLoad);Laya.stage.off("CREATE_OBJECT",this,this.createobject);Laya.stage.off("ROLE_DIE",this,this.roledie);Laya.stage.off("ROLE_ALIVE",this,this.rolealive);Laya.stage.off("UPDATEBUFFER",this,this.updatebuff);Laya.stage.off("CLEARBUFFER",this,this.clearbuff);Laya.stage.off("update_map_items",this,this.UpdateItems);Laya.stage.off("delete_map_items",this,this.DeleteItems);Laya.stage.off("game_dlg_cmd",this,this.DlgCmd);Laya.stage.off(Laya.Event.RESIZE,this,this.changSize);Laya.stage.off(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);Laya.stage.offAll("new_chat_msg");Laya.stage.off("switchRocker",this,this.singleRockerOrDoubleRocker);Laya.stage.offAll("remove_hanghui_dlg");Laya.stage.offAll("rockertip");Laya.stage.offAll("hideSingleRocker");Laya.stage.off("updatepos",this,this.updatepos);Laya.stage.off("playMapMusic",this,this.playMapMusic);Laya.stage.offAll(Laya.Event.MOUSE_MOVE);Laya.stage.offAll(Laya.Event.MOUSE_OUT);Laya.stage.offAll(Laya.Event.MOUSE_UP);Laya.stage.offAll("updateRocker");Laya.stage.offAll("move_position");Laya.stage.offAll("dragEnd");Laya.stage.offAll("UPDATETASK");Laya.stage.offAll("closeTimer_simplescreen");Laya.stage.offAll("update_circum_hum");Laya.stage.offAll("update_circum_item");Laya.stage.offAll("show_alert_dlg");Laya.stage.offAll("setDrugImg");Laya.stage.offAll("update_m2set");Laya.stage.offAll("update_autoSkill");Laya.stage.offAll("update_baitan_items");Laya.stage.offAll("show_chat_from_editor");Laya.stage.offAll("show_chat_dlg");Laya.stage.offAll("get_chat_name");Laya.stage.offAll("onGetPhotoURL");Laya.stage.offAll("setCMDlist");Laya.stage.offAll("update_depot");Laya.stage.offAll("update_friend_list");Laya.stage.offAll("show_input_node");Laya.stage.offAll("update_friend_info");Laya.stage.offAll("friendRequest");Laya.stage.offAll("update_world_list");Laya.stage.offAll("show_guild_info");Laya.stage.offAll("update_magic_editor");Laya.stage.offAll("update_magic_info");Laya.stage.offAll("update_items");Laya.stage.offAll("UpDown");Laya.stage.offAll("buy_npc_item");Laya.stage.offAll("reset_img_item");Laya.stage.offAll("add_magic");Laya.stage.offAll("remove_magic");Laya.stage.offAll("update_icon");Laya.stage.offAll("skillrocke");Laya.stage.offAll("skillcd_ani");Laya.stage.offAll("update_teamlist");Laya.stage.offAll("show_input_node1");Laya.stage.offAll("update_trade_item");Laya.stage.offAll("trade_cmd");Laya.stage.offAll("update_items");Laya.stage.offAll("cannel_trade");Laya.stage.offAll("playDice");this.mail&&this.mail.clearEvent();ObjectManage.delobject(playerID);initpverallprot();GameApi.ShowMyShopMsg(!1);GameApi.ShowMyShop(!1);GameApi.ShowLookHum(!1);GameApi.Showskillwin(!1);GameApi.ShowNewNpcShop(!1);GameApi.ShowDrug(!1);GameApi.ShowScreen(!1);GameUtil.ShowNewStore(!1);GameUtil.ShowNewLogo(!1);GameUtil.ShowNewBag(!1);GameUtil.NewShowItemsClose();GameApi.LookHumShop(!1);this.uibox&&this.uibox.ClosesBox();G_Team_Grop_List=[];G_Friend_List=[];G_Friend_Target_List=[];g_showWeatherEffect&&(g_showWeatherEffect.removeSelf(),g_showWeatherEffect=null);ItemMgr.getInstance().ClearItem();MagicMgr.getInstance().ClearMagic();Mapmodule.cur_x=0;Mapmodule.cur_y=0;Mapmodule.sceneid=0};c.prototype.exitgame=function(){this.initgamedata();var a="";switch(Math.floor(100*Math.random()%3)){case 0:a="gameres/png/bj_ds.png";break;case 1:a="gameres/png/bj_fs.png";break;case 2:a="gameres/png/bj_zs.png"}g_serverconfig.nJobmode&&0==g_serverconfig.nJobmode&&(a="gameres/png/bj_zs.png");var b=new Laya.Sprite;b.name="bj_sprite";b.loadImage(a,0,0,0,0,Laya.Handler.create(this,function(){b.pivotX=b.width/2;b.pivotY=b.height/2;b.pos(browser_width/2,browser_height/2)}));Laya.stage.addChild(b);this.gameMain&&this.gameMain.clienmsg();Laya.timer.once(1E3,this,function(){var a=new RoleScene;a.centerX=0;a.centerY=0;a.getParamFromLogin(MsgFromLogin);Laya.stage.addChild(a)})};c.prototype.sendhb=function(){null==Laya.timer._getHandler(Mapmodule,Mapmodule.SceneHeartbeat)&&(Laya.timer.clear(Mapmodule,Mapmodule.SceneHeartbeat),Laya.timer.loop(500,Mapmodule,Mapmodule.SceneHeartbeat));null==Laya.timer._getHandler(Animationmodule,Animationmodule.heartbeat)&&(Laya.timer.clear(Animationmodule,Animationmodule.heartbeat),Laya.timer.loop(100,Animationmodule,Animationmodule.heartbeat))};c.prototype.sendHearBeat=function(){Sendmessage.sendhearbeat()};c.prototype.updatamap=function(a,b,e,c){g_getAtlas={};this.updateWindow();Mapmodule.clearMapImage();Laya.loader.clearUnLoaded();Sendmessage.sendhearbeat();open_minimap=!1;Sendmessage.sendOpenMinimap();Movemodule.stopmove();this.self_object&&(this.self_object.is_moveing=!1);Movemodule.end_point&&(Movemodule.end_point=null);Laya.stage.event("delete_map_items",1);ItemMgr.getInstance().DelItemFromMap();Laya.timer.clear(this,this.sendhb);Laya.timer.loop(5E3,this,this.sendhb);Laya.timer.clear(this,this.sendHearBeat);Laya.timer.loop(DELAY_INTERVAL,this,this.sendHearBeat);attackerID=0;rockerlock=Actionlock=!0;rockerfirst=chaseing=!1;lockingID&&GameUtil.delhalo(lockingID);g_cannotPick=[];Fightmodule.path_list=[];this.walk_rocker&&this.walk_rocker.leaverocker();ObjectManage.delobject();ObjectManage.resloadlist=[];Mapmodule.enterMap(a,b,e,c);Animationmodule.clearAniCacheAssets();GameUtil.clearMapItemCacheAssets();Laya.timer.clear(ObjectManage,ObjectManage.attback);g_loadmap=!0;this.self_object&&(this.self_object.cur_state=1,this.self_object.grid.x=b,this.self_object.grid.y=e,this.self_object.target_pos.x=b,this.self_object.target_pos.y=e,this.self_object.selfname.x=48*b,this.self_object.selfname.y=32*e,this.self_object.updateskin(null,this.self_object.cur_dir,!0));GameUtil.ShowNewStore(!1);Laya.stage.event("close");this.updatepos()};c.prototype.LocationLoad=function(a,b){Objectcontrol.updatepos(a,b)};c.prototype.getDataForRoleScene=function(a){dataFromRoleScene=a;GAME_PORT=parseInt(a.port);Sendmessage.connectGameSvr(GAME_IP,GAME_PORT)};c.prototype.startGameScene=function(){Sendmessage.sendRunLogin(dataFromRoleScene.uid,dataFromRoleScene.name,dataFromRoleScene.code)};c.prototype.playDice=function(a,b){var e=b.slice(27);b=b.slice(0,27);var c=DecodeString(e),e=fnDecode6BitBuf(b,b.length),e=TMessageBodyWL(e.pszDest),f=GameUtil.InstanceOfMem(NewNpcWinUI);""!=b&&(this.mouseEnabled=!1,f&&(f.visible=!1));var h=[CodeUtil._LOBYTE(CodeUtil._LOWORD(e.lParam1)),CodeUtil._HIBYTE(CodeUtil._LOWORD(e.lParam1)),CodeUtil._LOBYTE(CodeUtil._HIWORD(e.lParam1)),CodeUtil._HIBYTE(CodeUtil._HIWORD(e.lParam1)),CodeUtil._LOBYTE(CodeUtil._LOWORD(e.lParam2)),CodeUtil._HIBYTE(CodeUtil._LOWORD(e.lParam2)),CodeUtil._LOBYTE(CodeUtil._HIWORD(e.lParam2)),CodeUtil._HIBYTE(CodeUtil._HIWORD(e.lParam2)),CodeUtil._LOBYTE(CodeUtil._LOWORD(e.lTag1)),CodeUtil._HIBYTE(CodeUtil._LOWORD(e.lTag1))];Laya.stage.getChildByName("dice")&&Laya.stage.getChildByName("dice").removeSelf();var l=new Laya.Image("gameres/png/img_mask.png");l.width=Laya.stage.width;l.height=Laya.stage.height;l.mouseThrough=!0;Laya.stage.addChild(l);l.zOrder=999999999;var m=new Laya.Image("gameres/png/bg_online.png");m.name="dice";l.addChild(m);m.pos((Laya.stage.width-m.width)/2,(Laya.stage.height-m.height)/2);for(var e=[],n=0;n<a.param;n++)e.push("gameres/animation/dicing/00001"+h[n]);GameUtil.loadImgEx(e,function(){for(var b=(m.width-50*a.param)/2,d=0;d<a.param;d++){var e=new Laya.Point(50*d+b,(m.height-30)/2),n=new Laya.Image("gameres/animation/dicing/00001"+h[d]+".png");m.addChild(n);n.name="dicenum"+d;n.x=e.x;n.y=e.y;n.visible=!1;null==m.getChildByName("dicing"+d)&&(n=Animationmodule.playframe(!1,m,"gameres/animation/dicing/",1,4,100,!0,!1,null,this))&&(n.name="dicing"+d,n.num=0,n.pos(e.x,e.y))}b=parseInt(4*Math.random()+3);for(d=0;d<a.param;d++)Laya.timer.once(1E3*b,this,function(){for(var b=0;b<a.param;b++)if(m.getChildByName("dicing"+b)&&m.getChildByName("dicenum"+b)&&0==m.getChildByName("dicenum"+b).visible){Animationmodule.removeAniname("dicing"+b);m.getChildByName("dicenum"+b).visible=!0;break}});Laya.timer.once(1E3*b+3E3,this,function(){Sendmessage.SendNpcCMD(c,a.record);l.removeSelf();q.mouseEnabled=!0;f&&(f.visible=!0)})});var q=this};c.prototype.updateWindow=function(){GameApi.ShowMyShopMsg(!1);GameApi.ShowMyShop(!1);GameApi.ShowLookHum(!1);GameApi.Showskillwin(!1);GameApi.ShowNewNpcShop(!1);GameApi.ShowDrug(!1);GameApi.ShowScreen(!1);GameUtil.ShowNewStore(!1);GameUtil.NewShowItemsClose();GameApi.LookHumShop(!1);this.RoleMenu&&(this.RoleMenu.visible=!1);var a=GameUtil.InstanceOfMem(HumWinUI);if(a){var b=a.SkillListType;a.removeSelf();Laya.timer.frameOnce(5,this,function(){var a=new HumWin;Laya.stage.addChild(a);if(1==b)a.onState_skill();a.ShowItemico(-1)})}if(a=GameUtil.InstanceOfMem(NewBagUI))a.close(),Laya.timer.frameOnce(5,this,function(){var a=new NewBag;Laya.stage.addChild(a)})};return c}(GameSceneUI),LoginScene=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.btn=new Laya.Button("gameres/ui/area_button.png");this.btn.x=4;this.btn.width=200;this.btn.height=52;this.btn.labelColors="#D7B581,#D7B581";this.btn.labelPadding="6,0,6,0";this.btn.stateNum=2;this.addChild(this.btn);this.data=[];this.setlable=function(a,b){if(a){var f=a.group_name;this.app_parent=b;this.btn.label=f;this.btn.labelBold=!0;this.btn.labelStroke=3;this.btn.labelSize=24;this.btn.labelStrokeCol="#000000"}}}function d(){d.__super.call(this);this.btn1=new Laya.Button("gameres/ui/00733.png");this.btn1.x=6;this.btn1.width=257;this.btn1.height=73;this.btn1.labelColors="#D7B581,#D7B581";this.btn1.stateNum=1;this.addChild(this.btn1);this.setlable=function(a,b){this.app_parent=b;var f=a[0];-1!=f.indexOf(",")&&(f=f.split(",")[0]);this.btn1.label=f;this.btn1.name=a[0];this.btn1.labelBold=!0;this.btn1.labelStroke=3;this.btn1.labelSize=24;this.btn1.labelStrokeCol="#000000";this.btn1.once(Laya.Event.CLICK,this,function(){if(this.app_parent){sectionInfo=a[1];GameUtil.PlayMusicFormat(S_BUTTON_1);Sendmessage.sendSelectServer(this.btn1.name);g_Server_Name=this.btn1.label;var b=Laya.LocalStorage.getItem("username");g_LogSocket.AddGameDataLog(502,b,0,this.btn1.name,"")}isWebForYYY()&&gameClient.clientAction.selectServer({serverId:1,serverName:g_Server_Name},function(a){console.log(a)},function(a){console.log(a)})})}}Laya["class"](c,"LoginScene",LoginSceneUI);Laya["class"](a,"serveRender",Laya.Box);Laya["class"](d,"sectionRender",Laya.Box);c.prototype.init=function(){this.nameKey="";this.hasChooseServer=this.noticeContentEmpty=this.clickNoticeShow1Copy=!1;this.group_list=[];this.lastClickAnim=null;this.img_account_list.visible=!1;this.img_register.visible=!1;this.img_select.visible=!1;this.can_click=this.use_qqweixin=this.reqservering=!0;this.serveArray=[];this.sectionArray=[];this.notice1_bg.visible=!1;this.imageLogin.visible=!1;this.img_account.visible=!1;this.arer_near1.visible=!1;this.arer_near2.visible=!1;this.tex_name.maxChars=20;this.tex_psw.maxChars=20;this.img_server.visible=!1;this.arerArrayQSY=[];this.currAreaCell=null;this.notice_show1_copy.visible=!1;this.resetLoginIndex=0;this.list_select.visible=!1;this.nameKey=null==g_serverconfigtxt.gamelist?"sServerName":"serverName";this.last_select_index=-1;Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);Laya.stage.on("mouseFocus",this,this.mouseFocus);Laya.stage.on(Laya.Event.RESIZE,this,this.changSize);this.btn_login.on(Laya.Event.CLICK,this,this.onlogin);this.btn_zc.on(Laya.Event.CLICK,this,this.onSignInClick);this.btn_xg.on(Laya.Event.CLICK,this,this.onChangePasClick);this.btn_backserver.on(Laya.Event.CLICK,this,this.backserver);this.btn_closeaccount_qishiyou.on(Laya.Event.CLICK,this,this.backserver);this.btn_server_quit.on(Laya.Event.CLICK,this,this.serverquit);this.btn_qq.on(Laya.Event.CLICK,this,this.qqlogin);this.label_qq.on(Laya.Event.CLICK,this,this.qqlogin);this.btn_wx.on(Laya.Event.CLICK,this,this.wxlogin);this.label_wx.on(Laya.Event.CLICK,this,this.wxlogin);this.tex_name.on(Laya.Event.FOCUS,this,this.OnFocus);this.tex_psw.on(Laya.Event.FOCUS,this,this.OnFocus);this.tex_name.on(Laya.Event.BLUR,this,this.OnBlur);this.tex_psw.on(Laya.Event.BLUR,this,this.OnBlur);this.username.on(Laya.Event.FOCUS,this,this.OnFocus);this.username.on(Laya.Event.BLUR,this,this.OnBlur);this.password.on(Laya.Event.FOCUS,this,this.OnFocus);this.password.on(Laya.Event.BLUR,this,this.OnBlur);this.confirmpassword.on(Laya.Event.FOCUS,this,this.OnFocus);this.confirmpassword.on(Laya.Event.BLUR,this,this.OnBlur);Laya.stage.on("ResetLogin",this,this.ResetLogin);Laya.stage.on(Laya.Event.CLICK,this,this.clickAni);this.notice_ok.on(Laya.Event.CLICK,this,function(){this.notice_bg.visible=!1;this.lastSelectControl()});this.know_notice1_btn.on(Laya.Event.CLICK,this,function(){this.notice1_bg.visible=!1;this.clickNoticeShow1Copy&&(this.clickNoticeShow1Copy=!1,this.imageLogin.visible=!0)});this.notic_show.on(Laya.Event.CLICK,this,function(){this.updateNoticeContentArray(this.noticeListData.noticeContentArray[0]);this.notice_bg.visible=!0});this.notic_show1.on(Laya.Event.CLICK,this,function(){this.newGetNotice(this.notice1_panel,"data/json/notice1.txt");this.notice1_bg.visible=!0});this.notice_show1_copy.on(Laya.Event.CLICK,this,function(){this.clickNoticeShow1Copy=!0;this.imageLogin.visible=!1;this.newGetNotice(this.notice1_panel,"data/json/notice1.txt");this.notice1_bg.visible=!0});this.change_select.on(Laya.Event.CLICK,this,function(){this.last_select.visible=!1;this.list_select.visible=!0;this.img_account_list.visible=!0;this.img_select.visible=!1;this.showHistoryList();this.lastSelectControl()});this.checkBox_agreeMent.selected="true"!=Laya.LocalStorage.getItem("agreeagreement")?!1:!0;this.img_userAgreement_bg.visible=!1;this.img_privatePolicy_bg.visible=!1;this.newGetNotice(this.panel_userAgreement,"data/json/userAgreement.txt");this.newGetNotice(this.panel_privatePolicy,"data/json/privatePolicy.txt");this.checkBox_agreeMent.on(Laya.Event.CHANGE,this,this.onAgreement);this.txt_userAgreement.on(Laya.Event.CLICK,this,function(){this.img_userAgreement_bg.visible=!0});this.txt_privatePolicy.on(Laya.Event.CLICK,this,function(){this.img_privatePolicy_bg.visible=!0});this.no_agreement.on(Laya.Event.CLICK,this,function(){this.img_userAgreement_bg.visible=!1});this.no_policy.on(Laya.Event.CLICK,this,function(){this.img_privatePolicy_bg.visible=!1});this.clickStartIntervalTime=Laya.Browser.now();this.start_select.on(Laya.Event.CLICK,this,function(){if(this.canClickStartBtn()){var a="",b="",b="",f=this.serveArray[this.last_name.idx],b=this.getHistoryLogin(),d=Laya.LocalStorage.getItem("lastLoginIdx");null!=b[0]&&-1!=b[0].indexOf(d)&&(a=b[0]);null!=b[1]&&-1!=b[1].indexOf(d)&&(a=b[1]);b=this.getGroupAndIndexByLastNameIdx(a);d=Laya.LocalStorage.getItem("historyLoginsQiShiYou");null!=d?(console.log("\u9a91\u58eb\u6e38\u767b\u5f55\u73af\u5883"),b=JSON.parse(d),this.tex_name.text=b.punching,this.tex_psw.text=b.password,this.currAreaCell=f,null==g_serverconfigtxt.gamelist?(b=""==f.sGroupName?"\u9ed8\u8ba4\u5217\u8868":f.sGroupName,b=b+"+"+f.sServerName+"+"+f.nListIdx,this.saveHistoryLogin(b),this.selectServerLogin(f)):(b=""==f.groupName?"\u9ed8\u8ba4\u5217\u8868":f.groupName,b=b+"+"+f.serverName+"+"+f.id,this.saveHistoryLogin(b),this.splitGameConfigWEB(f))):(this.serve_list.selectedIndex=-1==b[0]?0:b[0],this.chooseserver(b[0]),this.groupListSelect(b[1]));Laya.LocalStorage.setItem("lastLoginIdx",a.split("+")[2]+"")}this.clickStartIntervalTime=Laya.Browser.now()});var a=Laya.LocalStorage.getItem("role_set_cfglist");a&&(GlobalCfglist=JSON.parse(a),Laya.SoundManager.soundVolume=GlobalCfglist.gameVoice/100,GlobalCfglist.backmusic?Laya.SoundManager.setMusicVolume(1):Laya.SoundManager.setMusicVolume(0));this.btn_zc1.on(Laya.Event.CLICK,this,function(){this.agreeUserAgreementAndPrivatePolicy()&&(this.reg_bg.visible=!0)});this.btn_reg.on(Laya.Event.CLICK,this,this.regAccount);this.btn_reback.on(Laya.Event.CLICK,this,function(){this.username.text="";this.password.text="";this.confirmpassword.text="";this.reg_bg.visible=!1});this.btn_closeaccount_list.on(Laya.Event.CLICK,this,function(){this.list_select.visible=!1;this.img_select.visible=!0;this.img_account_list.visible=!1;this.last_select.visible=!0;this.backSeverByNoChooseServer()});var a=Laya.LocalStorage.getItem("username"),b=Laya.LocalStorage.getItem("userpsw");null==a?this.tex_name.text="":this.tex_name.text=a;null==b?this.tex_psw.text="":this.tex_psw.text=b;Laya.SoundManager.useAudioMusic=!1;GameUtil.PlayMusicFormat(S_LOGIN_GAME);this.str_length=20;a=Laya.stage.getChildByName("loading");null==a&&(a=new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),a=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/loading/",1,8,100,!0,!1,a),a.name="loading",a.zOrder=999999);this.show_qq_wx(!1);this.changSize();if(window.location&&window.location.href&&(a=window.location.href,""!=a)){var b=a.indexOf("gdyusername\x3d"),f=a.indexOf("gdypassword\x3d");if(-1!=b&&-1!=b)var d=a.slice(b+12,f-1),c=a.slice(f+12,a.length);d&&c&&(this.tex_name.text=d,this.tex_psw.text=c)}d="";document&&document.referrer&&-1!=document.referrer.indexOf("p\x3d")?d=document.referrer:window.location&&window.location.href&&-1!=window.location.href.indexOf("p\x3d")&&(d=window.location.href);""!=d&&(c=d.indexOf("p\x3d"),-1!=c&&(d=d.slice(c+2,d.length),g_ChannelId=parseInt(d)));if(this.serversite=Laya.Loader.getRes("json/serversite.txt")){this.serversite=this.serversite.toString();this.serversite=this.serversite.split("\r\n");this.routeSel.labels="";for(d=0;d<this.serversite.length;d++)this.routeSel.labels+="\u7ebf\u8def"+(d+1)+",";this.routeSel.labels+="\u9ed8\u8ba4";this.routeSel.y=455;this.routeSel.x=(870-this.routeSel.width)/2}d=Laya.LocalStorage.getItem("routeSel");if(null==d||"null"==d||void 0==d)d=-1;this.routeSel.selectedIndex=d&&-1!=d?d:this.routeSel._childs.length-1;this.routeSel.selectHandler=new Laya.Handler(this,this.routeSelect);this.btn_forgetPsw.on(Laya.Event.CLICK,this,function(){this.bg1.visible=!0});this.btn_reback1.on(Laya.Event.CLICK,this,this.closeFind);this.btn_FindPwd.on(Laya.Event.CLICK,this,function(){Sendmessage.getBackPassword(this.find_name.text+"\t"+this.find_q1.text+"\t"+this.find_a1.text+"\t"+this.find_q2.text+"\t"+this.find_a2.text+"\t"+this.find_birthday.text);this.closeFind()});this.btn_findPas.on(Laya.Event.CLICK,this,function(){this.tex_psw.text=this.pas_findPas.text;this.img_findPas.visible=!1;this.pas_findPas.text=""});Laya.stage.on("dupdate_account",this,function(){this.set_name.text=this.tex_name.text;this.bg2.visible=!0});this.btn_reback2.on(Laya.Event.CLICK,this,this.closeUpdate);this.btn_update.on(Laya.Event.CLICK,this,function(){if(""!=this.set_birthday.text&&""!=this.set_q1.text&&""!=this.set_a1.text&&""!=this.set_q2.text&&""!=this.set_a2.text&&this.checkBirthday(this.set_birthday.text)){var a=new TUserEntry(this.tex_name.text,"jauTec@chuanqi.com",this.tex_psw.text),b=new TUserEntryAdd(this.tex_name.text,this.tex_psw.text);a.sQuiz_20=this.set_q1.text;a.sAnswer_12=this.set_a1.text;b.sBirthDay_10=this.set_birthday.text;b.sQuiz2_20=this.set_q2.text;b.sAnswer2_12=this.set_a2.text;Sendmessage.sendUpdateAccount(a.toArray(this.str_length),b.toArray(this.str_length))}});this.cache.visible=!1;cur_use_app&&(this.cache.visible=!0,this.cache.on(Laya.Event.CLICK,this,function(){Laya.stage.event("show_alert_dlg",[{type:6,txt:"\u6e05\u7406\u672c\u5730\u8d44\u6e90...",callfn:function(){}}]);sendtonative("clearAllCache")}));getisSimulator();this.real_ui.btn_ok.on(Laya.Event.CLICK,this,function(){var a=this.real_ui.ti_id.text+"/"+this.real_ui.ti_name.text+"/"+this.tex_name.text+"/"+this.tex_psw.text;console.log("--\x3e ",a);Sendmessage.SendUpdatidcard(a)});Laya.stage.on("getGameList",this,this.listInitShow);Laya.stage.on("GameConfigSuccess",this,this.enterGameFunction)};c.prototype.backSeverByNoChooseServer=function(){this.hasChooseServer||this.backserver()};c.prototype.canClickStartBtn=function(){return 600<=Laya.Browser.now()-this.clickStartIntervalTime};c.prototype.onAgreement=function(){Laya.LocalStorage.setItem("agreeagreement",this.checkBox_agreeMent.selected?"true":"false")};c.prototype.OnJason_test=function(){};c.prototype.changSize=function(){};c.prototype.clickAni=function(a){var b=GameUtil.InstanceOfMem(GameSceneUI);if(!b||a.target!=b.maplayer||ObjectManage.mouseClickCheck())a=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),null!=this.lastClickAnim&&Animationmodule.removeAni(this.lastClickAnim),this.lastClickAnim=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/mouse_click/",10,12,8,!1,!0,a),this.lastClickAnim.name="mouseclick"};c.prototype.show_qq_wx=function(a){this.label_qq.visible=a;this.label_wx.visible=a;this.btn_qq.visible=a;this.btn_wx.visible=a;if(this.label_qqwx.visible=a)this.panel_login.y=80};c.prototype.OnFocus=function(a){a=a.name;!cur_use_app||"tex_name"!=a&&"tex_psw"!=a?!cur_use_app||"username"!=a&&"useremail"!=a?!cur_use_app||"password"!=a&&"confirmpassword"!=a||(this.reg_bg.top=-100):this.reg_bg.top=0:this.imageLogin.centerY=-150};c.prototype.OnBlur=function(a){a=a.name;!cur_use_app||"tex_name"!=a&&"tex_psw"!=a?!cur_use_app||"username"!=a&&"useremail"!=a&&"password"!=a&&"confirmpassword"!=a||(this.reg_bg.y=40):this.imageLogin.centerY=0};c.prototype.routeSelect=function(a){a==this.routeSel._childs.length-1||-1==a?Laya.LocalStorage.setItem("routeSel",-1):Laya.LocalStorage.setItem("routeSel",a);(a=Laya.LocalStorage.getItem("routeSel"))&&this.serversite&&(i=-1==a?Math.floor(100*Math.random()%this.serversite.length):a,Laya.URL.setsite(this.serversite[i]),user_site=this.serversite[i])};c.prototype.mouseFocus=function(a){a?this.tex_name.focus=!0:this.tex_psw.focus=!0};c.prototype.regAccount=function(){var a=this.username.text,b=this.password.text,f=this.confirmpassword.text;""==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u540d\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):/^[\u4e00-\u9fa5]+$/.test(a)?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u540d\u4e0d\u80fd\u5305\u542b\u4e2d\u6587",callfn:function(){}}]):4>a.length?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u5fc5\u987b\u5927\u4e8e\u6216\u7b49\u4e8e4\u4e2a\u5b57\u7b26",callfn:function(){}}]):""==b?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):0<=b.indexOf(" ")?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u5305\u542b\u7a7a\u683c\u5b57\u7b26",callfn:function(){}}]):""==f?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):b!=f?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",callfn:function(){}}]):4>b.length||4>f.length?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e4\u4e2a\u5b57\u7b26",callfn:function(){}}]):this.checkBirthday(this.reg_birthday.text)?""==this.reg_que1.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u95ee\u9898\u4e00\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):""==this.reg_que2.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u95ee\u9898\u4e8c\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):""==this.reg_ans1.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7b54\u6848\u4e00\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):""==this.reg_ans2.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7b54\u6848\u4e8c\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]):this.reg_que1.text==this.reg_que2.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u95ee\u9898\u4e00\u548c\u95ee\u9898\u4e8c\u4e0d\u80fd\u76f8\u540c",callfn:function(){}}]):(f=new TUserEntry(a,"jauTec@chuanqi.com",b,this.reg_que1.text,this.reg_ans1.text),a=new TUserEntryAdd(a,b,this.reg_que2.text,this.reg_ans2.text,this.reg_birthday.text),isSocketConnected&&Sendmessage.sendNewAccount(f.toArray(this.str_length),a.toArray(this.str_length))):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u751f\u65e5\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u586b\u5199\u3002",callfn:function(){}}])};c.prototype.noticeItemHeight=0;c.prototype.updateNoticeContentArray=function(a){var b=a[a.length-1].positionY+a[a.length-1].fontSize;this.notice_panel.repeatY=b<this.notice_panel.height?0:a.length;this.noticeItemHeight=Math.ceil(b/a.length);this.presetNoticeItemHeight(this.notice_panel._cells,this.noticeItemHeight);this.notice_panel.array=a;this.notice_panel.scrollBar.value=0};c.prototype.presetNoticeItemHeight=function(a,b){var f,d;for(d in a)if(f=a[d])f.height=b};c.prototype.updateNoticeContent=function(a,b){var f=a.dataSource;a.fontSize=f.fontSize;a.color=Get2RGB(f.colorValue);a.text=f.content;a.height=this.noticeItemHeight;a.pos(f.positionX,f.positionY)};c.prototype.initNoticeContentList=function(){this.notice_bg.visible=!0;this.notice_panel.selectEnable||(this.notice_panel.vScrollBarSkin="",this.notice_panel.repeatX=1,this.notice_panel.selectEnable=!0,this.notice_panel.renderHandler=new Laya.Handler(this,this.updateNoticeContent));this.updateNoticeContentArray(this.noticeListData.noticeContentArray[0])};c.prototype.initNoticeTitleList=function(){this.notice_bg.visible=!0;this.noticeListData||(this.noticeListData=Laya.Loader.getRes("data/json/test.json"));this.notice_directory_list.selectEnable?this.notice_directory_list.array=this.noticeListData.titleDirectoryArray:(this.selectNoticeTitleIndex=0,this.notice_directory_list.vScrollBarSkin="",this.notice_directory_list.repeatX=1,this.notice_directory_list.selectEnable=!0,this.notice_directory_list.selectHandler=new Laya.Handler(this,this.chooseNoticeTitleDirectory),this.notice_directory_list.renderHandler=new Laya.Handler(this,this.updateNoticeDirectory),this.notice_directory_list.array=this.noticeListData.titleDirectoryArray,this.notice_title_lab.text=this.noticeListData.titleDirectoryArray[0].titleContent);this.noticeListData.titleDirectoryArray[0]||(this.notice_bg.visible=!1,this.noNoticeHandle())};c.prototype.chooseNoticeTitleDirectory=function(a){this.notice_title_lab.text=this.notice_directory_list.selectedItem.titleContent;this.notice_directory_list.selection._childs[0].selected=!0;this.selectNoticeTitleIndex=a;for(var b=0;b<this.notice_directory_list._childs.length;b++)this.notice_directory_list._childs[b]._childs[0].selected=b==a;this.updateNoticeContentArray(this.noticeListData.noticeContentArray[a])};c.prototype.updateNoticeDirectory=function(a,b){var f=a._childs;f[0].label=a.dataSource.titleContent;f[1].visible=a.dataSource.newTitle;f[0].selected=this.selectNoticeTitleIndex==b};c.prototype.onselcetserver=function(b){b=b.split("/");for(var d=0;d<b.length;d++)if(""!=b[d]){var f=fnDecode6BitBuf(b[d],b[d].length,!1),f=TClientList(f.pszDest);""!=f.sServerName&&this.serveArray.push(f)}this.groupServerList();this.serve_list.vScrollBarSkin="";this.serve_list.repeatX=1;this.serve_list.repeatY=9;this.serve_list.itemRender=a;this.serve_list.selectEnable=!0;this.serve_list.selectHandler=new Laya.Handler(this,this.chooseserver);this.serve_list.renderHandler=new Laya.Handler(this,this.UpdateItem);this.serve_list.array=this.group_list};c.prototype.getGroupAndIndexByLastNameIdx=function(a){var b=[],f=0,d=(void 0===a?"":a).split("+");a=d[2];for(d=d[1];f<this.group_list.length;){for(var c=this.group_list[f],m=0;m<c.group_list.length;m++){var n=c.group_list[m],q=null==n.id?n.nListIdx:n.id;if(n[this.nameKey]==d&&q==a){b[0]=f;b[1]=m;break}}f+=1}return b};c.prototype.groupServerList=function(){for(var a=0,b={};null!=this.serveArray[a];){var f=this.serveArray[a],d=""==f.sGroupName?"default":f.sGroupName;if(null==b[d]){var c={group_name:f.sGroupName,group_list:[]};""==f.sGroupName&&(c.group_name="\u9ed8\u8ba4\u5206\u533a");c.group_list=c.group_list.concat(f);b[d]=c}else b[d].group_list.push(f);a++}for(d in b)this.group_list.push(b[d])};c.prototype.groupServerListWEB=function(){for(var a=0,b={};null!=this.serveArray[a];){var f=this.serveArray[a],d=""==f.groupName?"default":f.groupName;if(null==b[d]){var c={group_name:f.groupName,group_list:[]};""==f.groupName&&(c.group_name="\u9ed8\u8ba4\u5206\u533a");c.group_list=c.group_list.concat(f);b[d]=c}else b[d].group_list.push(f);a++}for(d in b)this.group_list.push(b[d])};c.prototype.GetBaseConfig=function(a,b){if(""!=b){if(0==a){var f=b.split("/");if(2<=f.length){if(""!=f[0]){var d=fnDecode6BitBuf(f[0],f[0].length,!1);g_serverconfig=TBaseConfig(d.pszDest);ItemHeard=1==g_serverconfig.nHelmet;g_rolemovespeed=g_serverconfig.nSpeed;g_openhook=g_serverconfig.nAutohook;g_GameType=g_serverconfig.nUimode;g_simScreen=g_serverconfig.nSimScreen;1==g_serverconfig.nAutopick?g_autopick=!0:g_autopick=!1;g_npcTxtSize=g_serverconfig.nNpcTxtSize;g_strokewidth=cur_use_app?g_serverconfig.nAppTxtSize:g_serverconfig.nH5TxtSize;console.log("BaseConfig ok")}""!=f[1]&&(d=fnDecode6BitBuf(f[1],f[1].length,!1),g_GameConfig=TGameConfig(d.pszDest),console.log("GameConfig ok"))}}if(1==a){console.log("GetDiyButtion ok");for(var f=b.split("/"),c=0;c<f.length;c++)""!=f[c]&&(d=fnDecode6BitBuf(f[c],f[c].length,!1),d=TDiyButton(d.pszDest),1==d.boOpen&&g_customBtn.push(d))}if(3==a){console.log("GetDiyGold ok");f=b.split("/");for(c=0;c<f.length;c++)""!=f[c]&&(d=fnDecode6BitBuf(f[c],f[c].length,!1),d=TDiyGold(d.pszDest),g_gameGold.push(d),d&&eval(d.sVarName)&&(eval(d.sVarName).key=d.sGoldName));Sendmessage.clsocket.End();Sendmessage.connectLoginSvr(GAME_IP,GAME_PORT);this.str_length=20;this.txt_tip.visible=!0;this.can_click=!1;Animationmodule.removeAniname("loading")}}else 1!=a&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u914d\u7f6e\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}])};c.prototype.GetBase2Config=function(a,b){if(""!=b){if(0==a){var f=fnDecode6BitBuf(b,b.length,!1);g_serverconfig=TBaseConfig(f.pszDest);ItemHeard=1==g_serverconfig.nHelmet;g_rolemovespeed=g_serverconfig.nSpeed;g_openhook=g_serverconfig.nAutohook;g_GameType=g_serverconfig.nUimode;g_simScreen=g_serverconfig.nSimScreen;1==g_serverconfig.nAutopick?g_autopick=!0:g_autopick=!1;g_npcTxtSize=g_serverconfig.nNpcTxtSize;g_strokewidth=cur_use_app?g_serverconfig.nAppTxtSize:g_serverconfig.nH5TxtSize;console.log("BaseConfig ok")}2==a&&(f=fnDecode6BitBuf(b,b.length,!1),g_GameConfig=TGameConfig(f.pszDest),console.log("GameConfig ok"));if(1==a){console.log("GetDiyButtion ok");var d=b.split("/"),c=null!=g_serverconfigtxt.gamelist;if(1==c)return;for(c=0;c<d.length;c++)""!=d[c]&&(f=fnDecode6BitBuf(d[c],d[c].length,!1),f=TDiyButton(f.pszDest),1==f.boOpen&&g_customBtn.push(f))}if(3==a&&(console.log("GetDiyGold ok"),d=b.split("/"),c=null!=g_serverconfigtxt.gamelist,1!=c)){for(c=0;c<d.length;c++)""!=d[c]&&(f=fnDecode6BitBuf(d[c],d[c].length,!1),f=TDiyGold(f.pszDest),g_gameGold.push(f),f&&eval(f.sVarName)&&(eval(f.sVarName).key=f.sGoldName));Sendmessage.clsocket.End();Sendmessage.connectLoginSvr(GAME_IP,GAME_PORT);this.str_length=20;this.txt_tip.visible=!0;this.can_click=!1;Animationmodule.removeAniname("loading")}}else 1!=a&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u914d\u7f6e\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}])};c.prototype.chooseserver=function(a){var b=this.serve_list.selectedItem,f=null==b?null:b;this.account_list.vScrollBarSkin="gameres/ui/vscroll.png";this.account_list.vScrollBarSkin="";this.account_list.selectEnable=!0;this.account_list.renderHandler=null==g_serverconfigtxt.gamelist?new Laya.Handler(this,this.UpdateGroupItem):new Laya.Handler(this,this.UpdateGroupItemWEB);this.account_list.selectHandler=new Laya.Handler(this,this.groupListSelect);this.account_list.array=null==f?[]:f.group_list;this.account_list.refresh();if(null!=b){f=0;this.selectReset();for(var d=0;d<this.serve_list.cells.length;d++)if(this.serve_list.cells[d].dataSource.group_name==b.group_name){f=d;break}this.serve_list.cells[f]._childs[0].selected=!0}this.last_select_index!=a&&(this.last_select_index=a)};c.prototype.selectReset=function(){for(var a=0;a<this.serve_list.cells.length;a++){var b=this.serve_list.cells[a];null!=b&&(b._childs[0].selected=!1)}};c.prototype.selectServerLogin=function(a){if(a){checkNative();var b=null==g_serverconfigtxt.gamelist?a.sServerip:a.serverAddr,f=null==g_serverconfigtxt.gamelist?a.nPort:a.port;-1!=b.indexOf("http:")?sendtonative("gotowebview","openurl:"+b):(Sendmessage.connectLoginSvr(b,f),g_server_area=a,null==g_serverconfigtxt.gamelist?(GAME_IP=a.sServerip,GAME_PORT=parseInt(a.nPort),port_key=a.sPassWord,g_eventBtn=a.btFun.slice(0,10),g_funBtn=a.btFun.slice(10,21),g_ServerName=a.sServerName):(GAME_IP=a.serverAddr,GAME_PORT=parseInt(a.port),port_key=a.passWord,g_eventBtn=a.btFun.slice(0,10),g_funBtn=a.btFun.slice(10,21),g_ServerName=a.serverName),Laya.LocalStorage.setItem("lastserver",g_ServerName));Laya.timer.once(15E3,this,function(){0==isSocketConnected&&Laya.Browser.window.location.reload()})}};c.prototype.groupListSelect=function(a){var b="",b="";this.currAreaCell=a=this.account_list.array[a];null!=a&&(null==g_serverconfigtxt.gamelist?(b=""==a.sGroupName?"\u9ed8\u8ba4\u5217\u8868":a.sGroupName,b=b+"+"+a.sServerName+"+"+a.nListIdx,Laya.LocalStorage.setItem("lastLoginIdx",a.nListIdx+""),this.saveHistoryLogin(b),this.selectServerLogin(a)):(b=""==a.groupName?"\u9ed8\u8ba4\u5217\u8868":a.groupName,b=b+"+"+a.serverName+"+"+a.id,Laya.LocalStorage.setItem("lastLoginIdx",a.id+""),this.saveHistoryLogin(b),this.splitGameConfigWEB(a)));this.list_select.visible=!1;this.img_account_list.visible=!1};c.prototype.onselcetsection=function(a){console.log(a);for(var b=0;b<a.length;b+=2)if(""!=a[b]){var f=a[b].split("|");this.sectionArray.push(f)}Sendmessage.sendSelectServer(a[0]);GameUtil.PlayMusicFormat(S_BUTTON_1);g_Server_Name=a[0];b=Laya.LocalStorage.getItem("username");g_LogSocket.AddGameDataLog(502,b,0,a[0],"")};c.prototype.UpdateItem=function(a,b){a.setlable(a.dataSource,this)};c.prototype.UpdateSection=function(a,b){a.setlable(a.dataSource,this)};c.prototype.UpdateGroupItem=function(a,b){a._childs[0].label=a.dataSource.sServerName};c.prototype.UpdateGroupItemWEB=function(a,b){a._childs[0].label=a.dataSource.serverName};c.prototype.UpdateGroupItemQiShiYou=function(a,b){a._childs[0].label=a.dataSource.arer_btn.label};c.prototype.ontest=function(){var a=GameUtil.InstanceOfMem(ShousWinUI);a||(a=new ShousWin,Laya.stage.addChild(a))};c.prototype.onlogin=function(){if(this.agreeUserAgreementAndPrivatePolicy())if(this.img_register.visible=!1,GameUtil.PlayMusicFormat(S_BUTTON_1),""==this.tex_name.text||""==this.tex_psw.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u540d\u6216\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",callfn:function(){}}]);else if(isSocketConnected){var a=GameApi.Trim(this.tex_name.text,"g"),b=GameApi.Trim(this.tex_psw.text,"g"),f=this.getActualLoginInfoByPlatform(a,b);Sendmessage.sendLogin(f[0],f[1]);Laya.LocalStorage.setItem("username",a);Laya.LocalStorage.setItem("userpsw",b);this.ResetLogin();LoginFunction(a,b)}};c.prototype.getActualLoginInfoByPlatform=function(a,b){if(g_serverconfigtxt&&g_serverconfigtxt.onGDYPlatform)return g_RoleAccountId=a+"@2",[a.toLowerCase()+"@2",b];g_RoleAccountId=a;return[a.toLowerCase(),b]};c.prototype.onSvrConnect=function(){this.reqservering?(this.reqservering=!1,Sendmessage.sendreqserver(server_uuid)):(isSocketConnected=!0,this.img_select.visible=!1,this.txt_tip.visible=!1,g_LogSocket.AddGameDataLog(200,"",0,"",""),user_version?this.imageLogin.visible=!1:isWebForYYY()?showAlert(g_YYY):(this.imageLogin.visible=0==cur_game_type,0==cur_game_type&&(this.notice_show1_copy.visible=!0)))};c.prototype.onMsgFromSvr=function(a){if("!"===a[a.length-1]){var b=this,f=a.substring(0,a.length-1);a=f.substring(0,16);var d=f.substring(16,f.length),f=DecodeMessage(a),d=DecodeString(d);switch(f.ident){case SM_PASSWD_FAIL:this.onPasswordErrorResult(f.record);break;case SM_PASSOK_SELECTSERVER:this.onGetServerListResult(d,f.series);break;case SM_SELECTSERVER_OK:this.onSelectSvrResult(d);break;case SM_NEWID_FAIL:this.onRegErrorResult(f.record);break;case SM_NEWID_SUCCESS:this.onRegSuccess();break;case SM_WEBH5VERSION:Animationmodule.removeAniname("loading");a=f.record+"."+f.param+"."+f.tag;Laya.LocalStorage.setItem("cl_version",a);if(a==client_version||null==client_version)if(user_version&&-1!=user_version.indexOf("sdkforyyy"))this.imageLogin.visible=!1,1==user_tpye?jscall.hello("opensdk"):2==user_tpye&&Laya.Browser.window.webkit.messageHandlers.jscall.postMessage("opensdk");else if(user_version&&-1!=user_version.indexOf("sdkforbaidu"))this.imageLogin.visible=!1,1==user_tpye?jscall.hello("openbaidu"):2==user_tpye&&Laya.Browser.window.webkit.messageHandlers.jscall.postMessage("openbaidu");else if(0!=cur_game_type)if(this.imageLogin.visible=!1,3==cur_game_type)2<=Sendmessage.clsocket.getIPPortCount()&&MRGameLogin();else if(4==cur_game_type&&0!=g_MRGameH5_userId)showAlert(g_MRGameH5_userId);else Laya.timer.once(500,this,quicksdklogin);""!=d&&g_LogSocket.OpenServer(d);cur_use_app&&"1"==g_serverconfigtxt.qqweixin&&this.show_qq_wx(f.series);break;case SM_WECHATANDQQ:this.arerArrayQSY=[];var c=d.split("|");for(a=0;a<c.length;a++){var m=c[a].split("/");5===m.length&&this.arerArrayQSY.push({arer:m[0],id:+m[1],punching:m[2],password:m[3],time:+m[4]})}if(1<this.arerArrayQSY.length){for(a=0;a<this.arerArrayQSY.length;a++)for(d=0;d<this.arerArrayQSY.length-1;d++)this.arerArrayQSY[d].id>this.arerArrayQSY[d+1].id&&(f=this.arerArrayQSY[d],this.arerArrayQSY[d]=this.arerArrayQSY[d+1],this.arerArrayQSY[d+1]=f);this.img_qishiyou_list.visible=!0;this.qishiyou_account_list.vScrollBarSkin="gameres/ui/vscroll.png";this.qishiyou_account_list.selectEnable=!0;this.qishiyou_account_list.renderHandler=new Laya.Handler(this,this.UpdateGroupItemQiShiYou);this.qishiyou_account_list.selectHandler=new Laya.Handler(this,function(a){a=this.qishiyou_account_list.array[a];this.tex_name.text=a.punching;this.tex_psw.text=a.password;null!=a.arer_btn&&this.saveHistoryLoginQiShiYou(a);this.onlogin();this.qishiyou_account_list.visible=!0});this.qishiyou_account_list.array=[];f=this.arerArrayQSY[0];d=this.arerArrayQSY[1];for(a=0;a<this.arerArrayQSY.length;a++)this.qishiyou_account_list.array.push({arer_btn:{label:this.arerArrayQSY[a].arer},punching:this.arerArrayQSY[a].punching,password:this.arerArrayQSY[a].password}),2<this.arerArrayQSY.length&&(f.time<this.arerArrayQSY[a].time&&(f=this.arerArrayQSY[a]),d.time<=this.arerArrayQSY[a].time&&f.time>=this.arerArrayQSY[a].time&&(f.arer!==this.arerArrayQSY[a].arer?d=this.arerArrayQSY[a]:this.arerArrayQSY[a-1]&&(d=this.arerArrayQSY[a-1])));this.qishiyou_account_list.refresh();this.qishiyou_arer_near1.label=f.arer;this.qishiyou_arer_near1.visible=!0;console.log("\u6700\u8fd1\u767b\u5f551:"+f.arer);this.qishiyou_arer_near1.once(Laya.Event.CLICK,this,this.historyLogin.bind(this,f));this.qishiyou_arer_near2.label=d.arer;this.qishiyou_arer_near2.visible=!0;console.log("\u6700\u8fd1\u767b\u5f552:"+d.arer);this.qishiyou_arer_near2.once(Laya.Event.CLICK,this,this.historyLogin.bind(this,d))}else if(1===this.arerArrayQSY.length)if(1==f.tag){console.log(f.tag,d);a=this.arerArrayQSY[0].punching;f=this.arerArrayQSY[0].password;this.tex_name.text=a;this.tex_psw.text=f;1==cur_game_type||2==cur_game_type||3==cur_game_type||4==cur_game_type?(this.img_account.visible=!1,this.onlogin()):this.img_account.visible=!0;this.account_name.text=a;this.account_psw.text=f;this.btn_login.visible=!1;this.btn_backserver.visible=!1;this.btn_know.on(Laya.Event.CLICK,this,function(){this.img_account.visible=!1;b.onlogin()});if(cur_use_app)Laya.timer.once(100,this,function(){onGeneratePNG(this.img_account)});1==h5BoxCheck()?OtherFunction("\u76d2\u5b50"+this.tex_name.text,E_PLATFORMSDK.BOX):OtherFunction("\u6cca\u7136"+this.tex_name.text,E_PLATFORMSDK.DOUYIN)}else console.log(f.tag,d),quick_Server_ID=parseInt(d.split("/")[1]),quick_Server_ID=null==quick_Server_ID||0==quick_Server_ID?1:quick_Server_ID,this.imageLogin.visible=!0,a=this.arerArrayQSY[0].punching,f=this.arerArrayQSY[0].password,this.tex_name.text=a,this.tex_psw.text=f,Laya.LocalStorage.setItem("username",a),Laya.LocalStorage.setItem("userpsw",f),this.onlogin();break;case SM_GETSERVERLIST:null==g_serverconfigtxt.gamelist&&(Animationmodule.removeAniname("loading"),this.onselcetserver(d),content_list=d,this.initNoticeTitleList(),this.initNoticeContentList(),this.showSelect());break;case SM_GETH5CONFIG:99==f.tag?this.GetBase2Config(f.record,d):this.GetBaseConfig(f.record,d);cur_use_app&&"true"==app_simulator&&g_serverconfig.boVirtual&&Laya.stage.event("show_alert_dlg",[{type:6,txt:"\u5f53\u524d\u65e0\u6cd5\u4f7f\u7528\u6a21\u62df\u5668\u767b\u9646\uff01",callfn:function(){}}]);break;case SM_RANDOMCODE:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5f00\u542f\u4e86\u9a8c\u8bc1\uff0c\u65e0\u6cd5\u767b\u5f55\u3002",callfn:function(){}}]);break;case SM_UPDATIDCARD:this.real_ui.visible=!0;break;case SM_UPDATIDCARD_FAIL:switch(f.record){case 0:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8ba4\u8bc1\u7cfb\u7edf\u6709\u8bef\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5904\u7406\u3002",callfn:function(){}}]);break;case -1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5b9e\u540d\u9a8c\u8bc1\u5931\u8d25\uff01\u8bf7\u8f93\u5165\u4fe1\u606f\u4e0d\u5b8c\u6574\u3002",callfn:function(){}}]);break;case -2:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5b9e\u540d\u9a8c\u8bc1\u5931\u8d25\uff01\u8fd4\u56de\u4fe1\u606f\u6709\u8bef\u3002",callfn:function(){}}]);break;case -3:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5b9e\u540d\u9a8c\u8bc1\u5931\u8d25\uff01\u8bf7\u8f93\u5165\u771f\u5b9e\u4fe1\u606f\u3002",callfn:function(){}}])}break;case SM_GETBACKPASSWD_SUCCESS:this.findPasword_s(d);break;case SM_GETBACKPASSWD_FAIL:0==f.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u8d26\u53f7\u4e0d\u5b58\u5728\u3002",callfn:function(){}}]):-1==f.record||-3==f.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4fdd\u62a4\u8d44\u6599\u6216\u751f\u65e5\u4e0d\u6b63\u786e\u3002",callfn:function(){}}]):-4==f.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5df2\u5173\u95ed\u5bc6\u7801\u627e\u56de\u670d\u52a1\u3002",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u586b\u5199\u6b63\u786e\u4fe1\u606f\u3002",callfn:function(){}}]);break;case SM_NEEDUPDATE_ACCOUNT:Laya.stage.event("dupdate_account");break;case SM_UPDATEID_SUCCESS:b=this;Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u7684\u5e10\u53f7\u4fe1\u606f\u66f4\u65b0\u6210\u529f\u3002\r\n\u8bf7\u59a5\u5584\u4fdd\u7ba1\u60a8\u7684\u5e10\u53f7\u548c\u5bc6\u7801\u3002\r\n\u5e76\u4e14\u4e0d\u8981\u56e0\u4efb\u4f55\u539f\u56e0\u628a\u5e10\u53f7\u548c\u5bc6\u7801\u544a\u8bc9\u4efb\u4f55\u5176\u4ed6\u4eba\u3002\r\n\u5982\u679c\u5fd8\u8bb0\u4e86\u5bc6\u7801\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6211\u4eec\u7684\u4e3b\u9875\u91cd\u65b0\u627e\u56de\u3002",callfn:function(){b.closeUpdate()}}]);break;case SM_UPDATEID_FAIL:b=this,Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u66f4\u65b0\u8d26\u53f7\u5931\u8d25\u3002",callfn:function(){b.closeUpdate()}}])}}};c.prototype.historyLogin=function(a){this.tex_name.text=a.punching;this.tex_psw.text=a.password;this.onlogin();this.qishiyou_account_list.visible=!0};c.prototype.lastSelectControl=function(){this.chooseserver(0)};c.prototype.showHistoryList=function(a,b){var f=null,d=null,c=this.getHistoryLogin();null!=c[0]&&(f=""==c[0]?null:c[0].split("+")[1]);null!=c[1]&&(d=""==c[1]?null:c[1].split("+")[1]);null!=f&&(this.arer_near1.label=f,this.arer_near1.visible=!0,this.arer_near1.on(Laya.Event.CLICK,this,this.recentlyLoginShow.bind(this,c[0])));null!=d&&(this.arer_near2.label=d,this.arer_near2.visible=!0,this.arer_near2.on(Laya.Event.CLICK,this,this.recentlyLoginShow.bind(this,c[1])))};c.prototype.recentlyLoginShow=function(a){var b=a.split("+")[1];if(null!=b){a=this.getGroupAndIndexByLastNameIdx(a);var f=Laya.LocalStorage.getItem("historyLoginsQiShiYou");if(null!=f){console.log("\u9a91\u58eb\u6e38\u767b\u5f55\u73af\u5883");a=null;JSON.parse(f);for(f=0;f<this.serveArray.length;f++)if(this.serveArray[f].serverName==b){a=this.serveArray[f];break}null!=a&&(this.currAreaCell=a,b=a.groupName+"+"+a.serverName+"+"+a.id,null==g_serverconfigtxt.gamelist?(this.saveHistoryLogin(b),this.selectServerLogin(a)):(this.saveHistoryLogin(b),this.splitGameConfigWEB(a)))}else this.serve_list.selectedIndex=-1==a[0]?0:a[0],this.chooseserver(a[0]),this.groupListSelect(a[1]);this.img_account_list.visible=!1;this.list_select.visible=!1}};c.prototype.onPasswordErrorResult=function(a){-1==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\uff01",callfn:function(){}}]):-2==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u8f93\u5165\u9519\u8bef\u8d85\u8fc73\u6b21\uff0c\u6b64\u5e10\u53f7\u5df2\u88ab\u6682\u65f6\u9501\u5b9a\uff0c\u8bf7\u7a0d\u5019\u518d\u767b\u5f55\uff01",callfn:function(){}}]):-3==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u5e10\u53f7\u5df2\u7ecf\u767b\u5f55\u6216\u88ab\u5f02\u5e38\u9501\u5b9a\uff0c\u8bf7\u7a0d\u5019\u518d\u767b\u5f55\uff01",callfn:function(){g_native_code&&showAlert(g_native_code)}.bind(this)}]):-4==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e2a\u5e10\u53f7\u8bbf\u95ee\u5931\u8d25\uff01\u8bf7\u4f7f\u7528\u5176\u4ed6\u5e10\u53f7\u767b\u5f55\uff0c\u6216\u8005\u7533\u8bf7\u4ed8\u8d39\u6ce8\u518c",callfn:function(){}}]):-5==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fd9\u4e2a\u5e10\u53f7\u88ab\u9501\u5b9a\uff01",callfn:function(){}}]):100==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u4e2d\u5fc3\u64cd\u4f5c\u5931\u8d25\uff01",callfn:function(){}}]):101==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):102==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):103==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6e20\u9053\u65e0\u6548\uff01",callfn:function(){}}]):104==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u7ec8\u7aef\u65e0\u6548\uff01",callfn:function(){}}]):105==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237Mac\u65e0\u6548\uff01",callfn:function(){}}]):106==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237IP\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):107==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6ce8\u518c\u7c7b\u578b\u65e0\u6548\uff01",callfn:function(){}}]):108==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):109==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):110==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e73\u53f0\u4e0d\u5b58\u5728\u6b64\u8d26\u53f7\uff01",callfn:function(){}}]):111==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u8d26\u53f7\u65e0\u6cd5\u767b\u9646\u6b64\u5206\u533a,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",callfn:function(){}}]):112==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\u6b21\u6570\u8fc7\u591a\uff0c\u5df2\u88ab\u6c38\u4e45\u9501\u5b9a\uff0c\u89e3\u9501\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",callfn:function(){}}]):-1E3==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u670d\u52a1\u5668\u672a\u83b7\u53d6\u5206\u533aID\uff01",callfn:function(){}}]):-1001==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u767b\u5f55\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):-1002==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u9519\u8bef\uff01\uff01",callfn:function(){}}]):-1003==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u8d26\u53f7\u4e0d\u53ef\u767b\u9646\u5230\u6b64\u5206\u533a\uff01",callfn:function(){}}]):-1005==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):-1999==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u8d85\u65f6\u8bf7\u91cd\u65b0\u767b\u5f55\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u5e10\u53f7\u4e0d\u5b58\u5728\u6216\u51fa\u73b0\u672a\u77e5\u9519\u8bef\uff01\uff01",callfn:function(){}}])};c.prototype.onGetServerListResult=function(a,b){if(!this.bg2.visible){isWebForYYY()&&(this.img_select.visible=!1);this.imageLogin.visible=!1;this.real_ui.visible=!1;var f=a.split("/");this.onselcetsection(f);f=Laya.LocalStorage.getItem("username");g_LogSocket.AddGameDataLog(530,f,0,g_ChannelId,g_ServerName)}};c.prototype.onSelectSvrResult=function(a){this.list_select.visible=!1;roleNetParam=a.split("/");Sendmessage.roleNetParam=roleNetParam;roleNetParam.push(this.tex_name.text);Animationmodule.playframe(!1,this,"gameres/animation/door/",22,31,100,!1,!0,null,this,this.call2back).name="door"};c.prototype.clearlogres=function(){Laya.loader.clearRes("gameres/png/00732.png");Laya.loader.clearRes("gameres/png/00790.png");Laya.loader.clearRes("gameres/png/imageLogin.png");Laya.loader.clearRes("gameres/png/img_regbg.png");Laya.loader.clearRes("gameres/png/login0.png");Laya.loader.clearRes("gameres/png/login1.png");Laya.loader.clearRes("gameres/png/login2.png");Laya.loader.clearRes("gameres/png/main_load.png");Laya.loader.clearRes("gameres/png/main_load_bg.png");Laya.loader.clearRes("gameres/png/main_load$bar.png");Laya.loader.clearRes("gameres/png/notice_bg.png");Laya.loader.clearRes("gameres/png/select_area.png")};c.prototype.call2back=function(){Laya.stage.off(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.off(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);Laya.stage.off("mouseFocus",this,this.mouseFocus);Laya.stage.offAll("dupdate_account");this.getChildByName("door");this.getChildByName("loading");Laya.stage.removeChildByName("versionlb");Laya.SoundManager.stopAll();this.clearlogres();this.removeSelf();Animationmodule.clearAniCacheAssets();var a=new RoleScene;a.centerX=0;a.centerY=0;MsgFromLogin=roleNetParam;a.getParamFromLogin(roleNetParam);for(var b=!1,f=0;f<Laya.stage._childs.length;f++)Laya.stage._childs[f]instanceof RoleScene&&(b=!0);b||Laya.stage.addChild(a);Laya.loader.clearRes(S_LOGIN_GAME)};c.prototype.randNum=function(){for(var a="",b=0;4>b;b++)a+=Math.round(9*Math.random());return a};c.prototype.randLetter=function(){for(var a="",b=0;4>b;b++)var f=Math.round(25*Math.random()),f=String.fromCharCode(f+97),a=a+f;return a};c.prototype.randAccount=function(){var a=this.randNum(),a=this.randLetter()+a,b=!0;if(g_register)for(var f=0;f<g_register.length;f++){var d=g_register[f];if(""!=g_register[f]&&-1!=a.indexOf(d)){b=!1;break}}return b?a:this.randAccount()};c.prototype.agreeUserAgreementAndPrivatePolicy=function(){this.checkBox_agreeMent.selected||(g_serverconfigtxt.brapp_id?(this.checkBox_agreeMent.selected=!0,Laya.LocalStorage.setItem("agreeagreement","true")):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u786e\u8ba4\u7528\u6237\u534f\u8bae\u548c\u9690\u79c1\u653f\u7b56\uff01\uff01\uff01",callfn:function(){}}]));return!0===this.checkBox_agreeMent.selected};c.prototype.onSignInClick=function(){if(this.agreeUserAgreementAndPrivatePolicy())if(0==g_serverconfig.nQuickregister)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u670d\u52a1\u5668\u672a\u5f00\u542f\u4e00\u952e\u6ce8\u518c\u529f\u80fd\uff0c\u8bf7\u624b\u52a8\u6ce8\u518c\uff01",callfn:function(){}}]);else{var a=this.randAccount(),b=this.randNum(),f=this.randLetter()+b;a&&f&&(this.register_name.text=a,this.register_psw.text=f,this.img_register.visible=!1,b=new TUserEntry(a,"jauTec@chuanqi.com",f),a=new TUserEntryAdd(a,f),isSocketConnected&&Sendmessage.sendNewAccount(b.toArray(this.str_length),a.toArray(this.str_length)))}};c.prototype.onRegErrorResult=function(a){0==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u5df2\u88ab\u6ce8\u518c\uff01",callfn:function(){}}]):-2==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u5e10\u53f7\u540d\u5df2\u88ab\u6ce8\u518c\u6216\u88ab\u7981\u6b62\u4f7f\u7528\uff01",callfn:function(){}}]):-3==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u548c\u5bc6\u7801\u4e0d\u80fd\u76f8\u540c\uff01",callfn:function(){}}]):-4==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u4fdd\u95ee\u9898\u548c\u7b54\u6848\u4e0d\u80fd\u76f8\u540c\uff01",callfn:function(){}}]):100==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u4e2d\u5fc3\u64cd\u4f5c\u5931\u8d25\uff01",callfn:function(){}}]):101==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):102==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):103==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6e20\u9053\u65e0\u6548\uff01",callfn:function(){}}]):104==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u7ec8\u7aef\u65e0\u6548\uff01",callfn:function(){}}]):105==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237Mac\u65e0\u6548\uff01",callfn:function(){}}]):106==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237IP\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):107==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237\u6ce8\u518c\u7c7b\u578b\u65e0\u6548\uff01 ",callfn:function(){}}]):108==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u683c\u5f0f\u9519\u8bef\uff01 ",callfn:function(){}}]):109==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff01 ",callfn:function(){}}]):113==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):114==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e6\u4f4d\u4e14\u5e94\u5305\u542b\u591a\u79cd\u7ec4\u5408\u3002",callfn:function(){}}]):115==a||116==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u95ee\u9898\u4e00\u3002",callfn:function(){}}]):117==a||118==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u56de\u7b54\u4e8c\u3002",callfn:function(){}}]):140==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):141==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u95ee\u9898\u4e00\uff01",callfn:function(){}}]):142==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u56de\u7b54\u4e00\uff01",callfn:function(){}}]):143==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u95ee\u9898\u4e8c\uff01",callfn:function(){}}]):144==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u91cd\u65b0\u586b\u5199\u56de\u7b54\u4e00\uff01",callfn:function(){}}]):145==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6635\u79f0\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):146==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7528\u6237IP\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]):147==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8d26\u53f7\u542b\u6709\u5c4f\u853d\u8bcd\uff01 ",callfn:function(){}}]):148==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8be5\u8d26\u53f7\u5728\u5e73\u53f0\u4e0a\u5df2\u88ab\u5360\u7528\uff01 ",callfn:function(){}}]):149==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6ce8\u518c\u65f6\u5f02\u5e38\uff01",callfn:function(){}}]):150==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u6743\u9650\u5f02\u5e38\uff0c\u7528\u6237\u5df2\u88ab\u5c4f\u853d\uff01",callfn:function(){}}]):151==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u6743\u9650\u5931\u8d25\uff0c\u7528\u6237\u5df2\u88ab\u5c4f\u853d\uff01",callfn:function(){}}]):-1E3==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u670d\u52a1\u5668\u672a\u83b7\u53d6\u5206\u533aID\uff01",callfn:function(){}}]):-1001==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u6ce8\u518c\u53c2\u6570\u9519\u8bef\uff01",callfn:function(){}}]):-1004==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u5df2\u88ab\u6ce8\u518c\uff01",callfn:function(){}}]):-1005==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5e10\u53f7\u521b\u5efa\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4\u5e10\u53f7\u662f\u5426\u5305\u62ec\u7a7a\u683c\u3001\u53ca\u975e\u6cd5\u5b57\u7b26\uff01",callfn:function(){}}])};c.prototype.onRegSuccess=function(){if(this.reg_bg.visible)this.tex_name.text=this.username.text,this.tex_psw.text=this.password.text,this.reg_bg.visible=!1,this.register_name.text=this.username.text,this.register_psw.text=this.password.text,this.img_register.visible=!0,this.btn_registerimg.visible=!1,this.btn_register.on(Laya.Event.CLICK,this,this.onlogin),this.username.text="",this.password.text="",this.confirmpassword.text="";else if(this.tex_name.text=this.register_name.text,this.tex_psw.text=this.register_psw.text,this.img_register.visible=!0,this.btn_register.mouseEnabled=!1,Laya.Tween.to(this.btn_registerimg,{height:0},5E3,null,Laya.Handler.create(this,this.prtscr,[this.btn_register,this.btn_registerimg])),this.btn_register.on(Laya.Event.CLICK,this,this.onlogin),cur_use_app)Laya.timer.once(200,this,function(){onGeneratePNG(this.img_register)});OtherFunction(null,E_PLATFORMSDK.YOUMENG);OtherFunction("\u975e\u6cca\u7136"+this.tex_name.text,E_PLATFORMSDK.DOUYIN);this.btn_login.visible=!1;this.btn_zc1.visible=!1;this.btn_backserver.visible=!1};c.prototype.prtscr=function(a,b){a.mouseEnabled=!0;b.visible=!1};c.prototype.onChangePasClick=function(){CHANGEPWDSCENE_EXIST||(changePwdScene=new ChangePwdScene);Laya.stage.addChild(changePwdScene)};c.prototype.serverquit=function(){this.img_select.visible=!1;this.imageLogin.visible=!0};c.prototype.backserver=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fd4\u56de\u767b\u5f55\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u52a0\u8f7d\uff01",callfn:function(){Laya.Browser.window.location.reload()}}])};c.prototype.qqlogin=function(){if(this.use_qqweixin)if(cur_use_app){if(void 0!==conchConfig&&null!==conchConfig&&conchConfig){var a=conchConfig.getOS(),b;"Conch-ios"==a?b=Laya.PlatformClass.createClass("JSBridge"):"Conch-android"==a&&(b=Laya.PlatformClass.createClass("com.testpro.game.JSBridge"));"Conch-ios"==a?b.call("qqlogiin:","hello"):"Conch-android"==a&&b.call("qqlogin")}}else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u4f7f\u7528APP\u7aef\u767b\u5f55\uff01",callfn:function(){}}]);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5df2\u7981\u6b62QQ\u3001\u5fae\u4fe1\u6ce8\u518c\u767b\u5f55",callfn:function(){}}])};c.prototype.wxlogin=function(){if(this.use_qqweixin)if(cur_use_app){if(conchConfig&&conchConfig){var a=conchConfig.getOS(),b;"Conch-ios"==a?b=Laya.PlatformClass.createClass("JSBridge"):"Conch-android"==a&&(b=Laya.PlatformClass.createClass("com.testpro.game.JSBridge"));"Conch-ios"==a?b.call("wxlogiin:","hello"):"Conch-android"==a&&b.call("wxlogin")}}else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u4f7f\u7528APP\u7aef\u767b\u5f55\uff01",callfn:function(){}}]);else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5df2\u7981\u6b62QQ\u3001\u5fae\u4fe1\u6ce8\u518c\u767b\u5f55",callfn:function(){}}])};c.prototype.closeFind=function(){this.bg1.visible=!1;this.find_name.text="";this.find_birthday.text="";this.find_q1.text="";this.find_a1.text="";this.find_q2.text="";this.find_a2.text=""};c.prototype.closeUpdate=function(){this.bg2.visible=!1;this.set_name.text="";this.set_birthday.text="";this.set_q1.text="";this.set_a1.text="";this.set_q2.text="";this.set_a2.text="";this.btn_login.visible=!0;this.btn_zc1.visible=!0;this.backserver()};c.prototype.findPasword_s=function(a){if(a&&(this.pas_findPas.text=a,this.img_findPas.visible=!0,cur_use_app))Laya.timer.once(200,this,function(){onGeneratePNG(this.img_findPas)})};c.prototype.checkBirthday=function(a){if(-1!=a.indexOf("/")){var b=a.split("/");if(3==b.length){a=parseInt(b[0]);var f=parseInt(b[1]),b=parseInt(b[2]);if(1890<a&&2101>=a&&0<f&&13>f&&0<b&&32>b)return!0}}return!1};c.prototype.noticeListData;c.prototype.newGetNotice=function(a,b){var f=Laya.Loader.getRes(b),d=5,c=5,m=[];if(f&&""!=f&&(a.removeChildren(),f=f.split("\\"),Array.isArray(f)))for(var n=0;n<f.length;n++){for(;-1!=f[n].indexOf("\x3c")&&-1!=f[n].indexOf("\x3e");){if(0!=f[n].indexOf("\x3c")){var m=f[n].indexOf("\x3c"),q=f[n].split("\x3c");f[n]=f[n].substr(m);""!=q[0]&&(m=this.MakeNoticeLabel(q[0],d,c,a))&&(d=m.x,c=m.y)}m=f[n].indexOf("\x3c");q=f[n].indexOf("\x3e");if(-1!=m&&-1!=q){if(m=f[n].substr(m+1,q-m-1),f[n]=f[n].substr(q+1),m=this.MakeNoticeLabel(m,d,c,a))d=m.x,c=m.y}else m=this.MakeNoticeLabel(f[n],d,c,a),d=m.x,c=m.y}if(m=this.MakeNoticeLabel(f[n],d,c,a))c=m.y;d=5;c+=16}};c.prototype.noNoticeHandle=function(){var a=this;this.img_account_list.visible=!1;this.list_select.visible=!1;this.noticeContentEmpty=!0;setTimeout(function(){a.hasChooseServer||a.openChooseServerByNoNotice()},300)};c.prototype.openChooseServerByNoNotice=function(){this.noticeContentEmpty=!1;this.list_select.visible=!0;this.img_account_list.visible=!0;this.lastSelectControl()};c.prototype.MakeNoticeLabel=function(a,b,f,d){a=a.toLowerCase();var c=a.split(":");a="";var m=18,n="#ffffff";b=new Laya.Point(b,f);"txt"==c[0]&&4==c.length?(a=c[1],m=c[2],n=Get2RGB(c[3])):"pos"==c[0]&&3==c.length?(b.x+=parseInt(c[1]),b.y+=parseInt(c[2])):a=c[0];""!=a&&(f=new Laya.Text,f.fontSize=m,f.color=n,f.text=a,f.valign="top",f.pos(b.x,b.y),d.addChild(f),d.vScrollBarSkin="",b.x+=GameApi.newcount(f)+GameApi.GetSpWidth(f.text));return b};c.prototype.showSelect=function(){this.img_select.visible=!0;var a=Laya.LocalStorage.getItem("lastserver");if(a&&0<this.serveArray.length)for(var b=0;b<this.serveArray.length;b++){var f=null==g_serverconfigtxt.gamelist?this.serveArray[b].sServerName:this.serveArray[b].serverName;if(this.serveArray[b]&&f==a){this.last_name.text=a;this.last_name.idx=b;this.last_select.visible=!0;this.list_select.visible=!1;this.hasChooseServer=!0;return}}else this.img_account_list.visible=!0,this.account_list.array=[],this.account_list.refresh();this.list_select.visible=!this.noticeContentEmpty;this.last_select.visible=!1;this.img_account_list.visible=!this.noticeContentEmpty};c.prototype.saveHistoryLoginQiShiYou=function(a){null==Laya.LocalStorage.getItem("historyLoginsQiShiYou")&&Laya.LocalStorage.setItem("historyLoginsQiShiYou",JSON.stringify(a))};c.prototype.saveHistoryLogin=function(a){a.split("+");var b=Laya.LocalStorage.getItem("historyLogins");if(null==b)Laya.LocalStorage.setItem("historyLogins",a+"|");else{var f="",b=b.split("|");if(1==b.length){if(b[0]==a)return;f=b[0]+"|"+a}if(2==b.length){if(b[0]==a||b[2]==a)return;f=a+"|"+b[0]}Laya.LocalStorage.setItem("historyLogins",f)}};c.prototype.getHistoryLogin=function(){var a=[],b=[],f=Laya.LocalStorage.getItem("historyLogins");null!=f&&(a=f.split("|"));for(f=0;f<a.length;f++)""!=a[f]&&b.push(a[f]);return b};c.prototype.requestGameConfigWEB=function(a){var b=new Laya.HttpRequest;b.once(Laya.Event.COMPLETE,this,function(a){g_GameConfigWEB=a.data;console.log("\x3c------GM\u914d\u7f6e\u6570\u636e------\x3e");console.log(g_GameConfigWEB);if(null!=g_GameConfigWEB){for(a=0;a<g_ServerList.length;a++)g_ServerList[a].btFun=[],g_ServerList[a].nListIdx=a+1,g_ServerList[a].btFun=this.getAuxiliaryShowData();this.setBaseConfig();this.setCustomerButton();this.setCustomerGlod();this.str_length=20;this.txt_tip.visible=!0;this.can_click=!1;Laya.stage.event("GameConfigSuccess")}}.bind(this));b.once(Laya.Event.ERROR,this,function(a){console.log("\x3c------\u8bf7\u6c42\u5931\u8d25------\x3e:");console.log(a)});b.send(a,"","get","json",["Content-Type","application/json;charset\x3dUTF-8"])};c.prototype.listInitShow=function(){Animationmodule.removeAniname("loading");this.serveArray=g_ServerList;this.groupServerListWEB();this.serve_list.vScrollBarSkin="";this.serve_list.repeatX=1;this.serve_list.repeatY=9;this.serve_list.itemRender=a;this.serve_list.selectEnable=!0;this.serve_list.selectHandler=new Laya.Handler(this,this.chooseserver);this.serve_list.renderHandler=new Laya.Handler(this,this.UpdateItem);this.serve_list.array=this.group_list;this.initNoticeTitleList();this.initNoticeContentList();this.showSelect()};c.prototype.enterGameFunction=function(){null!=this.currAreaCell&&(this.selectServerLogin(this.currAreaCell),Laya.timer.once(500,this,function(){Sendmessage.clsocket.End();Sendmessage.connectLoginSvr(GAME_IP,GAME_PORT)}))};c.prototype.getAuxiliaryShowData=function(){var a=[],b=g_GameConfigWEB.funActivity.fun,f=g_GameConfigWEB.funActivity.acty,d;for(d in f)0==f[d]&&a.push(0),1==f[d]&&a.push(1);for(var c in b)0==b[c]&&a.push(0),1==b[c]&&a.push(1);return a};c.prototype.setBaseConfig=function(){var a=g_GameConfigWEB.funActivity;g_serverconfig.nHelmet=a.helmet;g_serverconfig.nAutohook=a.autoHook;g_serverconfig.nUimode=a.uiMode;g_serverconfig.nSimScreen=a.simScreen;g_serverconfig.nAutopick=a.autoPick;g_serverconfig.nNpcTxtSize=a.npcTxtSize;g_serverconfig.nAppTxtSize=a.appFontMarginSize;g_serverconfig.nH5TxtSize=a.h5FontMarginSize;g_serverconfig.nSpeed=a.speed;g_serverconfig.sPicUrl=a.picUrl;g_serverconfig.nJobmode=a.jobMode;g_serverconfig.nCollect=a.collect;g_serverconfig.sVoiceIP=a.voiceIP;g_serverconfig.nVoicePort=a.voicePort;g_serverconfig.boPic=a.pic;g_serverconfig.nQuickregister=a.quickRegister;g_serverconfig.nAtkRange=a.atkRange;g_serverconfig.boSmoot=a.smooth;g_serverconfig.boVirtual=a.virtual;g_serverconfig.boVoice=a.voice;ItemHeard=1==g_serverconfig.nHelmet;g_rolemovespeed=g_serverconfig.nSpeed;g_openhook=g_serverconfig.nAutohook;g_GameType=g_serverconfig.nUimode;g_simScreen=g_serverconfig.nSimScreen;1==g_serverconfig.nAutopick?g_autopick=!0:g_autopick=!1;g_npcTxtSize=g_serverconfig.nNpcTxtSize;g_strokewidth=cur_use_app?g_serverconfig.nAppTxtSize:g_serverconfig.nH5TxtSize;cur_use_app&&"true"==app_simulator&&g_serverconfig.boVirtual&&Laya.stage.event("show_alert_dlg",[{type:6,txt:"\u5f53\u524d\u65e0\u6cd5\u4f7f\u7528\u6a21\u62df\u5668\u767b\u9646\uff01",callfn:function(){}}])};c.prototype.setCustomerButton=function(){var a=g_GameConfigWEB.h5DIYButtons;null!=g_customBtn.length&&0!=g_customBtn.length&&(g_customBtn.splice(0,g_customBtn.length),g_customBtn=[]);for(var b in a)if(0!=a[b].open){var f=a[b];g_customBtn.push({boOpen:f.open,nColor:f.color,nIdx:f.id,nSize:f.size,nX:f.x,nY:f.y,sCmd:f.cmd,sName:f.name})}};c.prototype.setCustomerGlod=function(){var a=g_GameConfigWEB.h5DIYGolds;null!=g_gameGold.length&&0!=g_gameGold.length&&(g_gameGold.splice(0,g_gameGold.length),g_gameGold=[]);for(var b in a){var f=a[b],f={boOpen:f.open,nIdx:f.id,nX:f.x,nY:f.y,sShowUI:f.showUI,sVarName:f.varName,sGoldName:f.goldName};g_gameGold.push(f);f&&eval(f.sVarName)&&(eval(f.sVarName).key=f.sGoldName)}};c.prototype.splitGameConfigWEB=function(a){null!=a&&(a=(g_serverconfigtxt.gamelist+"").split(this.getSplitUrlValueByPlatform())[0]+"GameConfig?gameId\x3d"+a.id,this.requestGameConfigWEB(a))};c.prototype.getSplitUrlValueByPlatform=function(){return g_serverconfigtxt&&g_serverconfigtxt.onGDYPlatform?/GameList/i:"GameList"};c.prototype.isDomainName=function(a){a=a.split(".");var b=!1,f;for(f in str){var d=str.charCodeAt(f);if(65<=d&&90>=d||97<=d&&122>=d){b=!0;break}}4==a.length&&!1;return 1==b?!0:!1};c.prototype.ResetLogin=function(){2>=Sendmessage.clsocket.getIPPortCount()||Laya.timer.loop(500,this,this.CheckIsEnterGame)};c.prototype.CheckIsEnterGame=function(){this.resetLoginIndex+=1;var a=Sendmessage.clsocket.getIPPortCount();if(40<=this.resetLoginIndex)if(4<=a)Laya.timer.clear(this,this.CheckIsEnterGame);else if(isSocketConnected){var a=GameApi.Trim(this.tex_name.text,"g"),b=GameApi.Trim(this.tex_psw.text,"g");Sendmessage.sendLogin(a.toLowerCase(),b);Laya.LocalStorage.setItem("username",a);Laya.LocalStorage.setItem("userpsw",b)}};return c}(LoginSceneUI),ClientSocket=function(){function b(){this["byte"]=new Laya.Byte;this["byte"].endian=Laya.Byte.LITTLE_ENDIAN;this.socket=new Laya.Socket;this.socket.endian=Laya.Byte.LITTLE_ENDIAN;this.socket.disableInput=!0;this.socket.on(Laya.Event.OPEN,this,this.openHandler);this.socket.on(Laya.Event.MESSAGE,this,this.receiveHandler);this.socket.on(Laya.Event.CLOSE,this,this.closeHandler);this.socket.on(Laya.Event.ERROR,this,this.socketErrorCatch);Laya.timer.clear(this,this.loopToGetMessage);Laya.timer.loop(50,this,this.loopToGetMessage);this.connect_num=0}var c=[],a=!1;this.connectToGameGate=!1;var d=0,e="";b.prototype.getIPPortCount=function(){return d};b.prototype.connect=function(b,f){a||(console.log("\u8fde\u63a5\u7f51\u5173:",b,f),Laya.Browser.onEdge||this.socket.connect(b,f),a=!0)};b.prototype.openHandler=function(b){a=!1;2==d?Sendmessage.SendCaiji(CM_LoginConnect_CJ):3!=d&&1==d&&Sendmessage.sendGetGameList(g_server_area.nListIdx);e="";console.log("\u8fde\u63a5\u7f51\u5173\u6210\u529f\uff01---------",b.target.url);Laya.timer.once(500,this,function(){isSocketConnected=!0;Laya.stage.event(CUSTOM_EVENT_SERVERCONNECT)});this.connect_num=0;d++;g_tick_ct=g_tick_rate=0;Animationmodule.removeAniname("disconnection")};b.prototype.send=function(a){this.socket.connected&&this.socket.send(a)};b.prototype.openWorker=function(){var a=this;Worker&&(this.worker=new Worker("data:,"+scriptWorker),this.worker.onmessage=function(b){a.ExecBuffers(b.data.pMsg,b.data.msgBuff,b.data.length)},this.worker.onmessageerror=function(b){console.log(b);a.worker.terminate();throw Error("ClientSocket\u6a21\u5757\uff0c\u4e3b\u7ebf\u7a0b\u53d1\u9001\u6d88\u606f\u5e8f\u5217\u5316\u5931\u8d25\u3002");},this.worker.onerror=function(b){console.log(b);if("Uncaught Error: xlh"===b.message)throw a.worker.terminate(),Error("ClientSocket\u6a21\u5757\uff0c\u7ebf\u7a0b\u53d1\u9001\u6d88\u606f\u7ed9\u4e3b\u7ebf\u7a0b\u5e8f\u5217\u5316\u5931\u8d25\u3002");a.worker.terminate();throw Error("ClientSocket\u6a21\u5757\uff0c\u5f00\u542f\u7684\u7ebf\u7a0b\u5f02\u5e38\u3002");})};b.prototype.receiveHandler=function(a){if(this.connectToGameGate){if(0<a.byteLength&&!this.worker&&(a=new Uint8Array(a),c.push.apply(c,a),20<c.length))for(;;){a=new TSocketHeader(c);if(a.dwCode1==RUNGATECODE&&a.dwCode2==RUNGATECODEX){if(a.nLength+20>c.length)break;var b=[],b=c.slice(20,a.nLength+20);if(a.wIdent==CGM_COMPDATA&&a.dwCrc!=Crc32(b,b.length)){c.shift();if(20>c.length)break;continue}this.ExecBuffers(a,b,b.length);c.splice(0,20+a.nLength)}else c.shift();if(20>c.length)break}}else"#"===a[0]&&(e+=a)};b.prototype.loopToGetMessage=function(){if(""!=e&&null!=Gamemessage&&-1!=e.indexOf("!")&&"!"==e[e.length-1]){for(var a=e.split("#"),b=0;b<a.length;++b)if(this.connectToGameGate)Gamemessage.onMsgFromSvr(a[b]);else Laya.stage.event(RECEIVE_ONMESSAGEFROMSERVER,a[b]);e=""}};b.prototype.ExecBuffers=function(a,b,d){switch(a.wIdent){case CGM_DATA:e+=byteArray2String(b,d);break;case CGM_COMPDATA:a=(new Zlib.Inflate(b)).decompress();e+=byteArray2String(a,a.length);break;case CGM_ACTIVE:this.socket.send("*")}};b.prototype.oneconnect=function(){Sendmessage.reconnectGameSvr(GAME_IP,GAME_PORT)};b.prototype.closeHandler=function(b){a=!1;g_tick_ct=g_tick_rate=0;if(Laya.Browser.now()-DELAY_TIME>1E3*g_overtime)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u5df2\u6389\u7ebf\uff01\u8bf7\u91cd\u65b0\u767b\u5f55\u6e38\u620f\uff01",callfn:function(){Laya.Browser.window.location.reload()}}]);else{if(0==game_scene_code&&0!=playerID)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7f51\u7edc\u5f02\u5e38\uff01\u8bf7\u91cd\u65b0\u767b\u5f55\u6e38\u620f\uff01",callfn:function(){Laya.Browser.window.location.reload()}}]);else if(15<this.connect_num++)Laya.stage.event("show_alert_dlg",[{type:6,txt:"\u7f51\u7edc\u5f02\u5e38\uff01\u8bf7\u91cd\u65b0\u767b\u5f55\u6e38\u620f\uff01",callfn:function(){}}]),this.connect_num=0,verify_through=!1;else if(0!=playerID)Laya.timer.once(1E3,this,function(){this.oneconnect()});7<=this.connect_num&&(b=Laya.stage.getChildByName("disconnection"),null==b&&(b=new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),b=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/disconnection/",1,8,100,!0,!1,b),b.name="disconnection",b.zOrder=999999))}};b.prototype.setrelink=function(){Laya.timer.once(1E3,this,function(){this.oneconnect()});var a=Laya.stage.getChildByName("disconnection");null==a&&(a=new Laya.Point(Laya.stage.width/2,Laya.stage.height/2),a=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/disconnection/",1,8,100,!0,!1,a),a.name="disconnection",a.zOrder=999999)};b.prototype.End=function(){this.socket.close()};b.prototype.ResetLogin=function(){if(3===d)Laya.timer.once(1E4,function(){Laya.stage.event("ResetLogin")})};b.prototype.socketErrorCatch=function(a){console.log(a);console.log("WebSocket\u51fa\u73b0\u9519\u8bef\uff01\u6267\u884c\u65ad\u7ebf\u91cd\u8fde\u903b\u8f91");Laya.timer.once(1E3,this,function(){this.oneconnect()})};return b}(),GameMessage=function(){function b(){this.playerSelf=null;this.TK_TICKTIME_TIME=-1;this.TK_DELAY_TIME=0;this.TK_CHEKTIME_TAG=!1;this.init()}var c,a,d,e=null,g=null,f=null,h=null,l=3*DELAY_INTERVAL;b.prototype.init=function(){Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr)};b.prototype.onMsgFromSvr=function(a){a.length<DEFBLOCKSIZE&&Objectcontrol.sendresult(a);var b=a.substr(0,DEFBLOCKSIZE);a=a.substr(DEFBLOCKSIZE,a.length-1-DEFBLOCKSIZE);var b=DecodeMessage(b),f=ObjectManage.findobject(b.record);if(!f||2==f.type||b.ident!=SM_RUN&&b.ident!=SM_WALK&&b.ident!=SM_RUSH&&b.ident!=SM_100HIT&&b.ident!=SM_RUSHKUNG&&b.ident!=SM_POWERHIT&&b.ident!=SM_LONGHIT&&b.ident!=SM_WIDEHIT&&b.ident!=SM_FIREHIT&&b.ident!=SM_66HIT&&b.ident!=SM_TWNHIT&&b.ident!=SM_SWORDHIT&&b.ident!=SM_HEAVYHIT&&b.ident!=SM_STRUCK&&b.ident!=SM_BACKSTEP)this.onhandlmsg(b,a);else{var d=[];d.msg=b;d.bodystr=a;f.msg_list.push(d)}};b.prototype.onhandlmsg=function(a,b){switch(a.ident){case SM_OPENMISSIONWINDOW:this.UpGlobaInf(b);break;case SM_SENDNOTICE:console.log("---\u516c\u544a---");var d=a.param,c="";0==a.record&&0==d?c=zDecodeString(b):(c=b.split("/"),(d=DecodeString(c[0]))&&98==a.series&&"0"==d[0]&&(d=d.substr(1)),-1!=d.indexOf("/")&&(d=d.split("/")[0]),c=zDecodeString(c[1]),loadmapname="data/mapdata/"+d+".map");(d=Laya.stage.getChildByName("health_hint"))&&c&&(d.txt.text=c);Sendmessage.sendNoticeOK();break;case SM_SERVERCONFIG:this.GetServerConfig(b,a);break;case SM_NEWMAP:c=DecodeString(b);this.clientEnterNewMap(a,c);break;case SM_CHANGEMAP:this.clientRecvChangeMapMessage(a,b);break;case SM_LOGON:g_GameInitFinish=!0;Sendmessage.QueryBagItems();this.clientRevLogon(a,b);break;case SM_USERNAME:this.clientRevChangeName(a,b);break;case SM_STONEVALUE:g_HPStoneAdd=a.record;g_HPStoneDec=a.param;g_MPStoneAdd=a.tag;g_MPStoneDec=a.series;E_NewPlayerID=DecodeString(b);cur_use_app&&MTPLogin();break;case SM_CHARSTATUSCHANGED:this.clientRoleStateChanged(a,b);break;case SM_OPENCOBWEBWINDING:this.OpenCobWebWinding(a,b);g_boCobWeb=!0;break;case SM_CLOSECOBWEBWINDING:this.CloseCobWebWinding(a,b);g_boCobWeb=!1;break;case SM_MAPDESCRIPTION:this.clientGetMapDescription(a,b);break;case SM_GAMEGOLDNAME:this.clientGetGameGoldName(a,b);break;case SM_GAMEPOINTNAME:this.clientGetNewGamePointName(a,b);break;case SM_GAMEGLORY:if(""!=b&&g_boOpenCaiji){var e="";a.record>g_gameGlory.value&&(e="\u589e\u52a0/\u975e\u7ed1\u5b9a/");a.record<g_gameGlory.value&&(e="\u51cf\u5c11/\u975e\u7ed1\u5b9a/");g_LogSocket.AddGameDataLog(115,"\u8363\u8a89",a.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+DecodeString(b),a.record-g_gameGlory.value)}g_gameGlory.value=a.record;break;case SM_SPECIALCMD:if(""!=b){c=fnDecode6BitBuf(b,b.length,!1);c=new Zlib.Inflate(c.pszDest);c=c.decompress();0<a.series&&(g_CMDlist=[]);for(d=0;d<a.series;d++)g_CMDlist.push(TClientCMD(GameUtil.slice(c,52*d,52*(d+1))));Laya.stage.event("setCMDlist")}break;case SM_SAFEPOINT:this.clientObjGetSafeZoneInfo(a,b);break;case SM_STONEVALUE:g_HPStoneAdd=a.record;g_HPStoneDec=a.param;g_MPStoneAdd=a.tag;g_MPStoneDec=a.series;break;case SM_ATTATCKMODE:Laya.stage.event("update_att_mode",[a.record]);g_first_entermap&&(console.log("--------------------------SM_CHANGESPEED---------------------------------------------\x3e"),Mapmodule.loadmapdata(),g_first_entermap=!1);break;case SM_NAVIGATIONINFO:this.clientGetNavigationInfo(a,b);break;case SM_CHANGELIGHT:this.clientChangeRoleLight(a);break;case SM_SHOWFASHION:this.ShowDressGodBless(a);break;case SM_CHANGESPEED:if(c=ObjectManage.findobject(a.record))c.movesd=6E4<a.param?a.param-65536:a.param,c.attsp=6E4<a.tag?a.tag-65536:a.tag,c.skillsp=6E4<a.series?a.series-65536:a.series;break;case SM_MAGIC_LVEXP:this.UpdateMagicData(a,b);break;case SM_CHANGENAMECOLOR:this.clientChangeRoleNameColor(a);break;case SM_BACKSTEP:case SM_TURN:this.clientRoleDoTurn(a,b);break;case SM_RUSHKUNG:case SM_RUSH:case SM_WALK:case SM_100HIT:this.clientRecvWalkMessage(a,b);break;case SM_RUSHKUNG_STOP:g_furious_collision_ing=!1;g_furious_collision_end=!0;Objectcontrol.move_call_result=!0;break;case SM_RUN:case SM_HORSERUN:this.clientRecvRunMessage(a,b);break;case SM_HIT:case SM_HIT_2:case SM_HIT_3:case SM_HIT_4:case SM_HIT_5:case SM_HEAVYHIT:case SM_POWERHIT:case SM_LONGHIT:case SM_WIDEHIT:case SM_BIGHIT:case SM_FIREHIT:case SM_60HIT:case SM_61HIT:case SM_62HIT:case SM_66HIT:case SM_TWNHIT:case SM_CRSHIT:case SM_43HIT:case SM_SWORDHIT:case SM_101HIT:case SM_102HIT:case SM_103HIT:this.clientRecvHitMessage(a,b);break;case SM_STRUCK:case SM_STRUCK_BLAST:case SM_HEROGROUPATTACK:case SM_NPCHSPELLCHANGED:case SM_REBOUND:this.clientRecvStruckMessage(a,b);break;case SM_BUTCH:case SM_SITDOWN:this.clientRecvRoleSitDownMessage(a);break;case SM_SPELL:this.clientRecvSpellMessage(a,b);break;case SM_DIGUP:this.clientRecvDigUpMessage(a,b);break;case SM_DIGDOWN:this.clientRecvDigDownMessage(a);break;case SM_FLYAXE:this.clientRecvFlyAXEMessage(a,b);break;case SM_LIGHTING:this.clientRecvLigthingMessage(a,b);break;case SM_SKELETON:case SM_ALIVE:this.clientRecvAliveMessage(a,b);break;case SM_DEATH:case SM_NOWDEATH:this.clientRecvDeathMessage(a,b);break;case SM_FEATURECHANGED:this.clientChangeRoleFeature(a,b);break;case SM_QUERYSELECTSHOPINFO_FAIL:this.QuerySelectShopInfoFaild(a,b);break;case SM_VIEWBAITAN:this.ViewBaiTan(a,b);break;case SM_OPENMYBAITAN:this.OpenMyBaiTan(a,b);break;case SM_ADDPAIMAIITEMFAIL:this.AddBaiTanItemFaild(a,b);break;case SM_ADDPAIMAIITEMOK:this.AddBaiTanItemOk(a,b);break;case SM_SENDSHOPNAME:g_boOpenCaiji?this.SendBaiTanName_Caiji(a,b):this.SendBaiTanName(a,b);break;case SM_BUYBAITANITEM:this.BuySomeItem(a,b);break;case SM_SENDSUPERSHILEDEFFECT:this.Play_htsd(a);break;case SM_QUERYUSERSHOPS:this.QueryShop(a,b);break;case SM_QUERYSELECTSHOPINFO:this.QuerySelectShopInfo(a,b);break;case SM_SEARCHSHOPITEMS:this.SearchShopItems(a,b);break;case SM_QUERYUSERSHOPITEMS:this.QueryUserShopItems(a,b);break;case SM_SENDBUYUSERSHOPITEM_OK:this.SendBuyUserShopItemOk(a,b);break;case SM_SENDBUYUSERSHOPITEM_FAIL:this.SendBuyUserShopItemFail(a,b);break;case SM_SENDMOVEMYSHOPITEM_OK:this.SendMoveMyShopItemOk(a,b);break;case SM_SENDMOVEMYSHOPITEM_FAIL:this.SendMoveMyShopItemFail(a,b);break;case SM_QUERYMYSHOPSELLINGITEMS:this.QueryMyShopSellingItems(a,b);break;case SM_QUERYMYSHOPSELLEDITEMS:this.QueryMyShopSelledItems(a,b);break;case SM_QUERYMYSHOPSTORAGEITEMS:this.QueryMyShopStorageItems(a,b);break;case SM_SENDADDTOMYSHOP_OK:this.SendAddToMyShopOk(a,b);break;case SM_SENDADDTOMYSHOP_FAIL:this.SendAddToMyShopFail(a,b);break;case SM_SENDCHANGEMYSHOPITEM_OK:this.SendChangeMyShopItemOk(a,b);break;case SM_SENDCHANGEMYSHOPITEM_FAIL:this.SendChangeMyShopItemFail(a,b);break;case SM_DISAPPEAR:case SM_HIDE:this.clientRecvHideMessage(a,b);break;case SM_MOVEFAIL:this.clientRecvMoveFailMessage(a,b);break;case SM_HEALTHSPELLCHANGED:this.clientRecvHealthSpellChanged(a,b);break;case SM_BEAD:this.clientChangeBead(a,b);break;case SM_ABILITY:this.clientRecvAbilityMessage(a,b);break;case SM_POISON_DECHEALTH:this.PoisonDechealth(a,b);break;case SM_POISON_DAMAGEARMOR:this.PoisonDamagearmor(a,b);break;case SM_POISON_STONE:this.PoisonStone(a,b);break;case SM_SUBABILITY:this.clientRecvSubAbilityMessage(a,b);break;case SM_DAYCHANGING:this.clientChangeLightOnDay(a);break;case SM_WEATHER:this.setWeatherEffect(a);break;case SM_ADJUST_BONUS:this.updateRoleBaseAttri(a,b);break;case SM_ITEMDESCLIST:this.clientRecvItemDescList(a,b);break;case SM_LAMPCHANGEDURA:this.ChangeUseDura(a,b);break;case SM_DURACHANGE:this.ChangeItemDura(a,b);break;case SM_OPENMISSIONWINDOWEX:this.openmissonwindowex(a,b);break;case SM_MISSIONNPC:this.openDialog(a,b);break;case SM_BLUEMISSIONLIST:this.bluemissionlist(a,b);break;case SM_MERCHANTSAY:this.open2Dialog(a,b);break;case SM_NEWTASKLIST:this.newTaskList(b);break;case SM_NEWTASKOPERATE:this.newTaskOperate(a,b);break;case SM_SENDMAILSTATE:this.mailstate(a,b);break;case SM_SENDUSERMAIL:this.getUserMail(a,b);break;case SM_SENDUSERMAILCONTENT:this.getUserMailContent(a,b);break;case SM_UPDATEUSERMAILITEM:this.getUserMailUpdate(a,b);break;case SM_MAIL_OK:this.getMailOkCode(a);break;case SM_MAIL_FAIL:this.getMailFailCode(a);break;case SM_DELETEALLMAIL:this.deleteAllMail(a,b);break;case SM_ADDNEWMAIL:this.addNewMail(a,b);break;case SM_EXTENDBAGSLOT:this.updateExtendBagItemCount(a);break;case SM_SENDUSEITEMS:this.clientGetSenduseItems(a,b);break;case SM_DROPITEM_SUCCESS:this.clientRecvDropItemSucc(a,b);break;case SM_DROPITEM_FAIL:this.clientRecvDropItemFail(a,b);break;case SM_ITEMSHOW:this.clientRecvShowItemMsg(a,b);break;case SM_ITEMHIDE:this.clientRecvHideItemMsg(a);break;case SM_STORAGEVIEW:this.MsgDepotItems(a,b);break;case SM_ADDMAGIC:this.AddMagicToRole(a,b);break;case SM_SENDMYMAGIC:this.SelfMagicData(a,b);break;case SM_FRIENDS:this.FriendOption(a,b);break;case SM_GETFRIENDINFO:this.FriendInfo(a,b);break;case SM_SENDMAGICLIST:this.MagicStaticList(a,b);break;case SM_BINDGOLDCHANGED:g_boOpenCaiji&&""!=b&&(a.record>g_bindCionNum.value&&1!=a.series?g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",a.record,"\u589e\u52a0/\u7ed1\u5b9a/"+DecodeString(b),a.record-g_bindCionNum.value):a.record<g_bindCionNum.value&&1!=a.series&&g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",a.record,"\u51cf\u5c11/\u7ed1\u5b9a/"+DecodeString(b),a.record-g_bindCionNum.value),c=CodeUtil._MAKELONG(a.param,a.tag),g_bindGoldNum.value<c?g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",a.record,"\u589e\u52a0/\u7ed1\u5b9a/"+DecodeString(b),c-g_bindGoldNum.value):g_bindGoldNum.value>c&&g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",a.record,"\u51cf\u5c11/\u7ed1\u5b9a/"+DecodeString(b),c-g_bindGoldNum.value));if(c=ObjectManage.findobject(playerID))g_bindCionNum.value=a.record,g_bindGoldNum.value=CodeUtil._MAKELONG(a.param,a.tag),Laya.stage.event("Update_Bag"),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum");break;case SM_DOUBLEEXP:m_DoubleExp=a.record;break;case SM_CHANGEGUILDNAME:this.IsHaveGrild(a,b);break;case SM_SPACEMOVE_HIDE:this.clientRecvSpaceMoveHideMsg(a);case SM_SPACEMOVE_HIDE2:this.clientRecvSpaceMove2HideMsg(a);break;case SM_SPACEMOVE_SHOW:case SM_SPACEMOVE_SHOW2:case SM_MAGSBYSSHOW:this.clientRecvSpaceMoveShowMsg(a,b);break;case SM_LEVELUP:this.clientRecvlevelup(a,b);break;case SM_HEAR:this.clientRecvActorSay(a,b);break;case SM_WINEXP:this.clientRecvWinExp(a,b);break;case SM_CUTE:this.clientRecvCuteMsg(a,b);break;case SM_WINEEXP:this.clientRecvWineMagic(a,b);break;case SM_GHOST:this.clientRecvHideMessage(a,b);break;case SM_CRY:this.clientRecvPlayerTalkMsg(a,b,6);break;case SM_GROUPMESSAGE:this.clientRecvPlayerTalkMsg(a,b,5);break;case SM_GUILDMESSAGE:this.clientRecvPlayerTalkMsg(a,b,3);break;case SM_WHISPER:this.clientRecvPlayerTalkMsg(a,b,2);break;case SM_SYSMESSAGE:this.clientRecvPlayerTalkMsg(a,b,0);break;case SM_MOVEMESSAGE:this.clientRecvMoveMessage(a,b);break;case SM_DELAYMESSAGE:this.clientRecvDelayMsg(a,b);break;case SM_CENTERMESSAGE:this.clientRecvCenterMsg(a,b);break;case SM_TOPCHATBOARDMESSAGE:this.clientRecvMsgShowOnChatTop(a,b);break;case SM_ADDITEM:this.clientRecvAddItemMessage(a,b);break;case SM_BAGITEMS:this.clientRecvGetBagItmes(a,b);break;case SM_EAT_OK:this.clientEatMsg(a,b,!0);break;case SM_EAT_FAIL:this.clientEatMsg(a,b,!1);break;case SM_DELITEM:this.clientRecvDelectItem(a,b);break;case SM_DELITEMS:this.clientRecvDelectItems(a,b);break;case SM_SENDGOODSLIST:this.ShopFormNpcItemList(a,b);break;case SM_SENDDETAILGOODSLIST:this.ShopItemInfoList(a,b);break;case SM_SENDREPAIRCOST:case SM_SENDBUYPRICE:G_Show_Item_Price=a.record;break;case SM_SENDUSEREFFECT:this.SendUserEffect(a,b);break;case SM_SENDUSERADDEFFECT:this.SendUserAddEffect(a,b);break;case SM_PLAYMAGICBALLEFFECT_GOM:this.SendUserAddEffectGom(a,b);break;case SM_USERREPAIRITEM_FAIL:Laya.stage.event("show_log",[{txt:"\u60a8\u4e0d\u80fd\u4fee\u7406\u6b64\u7269\u54c1",color:"#ff0000"}]);break;case SM_BUYITEM_SUCCESS:c=DecodeString(b);if(g_boOpenCaiji&&""!=c){var e=c.split("/"),d=e[1],h=e[2],l=e[3],z=e[0].split(":"),e="\u975e\u7ed1\u5b9a",C="\u975e\u7ed1\u5b9a\u7269\u54c1";"1"==z[0]&&(e="\u7ed1\u5b9a",C="\u5df2\u7ed1\u5b9a\u7269\u54c1");var u=DecodeString(z[1]).split("/"),z=u[0]&&-1!=u[0].indexOf("+")?u[1]:u[2],B=u[0].replace("+",""),C=C+"/"+h+"/"+u[4]+"/"+z+"/"+e;g_LogSocket.AddGameDataLog(9,B,l,d,C);d="\u51cf\u5c11/"+e+"/\u8d2d\u4e70\u7269\u54c1/NPC/"+d+"/"+B+"/"+l;C="-"+z;"\u91d1\u5e01"==h&&("\u7ed1\u5b9a"==e?g_LogSocket.AddGameDataLog(13,h,a.record,d,C):g_LogSocket.AddGameDataLog(13,h,g_GameCionNum.value-z,d,C));"\u5143\u5b9d"==h&&("\u7ed1\u5b9a"==e?g_LogSocket.AddGameDataLog(111,h,g_bindGoldNum.value-z,d,C):g_LogSocket.AddGameDataLog(111,h,g_GameGoldNum.value-z,d,C))}if("1"==c.split(":")[0]){if(c=ObjectManage.findobject(playerID))c.BindGold=a.record}else g_GameCionNum.value=a.record;Laya.stage.event("Update_Bag");Laya.stage.event("npc_shop_BUYITEM_SUCCESS");break;case SM_BUYITEM_FAIL:this.BuyItemFailed(a,b);break;case SM_SENDUSERREPAIR:this.EpairItem(a,b);break;case SM_SENDUSERSELL:this.ShellItems(a,b);break;case SM_USERREPAIRITEM_OK:g_GameCionNum.value=a.record;null!=g_MoveItems.Items&&(Laya.stage.event("show_alert_dlg",[{type:1,txt:g_MoveItems.Items.s.Name+"  \u4fee\u590d\u6210\u529f\uff01\uff01",callfn:function(){}}]),GameApi.UpdateBagItemsDura(g_MoveItems.Items.MakeIndex,a.param,a.tag));break;case SM_USERSELLITEM_OK:g_boOpenCaiji&&""!=b&&(b=DecodeString(b),c=b.split("/"),d=c[0],z=c[1],g_WaitItems.Items&&(B=g_WaitItems.Items.s.Name,l=g_WaitItems.Items.MakeIndex,C="\u975e\u7ed1\u5b9a\u7269\u54c1",g_WaitItems.Items.s.IsBind&&(C="\u5df2\u7ed1\u5b9a\u7269\u54c1"),e="\u7ed1\u5b9a",g_GameCionNum.value!=a.record&&(e="\u975e\u7ed1\u5b9a",g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",a.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/\u51fa\u552e\u7269\u54c1/NPC/"+d+"/"+B+"/"+l,z)),g_LogSocket.AddGameDataLog(10,B,l,d,C+"/\u91d1\u5e01/1/"+z+"/"+e)));g_GameCionNum.value=a.record;Laya.stage.event("Update_Bag");Laya.stage.event("Screen_Refresh_Items");break;case SM_USERSELLITEM_FAIL:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u7269\u54c1\u65e0\u6cd5\u51fa\u552e\uff01\uff01\uff01",callfn:function(){}}]);null!=g_WaitItems.Items&&(GameUtil.AddItemNewBag(g_WaitItems.Items),Laya.stage.event("Show_Bag_Item_ico"),Laya.stage.event("Screen_Add_Items",g_WaitItems.Items),g_WaitItems.Items=null);break;case SM_UPDATEITEM:this.clientRecvUpdateItem(a,b);break;case SM_DELMAGIC:this.clientRecvDeleteMagic(a.record);break;case SM_SENDMAGICLIST:this.clientRecvMagicList(a,b);break;case SM_DEALTRY_FAIL:Laya.stage.event("show_log",[{txt:"\u53ea\u6709\u4e8c\u4eba\u9762\u5bf9\u9762\u624d\u80fd\u8fdb\u884c\u4ea4\u6613\u3002",color:"#ff0000"}]);break;case SM_CREATEGROUP_FAIL:this.CreateTeamFaild(a,b);break;case SM_SENDSETTINGGEM_OK:this.setGem(a,b);break;case SM_BOXITEM:this.boxitem(a,b);break;case SM_SENDSETTINGGEM_FAIL:console.log("\u9576\u5d4c\u5b9d\u77f3\u5931\u8d25");break;case SM_CREATEGROUP_OK:this.CreateTeamOk(a,b);break;case SM_GROUPMEMBERS:this.TeamGropList(a,b);break;case SM_GROUPDELMEM_FAIL:this.DeleteTeamGroupItemFaild(a,b);break;case SM_GROUPDELMEM_OK:this.DeleteTeamGroupItemOk(a,b);break;case SM_GROUPMODECHANGED:this.ChangeTeamGroupState(a,b);break;case SM_GROUPADDMEM_FAIL:this.AddTeamMemberFaild(a,b);break;case SM_GROUPADDMEM_OK:this.AddTeamMemberOk(a,b);break;case SM_GROUPCANCEL:this.ClearTeamGroupList(a,b);break;case SM_DEALMENU:G_Trade_Other_Name=DecodeString(b);GameUtil.ShowNewBag(!0);GameApi.ShowJiaoYi(!0);break;case SM_DEALADDITEM_FAIL:null!=g_WaitItems.Items&&(GameUtil.AddItemNewBag(g_WaitItems.Items),g_WaitItems.Items=null,Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u65e0\u6cd5\u653e\u7f6e\u66f4\u591a\u7269\u54c1\u4e86\uff01\uff01",callfn:function(){}}]));break;case SM_DEALCHGGOLD_FAIL:this.dealgold=!1;g_GameCionNum.value=CodeUtil._MAKELONG(a.param,a.tag);Laya.stage.event("Show_Me_Gold",a.record);Laya.stage.event("Update_Bag");break;case SM_DEALCHGGOLD_OK:this.dealgold=!0;g_GameCionNum.value=CodeUtil._MAKELONG(a.param,a.tag);Laya.stage.event("Show_Me_Gold",a.record);Laya.stage.event("Update_Bag");GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum");g_boOpenCaiji&&""!=b&&g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",g_GameCionNum.value,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/\u4ea4\u6613\u653e\u5165\u91d1\u5e01/\u73a9\u5bb6/"+DecodeString(b),"-"+a.record);break;case SM_DEALREMOTECHGGOLD:Laya.stage.event("Show_Hum_Gold",[a.record]);break;case SM_DEALADDITEM_OK:null!=g_WaitItems.Items&&(GameApi.AddJiaoYiItems(g_WaitItems.Items),g_WaitItems.Items=null);break;case SM_DEALREMOTEADDITEM:c=fnDecode6BitBuf(b,b.length,!1);c=TClientItem(c.pszDest);GameApi.AddHumJiaoYiItems(c);break;case SM_DEALDELITEM_FAIL:null!=g_WaitItems.Items&&(GameApi.AddJiaoYiItems(g_WaitItems.Items),g_WaitItems.Items=null);break;case SM_DEALDELITEM_OK:null!=g_WaitItems.Items&&(GameUtil.AddItemNewBag(g_WaitItems.Items),Laya.stage.event("Show_Bag_Item_ico"),g_WaitItems.Items=null);break;case SM_DEALREMOTEDELITEM:c=fnDecode6BitBuf(b,b.length,!1);c=TClientItem(c.pszDest);GameApi.DelHumJiaoYiItems(c.MakeIndex);break;case SM_DEALSUCCESS:GameApi.ShowJiaoYi(!1);break;case SM_DEALCANCEL:GameApi.CloseJiaoYi();GameApi.ShowJiaoYi(!1);this.dealgold&&(g_GameCionNum.value+=g_MyJiaoYiSum);Laya.stage.event("Update_Bag");g_boOpenCaiji&&""!=b&&g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",g_GameCionNum.value,"\u589e\u52a0/\u975e\u7ed1\u5b9a/\u4ea4\u6613\u53d6\u6d88\u8fd4\u56de\u91d1\u5e01/\u73a9\u5bb6/"+DecodeString(b),g_MyJiaoYiSum);g_MyJiaoYiSum=0;break;case SM_SENGSHOPITEMS:this.ShopItemList(a,b);break;case SM_BUYSHOPITEM_FAIL:this.BuyShopItemFailed(a,b);break;case SM_SENTSHOPITEM_FAIL:this.GiftItemFailed(a,b);break;case SM_OPENDOOR_OK:c=new Laya.Point(a.param,a.tag);Mapmodule.opendoor(c);break;case SM_OPENDOOR_LOCK:this.clientRecvDoorLockMsg();break;case SM_CLOSEDOOR:c=new Laya.Point(a.param,a.tag);Mapmodule.closedoor(c);break;case SM_SENDUSERSTATE:this.LookAtUserState(a,b);break;case SM_OPENNEWGUILDDLG:this.openGuildDlg(a,b);break;case SM_OPENGUILDINFO:this.OpenGuildInfo(a,b);break;case SM_GUILDMAKEALLY_FAIL:this.GuildOptFaild(a,b);break;case SM_OPENGUILDDLG_FAIL:Laya.stage.event("show_log",[{txt:"\u6253\u5f00\u884c\u4f1a\u754c\u9762\u5931\u8d25",color:"#ff0000"}]);break;case SM_GUILDBREAKALLY_FAIL:this.GuildFialdFail(a,b);break;case SM_SENDGUILDMEMBERLIST:this.guildMemberList(a,b);break;case SM_GUILDADDMEMBER_OK:Sendmessage.sendGuildMemberList();Laya.stage.event("show_log",[{txt:"\u52a0\u5165\u884c\u4f1a\u6210\u529f\uff01",color:"#ff0000"}]);break;case SM_GUILDADDMEMBER_FAIL:c="";1==a.record?c="\u4f60\u6ca1\u6709\u6743\u5229\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\u3002":2==a.record?c="\u60f3\u52a0\u5165\u8fdb\u6765\u7684\u6210\u5458\u5e94\u8be5\u6765\u9762\u5bf9\u638c\u95e8\u4eba\u3002":3==a.record?c="\u5bf9\u65b9\u5df2\u7ecf\u52a0\u5165\u6211\u4eec\u7684\u884c\u4f1a\u3002":4==a.record?c="\u5bf9\u65b9\u5df2\u7ecf\u52a0\u5165\u5176\u4ed6\u884c\u4f1a\u3002":5==a.record?c="\u5bf9\u65b9\u4e0d\u5141\u8bb8\u52a0\u5165\u884c\u4f1a\u3002":6==a.record?c="\u884c\u4f1a\u6210\u5458\u5df2\u7ecf\u6ee1\u5458\u3002":7==a.record&&(c="\u4e0d\u540c\u56fd\u5bb6\u7981\u6b62\u52a0\u5165\u884c\u4f1a\u3002");Laya.stage.event("show_log",[{txt:c,color:"#ff0000"}]);break;case SM_GUILDDELMEMBER_OK:Sendmessage.sendGuildMemberList();break;case SM_GUILDRANKUPDATE_FAIL:c="";-2==a.record?c="\u638c\u95e8\u4eba\u4f4d\u7f6e\u4e0d\u80fd\u4e3a\u7a7a\u3002":-3==a.record?c="\u65b0\u7684\u884c\u4f1a\u638c\u95e8\u4eba\u5df2\u7ecf\u88ab\u4f20\u4f4d\u3002":-4==a.record?c="\u4e00\u4e2a\u884c\u4f1a\u6700\u591a\u53ea\u80fd\u6709\u4e8c\u4e2a\u638c\u95e8\u4eba\u3002":-5==a.record?c="\u638c\u95e8\u4eba\u4f4d\u7f6e\u4e0d\u80fd\u4e3a\u7a7a\u3002":-6==a.record?c="\u4e0d\u80fd\u6dfb\u52a0\u6210\u5458/\u5220\u9664\u6210\u5458\u3002":-7==a.record&&(c="\u804c\u4f4d\u91cd\u590d\u6216\u8005\u51fa\u9519\u3002");Laya.stage.event("show_log",[{txt:c,color:"#ff0000"}]);break;case SM_GUILDDELMEMBER_FAIL:c="";1==a.record?c="\u4e0d\u80fd\u4f7f\u7528\u547d\u4ee4\uff01":2==a.record?c="\u6b64\u4eba\u975e\u672c\u884c\u4f1a\u6210\u5458!":3==a.record?c="\u884c\u4f1a\u638c\u95e8\u4eba\u4e0d\u80fd\u5f00\u9664\u81ea\u5df1!":4==a.record&&(c="\u4e0d\u80fd\u4f7f\u7528\u547d\u4ee4Z!");Laya.stage.event("show_log",[{txt:c,color:"#ff0000"}]);break;case SM_TAKEON_OK:this.clientRecvTakeOnOk(a,b);break;case SM_TAKEON_FAIL:this.clientRecvTakeFailMsg(a,b);break;case SM_TAKEOFFITEM:c=g_UserItemList[a.param];g_UserItemList[a.param]=null;Laya.stage.event("Show_Item_ico",a.param);18<=a.param&&29>=a.param&&Laya.stage.event("updateHumNewDress");4==a.param&&Laya.stage.event("Show_Item_ico",13);c&&Animationmodule.removeAniname("bodyeffect"+c.MakeIndex);GameUtil.InstanceOfMem(ShousWinUI)&&Laya.stage.event("update_shengxiao",[g_UserItemList]);GameUtil.InstanceOfMem(ShoushiUI)&&Laya.stage.event("show_shoushi_box",[g_UserItemList]);break;case SM_TAKEOFF_OK:this.clientRecvTakeOffMsg(a,b);break;case SM_TAKEOFF_FAIL:this.clientRecvTakeOffFail(a,b);break;case SM_SHOWEVENT:case SM_SHOWEVENTEX:this.showmapevent(a,b);break;case SM_HIDEEVENT:this.hidemapevent(a,b);break;case SM_MAGICFIRE:this.magicfire(a,b);g_boMagicGood=!0;break;case SM_MAGICFIRE_FAIL:this.magicfirefail(a,b);g_boMagicGood=!1;break;case SM_CHANGEFACE:this.changeface(a,b);break;case SM_READMINIMAP_OK:this.readminimapok(a,b);break;case SM_READMINIMAP_FAIL:this.readminimapfail(a,b);break;case SM_GOLDCHANGED:g_boOpenCaiji&&""!=b&&(a.record>g_GameCionNum.value?g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",a.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+DecodeString(b),a.record-g_GameCionNum.value):a.record<g_GameCionNum.value&&g_LogSocket.AddGameDataLog(13,"\u91d1\u5e01",a.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+DecodeString(b),a.record-g_GameCionNum.value),c=CodeUtil._MAKELONG(a.param,a.tag),g_GameGoldNum.value<c?g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d,",a.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+DecodeString(b),c-g_GameGoldNum.value):g_GameGoldNum.value>c&&g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",a.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+DecodeString(b),c-g_GameGoldNum.value));a.record>g_GameCionNum.value&&Laya.stage.event("show_log",[{txt:"\u5df2\u83b7\u5f97"+(a.record-g_GameCionNum.value)+g_GameCionNum.key,color:"#00ff00"}]);g_GameCionNum.value=a.record;g_GameGoldNum.value=CodeUtil._MAKELONG(a.param,a.tag);Laya.stage.event("Update_Bag");break;case SM_WEIGHTCHANGED:(c=ObjectManage.findobject(playerID))&&c.m_Abil&&(c.m_Abil.Weight=a.record,c.m_Abil.WearWeight=a.param,c.m_Abil.WearWeight=a.tag,Laya.stage.event("update_role_attri"),Laya.stage.event("update_bag_info"),Laya.stage.event("Update_Bag"));break;case SM_LEGTZLIST:this.GetLegTZList(a,b);break;case SM_OPENBIGMERCHANTBIGDLG:this.GetNpcWindows(a,b);break;case SM_CLOSEBIGMERCHANTBIGDLG:npc_img_name="gameres/png/npc_di.png";GameApi.ShowNewNpcDlgEx(!1);break;case SM_EFFECTIMAGELIST:this.GetPakList(a,b);break;case SM_716:this.clientRecv716(a);break;case SM_LIGHTINGEX:this.clientRecvLightingEX(a,b);break;case SM_MENU_OK:this.ShowMessageDLG(a,b);break;case SM_REDPACK:this.GetRedPack(a,b);break;case SM_OpenRedPac:this.GetRedPackinf(a,b);break;case SM_BUILDGUILD_OK:this.clientRecvbuildok(a,b);break;case SM_BUILDGUILD_FAIL:this.clientRecvbuildfail(a,b);break;case SM_CLOSECLIENTBUFF:this.clientclosebuff(a,b);break;case SM_ZHAOMU:this.getzhaomupay(a,b);break;case SM_NPCITEMSHOW:this.GetNpcItemShow(a,b);break;case SM_SHOWBOX:this.OpenBox(a,b);break;case SM_OPENBOX_FAIL:Laya.stage.event("game_dlg_cmd",[{id:"openbox_fail"}]);Laya.stage.event("show_log",[{txt:"\u7f3a\u5c11\u5b9d\u7bb1\u94a5\u5319\uff01",color:"#ff0000"}]);break;case SM_OPENBOX_SUCCESS:this.OpenBoxSuccess(a,b);break;case SM_SENDGETBOXITEMINDEX:this.GetBoxItemIndex(a);break;case SM_FISHMESSAGE:this.GetFishInfo(a,b);break;case SM_MERCHANTDLGCLOSE:GameApi.ShowNewNpcDlg(!1);break;case SM_CORRECTPOINT:this.correctpoint(a);break;case SM_BREAKWEAPON:this.breakweapon(a,b);break;case SM_STOPBAITAN:g_boOpenCaiji?this.StopMyShop_Caiji(a,b):GameApi.StopMyShop();break;case SM_TAKEONITEM:this.GameTakeAotoOnItem(a,b);break;case SM_SENDUSERICONGIF:this.HumIcon(a,b);break;case SM_PROGRESSBARDLG:this.TreasureMap(a,b);break;case SM_AUTOGOTOXY:this.xunlu(a,b);break;case SM_OPENHEALTH:this.openhealth(a,b);break;case SM_SCREENEFFECT:this.Get_SCREENEFFECT(a,b);break;case SM_SENDH5CODE:game_scene_code=a.record;break;case SM_SOFTCLOSE:Laya.stage.event("game_dlg_cmd",[{id:"exit_to_role"}]);g&&(g.removeSelf(),g=null,Laya.timer.clear(this,this.onAssetsDestroy));f&&(f.removeSelf(),f=null);break;case SM_SENDWEBBROWSER:this.getMoneyPay(b);break;case SM_LUASOCKET:146==a.param&&this.getSuitInfo(b);break;case SM_OPENUPGRADEDLG:this.openDLG(b,a.record);break;case SM_PACKAGEITEM_OK:this.packageitemok(a,b);break;case SM_PACKAGEITEM_FAIL:this.packageitemfail(a,b);break;case SM_PLAYDICE:Laya.stage.event("playDice",[a,b]);break;case SM_HEROLOGON:c=b.slice(0,20);c=fnDecode6BitBuf(c,c.length);c=TMessageBodyWL(c.pszDest).lParam1;d=b.slice(27,b.length);d=fnDecode6BitBuf(d,256);d=TFeature(c,d.pszDest);if(c=ObjectManage.findobject(a.record))c.data.fea=d,d=Animationmodule.playframe(!0,c,"data/effect/",770,789,30,!1,!0);break;case SM_HEROLOGOUT:(c=ObjectManage.findobject(a.record))&&(d=Animationmodule.playframe(!0,Mapmodule.root,"data/effect/",800,819,30,!1,!0))&&d.pos(48*c.grid.x,32*c.grid.y);break;case SM_HEROLOGON_OK:b=DecodeString(b);c=b.split("\\");c[0]&&(g_HeroLoyalPoint=c[0]);Laya.stage.event("heroCall_OK",[a,b]);g_myHero&&g_myHero.m_Abil&&Laya.stage.event("update_hero_info",[g_myHero.m_Abil]);break;case SM_HEROLOGOUT_OK:g_HeroBagItemsList=[];Laya.stage.event("heroExit_OK");break;case SM_HEROLOYAL:g_myHero&&g_myHero.data.record==a.record&&(g_HeroLoyalPoint=DecodeString(b),g_myHero&&g_myHero.m_Abil&&Laya.stage.event("update_hero_info",[g_myHero.m_Abil]));break;case SM_HEROANGERVALUE:g_myHero&&(g_myHero.AngryValue=a.param,g_myHero.AngryValueMax=a.tag,Laya.stage.event("update_AngryValue"));break;case SM_HEROABILITY:CodeUtil._LOBYTE(a.param);CodeUtil._HIBYTE(a.param);c=fnDecode6BitBuf(b,b.length,!1);c=new Zlib.Inflate(c.pszDest);c=c.decompress();c=TAbility(c);null==g_myHero&&(g_myHero=ObjectManage.findobject(a.record));g_myHero&&(g_myHero.m_Abil=c);g_myHero.m_Abil&&(g_myHero.m_Abil.name=g_myHero.txt_name?g_myHero.txt_name.text:"");break;case SM_HEROSUBABILITY:g_nHeroHitPoint=CodeUtil._LOBYTE(a.param);g_nHeroSpeedPoint=CodeUtil._HIBYTE(a.param);g_nHeroAntiPoison=CodeUtil._LOBYTE(a.tag);g_nHeroPoisonRecover=CodeUtil._HIBYTE(a.tag);g_nHeroHealthRecover=CodeUtil._LOBYTE(a.series);g_nHeroSpellRecover=CodeUtil._HIBYTE(a.series);g_nHeroAntiMagic=CodeUtil._LOBYTE(CodeUtil._MAKELONG(a.record));c=DecodeString(b);GameUtil.InstanceOfMem(HeroWinUI)&&Laya.stage.event("updateHero");break;case SM_SENDHEROUSEITEMS:this.getHeroItems(a,b);break;case SM_SENDMYHEROMAGIC:this.getHeroSkill(a,b);break;case SM_HEROADDMAGIC:g_myHero&&this.addHreroSkill(a,b);break;case SM_HERODELMAGIC:g_myHero&&this.delHreroSkill(a.record);break;case SM_HEROMAGIC_LVEXP:g_myHero&&this.UpdateHeroMagicData(a);break;case SM_HEROLEVELUP:g_myHero&&g_myHero.m_Abil&&(this.HeroLevelup(a),Laya.stage.event("update_hero_info",[g_myHero.m_Abil]));break;case SM_HEROWINEXP:g_myHero&&g_myHero.m_Abil&&(0==a.series&&(g_myHero.m_Abil.Exp=a.record),g_myHero&&g_myHero.m_Abil&&Laya.stage.event("update_hero_info",[g_myHero.m_Abil]));break;case SM_HEROBAGCOUNT:g_HeroBagNum=a.param;break;case SM_HEROBAGITEMS:g_myHero&&this.getHeroBagItems(a,b);break;case SM_HEROTAKEON_OK:g_myHero&&this.heroTakeOn(b);break;case SM_HEROTAKEON_FAIL:Sendmessage.QueryHeroBagItems();break;case SM_HEROTAKEOFF_OK:g_myHero&&null!=g_WaitItems.Items&&(g_HeroItemList[g_WaitItems.Index]=null,Laya.stage.event("Show_HeroItem_ico",g_WaitItems.Index),4==g_WaitItems.Index&&Laya.stage.event("Show_HeroItem_ico",13),g_WaitItems.Items=null,Laya.stage.event("updateHeroNewDress"));break;case SM_HEROBAGTOMASTERBAG_FAIL:Sendmessage.QueryHeroBagItems();break;case SM_HEROADDITEM:g_myHero&&this.heroBagAddItem(a,b);break;case SM_HERODELITEM:g_myHero&&this.heroDelectItem(a,b);break;case SM_HEROUPDATEITEM:""!=b&&(c=fnDecode6BitBuf(b,b.length,!1),c=TClientItem(c.pszDest),GameUtil.UpdateHeroItems(c));break;case SM_HERODROPITEM_SUCCESS:g_myHero&&this.heroDropSuccess(a,b);break;case SM_HERODROPITEM_FAIL:g_myHero&&this.heroDropfail(a,b);break;case SM_HEROEAT_OK:g_WaitItems.Items&&!GameApi.heroAutounpack(2,g_WaitItems.Items.s.Name,g_WaitItems.Items.s.AniCount)&&(g_WaitItems.Items=null,g_DrugButNumber=-1);break;case SM_HEROEAT_FAIL:g_WaitItems.Items&&GameUtil.HeroAddItem(g_WaitItems.Items);g_WaitItems.Items=null;break;case SM_HERODELITEMS:g_myHero&&this.heroDropItem(a,b);break;case SM_HERODURACHANGE:g_myHero&&g_HeroItemList[a.param]&&(g_HeroItemList[a.param].Dura=a.record,g_HeroItemList[a.param].DuraMax=CodeUtil._MAKELONG(a.tag,a.series));break;case SM_HEROWEIGHTCHANGED:g_myHero&&g_myHero.m_Abil&&(g_myHero.m_Abil.Weight=a.record,g_myHero.m_Abil.WearWeight=a.param,g_myHero.m_Abil.HandWeight=a.tag,GameUtil.InstanceOfMem(HeroWinUI)&&Laya.stage.event("updateHero"));break;case SM_HEROPACKAGEITEM_OK:this.heropackageitemok(a,b);break;case SM_HEROPACKAGEITEM_FAIL:this.heropackageitemfail(a,b);break;case SM_USERICONLIST:this.MakeIcon(b,a);break;case SM_SENDUSERICON:this.SendSetUserICON(b,a);break;case SM_BIGDATA:this.NewMakeNpc(b,a);break;case SM_OPENITEMBOXEX:this.OpenBoxEX(b,a);break;case SM_CJ:this.SM_Caiji(b,a);break;case SM_HANGUP:Laya.stage.event("onhook",["1"]);break;case SM_HANGUPCLOSE:Laya.stage.event("onhook",["0"]);break;case SM_API_GETITEM:""!=b&&(c=fnDecode6BitBuf(b,b.length,!1),c=TClientItem(c.pszDest),console.log("API_GETITEM:",c),Laya.stage.event("api_sendItem",[c]));break;case SM_SENDNEWLINEMSG:this.sendNewLineMsg(b,a);break;case SM_DELETEDELAYMESSAGE:for(d=0;d<G_countDownMsg.length;d++)G_countDownMsg[d]&&G_countDownMsg[d].id==a.record&&(G_countDownMsg[d].removeSelf(),G_countDownMsg.splice(d,1));break;case SM_SELLOFFITEM:GameApi.ShowScreen(!0,0,13);break;case SM_SELLITEM_FULL:g_WaitItems.Items&&GameUtil.SelfAddItem(g_WaitItems.Items);g_WaitItems.Items=null;Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u7684\u5bc4\u552e\u7269\u54c1\u6570\u91cf\u5df2\u6ee1\uff0c\u4e0d\u80fd\u518d\u5bc4\u552e\u5176\u4ed6\u7269\u54c1\u4e86\u3002",callfn:function(){}}]);break;case SM_SELLITEM_FAIL:g_WaitItems.Items&&GameUtil.SelfAddItem(g_WaitItems.Items);g_WaitItems.Items=null;Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6b64\u7269\u54c1\u4e0d\u80fd\u5bc4\u552e\u3002",callfn:function(){}}]);break;case SM_SENDSELLITEMSLIST:this.TranslateItemList(a,b);break;case SM_GETSELLOFFDETAILITEM:this.saleItemList(a,b);break;case SM_BUYSELLOFFTEM_OK:Laya.stage.event("Update_Bag");Laya.stage.event("npc_sale_BUYITEM_SUCCESS");break;case SM_BUYSELLOFFTEM_FAIL:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u65e0\u6cd5\u8d2d\u4e70\u5bc4\u552e\u7269\u54c1\u3002",callfn:function(){}}]);break;case SM_BUYSELLOFFTEM_FULLBAG:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u65e0\u6cd5\u643a\u5e26\u66f4\u591a\u7269\u3002",callfn:function(){}}]);break;case SM_SENDH5TOPEFFECT:Laya.stage.event("topeffect",[a.record,a.param,a.series]);break;case SM_AUTOPICKUPITEMS:this.autoPickItems(a);break;case SM_GETBACKPASSWD_SUCCESS:Laya.stage.event("findPasword_s",[b]);break;case SM_GETBACKPASSWD_FAIL:switch(a.series){case 0:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u8d26\u53f7\u4e0d\u5b58\u5728\u3002",callfn:function(){}}]);break;case -1:case -3:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4fdd\u62a4\u8d44\u6599\u6216\u751f\u65e5\u4e0d\u6b63\u786e\u3002",callfn:function(){}}]);break;case -4:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5df2\u5173\u95ed\u5bc6\u7801\u627e\u56de\u670d\u52a1\u3002",callfn:function(){}}])}break;case SM_NEEDUPDATE_ACCOUNT:Laya.stage.event("dupdate_account");break;case SM_UPDATEID_SUCCESS:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u7684\u5e10\u53f7\u4fe1\u606f\u66f4\u65b0\u6210\u529f\u3002\r\n\u8bf7\u59a5\u5584\u4fdd\u7ba1\u60a8\u7684\u5e10\u53f7\u548c\u5bc6\u7801\u3002\r\n\u5e76\u4e14\u4e0d\u8981\u56e0\u4efb\u4f55\u539f\u56e0\u628a\u5e10\u53f7\u548c\u5bc6\u7801\u544a\u8bc9\u4efb\u4f55\u5176\u4ed6\u4eba\u3002\r\n\u5982\u679c\u5fd8\u8bb0\u4e86\u5bc6\u7801\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6211\u4eec\u7684\u4e3b\u9875\u91cd\u65b0\u627e\u56de\u3002",callfn:function(){}}]);break;case SM_UPDATEID_FAIL:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u66f4\u65b0\u8d26\u53f7\u5931\u8d25\u3002",callfn:function(){}}]);break;case SM_ITEMSCORE:this.ItemScore(a,b);break;case SM_SERVERCLOSE:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5f02\u5e38\uff0c\u6e38\u620f\u65ad\u5f00\u8fde\u63a5\u3002",callfn:function(){Laya.Browser.window.location.reload()}}]);break;case SM_SENDTICKCOUNT:0!=a.param&&(g_tick_check=!0,0!=g_tick_rate&&8<=g_tick_rate-a.param*g_tick_ct?Laya.stage.event("show_alert_dlg",[{type:6,txt:"\u975e\u6cd5\u52a0\u901f\uff01\uff01",callfn:function(){}}]):g_tick_ct++,100<=g_tick_rate&&(g_tick_rate=0,g_tick_ct=1));break;case SM_HIT_FAIL:lockingID&&(c=ObjectManage.findobject(lockingID))&&(d=new Laya.Image,200<c.sp.height&&(c.sp.height=170),d.skin="gameres/ui/000310.png",d.alpha=.2,d.pos(0,-c.sp.height),c.addChild(d),Laya.Tween.to(d,{y:-(c.sp.height+60),alpha:1},300,Laya.Ease.cubicInOut,Laya.Handler.create(this,this.delvaule,[d])));case SM_MOVEUPMESSAGE:this.superMoveMsg(a,b);break;case SM_OVERLAPDRUG_OK:g_BagItemsList[g_WaitItems.index]=null;break;case SM_OVERLAPITEM_OK:g_BagItemsList[g_WaitItems.index]=null;break;case SM_HEROOVERLAPITEM_OK:g_HeroBagItemsList[g_WaitItems.index]=null;for(c=0;c<g_HeroBagItemsList.length;c++)null==g_HeroBagItemsList[c]&&(g_HeroBagItemsList.splice(c,1),g_HeroBagItemsList.push(null));g_OpenHeroBag&&Laya.stage.event("Show_HeroBag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems");break;case SM_OPENUPGRADEDIALOG:this.openUpgrade();break;case SM_SENDUPGRADEDIALOG_OK:c=fnDecode6BitBuf(b,b.length,!1);c=TClientItem(c.pszDest);Laya.stage.event("upgradeOK",[c]);break;case SM_SENDUPGRADEDIALOG_FAIl:Laya.stage.event("upgradeFaild",[a,b]);break;case SM_GETITEMINFO:a.param==b.length&&(c=decryStringK(b,mac_key),8==(c[0]&15)&&(c=new Zlib.Inflate(c),c=c.decompress(),(c=TClientItem(c))&&g_showChatItem.push(c)));break;case SM_TZDESCLIST:this.getGomList(b);break;case SM_H5FUNCBTN:this.makeH5scrpt(a,b);break;case TK_TICKTIME:this.TK_DELAY_TIME=0;c=Laya.Browser.now()-DELAY_TIME;this.TK_TICKTIME_TIME=DELAY_TIME=Laya.Browser.now();0==this.TK_CHEKTIME_TAG&&(this.TK_CHEKTIME_TAG=!0,this.TK_DELAY_TIM+=100,Laya.timer.loop(100,this,this.checkOverTimeTK.bind(this)));Laya.stage.event("DELAY_TIME",c);break;case SM_NEWGUILD:g_relevel=a.series;break;case 12316:0==a.param&&0!=a.record&&ItemMgr.getInstance().DelItemFromMap(a.record);break;case SM_OFFLINETIME:g_overtime=a.record;60>g_overtime&&(g_overtime=60);break;case SM_PLAYSOUND:case SM_PLAYMUSIC:this.playSoundScript(a,b);break;case CM_GDY_MSG:this.alertMessageGDY(a.bodystr);break;case SM_BUYCRISTAL:1==a.record?(c=DecodeString(b),Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u51b6\u70bcCQB\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u6c34\u6676\u94b1\u5305\u901a\u4fe1\u5b8c\u6210\u540e\u67e5\u770b\u8d26\u6237\uff01",callfn:function(){}}]),Laya.stage.event("update_cqbInfo",[c,1])):2==a.record&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u51b6\u70bcCQB\u5931\u8d25\uff01",callfn:function(){}}]);break;case SM_SELLCRISTAL:1==a.record?(c=DecodeString(b),Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5151\u6362\u6218\u7eaa\u5e01\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u6c34\u6676\u94b1\u5305\u901a\u4fe1\u5b8c\u6210\u540e\u67e5\u770b\u8d26\u6237\uff01",callfn:function(){}}]),Laya.stage.event("update_cqbInfo",[c,2])):2==a.record&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5151\u6362\u6218\u7eaa\u5e01\u5931\u8d25\uff01",callfn:function(){}}]);break;case SM_CRISTALINFO:g_crystalInfo=b;Laya.stage.event("update_crystal",[g_crystalInfo]);console.log("\u6c34\u6676\u5e73\u53f0\u4fe1\u606f\uff1a",g_crystalInfo);break;case SM_OPENCRISTALFORM:(c=GameUtil.InstanceOfMem(crystalUI))?c.visible=!0:(c=new crystal,Laya.stage.addChild(c));Sendmessage.sendCqbInfo();break;case SM_UPDATEITEMSCORE:""!=b&&(c=fnDecode6BitBuf(b,b.length),(c=TClientItemItemScore(c.pszDest))&&g_EquipScoreExList.push(c));break;case SM_ITEMSCORETEXT:g_EquipScoreList=zDecodeString(b).split("\r");break;case SM_SENDGUILDCREATESTUFF:c=DecodeString(b),Laya.stage.event("update_creatGuild",[c])}};b.prototype.delvaule2=function(a){Laya.Tween.to(a,{alpha:0},400,Laya.Ease.quartIn,Laya.Handler.create(b,b.delvaule,[a]))};b.prototype.delvaule=function(a){a.removeSelf()};b.prototype.updateBag_ico=function(){GameUtil.InstanceOfMem(NewBagUI)&&Laya.stage.event("Show_Bag_Item_ico");GameUtil.InstanceOfMem(NewHeroBagUI)&&Laya.stage.event("Show_HeroBag_Item_ico")};b.prototype.getHeroItems=function(a,b){if(a.param==b.length){GameUtil.IntHeroItems(HighTUseItems);for(var f=fnDecode6BitBuf(b,b.length,!1),f=(new Zlib.Inflate(f.pszDest)).decompress(),d=0,c=0;c<a.series;c++){var e=f[d];d++;var h=GameUtil.slice(f,d,d+g_itemSize),h=TClientItem(h),d=d+g_itemSize;0<=e&&e<=HighTUseItems&&(g_HeroItemList[e]=h,h.tag=e)}}};b.prototype.getHeroSkill=function(a,b){var f=a.series;if(a.param==b.length){var d=fnDecode6BitBuf(b,b.length,!1),d=(new Zlib.Inflate(d.pszDest)).decompress();g_HeroMagicList=[];for(var c=0;c<f;c++){var e=GameUtil.slice(d,172*c,172*(c+1)),e=TClientMagic(e);g_HeroMagicList.push(e)}}};b.prototype.addHreroSkill=function(a,b){var f=fnDecode6BitBuf(b,b.length,!1),f=TClientMagic(f.pszDest);GameUtil.AddHeroMagic(f)};b.prototype.delHreroSkill=function(a){GameUtil.DelMagic(a)};b.prototype.UpdateHeroMagicData=function(a){var b=a.record,f=CodeUtil._LOBYTE(a.param);a=CodeUtil._MAKELONG(a.tag,a.series);GameUtil.UpdateHeroMagicLvExp(b,f,a,0);Laya.stage.event("HeroMagic_Refresh")};b.prototype.HeroLevelup=function(a){ObjectManage.levelup(a.record);GameUtil.InstanceOfMem(HeroWinUI)&&Laya.stage.event("updateHero")};b.prototype.getHeroBagItems=function(a,b){if(a.param==b.length){var f=fnDecode6BitBuf(b,b.length,!1),f=(new Zlib.Inflate(f.pszDest)).decompress();GameUtil.IntHeroBagList();g_HeroBagCount=a.series;for(var d=0;d<a.series;d++){var c=GameUtil.slice(f,g_itemSize*d,g_itemSize*(d+1)),c=TClientItem(c);GameUtil.HeroAddItem(c)}GameUtil.LoadBagItemIcon(g_HeroBagItemsList,0)}};b.prototype.HeroBagStack=function(){for(var a=g_HeroBagItemsList.length-1;0<=a;a--){for(var b=0;b<g_HeroBagItemsList.length;b++)if(null!=g_HeroBagItemsList[b]&&null!=g_HeroBagItemsList[a]&&0<=g_HeroBagItemsList[b].Dura&&g_HeroBagItemsList[b].s.Name==g_HeroBagItemsList[a].s.Name&&g_HeroBagItemsList[a].MakeIndex!=g_HeroBagItemsList[b].MakeIndex&&49!=g_HeroBagItemsList[b].Dura&&49!=g_HeroBagItemsList[a].Dura&&(17==g_HeroBagItemsList[b].s.StdMode||18==g_HeroBagItemsList[b].s.StdMode||41==g_HeroBagItemsList[b].s.StdMode||40==g_HeroBagItemsList[b].s.StdMode||42==g_HeroBagItemsList[b].s.StdMode||31==g_HeroBagItemsList[b].s.StdMode&&-1!=g_HeroBagItemsList[b].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))){g_WaitItems.index=a;Sendmessage.sendHeroStackThing(g_HeroBagItemsList[a].MakeIndex,g_HeroBagItemsList[b].MakeIndex,g_HeroBagItemsList[b].s.DBName,0);var f=!0;break}if(f)break}for(a=0;a<g_HeroBagItemsList.length;a++)null==g_HeroBagItemsList[a]&&(g_HeroBagItemsList.splice(a,1),g_HeroBagItemsList.push(null));g_OpenHeroBag&&Laya.stage.event("Show_HeroBag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems")};b.prototype.heroTakeOn=function(a){null!=g_WaitItems.Items&&0<=g_WaitItems.Index&&52>=g_WaitItems.Index&&(g_HeroItemList[g_WaitItems.Index]=g_WaitItems.Items,g_HeroItemList[g_WaitItems.Index].tag=g_WaitItems.Index,Laya.stage.event("Show_HeroItem_ico",g_WaitItems.Index),g_WaitItems.Items=null,GameUtil.InstanceOfMem(HeroWinUI)&&(Laya.stage.event("updateHero"),Laya.stage.event("updateHeroNewDress")),GameApi.ShowScreen(!1))};b.prototype.heroBagAddItem=function(a,b){var f=a.tag;if(""!=b){var d=fnDecode6BitBuf(b,b.length,!1),d=TClientItem(d.pszDest);GameUtil.HeroAddItem(d);GameUtil.HeroAutoHandleItem(d,f)}};b.prototype.heroDropSuccess=function(a,b){var f=a.record;DecodeString(b);null!=g_WaitItems.Items&&g_WaitItems.Items.MakeIndex==f&&(g_WaitItems.Items=null)};b.prototype.heroDropfail=function(a,b){var f=a.record;DecodeString(b);null!=g_WaitItems.Items&&g_WaitItems.Items.MakeIndex==f&&(GameUtil.HeroAddItem(g_WaitItems.Items),g_WaitItems.Items=null)};b.prototype.SendUserEffect=function(a,b){var f=ObjectManage.findobject(a.record);if(f&&b){var d=fnDecode6BitBuf(b,b.length),d=(new Zlib.Inflate(d.pszDest)).decompress(),c=TBaseObjectEffect(d),d=c.nEffectImageOffSet,e=c.wEffectImageCount,l=c.wEffectFrameTime,g=c.wLoopCount-1;if(c)if(100<=d&&150>d)Laya.loader.load("gameres/animation/particle/gold.part",Laya.Handler.create(this,function(a){h||(h=new Laya.Particle2D(a),f.addChild(h),h.pos(0,-230),h.emitter&&h.emitter.start(),h.play(),Laya.timer.once(l*g*80,this,this.onAssetsDestroy))}),null,Laya.loader.JSON);else{var C=e*l*g,c=new Laya.Point(c.nX,c.nY),u=Animationmodule.playframe(!1,f,"data/effectex/",d,d+e-1,l,!0,!1,c);if(u)Laya.timer.once(C,this,function(){Animationmodule.removeAni(u)},[u])}}};b.prototype.SendUserAddEffect=function(a,b){var d=ObjectManage.findobject(a.record),c=null;if(d&&b){var e=fnDecode6BitBuf(b,b.length),e=(new Zlib.Inflate(e.pszDest)).decompress(),e=TBaseObjectEffect(e),h=e.nEffectImageOffSet,l=e.wEffectFrameTime/10,z=e.wLoopCount;e&&(-1==e.nEffectFileIndex?c="data/effect/":-2==e.nEffectFileIndex?c="data/effect_ex/":-3==e.nEffectFileIndex?c="data/effect_se/":-4==e.nEffectFileIndex&&(c="data/effectex/"),c&&(109<h&&150>h?Laya.loader.load("gameres/animation/particle/snow.part",Laya.Handler.create(this,function(a){f||(f=new Laya.Particle2D(a),d.addChild(f),f.pos(0,-230),f.emitter&&f.emitter.start(),f.play())}),null,Laya.loader.JSON):0<=h&&80>h&&Laya.loader.load("gameres/animation/particle/flower.part",Laya.Handler.create(this,function(a){g||(g=new Laya.Particle2D(a),d.addChild(g),g.pos(0,-250),g.emitter&&g.emitter.start(),g.play(),Laya.timer.once(l*z*80,this,this.onAssetsDestroy))}),null,Laya.Loader.JSON)))}};b.prototype.SendUserAddEffectGom=function(a,b){var f=ObjectManage.findobject(a.record);if(f&&b){var d=fnDecode6BitBuf(b,b.length),d=(new Zlib.Inflate(d.pszDest)).decompress(),d=TBaseObjectEffectGom(d),c=d.nEffectImageOffSet,e=d.wEffectImageCount,h=d.wEffectFrameTime,l=e*h*d.wLoopCount;new Laya.Point(d.nX,d.nY);var g=Animationmodule.playframe(!0,f,"data/"+g_pak_list[d.nEffectFileIndex]+"/",c,c+e-1,h,!0,!1);if(g)Laya.timer.once(l,this,function(){Animationmodule.removeAni(g)},[g])}};b.prototype.onAssetsDestroy=function(){g?(g.removeSelf(),g=null):h&&(h.removeSelf(),h=null)};b.prototype.heroDropItem=function(a,b){if(1!=a.tag&&""!=b)for(var f=DecodeString(b).split("/"),d=1;d<f.length;d+=2)GameUtil.DelHeroBagItems(parseInt(f[d])),GameUtil.DelHeroItems(parseInt(f[d]))};b.prototype.heroTakeOffOk=function(a,b){null!=g_WaitItems.Items&&(g_HeroItemList[g_WaitItems.Index]=null,Laya.stage.event("Show_HeroItem_ico",g_WaitItems.Index),4==g_WaitItems.Index&&Laya.stage.event("Show_HeroItem_ico",13),g_WaitItems.Items=null)};b.prototype.heroTakeOffFail=function(a,b){Laya.stage.event("show_log",[{txt:"\u82f1\u96c4\u8131\u7269\u54c1\u5931\u8d25",color:"#ff0000"}])};b.prototype.packageitemok=function(a,b){var f=fnDecode6BitBuf(b,b.length,!1),f=TClientItem(f.pszDest);GameUtil.AddItemNewBag(f)};b.prototype.packageitemfail=function(a,b){GameUtil.AddItemNewBag(g_WaitItems.Items)};b.prototype.heropackageitemok=function(a,b){var f=fnDecode6BitBuf(b,b.length,!1),f=TClientItem(f.pszDest);GameUtil.HeroAddItem(f)};b.prototype.heropackageitemfail=function(a,b){GameUtil.HeroAddItem(g_WaitItems.Items)};b.prototype.openhealth=function(a,b){var f=CodeUtil._MAKELONG(a.param,a.tag),d=CodeUtil._MAKELONG(a.series,parseInt(DecodeString(b),0));ObjectManage.updateObjectHp(d,f,a.record)};b.prototype.xunlu=function(a,b){ObjectManage.findobject(playerID);var f=new Laya.Point(a.param,a.tag),d=ObjectManage.findobject(a.record);Fightmodule.leavefight();f&&d&&Movemodule.autoMove(f);""!=b&&(g_mapnpc=f)};b.prototype.TreasureMap=function(a,b){function f(a,b,d,c,e){a.value+=100/(1E3*e.record);b+=100;d.text=c[0]+parseInt(100*a.value)+"%";d.x=(a.width-100)/2;b==1E3*e.record&&(a.removeSelf(),Laya.timer.clear(this,f))}b=DecodeString(b);var d=Laya.stage.getChildByName("cgb");if(null==d&&0<a.record){var d=new Laya.ProgressBar("gameres/png/00950.png"),c=new Laya.Label;c.x=d.width/4;c.color="#ffffff";c.fontSize=12;str=b.split("%");d.addChild(c);d.sizeGrid="2,2,2,2";d.x=(Laya.stage.width-d.width)/2;d.y=Laya.stage.height/2;d.value=0;d.name="cgb";Laya.stage.addChild(d);Laya.timer.loop(100,this,f,[d,0,c,str,a])}else d&&d.removeSelf(),f&&Laya.timer.clear(this,f)};b.prototype.breakweapon=function(a,b){var f=ObjectManage.findobject(a.record);f&&(f.wapeff_frames=[]);a.record==playerID&&g_boOpenCaiji&&g_LogSocket.AddGameDataLog(21,DecodeString(b),a.record,"","")};b.prototype.correctpoint=function(a){Objectcontrol.springback(a.tag,a.series)};b.prototype.clientclosebuff=function(a,b){Laya.stage.event("CLEARBUFFER",[a.record])};b.prototype.clientRecvbuildok=function(a,b){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u884c\u4f1a\u5efa\u7acb\u6210\u529f",callfn:function(){}}])};b.prototype.clientRecvbuildfail=function(a,b){-1==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u5df2\u7ecf\u52a0\u5165\u5176\u5b83\u884c\u4f1a",callfn:function(){}}]):-2==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7f3a\u5c11\u521b\u5efa\u8d39\u7528",callfn:function(){}}]):-3==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u6ca1\u6709\u51c6\u5907\u597d\u9700\u8981\u7684\u5168\u90e8\u7269\u54c1",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u884c\u4f1a\u5931\u8d25\uff01\uff01\uff01",callfn:function(){}}])};b.prototype.clientRecvLightingEX=function(a,b){var f=ObjectManage.findobject(a.record);if(f){var d=fnDecode6BitBuf(b,b.length),c=TMessageBodyWL(d.pszDest),e=c.lTag1,d=c.lParam1,h=c.lParam2,l=a.series,g=new Laya.Point(48*f.grid.x,32*f.grid.y);CodeUtil._LOWORD(c.lTag2);CodeUtil._HIBYTE(CodeUtil._HIWORD(c.lTag2));CodeUtil._LOBYTE(CodeUtil._HIWORD(c.lTag2));var u=null;f.data.fea.buffer&&(u=THumFeature(f.data.fea.buffer));if(u&&3712==u.wDress&&165==u.wRace)u=6552+10*l,(u=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",u,u+6-1,100,!1,!0))&&u.pos(g.x,g.y),d=new Laya.Point(d,h),l=GameUtil.getorientation(f.grid,d),f.changestate(null,10,l,!1);else if(u&&3713==u.wDress&&165==u.wRace)u=7530+10*l,(u=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",u,u+8-1,100,!1,!0))&&u.pos(g.x,g.y),d=new Laya.Point(d,h),l=GameUtil.getorientation(f.grid,d),f.changestate(null,10,l,!1);else{var d=new Laya.Point(c.lParam1,c.lParam2),B=99,A=99;if(u&&254==u.wDress&&92==u.wRace||u&&173==u.wDress&&100==u.wRace)B=39,A=44;u&&253==u.wDress&&92==u.wRace&&(B=34,A=45);u&&236==u.wDress&&75==u.wRace&&(B=31,A=33);Skillmodule.playself(99,99,f,d);setTimeout(function(){Skillmodule.play2skill(a.record,B,A,c.lParam1,c.lParam2,e)},500)}}};b.prototype.clientRecv716=function(a){switch(a.series){case 1:var b=new Laya.Point(a.param,a.tag),f=Animationmodule.playframe(!0,Mapmodule.root,"data/mon14/",410,415,50,!1,!0);f&&f.pos(48*b.x,32*b.y);case 8:if(null!=g_myHero){var b=ObjectManage.findobject(playerID),f=20*b.cur_dir,d=20*g_myHero.cur_dir;a.record==playerID&&Animationmodule.playframe(!0,b,"data/magic4/",10+f,26+f,85,!1,!0);a.record==g_myHero.data.record&&Animationmodule.playframe(!0,g_myHero,"data/magic4/",10+d,26+d,85,!1,!0)}break;case 4:a=new Laya.Point(a.param,a.tag),b=Skillmodule.getSkillParent(),null!=b&&(b=Animationmodule.playframe(!0,b,"data/magic2/",10,14,80,!1,!0),null!=b&&b.pos(48*a.x,32*a.y))}};b.prototype.bluemissionlist=function(a,b){for(var f=fnDecode6BitBuf(b,b.length),f=(new Zlib.Inflate(f.pszDest)).decompress(),d=0;d<a.series;++d){var c=GameUtil.slice(f,260*d,260*(d+1)),c=TBlueMission(c);task_tile_list.push(c)}};b.prototype.openmissonwindowex=function(a,b){this.UpGlobaInf(b);if(10==a.record||11==a.record)for(var f=0;f<g_MissCaptionList.length;f++)g_MissCaptionList[f].sList=[],Sendmessage.gettmissitem(rw_recog,a.record,"@"+g_MissCaptionList[f].sTabName)};b.prototype.newTaskList=function(a){if(a){a=zDecodeString(a);a=a.split("\u0001");g_newTaskList=[];for(var b=0;b<a.length;b++){for(var f=a[b].split("\u0002"),d=0;d<f.length;d++)f[d]=f[d].trim(),0===d&&(f[d]=Number(f[d]));if(0<f.length&&!isNaN(f[0])&&0<f[0]){d=f[5].split("|");3<d.length&&(d=d.slice(0,2));for(var c=0;c<d.length;c++){var e=Number(d[c]);d[c]=1!=e&&2!=e&&3!=e?0:e}e=3-d.length;for(c=0;c<e;c++)d.push(0);f[5]=d;f[6]=isNaN(Number(f[6]))?0:Number(f[6]);g_newTaskList.push(f)}}}};b.prototype.newTaskOperate=function(a,b){b=DecodeString(b);GameMission.newTaskHandle(a,b)};b.prototype.mailstate=function(a,b){g_mailMaxCount=a.record;0===a.param&&Laya.stage.event("new_mail_notice")};b.prototype.getUserMail=function(a,b){var f=0;if(0<a.record){var d=fnDecode6BitBuf(b,b.length),d=(new Zlib.Inflate(d.pszDest)).decompress();for(i=0;i<a.record;i++)g_mailList.push(TClientMailViewInf(d,i)),2>g_mailList[i].btState&&f++}Laya.stage.event("get_user_mail",[f])};b.prototype.getUserMailContent=function(a,b){if(0<a.record)for(var f=fnDecode6BitBuf(b,b.length),f=(new Zlib.Inflate(f.pszDest)).decompress(),d=0;d<g_mailList.length;d++){var c=g_mailList[d];if(c.nMailIdx==a.record){c.content=TClientMailInf(f,a.param);c.btState=c.content.btState;Laya.stage.event("update_mail_state",[c,a.tag]);Laya.stage.event("get_mail_content",[c]);break}}};b.prototype.getUserMailUpdate=function(a,b){if(0<a.record){for(var f=fnDecode6BitBuf(b,b.length),d=(new Zlib.Inflate(f.pszDest)).decompress(),f=[],c=0,e=0;e<a.param;e++)f.push(d[c++]|d[c++]<<8|d[c++]<<16|d[c++]<<24);for(e=0;e<g_mailList.length;e++)if(d=g_mailList[e],d.nMailIdx==a.record&&(d.btState=a.tag,Laya.stage.event("update_mail_state",[d]),d.content)){d.content.btState=a.tag;for(e=0;e<d.content.items.length;e++)d.content.items[e].nCurrentCount=f[e];Laya.stage.event("get_mail_content",[d,!0]);break}}};b.prototype.getMailOkCode=function(a,b){};b.prototype.getMailFailCode=function(a,b){switch(a.record){case 1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5220\u9664\u5931\u8d25",callfn:function(){}}]);break;case 2:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u80cc\u5305\u5df2\u6ee1",callfn:function(){}}]);break;case 3:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u90ae\u4ef6\u5df2\u8fc7\u671f",callfn:function(){}}])}};b.prototype.deleteAllMail=function(a,b){var f=[];if(""!=b){for(var d=fnDecode6BitBuf(b,b.length),d=(new Zlib.Inflate(d.pszDest)).decompress(),c=0,e=0;e<a.record;e++)f.push(d[c++]|d[c++]<<8|d[c++]<<16|d[c++]<<24);0<f.length&&Laya.stage.event("delete_all_mail",[f])}};b.prototype.addNewMail=function(a,b){if(""!=b){var f=fnDecode6BitBuf(b,b.length),f=(new Zlib.Inflate(f.pszDest)).decompress(),f=TClientMailViewInf(f,0);g_mailList.unshift(f);Laya.stage.event("add_new_mail",[f])}};b.prototype.updateExtendBagItemCount=function(a){g_extendBagItemCount=a.record;var b=GameUtil.MaxBagItems();if(g_BagItemsList.length<b)for(var b=b-g_BagItemsList.length,f=0;f<b;f++)g_BagItemsList.push(null);else if(g_BagItemsList.length>b)for(b=g_BagItemsList.length-b,f=g_BagItemsList.length-1;0<=f;f--)if(null==g_BagItemsList[f]&&(g_BagItemsList.splice(f,1),b--),0>=b){GameUtil.LoadBagItemIcon(g_BagItemsList,0);break}1===a.param&&GameUtil.UpdateExtendBagItemCount()};b.prototype.readminimapok=function(a,b){if(open_minimap){open_minimap=!1;var f=new minimap;f.setMapdata(a.param-1);Laya.stage.addChild(f);isOpen=!1}else Laya.stage.event("DrawMiniMap",[a.param-1])};b.prototype.readminimapfail=function(a,b){Laya.stage.event("DrawMiniMap",[-1])};b.prototype.clientRecvlevelup=function(a,b){ObjectManage.levelup(a.record);GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum");if(g_boOpenCaiji){var f=ObjectManage.findobject(a.record);f&&g_myHero==f&&g_LogSocket.AddGameDataLog(12,"??",2,f.m_Abil.Level,"")}playerID==a.record&&(b=b.split("|"),"0"!=b[0]&&(g_relevel=Number(b[0])),g_rolelevel=Number(b[1]));getinfoforsdk(g_RoleName,g_levelForCaiji,"1",g_ServerName)};b.prototype.backstep=function(a,b){};b.prototype.changeface=function(a,b){if(11<b.length){var f=fnDecode6BitBuf(b,b.length),f=TCharDesc(f.pszDest).feature,d=b.slice(11,b.length);CodeUtil.getFeatureLen(f);d=fnDecode6BitBuf(d,256).pszDest;TFeature(f,d);CodeUtil._MAKELONG(a.param,a.tag)}};b.prototype.clientEnterNewMap=function(a,b){var f=a.param,d=a.tag,c=a.series;Mapdata.cur_type=b.substr(0,1);b=b.substr(1);var e=b.split("/");2<=e.length?(b=e[0],Mapdata.cur_id=e[1]):Mapdata.cur_id=b;loadmapname="data/mapdata/"+b+".map";Laya.stage.event("UPDATA_MAP",[b,f,d,c]);Laya.LocalStorage.setItem("PlayerMapID",loadmapname);Sendmessage.getNpcInfo()};b.prototype.clientRecvChangeMapMessage=function(a,b){var d=a.param,c=a.tag,e=ObjectManage.findobject(playerID);e&&e.changestate(null,1,e.cur_dir,!0);var e=a.series,h=DecodeString(b);b=h.substr(1);var l=Mapdata.cur_type;Mapdata.cur_type=h.substr(0,1);Mapdata.cur_type!==l?ObjectManage.object_list.forEach(function(a){a.data.record==playerID&&GameUtil.setbodycolor(a,g_RoleBodyState,a.data.record);a.Blood&&a.Blood.people&&a.Blood.SetCurBloodNum()}):ObjectManage.object_list.forEach(function(a){a.data.record==playerID&&GameUtil.setbodycolor(a,g_RoleBodyState,a.data.record)});h=b.split("/");Mapdata.cur_id!=b&&Laya.stage.event("close_minimap");if(2<=h.length){if(Mapmodule.cur_x==d&&Mapmodule.cur_y==c&&Mapdata.cur_id==h[1])return;b=h[0];Mapdata.cur_id=h[1]}else Mapdata.cur_id=b;loadmapname="data/mapdata/"+b+".map";Laya.stage.event("UPDATA_MAP",[b,d,c,e]);Laya.LocalStorage.setItem("PlayerMapID",loadmapname);f&&(f.removeSelf(),f=null)};b.prototype.clientObjGetSafeZoneInfo=function(a,b){for(var f=zDecodeString(b).split("\r\n"),d=[],c=[],e=0;e<f.length;e++){var h=f[e].split("\t"),l=f[e].split(";");""!=h&&2>l.length&&d.push(h)}for(e=0;e<d.length;e++){f=[];for(l=0;l<d[e].length;l++){h=d[e][l].split(" ");d[e][l]=h;for(var g=0;g<h.length;g++)""!=h[g]&&f.push(h[g])}c.push(f)}Mapdata.safeZone=c};b.prototype.clientRevLogon=function(a,b){if(123<=b.length){var f=b.slice(0,20),f=fnDecode6BitBuf(f,20),f=TMessageBodyWL(f.pszDest),d=b.slice(27,b.length),d=fnDecode6BitBuf(d,256).pszDest,d=TFeature(d.length,d);playerID=a.record;Laya.stage.event("CREATE_PLAYER",[{record:a.record,param:a.param,tag:a.tag,series:a.series,fea:d,lParam2:f.lParam2}]);CodeUtil._LOBYTE(f.lTag1);1==CodeUtil._LOBYTE(f.lTag1)?G_BaseSetList[0].val=!0:G_BaseSetList[0].val=!1;Objectcontrol.self_obj&&(THumFeature(Objectcontrol.self_obj.data.fea.buffer),Laya.LocalStorage.getItem("username"))}};b.prototype.clientRevChangeName=function(a,b){var f=a.record,d=a.param,c=DecodeString(b),e=c.split("\\\\"),h=e[0];-1!=h.indexOf("\\")&&(h=h.split("\\"));var e=e[1],l=ObjectManage.findobject(f);l&&(l.guildName=e);f==playerID&&(e&&(G_Guild_Name=e),h.constructor==Array?g_RoleName=h[0]:g_RoleName=h,Laya.stage.event("update_roleeditor"),Laya.stage.event("update_actor_name",[{name:c,color:d}]));ObjectManage.setObjectName(f,c,d)};b.prototype.clientRoleStateChanged=function(a,b){var f=a.record;b=DecodeString(b);var d=CodeUtil._MAKELONG(a.param,a.tag);f==playerID&&(""==b?rolespeed=a.series:rolespeed=parseInt(b));if(f=ObjectManage.findobject(a.record))GameUtil.setbodycolor(f,d,a.record),f.color_num=d,null!=g_RoleBodyState&&a.record==playerID&&(g_RoleBodyState=d)};b.prototype.PoisonDechealth=function(a,b){var f=ObjectManage.findobject(a.record);f&&(f.getChildByName("lvdu")||GameUtil.showvaule(null,E_ROLE_POISONING_GRE,f))};b.prototype.PoisonDamagearmor=function(a,b){var f=ObjectManage.findobject(a.record);f&&(f.getChildByName("hongdu")||GameUtil.showvaule(null,E_ROLE_POISONING_RED,f))};b.prototype.PoisonStone=function(a,b){var f=a.record,d=ObjectManage.findobject(f);d&&(d.getChildByName("mabi")||GameUtil.showvaule(null,E_ROLE_LULL,d),f==playerID&&(d.paralysis_state=!0))};b.prototype.OpenCobWebWinding=function(a,b){var f=ObjectManage.findobject(a.record);if(f){var d=f.getChildByName("zhizhuwang"),c=new Laya.Point(18,-3);d&&d.removeSelf();if(f=Animationmodule.playframe(!0,f,"data/mon24/",3740,3749,100,!0,!1,c))f.name="zhizhuwang",f.res_lock=!0}};b.prototype.CloseCobWebWinding=function(a,b){var f=ObjectManage.findobject(a.record);f&&f.getChildByName("zhizhuwang")&&Animationmodule.removeAniname("zhizhuwang")};b.prototype.clientGetMapDescription=function(a,b){g_boNoAcrossHuman=1==a.record?!1:!0;g_boNoAcrossMon=1==a.param?!1:!0;g_boNoAcrossNpc=1==a.tag?!1:!0;for(var f=0,d="",d="",c=DecodeString(b),e=c.length-1;0<=e;e--){var h=c[e];if(""!==h&&"\r"!==h&&"\n"!=h)if(255>h.charCodeAt())d+=c[e];else{if(""!=d)var l=d.split("").reverse(),l=l.join("");f=e;break}}d=c.slice(0,f+1);Mapdata.cur_name=d;Mapdata.cur_music=l;Laya.stage.event("updatepos");Laya.stage.event("playMapMusic")};b.prototype.clientRoleHurt=function(a,b){var f=fnDecode6BitBuf(b,b.length);TMessageBodyWL(f.pszDest)};b.prototype.clientGetGameGoldName=function(a,b){if(""!=b){var f=DecodeString(b);if(g_boOpenCaiji)if(-1!=f.indexOf("/"))f=f.split("/"),g_GameGoldName=f[0],g_GamePointName=f[1];else{f=DecodeString(f);a.record!=g_GameGoldNum.value&&""!=f&&(a.record>g_GameGoldNum.value?g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",a.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+f,a.record-g_GameGoldNum.value):g_LogSocket.AddGameDataLog(111,"\u5143\u5b9d",a.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+f,a.record-g_GameGoldNum.value));var d=CodeUtil._MAKELONG(a.param,a.tag);d!=g_GamePointNum.value&&""!=f&&(d>g_GamePointNum.value?g_LogSocket.AddGameDataLog(112,"\u6e38\u620f\u70b9",d,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+f,d-g_GamePointNum.value):g_LogSocket.AddGameDataLog(112,"\u6e38\u620f\u70b9",d,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+f,d-g_GamePointNum.value))}else f=DecodeString(b).split("\r"),g_GameGoldName=f[0],f[2]&&"1"==f[2]&&-1==g_GameMoneyType.indexOf(g_GameGoldName)&&g_GameMoneyType.push(g_GameGoldName),g_GamePointName=f[1],f[3]&&"1"==f[3]&&-1==g_GameMoneyType.indexOf(g_GamePointName)&&g_GameMoneyType.push(g_GamePointName),f[4]&&"1"==f[4]&&-1==g_GameMoneyType.indexOf("\u91d1\u5e01")&&g_GameMoneyType.push("\u91d1\u5e01")}g_GameGoldNum.value=a.record;g_GamePointNum.value=CodeUtil._MAKELONG(a.param,a.tag);Laya.stage.event("Update_Bag");GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum")};b.prototype.clientGetNewGamePointName=function(a,b){if(""!=b){var f=DecodeString(b);if(g_boOpenCaiji)if(-1!=f.indexOf("/"))f=f.split("/"),g_GameDiamondName=f[0],g_GameLingFName=f[1];else if(f=DecodeString(f),g_nGameDiamond.value!=a.record&&""!=f)a.record>g_nGameDiamond.value?g_LogSocket.AddGameDataLog(113,"\u91d1\u521a\u77f3",a.record,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+f,a.record-g_nGameDiamond.value):g_LogSocket.AddGameDataLog(113,"\u91d1\u521a\u77f3",a.record,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+f,a.record-g_nGameDiamond.value);else{var d=CodeUtil._MAKELONG(a.param,a.tag);g_nGameGird.value!=d&&""!=f&&(d>g_nGameGird.value?g_LogSocket.AddGameDataLog(114,"\u7075\u7b26",d,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+f,d-g_nGameGird.value):g_LogSocket.AddGameDataLog(114,"\u7075\u7b26",d,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+f,d-g_nGameGird.value))}else f=f.split("\r"),g_GameDiamondName=f[0],f[2]&&"1"==f[2]&&-1==g_GameMoneyType.indexOf(g_GameDiamondName)&&g_GameMoneyType.push(g_GameDiamondName),g_GameLingFName=f[1],f[3]&&"1"==f[3]&&-1==g_GameMoneyType.indexOf(g_GameLingFName)&&g_GameMoneyType.push(g_GameLingFName)}g_nGameDiamond.value=a.record;g_nGameGird.value=CodeUtil._MAKELONG(a.param,a.tag);Laya.stage.event("update_cqbInfo");GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum");Laya.stage.event("Update_Bag")};b.prototype.showmapevent=function(a,b){DecodeString(b);var f=new Laya.Point(a.tag,a.series),d=fnDecode6BitBuf(b,b.length),c=TMessageBodyWL(d.pszDest),e=CodeUtil._LOWORD(c.lTag2);CodeUtil._HIWORD(c.lTag2);d="";0<=e&&e<g_pak_list.length&&(d=g_pak_list[e]);CodeUtil._HIBYTE(a.param);var e=c.lParam1,h=c.lParam1+c.lParam2-1,c=c.lTag1,l=CodeUtil._LOBYTE(a.param);if(255!=l)if(l==ET_MAPEFFECT)""!=d&&(f.x*=48,f.y*=32,d=Animationmodule.playframe(!0,Mapmodule.root,"data/"+d+"/",e,h,c,!0,!1))&&(d.res_lock=!0,d.name=""+a.record,d.pos(f.x,f.y));else if(83==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",160,170,120,!1,!0))&&d.pos(48*f.x,32*f.y);else if(80==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",100,112,120,!1,!0))&&d.pos(48*f.x,32*f.y);else if(81==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",120,135,120,!1,!0))&&d.pos(48*f.x,32*f.y);else if(82==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",140,155,120,!1,!0))&&d.pos(48*f.x,32*f.y);else if(79==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",80,99,120,!1,!0))&&d.pos(48*f.x,32*f.y);else if(78==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",60,79,120,!1,!0))&&d.pos(48*f.x,32*f.y);else if(84==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",160,170,120,!1,!0))&&d.pos(48*f.x,32*f.y),(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",100,112,120,!1,!0))&&d.pos(48*f.x,32*f.y),(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",120,135,120,!1,!0))&&d.pos(48*f.x,32*f.y),(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",140,155,120,!1,!0))&&d.pos(48*f.x,32*f.y),(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",80,99,120,!1,!0))&&d.pos(48*f.x,32*f.y),(d=Animationmodule.playframe(!0,Mapmodule.root,"data/magic3/",60,79,120,!1,!0))&&d.pos(48*f.x,32*f.y);else if(ET_FIRE==l||115==l||116==l||117==l)Skillmodule.firewall(a.record,20,l,f);else if(ET_KUNMO==l)Skillmodule.firewall(a.record,14,0,f);else if(ET_PILESTONES==l)!Mapmodule.root.getChildByName(""+a.record)&&(d=Animationmodule.playframe(!0,Mapmodule.root,"data/Effect/",64,68,100,!1,!1))&&(d.name=""+a.record,d.pos(48*f.x,32*f.y),d.zOrder=9);else if(ET_MAPEFFECT==l){if(l=Mapmodule.root.getChildByName(""+a.record),!l&&(d=Animationmodule.playframe(!1,Mapmodule.root,"data/"+d+"/",e,h,c,!0,!1)))d.res_lock=!0,d.name=""+a.record,d.pos(48*f.x,32*f.y),d.zOrder=100}else if(9==l||10==l||11==l||12==l||13==l||14==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/dragon/",230,234,120,!0,!1))&&d.pos(48*f.x,32*f.y);else if(15==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/dragon/",350,384,120,!0,!1))&&d.pos(48*f.x,32*f.y);else if(18==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/effect/",880,889,120,!0,!1))&&d.pos(48*f.x,32*f.y);else if(20==l)(d=Animationmodule.playframe(!0,Mapmodule.root,"data/effect/",328,337,120,!0,!1))&&d.pos(48*f.x,32*f.y);else if(21==l){var g=Mapmodule.root.getChildByName("MapEveEff"+a.record);g&&g.removeSelf();GameUtil.loadImg(530,"prguse2",function(b){g=new Laya.Image;g.skin=b;g.name="MapEveEff"+a.record;g.pos(48*f.x,32*f.y);g.zOrder=99999;Mapmodule.root.addChild(g)});(d=Animationmodule.playframe(!0,Mapmodule.root,"data/prguse2/",550,561,120,!0,!1))&&d.pos(48*f.x,32*f.y)}else if(30==l){if(l=Mapmodule.root.getChildByName(""+a.record),!l&&(d=Animationmodule.playframe(!0,Mapmodule.root,"data/mon33/",2672,2676,120,!0,!1)))d.res_lock=!0,d.name=""+a.record,d.pos(48*f.x,32*f.y)}else if(1==l){if(l=Mapmodule.root.getChildByName(""+a.record),!l&&(d=Animationmodule.playframe(!1,Mapmodule.root,"data/mon6/",420,420,120,!0,!1)))d.res_lock=!0,d.name=""+a.record,d.pos(48*f.x,32*f.y),d.zOrder=0}else 88==l&&(l=Mapmodule.root.getChildByName(""+a.record),!l&&(d=Animationmodule.playframe(!1,Mapmodule.root,"data/prguse2/",550,561,120,!0,!1)))&&(d.res_lock=!0,d.name=""+a.record,d.pos(48*f.x,32*f.y),d.zOrder=100)};b.prototype.hidemapevent=function(a,b){if(Mapmodule.root){var f=Mapmodule.root.getChildByName(""+a.record);f&&Animationmodule.removeAni(f)}Skillmodule.hideskill(a.record)};b.prototype.clientGetNavigationInfo=function(a,b){if(a.param==b.length){for(var f=[],d=[],c=zDecodeString(b).split("\r\n"),e=0;e<c.length;e++)if(-1==c[e].indexOf(";")){var h=c[e].split("\t");if(h&&3>h.length)h[0]&&-1!=h[0].indexOf("/")&&(h[0]=h[0].slice(h[0].indexOf("/")+1)),""!=h[0]&&d.push(h[0]);else{var l=[];l.mapid=h[0];l.mapx=h[1];l.mapy=h[2];l.npcname=h[3];l.maplvl=h[4];l.maptype=h[5];l.mapcolor=h[6];l.mapnps=h[7];f.push(l)}}Mapdata.setdata(f,d)}};b.prototype.clientChangeRoleLight=function(a){};b.prototype.clientChangeRoleNameColor=function(a){var b=a.record;a=a.param;b==playerID&&(Laya.stage.event("update_Name_Color",[a]),Laya.stage.event("UpdateNameColor",[a]));ObjectManage.setObjectNameColor(b,a)};b.prototype.clientRoleDoTurn=function(a,b){var f=b.length,d=a.param,c=a.tag;CodeUtil._LOBYTE(a.series);CodeUtil._HIBYTE(a.series);if(11<f){var e=fnDecode6BitBuf(b,b.length),e=TCharDesc(e.pszDest),h=CodeUtil.getFeatureLen(e.feature),l=b.slice(11,b.length),g=fnDecode6BitBuf(l,256).pszDest,g=TFeature(e.feature,g),l=b.substr(11+h,f-11-h),f=DecodeString(l);ObjectManage.ChangeState({ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:g,state:e.status,str:f});a.record==playerID&&(Mapmodule.cur_x=d,Mapmodule.cur_y=c,console.log("turn,",f,d,c))}};b.prototype.clientRecvWalkMessage=function(a,b){var f=b.length,d="";if(11<f){if(a.ident==SM_100HIT){var c=b.indexOf("|");0<c&&(d=b.substr(c,f-c),o_content=b.substr(0,c-1))}var c=fnDecode6BitBuf(b,b.length),c=TCharDesc(c.pszDest),e=c.feature,d=b.slice(11,b.length),h=CodeUtil.getFeatureLen(e),d=fnDecode6BitBuf(d,256).pszDest,e=TFeature(e,d),d=b.substr(11+h,f-11-h),f=DecodeString(d),f={ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:e,state:c.status,str:f}}else f={ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series};(c=ObjectManage.findobject(a.record))&&c.OwnerID==playerID&&!GameUtil.checkPosPointIsTrue(c.grid,{x:a.param,y:a.tag})||ObjectManage.ChangeState(f);if(7==a.ident)Laya.timer.once(200,this,function(){var b=ObjectManage.findobject(a.record);b&&(b=GameUtil.GetNextPoint(a.param,a.tag,b.cur_dir),Laya.stage.event("MSG_MOVE_RESULT",[a.record,b.x,b.y]))})};b.prototype.clientRecvRunMessage=function(a,b){var f=b.length;if(11<f)var d=fnDecode6BitBuf(b,b.length),d=TCharDesc(d.pszDest),c=d.feature,e=b.slice(11,b.length),h=CodeUtil.getFeatureLen(c),e=fnDecode6BitBuf(e,256).pszDest,c=TFeature(c,e),e=b.substr(11+h,f-11-h),f=DecodeString(e),f={ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:c,state:d.status,str:f};else f={ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series};ObjectManage.ChangeState(f)};b.prototype.clientChangeRoleFeature=function(a,b){var f=CodeUtil.getFeatureLen(a.param);if(f<=b.length){var f=fnDecode6BitBuf(b,f),f=TFeature(a.param,f.pszDest),d=CodeUtil._MAKELONG(a.tag,a.series);ObjectManage.ChangeState({ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:f,level:d});Laya.stage.event("reset_equip_dlg");(d=ObjectManage.findobject(a.record))&&3==d.type&&(d.stallssetting(f.buffer[13]),f=GetMatrix(f.buffer[15]))&&(f=[new Laya.ColorFilter(f)],d.sp.filters=f)}};b.prototype.clientRecvHitMessage=function(a,b){var f=a.param,d=a.tag,c=a.series,e=parseInt(b);ObjectManage.ChangeState({ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series},e);a.ident==SM_HEAVYHIT&&1==e&&(c*=8,e=c+2,f=new Laya.Point(f,d),(d=Animationmodule.playframe(!0,Mapmodule.root,"data/Effect/",c,e,80,!1,!0))&&d.pos(48*f.x,32*f.y))};b.prototype.magicfire=function(a,b,f){b=fnDecode6BitBuf(b,b.length);var d=TCharDesc(b.pszDest);b=a.record;f=CodeUtil._LOBYTE(a.series);var c=CodeUtil._HIBYTE(a.series),e=a.param;a=a.tag;var h=d.status,l=d.feature,d=parseInt(l/2),g=null,g=0===l%2?!0:!1,l=ObjectManage.findobject(b);if(null!=l){var u=l.currMagicId;1E3<=u&&1500>=u?(l.currMagicId=0,Skillmodule.playCustomSkillMagicfire(l,u,{tx:e,ty:a,lv:d,targetid:h})):!g_myHero||61!=c&&62!=c&&64!=c?b&&119==c&&4==f?Skillmodule.play2skill(b,119,4,e,a,0):Skillmodule.play2skill(b,c,f,e,a,h,d,g):(d=THumFeature(l.data.fea.buffer).btJob,61==c&&0==d?Skillmodule.play2skill(b,611,f,e,a,h):61==c&&2==d?Skillmodule.play2skill(b,61,f,e,a,h):62==c&&0==d?Skillmodule.play2skill(b,621,f,e,a,h):62==c&&1==d?Skillmodule.play2skill(b,62,f,e,a,h):64==c&&1==d?Skillmodule.play2skill(b,641,f,e,a,h):64==c&&2==d&&Skillmodule.play2skill(b,64,f,e,a,h))}};b.prototype.magicfirefail=function(a,b){};b.prototype.clientRecvStruckMessage=function(a,b){var f=zDecode2String(b);if(40<=f.length){var d=TMessageBodyWL(f),c=GameUtil.slice(f,20,40),e=TMessageBodyWL(c),f=GameUtil.slice(f,40,f.length),h=TFeature(d.lParam1,f),l={ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:h,state:e};if(f=ObjectManage.findobject(a.record))if(ObjectManage.ChangeState(l),f.data.level=l.state.lTag2,h=THumFeature(l.fea.buffer),h=h.wRace,0==h||1==h||150==h?ObjectManage.updateObjectHp(l.state.lParam2,l.state.lParam1,l.record,null,null,!0):ObjectManage.updateObjectHp(l.state.lParam2,l.state.lParam1,l.record,null,null,!1),a.ident==SM_NPCHSPELLCHANGED?(e.lParam1=c[0]+(c[1]<<8)+(c[2]<<16)+(c[3]<<24),e.lParam2=c[4]+(c[5]<<8)+(c[6]<<16)+(c[7]<<24),e.lParam3=c[8]+(c[9]<<8)+(c[10]<<16)+(c[11]<<24),e.lTag1=c[12]+(c[13]<<8)+(c[14]<<16)+(c[15]<<24),e.lTag2=c[16]+(c[17]<<8)+(c[18]<<16)+(c[19]<<24),f.m_Abil.HP<f.m_Abil.MaxHP&&GameUtil.showvaule(e.lParam3,a.ident,f,0<e.lParam3)):(c=CodeUtil._MAKELONG(a.param,a.tag),GameUtil.showvaule(c,a.ident,f,!1)),c=new Laya.Point(48*f.grid.x,32*f.grid.y),f.skin_feature&&165==f.skin_feature.wRaceImg&&3712==f.skin_feature.wAppr&&((e=Animationmodule.playframe(!0,Mapmodule.root,"data/mon38/",6530,6535,100,!1,!0))&&e.pos(c.x,c.y),d=ObjectManage.findobject(d.lTag1)))d=GameUtil.getorientation(f.grid,d.grid),f.changestate(null,11,d,!1);f&&playerID&&a.record==playerID&&(Laya.stage.event("update_role_info",[f.m_Abil]),null!=f.obj_hores&&g_ClientConfig.nDownHouse>Math.floor(100*Math.random())&&Sendmessage.sendSay("@\u4e0b\u9a6c"),GlobalCfglist.autotp?Gameconfig.transfer(f.m_Abil.HP,f.m_Abil.MaxHP):GlobalCfglist.autotp1&&Gameconfig.transfer1(f.m_Abil.MP,f.m_Abil.MaxMP),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"))}};b.prototype.clientRecvRoleSitDownMessage=function(a){a.record!=playerID&&ObjectManage.ChangeState({ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series})};b.prototype.clientRecvSpellMessage=function(a,b){var f=parseInt(b),d=CodeUtil._LOWORD(f),f=CodeUtil._HIWORD(f),f={ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,magicid:d,newlv:f};1E3<=d&&1500>=d?Skillmodule.applyCustomSkillForOther(f):ObjectManage.ChangeState(f,f.newlv)};b.prototype.clientRecvDigUpMessage=function(a,b){var f=0;if(27<b.length){var d=b.slice(0,20),d=fnDecode6BitBuf(d,20),d=TMessageBodyWL(d.pszDest),f=b.slice(27,b.length),c=fnDecode6BitBuf(f,256).pszDest,f=d.lParam1;e=f=TFeature(f,c);ObjectManage.ChangeState({ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:f,state:d.lParam2,str:""})}};b.prototype.clientRecvDigDownMessage=function(a){ObjectManage.ChangeState({ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:e})};b.prototype.clientRecvFlyAXEMessage=function(a,b){var f=ObjectManage.findobject(a.record),d=fnDecode6BitBuf(b,b.length),c=TMessageBodyW(d.pszDest),e=CodeUtil._MAKELONG(c.Tag1,c.Tag2),d=new Laya.Point(c.Param1,c.Param2);if(f){var h=THumFeature(f.data.fea.buffer);71==h.wDress&&45==h.wRace?(Skillmodule.playself(999,999,f,d),Skillmodule.play2skill(a.record,999,999,c.Param1,c.Param2,e)):47==h.wDress&&45==h.wRace?(Skillmodule.playself(1E3,1E3,f,d),Skillmodule.play2skill(a.record,1E3,1E3,c.Param1,c.Param2,e)):323==h.wDress&&45==h.wRace?(Skillmodule.playself(1E3,1E3,f,d),Skillmodule.play2skill(a.record,1E3,1E3,c.Param1,c.Param2,e)):328==h.wDress&&45==h.wRace?(Skillmodule.playself(1002,1002,f,d),Laya.timer.once(300,this,function(){Skillmodule.play2skill(a.record,1002,1002,c.Param1,c.Param2,e)})):329==h.wDress&&45==h.wRace?(Skillmodule.playself(1003,1003,f,d),Laya.timer.once(300,this,function(){Skillmodule.play2skill(a.record,1003,1003,c.Param1,c.Param2,e)})):372==h.wDress&&45==h.wRace?(Skillmodule.playself(1003,1003,f,d),Laya.timer.once(300,this,function(){Skillmodule.play2skill(a.record,1006,1006,c.Param1,c.Param2,e)})):374==h.wDress&&45==h.wRace?(Skillmodule.playself(1007,1007,f,d),Laya.timer.once(300,this,function(){Skillmodule.play2skill(a.record,1007,1007,c.Param1,c.Param2,e)})):this.clientRecvHitMessage(a,b)}};b.prototype.clientRecvLigthingMessage=function(a,b){var f=fnDecode6BitBuf(b,b.length),f=TMessageBodyWL(f.pszDest),d=a.series,c=f.lParam1,e=f.lParam2,h=f.lTag1,l=f.lTag2;if((f=ObjectManage.findobject(a.record))&&f.skin_feature){var g=new Laya.Point(48*f.grid.x,32*f.grid.y);if(26==f.skin_feature.wRaceImg&&250==f.skin_feature.wAppr)var l=420+10*d,u=l+10-1,B="data/mon26/";else if(29==f.skin_feature.wRaceImg&&260==f.skin_feature.wAppr)l=2652+10*d,u=l+5-1,B="data/mon26/";else if(27==f.skin_feature.wRaceImg&&251==f.skin_feature.wAppr)l=930+10*d,u=l+6-1,B="data/mon26/";else if(113==f.skin_feature.wRaceImg&&340==f.skin_feature.wAppr)l=581+10*d,u=l+9-1,B="data/mon35/";else if(29==f.skin_feature.wRaceImg&&255==f.skin_feature.wAppr)l=2652+10*d,u=l+5-1,B="data/mon26/";else if(151==f.skin_feature.wRaceImg&&262==f.skin_feature.wAppr)l=1610+10*d,u=l+6-1,B="data/mon27/";else if(28==f.skin_feature.wRaceImg&&241==f.skin_feature.wAppr)l=932+10*d,u=l+4-1,B="data/mon25/";else if(28==f.skin_feature.wRaceImg&&240==f.skin_feature.wAppr)l=426+10*d,u=l+4-1,B="data/mon25/";else{if(83==f.skin_feature.wRaceImg&&800==f.skin_feature.wAppr){f.is_call&&(f.is_call=!1,Skillmodule.play2skill(a.record,1017,1017,c,e,h));return}if(101==f.skin_feature.wRaceImg&&321==f.skin_feature.wAppr){var B="data/mon33/",A=ObjectManage.findobject(h),d=new Laya.Point(c,e),d=GameUtil.getorientation(f.grid,d);f.changestate(null,3,d,!1);A&&(l&&1==l?((f=Animationmodule.playframe(!0,Mapmodule.root,B,780,788,100,!1,!0))&&f.pos(48*A.grid.x,32*A.grid.y),(f=Animationmodule.playframe(!0,Mapmodule.root,B,790,799,100,!1,!0))&&f.pos(48*A.grid.x,32*A.grid.y)):l&&2==l&&(Skillmodule.play2skill(a.record,1009,1009,c,e,h),Laya.timer.once(300,this,function(){var a=Animationmodule.playframe(!0,Mapmodule.root,"data/magic/",1320,1335,50,!1,!0);a&&a.pos(48*A.grid.x,32*A.grid.y)})));return}if(101==f.skin_feature.wRaceImg&&322==f.skin_feature.wAppr){B="data/mon33/";A=ObjectManage.findobject(h);d=new Laya.Point(c,e);d=GameUtil.getorientation(f.grid,d);f.changestate(null,3,d,!1);A&&(l&&1==l?(d=Animationmodule.playframe(!0,Mapmodule.root,B,1320,1349,100,!1,!0))&&d.pos(48*A.grid.x,32*A.grid.y):l&&2==l&&(Skillmodule.play2skill(a.record,1009,1009,c,e,h),Laya.timer.once(300,this,function(){var a=Animationmodule.playframe(!0,Mapmodule.root,"data/magic/",1340,1355,50,!1,!0);a&&a.pos(48*A.grid.x,32*A.grid.y)})));return}if(161==f.skin_feature.wRaceImg&&327==f.skin_feature.wAppr){B="data/mon33/";A=ObjectManage.findobject(h);d=new Laya.Point(c,e);d=GameUtil.getorientation(f.grid,d);f.changestate(null,3,d,!1);A&&(d=Animationmodule.playframe(!0,A,B,3350,3389,100,!1,!0));return}if(111==f.skin_feature.wRaceImg&&330==f.skin_feature.wAppr){B="data/magic5/";A=ObjectManage.findobject(h);d=new Laya.Point(c,e);d=GameUtil.getorientation(f.grid,d);f.changestate(null,3,d,!1);A&&(l&&199==l?(Skillmodule.playself(1004,1004,f,f.grid),Laya.timer.once(500,this,function(){Skillmodule.play2skill(a.record,1004,1004,c,e,h);Laya.timer.once(400,this,function(){Animationmodule.playframe(!0,A,B,270,274,100,!1,!0)})})):l&&200==l&&(Skillmodule.playself(1005,1005,f,f.grid),Laya.timer.once(800,this,function(){Skillmodule.play2skill(a.record,1005,1005,c,e,h);Laya.timer.once(300,this,function(){Animationmodule.playframe(!0,A,B,450,459,100,!1,!0)})})));return}if(165==f.skin_feature.wRaceImg&&378==f.skin_feature.wAppr){B="data/mon38/";A=ObjectManage.findobject(h);d=new Laya.Point(c,e);d=GameUtil.getorientation(f.grid,d);f.changestate(null,3,d,!1);A&&(Skillmodule.playself(1008,1008,f,f.grid),Laya.timer.once(800,this,function(){Animationmodule.playframe(!0,A,B,4220,4222,100,!1,!0)}));return}if(165==f.skin_feature.wRaceImg&&3712==f.skin_feature.wAppr){B="data/mon38/";l=6640;(d=Animationmodule.playframe(!0,Mapmodule.root,B,l,l+6-1,100,!1,!0))&&d.pos(g.x,g.y);d=new Laya.Point(c,e);d=GameUtil.getorientation(f.grid,d);f.changestate(null,12,d,!1);return}if(165==f.skin_feature.wRaceImg&&3713==f.skin_feature.wAppr){B="data/mon38/";l=7510;u=l+7-1;d=GameUtil.getMovePoint(f.grid,d,1);g=new Laya.Point(48*d.x,32*d.y);d=new Laya.Point(c,e);d=GameUtil.getorientation(f.grid,d);f.changestate(null,11,d,!1);(d=Animationmodule.playframe(!0,Mapmodule.root,B,l,u,100,!1,!0))&&d.pos(g.x,g.y);return}l=350+20*d;u=l+6-1;B="data/mon5/"}(d=Animationmodule.playframe(!0,Mapmodule.root,B,l,u,100,!1,!0))&&d.pos(g.x,g.y);d=new Laya.Point(c,e);d=GameUtil.getorientation(f.grid,d);f.changestate(null,3,d,!1)}};b.prototype.clientRecvAliveMessage=function(a,b){var f=b.length;CodeUtil._LOBYTE(a.series);CodeUtil._HIBYTE(a.series);if(11<f){var d=fnDecode6BitBuf(b,b.length),d=TCharDesc(d.pszDest),c=CodeUtil.getFeatureLen(d.feature),e=b.slice(11,b.length),h=fnDecode6BitBuf(e,256).pszDest,h=TFeature(d.feature,h),e=b.substr(11+c,f-11-c),f=DecodeString(e),f={ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:h,state:d.status,str:f};ObjectManage.ChangeState(f);a.record==lockingID&&GameUtil.delhalo(lockingID);f=ObjectManage.findobject(f.record);a.ident==SM_ALIVE&&GameUtil.showvaule(null,E_ROLE_ALIVE,f,null);f&&0==f.visible&&(f.visible=!0)}};b.prototype.clientRecvHideMessage=function(a,b){var f=ObjectManage.findobject(a.record);if(f&&0<f.msg_list.length)for(var d=0;d<f.msg_list.length;d++){var c=f.msg_list[d];if(c&&10==c.msg.ident)return}a.record!=playerID&&ObjectManage.delobject(a.record)};b.prototype.clientRecvMoveFailMessage=function(a,b){if(11<b.length){var f=fnDecode6BitBuf(b,11,!1),d=TCharDesc(f.pszDest),f=b.slice(CodeUtil.getFeatureLen(d.feature),b.length),f=fnDecode6BitBuf(f,256,!1);TFeature(d.feature,f.nDestPos);Laya.stage.event("MSG_MOVE_RESULT",[a.record,a.param,a.tag])}};b.prototype.clientRecvDeathMessage=function(a,b){var f=b.length;CodeUtil._LOBYTE(a.series);CodeUtil._HIBYTE(a.series);if(11<f){f=fnDecode6BitBuf(b,8).pszDest;f=TCharDesc(f);CodeUtil.getFeatureLen(f.feature);var d=b.slice(11,b.length),d=fnDecode6BitBuf(d,256).pszDest,c=TFeature(f.feature,d),d=THumFeature(c.buffer),f={ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:c,state:f.status,str:""};if(19!=d.wRace||290!=d.wDress&&291!=d.wDress&&292!=d.wDress){d=ObjectManage.findobject(f.record);ObjectManage.ChangeState(f);ObjectManage.visibleHpSpr(f.record,!1);if(f.record==playerID)Laya.stage.event("ROLE_DIE"),Laya.stage.event("role_die_state");else if(null!=d&&(c="",(c=null!=d.txt_name?d.txt_name._text:"")&&-1!=c.indexOf(g_RoleNameOnly)&&d.OwnerID==playerID)){f=g_babyList.indexOf(f.record);-1!=f&&g_babyList.splice(f,1);d=!0;for(c=0;c<g_babyList.length;c++)(f=ObjectManage.findobject(g_babyList[c]))&&!f.is_die&&(d=!1);d&&Laya.stage.event("close_petBtn")}g_myHero&&g_myHero.data.record==a.record&&(f=g_myHero.m_Abil,f.HP=0,Laya.stage.event("update_hero_info",[f]))}else ObjectManage.ChangeState(f),ObjectManage.visibleHpSpr(f.record,!1)}};b.prototype.clientRecvItemDescList=function(a,b){var f=a.param,d=b.substring(0,f),f=b.substring(f),d=zDecodeString(d),f=zDecodeString(f),c="";d&&(c=d);f&&(c=d+f);GameUtil.dismantlingItemDescText(c)};b.prototype.clientRecvSpaceMoveHideMsg=function(a){var b=a.record;if(b!=playerID){var f=ObjectManage.findobject(b);a=new Laya.Point(a.tag,a.series);f&&Skillmodule.playself(19,4,f,a);ObjectManage.delobject(b)}};b.prototype.clientRecvSpaceMove2HideMsg=function(a){var b=a.record;if(b!=playerID){var b=ObjectManage.findobject(b),f=new Laya.Point(a.tag,a.series);b&&Skillmodule.playself(19,4,b,f);b&&3==b.type&&ObjectManage.delobject(a.record)}};b.prototype.clientRecvSpaceMoveShowMsg=function(a,b){var f=b.length;if(11<f){var d=fnDecode6BitBuf(b,8),d=TCharDesc(d.pszDest),c=d.feature,e=CodeUtil.getFeatureLen(c),h=b.slice(11,b.length),h=fnDecode6BitBuf(h,256).pszDest,c=TFeature(c,h),h=b.substr(11+e,f-11-e),f=DecodeString(h),e=a.record,h=a.param,l=a.tag,g=ObjectManage.findobject(e);""!=f&&ObjectManage.ChangeState({ident:a.ident,record:a.record,param:a.param,tag:a.tag,series:a.series,fea:c,state:d.status});g&&(g.x=48*h,g.y=32*l,g.grid.x=h,g.grid.y=l,g.selfname.pos(g.x,g.y),g.target_pos.x=h,g.target_pos.y=l,e==playerID&&Mapmodule.enterMap(Mapmodule.sceneid,h,l),autohookstate&&e==playerID&&(Laya.stage.event("onhook",["0"]),Laya.timer.once(800,this,function(){Laya.stage.event("onhook",["3"])})))}};b.prototype.clientChangeBead=function(a,b){DecodeString(b)};b.prototype.clientRecvActorSay=function(a,b){var f=a.record,d=DecodeString(b),c=CodeUtil._LOBYTE(a.param),e=CodeUtil._HIBYTE(a.param),h=4;0<=d.indexOf("(!)")&&(h=6);Laya.stage.event("new_chat_msg",[{info:d,front:c,bg:e,type:h}]);-1!=d.indexOf("\x3c/:")||-1!=d.indexOf("{pos|")||-1!=d.indexOf("\x3c[")&&-1!=d.indexOf("]\x3e")&&-1!=d.indexOf("\\")||ObjectManage.showChatTxt(f,d)};b.prototype.clientRecvWinExp=function(a,b){var f=0>a.record?4294967296+a.record:a.record,d=a.series,c=CodeUtil._MAKELONG(a.param,a.tag),e=DecodeString(b),h=ObjectManage.findobject(playerID);null!=h&&(3==d?(h.m_Abil.Exp=f,Laya.stage.event("show_log",[{txt:"\u5df2\u83b7\u5f97"+parseInt(c)+"\u70b9\u7ecf\u9a8c\u503c(\u5305\u542b"+e+"\u53cc\u500d\u7ecf\u9a8c)",color:"#00ff00"}])):0==a.series&&(h.m_Abil.Exp=f,f="\u5df2\u83b7\u5f97"+parseInt(c)+"\u70b9\u7ecf\u9a8c\u503c",G_SHOW_EXP&&Laya.stage.event("new_chat_msg",[{info:f,front:219,bg:255,type:8}])),Laya.stage.event("update_role_info",[h.m_Abil]),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"))};b.prototype.clientChangeLightOnDay=function(a){};b.prototype.clientRecvCuteMsg=function(a,b){};b.prototype.clientRecvWineMagic=function(a,b){DecodeString(b)};b.prototype.clientRecvAbilityMessage=function(a,b){g_GameCionNum.value=a.record;var f=CodeUtil._LOBYTE(a.param);g_GameGoldNum.value=CodeUtil._MAKELONG(a.tag,a.series);var d=ObjectManage.findobject(playerID);if(g_boOpenCaiji)if(-1!=b.indexOf("/")){var c=b.split("/");if(1<c.length){var e=g_gamePopNum.value,h=zDecode2String(c[0]),h=TAbility(h),c=DecodeString(c[1]);g_gamePopNum.value=h.CreditPoint;g_gamePopNum.value>e&&g_LogSocket.AddGameDataLog(116,"\u58f0\u671b",g_gamePopNum.value,"\u589e\u52a0/\u975e\u7ed1\u5b9a/"+c,g_gamePopNum.value-e);g_gamePopNum.value<e&&g_LogSocket.AddGameDataLog(116,"\u58f0\u671b",g_gamePopNum.value,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/"+c,g_gamePopNum.value-e);d&&d.m_Abil.Level&&d.m_Abil.Level!=h.Level&&g_LogSocket.AddGameDataLog(12,"??",1,d.m_Abil.Level,"");Laya.stage.event("update_role_info",[h]);ObjectManage.SetAttribute(playerID,h)}}else h=zDecode2String(b),h=TAbility(h),d&&d.m_Abil.Level&&d.m_Abil.Level!=h.Level&&g_LogSocket.AddGameDataLog(12,"??",1,h.Level,""),Laya.stage.event("update_role_info",[h]),ObjectManage.SetAttribute(playerID,h);else h=zDecode2String(b),h=TAbility(h),Laya.stage.event("update_role_info",[h]),ObjectManage.SetAttribute(playerID,h),h&&(g_gamePopNum.value=h.CreditPoint);d=ObjectManage.findobject(playerID);e=0;d&&d.skin_feature&&(e=d.skin_feature.btGender);Laya.stage.event("reset_head_icon",[e,f]);ObjectManage.updateObjectHp(h.MaxHP,h.HP,playerID,h.MP,h.MaxMP);GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum");Laya.stage.event("Update_Bag")};b.prototype.clientRecvSubAbilityMessage=function(a,b){g_nMyHitPoint=CodeUtil._LOBYTE(a.param);g_nMySpeedPoint=CodeUtil._HIBYTE(a.param);g_nMyAntiPoison=CodeUtil._LOBYTE(a.tag);g_nMyPoisonRecover=CodeUtil._HIBYTE(a.tag);g_nMyHealthRecover=CodeUtil._LOBYTE(a.series);g_nMySpellRecover=CodeUtil._HIBYTE(a.series);g_nMyAntiMagic=CodeUtil._LOBYTE(a.record);body=DecodeString(b);GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum")};b.prototype.clientRecvHealthSpellChanged=function(a,b){var f=a.record;if(""!=b&&-1!=b.indexOf("/")){var d=b.split("/");""!=d[0]&&(b=d[0]);if(""!=d[1]&&0<d[1])var c=parseInt(d[1])}var d=fnDecode6BitBuf(b,b.length,!1),e=TMessageBodyL(d.pszDest),d=CodeUtil._MAKELONG(a.param,a.tag),h=e.lParam1,l=e.lParam2,e=e.lParam3;if(playerID&&f==playerID){var g=ObjectManage.findobject(f);if(g){var u=g.m_Abil;u&&(u.HP>h?(GameUtil.showvaule(u.HP-h,E_ROLE_CHANGE_HP,g,!1),ObjectManage.findobject(playerID),GlobalCfglist.autotp?Gameconfig.transfer(g.m_Abil.HP,g.m_Abil.MaxHP):GlobalCfglist.autotp1&&Gameconfig.transfer1(g.m_Abil.MP,g.m_Abil.MaxMP)):u.HP<h&&u.HP<u.MaxHP&&GameUtil.showvaule(h-u.HP,E_ROLE_CHANGE_HP,g,!0),u.MP>d&&0<d?GameUtil.showvaule(u.MP-d,E_ROLE_CHANGE_MP,g,!1):u.MP<d&&0<d&&u.MP<u.MaxMP&&GameUtil.showvaule(d-u.MP,E_ROLE_CHANGE_MP,g,!0),0<d&&(u.MP=d),0<h&&(u.HP=h),0<l&&(u.MaxHP=l),0<e&&(u.Level=e),Laya.stage.event("update_role_info",[u]),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"))}}(g=ObjectManage.findobject(f))&&g.Blood&&(g.boMagicShield=a.series,g.Blood.showBlueBar(g));ObjectManage.updateObjectHp(l,h,f,d,c);g_myHero&&g_myHero.m_Abil&&g_myHero.data.record==f&&(u=g_myHero.m_Abil,u.MP=d,u.HP=h,u.MaxHP=l,u.Level=e,GlobalCfglist.autotpH&&Gameconfig.heroCllback(g_myHero.m_Abil.HP,g_myHero.m_Abil.MaxHP),Laya.stage.event("update_hero_info",[u]))};b.prototype.clientRecvPlayerTalkMsg=function(a,b,f){if(a.ident==SM_SYSMESSAGE){var d=DecodeString(b);if(-1!=d.indexOf("ItemCanPickUpTick")&&-1!=d.indexOf("MsgID")&&-1!=d.indexOf("MakeIndex")){var c=JSON.parse(d),e=ObjectManage.findobject(playerID);if(c&&e.grid.x==c.ItemX&&e.grid.y==c.ItemY)Laya.timer.once(3300,this,function(){Sendmessage.ClickMapItem(e.grid.x,e.grid.y)})}}if(1!=a.tag&&(d="",100==a.ident&&65023!=a.param&&(d=this.UpGlobaInf(b)),""==d&&(d=DecodeString(b)),""!=d&&(c&&(d=c.Say),-1==d.indexOf("\u5957\u88c5\u5c5e\u6027")))){var h=d.indexOf("{");if(-1!=h&&-1==d.indexOf("|")){var l=d.indexOf("/");b=d.indexOf("}");c=d.substr(0,h);h=d.substr(h+1,l-(h+1));d=d.substr(b+1,d.length);d=c+h+d}if(a.ident==SM_WHISPER){c=d.split(" ")[0];for(b=0;b<G_Friend_HMD_List.length;b++)if(G_Friend_HMD_List[b]==c)return;for(b=0;b<G_PRIVATE_CHAT_list.length;b++)if(G_PRIVATE_CHAT_list[b]==c)return}b=CodeUtil._LOBYTE(a.param);c=CodeUtil._HIBYTE(a.param);if(0==f){if(a.ident!=SM_SYSMESSAGE||a.ident==SM_SYSMESSAGE&&1!=a.tag&&196==b)f=1;Laya.stage.event("new_chat_msg",[{info:d,front:b,bg:c,type:f}]);-1!=d.indexOf("(\u82f1\u96c4) \u72b6\u6001\uff1a")&&Laya.stage.event("heroState",[d]);-1==d.indexOf("\u53ec\u5524\u70c8\u706b\u7cbe\u7075\u5931\u8d25")&&-1==d.indexOf("\u5f00\u542f\u9010\u65e5\u5251\u6cd5\u5931\u8d25")&&-1==d.indexOf("\u9f99\u5f71\u5251\u6cd5\u5f00\u542f\u5931\u8d25")&&-1==d.indexOf("\u5f00\u5929\u65a9\u5f00\u542f\u5931\u8d25")||!lockingID||Objectcontrol.fight();a=d.indexOf("\u5f3a\u884c\u79bb\u7ebf");1<=a&&(Sendmessage.End(),Laya.stage.event("show_alert_dlg",[{type:1,txt:d,color:"#ff0000"}]));d.indexOf("\u5143\u5b9d\u4e0d\u8db3,\u65e0\u6cd5\u8d2d\u4e70");1<=a&&ItemMgr.getInstance().LastBaiTanBuyItem&&(a=ItemMgr.getInstance().LastBaiTanBuyItem.item.MakeIndex,ItemMgr.getInstance().DeleteItem(a,!0))}else Laya.stage.event("new_chat_msg",[{info:d,front:b,bg:c,type:f}]);3==f&&G_Guald_Chat_List.push({title:"",info:d})}};b.prototype.sendNewLineMsg=function(a,b){var f="",d=DecodeString(a),c=CodeUtil._LOBYTE(b.param),e=CodeUtil._HIBYTE(b.param),h=CodeUtil._LOBYTE(b.tag),l=CodeUtil._HIBYTE(b.tag),g=b.series,u=b.record;if(d){var B=new Laya.Image;B.width=800;0==l&&(B.skin="gameres/ui/img_roll.png");if(d.indexOf("||"))for(var d=d.split("||"),A=0;A<d.length;A++){var f=f+(d[A]+"\n"),D=GameUtil.msgSetColor(f,c,e,h);D.y=0*D.height+5;B.height=D.y+D.height+5}else D=GameUtil.msgSetColor(d[A],Fcolor,Bcolor,h),B.height=D.height;B.addChild(D);B.width=D.width;B.x=(Laya.stage.width-B.width)/2;B.y=g;B.name="newline"+l;B.nTime=u;B.nMode=l;switch(l){case 0:G_newLineMsm0.push(B);GameUtil.newLineMsg(G_newLineMsm0,l);break;case 1:G_newLineMsm1.push(B);GameUtil.newLineMsg(G_newLineMsm1,l);break;case 2:G_newLineMsm2.push(B),GameUtil.newLineMsg(G_newLineMsm2,l)}}};b.prototype.clientRecvMoveMessage=function(a,b){var f=DecodeString(b).toLowerCase(),d=CodeUtil._LOBYTE(a.param),c=CodeUtil._HIBYTE(a.param),e=a.tag,h=a.series,l=a.record;G_RollMsg[h]?G_RollMsg[h].push({txt:f,fcolor:d,bcolor:c,x:e,y:h,count:l}):(G_RollMsg[h]=[{txt:f,fcolor:d,bcolor:c,x:e,y:h,count:l}],GameUtil.rollMsg(G_RollMsg[h]))};b.prototype.clientRecvDelayMsg=function(a,b){if(!(5<G_countDownMsg.length)){var f=a.record,d=a.param,c=Get2RGB(a.tag),e=Get2RGB(a.series),h=DecodeString(b);txt=new Laya.Text;txt.color=c;txt.fontSize=16;txt.time=d;txt.text=h;txt.id=f;txt.stroke=1;txt.strokeColor=e;txt.x=(browser_width-txt.width)/2;G_countDownMsg.push(txt);GameUtil.countDownMsg(h)}};b.prototype.clientRecvCenterMsg=function(a,b){CodeUtil._LOBYTE(a.param);CodeUtil._HIBYTE(a.param);DecodeString(b)};b.prototype.clientRecvMsgShowOnChatTop=function(a,b){var f=CodeUtil._LOBYTE(a.param),d=CodeUtil._HIBYTE(a.param),c=a.record,e=DecodeString(b);Laya.stage.event("new_chat_msg",[{info:e,front:f,bg:d,type:1},c])};b.prototype.clientRecvAddItemMessage_Caiji=function(b,f){if(""!=f){var e=-100;if(-1!=f.indexOf("/")){var h=f.split("/"),l=h[0];h[1]&&(e=parseInt(DecodeString(h[1])));h=fnDecode6BitBuf(l,l.length,!1)}else h=fnDecode6BitBuf(f,f.length,!1);h=TClientItem(h.pszDest);l="1";GameApi.IsOverLapItem(h)&&(l=h.Dura+1);var g="\u975e\u7ed1\u5b9a\u7269\u54c1";h.s.IsBind&&(g="\u5df2\u7ed1\u5b9a\u7269\u54c1");switch(e){case 4:case 5:g_LogSocket.AddGameDataLog(e,h.s.Name,h.MakeIndex,l,g);break;case 29:case 30:case 33:g_LogSocket.AddGameDataLog(e,h.s.Name,h.MakeIndex,g,l);break;case 95:g_LogSocket.AddGameDataLog(e,h.s.Name,h.MakeIndex,g,h.Dura.toString())}1==type?(g_IconCList.push(h),Laya.stage.event("updateHumIcon")):9!=type&&(GameUtil.LoadBagItemIcon2(h),-1!=g_DrugButNumber&&c==h.s.Name&&a==h.s.AniCount&&(g_DrugItemsList[d]=h,a=c=null,g_DrugButNumber=-1))}};b.prototype.clientRecvAddItemMessage=function(a,b){var f=a.tag;if(""!=b)if(g_boOpenCaiji&&-1!=b.indexOf("/"))this.clientRecvAddItemMessage_Caiji(a,b);else{var d=fnDecode6BitBuf(b,b.length,!1),d=TClientItem(d.pszDest);if(1==f)g_IconCList.push(d),Laya.stage.event("updateHumIcon");else if(9!=f&&(GameUtil.LoadBagItemIcon2(d),GameUtil.PlayerAutoHandleItem(d,f),-1!=g_DrugButNumber))for(f=0;f<g_DrugItemsList.length;f++)g_DrugItemsList[f]&&g_DrugItemsList[f].s.Name==d.s.Name&&f==g_DrugButNumber&&(g_DrugItemsList[g_DrugButNumber]=d,g_autoDrugButNumber=-1)}};b.prototype.clientEatMsg=function(b,f,e){CanUserItem=!0;f=null;g_AutoItems.Items&&b.record==g_AutoItems.Items.MakeIndex?f=g_AutoItems.Items:g_WaitItems.Items&&b.record==g_WaitItems.Items.MakeIndex&&(f=g_WaitItems.Items);e?f&&(g_boOpenCaiji&&(e=" \u975e\u7ed1\u5b9a\u7269\u54c1",f.s.IsBind&&(e="\u5df2\u7ed1\u5b9a\u7269\u54c1"),g_LogSocket.AddGameDataLog(11,f.s.Name,f.MakeIndex,"1",e)),g_AutoItems.Items&&b.record==g_AutoItems.Items.MakeIndex||!g_WaitItems.Items||b.record!=g_WaitItems.Items.MakeIndex||(c=f.s.Name,a=f.s.AniCount,d=g_DrugButNumber),-1!=g_DrugButNumber&&(e=GameApi.autofillrule(f.s.StdMode,f.s.Looks),0!=e.length&&GameApi.autofillitem(e)),GameApi.autounpack(2,f.s.Name,f.s.AniCount)||(g_AutoItems.Items&&b.record==g_AutoItems.Items.MakeIndex?g_AutoItems.Items=null:g_WaitItems.Items&&b.record==g_WaitItems.Items.MakeIndex&&(g_WaitItems.Items=null),g_DrugButNumber=-1),GameApi.Drugnullforidx(f.s.Name),GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"),Laya.stage.event("ShowDrug_Items")):(f&&GameUtil.AddItemNewBag(f),f&&0==f.s.StdModen&&5==f.s.Source&&0<f.Dura&&GameApi.autounpack(2,f.s.Name,f.s.AniCount),g_AutoItems.Items&&b.record==g_AutoItems.Items.MakeIndex?g_AutoItems.Items=null:g_WaitItems.Items&&b.record==g_WaitItems.Items.MakeIndex&&(g_WaitItems.Items=null))};b.prototype.clientRecvGetBagItmes=function(a,b){if(a.param==b.length){var f=fnDecode6BitBuf(b,b.length,!1),f=(new Zlib.Inflate(f.pszDest)).decompress();GameUtil.IntBagList();for(var d=0;d<a.series;d++){var c=GameUtil.slice(f,g_itemSize*d,g_itemSize*(d+1)),c=TClientItem(c);GameUtil.GetItemNewBag(c)}GameUtil.LoadBagItemIcon(g_BagItemsList,0);BagDataIsInit||(GameApi.initdrugtobag(),BagDataIsInit=!0)}CanUserItem=!0};b.prototype.BagStack=function(){for(var a=g_BagItemsList.length-1;0<=a;a--){for(var b=0;b<g_BagItemsList.length;b++)if(null!=g_BagItemsList[b]&&null!=g_BagItemsList[a]&&0<=g_BagItemsList[b].Dura&&g_BagItemsList[b].s.Name==g_BagItemsList[a].s.Name&&g_BagItemsList[a].s.IsBind==g_BagItemsList[b].s.IsBind&&g_BagItemsList[a].MakeIndex!=g_BagItemsList[b].MakeIndex&&49!=g_BagItemsList[a].Dura&&49!=g_BagItemsList[b].Dura&&(17==g_BagItemsList[b].s.StdMode||18==g_BagItemsList[b].s.StdMode||41==g_BagItemsList[b].s.StdMode||40==g_BagItemsList[b].s.StdMode||42==g_BagItemsList[b].s.StdMode||31==g_BagItemsList[b].s.StdMode&&-1!=g_BagItemsList[b].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))){g_WaitItems.index=a;Sendmessage.sendStackThing(g_BagItemsList[a].MakeIndex,g_BagItemsList[b].MakeIndex,g_BagItemsList[b].s.DBName,0);var f=!0;break}if(f)break}};b.prototype.heroDelectItem=function(a,b){var f=a.tag;if(""!=b){var d=fnDecode6BitBuf(b,b.length,!1),d=TClientItem(d.pszDest);1!=f&&(GameUtil.DelHeroItems(d.MakeIndex),GameUtil.DelHeroBagItems(d.MakeIndex))}};b.prototype.updatePlayerSkinOnDressGone=function(a){this.isLimitTimeDress(a)&&(a=GameUtil.GetItemType(a),g_UserItemList[a]=null,Laya.stage.event("updateHumNewDress"),this.isDressShowOutside()&&(Sendmessage.showfashion(1),setTimeout(function(){Sendmessage.showfashion(1)},20)))};b.prototype.isLimitTimeDress=function(a){return 101==a.Need&&1==a.NeedLevel&&(66<=a.StdMode&&69>=a.StdMode||178==a.StdMode)};b.prototype.isDressShowOutside=function(){return 1==g_show_fashion};b.prototype.clientRecvDelectItem=function(a,b){var f=a.tag;if(""!=b){var d=fnDecode6BitBuf(b,b.length,!1),d=TClientItem(d.pszDest);this.updatePlayerSkinOnDressGone(d.s);g_WaitItems.Items&&d.MakeIndex==g_WaitItems.Items.MakeIndex&&(g_WaitItems.Items=null);1==f?(GameUtil.DelUserIcon(d.MakeIndex),Laya.stage.event("updateHumIcon")):(GameUtil.DelUserItems(d.MakeIndex),GameUtil.DelBagItems(d.MakeIndex),GameApi.Drugnullforidx(d.MakeIndex),GameUtil.DelUserItems(d.MakeIndex));g_boOpenCaiji&&d&&(3==f?d.s.IsBind?g_LogSocket.AddGameDataLog(3,d.s.DBName,d.MakeIndex,"\u5df2\u7ed1\u5b9a\u7269\u54c1",""):g_LogSocket.AddGameDataLog(3,d.s.DBName,d.MakeIndex,"\u975e\u7ed1\u5b9a\u7269\u54c1",""):g_LogSocket.AddGameDataLog(3,d.s.DBName,d.MakeIndex,"",""))}};b.prototype.clientRecvDelectItems=function(a,b){var f=a.tag;if(""!=b){var d=DecodeString(b);if(g_boOpenCaiji&&-1!=d.indexOf("/")){1==f&&(g_IconCList=[],Laya.stage.event("updateHumIcon"));for(var d=d.split("/"),c=parseInt(d[0]),e=DecodeString(d[1]).split("/"),h=null,d=1;d<e.length;d+=2){var l="\u975e\u7ed1\u5b9a\u7269\u54c1",g=1;if(h=GameUtil.GetUserItems(parseInt(e[d])))h.s.IsBind&&(l="\u5df2\u7ed1\u5b9a\u7269\u54c1"),GameApi.IsOverLapItem(h)&&(g=h.Dura+1),15!=c&&16!=c||g_LogSocket.AddGameDataLog(c,e[d-1],parseInt(e[d]),l+"/1/\u8eab\u4e0a",g);if(h=GameUtil.GetBagItems(parseInt(e[d])))h.s.IsBind&&(l="\u5df2\u7ed1\u5b9a\u7269\u54c1"),GameApi.IsOverLapItem(h)&&(g=h.Dura+1),15!=c&&16!=c||g_LogSocket.AddGameDataLog(c,e[d-1],parseInt(e[d]),l+"/1/\u5305\u88f9",g);GameUtil.DelBagItems(parseInt(e[d]));GameApi.Drugnullforidx(parseInt(e[d]));GameUtil.DelUserItems(parseInt(e[d]))}}else if(0==f)for(g_boOpenCaiji?(d=DecodeString(d),-1!=d.indexOf("/")&&(c=d.split("/"))):(c=DecodeString(b),-1!=c.indexOf("/")&&(c=c.split("/"))),d=1;d<c.length;d+=2)GameUtil.DelBagItems(parseInt(c[d])),GameApi.Drugnullforidx(parseInt(c[d])),GameUtil.DelUserItems(parseInt(c[d]))}1==f&&(g_IconCList=[],Laya.stage.event("updateHumIcon"))};b.prototype.saleItemList=function(a,b){G_npcShopPage=a.tag;var f=DecodeString(b).split("/");g_ItemMemuListInf=[];for(var d=1;d<f.length;d+=2)if(""!=f[d]){var c=fnDecode6BitBuf(f[d],f[d].length,!1).pszDest,c=TClientItem(c);c.npcId=a.record;f[d-1]&&(c.sellerName=f[d-1]);g_ItemMemuListInf.push(c)}Laya.stage.event("Update_Sale_Items2")};b.prototype.TranslateItemList=function(a,b){var f=DecodeString(b).split("/");g_ItemMemuList=[];for(var d=0;d<f.length-1;d+=3){var c={};c.name=f[d+0];c.gprice=f[d+1];c.gcount=f[d+2];c.npcId=a.record;c.count=a.param;g_ItemMemuList.push(c)}GameApi.ShowNewSaleShop(!0)};b.prototype.ShopFormNpcItemList=function(a,b){var f=DecodeString(b).split("/");g_ItemMemuList=[];for(var d=0;d<f.length-1;d+=6){var c={};c.name=f[d+0];c.gsub=f[d+1];c.gprice=f[d+2];c.gstock=f[d+3];c.gcount=f[d+4];c.gcurrency=f[d+5];c.npcId=a.record;c.count=a.param;c.bind=a.series;g_ItemMemuList.push(c)}g_show_Npcbj=1==a.series;GameApi.ShowNewNpcShop(!0)};b.prototype.ShopItemInfoList=function(a,b){G_npcShopPage=a.tag;var f=fnDecode6BitBuf(b,b.length,!0).pszDest.toString().replace(/\,/g,"").split("/");g_ItemMemuListInf=[];for(var d=0;d<f.length;d+=2)if(""!=f[d]){var c=fnDecode6BitBuf(f[d],f[d].length,!1).pszDest,c=TClientItem(c);c.npcId=a.record;c.price=f[d+1];g_ItemMemuListInf.push(c)}GameUtil.LoadBagItemIcon(g_ItemMemuListInf,1)};b.prototype.BuyItemFailed=function(a,b){1==a.record?Laya.stage.event("show_log",[{txt:"\u6b64\u7269\u54c1\u88ab\u5356\u51fa",color:"#ff0000"}]):2==a.record?Laya.stage.event("show_log",[{txt:"\u60a8\u65e0\u6cd5\u643a\u5e26\u66f4\u591a\u7684\u7269\u54c1",color:"#ff0000"}]):3==a.record&&Laya.stage.event("show_log",[{txt:"\u60a8\u6ca1\u6709\u8db3\u591f\u7684\u94b1\u6765\u8d2d\u4e70\u6b64\u7269\u54c1",color:"#ff0000"}])};b.prototype.ShellItems=function(a,b){GameApi.ShowScreen(!0,0,5,SELL_ITEM_TYPE)};b.prototype.ShellItemFailed=function(a,b){Laya.stage.event("show_log",[{txt:"\u60a8\u4e0d\u80fd\u51fa\u552e\u6b64\u7269\u54c1",color:"#ff0000"}]);ItemMgr.getInstance().AddItemToBag(ItemMgr.getInstance().CurSelecItem);ItemMgr.getInstance().CurSelecItem=null;Laya.stage.event("show_bag_items")};b.prototype.EpairItem=function(a,b){GameApi.ShowScreen(!0,0,4,SELL_ITEM_TYPE)};b.prototype.clientRecvUpdateItem=function(a,b){if(""!=b)if(g_boOpenCaiji){if(-1!=b.indexOf("/")){var f=-100,d=b.split("/");d[1]&&(f=parseInt(DecodeString(d[1])));d=fnDecode6BitBuf(d[0],d[0].length,!1)}else d=fnDecode6BitBuf(b,b.length,!1);var d=TClientItem(d.pszDest),c=-1;d&&(c=GameUtil.UpdateItems(d));var e="\u975e\u7ed1\u5b9a\u7269\u54c1";d.s.IsBind&&(e="\u5df2\u7ed1\u5b9a\u7269\u54c1");4==f||5==f?g_LogSocket.AddGameDataLog(f,d.s.Name,d.MakeIndex,c,e):7==f&&g_LogSocket.AddGameDataLog(f,d.s.Name,d.MakeIndex,e+"/1",c.toString())}else d=fnDecode6BitBuf(b,b.length,!1),d=TClientItem(d.pszDest),GameUtil.UpdateItems(d)};b.prototype.setGem=function(a,b){if(""!=b){var f=fnDecode6BitBuf(b,b.length,!1);(f=TClientItem(f.pszDest))&&GameUtil.UpdateItems(f)}};b.prototype.boxitem=function(a,b){var f=a.record,d=a.param;if(0==f&&""==b){if(f=g_boxItemArr[d])Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,f.MakeIndex,2),Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,f.MakeIndex,1);g_boxItemArr[d]=null;GameUtil.AddItemNewBag(f);Laya.stage.event("draw_npc_items",g_boxItemArr[d])}else if(1==f&&""==b)g_boxItemArr[d]&&Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,g_boxItemArr[d].MakeIndex,1),g_boxItemArr[d]=null,Laya.stage.event("draw_npc_items",[g_boxItemArr[d],!0]);else if(2==f&&""!=b)for(d=fnDecode6BitBuf(b,b.length,!1),f=TClientItem(d.pszDest),d=0;d<g_boxItemArr.length;d++)g_boxItemArr[d]&&g_boxItemArr[d].MakeIndex==f.MakeIndex&&(g_boxItemArr[d]=f);else if(3==f&&""!=b&&(d=DecodeString(b),-1!=d.indexOf("/")&&(f=d.split("/"),2<f.length)))for(d=0;d<g_BagItemsList.length;d++)if(null!=g_BagItemsList[d]&&g_BagItemsList[d].s.Name==f[1]){Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,g_BagItemsList[d].MakeIndex,0);g_npc_opt_boxid=f[0];g_boxItemArr[g_npc_opt_boxid]&&(GameUtil.AddItemNewBag(g_boxItemArr[g_npc_opt_boxid]),g_boxItemArr[g_npc_opt_boxid]&&(Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,g_boxItemArr[g_npc_opt_boxid].MakeIndex,2),Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,g_boxItemArr[g_npc_opt_boxid].MakeIndex,1)),g_boxItemArr[g_npc_opt_boxid]=null,Laya.stage.event("draw_npc_items",null));Laya.stage.event("draw_npc_items",g_BagItemsList[d]);GameUtil.DelBagItems(g_BagItemsList[d].MakeIndex);break}};b.prototype.clientRecvSendMyMagic=function(a,b){};b.prototype.clientRecvDeleteMagic=function(a){GameUtil.DelMagic(a)};b.prototype.clientRecvMagicList=function(a,b){};b.prototype.clientGetSenduseItems=function(a,b){if(a.param==b.length){GameUtil.IntUserItems(HighTUseItems);for(var f=fnDecode6BitBuf(b,b.length,!1),f=(new Zlib.Inflate(f.pszDest)).decompress(),d=0,c=0;c<a.series;c++){var e=f[d];d++;var h=GameUtil.slice(f,d,d+g_itemSize),h=TClientItem(h),d=d+g_itemSize;0<=e&&e<=HighTUseItems&&(g_UserItemList[e]=h,h.tag=e,ItemMgr.getInstance().AddItemToRole(h))}}};b.prototype.clientRecvDropItemSucc=function(a,b){var f=a.record,d=DecodeString(b);if(g_boOpenCaiji){var c="\u975e\u7ed1\u5b9a\u7269\u54c1";g_WaitItems.Items.s.IsBind&&(c="\u5df2\u7ed1\u5b9a\u7269\u54c1");sItemCount=0<g_WaitItems.Items.Dura?g_WaitItems.Items.Dura+1:1;g_LogSocket.AddGameDataLog(7,d,f,c+"/1",sItemCount)}null!=g_WaitItems.Items&&g_WaitItems.Items.MakeIndex==f&&(g_WaitItems.Items=null);ItemMgr.getInstance().DeleteItem(f);Laya.stage.event("show_bag_items")};b.prototype.clientRecvDropItemFail=function(a,b){var f=a.record;DecodeString(b);null!=g_WaitItems.Items&&g_WaitItems.Items.MakeIndex==f&&(GameUtil.AddItemNewBag(g_WaitItems.Items),g_WaitItems.Items=null)};b.prototype.clientRecvShowItemMsg=function(a,b){var f=DecodeString(b);if(""!=f){var d=new TDropItem;d.id=a.record;d.x=a.param;d.y=a.tag;d.Looks=a.series;d.FlashTime=Math.floor(3E3*Math.random());d.show=!0;-1!=f.indexOf("|")&&(f=f.split("|")[0]);if(-1!=f.indexOf(";")){f=f.split(";");if(""!=f[0]){var c=f[0].split("/");d.Color=parseInt(c[0]);d.Name=c[1]}""!=f[1]&&(f=f[1].split("/"),6<f.length&&(d.DropEffectFileIndex=parseInt(f[0]),d.DropEffectStartOffSet=parseInt(f[1]),d.DropEffectImageCount=parseInt(f[2]),d.DropEffectOffsetX=parseInt(f[3]),d.DropEffectOffsetY=parseInt(f[4]),d.DropEffectFrameTime=parseInt(f[5]),d.DropEffectNormalDraw=!1,"TRUE"==f[6]&&(d.DropEffectNormalDraw=!0)))}else c=f.split("/"),d.Color=parseInt(c[0]),d.Name=c[1];ItemMgr.getInstance().AddItemToMap(d)&&Laya.stage.event("update_map_items",[d])}};b.prototype.clientRecvHideItemMsg=function(a,b){var f=a.record;ItemMgr.getInstance().DelItemFromMap(f);f&&Laya.stage.event("delete_map_items",[f])};b.prototype.MsgDepotItems=function(a,b){-1!=b.indexOf(";")&&(b=b.split(";"),g_StoreLimitCount=parseInt(b[0]),b=b[1]);if(0!=a.param||0!=a.tag||0!=a.series||0!=a.record)if(0==a.param&&0==a.tag&&0==a.series)for(var f=0;f<g_StoreItemList.length;f++){if(null!=g_StoreItemList[f]&&g_StoreItemList[f].MakeIndex==a.record){--g_StoreCount;GameUtil.AddItemNewBag(g_StoreItemList[f]);g_StoreItemList[f]=null;Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("Show_Store_Item_ico",g_StoreLimitCount);break}}else if(0==a.param&&1==a.tag&&1==a.series)if(0==a.record)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u65e0\u6cd5\u643a\u5e26\u66f4\u591a\u7269\u54c1\u4e86\u3002",callfn:function(){}}]);else for(f=0;f<g_StoreItemList.length;f++){var d=g_StoreItemList[f];if(null!=d&&d.MakeIndex==a.record){--g_StoreCount;g_StoreItemList[f]=null;GameUtil.ShowNewStore(!0,g_StoreLimitCount);break}}else if(g_StoreType=0!=(a.record&1073741824)?1:2,a.param==b.length){0==(a.record>>>24&63)&&(g_StoreItemList=[]);g_StoreMaxCount=a.tag;g_StoreCount=a.series;if(""!=b)for(f=fnDecode6BitBuf(b,b.length,!1),d=(new Zlib.Inflate(f.pszDest)).decompress(),f=0;f<g_StoreCount;f++){var c=GameUtil.slice(d,g_itemSize*f,g_itemSize*(f+1)),c=TClientItem(c);g_StoreItemList.push(c)}GameUtil.InstanceOfMem(NewBagUI)||GameUtil.ShowNewBag(!0);GameUtil.ShowNewStore(!0,g_StoreLimitCount)}};b.prototype.clientRecvDoorOpenOkMsg=function(a){};b.prototype.clientRecvDoorLockMsg=function(){};b.prototype.clientRecvDoorCloseMsg=function(a){};b.prototype.clientRecvTakeOnOk=function(a,b){null!=g_WaitItems.Items&&0<=g_WaitItems.Index&&52>=g_WaitItems.Index&&(g_UserItemList[g_WaitItems.Index]=g_WaitItems.Items,g_UserItemList[g_WaitItems.Index].tag=g_WaitItems.Index,Laya.stage.event("Show_Item_ico",g_WaitItems.Index),18<=g_WaitItems.Index&&29>=g_WaitItems.Index&&Laya.stage.event("updateHumNewDress"),g_WaitItems.Items=null,GameUtil.InstanceOfMem(HumWinUI)&&Laya.stage.event("updateHum"),GameUtil.InstanceOfMem(ShousWinUI)&&Laya.stage.event("update_shengxiao",[g_UserItemList]),GameUtil.InstanceOfMem(ShoushiUI)&&Laya.stage.event("show_shoushi_box",[g_UserItemList]),GameApi.ShowScreen(!1),Laya.stage.event("Show_Bag_Item_ico"),GameUtil.SendAutoItemList(a.record))};b.prototype.clientRecvTakeFailMsg=function(a,b){null!=g_WaitItems.Items&&52!=g_WaitItems.Index&&(1E4!=a.tag&&GameUtil.AddItemNewBag(g_WaitItems.Items),18<=g_WaitItems.Index&&29>=g_WaitItems.Index&&Laya.stage.event("updateHumNewDress"),Laya.stage.event("Show_Item_ico",-1),g_WaitItems.Items=null,GameUtil.SendAutoItemList(a.record));52!=g_WaitItems.Index&&Laya.stage.event("show_log",[{txt:"\u7a7f\u6234\u5931\u8d25",color:"#ff0000"}])};b.prototype.ChangeUseDura=function(a,b){null!=g_UserItemList[U_RIGHTHAND]&&(g_UserItemList[U_RIGHTHAND].Dura=a.recog)};b.prototype.ChangeItemDura=function(a,b){GameUtil.UpdateUserItemsForIdx(a.param,a.record,CodeUtil._MAKELONG(a.tag,a.series))};b.prototype.clientRecvTakeOffMsg=function(a,b){null!=g_UserItemList[a.param-1]&&(g_WaitItems.Items=g_UserItemList[a.param-1],g_WaitItems.Index=a.param-1);null!=g_WaitItems.Items&&(g_UserItemList[g_WaitItems.Index]=null,Laya.stage.event("Show_Item_ico",g_WaitItems.Index),18<=g_WaitItems.Index&&29>=g_WaitItems.Index&&Laya.stage.event("updateHumNewDress"),4==g_WaitItems.Index&&Laya.stage.event("Show_Item_ico",13),Animationmodule.removeAniname("bodyeffect"+g_WaitItems.Items.MakeIndex),g_WaitItems.Items=null,GameUtil.InstanceOfMem(ShousWinUI)&&Laya.stage.event("update_shengxiao",[g_UserItemList]),GameUtil.InstanceOfMem(ShoushiUI)&&Laya.stage.event("show_shoushi_box",[g_UserItemList]))};b.prototype.clientRecvTakeOffFail=function(a,b){fnDecode6BitBuf(b);18<=g_WaitItems.Index&&29>=g_WaitItems.Index&&Laya.stage.event("updateHumNewDress");Laya.stage.event("show_log",[{txt:"\u8131\u7269\u54c1\u5931\u8d25",color:"#ff0000"}]);Laya.stage.event("show_bag_items")};b.prototype.open2Dialog=function(a,b){this.UpGlobaInf(b);var f=DecodeString(b);if(rw_recog==a.record){var f=f.split("\r"),d=f[0];"@\u6ca1\u6709\u4efb\u52a1"==d&&(d="@\u6210\u957f\u4efb\u52a1");for(var c=0;c<g_MissCaptionList.length;c++)if(""!=d&&d.toLowerCase()=="@"+g_MissCaptionList[c].sTabName){10!=a.tag&&11!=a.tag||GameMission.GetMissStringArray(c,f[1],a.tag);break}10!=a.tag&&11!=a.tag||GameMission.GetMissStringInfo(d,f[1],a.tag)}else d=a.record,G_NPC_ID==d?g_NpcShowtxt!=f&&GameApi.ShowNewNpcDlgEx(!0):GameApi.ShowNewNpcDlgEx(!1),g_NpcShowtxt=f,G_NPC_ID=d,f=f.split("\r"),1<f.length?Laya.stage.event("Show_NewNpc",[f[1]]):Laya.stage.event("Show_NewNpc",[f[0]])};b.prototype.openDialog=function(a,b){if(0==a.tag){this.UpGlobaInf(b);var f=DecodeString(b);rw_recog=a.record;""==f&&(f="\u6210\u957f\u4efb\u52a1\r\n\u65e5\u5e38\u4efb\u52a1\r\n\u6bcf\u65e5\u4efb\u52a1\r\n\u8282\u65e5\u4efb\u52a1\r\n\u5176\u4ed6\u4efb\u52a1\r\n");f=f.split("\r\n");g_MissCaptionList=[];for(var d=0;d<f.length;d++)if(""!=f[d]){var c=[];c.sTabName=f[d];c.sShowtxt="";c.sList=[];g_MissCaptionList.push(c)}}else if(11==a.tag)for(d=0;d<g_MissCaptionList.length;d++)""!=g_MissCaptionList[d].sTabName&&Sendmessage.gettmissitem(rw_recog,10,"@"+g_MissCaptionList[d].sTabName)};b.prototype.CreateTeamFaild=function(a,b){var f="";switch(a.record){case -1:f="\u4f60\u5df2\u7ecf\u62e5\u6709\u961f\u4f0d\uff01";break;case -3:f="\u5bf9\u65b9\u5df2\u7ecf\u62e5\u6709\u961f\u4f0d\uff01";break;case -4:f="\u5bf9\u65b9\u4e0d\u5141\u8bb8\u7ec4\u961f\uff01";break;case -9:f="\u4f60\u4e0d\u5141\u8bb8\u7ec4\u961f\uff0c["+DecodeString(b)+"]\u65e0\u6cd5\u9080\u8bf7\u4f60\u7ec4\u961f\uff01";break;default:f="\u7ec4\u961f\u5931\u8d25\uff01"}Laya.stage.event("show_log",[{txt:f,color:"#ff0000"}]);Laya.stage.event("new_chat_msg",[{info:f,front:219,bg:255,type:1}])};b.prototype.CreateTeamOk=function(a,b){G_BaseSetList[0].val||Sendmessage.sendGroupMode();Laya.stage.event("show_log",[{txt:"\u7ec4\u961f\u6210\u529f",color:"#00ff00"}])};b.prototype.TeamGropList=function(a,b){var f=DecodeString(b).split("/");G_Team_Grop_List=[];for(var d=0;d<f.length;d++)f[d]&&G_Team_Grop_List.push(f[d]);Laya.stage.event("update_teamlist")};b.prototype.DeleteTeamGroupItemFaild=function(a,b){Laya.stage.event("show_log",[{txt:"\u6743\u9650\u4e0d\u591f",color:"#ff0000"}])};b.prototype.DeleteTeamGroupItemOk=function(a,b){for(var f=0;f<G_Team_Grop_List.length;f++)G_Last_Select_Team_Name==G_Team_Grop_List[f]&&G_Team_Grop_List.splice(f,1);Laya.stage.event("update_teamlist")};b.prototype.ChangeTeamGroupState=function(a,b){G_BaseSetList[0].val=G_BaseSetList[0].val?!1:!0;Laya.stage.event("update_teamlist");Laya.stage.event("update_set_list")};b.prototype.AddTeamMemberFaild=function(a,b){-1==a.record?Laya.stage.event("show_log",[{txt:"\u7f16\u7ec4\u8fd8\u672a\u6210\u7acb\u6216\u8005\u4f60\u8fd8\u4e0d\u591f\u7b49\u7ea7",color:"#ff0000"}]):-2==a.record?Laya.stage.event("show_log",[{txt:"\u60a8\u8f93\u5165\u7684\u4eba\u7269\u540d\u79f0\u4e0d\u6b63\u786e",color:"#ff0000"}]):-3==a.record?Laya.stage.event("show_log",[{txt:"\u5df2\u7ecf\u52a0\u5165\u7f16\u7ec4",color:"#ff0000"}]):-4==a.record?Laya.stage.event("show_log",[{txt:"\u5bf9\u65b9\u4e0d\u5141\u8bb8\u7f16\u7ec4",color:"#ff0000"}]):-5==a.record?Laya.stage.event("show_log",[{txt:"\u60a8\u9080\u8bf7\u52a0\u5165\u7f16\u7ec4\u7684\u4eba\u5df2\u7ecf\u52a0\u5165\u5176\u5b83\u7ec4",color:"#ff0000"}]):-6==a.record&&Laya.stage.event("show_log",[{txt:"\u4e0d\u540c\u56fd\u5bb6\u7981\u6b62\u7ec4\u961f",color:"#ff0000"}])};b.prototype.AddTeamMemberOk=function(a,b){G_Team_Grop_List.push(G_Last_Select_Team_Name);Laya.stage.event("update_teamlist")};b.prototype.ClearTeamGroupList=function(a,b){Laya.stage.event("VOICE_EVENT",["onexitroom"]);G_Team_Grop_List=[];Laya.stage.event("update_teamlist")};b.prototype.updateRoleBaseAttri=function(a,b){if(""!=b){g_nBonusPoint=a.record;var f=b.split("/"),d=fnDecode6BitBuf(f[0],f[0].length),c=fnDecode6BitBuf(f[1],f[1].length),f=fnDecode6BitBuf(f[2],f[2].length);g_BonusTick=TNakedAbility(d.pszDest);g_BonusAbil=TNakedAbility(c.pszDest);g_NakedAbil=TNakedAbility(f.pszDest);d=[];for(c=0;60>c;c++)d.push(0);g_BonusAbilChg=TNakedAbility(d);Laya.stage.event("showbonus",[0<g_nBonusPoint])}};b.prototype.GiftItemFailed=function(a,b){var f=ItemMgr.getInstance().LastShopItem;f&&ItemMgr.getInstance().DeleteItem(f.MakeIndex);-1==a.record?Laya.stage.event("show_log",[{txt:"\u8be5\u7269\u54c1\u4e0d\u5b58\u5728",color:"#ff0000"}]):-3==a.record?Laya.stage.event("show_log",[{txt:"\u5bf9\u65b9\u7684\u5305\u88f9\u5df2\u6ee1\u6216\u8005\u8f93\u5165\u7684\u7528\u6237\u540d\u4e0d\u6b63\u786e\u6216\u8005\u5bf9\u65b9\u4e0d\u5728\u7ebf",color:"#ff0000"}]):-5==a.record?Laya.stage.event("show_log",[{txt:"\u5f53\u524d\u670d\u52a1\u5668\u4e0d\u5141\u8bb8\u8d60\u9001\u7269\u54c1\u6216\u8005\u8d60\u9001\u529f\u80fd\u6ca1\u5f00\u542f",color:"#ff0000"}]):-2==a.record&&Laya.stage.event("show_log",[{txt:"\u91d1\u989d\u4e0d\u8db3",color:"#ff0000"}])};b.prototype.BuyShopItemFailed=function(a,b){var f=ItemMgr.getInstance().LastShopItem;f&&ItemMgr.getInstance().DeleteItem(f.MakeIndex);-1==a.record?Laya.stage.event("show_log",[{txt:"\u8be5\u7269\u54c1\u4e0d\u5b58\u5728",color:"#ff0000"}]):-3==a.record?Laya.stage.event("show_log",[{txt:"\u4f60\u7684\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]):-4==a.record?Laya.stage.event("show_log",[{txt:"\u4f60\u7684\u5305\u88f9\u6ca1\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u5b58\u653e\u8d2d\u4e70\u7684\u7269\u54c1",color:"#ff0000"}]):-2==a.record&&Laya.stage.event("show_log",[{txt:"\u91d1\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u8d2d\u4e70\u3002",color:"#ff0000"}])};b.prototype.ShopItemList=function(a,b){var f=CodeUtil._LOBYTE(a.record);CodeUtil._HIBYTE(a.record);var d=fnDecode6BitBuf(b,b.length,!1),d=(new Zlib.Inflate(d.pszDest)).decompress(),c=!1;5!=a.param?(G_Cur_Shop_Page=Math.ceil(a.tag/10),G_Total_Shop_Page=Math.ceil(a.series/10),c=!0,ItemMgr.getInstance().ShopItemList=[],Laya.stage.event("UpDown")):ItemMgr.getInstance().StrageList=[];for(var e=0;e<f;e++){var h=GameUtil.slice(d,440*e,440*(e+1)),h=TShopClientItem(h);5!=a.param?ItemMgr.getInstance().ShopItemList.push(h):ItemMgr.getInstance().StrageList.push(h)}Laya.stage.event("update_items",[c])};b.prototype.AddMagicToRole=function(a,b){var f=fnDecode6BitBuf(b,b.length,!1),d=TClientMagic(f.pszDest);GameUtil.AddMagic(d);Laya.stage.event("update_autoSkill");if(d.Def&&(f=function(a){if(!Laya.stage.getChildByName("skillimg")){var b=new Laya.Image(a);b.width=45;b.height=45;b.name="skillimg";Laya.stage.addChild(b);b.pos(230,100);var f=Animationmodule.playframe(!1,b,"gameres/animation/addskills/",1,8,100,!0,!1);f&&(f.name="skill_img",f.pos(-10,-10));Laya.timer.once(1E3,l,function(){Animationmodule.removeAniname("skill_img");b&&Laya.Tween.to(b,{x:Laya.stage.width-350,y:238,alpha:.5},500,null,Laya.Handler.create(l,l.removeskillimage,[b,d,a]))})}},"\u57fa\u672c\u5251\u672f"!=d.Def.sMagicName&&"\u653b\u6740\u5251\u672f"!=d.Def.sMagicName&&"\u7cbe\u795e\u529b\u6218\u6cd5"!=d.Def.sMagicName&&"\u62a4\u4f53\u795e\u76fe"!=d.Def.sMagicName)){var c="";if(1E3<=d.Def.wMagicId&&1500>=d.Def.wMagicId){var e=Skillmodule.findCustomSkill(d.Def.wMagicId,d.Level);if(d)var h=g_pak_list[e.iconFileIndex],c=e.wIconImageIndex}else c=d.Def.btEffect,38==d.Def.wMagicId&&(c=4),46==d.Def.wMagicId&&(c=42),39==d.Def.wMagicId&&(c=0),h="magicon"+GameUtil.getFile(2*c),c*=2;GameUtil.loadImg(c,h,f);var l=this}};b.prototype.removeskillimage=function(a,b,f){a.removeSelf();a=GameUtil.InstanceOfMem(AddSkillsUI);var d=Laya.stage.getChildByName("bj_sprite");a||d||(a=new Addskills,Laya.stage.addChild(a));a&&a.SkillInfo(b,f)};b.prototype.SelfMagicData=function(a,b){var f=a.series,d=a.record;if(a.param==b.length){var c=fnDecode6BitBuf(b,b.length,!1),c=(new Zlib.Inflate(c.pszDest)).decompress();g_UserMagicList=[];for(var e=0;e<f;e++){if(1==d){var h=GameUtil.slice(c,168*e,168*(e+1)),l=TClientMagic(h);l.btStrengLevel=0}else h=GameUtil.slice(c,172*e,172*(e+1)),l=TClientMagic(h),l.btStrengLevel=h[168];49<=l.Key&&(g_SetupMagicList[l.Key-49]=l);g_UserMagicList.push(l)}null==g_SetupMagicList[12]?Laya.stage.event("add_magic_attack"):Laya.stage.event("add_magic_attack",[g_SetupMagicList[12]]);Laya.stage.event("update_icon");Laya.stage.event("update_autoSkill")}};b.prototype.guildMemberList=function(a,b){for(var f=DecodeString(b).split("/"),d=0,c=[],d=0;d<f.length;)0==f[d].indexOf("*")?G_Guald_Title_List.push(f[d]):0>f[d].indexOf("#")?(c.push(f[d]),d<f.length-1?0==f[d+1].indexOf("#")&&G_Guald_User_List.push(c):d==f.length&&G_Guald_User_List.push(c)):0==f[d].indexOf("#")&&(c=[]),d++;Laya.stage.event("update_guald_user")};b.prototype.GuildFialdFail=function(a,b){var f="";switch(a.record){case -1:f="\u89e3\u9664\u7ed3\u76df";break;case -2:f="\u6b64\u884c\u4f1a\u4e0d\u662f\u60a8\u884c\u4f1a\u7684\u7ed3\u76df\u884c\u4f1a";break;case -3:f="\u6ca1\u6709\u6b64\u884c\u4f1a"}""!=f&&Laya.stage.event("show_alert_dlg",[{type:1,txt:f,color:"#ff0000"}])};b.prototype.openGuildDlg=function(a,b){0==a.record&&66==a.param&&1==a.tag&&99==a.series&&(Laya.stage.event("VOICE_EVENT",["onexitroom"]),G_Guild_Name="");if(1==a.tag){var f=DecodeString(b);if(99!=a.series){if(0==a.series){G_Guald_Notice_List=[];var d=f.split(";");G_Guald_Name=d[0];G_Guald_OnlineCount=parseInt(d[1]);G_Guald_NowCount=parseInt(d[2]);G_Guald_MaxCount=parseInt(d[3]);G_Guald_Can_Lianmeng=parseInt(d[4]);G_Guald_Admin=a.record;G_Guald_Notice_List=d[5];Laya.stage.event("game_dlg_cmd",[{id:"show_hanghui"}]);Laya.stage.event("update_notice")}if(1==a.series){G_Guald_Title_List=[];G_Guald_User_List=[];d=f.split(";");for(i=0;i<d.length;i++){var c=d[i].split(",");G_Guald_Title_List.push(d[i]);var e=[];for(k=3;k<c.length;k++)""!=c[k]&&e.push(c[k]);G_Guald_User_List.push(e)}Laya.stage.event("update_guald_user")}if(2==a.series){d=f.split(";");for(k=3;k<d.length;k++)d[k].split(",");Laya.stage.event("upadte_zm_user",[f])}if(3==a.series){G_WaiJiaoStr=f;d=f.split("/");c=d[0].split(",");for(k=0;k<c.length;k++)c[k].split("|");d[1].split(",");c=d[2].split(",");for(k=0;k<c.length;k++)c[k].split("|");d[3].split(",");Laya.stage.event("updata_wj_list")}""!=G_Guald_Name&&Laya.stage.event("game_dlg_cmd",[{id:"show_hanghui"}]);Laya.stage.event("update_gulad",[!0])}Laya.stage.event("hide_guild_world")}else 2==a.tag&&(Laya.stage.event("game_dlg_cmd",[{id:"show_hanghui_world"}]),f=DecodeString(b),f=f.split(";"),G_Guald_HangHui_World_List=f.splice(0,f.length-1),G_Guald_Last_Name=f[f.length-1].split("/")[1],Laya.stage.event("update_world_list"))};b.prototype.GuildOptFaild=function(a,b){var f="";switch(a.param){case 0:switch(a.record){case -1:f="\u4f60\u65e0\u6b64\u6743\u9650!";break;case -2:f="\u7ed3\u76df\u5931\u8d25\uff01";break;case -3:f="\u884c\u4f1a\u7ed3\u76df\u5fc5\u987b\u53cc\u65b9\u638c\u95e8\u4eba\u9762\u5bf9\u9762\uff01";break;case -4:f="\u5bf9\u65b9\u884c\u4f1a\u638c\u95e8\u4eba\u4e0d\u5141\u8bb8\u7ed3\u76df\uff01";break;case -5:f="\u884c\u4f1a"+DecodeString(b)+"\u4e0d\u5b58\u5728!"}break;case 1:switch(a.record){case -1:f="\u5ba3\u6218\u5931\u8d25,\u8bf7\u786e\u5b9a"+DecodeString(b)+"\u4e0d\u662f\u76df\u53cb";break;case -3:f="\u60a8\u65e0\u6b64\u6743\u9650\uff01";break;case -2:f="\u5df2\u7ecf\u5ba3\u6218\uff01";break;case -4:f="\u4f60\u6ca1\u6709\u8db3\u591f\u7684\u91d1\u5e01\uff01";break;case -5:f="\u884c\u4f1a"+DecodeString(b)+"\u4e0d\u5b58\u5728!"}break;case 2:f=0==a.record?"\u884c\u4f1a"+DecodeString(b)+"\u5173\u6ce8\u6210\u529f!":"\u884c\u4f1a"+DecodeString(b)+"\u5df2\u7ecf\u5173\u6ce8\uff01";break;case 3:f=0==a.record?"\u884c\u4f1a"+DecodeString(b)+"\u53d6\u6d88\u5173\u6ce8\u6210\u529f":"\u884c\u4f1a"+DecodeString(b)+"\u672a\u5173\u6ce8";break;case 4:f=0==a.record?"\u884c\u4f1a"+DecodeString(b)+"\u53d6\u6d88\u5173\u6ce8\u6210\u529f":"\u8c03\u6574\u5931\u8d25\uff01";break;case 7:switch(a.record){case -6:f="\u4f60\u4e0d\u662f\u6b63\u4f1a\u957f,\u8f6c\u8ba9\u5931\u8d25";break;case -5:f=DecodeString(b)+"\u53d6\u6d88\u5173\u6ce8\u6210\u529f";break;default:f="\u8f6c\u8ba9\u5931\u8d25\uff01"}break;case 8:0!=a.record&&(f="\u5378\u4efb\u5931\u8d25")}""!=f&&Laya.stage.event("show_alert_dlg",[{type:1,txt:f,color:"#ff0000"}])};b.prototype.OpenGuildInfo=function(a,b){G_Guald_Info=DecodeString(b);Laya.stage.event("show_guild_info")};b.prototype.LookAtUserState=function(a,b){if(a.param==b.length){var f=fnDecode6BitBuf(b,b.length,!1),f=(new Zlib.Inflate(f.pszDest)).decompress(),f=TUserStateInfo(f);GameApi.ShowLookHum(!0,f)}};b.prototype.FriendOption=function(a,b){if(0==a.record){if(""!=b){var f=DecodeString(b);if(-1!=f.indexOf("|")){var d=f.split("|");G_Friend_List=[];for(var c=0;c<d.length;c++)""!=d[c]&&-1!=d[c].indexOf(",")&&""!=d[c].split(",")[0]&&(Sendmessage.FriendInfo(d[c].split(",")[0]),G_Friend_List.push(d[c]),g_H_List.push(d[c]),G_Friend_RedPack_List.push(d[c]))}}}else if(1==a.record)if(0==a.tag||1==a.tag){if(0==G_Friend_Option_Type){f=[];for(c=0;c<b.length;c++){var e=b.charCodeAt(c);f.push(e)}f=gbkByteArr2UcsStr(f);G_Friend_List.push(f);Sendmessage.FriendInfo(f)}else 1==G_Friend_Option_Type?G_Friend_HMD_List.push(b):G_Friend_Target_List.push(b);GameUtil.InstanceOfMem(FriendUI)&&Laya.stage.event("friendRequest")}else if(2==a.tag)Laya.stage.event("show_log",[{txt:"\u597d\u53cb\u5217\u8868\u5df2\u6ee1",color:"#ff0000"}]);else if(3==a.tag)Laya.stage.event("show_log",[{txt:"\u540d\u79f0\u5df2\u7ecf\u5b58\u5728\u597d\u53cb\u5217\u8868\u4e2d, \u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0!",color:"#ff0000"}]);else if(4==a.tag)Laya.stage.event("show_log",[{txt:"\u540d\u79f0\u4e0d\u5b58\u5728\u6216\u8005\u4e0d\u5728\u7ebf!",color:"#ff0000"}]);else if(5==a.tag)Laya.stage.event("show_log",[{txt:"\u4e0d\u80fd\u628a\u81ea\u5df1\u52a0\u4e3a\u597d\u53cb!",color:"#ff0000"}]);else if(10==a.tag){f=[];for(c=0;c<b.length;c++)e=b.charCodeAt(c),f.push(e);d=gbkByteArr2UcsStr(f);g_hintAnime.friend=d;g_friend_request.push(d);(d=GameUtil.InstanceOfMem(FriendUI))&&0!=d.visible?Laya.stage.event("friendRequest"):Laya.stage.event("redHintCheck",["friend"])}else{if(11==a.tag){f=[];for(c=0;c<b.length;c++)e=b.charCodeAt(c),f.push(e);d=gbkByteArr2UcsStr(f);Laya.stage.event("show_log",[{txt:d+"\u5df2\u52a0\u4f60\u4e3a\u597d\u53cb!",color:"#ff0000"}])}}else if(2==a.record){if(1==a.tag){d=[];d=0==G_Friend_Option_Type?G_Friend_List:1==G_Friend_Option_Type?G_Friend_HMD_List:G_Friend_Target_List;f=[];for(c=0;c<b.length;c++)e=b.charCodeAt(c),f.push(e);f=gbkByteArr2UcsStr(f);for(c=0;c<d.length;c++)if(e=d[c].indexOf(":"),e=d[c].slice(0,e),d[c]==f||e==f)delete d[c],d.splice(c,1)}else Laya.stage.event("show_log",[{txt:"\u5220\u9664\u597d\u53cb\u64cd\u4f5c\u5931\u8d25!",color:"#ff0000"}]);Laya.stage.event("update_friend_list")}else if(3==a.record){f=[];for(c=0;c<b.length;c++)e=b.charCodeAt(c),f.push(e);d=gbkByteArr2UcsStr(f);if(0==a.tag)for(Laya.stage.event("show_log",[{txt:d+"\u4e0b\u7ebf\u5566\uff01",color:"#ff0000"}]),c=0;c<g_H_List.length;c++){if(""!=g_H_List[c]&&g_H_List[c]==d+",1"){g_H_List.splice(c,1);break}}else Sendmessage.FriendInfo(d),Laya.stage.event("show_log",[{txt:d+"\u4e0a\u7ebf\u5566\uff01",color:"#ff0000"}]);for(c=0;c<G_Friend_List.length;c++)f=G_Friend_List[c].split(":")[0],f==d&&(G_Friend_List[c]=0==a.tag?d+":- -:- -:- -":d+",1");for(c=0;c<G_Friend_RedPack_List.length;c++)f=G_Friend_RedPack_List[c].split(",")[0],f==d&&(G_Friend_RedPack_List[c]=0==a.tag?d+",0":d+",1")}Laya.stage.event("update_friend_list")};b.prototype.FriendInfo=function(a,b){var f=zDecodeString(b);Laya.stage.event("update_friend_info",[f])};b.prototype.UpdateMagicData=function(a,b){var f=a.record,d=CodeUtil._LOBYTE(a.param),c=CodeUtil._HIBYTE(a.param),e=CodeUtil._MAKELONG(a.tag,a.series);GameUtil.UpdateMagicLvExp(f,d,e,c);Laya.stage.event("Magic_Refresh")};b.prototype.GetLegTZList=function(a,b){0==a.record&&0<b.length&&0<g_LegTzItemList.length&&(g_LegTzItemList=[]);if(a.param==b.length&&0!=b.length)for(var f=fnDecode6BitBuf(b,b.length,!1),f=(new Zlib.Inflate(f.pszDest)).decompress(),d=0;d<a.series;d++){var c=GameUtil.slice(f,528*d,528*(d+1)),c=new TLEGTzInfo(c);g_LegTzItemList.push(c)}};b.prototype.MagicStaticList=function(a,b){};b.prototype.GetNpcWindows=function(a,b){var f=DecodeString(b),d=CodeUtil._LOWORD(a.record),c=CodeUtil._HIWORD(a.record);32767<=c&&(c-=65536);32767<=d&&(d-=65536);var e=a.tag,h=CodeUtil._HIBYTE(a.series);g_npcCanMove=1==CodeUtil._LOBYTE(a.series)?!0:!1;var f=f.split("/"),l=[];f[4]?-1!=f[4].indexOf(":")&&(l=f[4].split(":")):(l.push(f[0]),l.push(f[1]));testNpc_X=parseInt(f[0]);testNpc_Y=parseInt(f[1]);var g=GameUtil.InstanceOfMem(NewNpcWinUI);if(g)for(var u=!0,B=0;B<g_boxItemArr.length;B++)if(g_boxItemArr[B]){u&&(Sendmessage.NpcDlgOptions(null,null,null,3),u=!1);var A=g_boxItemArr[B];g_boxItemArr[B]=null;GameUtil.AddItemNewBag(A)}GameApi.ShowNewNpcDlgEx(!1);Laya.stage.event("Change_bg",[f[2],a.param,l,g?!1:!0]);g_Changerpak=parseInt(f[2]);g_ChangerIndex=parseInt(a.param);Laya.stage.event("Change_pos",[e,d,c,h])};b.prototype.GetPakList=function(a,b){if(a.param==b.length){var f=zDecodeString(b);f&&(g_pak_list=f.split("\r\n"));for(f=0;f<g_pak_list.length;f++)if(g_pak_list[f]){var d=g_pak_list[f].split(".");g_pak_list[f]=d[0].toLowerCase()}}};b.prototype.GetUserBuffBut=function(a,b){Laya.stage.event("UPDATEBUFFER",[b])};b.prototype.ShowMessageDLG=function(a,b){if(""!==b){var f=DecodeString(b).split("\r\n"),d=CodeUtil._MAKELONG(a.param,a.tag);if(0==a.series){var c=0;null==f[1]?c=7:c=2;var e=f[0].replace(/\\/g,"\r\n");Laya.stage.event("show_alert_dlg",[{type:c,txt:e,callfn:function(){f[1]&&Sendmessage.sendtomsg(CM_MERCHANTDLGSELECT,d,0,0,0,f[1])},callcancelfun:function(){f[2]&&Sendmessage.sendtomsg(CM_MERCHANTDLGSELECT,d,0,0,0,f[2])}}])}else""!=f[0]&&(c=f[0].split("\\"),2<c.length?(e=function(a){Sendmessage.SendNpcCMD(f[1]+"\r"+a,d,0)},Laya.stage.event("show_alert_dlg",[{type:4,txt:c[2]+"("+c[0]+")",ipttype:"string",callfn:e}])):(e=function(a){Sendmessage.SendNpcCMD(f[1]+"\r"+a,d,0)},Laya.stage.event("show_alert_dlg",[{type:4,txt:c[0],ipttype:"string",callfn:e}])))}};b.prototype.GetRedPack=function(a,b){var f=DecodeString(b).split("/"),d={};GameUtil.InstanceOfMem(RedPakUI)||Laya.stage.event("redHintCheck",["red"]);d.sUserName=f[3];d.nGoldNum=parseInt(f[4]);d.nRedPacketCount=0;d.nGoldType=parseInt(f[5]);d.nType=parseInt(f[2]);d.nRedRecog=parseInt(a.record);d.OpenRedPacket={};for(var c=0;100>c;c++)d.OpenRedPacket[c]=TOpenRedPacket,d.OpenRedPacket[c].sUserName="";d.nGoldBalance=0;d.nRandomGold=0;d.nRedPacketTime=f[0];d.sRedPacketTime=f[1];d.sMsg=f[6];d.bOpened=!1;g_RedPack_List.push(d);c="";switch(d.nType){case 0,2:c="\u6709\u4e00\u5927\u6ce2\u7ea2\u5305\u6765\u88ad\uff0c\u8d76\u7d27\u53bb\u62a2\uff0c\u62a2\u5b8c\u5373\u6b62\u5566!";break;case 1:c="\u8d76\u7d27\u731b\u6233, \u7ea2\u5305\u6709\u9650\u624b\u6162\u65e0\u554a!!";break;case 3:c=f[3]+" \u571f\u8c6a\u73a9\u5bb6, \u53d1\u51fa\u5168\u670d\u7ea2\u5305, \u8d76\u7d27\u6765\u62a2";break;case 4:c="\u6709\u4e00\u5927\u6ce2\u7ea2\u5305\u6765\u88ad\uff0c\u8d76\u7d27\u53bb\u62a2\uff0c\u62a2\u5b8c\u5373\u6b62\u5566!";break;default:str=f[3]+"\u53d1\u7ea2\u5305\u4e86, \u8d76\u7d27\u62a2\u5440!"}Laya.stage.event("new_chat_msg",[{info:c,front:218,bg:0,type:0}]);(f=GameUtil.InstanceOfMem(RedPakUI))&&f.GetRedPackList()};b.prototype.GetRedPackinf=function(a,b){var f=decryStringK(b,mac_key);8==(f[0]&15)&&(f=(new Zlib.Inflate(f)).decompress(),f=new TRedPacketInfo(f),this.UpdateRedPackinf(f))};b.prototype.UpdateRedPackinf=function(a){for(var b=!1,f=!1,d=0;d<g_RedPack_List.length;d++)if(g_RedPack_List[d].nRedRecog==a.nRedRecog){f=g_RedPack_List[d].bOpened;g_RedPack_List[d]=a;g_RedPack_List[d].bOpened=f?!0:!1;b=!0;break}if(b&&g_RedPackOpen==a.nRedRecog){GameUtil.InstanceOfMem(RedPakUI).visible&&-1!=g_RedPackIndex&&(d=GameUtil.InstanceOfMem(SendRedPackUI),d||(d=new UISendPak,Laya.stage.addChild(d)),d.GetRedPackList());for(var b=ObjectManage.findobject(playerID),f=0,c=!1,d=0;d<a.OpenRedPacket.length;d++){var e=a.OpenRedPacket[d];""!=e.sUserName&&f++;b&&b.txt_name&&e.sUserName==b.txt_name.text&&(c=!0)}!c&&f>=a.nRedPacketCount&&Laya.stage.event("show_log",[{txt:"\u624b\u592a\u6162\uff0c\u7ea2\u5305\u5df2\u6d3e\u9001\u5b8c",color:"#ff0000"}])}};b.prototype.UpGlobaInf=function(a){a=DecodeString(a);if(-1!=a.toUpperCase().indexOf("{#NEW"))for(var b=a.match(new RegExp(/[^{]+?(?=\})/g)),f=0;f<b.length;f++){a=a.replace("{"+b[f]+"}","\x26\x26");var d=b[f].split(")"),c=d[0].split("(");""!=c[1]&&(d=d[1],""!=d&&(a=a.replace("\x26\x26",d),GameUtil.GetMissGloba(c[1],d,1),Laya.stage.event("UPDATETASK",[g_sStrMissNv])))}return"0"!=a&&-1==a.indexOf("222")?a:""};b.prototype.QueryShop=function(a,b){G_Cur_Store_Page=a.param;G_Total_Store_num=a.record;GameUtil.ShowPersonalStore(!0);for(var f=b.split("/"),d=[],c=0;c<f.length;c++)if(f[c]&&""!=f[c]){var e=fnDecode6BitBuf(f[c],f[c].length),e=TClientUserShop(e.pszDest);d.push(e)}d&&(Laya.stage.event("game_show_PersonalStore",[d]),Laya.stage.event("game_show_Page",[G_Total_Store_num,G_Cur_Store_Page,8]))};b.prototype.SearchShopItems=function(a,b){G_Cur_Item_Page=a.param;G_Total_Item_num=a.record;for(var f=b.split("/"),d=[],c=0;c<f.length;c++)if(f[c]&&""!=f[c]){var e=fnDecode6BitBuf(f[c],f[c].length),e=TClientUserShopItem(e.pszDest);d.push(e)}d&&(Laya.stage.event("game_show_PersonalItems",[d]),Laya.stage.event("game_show_Page",[G_Total_Item_num,G_Cur_Item_Page,5]))};b.prototype.QueryUserShopItems=function(a,b){G_Total_Item_num=a.record;G_Cur_Item_Page=a.param;GameUtil.ShowStore(!0);for(var f=b.split("/"),d=[],c=0;c<f.length;c++)if(f[c]&&""!=f[c]){var e=fnDecode6BitBuf(f[c],f[c].length),e=TClientUserShopItem(e.pszDest);d.push(e)}d&&(Laya.stage.event("game_show_storeItem",[d]),Laya.stage.event("game_show_showStorePage",[G_Total_Item_num,G_Cur_Item_Page,5]))};b.prototype.SendBuyUserShopItemOk=function(a,b){};b.prototype.SendBuyUserShopItemFail=function(a,b){0>a.record&&(-2==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u5df2\u7ecf\u5220\u9664\uff01",callfn:function(){}}]):-3==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u5df2\u7ecf\u51fa\u552e\uff01",callfn:function(){}}]):-4==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u51fa\u552e\uff01",callfn:function(){}}]):-5==a.record?0==a.param?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_GameGoldNum.key+"\u4e0d\u591f",callfn:function(){}}]):1==a.param?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_GamePointNum.key+"\u4e0d\u591f",callfn:function(){}}]):2==a.param?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_GameCionNum.key+"\u4e0d\u591f",callfn:function(){}}]):3==a.param?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_nGameDiamond.key+"\u4e0d\u591f",callfn:function(){}}]):4==a.param&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]: \u4f60\u7684"+g_nGameGird.key+"\u4e0d\u591f",callfn:function(){}}]):-6==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u7684\u5305\u88f9\u5df2\u6ee1\uff01",callfn:function(){}}]):-7==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8be5\u7528\u6237\u4e0d\u5728\u7ebf\u65e0\u6cd5\u8d2d\u4e70\uff01",callfn:function(){}}]):-10==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8be5\u5730\u56fe\u7981\u6b62\u4f7f\u7528\u4e2a\u4eba\u5546\u5e97\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u672a\u77e5\u9519\u8bef\uff0c\u8be5\u7269\u54c1\u53ef\u80fd\u4e0d\u5b58\u5728\uff0c\u8bf7\u70b9\u51fb\u4e0b\u9762\u7684\u201c\u641c\u7d22\u201d\u91cd\u65b0\u5237\u65b0\u4e00\u4e0b\uff01",callfn:function(){}}]))};b.prototype.SendMoveMyShopItemOk=function(a,b){Laya.stage.event("delete_ItemImage");SelectedStoreItem=null};b.prototype.SendMoveMyShopItemFail=function(a,b){var f=a.param;0>a.record&&(-1==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\u8bf7\u7a0d\u540e\u5728\u8bd5\uff01",callfn:function(){}}]):-3==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u4f60\u8fd8\u6ca1\u6709\u5e97\u94fa\uff01",callfn:function(){}}]):-4==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u4ea4\u6613\uff01",callfn:function(){}}]):-5==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u52a0\u5165\u5e97\u94fa\u7684\u7269\u54c1\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0\uff01",callfn:function(){}}]):-6==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u5b58\u4ed3\u5e93\uff01",callfn:function(){}}]):-7==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u5305\u88f9\u5df2\u6ee1\uff0c\u65e0\u6cd5\u53d6\u56de\uff01",callfn:function(){}}]):-8==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u53ea\u80fd\u540c\u65f6\u51fa\u552e"+f+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-9==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u4f60\u7684\u4ed3\u5e93\u53ea\u80fd\u5b58\u653e"+f+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-10==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u8be5\u5730\u56fe\u7981\u6b62\u4f7f\u7528\u4e2a\u4eba\u5546\u5e97\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25]\uff1a\u672a\u77e5\u9519\u8bef\uff0c\u8be5\u7269\u54c1\u53ef\u80fd\u4e0d\u5b58\u5728\uff0c\u8bf7\u70b9\u51fb\u4e0b\u9762\u7684\u201c\u641c\u7d22\u201d\u91cd\u65b0\u5237\u65b0\u4e00\u4e0b\uff01",callfn:function(){}}]))};b.prototype.QuerySelectShopInfo=function(a,b){2!=a.series&&GameUtil.ShowMyShop(!0);var f=GameUtil.InstanceOfMem(PersonalStoreUI),d=GameUtil.InstanceOfMem(MyStoreUI);f&&f.removeSelf();d&&(f=fnDecode6BitBuf(b,b.length),(f=TClientUserShop(f.pszDest))&&""!=f&&(Sendmessage.QueryMyShopSellingItems(0,0,0,0,0,""),0<g_StoreItemNum[0]&&Sendmessage.GetMyShopItems(g_StoreItemIndex[0],0),Sendmessage.QueryMyShopSelledItems(0,0,0,0,0,""),0>=g_StoreItemNum[2]?Sendmessage.QueryMyshopStorageItems(0,0,0,0,0,""):Sendmessage.GetMyShopItems(g_StoreItemIndex[2],2),Laya.stage.event("show_store_message",f)))};b.prototype.QueryMyShopSellingItems=function(a,b){g_StoreItemNum[0]=a.record;g_StoreItemIndex[0]=a.param;for(var f=b.split("/"),d=[],c=0;c<f.length;c++)if(f[c]&&""!=f[c]){var e=fnDecode6BitBuf(f[c],f[c].length),e=TClientUserShopItem(e.pszDest);d.push(e)}d&&(Laya.stage.event("show_store_selling",[d]),Laya.stage.event("game_showStorePage",[g_StoreItemNum[0],g_StoreItemIndex[0],0]))};b.prototype.QueryMyShopSelledItems=function(a,b){g_StoreItemNum[1]=a.record;g_StoreItemIndex[1]=a.param;for(var f=b.split("/"),d=[],c=0;c<f.length;c++)if(f[c]&&""!=f[c]){var e=fnDecode6BitBuf(f[c],f[c].length),e=TClientUserShopItem(e.pszDest);d.push(e)}d&&(Laya.stage.event("show_store_sold",[d]),Laya.stage.event("game_showStorePage",[g_StoreItemNum[1],g_StoreItemIndex[1],1]))};b.prototype.QueryMyShopStorageItems=function(a,b){g_StoreItemNum[2]=a.record;g_StoreItemIndex[2]=a.param;for(var f=b.split("/"),d=[],c=0;c<f.length;c++)if(f[c]&&""!=f[c]){var e=fnDecode6BitBuf(f[c],f[c].length),e=TClientUserShopItem(e.pszDest);d.push(e)}d&&(Laya.stage.event("show_store_storage",[d]),Laya.stage.event("game_showStorePage",[g_StoreItemNum[2],g_StoreItemIndex[2],2]))};b.prototype.SendAddToMyShopOk=function(a,b){AddStoreItem&&GameUtil.DelBagItems(AddStoreItem.MakeIndex);Laya.stage.event("delete_ItemImage");Laya.stage.event("Show_Bag_Item_ico");SelectedStoreItem=AddStoreItem=null};b.prototype.SendAddToMyShopFail=function(a,b){var f=a.param;-1==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\u8bf7\u7a0d\u540e\u5728\u8bd5\uff01",callfn:function(){}}]):-3==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u4f60\u8fd8\u6ca1\u6709\u5e97\u94fa\uff01",callfn:function(){}}]):-4==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u52a0\u5165\u5e97\u94fa\u7684\u7269\u54c1\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0\uff01",callfn:function(){}}]):-5==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u4ea4\u6613\uff01",callfn:function(){}}]):-6==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u5b58\u4ed3\u5e93\uff01",callfn:function(){}}]):-7==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u53ea\u80fd\u540c\u65f6\u51fa\u552e"+f+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-8==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u4f60\u7684\u4ed3\u5e93\u53ea\u80fd\u5b58\u653e"+f+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-10==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u8be5\u5730\u56fe\u7981\u6b62\u4f7f\u7528\u4e2a\u4eba\u5546\u5e97\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u7269\u54c1\u589e\u52a0\u5931\u8d25]\uff1a\u672a\u77e5\u9519\u8bef\uff01",callfn:function(){}}])};b.prototype.SendChangeMyShopItemOk=function(a,b){Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u6210\u529f]\uff1a\u4fee\u6539\u6210\u529f\uff01",callfn:function(){}}]);Laya.stage.event("delete_ItemImage");SelectedStoreItem=null};b.prototype.SendChangeMyShopItemFail=function(a,b){var f=a.param;-1==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\u8bf7\u7a0d\u540e\u5728\u8bd5\uff01",callfn:function(){}}]):-3==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u4f60\u8fd8\u6ca1\u6709\u5e97\u94fa\uff01",callfn:function(){}}]):-4==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u52a0\u5165\u5e97\u94fa\u7684\u7269\u54c1\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0\uff01",callfn:function(){}}]):-5==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u4ea4\u6613\uff01",callfn:function(){}}]):-6==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u8be5\u7269\u54c1\u7981\u6b62\u5b58\u4ed3\u5e93\uff01",callfn:function(){}}]):-7==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u53ea\u80fd\u540c\u65f6\u51fa\u552e"+f+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-8==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u4f60\u7684\u4ed3\u5e93\u53ea\u80fd\u5b58\u653e"+f+"\u4e2a\u7269\u54c1",callfn:function(){}}]):-10==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u8be5\u5730\u56fe\u7981\u6b62\u4f7f\u7528\u4e2a\u4eba\u5546\u5e97\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u4fee\u6539\u7269\u54c1\u5931\u8d25]\uff1a\u672a\u77e5\u9519\u8bef\uff0c\u8be5\u7269\u54c1\u53ef\u80fd\u4e0d\u5b58\u5728\uff0c\u8bf7\u70b9\u51fb\u4e0b\u9762\u7684\u201c\u641c\u7d22\u201d\u91cd\u65b0\u5237\u65b0\u4e00\u4e0b\uff01",callfn:function(){}}])};b.prototype.QuerySelectShopInfoFaild=function(a,b){Laya.stage.event("show_log",[{txt:"\u67e5\u8be2\u6446\u644a\u4fe1\u606f\u5931\u8d25",color:"#ff0000"}])};b.prototype.ViewBaiTan=function(a,b){var f=fnDecode6BitBuf(b,b.length,!1);G_BaiTanData=new TBaiTanData(f.pszDest);baitanGoldTypes=G_BaiTanData.PriceGold;GameApi.LookHumShop(!0)};b.prototype.AddBaiTanItemFaild=function(a,b){null!=g_WaitItems.Items&&(Laya.stage.event("show_log",[{txt:"\u6dfb\u52a0\u6b64\u7269\u54c1\u5931\u8d25!!,\u8be5\u7269\u54c1\u7981\u6b62\u6446\u644a\uff01",color:"#ff0000"}]),GameUtil.AddItemNewBag(g_WaitItems.Items),Laya.stage.event("Show_Item_ico",g_WaitItems.Index),g_WaitItems.Items=null)};b.prototype.AddBaiTanItemOk=function(a,b){null!=g_WaitItems.Items&&(GameApi.AddMyShopItems(g_WaitItems),Laya.stage.event("Update_Shop_List"),g_WaitItems.Items=null)};b.prototype.SendBaiTanName=function(a,b){var f=DecodeString(b),d=ObjectManage.findobject(a.record);d&&d.stallsname(f)};b.prototype.OpenMyBaiTan=function(a,b){GameUtil.ShowNewBag(!0);GameApi.ShowMyShop(!0)};b.prototype.getzhaomupay=function(a,b){var f=DecodeString(b),d=ObjectManage.findobject(a.record);if(d)if(f=f.split(" ")[1],g_Zmu_Count=a.tag,0==a.param)this.ShowZhaoMu(a.record);else if(1==a.param)d.txt_zmshow.text="",d.boisZmu=!1;else if(2==a.param){d="";switch(f){case 0:d="\u4f60\u5df2\u7ecf\u52a0\u5165\u4e86\u961f\u4f0d,\u65e0\u6cd5\u5f00\u542f\u62db\u52df\u529f\u80fd.";break;case 1:d="\u4f60\u6ca1\u6709\u53d1\u5e03\u62db\u52df\u7684\u6743\u9650.";break;case 2:d="\u4f60\u6ca1\u6709\u4fee\u6539\u62db\u52df\u7684\u6743\u9650.";break;case 3:d="\u4f60\u6ca1\u6709\u5f00\u542f\u62db\u52df."}Laya.stage.event("new_chat_msg",[{info:d,front:255,bg:56,type:0}])}};b.prototype.ShowZhaoMu=function(a){};b.prototype.BuySomeItem=function(a,b){if(g_boOpenCaiji&&""!=b){b=DecodeString(b);var f=b.split("/"),d=f[0]+"%",c=f[1],f=f[2],e=GameApi.GetSelShopItemsByIndex(a.record),h=1;if(e){var l=e.s.Name,g=a.record,h=e.Dura+1,u="",B=0,A=0;switch(a.series){case 1:A=g_GameCionNum.value-CodeUtil._MAKELONG(a.param,a.tag);break;case 2:A=g_bindCionNum.value-CodeUtil._MAKELONG(a.param,a.tag);break;case 3:B=111;A=g_GameGoldNum.value-CodeUtil._MAKELONG(a.param,a.tag);break;case 4:A=g_bindGoldNum.value-CodeUtil._MAKELONG(a.param,a.tag);break;case 5:A=g_GamePointNum.value-CodeUtil._MAKELONG(a.param,a.tag);break;case 6:A=g_nGameDiamond.value-CodeUtil._MAKELONG(a.param,a.tag);break;case 7:A=g_nGameGird.value-CodeUtil._MAKELONG(a.param,a.tag);break;case 8:A=g_gameGlory.value-CodeUtil._MAKELONG(a.param,a.tag);break;case 9:A=g_gamePopNum.value-CodeUtil._MAKELONG(a.param,a.tag)}var u=GameUtil.getCurrencyByGoldType(GameUtil.valueLimit(a.series-1)),D="\u975e\u7ed1\u5b9a\u7269\u54c1";e.s.IsBind&&(D="\u5df2\u7ed1\u5b9a\u7269\u54c1");g_LogSocket.AddGameDataLog(36,l,g,f+"/"+c,D+"/"+u+"/"+h+"/"+A+"/\u975e\u7ed1\u5b9a");g_LogSocket.AddGameDataLog(B,u,-1,"\u51cf\u5c11/\u975e\u7ed1\u5b9a/\u8d2d\u4e70\u6446\u644a\u7269\u54c1/\u4e2a\u4eba\u644a\u4f4d/"+c+"/"+l+"/"+g+"/"+f,-A+"/"+d)}}0==a.series?GameApi.DelMyShopItems(a.record):GameApi.DelLookShopItems(a.record);switch(a.series){case 1:g_GameCionNum.value=CodeUtil._MAKELONG(a.param,a.tag);break;case 2:g_bindCionNum.value=CodeUtil._MAKELONG(a.param,a.tag);break;case 3:g_GameGoldNum.value=CodeUtil._MAKELONG(a.param,a.tag);break;case 4:g_bindGoldNum.value=CodeUtil._MAKELONG(a.param,a.tag);break;case 5:g_GamePointNum.value=CodeUtil._MAKELONG(a.param,a.tag);break;case 6:g_nGameDiamond.value=CodeUtil._MAKELONG(a.param,a.tag);break;case 7:g_nGameGird.value=CodeUtil._MAKELONG(a.param,a.tag);break;case 8:g_gameGlory.value=CodeUtil._MAKELONG(a.param,a.tag);break;case 9:g_gamePopNum.value=CodeUtil._MAKELONG(a.param,a.tag)}Laya.stage.event("Update_Bag")};b.prototype.GetNpcItemShow=function(a,b){if(a.param==b.length){var f=fnDecode6BitBuf(b,b.length,!1),f=(new Zlib.Inflate(f.pszDest)).decompress();if(a.param==b.length)for(var d=0;d<a.series;d++){this.boisF=!1;var c=GameUtil.slice(f,g_itemSize*d,g_itemSize*(d+1)),c=TClientItem(c);101!=c.s.Need&&102!=c.s.Need&&103!=c.s.Need&&104!=c.s.Need&&(c.s.NeedLevel/=60);for(var e=0;e<g_Showitem.length;e++)if(g_Showitem[e].MakeIndex==c.MakeIndex){g_Showitem[e]=c;this.boisF=!0;break}this.boisF||g_Showitem.push(c)}}};b.prototype.GetFishInfo=function(a,b){function f(){g_FishGroup_List=[];for(var a=fnDecode6BitBuf(b,b.length,!1),a=(new Zlib.Inflate(a.pszDest)).decompress(),d=a.length/44,c=0;c<d;c++){var e=GameUtil.slice(a,44*c,44*(c+1)),e=TFishGropInfo(e);""!=e.sCaption&&0!=e.nOwnerID&&g_FishGroup_List.push(e)}Laya.stage.event("game_dlg_cmd",[{id:"show_fishwarm",data:g_FishGroup_List,tag:"create"}])}if(0>a.record)-1==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u6ca1\u6709\u9c7c\u9975\u4e86,\u65e0\u6cd5\u5f00\u59cb\u9493\u9c7c",callfn:function(){}}]):-2==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f19\u8ba1!\u4f60\u6709\u597d\u9c7c\u7aff\u4e48!",callfn:function(){}}]):-3==a.record?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u653e\u6746\u5931\u8d25",callfn:function(){}}]):-4==a.record&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u80cc\u5305\u6ee1\u4e86\u4e0d\u80fd\u9493\u9c7c",callfn:function(){}}]);else switch(a.tag){case 16:Sendmessage.IsDropFish(18,0);break;case 1:g_FishTeamId=a.record;var d=fnDecode6BitBuf(b,b.length,!1).pszDest,d=TFishInfo(d);g_FishInfo_List[g_FishTeamId]=d;Laya.stage.event("game_dlg_cmd",[{id:"show_fish",data:g_FishInfo_List}]);Laya.stage.event("CloseFinishList");break;case 2:0==a.record&&Laya.stage.event("game_dlg_cmd",[{id:"show_fish",data:0}]);break;case 3:switch(a.param){case 0:console.log("\u5df2\u7ecf\u5411\u961f\u957f\u53d1\u51fa\u8bf7\u6c42.\u8bf7\u7a0d\u7b49...");break;case 1:console.log("\u9519\u8bef!\u4f60\u5df2\u7ecf\u6709\u961f\u4f0d\u4e86...");break;case 2,3:console.log("\u9519\u8bef\u7684\u8bf7\u6c42...",a.param);break;case 4:console.log("\u4f60\u5df2\u7ecf\u5728\u60f3\u52a0\u5165\u7684\u961f\u4f0d\u4e86...");break;case 5:console.log("\u5df2\u7ecf\u5411\u961f\u957f\u53d1\u51fa\u8bf7\u6c42.\u8bf7\u7b49\u5f85\u961f\u957f\u5ba1\u6838...");break;case 6:console.log("\u98ce\u58f0\u7d27,\u8bf7\u7a0d\u540e\u518d\u52a0\u5165...");break;case 7:console.log("\u961f\u4f0d\u5df2\u7ecf\u6ee1\u5458\u4e86...");break;default:console.log("\u53d1\u51fa\u8bf7\u6c42\u5931\u8d25!!!",a.param)}break;case 8:""!=b?f():Laya.stage.event("game_dlg_cmd",[{id:"show_fishwarm",data:[],tag:"create"}]);break;case 9:if(d=g_FishInfo_List[a.record])d.State=TFishState.fsAllowPush,d.BaitDura=a.param,Laya.stage.event("change_role_state",{id:a.record,state:d.State});Laya.stage.event("update_user_info",{id:a.record,text:"\u653e\u6746\u4e2d.."});break;case 10:if(d=g_FishInfo_List[a.record]){-999!=a.param&&d&&(d.GetCount=a.param);var c=DecodeString(b);d.State!=TFishState.fsRodBreaked&&d.State!=TFishState.fsIdle?(d.State=TFishState.fsParsing,""!=b?Laya.stage.event("update_user_info",{id:a.record,text:"\u9493\u5230\u4e00\u6761"+c}):Laya.stage.event("update_user_info",{id:a.record,text:"\u4e00\u65e0\u6240\u83b7...."})):d.State=TFishState.fsParsing;Laya.stage.event("update_user_info",{id:a.record,text:"\u6536\u6746\u4e2d.."});Laya.stage.event("change_role_state",{id:a.record,state:d.State})}break;case 19:d=DecodeString(b);d=fnDecode6BitBuf(d,d.length,!1).pszDest;d=TFishGropInfo(d,0,44);break;case 12:if(d=g_FishInfo_List[a.record])d.BaitDura=a.param,Laya.stage.event("change_role_attr",{fish_role:d});break;case 11:if(d=g_FishInfo_List[a.record]){var e=a.param,h=a.series,c=DecodeString(b);d.State!=TFishState.fsParsing&&d.State!=TFishState.fsParsed&&(d.State=TFishState.fsFooling);Laya.stage.event("change_role_state",{id:a.record,state:d.State});Laya.stage.event("update_user_info",{id:a.record,text:c+"\u54ac\u94a9\u4e86",max:e,cur:h})}break;case 15:if(d=g_FishInfo_List[a.record])c="",0==a.param?c="\u60a8\u7684\u9975\u6599\u6ca1\u4e86":(c="\u4e00\u6761\u5927\u9c7c\u8dd1\u4e86",d.OutCount=a.series),Laya.stage.event("update_user_info",{id:a.record,text:c,type:2});break;case 4:""!=b&&(d=fnDecode6BitBuf(b,b.length,!1),d=(new Zlib.Inflate(d.pszDest)).decompress(),d=TFishJoinPlayInfo(d),g_JoinInfo_List.push(d),Laya.stage.event("show_new_user"));break;case 7:0==a.param&&(d=DecodeString(b),d=fnDecode6BitBuf(d,d.length,!1).pszDest,d=TFishInfo(d),g_FishInfo_List[a.record]=d,Laya.stage.event("new_user_join"),d.sName==g_RoleName?Laya.stage.event("update_user_info",{id:a.record,text:"\u6210\u529f\u52a0\u5165\u9493\u9c7c\u5c0f\u5206\u961f,\u548c\u5c0f\u4f19\u4f34\u4eec\u4e00\u8d77\u9493\u9c7c\u5427!"}):Laya.stage.event("update_user_info",{id:a.record,text:d.sName+"\u52a0\u5165\u9493\u9c7c\u5c0f\u5206\u961f..."}));break;case 5:Laya.stage.event("update_user_info",{id:a.record,text:"\u63d0\u793a\u961f\u957f\u79bb\u5f00\u4e86,\u73b0\u5728\u4f60\u662f\u961f\u957f\u4e86"});break;case 6:if(d=g_FishInfo_List[a.record])c=DecodeString(b),a.sName==g_RoleName?Laya.stage.event("update_user_info",{id:a.record,text:"\u9000\u51fa\u9493\u9c7c\u5c0f\u5206\u961f",type:3}):Laya.stage.event("update_user_info",{id:a.record,text:c+"\u9000\u51fa\u9493\u9c7c\u5c0f\u5206\u961f",type:3});break;case 20:Laya.stage.event("update_user_info",{id:a.record,text:"\u53f0\u98ce\u6765\u4e86",type:0});break;case 21:""!=b?Laya.stage.event("update_user_info",{id:a.record,text:"\u53f0\u98ce\u522e\u6765\u4e86"+b,type:1}):Laya.stage.event("update_user_info",{id:a.record,type:1});break;case 23:c=DecodeString(b);Laya.stage.event("update_user_info",{id:a.record,text:"\u53f0\u98ce\u8086\u8650,\u5996\u5b7d\u6a2a\u5411["+c+"]\u4e5f\u6765\u5566!"});break;case 222:c=DecodeString(b);Laya.stage.event("update_user_info",{id:a.record,text:"\u7ecf\u8fc7\u5927\u5bb6\u7684\u52aa\u529b\u7ec8\u4e8e\u628a"+c+"\u9493\u4e0a\u6765\u4e86!"});break;case 18:c=DecodeString(b);Laya.stage.event("show_team_chat",{txt:c});break;case 24:Laya.stage.event("change_role_state",{id:a.record,state:TFishState.fsRodBreaking}),Laya.stage.event("update_user_info",{id:a.record,txt:"\u9c7c\u7aff\u65ad\u4e86"})}};b.prototype.OpenBox=function(a,b){Laya.stage.event("show_bag_items");Laya.stage.event("game_dlg_cmd",[{id:"show_box",boxid:a.param}])};b.prototype.OpenBoxSuccess=function(a,b){for(var f=b.split("/"),d=[],c=0;c<f.length&&""!=f[c];c+=2){var e=fnDecode6BitBuf(f[c+1],f[c+1].length,!1),e=TClientItem(e.pszDest);d.push({index:c,item:e})}Laya.stage.event("game_dlg_cmd",[{id:"open_box",items:d}])};b.prototype.GetBoxItemIndex=function(a){Laya.stage.event("game_dlg_cmd",[{id:"getbox_itemindex",itemindex:a.record}])};b.prototype.GameTakeAotoOnItem=function(a,b,f){0<a.record&&(f=a.record,a=a.param,DecodeString(b),b=GameApi.GetBagIndexItems(f),null!=b&&(g_UserItemList[a]=b,GameUtil.DelBagItems(b.MakeIndex),Laya.stage.event("Show_Item_ico",a)))};b.prototype.IsHaveGrild=function(a,b){if(b){var f=DecodeString(b);ObjectManage.findobject(playerID).grildname=f}};b.prototype.Get_SCREENEFFECT=function(a,b){b=DecodeString(b);var f=a.series,d=CodeUtil._LOBYTE(a.param),c=CodeUtil._HIBYTE(a.param),e=a.tag,h=CodeUtil._LOWORD(a.record),l=CodeUtil._HIWORD(a.record),g=-1;-1!=b.indexOf("/")&&(g=b.split("/")[0]);0<c&&0<=g&&g<g_pak_list.length&&0<=h&&840>=h&&0<=l&&500>=l&&(g=GameApi.GetPakTo2Img(g,e),null==Laya.stage.getChildByName(g+e)&&(h=new Laya.Point(h,l),this.ani_fl=Animationmodule.playframe(!1,Laya.stage,g,e,e+c-1,f,!0,!1,h,this,function(){this.ani_fl.num++>d&&Animationmodule.removeAniname(this.ani_fl.name)})))&&(this.ani_fl.name="screeneffect"+g+e,this.ani_fl.num=1)};b.prototype.Get_CUSTOMBUTTON=function(a,b){if(0==a.param){b=DecodeString(b);var f=b.split("/"),d=parseInt(f[0]),c=parseInt(f[1]),e=parseInt(f[2]),h=parseInt(f[3]),l=parseInt(f[4]),g=parseInt(f[5]),u=parseInt(f[6]);parseInt(f[7]);0>d||0>c||0>e||0>h||0>l||0>g||0>u||(f=GameApi.GetPakTo2Img(d,e),d=Laya.stage.getChildByName(c),null==d&&(d=new Laya.Button,d.loadImage(f+GameUtil.getprefixname(e,5)+".png"),d.on(Laya.Event.CLICK,this,function(){Sendmessage.SendCUSTOMBUTTON(c)}),d.pos(g,u),d.name=c,Laya.stage.addChild(d)))}else 1==a.param&&Laya.stage.removeChildByName(a.tag)};b.prototype.getMoneyPay=function(a){if(""!=a){a=DecodeString(a);var b=a.split("|");if(cur_use_app&&1==b.length)a={areaid:0,uid:0,yuanbao:0,money:0,type:3001,url:b[0].replace("%account",dataFromRoleScene.uid)},a=JSON.stringify(a),sendtonative("gotopay",a);else if(1<b.length&&"2"==b[0])a=b[1].substr(b[1].indexOf("id\x3d")+3),callpaylistforuu(a);else if(1<b.length&&"3"==b[0])b=new UIRecharge,b.update2Money(a),Laya.stage.addChild(b);else if(cur_use_app){if(console.log("---------call recharge--------------"),/a=\d+/g.test(a)){var b=a.replace(/[^]+(a=\d+)[^]+/g,"$1"),f="b\x3d"+msgFromLogin[3].toLowerCase();requestpaylist(b+"\x26"+f);b=GameUtil.InstanceOfMem(rechargeUI);b||(b=new UIRecharge,Laya.stage.addChild(b));b.weburl=a}}else{1==a.indexOf("|")&&(a=a.split("|")[1]);a=a.replace("%account",dataFromRoleScene.uid);if(b=Laya.Browser.document.getElementById("div_cz"))b.style.display="",b.style.left=Laya.Browser.clientWidth/2-249+"px",b.style.top=Laya.Browser.clientHeight/2-172+"px";if(b=Laya.Browser.document.getElementById("chongzhi"))b.src=a}}};b.prototype.openDLG=function(a,b){var f=DecodeString(a);(f=f.substring(f.indexOf("[")+1,f.indexOf("]")))&&GameApi.ShowScreen(!0,f,6);G_NPC_ID=b};b.prototype.getCardGameInfo=function(a){a=DecodeString(a).split("|");var b=a[0].slice(7);if(-1==a.indexOf("/"))switch(g_cardGame_infoList=a[1].split("/"),a[0]&&-1!=a[0].indexOf("EnterRoom")&&GameUtil.ShowNewDoudizhu(!0),10<g_cardGame_infoList.length&&Laya.stage.event("Update"),b){case "OutCardError":Laya.stage.event("show_log",[{txt:"\u51fa\u724c\u4e0d\u7b26\u5408\u89c4\u5219",color:"#ff0000"}]);break;case "OutCard":Laya.stage.event("MusicSound",[g_cardGame_infoList[9]]);break;case "NoOutCardsToClient":Laya.stage.event("NotOut");break;case "WinnerCome":Sendmessage.sendCardGame3("AccountGold|");break;case "CollocationShowToClient":console.log(g_cardGame_infoList);break;case "OnTimeFromServer":Laya.stage.event("OnTime",[g_cardGame_infoList]);break;case "OnTimeChooseDiZhuFromServer":Laya.stage.event("OnTime",[g_cardGame_infoList]);break;case "playChooseDiZhu":Laya.stage.event("MusicSound",[g_cardGame_infoList[0]]);break;case "GetTimerNum":Laya.stage.event("OutLineEnterGetTimerNum");break;case "OutLineEnterToClient":GameUtil.ShowNewDoudizhu(!0),Laya.stage.event("Update"),Laya.stage.event("OutLine")}};b.prototype.NewMakeNpc=function(a,b){CodeUtil._HIWORD(b.record);0==b.record&&(g_DiyNPCList=[]);if(b.param==a.length)for(var f=fnDecode6BitBuf(a,a.length),f=(new Zlib.Inflate(f.pszDest)).decompress(),d=0;d<b.series;++d){var c=GameUtil.slice(f,500*d,500*(d+1)),c=TDiyNpcData(c);g_DiyNPCList.push(c)}};b.prototype.MakeIcon=function(a,b){if(b.param==a.length){g_IconCList=[];for(var f=fnDecode6BitBuf(a,a.length),f=(new Zlib.Inflate(f.pszDest)).decompress(),d=0;d<b.series;++d){var c=GameUtil.slice(f,g_itemSize*d,g_itemSize*(d+1)),c=TClientItem(c);g_IconCList.push(c)}}};b.prototype.HumIcon=function(a,b){Title.SetIconGif(a,b)};b.prototype.SendSetUserICON=function(a,b){Title.SetIcon(b,a)};b.prototype.GetServerConfig=function(a,b){try{if(""!=a&&a.length==b.param+b.record){g_ClientConfig=null;var f=a.substring(0,b.param),d=a.substring(b.param);""!=d&&(d=zDecodeString(d),g_customItemAttr=JSON.parse(d));var c=decryStringK(f,mac_key);if(8==(c[0]&15)){var e=(new Zlib.Inflate(c)).decompress();g_ClientConfig=TClientConfig(e);GameApi.initRoleSet();MinLevelFastTime=g_ClientConfig.AttackIntervalTime;g_boIsSafeRunNPC=g_ClientConfig.boIsSafeRunNPC;g_boIsSafeRun=g_ClientConfig.boIsSafeRun;g_customItemAttr&&(g_ClientConfig.boNewTaskMode=g_customItemAttr.boNewTaskMode,g_ClientConfig.boExtendDB=g_customItemAttr.boExtendDB,g_ClientConfig.maxExtendItemCount=g_customItemAttr.maxExtendItemCount);Laya.stage.event("update_m2set")}GameUtil.setCurrencyKey(g_customItemAttr.DiyCurrencyName);Laya.stage.event("show_BtnHero")}Laya.stage.event("EVENT_START_OBJECT_HB")}catch(h){console.log("GetServerConfig execute error",h)}};b.prototype.getSuitInfo=function(a){if(""!=a&&(a=DecodeString(a),""!=a&&(a=a.split("|"),!(2>a.length)))){var b=a[0].split("#");if(!(2>b.length))if(5==b[1]){if(a=a[1].split("~!")[1])if(a=a.split("~\x26"),!(4>a.length)){for(b=0;b<a.length;b++)if(-1!=a[b].indexOf("!@")&&-1!=a[b].indexOf("~^"))for(var f=a[b].split("~^"),d=0;d<f.length;d++)if(f[d]){var c=f[d].split("!@");2>c.length||Suitelementlist.push(c[1])}a=a[4].split("~#");2>a.length||"1"==a[1]&&(GomSuitOpen=!0)}}else 1==b[1]?(this.solosuit=a[1],Allsuitlist.push(this.solosuit)):3==b[1]?(b=a[1].split("\u5957\u88c5\u5907\u6ce8~!"),b[1]&&(a=b[1].split("~@")[0],f=b[0].split("~@"),b=f[0].split("~!")[1],f=f[1].split("~!")[1],Laya.stage.event("new_chat_msg",[{info:a,front:b,bg:f,type:0}]))):4!=b[1]&&(6==b[1]?(Allsuitlist=[],Suitelementlist=[],Gomsuitlist=[],Sendmessage.SuitInfo("1|1")):7==b[1]&&Gomsuitlist.push(a[1]))}};b.prototype.OpenBoxEX=function(a,b){G_NPC_ID=b.record;""!=a&&GameApi.ShowScreen(!0,0,8)};b.prototype.ShowDressGodBless=function(a){if(0==a.tag){for(var b=0;12>b;b++)g_SelfOpenedGodBless[b]=32768>>b&&0!=a.record?1:0;g_btSelfSndacasketState=CodeUtil._HIBYTE(a.param);g_btSelfShowGodBless=CodeUtil._LOBYTE(a.param);g_show_fashion=a.series;Laya.stage.event("update_SelfSndacasketState")}else if(1==a.tag){for(b=0;12>b;b++)g_HeroOpenedGodBless[b]=32768>>b&&0!=a.record?1:0;g_btHeroSndacasketState=CodeUtil._HIBYTE(a.param);g_btHeroShowGodBless=CodeUtil._LOBYTE(a.param);g_Show_Hero_Fashion=a.series}};b.prototype.StopMyShop_Caiji=function(a,b){for(var f=0;f<g_MyShopList.length;f++)if(null!=g_MyShopList[f]){GameUtil.AddItemNewBag(g_MyShopList[f].Items);var d=g_MyShopList[f].Items.s.Name,c=g_MyShopList[f].Items.MakeIndex,e="\u6446\u644a\u672a\u8d77\u540d,\u53d6\u6d88\u6446\u644a";""!=b&&(e=DecodeString(b));var h="\u5143\u5b9d";1==g_MyShopList[f].nType&&(h="\u91d1\u5e01");var l=1;GameApi.IsOverLapItem(g_MyShopList[f].Items)&&(l=g_MyShopList[f].Items.Dura+1);var g="\u975e\u7ed1\u5b9a\u7269\u54c1";g_MyShopList[f].Items.s.IsBind&&(g="\u5df2\u7ed1\u5b9a\u7269\u54c1");g_LogSocket.AddGameDataLog(38,d,c,"\u7269\u54c1\u4ece\u4e2a\u4eba\u644a\u4f4d\u53d6\u56de/"+e,g+"/"+h+"/"+l+"/"+g_MyShopList[f].nGold+"/\u975e\u7ed1\u5b9a");g_MyShopList[f]=null}};b.prototype.SendBaiTanName_Caiji=function(a,b){var f=ObjectManage.findobject(a.record);if(f&&playerID==a.record){var d="";""!=b&&(d=DecodeString(b));for(var c=0;20>c;c++)if(null!=g_MyShopList[c]){var e=g_MyShopList[c].Items.s.Name,h=g_MyShopList[c].Items.MakeIndex,l="\u5143\u5b9d";1==g_MyShopList[c].nType&&(l="\u91d1\u5e01");var g=1;GameApi.IsOverLapItem(g_MyShopList[c].Items)&&(g=g_MyShopList[c].Items.Dura+1);var u="\u975e\u7ed1\u5b9a\u7269\u54c1";g_MyShopList[c].Items.s.IsBind&&(u="\u5df2\u7ed1\u5b9a\u7269\u54c1");g_LogSocket.AddGameDataLog(37,e,h,"\u8f6c\u79fb\u5230\u6446\u644a\u8fdb\u884c\u51fa\u552e/"+d,u+"/"+l+"/"+g+"/"+g_MyShopList[c].nGold+"/\u975e\u7ed1\u5b9a")}f.stallsname(d)}};b.prototype.SM_Caiji=function(a,b){if(""!=a){var f=DecodeString(a).split("/");if(0!=f.length)switch(f[0]){case "8":if(4==f.length){var d=f[1],c=f[3],c="\u975e\u7ed1\u5b9a/\u91d1\u5e01/"+f[2]+"/"+c;g_LogSocket.AddGameDataLog(8,"\u91d1\u5e01",-1,d,c)}else{var e=f[1],h=f[2],d=f[3],c=f[5],l=f[6],c=l+"/\u7269\u54c1/"+f[4]+"/"+c;g_LogSocket.AddGameDataLog(8,e,h,d,c)}break;case "9":var e=f[1],h=f[2],g=f[3],l=f[4],d=f[5],c=f[6],u=f[7],f=f[8];g_LogSocket.AddGameDataLog(9,e,h,g,l+"/"+d+"/"+c+"/"+u+"/"+f);break;case "10":e=f[1];h=f[2];l=f[3];g=f[4];c=f[5];g_LogSocket.AddGameDataLog(10,e,h,g,l+"/"+c);break;case "35":e=f[1],h=f[2],l=f[3],g=f[4],d=f[5],AddGameDataLog(35,e,h,l+"/"+g,d)}}};b.prototype.Play_htsd=function(a){if(a&&(a=ObjectManage.findobject(a.record))){var b=new Laya.Point;b.x=a.grid.x;b.y=a.grid.y;Skillmodule.playself(0,75,a,b)}};b.prototype.ItemScore=function(a,b){if(""!=b){var f=fnDecode6BitBuf(b,b.length);(f=TItemScoreRecord(f.pszDest))&&(g_ItemScoreRecord=f)}};b.prototype.autoPickItems=function(a){var b=a.series,f=a.param;a=a.record;for(var d=ObjectManage.findobject(playerID),c=ItemMgr.getInstance().DropItemList,e="",h=43,l=0;l<c.length;l++){var g=c[l];if(d&&g&&Math.abs(d.grid.x-g.x)<=f&&Math.abs(d.grid.y-g.y)<=f&&(0!=b||Gameconfig.itemCheck(g.Name,1))&&(1!=a||-1==g_selfdropitem.indexOf(g.id))&&(0<--h&&(e=1!=h?e+(g.x+","+g.y+"|"):e+(g.x+","+g.y+"")),0>=h))break}0<e.length&&Sendmessage.autoPickDifferent(e)};b.prototype.superMoveMsg=function(a,b){var f=CodeUtil._LOBYTE(a.param),d=CodeUtil._HIBYTE(a.param),c=a.tag,e=a.series,h=a.record,l=[];if(""!=b){for(var g=DecodeString(b).split("||"),u=0;u<g.length;u++){var B=GameUtil.msgSetColor(g[u],f,d,c);l.push(B)}0<l.length&&(l.nY=e,l.nCount=h,g_superMsg.push(l),1==g_superMsg.length&&(f=[].concat(l),GameUtil.superMsg(f,e,h)))}};b.prototype.openUpgrade=function(){var a=Laya.stage.getChildByName("upgrade");a||(a=new upGradeItem,Laya.stage.addChild(a))};b.prototype.getGomList=function(a){Gomsuitlist=[];if(a&&""!=a&&(a=zDecodeString(a).split("\r\n"),1<a.length)){for(var b=0;b<a.length;b++){var f=a[b];if(f&&""!=f){var d={};if(-1!=f.indexOf("|")){var c=f.indexOf("|");d.suitname=f.substring(0,c);f=f.substring(c+1)}-1!=f.indexOf("|")&&(c=f.indexOf("|"),d.suitnum=f.substring(0,c),f=f.substring(c+1));-1!=f.indexOf(":")&&(c=f.indexOf(":"),d.suititem=f.substring(0,c),d.suitdesc=f.substring(c+1),GameMission.LoadIngimage(d.suitdesc));Gomsuitlist.push(d)}}GomSuitOpen=!0}};b.prototype.makeH5scrpt=function(a,b){switch(a.record){case 1:GameUtil.ShowNewBag(1==a.param);break;case 2:GameUtil.ShowNewTeamGroup(1==a.param);if(1==a.param){var f=GameUtil.InstanceOfMem(TreamGroupUI);1==a.tag?f.btn_myteamClick():2==a.tag&&f.btn_nearbyClick()}break;case 3:f=GameUtil.InstanceOfMem(RedPakUI);1!=a.param||f?0==a.param&&f&&(f.visible=!f.visible):(f=new UIRedPak,Laya.stage.addChild(f));break;case 4:1==a.param?Sendmessage.sendOpenGuildDlg():Laya.stage.event("remove_hanghui_dlg");break;case 5:1==a.param?Sendmessage.QueryUserShops(0,0,""):(f=GameUtil.InstanceOfMem(PersonalStoreUI))&&f.BtnClose();break;case 6:if(1==a.param)Sendmessage.FriendOpition(0,""),Laya.stage.event("game_dlg_cmd",[{id:"show_friend",tag:a.tag}]);else if(f=GameUtil.InstanceOfMem(FriendUI))f.SelectIdx=-1,f.ExitDlg();break;case 7:f=GameUtil.InstanceOfMem(AuxiliaryUI);1==a.param?(f||(f=new uiAuxiliary,Laya.stage.addChild(f)),f&&0==f.visible&&(f.visible=!0),0<a.tag&&(f.tab.selectedIndex=a.tag-1,f.ShowDlg())):f&&f.BtnClick();break;case 8:1==a.param?(open_minimap=!0,Sendmessage.sendOpenMinimap()):(f=GameUtil.InstanceOfMem(minimapUI))&&f.close();break;case 9:1==a.param?GameUtil.ShowNewLogo(!0,null,null,a.tag+""):(f=GameUtil.InstanceOfMem(HumWinUI))&&f.close();0<a.tag&&(f=GameUtil.InstanceOfMem(HumWinUI))&&f.showTab(a.tag);break;case 10:f=Laya.stage.getChildByName("UIShop"),1==a.param?f?f.root.visible=!0:(Sendmessage.GetShopItems(0),Sendmessage.GetStrangeItems(),f=new UIShop,f.name="UIShop",Laya.stage.addChild(f)):f&&0==a.param&&(f.root.getChildByName("panel_gift").visible=!1,f.root.getChildByName("panel_gift").getChildByName("input_tar_name").text="",f.root.visible=!1,f.BgImg())}};b.prototype.checkOverTimeTK=function(){if(!(-1>=this.TK_TICKTIME_TIME)){var a=Laya.Browser.now()-this.TK_TICKTIME_TIME;this.TK_TICKTIME_TIME=Laya.Browser.now();this.TK_DELAY_TIME+=a;this.TK_DELAY_TIME>=l&&Laya.stage.event("DELAY_TIME",15E3)}};b.prototype.playSoundScript=function(a,b){var f=DecodeString(b);Laya.SoundManager.stopAll();GameUtil.PlayMusicFormat("music/"+f)};b.prototype.alertMessageGDY=function(a,b){if(null!=b&&""!=b){var f=JSON.parse(b.toString());Laya.stage.event("show_alert_dlg",[{type:1,txt:f.message,callfn:function(){}}])}};b.prototype.setWeatherEffect=function(a){function b(a){g_showWeatherEffect||(g_showWeatherEffect=new Laya.Particle2D(a),Laya.stage.addChild(g_showWeatherEffect),g_showWeatherEffect.pos(0,-230),g_showWeatherEffect.emitter&&g_showWeatherEffect.emitter.start(),g_showWeatherEffect.play())}var f=0;1==CodeUtil._LOBYTE(a.param)?f=1:1==CodeUtil._HIBYTE(a.param)?f=2:1==a.tag?f=3:0==CodeUtil._LOBYTE(a.param)&&0==CodeUtil._HIBYTE(a.param)&&0==a.tag&&(f=0);0!=f?Laya.loader.load("gameres/animation/particle/weathereffect"+f+".part",Laya.Handler.create(this,b),null,Laya.loader.JSON):0==f&&g_showWeatherEffect&&(g_showWeatherEffect.removeSelf(),g_showWeatherEffect=null)};return b}(),LogClientSocket=function(){function b(){this["byte"]=new Laya.Byte;this["byte"].endian=Laya.Byte.LITTLE_ENDIAN;this.socket=new Laya.Socket;this.socket.endian=Laya.Byte.LITTLE_ENDIAN;this.socket.on(Laya.Event.OPEN,this,this.openHandler);this.socket.on(Laya.Event.CLOSE,this,this.closeHandler);this.socket.on(Laya.Event.ERROR,this,this.errorHandler)}var c=[],a=0;b.prototype.OpenServer=function(a){if(""!=a){var b=a.split("/");3<=b.length&&(g_Cai_GameID=parseInt(b[0]),g_Cai_ServerIP=b[1],g_Cai_ServerPort=parseInt(b[2]),g_Cai_nProductID=parseInt(b[3]),Laya.timer.loop(3E3,this,this.loopSendLogMessage),console.log("\u91c7\u96c6\u670d\u52a1\u5668\u4fe1\u606f\uff01",a))}};b.prototype.loopSendLogMessage=function(){10<=a&&(Laya.timer.clear(this,this.loopSendLogMessage),c=[]);this.socket.connected?(this.m_SendMsg="",0<c.length&&(this.m_SendMsg=c[0],c.splice(0,1)),""!=this.m_SendMsg&&this.socket.send(this.m_SendMsg)):(0<g_Cai_GameID&&""!=g_Cai_ServerIP&&0<g_Cai_ServerPort&&65535>g_Cai_ServerPort&&this.connect(g_Cai_ServerIP,g_Cai_ServerPort),a+=1)};b.prototype.connect=function(a,b){this.socket.connect(a,b)};b.prototype.openHandler=function(){console.log("\u8fde\u63a5\u91c7\u96c6\u670d\u52a1\u5668\u6210\u529f\uff01---------")};b.prototype.AddGameDataLog=function(a,b,g,f,h){var l={},m=Objectcontrol.self_obj;l.account="LZ_H5_Client";l.password="lz_H5_zhanji";l.MAC="H5:BB:CC:DD:11:F1";l.AreaId=g_Cai_GameID;l.ProductID=g_Cai_nProductID;l.areaname=g_ServerName;l.LocalTime=GameUtil.getformattimestamp(Laya.Browser.now());l.id=a;l.mapno=Mapdata.cur_id;l.Channel=g_ChannelId;l.Terminal=g_Termial;m?(l.x=m.grid.x,l.y=m.grid.y,l.charname=g_RoleName,l.charlevel=m.m_Abil.Level?m.m_Abil.Level:0):(l.x=0,l.y=0,l.charname="",l.charlevel=0);l.itemname=b;l.itemid=g;l.reserved1=f;l.reserved2=h;a=JSON.stringify(l);c.push(a)};b.prototype.closeHandler=function(a){this.socket.close()};b.prototype.errorHandler=function(a){this.socket.close()};return b}(),SendMessage=function(){function b(){this.keyMap={};this.connectKey="";this.clsocket=new ClientSocket}var c=0;b.prototype.getIPPortCount=function(){return this.clsocket.getIPPortCount()};b.prototype.End=function(){this.clsocket.End()};b.prototype.SendMonsterGM=function(a){if("testgm"==a)return open_gm=!0;if(open_gm&&"pbwjyes"==a)return gm_show_player=!1,!0;if(open_gm&&"pbwjno"==a)return gm_show_player=!0;if(open_gm&&"pbnpcyes"==a)return gm_show_npc=!1,!0;if(open_gm&&"pbnpcno"==a)return gm_show_npc=!0;if(open_gm&&"pbjnyes"==a)return gm_show_skill=!1,!0;if(open_gm&&"pbjnno"==a)return gm_show_skill=!0;if(open_gm&&-1!=a.indexOf("pbwjyes/"))return a=a.split("/"),gm_show_pl_name=a[1],gm_show_pl_visible=!1,!0;if(open_gm&&-1!=a.indexOf("pbwjno/"))return a=a.split("/"),gm_show_pl_name=a[1],gm_show_pl_visible=!0;if(open_gm&&-1!=a.indexOf("pbmapyes/"))return a=a.split("/"),gm_show_map=parseInt(a[1]),Laya.stage.event("gm_show_map_type"),!0;if(open_gm&&-1!=a.indexOf("pbmapno/"))return gm_show_map=-1,Laya.stage.event("gm_show_map_type"),!0;if(open_gm&&"xsgz"==a||open_gm&&"qxgz"==a)return!0;if(open_gm&&"openmsg"==a)return gm_print_msg=!0;if(open_gm&&"closemsg"==a)return gm_print_msg=!1,!0;if(open_gm&&"kqckms"==a||open_gm&&"gbckms"==a)return!0;if(open_gm&&"help"==a)return Laya.stage.event("open_gm_info","\u5c4f\u853d\u73a9\u5bb6: pbwjyes \r \u663e\u793a\u73a9\u5bb6: pbwjno \r  \u5c4f\u853dnpc: pbnpcyes \r \u663e\u793anpc pbnpcno \r \u5c4f\u853d\u6280\u80fd: pbjnyes \r \u663e\u793a\u6280\u80fd:pbjnno \r \u5c4f\u853d\u5730\u56fe: pbmapyes \r  \u6253\u5f00\u6d88\u606f\uff1aopenmsg \r \u6027\u80fd\u7edf\u8ba1\uff1a opentjsocket\u5b9a\u65f6\u5668:timer \r killsocket\u5b9a\u65f6\u5668: 111 \r \u91cd\u542f\u5b9a\u65f6\u5668: 2222 \r \u6253\u5f00\u9762\u677f\uff1a open"),!0;if(open_gm&&"opentj"==a)return Laya.Stat.show(0,60),!0;if(open_gm&&"closetj"==a)return Laya.Stat.hide(),!0;if(open_gm&&"timer"==a)return gm_has_socket_timer=!0;if(open_gm&&"111"==a)return Laya.timer.clear(this.clsocket,this.clsocket.loopToGetMessage),!0;if(open_gm&&"222"==a)return Laya.timer.clear(this.clsocket,this.clsocket.loopToGetMessage),Laya.timer.loop(100,this.clsocket,this.clsocket.loopToGetMessage),!0;if(open_gm&&"open"==a)return Laya.stage.event("open_gm"),!0};b.prototype.SendNpcCMD=function(a,b,c){b=_TDEFAULTMESSAGE(CM_MERCHANTDLGSELECT,b,c,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.connectLoginSvr=function(a,b){this.connectKey="login_gate";this.clsocket.connect(a,b)};b.prototype.connectRoleSvr=function(a,b){this.connectKey="role_gate";this.clsocket.connectToGameGate=!1;this.clsocket.connect(a,b);this.GameIp=a;this.GamePort=b};b.prototype.connectGameSvr=function(a,b){this.connectKey="game_gate";this.clsocket.connect(a,b);this.clsocket.connectToGameGate=!0};b.prototype.reconnectGameSvr=function(a,b){this.connectKey="game_gate_relink";this.clsocket.connect(a,b);this.clsocket.connectToGameGate=!0};b.prototype.sendLogin=function(a,b){var c=_TDEFAULTMESSAGE(CM_IDPASSWORD,0,0,1,0),g=EncodeString(a+"/"+b);this.sendPacket(c,g)};b.prototype.SendExitToLogin=function(){var a=_TDEFAULTMESSAGE(CM_SOFTCLOSE,0,0,0,0);this.sendPacket(a,"")};b.prototype.getNpcInfo=function(){var a=_TDEFAULTMESSAGE(CM_QUERYNAVIGATE,0,0,0,0);this.sendPacket(a,"")};b.prototype.SendCaiji=function(a){var b=g_ChannelId,c=CodeUtil._MAKEWORD(24,g_Termial);a=_TDEFAULTMESSAGE(a,b,c,0,0);b=EncodeString("0123456789ab ");this.sendPacket(a,b)};b.prototype.SendUseItem=function(a,b){var c=_TDEFAULTMESSAGE(CM_EAT,a,0,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.SendDeleteItem=function(a){if(!a.s.boIsBind||!a.s.boDropFree){var b=_TDEFAULTMESSAGE(CM_DROPITEM,a.MakeIndex,1,0,0);a=EncodeString(a.s.Name);this.sendPacket(b,a)}};b.prototype.DepotOrBagItems=function(a,b){var c=_TDEFAULTMESSAGE(CM_STORAGEVIEW,a,b,0,0);ItemMgr.getInstance();ItemMgr.getInstance();this.sendPacket(c,"")};b.prototype.TakeOffItem=function(a,b){var c=_TDEFAULTMESSAGE(CM_TAKEOFFITEM,a.MakeIndex,b,0,0),g=a.s.Name.split("(*)"),f="";1<g.length?f=g[1]:f=g[0];f=EncodeString(f);this.sendPacket(c,f)};b.prototype.ClickMapItem=function(a,b){var c=_TDEFAULTMESSAGE(CM_PICKUP,0,a,b,0);this.sendPacket(c,"")};b.prototype.autoPick=function(a,b){var c=_TDEFAULTMESSAGE(CM_AUTOPICKUPITEMS,0,a,b,0);this.sendPacket(c,"")};b.prototype.autoPickDifferent=function(a){var b=_TDEFAULTMESSAGE(CM_AUTOPICKUPITEMS,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.TakeOnItem=function(a,b){ItemMgr.getInstance().LastTakeOnPos=b;var c=_TDEFAULTMESSAGE(CM_TAKEONITEM,a.MakeIndex,b,0,0),g=EncodeString(a.s.Name);this.sendPacket(c,g)};b.prototype.StartTrade=function(a){a=_TDEFAULTMESSAGE(CM_DEALTRY,0,0,0,0);this.sendPacket(a,"")};b.prototype.AddTradeItem=function(a){var b=_TDEFAULTMESSAGE(CM_DEALADDITEM,a.MakeIndex,0,0,0);a=EncodeString(a.s.Name);this.sendPacket(b,a)};b.prototype.TradeGold=function(a){a=_TDEFAULTMESSAGE(CM_DEALCHGGOLD,a,0,0,0);this.sendPacket(a,"")};b.prototype.SubmitTrade=function(){var a=_TDEFAULTMESSAGE(CM_DEALEND,0,0,0,0);this.sendPacket(a,"")};b.prototype.DeleteTradeItem=function(a){var b=_TDEFAULTMESSAGE(CM_DEALDELITEM,a.MakeIndex,0,0,0);a=EncodeString(a.s.Name);this.sendPacket(b,a)};b.prototype.CancelTrade=function(){var a=_TDEFAULTMESSAGE(CM_DEALCANCEL,0,0,0,0);this.sendPacket(a,"")};b.prototype.sendSelectServer=function(a){var b=_TDEFAULTMESSAGE(CM_SELECTSERVER,sectionInfo,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendreqserver=function(a){var b=_TDEFAULTMESSAGE(SM_GETSERVERLIST,CLIENT_JS_VERSION_NUMBER,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendChangePassword=function(a,b,c){var g=_TDEFAULTMESSAGE(CM_CHANGEPASSWORD,0,0,0,0);a=EncodeString(a+"\t"+b+"\t"+c);this.sendPacket(g,a)};b.prototype.sendNewAccount=function(a,b){var c=g_ChannelId,g=CodeUtil._MAKEWORD(24,g_Termial),c=_TDEFAULTMESSAGE(CM_ADDNEWUSER,0,0,g,c),g=fnEncode6BitBuf(a,a.length)+fnEncode6BitBuf(b,b.length);this.sendPacket(c,g)};b.prototype.sendUpdateAccount=function(a,b){var c=_TDEFAULTMESSAGE(CM_UPDATEUSER,0,0,0,0),g=fnEncode6BitBuf(a,a.length)+fnEncode6BitBuf(b,b.length);this.sendPacket(c,g)};b.prototype.sendQueryRole=function(a,b){if("game_gate"!=this.connectKey&&"game_gate_relink"!=this.connectKey){var c=g_ChannelId,g=CodeUtil._MAKEWORD(24,g_Termial);this.certifyCode=b;this.UID=a;c=_TDEFAULTMESSAGE(CM_QUERYCHR,sectionInfo,0,g,c);g=EncodeString(a+"/"+b);this.sendPacket(c,g)}};b.prototype.sendNewRole=function(a,b,c,g,f){var h=_TDEFAULTMESSAGE(CM_NEWCHR,sectionInfo,0,0,0);a=EncodeString(a+"/"+b+"/"+c+"/"+g+"/"+f);g_tempJob=f+"|"+g;g_tempName=b;this.sendPacket(h,a)};b.prototype.sendDeleteRole=function(a){var b=_TDEFAULTMESSAGE(CM_DELCHR,sectionInfo,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendSelectRole=function(a,b){var c=_TDEFAULTMESSAGE(CM_SELCHR,sectionInfo,0,1,0),g=EncodeString(a+"/"+b);this.sendPacket(c,g)};b.prototype.sendQueryDeleteChr=function(a){var b=_TDEFAULTMESSAGE(CM_QUERYDELCHR,sectionInfo,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendGetBackBeleteChr=function(a,b){var c=_TDEFAULTMESSAGE(CM_GETBACKDELCHR,sectionInfo,0,0,0),g=EncodeString(a+"/"+b);this.sendPacket(c,g)};b.prototype.sendRunLogin=function(a,b,e){var g=GetKey(),f=GetKeyValue(g);mac_key=f;var f=encryStringK(port_key,f),h=app_imei,l=app_imei;g_Termial=cur_use_app?3:1;var m="0";"game_gate_relink"==this.connectKey&&(m="1");a=EncodeString("**"+f+"/"+a+"/"+b+"/"+e+"/"+CLIENT_VERSION_NUMBER+"/"+g+"/"+RUNLOGINCODE+"/"+h+"/"+l+"/"+game_scene_code+"/"+g_Termial+"/"+g_ChannelId+"/"+m);9>c?c++:c=0;this.clsocket.send("#"+c+a+"!");verify_through=!0};b.prototype.sendNoticeOK=function(){var a=string2ByteArray("puMbqcHc]HNSUiTPidIpy@VLti"),a=Crc32(a.arr,a.len);CodeUtil._LOWORD(a);var b=CodeUtil._HIWORD(a),c=CodeUtil._MAKEWORD(0,12),a=CodeUtil.getKeyValue(32),b=_TDEFAULTMESSAGE(CM_LOGINNOTICEOK,0,108,b,c),c=decryString("puMbqcHc]HNSUiTPidIpy@VLti"),a=encryStringK(c,a),a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendOpenMinimap=function(){var a=_TDEFAULTMESSAGE(CM_WANTMINIMAP,0,0,0,0);this.sendPacket(a)};b.prototype.sendRoleMessage=function(a,b,c,g){a=_TDEFAULTMESSAGE(a,CodeUtil._MAKELONG(b,c),0,g,0);this.sendPacket(a)};b.prototype.sendHitMessage=function(a,b,c,g,f){a=_TDEFAULTMESSAGE(a,CodeUtil._MAKELONG(b,c),0,g,0);this.sendPacket(a)};b.prototype.sendSpellMessage=function(a,b,c,g,f,h){for(var l=0,m=0;m<g_SetupMagicList.length;m++)g_SetupMagicList[m]&&g_SetupMagicList[m].Def.wMagicId==g&&(l=g_SetupMagicList[m].Def.MagicAttr);g=l<<13|g&8191;a=_TDEFAULTMESSAGE(a,CodeUtil._MAKELONG(b,c),CodeUtil._LOWORD(f),g,CodeUtil._HIWORD(f));null!=h&&(h=EncodeString(h));this.sendPacket(a,h)};b.prototype.sendLockSpellMsg=function(a,b,c,g,f){a=_TDEFAULTMESSAGE(a,CodeUtil._MAKELONG(b,c),CodeUtil._LOWORD(f),g,CodeUtil._HIWORD(f));this.sendPacket(a,NULL)};b.prototype.sendRideMessage=function(a,b,c){a=_TDEFAULTMESSAGE(a,0,b,c,0);this.sendPacket(a)};b.prototype.sendQueryMessage=function(a){a=_TDEFAULTMESSAGE(a,0,0,0,0);this.sendPacket(a)};b.prototype.sendTakeOnItem=function(a,b,c){a=_TDEFAULTMESSAGE(CM_TAKEONITEM,b,a,0,0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendTakeOnOffItem=function(a,b,c,g){a=_TDEFAULTMESSAGE(a,g,b,0,0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendEat=function(a,b,c){a=_TDEFAULTMESSAGE(CM_EAT,b,a,0,0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendStackThing=function(a,b,c,g){var f=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);a=_TDEFAULTMESSAGE(CM_OVERLAPITEM,a,f,b,g);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendStackDrug=function(a,b,c,g){var f=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);a=_TDEFAULTMESSAGE(CM_OVERLAPDRUG,a,f,b,g);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendHeroStackThing=function(a,b,c,g){var f=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);a=_TDEFAULTMESSAGE(CM_HEROOVERLAPITEM,a,f,b,g);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendHeroStackDrug=function(a,b,c,g){var f=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);a=_TDEFAULTMESSAGE(CM_OVERLAPDRUG,a,f,b,g);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.blessbottle=function(a,b,c){a=_TDEFAULTMESSAGE(CM_PACKAGEITEM,b,a,0,0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.blessbottleH=function(a,b,c){a=_TDEFAULTMESSAGE(CM_HEROPACKAGEITEM,b,a,0,0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendQueryName=function(a,b,c){a=_TDEFAULTMESSAGE(CM_QUERYUSERNAME,a,b,c,0);this.sendPacket(a)};b.prototype.sendQueryState=function(a,b,c){a=_TDEFAULTMESSAGE(CM_QUERYUSERSTATE,a,b,c,0);this.sendPacket(a)};b.prototype.sendQueryClose=function(){var a=_TDEFAULTMESSAGE(CM_QUERYCLOSE,1,0,0,0);this.sendPacket(a)};b.prototype.sendItemIndex=function(a,b,c){a=_TDEFAULTMESSAGE(a,b,0,0,0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendDropItem=function(a,b,c){b=_TDEFAULTMESSAGE(CM_DROPITEM,b,c,0,0);a=a.split("(*)");c="";1<a.length?c=a[1]:c=a[0];c=EncodeString(c);this.sendPacket(b,c)};b.prototype.sendDropGold=function(a){a=_TDEFAULTMESSAGE(CM_DROPGOLD,a,0,0,0);this.sendPacket(a)};b.prototype.sendButchAnimal=function(a,b,c,g){a=_TDEFAULTMESSAGE(CM_BUTCH,g,a,b,c);this.sendPacket(a)};b.prototype.sendConfig=function(a){a=1==a?1:0;a=_TDEFAULTMESSAGE(CM_CONFIG,a,a,a,a);this.sendPacket(a)};b.prototype.sendHeroMagicKeyChange=function(a){a=_TDEFAULTMESSAGE(CM_HEROMAGICKEYCHANGE,a,0,0,1);this.sendPacket(a)};b.prototype.sendOpenDoor=function(a,b,c){a=_TDEFAULTMESSAGE(CM_OPENDOOR,c,a,b,0);this.sendPacket(a)};b.prototype.sendNPCMessage=function(a,b,c,g){a=_TDEFAULTMESSAGE(a,b,0,0,c);g=EncodeString(g);this.sendPacket(a,g)};b.prototype.sendChooseNpcDialog=function(a,b,c){a=_TDEFAULTMESSAGE(CM_MERCHANTDLGSELECT,a,c,0,0);b=EncodeString(b);this.sendPacket(a,b)};b.prototype.sendSaleDetailItem=function(a,b){var c=_TDEFAULTMESSAGE(CM_GETSELLOFFDETAILITEM,a.npcId,b,0,0),g=EncodeString(a.name);this.sendPacket(c,g)};b.prototype.sendGetDetailItem=function(a,b){var c=_TDEFAULTMESSAGE(CM_USERGETDETAILITEM,a.npcId,b,0,0),g=EncodeString(a.name);this.sendPacket(c,g)};b.prototype.sendBuyItem=function(a){var b=CodeUtil._LOWORD(a.gstock),c=CodeUtil._HIWORD(a.gstock),b=_TDEFAULTMESSAGE(CM_USERBUYITEM,a.npcId,b,c,1);a=EncodeString(a.name);this.sendPacket(b,a)};b.prototype.sendGiveItem=function(a,b){var c=CodeUtil._LOWORD(a.MakeIndex),g=CodeUtil._HIWORD(a.MakeIndex),f=EncodeString(a.s.Name),c=_TDEFAULTMESSAGE(CM_UPGRADEDLGITEM,b,c,g,0);this.sendPacket(c,f)};b.prototype.SendButItemFormInfo=function(a){var b=CodeUtil._LOWORD(a.MakeIndex),c=CodeUtil._HIWORD(a.MakeIndex),b=_TDEFAULTMESSAGE(CM_USERBUYITEM,a.npcId,b,c,1);a=EncodeString(a.s.Name);this.sendPacket(b,a)};b.prototype.SendButItemFormSale=function(a){var b=CodeUtil._LOWORD(a.MakeIndex),c=CodeUtil._HIWORD(a.MakeIndex),b=_TDEFAULTMESSAGE(CM_BUYSELLOFFITEM,a.npcId,b,c,0);a=EncodeString(a.s.Name);this.sendPacket(b,a)};b.prototype.sendBindBuyItem=function(a){var b=CodeUtil._LOWORD(a.gstock),c=CodeUtil._HIWORD(a.gstock),b=_TDEFAULTMESSAGE(CM_USERBINDBUYITEM,a.npcId,b,c,1);a=EncodeString(a.name);this.sendPacket(b,a)};b.prototype.SendButBindItemFormInfo=function(a){var b=CodeUtil._LOWORD(a.MakeIndex),c=CodeUtil._HIWORD(a.MakeIndex),b=_TDEFAULTMESSAGE(CM_USERBINDBUYITEM,a.npcId,b,c,1);a=EncodeString(a.s.Name);this.sendPacket(b,a)};b.prototype.sendTranslateChoose=function(a){var b=_TDEFAULTMESSAGE(CM_BOXITEM,10,0,0,0);a=EncodeString(a+"");this.sendPacket(b,a)};b.prototype.sendTranslateItem=function(a,b,c,g){a=_TDEFAULTMESSAGE(CM_SELLOFFITEM,c,CodeUtil._LOWORD(a),CodeUtil._HIWORD(a),0);b=EncodeString(g+"/"+b);this.sendPacket(a,b)};b.prototype.sendQueryPrice=function(a,b,c){G_Show_Item_Price=0;a=_TDEFAULTMESSAGE(CM_MERCHANTQUERYSELLPRICE,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendSellItem=function(a,b,c){a=_TDEFAULTMESSAGE(CM_USERSELLITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendRepairItem=function(a,b,c){ItemMgr.getInstance().LastRepairItemId=b;a=_TDEFAULTMESSAGE(CM_USERREPAIRITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendQueryRepairCost=function(a,b,c){G_Show_Item_Price=0;a=_TDEFAULTMESSAGE(CM_MERCHANTQUERYREPAIRCOST,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendStorageItem=function(a,b,c){a=_TDEFAULTMESSAGE(CM_USERSTORAGEITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.sendTakeBackStorageItem=function(a,b,c,g){a=_TDEFAULTMESSAGE(CM_USERTAKEBACKSTORAGEITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),c);g=EncodeString(g);this.sendPacket(a,g)};b.prototype.sendMakeDrugItem=function(a,b){var c=_TDEFAULTMESSAGE(CM_USERMAKEDRUGITEM,a,0,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.sendOpenGuildDlg=function(){var a=_TDEFAULTMESSAGE(CM_OPENNEWGUILDDLG,0,0,0,0);this.sendPacket(a)};b.prototype.guildMemberList=function(){var a=_TDEFAULTMESSAGE(CM_GUILDMEMBERLIST,0,0,0,0);this.sendPacket(a)};b.prototype.guildAddMember=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDADDMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.guilddelMember=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDDELMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.guildEditorNotice=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDUPDATENOTICE,0,0,0,0);39999<a.length&&a.slice(0,3999);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.guildEditorInfo=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDUPDATERANKINFO,0,0,0,0);499<a.length&&a.slice(0,499);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.GuildManagerEditor=function(a,b,c){b=_TDEFAULTMESSAGE(CM_GUILDMANAGEEDIT,0,c,b,0);a=EncodeString(a);this.sendPacket(b,a);this.sendGuildMemberList(1)};b.prototype.sendGuildHome=function(){var a=_TDEFAULTMESSAGE(CM_GUILDHOME,0,0,0,0);this.sendPacket(a)};b.prototype.sendGuildMemberList=function(a){a=_TDEFAULTMESSAGE(CM_OPENNEWGUILDDLG,0,0,a,0);this.sendPacket(a)};b.prototype.GuildManagereCruit=function(a,b,c){var g=_TDEFAULTMESSAGE(CM_GUILDMANAGERECRUIT,0,0,0,0);a=EncodeString(a+";"+b+";"+c);this.sendPacket(g,a)};b.prototype.GuildOperate=function(a,b){var c=_TDEFAULTMESSAGE(CM_GUILDOPERATE,a,0,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.NewGuildOpt=function(a,b){var c=_TDEFAULTMESSAGE(CM_NEWGUILD,0,0,0,a),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.sendGuildAddMember=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDADDMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.SendManagerAdd=function(a,b){var c=_TDEFAULTMESSAGE(CM_GUILDMANAGEADD,0,0,a,0),g=EncodeString(b);this.sendPacket(c,g);this.sendGuildMemberList(1);this.sendOpenGuildDlg()};b.prototype.sendGuildDelMember=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDDELMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendGuildUpdateNotice=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDUPDATENOTICE,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendGuildUpdateGrade=function(a){var b=_TDEFAULTMESSAGE(CM_GUILDUPDATERANKINFO,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendAdjustBonus=function(a,b){var c=_TDEFAULTMESSAGE(CM_ADJUST_BONUS,a,0,0,0),g=objEncode6BitBuf(b);this.sendPacket(c,g)};b.prototype.sendSpeedHackUser=function(){var a=_TDEFAULTMESSAGE(CM_SPEEDHACKUSER,0,0,0,0);this.sendPacket(a)};b.prototype.sendCreateGroup=function(a){var b=_TDEFAULTMESSAGE(CM_CREATEGROUP,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendGroupMode=function(){var a=0,a=G_BaseSetList[0].val?0:1,a=_TDEFAULTMESSAGE(CM_GROUPMODE,0,a,0,0);this.sendPacket(a,"")};b.prototype.sendAddGroupMember=function(a){var b=_TDEFAULTMESSAGE(CM_ADDGROUPMEMBER,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendDelGroupMember=function(a){var b=_TDEFAULTMESSAGE(CM_DELGROUPMEMBER,0,0,0,0),c=a;a=a.split(";");2<a.length&&(c=a[0]);c=EncodeString(c);this.sendPacket(b,c)};b.prototype.GetShopItems=function(a){a=CodeUtil._MAKEWORD(a,10*G_Cur_Shop_Page);a=_TDEFAULTMESSAGE(CM_GETSHOPITEMS,0,a,10,0);this.sendPacket(a,"")};b.prototype.GetStrangeItems=function(){var a=_TDEFAULTMESSAGE(CM_GETSHOPITEMS,0,5,0,0);this.sendPacket(a,"")};b.prototype.BuyShopItem=function(a,b){var c=_TDEFAULTMESSAGE(CM_BUYSHOPITEM,0,a,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.GiftShopItem=function(a,b){var c=_TDEFAULTMESSAGE(CM_SENTSHOPITEM,0,0,0,0),g=EncodeString(b+"|"+a);this.sendPacket(c,g)};b.prototype.sendCloseGame=function(){var a=_TDEFAULTMESSAGE(CM_SOFTCLOSE,0,0,0,0);this.sendPacket(a)};b.prototype.sendCloseGameForH5=function(){var a=_TDEFAULTMESSAGE(CM_H5CLOSE,0,0,0,0);this.sendPacket(a)};b.prototype.sendSay=function(a){if("/"==a[0]){var b=a.split(" ")[0],b=b.slice(1,b.length);if(1==GameUtil.UserInFriendHMD(b))return;Laya.stage.event("new_chat_msg",[{info:a,front:252,bg:255,type:2}])}b=_TDEFAULTMESSAGE(CM_SAY,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.QueryBagItems=function(){var a=_TDEFAULTMESSAGE(CM_QUERYBAGITEMS,0,0,0,0);this.sendPacket(a)};b.prototype.sendNPCClick=function(a){a=_TDEFAULTMESSAGE(CM_CLICKNPC,a,0,0,0);this.sendPacket(a)};b.prototype.sendPacket=function(a,b){if(verify_through){var e=EncodeMessage(a);9>c?c++:c=0;var g="",g=b?"#"+c+e+b+"!":"#"+c+e+"!";this.clsocket.send(g)}};b.prototype.gettmissitem=function(a,b,c){a=_TDEFAULTMESSAGE(CM_GETMISSITEM,a,b,0,0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.FriendOpition=function(a,b){console.log("friend--\x3e ",a,b);var c=_TDEFAULTMESSAGE(CM_FRIENDS,a,0,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.FriendInfo=function(a){var b=_TDEFAULTMESSAGE(CM_SAY,0,0,0,0);a=EncodeString("@\u83b7\u53d6\u597d\u53cb\u4fe1\u606f 0 0 0 0 "+a);this.sendPacket(b,a)};b.prototype.SendMagicKey=function(a,b){var c=_TDEFAULTMESSAGE(CM_MAGICKEYCHANGE,a,b,0,0);this.sendPacket(c,"")};b.prototype.RemoveMagicForNpos=function(a){a=_TDEFAULTMESSAGE(CM_MAGICKEYCHANGE,a.Def.wMagicId,0,0,a.Def.MagicAttr);this.sendPacket(a,"")};b.prototype.SendChageAttackMode=function(a){a=_TDEFAULTMESSAGE(CM_H5ATTACKMODE,a,0,0,0);var b=EncodeString("@AttackMode");this.sendPacket(a,b)};b.prototype.sendOpenRedPack=function(a){a=_TDEFAULTMESSAGE(CM_OpenRedPack,a,0,0,0);this.sendPacket(a)};b.prototype.sendRedPack=function(a,b,c,g,f){a=_TDEFAULTMESSAGE(CM_SENDREDPACKED,a,b,c,g);f=EncodeString(f);this.sendPacket(a,f)};b.prototype.sendRedPackMsg=function(a,b){var c=_TDEFAULTMESSAGE(CM_SENDREDPACKEDREPLY,a,0,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.sendActorBuffClick=function(a,b){var c=_TDEFAULTMESSAGE(a,0,0,b,0);this.sendPacket(c)};b.prototype.sendActorBuffButton=function(a){a=_TDEFAULTMESSAGE(CM_ACTORBUFFBUTTON,0,0,a,0);this.sendPacket(a)};b.prototype.sendtomsg=function(a,b,c,g,f,h){a=_TDEFAULTMESSAGE(a,b,c,g,f);h=EncodeString(h);this.sendPacket(a,h)};b.prototype.ChangDir=function(a,b,c){a=_TDEFAULTMESSAGE(CM_TURN,CodeUtil._MAKELONG(a,b),0,c,0);this.sendPacket(a)};b.prototype.QuerySelectShopInfo=function(a,b){g_SelectedName=a;var c=_TDEFAULTMESSAGE(CM_QUERYSELECTSHOPINFO,b,0,0,0),g=EncodeString(a);this.sendPacket(c,g)};b.prototype.OpenMyBaiTan=function(){var a=_TDEFAULTMESSAGE(CM_OPENMYBAITAN,0,0,0,0);this.sendPacket(a)};b.prototype.AddBaiTanItem=function(a,b,c){a=_TDEFAULTMESSAGE(CM_ADDPAIMAIITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),CodeUtil._MAKEWORD(0,c));this.sendPacket(a)};b.prototype.StopBaiTan=function(){var a=_TDEFAULTMESSAGE(CM_STOPBAITAN,0,0,0,0);this.sendPacket(a)};b.prototype.StartBaiTan=function(a){var b=_TDEFAULTMESSAGE(CM_STARTBAITAN,0,0,0,0);this.sendPacket(b,a)};b.prototype.BuyBaiTanItem=function(a,b,c,g,f){a=_TDEFAULTMESSAGE(CM_BUYBAITANITEM,a,CodeUtil._LOWORD(b),CodeUtil._HIWORD(b),f);c=c+""+("|"+g);c=EncodeString(c);this.sendPacket(a,c);Laya.stage.event("update_baitan_items")};b.prototype.SendzhaomuMsg=function(a){var b=_TDEFAULTMESSAGE(CM_SAY,0,0,0,0);a=EncodeString("@Organize-A-Team "+a);this.sendPacket(b,a)};b.prototype.SendAddZmu=function(a,b){var c=_TDEFAULTMESSAGE(CM_ZHAOMU,0,b,0,0),g=EncodeString(a);this.sendPacket(c,g)};b.prototype.SendGameMainBtnMsg=function(a){this.closeNpcWinOnUseScriptBtn();var b=_TDEFAULTMESSAGE(CM_GUI,-1,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.closeNpcWinOnUseScriptBtn=function(){GameUtil.InstanceOfMem(NewNpcWinUI)&&GameApi.ShowNewNpcDlg(!1)};b.prototype.QueryUserShops=function(a,b,c){a=_TDEFAULTMESSAGE(CM_QUERYUSERSHOPS,0,a,b,0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.SearchShopItems=function(a,b,c,g,f,h){var l=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);c=CodeUtil._MAKEWORD(c,2*g+f);h=EncodeString(h);a=_TDEFAULTMESSAGE(CM_SEARCHSHOPITEMS,a,l,b,c);this.sendPacket(a,h)};b.prototype.GetUserShops=function(a){a=_TDEFAULTMESSAGE(CM_GETUSERSHOPS,a,0,0,0);this.sendPacket(a)};b.prototype.SearchGetShopItems=function(a){a=_TDEFAULTMESSAGE(CM_SEARCHGETSHOPITEMS,a,0,0,0);this.sendPacket(a)};b.prototype.QueryUserShopItems=function(a,b,c,g,f,h,l){var m=CodeUtil._LOWORD(b);b=CodeUtil._HIWORD(b);c=CodeUtil._MAKEWORD(c,2*g+f);h=EncodeString(l+"/"+h);a=_TDEFAULTMESSAGE(CM_QUERYUSERSHOPITEMS,a,m,b,c);this.sendPacket(a,h)};b.prototype.GetUserShopItems=function(a){a=_TDEFAULTMESSAGE(CM_GETUSERSHOPITEMS,a,0,0,0);this.sendPacket(a)};b.prototype.SendBuyUserShopItem=function(a,b){var c=EncodeString(b),g=_TDEFAULTMESSAGE(CM_SENDBUYUSERSHOPITEM,a,0,0,0);this.sendPacket(g,c)};b.prototype.SendMoveMyShopItem=function(a,b,c,g){g=EncodeString(g);a=_TDEFAULTMESSAGE(CM_SENDMOVEMYSHOPITEM,a,b,c,0);this.sendPacket(a,g)};b.prototype.GetMyShopItems=function(a,b){var c=_TDEFAULTMESSAGE(CM_GETMYSHOPITEMS,a,b,0,0);this.sendPacket(c)};b.prototype.QueryMyShopSellingItems=function(a,b,c,g,f,h){var l=CodeUtil._LOWORD(f);f=CodeUtil._HIWORD(f);a=CodeUtil._MAKEWORD(a,2*b+c);h=EncodeString(h);g=_TDEFAULTMESSAGE(CM_QUERYMYSHOPSELLINGITEMS,g,l,f,a);this.sendPacket(g,h)};b.prototype.QueryMyShopSelledItems=function(a,b,c,g,f,h){var l=CodeUtil._LOWORD(f);f=CodeUtil._HIWORD(f);a=CodeUtil._MAKEWORD(a,2*b+c);h=EncodeString(h);g=_TDEFAULTMESSAGE(CM_QUERYMYSHOPSELLEDITEMS,g,l,f,a);this.sendPacket(g,h)};b.prototype.QueryMyshopStorageItems=function(a,b,c,g,f,h){var l=CodeUtil._LOWORD(f);f=CodeUtil._HIWORD(f);a=CodeUtil._MAKEWORD(a,2*b+c);h=EncodeString(h);g=_TDEFAULTMESSAGE(CM_QUERYMYSHOPSTORAGEITEMS,g,l,f,a);this.sendPacket(g,h)};b.prototype.SendAddToMyShop=function(a,b,c,g,f,h){b=CodeUtil._MAKEWORD(g,2*c+b);c=CodeUtil._LOWORD(f);f=CodeUtil._HIWORD(f);h=EncodeString(h);a=_TDEFAULTMESSAGE(CM_SENDADDTOMYSHOP,a,b,c,f);this.sendPacket(a,h)};b.prototype.SendChangeMyShopItem=function(a,b,c,g,f,h){b=CodeUtil._MAKEWORD(g,2*c+b);c=CodeUtil._LOWORD(f);f=CodeUtil._HIWORD(f);h=EncodeString(h);a=_TDEFAULTMESSAGE(CM_SENDCHANGEMYSHOPITEM,a,b,c,f);this.sendPacket(a,h)};b.prototype.SendDeleteSelledItem=function(a){a=_TDEFAULTMESSAGE(CM_SENDDELETESELLEDITEM,a,0,0,0);this.sendPacket(a)};b.prototype.SendShopName=function(a){a=EncodeString(a);var b=_TDEFAULTMESSAGE(CM_SENDSHOPNAME,0,0,0,0);this.sendPacket(b,a)};b.prototype.SendShopStallStatus=function(){var a=_TDEFAULTMESSAGE(CM_SENDSHOPSTALLSTATUS,0,0,0,0);this.sendPacket(a)};b.prototype.SendtakeoffBox=function(){var a=_TDEFAULTMESSAGE(CM_TAKEOFFBOX,0,0,0,0);this.sendPacket(a)};b.prototype.SendOpenBox=function(a,b,c,g){a=_TDEFAULTMESSAGE(CM_OPENBOX,a,c,g,0);b=EncodeString(b);this.sendPacket(a,b)};b.prototype.SendFishMessage=function(a,b,c){a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,a,0,b,0);this.sendPacket(a,c)};b.prototype.SendGetGetselBoxItem=function(a){a=_TDEFAULTMESSAGE(CM_SENDGETSELBOXITEM,0,0,0,a);this.sendPacket(a)};b.prototype.SendRotationBox=function(){var a=_TDEFAULTMESSAGE(CM_ROTATIONBOX,0,0,0,0);this.sendPacket(a)};b.prototype.CreateFishTeam=function(a,b){var c=_TDEFAULTMESSAGE(CM_FISHMESSAGE,0,0,a,0);this.sendPacket(c,b)};b.prototype.AgreeFishUserToTeam=function(a){a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,a,0,12,0);this.sendPacket(a,"")};b.prototype.FishState=function(a){15==a?console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d15:\u6536\u6746\x3d\x3d\x3d\x3d\x3d\x3d\x3d"):console.log("+++++++16\uff1a\u653e\u6746+++++++\x3d");a=_TDEFAULTMESSAGE(CM_FISHMESSAGE,0,0,a,0);this.sendPacket(a,"")};b.prototype.AutoFish=function(a,b){var c=_TDEFAULTMESSAGE(CM_FISHMESSAGE,a,b,0,0);this.sendPacket(c,"")};b.prototype.AddToTeam=function(a,b){var c=_TDEFAULTMESSAGE(CM_FISHMESSAGE,b,0,a,0);this.sendPacket(c,"")};b.prototype.FishTeamChat=function(a){var b=_TDEFAULTMESSAGE(CM_FISHMESSAGE,0,0,20,0);this.sendPacket(b,a)};b.prototype.IsDropFish=function(a,b){var c=_TDEFAULTMESSAGE(CM_FISHMESSAGE,b,0,a,0);this.sendPacket(c,"")};b.prototype.NpcDlgOptions=function(a,b,c,g){var f=_TDEFAULTMESSAGE(CM_BOXITEM,g,0,0,0);if(0==g)var h=EncodeString(a+"/"+b+"/"+c+"/0");else 1==g||2==g?h=EncodeString(a+"/"+b+"/"+c):3==g&&(h=EncodeString("0/0"));this.sendPacket(f,h)};b.prototype.TakeOnItem2=function(a,b){var c=_TDEFAULTMESSAGE(CM_TAKEONITEM,a.MakeIndex,b,0,0),g=a.s.Name.split("(*)"),f="";1<g.length?f=g[1]:f=g[0];f=EncodeString(f);this.sendPacket(c,f)};b.prototype.TakeAotoOnItem=function(a,b,c){a=_TDEFAULTMESSAGE(CM_TAKEONITEM,a,b,0,0);c=c.split("(*)");b="";1<c.length?b=c[1]:b=c[0];b=EncodeString(b);this.sendPacket(a,b)};b.prototype.DepotOrBagItems2=function(a,b){var c=_TDEFAULTMESSAGE(CM_STORAGEVIEW,a,b,0,0);this.sendPacket(c,"")};b.prototype.SendCUSTOMBUTTON=function(a){var b=_TDEFAULTMESSAGE(CM_CUSTOMBUTTON,0,0,0,0);this.sendPacket(b,EncodeString("@ButtonClick"+a))};b.prototype.sendhearbeat=function(){this.clsocket.send("*");DELAY_TIME=Laya.Browser.now()};b.prototype.sendCardGame3=function(a){var b=_TDEFAULTMESSAGE(CM_LUASOCKET,0,300,0,0);a=EncodeString("Server#"+a);this.sendPacket(b,a)};b.prototype.send2lua=function(a,b){var c=_TDEFAULTMESSAGE(CM_LUASOCKET,0,a,0,0),g=EncodeString("Server#"+b);this.sendPacket(c,g)};b.prototype.SuitInfo=function(a){var b=_TDEFAULTMESSAGE(CM_LUASOCKET,0,146,0,0);a=EncodeString("Server#"+a);this.sendPacket(b,a)};b.prototype.WECHATANDQQ=function(a){var b=_TDEFAULTMESSAGE(CM_WECHATANDQQ,0,0,1,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.showfashion=function(a){a=_TDEFAULTMESSAGE(CM_SHOWFASHION,0,0,a,0);this.sendPacket(a,"")};b.prototype.SendMapLoadend=function(){var a=_TDEFAULTMESSAGE(CM_MAPLOADEND,0,0,0,0);this.sendPacket(a)};b.prototype.SendHeroCall=function(){var a=_TDEFAULTMESSAGE(CM_HEROLOGON,0,0,0,0);this.sendPacket(a)};b.prototype.masterBagToHeroBag=function(a,b){var c=_TDEFAULTMESSAGE(CM_MASTERBAGTOHEROBAG,a,0,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.heroBagToMasterBag=function(a,b){var c=_TDEFAULTMESSAGE(CM_HEROBAGTOMASTERBAG,a,0,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.heroTakeOn=function(a,b,c){a=_TDEFAULTMESSAGE(CM_HEROTAKEONITEM,a,b,0,0);c=EncodeString(c);this.sendPacket(a,c)};b.prototype.QueryHeroBagItems=function(){var a=_TDEFAULTMESSAGE(CM_QUERYBAGITEMS,1,0,0,0);this.sendPacket(a)};b.prototype.HeroDropItems=function(a,b,c){b=_TDEFAULTMESSAGE(CM_HERODROPITEM,b,c,0,0);a=a.split("(*)");c="";1<a.length?c=a[1]:c=a[0];c=EncodeString(c);this.sendPacket(b,c)};b.prototype.heroEat=function(a,b){var c=_TDEFAULTMESSAGE(CM_HEROEAT,a,0,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.HeroTakeOffItem=function(a,b){var c=_TDEFAULTMESSAGE(CM_HEROTAKEOFFITEM,a.MakeIndex,b,0,0),g=a.s.Name.split("(*)"),f="";1<g.length?f=g[1]:f=g[0];f=EncodeString(f);this.sendPacket(c,f)};b.prototype.HeroLock=function(a,b,c){a=_TDEFAULTMESSAGE(CM_HEROTARGET,a,b.x,b.y,c);this.sendPacket(a)};b.prototype.heroGuard=function(a){a=_TDEFAULTMESSAGE(CM_HEROPROTECT,0,a.x,a.y,0);this.sendPacket(a)};b.prototype.sendHeroAtk=function(){var a=_TDEFAULTMESSAGE(CM_HEROGROUPATTACK,0,0,0,0);this.sendPacket(a)};b.prototype.SendCMOpenBox=function(a,b){var c=CodeUtil._LOWORD(a),g=CodeUtil._HIWORD(a),c=_TDEFAULTMESSAGE(CM_OPENITEMBOXEX,G_NPC_ID,c,g,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.SendQFCMD=function(a){var b=_TDEFAULTMESSAGE(CM_GUI,-3,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendapi_getItem=function(a){a=_TDEFAULTMESSAGE(CM_API_GETITEM,a,0,0,0);this.sendPacket(a)};b.prototype.SendUpdatidcard=function(a){var b=_TDEFAULTMESSAGE(CM_UPDATIDCARD,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendGetGameList=function(a){var b=CodeUtil._LOWORD(CLIENT_JS_VERSION_NUMBER),c=CodeUtil._HIWORD(CLIENT_JS_VERSION_NUMBER);a=_TDEFAULTMESSAGE(CM_GETGAMELIST,a,b,c,0);this.sendPacket(a)};b.prototype.getBackPassword=function(a){var b=_TDEFAULTMESSAGE(CM_GETBACKPASSWORD,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendUpgrade=function(a){var b=_TDEFAULTMESSAGE(CM_SENDUPGRADEDIALOG,0,0,0,0);a=EncodeString(a);this.sendPacket(b,a)};b.prototype.sendNewTask=function(a){600<Laya.timer.currTimer-g_newTaskClickTick&&(g_newTaskClickTick=Laya.timer.currTimer,a=_TDEFAULTMESSAGE(CM_NEWTASKOPERATE,a,0,0,0),this.sendPacket(a))};b.prototype.sendGetMail=function(){var a=_TDEFAULTMESSAGE(CM_GETMAIL,0,0,0,0);this.sendPacket(a)};b.prototype.sendGetMailContent=function(a){a=_TDEFAULTMESSAGE(CM_GETMAILCONTENT,a,0,0,0);this.sendPacket(a)};b.prototype.sendGetMailItem=function(a){a=_TDEFAULTMESSAGE(CM_GETMAILITEM,a,0,0,0);this.sendPacket(a)};b.prototype.sendGetAllMailItem=function(){var a=_TDEFAULTMESSAGE(CM_GETALLMAIL,0,0,0,0);this.sendPacket(a)};b.prototype.sendDeleteMail=function(a){a=_TDEFAULTMESSAGE(CM_DELETEMAIL,a,0,0,0);this.sendPacket(a)};b.prototype.sendDeleteAllMail=function(){var a=_TDEFAULTMESSAGE(CM_DELETEALLMAIL,0,0,0,0);this.sendPacket(a)};b.prototype.sendCheckMapItem=function(a){a=_TDEFAULTMESSAGE(12315,a,0,0,0);this.sendPacket(a)};b.prototype.sendLockedBagSlot=function(){var a=_TDEFAULTMESSAGE(CM_EXTENDLOCKEDBAGSLOT,0,0,0,0);this.sendPacket(a)};b.prototype.sendCqbExchange=function(a,b){var c=_TDEFAULTMESSAGE(a,0,0,0,0),g=EncodeString(b);this.sendPacket(c,g)};b.prototype.sendCqbInfo=function(){var a=_TDEFAULTMESSAGE(CM_QUERYCRISTALINFO,0,0,0,0);this.sendPacket(a)};return b}(),voiceSocket=function(){function b(){this["byte"]=new Laya.Byte;this["byte"].endian=Laya.Byte.LITTLE_ENDIAN;this.socket=new Laya.Socket;this.socket.on(Laya.Event.OPEN,this,this.openHandler);this.socket.on(Laya.Event.MESSAGE,this,this.receiveHandler);this.socket.on(Laya.Event.CLOSE,this,this.closeHandler);this.socket.on(Laya.Event.ERROR,this,this.errorHandler);this.appid="1400219561";this.openid=Math.floor(100*Math.random()%99)+1E4;this.appkey="ul15qts0bhIN4T5L";this.roomtypes=[]}b.prototype.connect=function(b,a){console.log("\u8fde\u63a5\u8bed\u97f3\u670d\u52a1\u5668:",b,a);this.socket.connect(b,a)};b.prototype.openHandler=function(b){console.log("\u8fde\u63a5\u8bed\u97f3\u670d\u52a1\u5668\u6210\u529f\uff01---------");b=JSON.stringify({CMD:CCMD_CONFIG,DATA:{AreaName:g_ServerName,CharacterName:g_RoleName}});this.send(b)};b.prototype.switchroom=function(b,a,d){a&&(console.log("\u623f\u95f4\u5f00\u5173---------"+b+a+d),b=JSON.stringify({CMD:CCMD_ROOM,DATA:{RoomCmdType:b,RoomType:a,RoomName:d,OpenID:this.openid}}),this.send(b))};b.prototype.switchsound=function(b){var a={};a.enable=b;b=JSON.stringify(a);console.log("---enableSpeaker---\x3e"+b);sendtonative("enableSpeaker",b)};b.prototype.switchMic=function(b){var a={};a.enable=b;b=JSON.stringify(a);console.log("---enableMic---\x3e"+b);sendtonative("enableMic",b)};b.prototype.exitroom=function(b,a){b&&(console.log("\u79bb\u5f00\u623f\u95f4---------"+b+a),sendtonative("exitAudioRoom","exit"),this.switchroom(2,b,a))};b.prototype.enterroomfroSDK=function(b){b=JSON.stringify({appid:this.appid,openid:this.openid,roomid:b,key:this.appkey});console.log("---enterAudioRoom---\x3e"+b);sendtonative("enterAudioRoom",b)};b.prototype.initCMG=function(){var b=JSON.stringify({appid:this.appid,openid:this.openid,key:this.appkey});console.log("---initAudio---\x3e"+b);sendtonative("initAudio",b)};b.prototype.send=function(b){this.socket.connected?this.socket.send(b):console.log("\u8bed\u97f3\u670d\u52a1\u5668\u5df2\u65ad\u5f00")};b.prototype.receiveHandler=function(b){console.log("\u63a5\u53d7\u8bed\u97f3\u670d\u52a1\u5668\u6d88\u606f\uff1a"+b);b=JSON.parse(b);switch(b.CMD){case SCMD_CONFIG:this.appid=b.DATA.GME.AppID;this.openid=b.DATA.GME.OpenID;this.appkey=b.DATA.GME.Key;this.roomtypes=b.DATA.RoomTypes;this.roomtypes.unshift("\u5173\u95ed");this.initCMG();Laya.stage.event("VOICE_EVENT",["onvoiceopen"]);break;case SCMD_ROOM:this.enterroomfroSDK(b.DATA.RoomMarkName)}};b.prototype.closeHandler=function(b){console.log("-\u8bed\u97f3\u670d\u52a1\u5668\u5173\u95ed- ");Laya.stage.event("VOICE_EVENT",["onvoiceclose"])};b.prototype.errorHandler=function(b){console.log("-\u8bed\u97f3\u670d\u52a1\u5668\u51fa\u9519- ")};return b}(),scriptWorker='\n\nvar SOCKETHEADERSIZE \x3d 20;\nvar RUNGATECODE \x3d 0xAA55AA55;\nvar RUNGATECODEX \x3d 0xAA9AAA9A;\nvar CGM_COMPDATA \x3d 2;\t\t\t\t\t\t// \u8868\u793a\u538b\u7f29\u6570\u636e\n\nvar receiveBuf \x3d [];\n\n// \u7ed3\u6784\u4f53\u7ffb\u8bd1 \nfunction TSocketHeader(buff) {\n    var obj \x3d new Object;\n    var u32 \x3d new Uint32Array(buff, 0, 5);\n    var u16 \x3d new Uint16Array(buff, 4, 2);\n    obj.dwCode1 \x3d u32[0];                               // LongWord 4\u4e2a\u5b57\u8282\n    obj.wIdent \x3d u16[0];                                // Word \u7c7b\u578b 2\u4e2a\u5b57\u8282\n    obj.wReserved \x3d u16[1];                             // Word \u7c7b\u578b 2\u4e2a\u5b57\u8282\n    obj.dwCode2 \x3d u32[2];                               // LongWord 4\u4e2a\u5b57\u8282\n    obj.dwCrc \x3d u32[3];                                 // LongWord 4\u4e2a\u5b57\u8282\n    obj.nLength \x3d u32[4];                               // Integer 4\u4e2a\u5b57\u8282\n    return obj;\n};\n\n//\u5408\u5e76arraybuffer\nfunction addArrayBuffer(...arrays){\n    var totalLength \x3d 0;\n    for(var arr of arrays){\n        totalLength +\x3d arr.length;\n    }\n    var result \x3d new Uint8Array(totalLength);\n    var offset \x3d 0;\n    for(var arr1 of arrays){\n        result.set(arr1, offset);\n        offset +\x3d arr1.length;\n    }\n    return result;\n}\n\n//\u53d1\u9001\u6d88\u606f\u5e8f\u5217\u5316\u5931\u8d25\nonmessageerror \x3d (e) \x3d\x3e {\n    //\u629b\u51fa\u5f02\u5e38\uff0c\u8ba9\u4e3b\u7ebf\u7a0b\u5904\u7406\n    throw new Error("xlh");\n}\n\n//\u7ed3\u675f\u81ea\u8eab\u7ebf\u7a0b\n// close();\n\n//\u76d1\u542c\u4e3b\u7ebf\u7a0b\u6d88\u606f\nonmessage \x3d (e) \x3d\x3e {\n    \n    var pack0 \x3d new Uint8Array(e.data);\n\n    //\u5408\u5e76\u62c6\u5206\u7684\u5305\n    receiveBuf \x3d addArrayBuffer(receiveBuf, pack0);\n\n    //\u4ee5\u4e0b\u5224\u65ad\u8868\u660e\uff0c\u7f13\u51b2\u533a\u4e2d\u53ef\u80fd\u6709\u4e86\u4e00\u4e2a\u53ef\u4ee5\u5904\u7406\u7684\u5305\n    if(receiveBuf.length \x3e SOCKETHEADERSIZE)\n    {                \n        while(1)\n        {                        \n            var pMsg \x3d new TSocketHeader(receiveBuf.buffer);                      \n            \n            if((pMsg.dwCode1 \x3d\x3d RUNGATECODE) \x26\x26 (pMsg.dwCode2 \x3d\x3d RUNGATECODEX)){\n                //\u7f13\u51b2\u533a\u6700\u524d\u8fb9\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u5305\u5934\u6570\u636e\u5757\n\n                //\u4ee5\u4e0b\u5224\u65ad\u8868\u660e\uff0c\u6570\u636e\u8fd8\u6ca1\u6709\u63a5\u6536\u5b8c\uff0c\u8981\u9000\u51fa\u53bb\u7ee7\u7eed\u63a5\u6536\u5305\n                if((pMsg.nLength + SOCKETHEADERSIZE) \x3e receiveBuf.length){\n                    break;\n                }\n\n                //\u628a\u5305\u4f53\u63d0\u53d6\u51fa\u6765\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u5904\u7406    \n                var msgBuff \x3d receiveBuf.slice(SOCKETHEADERSIZE, pMsg.nLength + SOCKETHEADERSIZE);\n                //\u6b65\u9aa41.\u5982\u679c\u662f\u538b\u7f29\u7684\u5305\u4f53\uff0c\u6821\u9a8c\u4e0bCRC\n                if(pMsg.wIdent \x3d\x3d CGM_COMPDATA){\n                    if(pMsg.dwCrc !\x3d Crc32(msgBuff, msgBuff.length)) {\n                        //\u8fd9\u4e2a\u5904\u7406\u6709\u70b9\u8d39\u89e3\uff0cCRC\u90fd\u5931\u8d25\u4e86\uff0c\u5e94\u8be5\u6254\u6389\u8fd9\u6bb5\u5305\uff0c\u800c\u4e0d\u662f\u628a\u6570\u636e\u4e00\u70b9\u4e00\u70b9\u524d\u79fb\n                        receiveBuf \x3d receiveBuf.slice(1);\n                        if(receiveBuf.length \x3c SOCKETHEADERSIZE)\n                            break;\n\n                        continue;\n                    }\n                }\n                //\u6b65\u9aa42.CRC\u901a\u8fc7\uff0c\u4ece\u5305\u4e2d\u53d6\u51fa\u6d88\u606f\n                //\u53d1\u9001\u6d88\u606f\u7ed9\u4e3b\u7ebf\u7a0b\n                postMessage({pMsg:pMsg, msgBuff:msgBuff, length:msgBuff.length})\n                //\u6b65\u9aa43.\u4ece\u7f13\u51b2\u533a\u4e2d\u53bb\u6389\u8fd9\u6bb5\u5305\n                receiveBuf \x3d receiveBuf.slice(SOCKETHEADERSIZE + pMsg.nLength);\n\n            }else{\n                //\u7f13\u51b2\u533a\u6700\u524d\u8fb9\u4e0d\u662f\u5b8c\u6574\u7684\u5305\u5934\u6570\u636e\u5757\uff0c\u5f88\u53ef\u80fd\u662f\u5783\u573e\u6570\u636e\uff0c\u8981\u53bb\u6389\n                receiveBuf \x3d receiveBuf.slice(1);\n            }\n\n            if(receiveBuf.length \x3c SOCKETHEADERSIZE)\n                break;\n\n        } \n    }\n}\n\n',B64=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47];function Base64Encode(b,c){for(var a=[],d=0,e=0,g=1;g<=Math.floor(c/3);g++)a[d+0]=B64[b[e]>>>2],a[d+1]=B64[((b[e]&3)<<4)+(b[e+1]>>>4)],a[d+2]=B64[((b[e+1]&15)<<2)+(b[e+2]>>>6)],a[d+3]=B64[b[e+2]&63],d+=4,e+=3;switch(c%3){case 1:a[d+0]=B64[b[e]>>>2];a[d+1]=B64[(b[e]&3)<<4];a[d+2]=61;a[d+3]=61;break;case 2:a[d+0]=B64[b[e]>>>2],a[d+1]=B64[((b[e]&3)<<4)+(b[e+1]>>>4)],a[d+2]=B64[(b[e+1]&15)<<2],a[d+3]=61}return{arr:a,len:4*Math.floor((c+2)/3)}}function Base64Decode(b,c){for(var a=0,d=0,e=[0,0,0,0],g=[],f=0,h=1;h<=c/4;h++){for(f=0;3>=f;f++)65<=b[a]&&90>=b[a]?e[f]=b[a]-65:97<=b[a]&&122>=b[a]?e[f]=b[a]-97+26:48<=b[a]&&57>=b[a]?e[f]=b[a]-48+52:43==b[a]?e[f]=62:47==b[a]?e[f]=63:61==b[a]&&(e[f]=255),a++;g[d]=(e[0]<<2|e[1]>>>4)&255;f=d+1;255!=e[2]&&255==e[3]?(g[d+1]=(e[1]<<4|e[2]>>>2)&255,f=d+2,d++):255!=e[2]&&(g[d+1]=(e[1]<<4|e[2]>>>2)&255,g[d+2]=(e[2]<<6|e[3])&255,f=d+3,d+=2);d++}return{arr:g,len:f}}var RoleScene=function(b){function c(){c.__super.call(this);this.size(230,30);this.role_panel=new Laya.Panel;this.role_panel.size(270,30);this.addChild(this.role_panel);this.role_kuang=new Laya.Image;this.role_kuang.skin="gameres/png/role_editor_skill_item_bg2.png";this.role_kuang.size(270,30);this.role_kuang.visible=!1;this.role_panel.addChild(this.role_kuang);this.lb_name=new Laya.Text;this.lb_name.color="#ffffff";this.lb_name.fontSize=18;this.lb_name.size(115,25);this.lb_name.align="center";this.lb_name.valign="middle";this.lb_name.pos(0,2);this.role_panel.addChild(this.lb_name);this.lb_sex=new Laya.Text;this.lb_sex.color="#ffffff";this.lb_sex.fontSize=18;this.lb_sex.size(45,25);this.lb_sex.align="center";this.lb_sex.valign="middle";this.lb_sex.pos(122,2);this.role_panel.addChild(this.lb_sex);this.lb_lvl=new Laya.Text;this.lb_lvl.color="#ffffff";this.lb_lvl.fontSize=18;this.lb_lvl.size(45,25);this.lb_lvl.align="center";this.lb_lvl.valign="middle";this.lb_lvl.pos(170,2);this.role_panel.addChild(this.lb_lvl);this.lb_job=new Laya.Text;this.lb_job.color="#ffffff";this.lb_job.fontSize=18;this.lb_job.size(45,25);this.lb_job.align="center";this.lb_job.valign="middle";this.lb_job.pos(217,2);this.role_panel.addChild(this.lb_job);this.settxt=function(a){this.lb_name.text=a.sChrName;this.lb_sex.text=a.btSex?"\u5973":"\u7537";this.lb_lvl.text=""+a.nLevel;this.lb_job.text=GameUtil.getJobName(a.btJob)}}function a(){a.__super.call(this);this.init()}Laya["class"](c,"recoverylist",Laya.Box);Laya["class"](a,"RoleScene",b);b=a.prototype;b.init=function(){GameUtil.clearResByUrl("gameres/png/login_bg.png");Laya.loader.clearRes("gameres/png/00733.png");this.isCreateSubmit=0;verify_through=!0;this.sex=this.job=0;this.recoveryrole=null;this.btn_start.mouseEnabled=!1;this.img_start.visible=!0;this.img_start.height=62;this.SelectIndex=-1;Laya.stage.on(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.on(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);Laya.stage.on(Laya.Event.RESIZE,this,this.changeSize);this.btn_s1.on(Laya.Event.CLICK,this,this.onselect1);this.btn_s2.on(Laya.Event.CLICK,this,this.onselect2);this.btn_dr.on(Laya.Event.CLICK,this,this.ondelrole);this.btn_del_ok.on(Laya.Event.CLICK,this,this.ondelok);this.btn_del_qx.on(Laya.Event.CLICK,this,this.ondelqx);this.btn_cr.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_zs.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_fs.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_ds.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_sj.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_qx.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_ok.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_nan.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_c_nv.on(Laya.Event.CLICK,this,this.oncreaterole);this.btn_rr.on(Laya.Event.CLICK,this,this.onrecovery);this.btn_hf_ok.on(Laya.Event.CLICK,this,this.onrecovery);this.btn_hf_qx.on(Laya.Event.CLICK,this,this.onrecovery);this.btn_start.on(Laya.Event.CLICK,this,this.onstart);this.Random.on(Laya.Event.CLICK,this,this.RandomName);this.jobInVersion=this.getJobInVersion();1!=g_serverconfig.nJobmode&&(this.btn_c_fs.visible=!1,this.btn_c_ds.visible=!1,this.btn_c_sj.visible=!1,this.btn_c_nv.visible=!1,this.btn_c_nan.visible=!1,0==g_serverconfig.nJobmode?(this.btn_c_nan.visible=!0,this.btn_c_zs.pos(132,194),this.btn_c_nan.pos(132,302)):2==g_serverconfig.nJobmode?(this.btn_c_nv.visible=!0,this.btn_c_zs.pos(132,194),this.btn_c_nv.pos(132,302)):3==g_serverconfig.nJobmode&&(this.btn_c_nv.visible=!0,this.btn_c_nan.visible=!0,this.btn_c_zs.pos(132,194)));Laya.SoundManager.useAudioMusic=!1;GameUtil.PlayMusicFormat(S_SELECTROLE);console.log("--rolescene-init-");this.changeSize();this.lb_ServerName.text=g_Server_Name;this.box_l.on(Laya.Event.CLICK,this,this.onselect1);this.box_r.on(Laya.Event.CLICK,this,this.onselect2);this.submit_btn.on(Laya.Event.CLICK,this,this.returnSelectServerListWin)};b.getJobInVersion=function(){return 0==g_serverconfig.nJobmode?1:2==g_serverconfig.nJobmode?2:3==g_serverconfig.nJobmode?3:4};b.returnSelectServerListWin=function(){Laya.Browser.window.location.reload()};b.changeSize=function(){Laya.stage.getChildByName("health_hint")};b.getParamFromLogin=function(a){msgFromLogin=a;Sendmessage.connectRoleSvr(GAME_IP,parseInt(msgFromLogin[1]))};b.onSvrConnect=function(){var a=msgFromLogin[3].toLowerCase(),b=msgFromLogin[2];(a,b)&&Sendmessage.sendQueryRole(a,b)};b.onMsgFromSvr=function(a){if("!"===a[a.length-1]){a=a.substring(0,a.length-1);var b=a.substring(0,16);a=a.substring(16,a.length);var b=DecodeMessage(b),c=DecodeString(a);switch(b.ident){case SM_OUTOFCONNECTION:this.onOutOfConnectResult();break;case SM_QUERYCHR:this.onQueryRoleResult(c);this.isCreateSubmit?(1==this.isCreateSubmit?this.onselect1():this.onselect2(),this.isCreateSubmit=0,this.onstart()):this.popCreateRoleWinHandle();break;case SM_QUERYCHR_FAIL:this.onQueryRoleFailResult();break;case SM_NEWCHR_SUCCESS:E_NewRoleName=g_tempName;E_NewRoleTime=parseInt(new Date/1E3);this.onSvrConnect();g_LogSocket.AddGameDataLog(519,Laya.LocalStorage.getItem("username"),0,g_tempJob,g_tempName);break;case SM_NEWCHR_FAIL:this.onCreateRoleFailResult(b.record);break;case SM_DELCHR_SUCCESS:this.onSvrConnect();break;case SM_DELCHR_FAIL:this.onDeleteRoleFailResult(b.record,b.param);break;case SM_QUERYDELCHR:this.onQueryDelCHRSuccResult(a);break;case SM_GETBAKCHAR_SUCCESS:this.onSvrConnect();break;case SM_GETBAKCHAR_FAIL:this.onGetBackRoleFailResult(b.record,b.Series);break;case SM_STARTPLAY:this.onStartGameResult(c);break;case SM_STARTFAIL:this.onStartGameFail()}}};b.onOutOfConnectResult=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u8d85\u65f6\uff01",callfn:function(){}}])};b.callback=function(){if(0==this.selecttype){var a=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),0);if(a){a=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",a.start,a.start+a.total-1,150,!0,!1);a.name="curani1";a.scale(.7,.7);var b=this;setTimeout(function(){b.box_l.removeChildByName("curani2")},150)}}else if(a=this.getroledata(parseInt(this.strs[6]),parseInt(this.strs[9]),0))a=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",a.start,a.start+a.total-1,150,!0,!1),a.name="curani1",a.scale(.7,.7),b=this,setTimeout(function(){b.box_r.removeChildByName("curani2")},150);this.btn_s1.mouseEnabled=!0;this.btn_s2.mouseEnabled=!0;this.box_l.mouseEnabled=!0;this.box_r.mouseEnabled=!0};b.onselect1=function(){if(2==this.left_state){this.selecttype=0;var a=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),1);if(a){a=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",a.start,a.start+a.total-1,120,!1,!0,null,this,this.callback);a.name="curani2";a.scale(.7,.7);this.left_state=1;var b=this;setTimeout(function(){b.box_l.removeChildByName("curani0")},120)}1==this.right_state&&(a=this.getroledata(parseInt(this.strs[6]),parseInt(this.strs[9]),1))&&(a=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",a.start,a.start+a.total-1,120,!1,!1,null,null,null,!0),a.name="curani2",a.scale(.7,.7),this.right_state=2,b=this,setTimeout(function(){b.box_r.removeChildByName("curani1")},120));a=Animationmodule.playframe(!0,this.box_l,"data/chrsel/",4,17,100,!1,!0);a.scale(.7,.7);GameUtil.PlayMusicFormat(S_BUTTON_1);GameUtil.PlayMusicFormat(S_SELECTHOAL);this.btn_s2.mouseEnabled=!1;this.box_r.mouseEnabled=!1}};b.onselect2=function(){if(2==this.right_state){this.selecttype=1;var a=this.getroledata(parseInt(this.strs[6]),parseInt(this.strs[9]),1);if(a){a=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",a.start,a.start+a.total-1,120,!1,!0,null,this,this.callback);a.name="curani2";a.scale(.7,.7);this.right_state=1;var b=this;setTimeout(function(){b.box_r.removeChildByName("curani0")},120)}1==this.left_state&&(a=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),1))&&(a=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",a.start,a.start+a.total-1,120,!1,!1,null,null,null,!0),a.name="curani2",a.scale(.7,.7),this.left_state=2,b=this,setTimeout(function(){b.box_l.removeChildByName("curani1")},120));a=Animationmodule.playframe(!0,this.box_r,"data/chrsel/",4,17,100,!1,!0);a.scale(.7,.7);GameUtil.PlayMusicFormat(S_BUTTON_1);GameUtil.PlayMusicFormat(S_SELECTHOAL);this.btn_s1.mouseEnabled=!1;this.box_l.mouseEnabled=!1}};b.onQueryRoleResult=function(a){if(""==a)this.lb_name1.text="",this.lb_job1.text="",this.lb_lvl1.text="",this.lb_name2.text="",this.lb_job2.text="",this.lb_lvl2.text="",this.box_l.removeChildren(),this.box_r.removeChildren(),a=Laya.stage.getChildByName("CreateRole"),null==a&&(a=new Laya.Point(77,27),a=Animationmodule.playframe(!1,this.btn_cr,"gameres/animation/createrole/",1,8,100,!0,!1,a),a.name="CreateRole");else{"/"==a.substr(a.length-1,1)&&(a=a.substr(0,a.length-1));this.strs=a.split("/");this.lb_name1.text=this.strs[0]?this.strs[0]:"";this.lb_job1.text=this.strs[1]?GameUtil.getJobName(parseInt(this.strs[1])):"";this.lb_lvl1.text=this.strs[3]?this.strs[3]:"";this.lb_name2.text=this.strs[5]?this.strs[5]:"";this.lb_job2.text=this.strs[6]?GameUtil.getJobName(parseInt(this.strs[6])):"";this.lb_lvl2.text=this.strs[8]?this.strs[8]:"";this.box_l.removeChildren();this.box_r.removeChildren();this.left_state=0;if(""!=this.lb_name1.text)if("*"==this.lb_name1.text.substr(0,1)||""==this.lb_name2.text||"*"!=this.lb_name1.text.substr(0,1)&&"*"!=this.lb_name2.text.substr(0,1)){if(this.selecttype=0,"*"==this.lb_name1.text.substr(0,1)&&(this.lb_name1.text=this.strs[0].substr(1,this.strs[0].length)),a=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),0))a=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",a.start,a.start+a.total-1,150,!0,!1),a.name="curani1",a.scale(.7,.7),this.left_state=1}else if(a=this.getroledata(parseInt(this.strs[1]),parseInt(this.strs[4]),1))a=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",a.start,a.start,150,!0,!1),a.name="curani0",a.scale(.7,.7),this.left_state=2;this.right_state=0;if(""!=this.lb_name2.text)if("*"==this.lb_name2.text.substr(0,1)){if(this.selecttype=1,this.lb_name2.text=this.strs[5].substr(1,this.strs[5].length),a=this.getroledata(parseInt(this.strs[6]),parseInt(this.strs[9]),0))a=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",a.start,a.start+a.total-1,150,!0,!1),a.name="curani1",a.scale(.7,.7),this.right_state=1}else if(a=this.getroledata(parseInt(this.strs[6]),parseInt(this.strs[9]),1))a=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",a.start,a.start,150,!0,!1),a.name="curani0",a.scale(.7,.7),this.right_state=2;Laya.Tween.to(this.img_start,{height:0},2E3,null,Laya.Handler.create(this,this.ShowStart,[this.btn_start,this.img_start]))}};b.ShowStart=function(a,b){a.mouseEnabled=!0;b.visible=!1};b.RandomName=function(){if(firstName&&lastName){var a=parseInt(Math.random()*firstName.length),b=parseInt(Math.random()*lastName.length);""!=firstName[a]&&""!=lastName[b]&&(this.tex_name.text=firstName[a]+lastName[b])}};b.getroledata=function(a,b,c){if(role_json)for(var f=0;f<role_json.length;++f)if(role_json[f].job==a&&role_json[f].sex==b&&role_json[f].state==c)return role_json[f];return null};b.ondelrole=function(){if(""!==this.lb_name1.text||""!==this.lb_name2.text){var a="";this.selecttype?a=this.lb_name2.text:a=this.lb_name1.text;this.lb_del.text=a+" \u662f\u5426\u786e\u8ba4\u5220\u9664\u6b64\u6e38\u620f\u89d2\u8272\uff1f";this.img_del.centerX=0;this.img_del.centerY=0;this.img_del.visible=!0;GameUtil.PlayMusicFormat(S_BUTTON_1)}};b.ondelqx=function(){this.img_del.visible=!1};b.ondelok=function(){var a="";this.selecttype?a=this.lb_name2.text:a=this.lb_name1.text;Sendmessage.sendDeleteRole(a);this.img_del.visible=!1};b.onQueryRoleFailResult=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u67e5\u8be2\u89d2\u8272\u5931\u8d25\uff01",callfn:function(){}}])};b.onDeleteRoleFailResult=function(a,b){switch(a){case -1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u5929\u5185\u53ea\u80fd\u5220\u9664"+b+"\u4e2a\u89d2\u8272\uff01",callfn:function(){}}]);break;case -2:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u5220\u9664\u6e38\u620f\u89d2\u8272\uff01",callfn:function(){}}]);break;case -3:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u5220\u9664\u6e38\u620f\u89d2\u8272\uff01",callfn:function(){}}]);break;default:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5220\u9664\u6e38\u620f\u89d2\u8272\u65f6\u51fa\u73b0\u9519\u8bef\uff01",callfn:function(){}}])}};b.popCreateRoleWinHandle=function(){""==this.lb_name1.text&&""==this.lb_name2.text&&this.popCreateRoleWin()};b.getFinalJob=function(){return 1==this.jobInVersion||2==this.jobInVersion||3==this.jobInVersion?0:Math.floor(3*Math.random())};b.getFinalSex=function(){return 1==this.jobInVersion||2==this.jobInVersion?0:Math.floor(2*Math.random())};b.popCreateRoleWin=function(){this.img_create.visible=!0;this.RandomName();this.job=this.getFinalJob();this.sex=this.getFinalSex();this.setShowBtn(this.job,this.sex);2==g_serverconfig.nJobmode&&(this.sex=1);if(""==this.lb_name1.text){this.img_create.x=642;this.img_create.y=-17;this.box_l.removeChildren();var a=this.getroledata(this.job,this.sex,0);a&&(a=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",a.start,a.start+a.total-1,150,!0,!1),a.scale(.7,.7))}else if(this.img_create.x=185,this.img_create.y=-17,this.box_r.removeChildren(),a=this.getroledata(this.job,this.sex,0))a=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",a.start,a.start+a.total-1,150,!0,!1),a.scale(.7,.7)};b.setShowBtn=function(a,b){this.btn_c_nan.selected=0==b;this.btn_c_nv.selected=!this.btn_c_nan.selected;this.btn_c_zs.selected=0==a;this.btn_c_fs.selected=1==a;this.btn_c_ds.selected=2==a};b.oncreaterole=function(a){a=a.target.name;if("btn_cr"==a)""!=this.lb_name2.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u4e2a\u8d26\u53f7\u6700\u591a\u53ea\u80fd\u521b\u5efa\u4e8c\u4e2a\u6e38\u620f\u89d2\u8272\uff01",callfn:function(){}}]):this.popCreateRoleWin();else if("btn_c_qx"==a)""!==this.lb_name1.text?this.box_r.removeChildren():this.box_l.removeChildren(),this.img_create.visible=!1,this.tex_name.text="",this.btn_c_zs.selected=!1,this.btn_c_fs.selected=!1,this.btn_c_ds.selected=!1,this.btn_c_nv.selected=!1,this.btn_c_nan.selected=!1;else if("btn_c_ok"==a)""!=this.tex_name.text&&(Sendmessage.sendNewRole(msgFromLogin[3].toLowerCase(),this.tex_name.text,1,this.job,this.sex),this.img_create.visible=!1,this.btn_cr.removeChildByName("CreateRole"),this.isCreateSubmit=""==this.lb_name1.text?1:2),this.btn_c_zs.selected=!1,this.btn_c_fs.selected=!1,this.btn_c_ds.selected=!1,this.btn_c_nv.selected=!1,this.btn_c_nan.selected=!1;else{"btn_c_zs"==a?(this.btn_c_fs.selected=!1,this.btn_c_ds.selected=!1,this.job=0,this.btn_c_zs.selected=!0):"btn_c_fs"==a?(this.btn_c_zs.selected=!1,this.btn_c_ds.selected=!1,this.job=1,this.btn_c_fs.selected=!0):"btn_c_ds"==a?(this.btn_c_zs.selected=!1,this.btn_c_fs.selected=!1,this.job=2,this.btn_c_ds.selected=!0):"btn_c_nan"==a?(this.sex=0,this.btn_c_nan.selected=!0,this.btn_c_nv.selected=!1):"btn_c_nv"==a?(this.sex=1,this.btn_c_nv.selected=!0,this.btn_c_nan.selected=!1):"btn_c_sj"==a&&(this.job=Math.floor(3*Math.random()),this.sex=Math.floor(2*Math.random()),this.btn_c_zs.selected=!1,this.btn_c_fs.selected=!1,this.btn_c_ds.selected=!1,this.btn_c_nv.selected=!1,this.btn_c_nan.selected=!1);if(""==this.lb_name1.text){if(this.box_l.removeChildren(),a=this.getroledata(this.job,this.sex,0))a=Animationmodule.playframe(!1,this.box_l,"data/chrsel/",a.start,a.start+a.total-1,150,!0,!1),a.scale(.7,.7)}else if(this.box_r.removeChildren(),a=this.getroledata(this.job,this.sex,0))a=Animationmodule.playframe(!1,this.box_r,"data/chrsel/",a.start,a.start+a.total-1,150,!0,!1),a.scale(.7,.7);GameUtil.PlayMusicFormat(S_BUTTON_1)}};b.onCreateRoleFailResult=function(a){0==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8f93\u5165\u7684\u89d2\u8272\u540d\u5305\u542b\u975e\u6cd5\u5b57\u7b26\uff01",callfn:function(){}}]):2==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u89d2\u8272\u540d\u79f0\u5df2\u88ab\u5176\u4ed6\u4eba\u4f7f\u7528\uff01",callfn:function(){}}]):3==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u60a8\u53ea\u80fd\u521b\u5efa\u4e24\u4e2a\u6e38\u620f\u89d2\u8272\uff01",callfn:function(){}}]):4==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u89d2\u8272\u65f6\u51fa\u73b0\u9519\u8bef\uff01",callfn:function(){}}]):5==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u521b\u5efa\u65b0\u89d2\u8272\uff01",callfn:function(){}}]):6==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u5efa\u7acb\u5305\u542b\u6570\u5b57\u7684\u89d2\u8272\u540d\uff01",callfn:function(){}}]):7==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u5efa\u7acb\u5168\u82f1\u6587\u7684\u89d2\u8272\u540d\uff01",callfn:function(){}}]):100==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5206\u533a\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):101==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff01",callfn:function(){}}]):102==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620fID\u65e0\u6548\uff01",callfn:function(){}}]):103==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e20\u9053\u65e0\u6548\uff01",callfn:function(){}}]):104==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7ec8\u7aef\u65e0\u6548\uff01",callfn:function(){}}]):105==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"Mac\u65e0\u6548\uff01",callfn:function(){}}]):106==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"IP\u65e0\u6548\uff01",callfn:function(){}}]):201==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u89d2\u8272\u521b\u5efa\u4e2d,\u8bf7\u7b49\u5f85\uff01",callfn:function(){}}]):202==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u52ff\u91cd\u590d\u521b\u5efa\u76f8\u540c\u89d2\u8272\u540d\uff01",callfn:function(){}}]):203==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6570\u636e\u5e93\u7c7b\u578b\u9519\u8bef,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01",callfn:function(){}}]):204==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u672a\u67e5\u627e\u5230\u89d2\u8272\u521b\u5efa\u7f13\u5b58\u4fe1\u606f\uff01",callfn:function(){}}]):205==a?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u63d2\u5165\u65b0\u5efa\u89d2\u8272\u6570\u636e\u5931\u8d25\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521b\u5efa\u89d2\u8272\u5931\u8d25\uff01",callfn:function(){}}]);""==this.lb_name1.text?this.box_l.removeChildren():this.box_r.removeChildren()};b.onrecovery=function(a){this.btn_cr.removeChildByName("CreateRole");a=a.target.name;"btn_rr"==a?(Sendmessage.sendQueryDeleteChr(msgFromLogin[3].toLowerCase()),this.img_hf.visible=!0):"btn_hf_ok"==a?(this.recoveryrole&&Sendmessage.sendGetBackBeleteChr(msgFromLogin[3].toLowerCase(),this.recoveryrole),this.img_hf.visible=!1):"btn_hf_qx"==a&&(this.img_hf.visible=!1);GameUtil.PlayMusicFormat(S_BUTTON_1);this.SelectIndex=-1};b.onQueryDelCHRSuccResult=function(a){var b=[];a=a.split("/");a.pop();for(i in a){var g=fnDecode6BitBuf(a[i],a[i].length,!1),g=TDeleteHumanInfo(g.pszDest);b.push(g)}this.rolelist.itemRender=c;this.rolelist.repeatX=1;this.rolelist.repeatY=10;this.rolelist.vScrollBarSkin="";this.rolelist.selectEnable=!0;this.rolelist.renderHandler=new Laya.Handler(this,this.updateitem);this.rolelist.selectHandler=new Laya.Handler(this,this.select);this.rolelist.array=b};b.updateitem=function(a,b){a.settxt(a.dataSource);this.SelectIndex==b?(a.lb_name.color="#ff0000",a.lb_sex.color="#ff0000",a.lb_job.color="#ff0000",a.lb_lvl.color="#ff0000",a.role_kuang.visible=!0,this.recoveryrole=a.lb_name.text):(a.lb_name.color="#ffffff",a.lb_sex.color="#ffffff",a.lb_job.color="#ffffff",a.lb_lvl.color="#ffffff",a.role_kuang.visible=!1)};b.select=function(a){this.SelectIndex=a};b.onGetBackRoleFailResult=function(a,b){switch(a){case -1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u4e2a\u8d26\u6237\u53ea\u80fd\u67092\u4e2a\u89d2\u8272\uff01",callfn:function(){}}]);break;case -2:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7981\u6b62\u627e\u56de\u4eba\u7269!",callfn:function(){}}]);break;default:Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u627e\u56de\u4eba\u7269\u5931\u8d25\uff01",callfn:function(){}}])}};b.onstart=function(){var a=Laya.stage.getChildByName("bj_sprite");a&&a.removeSelf();""==this.lb_name1.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u9009\u62e9\u8981\u4f7f\u7528\u7684\u89d2\u8272!",callfn:function(){}}]):(a="",this.selecttype?a=this.lb_name2.text:a=this.lb_name1.text,Sendmessage.sendSelectRole(msgFromLogin[3].toLowerCase(),a),Laya.loader.clearRes("json/firstname.txt"),Laya.loader.clearRes("json/lastname.txt"))};b.clearlogres=function(){Laya.loader.clearRes("gameres/png/hfkuang.png");Laya.loader.clearRes("gameres/png/rolescene_00702.png");Laya.loader.clearRes("gameres/png/rolescene_bg.png")};b.onStartGameResult=function(a){GameUtil.PlayMusicFormat(S_BUTTON_1);a=a.split("/");var b=a[0],c=a[1],f="";this.selecttype?f=this.lb_name2.text:f=this.lb_name1.text;a=0;this.selecttype?a=this.lb_lvl2.text:a=this.lb_lvl1.text;g_playerName=g_RoleName=g_RoleNameOnly=f;g_levelForCaiji=a;for(var h=msgFromLogin[2],l=msgFromLogin[3].toLowerCase(),b={ip:b,port:c,code:h,name:f,uid:l},c=!0,h=0;h<Laya.stage._childs.length;++h)Laya.stage._childs[h]instanceof GameScene&&(c=!1);(h=Laya.stage.getChildByName("bj_sprite"))&&h.removeSelf();if(c){var m=function(a){1<=q&&(a.progressBar.visible=!1,a.lb_tip.visible=!1,Laya.timer.clear(this,m),a.removeSelf(),GameUtil.clearResByUrl(f),n.visible=!0,Laya.SoundManager.soundVolume=GlobalCfglist.gameVoice?GlobalCfglist.gameVoice/100:.5,Laya.loader.clearRes(S_SELECTROLE),Laya.stage.event("gameLoadSuccess"),Laya.stage.event("switchRocker"),GameApi.syncDelayShow());a.progressBar.value=q+=.05;a.barNum.text=parseInt(100*a.progressBar.value)+"%"};Laya.SoundManager.stopAll();Laya.SoundManager.soundVolume=0;Mapmodule.cur_x=0;Mapmodule.cur_y=0;Mapmodule.sceneid=0;c=new health_hintUI;Laya.stage.addChild(c);var n=new GameScene;n.getDataForRoleScene(b);Laya.stage.addChild(n);n.visible=!1;c.btn_ok.visible=!1;f="gameres/png/hint_00"+Math.floor(4*Math.random())+".png";c.img_bg.skin=f;c.zOrder=999999;var q=.1;Laya.timer.loop(100,this,m,[c]);c.progressBar.value=.1}Laya.stage.off(RECEIVE_ONMESSAGEFROMSERVER,this,this.onMsgFromSvr);Laya.stage.off(CUSTOM_EVENT_SERVERCONNECT,this,this.onSvrConnect);this.box_l.off(Laya.Event.CLICK,this,this.onselect1);this.box_r.off(Laya.Event.CLICK,this,this.onselect2);Animationmodule.clearAniCacheAssets();this.clearlogres();this.removeSelf();getinfoforsdk(g_RoleName,a,"1",g_ServerName);isWebForYYY()&&(a=function(a){console.log(a)},gameClient.clientAction.saveRole({roleName:g_RoleName,level:Number(g_levelForCaiji),isNew:!1,onSuccess:a,onCancel:a}));Laya.LocalStorage.setItem("g_RoleName",g_RoleName)};b.onStartGameFail=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f00\u59cb\u6e38\u620f\u5931\u8d25!",callfn:function(){}}])};return a}(RoleSceneUI);function GetKey(){return(Math.round(100*Math.random())%58<<24)+(Math.round(100*Math.random())%58<<16)+(Math.round(100*Math.random())%58<<8)+Math.round(100*Math.random())%58>>>0}function GetKeyValue(b){var c=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,60,61,62,64,91,92,93],a=0,d=0,e=0,a=(b&4278190080)>>>24,d=(b&16711680)>>>16,e=(b&65280)>>>8;return String.fromCharCode(c[(b&255)>>>0])+String.fromCharCode(c[e])+String.fromCharCode(c[d])+String.fromCharCode(c[a])}function GetAdapterMac(){for(var b="",c="0123456789ABCDEF".split(""),a=0,d=0;12>d;d++)a=Math.round(100*Math.random())%16,b+=c[a];return b}function encryBuffer(b,c){var a=GetKeyValue(GetKey()),d=EncryptDes(b,c,a),d=Base64Encode(d,c),d=fnEncode6BitBuf(d.arr,d.len);return a.substr(0,2)+d+a.substr(2,2)}function encryStringK(b,c){var a=string2ByteArray(b),d=EncryptDes(a.arr,a.len,c),a=Base64Encode(d,a.len);return fnEncode6BitBuf(a.arr,a.len)}function Decode6BitBuf(b){for(var c=[0,0,252,248,240,224,192],a=0,d=0,e=0,g=0,f=0,h=0,l=0,g=0,m=[],d=b.length,e=2,a=l=f=g=0;a<d;a++){if(0<=b.charCodeAt(a)-60)h=b.charCodeAt(a)-60;else break;if(8<=g+6)if(g=(l|(h&63)>>6-e)&255,m[f]=g,f++,g=0,6>e)e+=2;else{e=2;continue}l=h<<e&255&c[e]&255;g+=8-e}return m}function decryStringK(b,c){var a=Decode6BitBuf(b),a=Base64Decode(a,a.length);return DecryptDes(a.arr,a.len,c)}function decryString(b){var c="",a=b.length;if(4>=a)return"";c=b.substr(0,2)+b.substr(a-2,2);b=b.substr(2,a-4);b=DecodeString(b);b=string2ByteArray(b);b=Base64Decode(b.arr,b.len);c=DecryptDes(b.arr,b.len,c);return byteArray2String(c,b.len)}var crc_table=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function Crc32(b,c){var a;a=306675199;for(var d=0;8<=c;)a=crc_table[(a^b[d])&255]^a>>>8,d++,a=crc_table[(a^b[d])&255]^a>>>8,d++,a=crc_table[(a^b[d])&255]^a>>>8,d++,a=crc_table[(a^b[d])&255]^a>>>8,d++,a=crc_table[(a^b[d])&255]^a>>>8,d++,a=crc_table[(a^b[d])&255]^a>>>8,d++,a=crc_table[(a^b[d])&255]^a>>>8,d++,a=crc_table[(a^b[d])&255]^a>>>8,d++,c-=8;if(0!=c){do a=crc_table[(a^b[d])&255]^a>>>8,d++,c--;while(0!=c)}return(a^4294967295)>>>0}function _TDEFAULTMESSAGE(b,c,a,d,e){var g={};g.record=c;g.ident=b;g.param=a;g.tag=d;g.series=e;return g}function _TSHORTMSSEAGE(b,c){var a={};a.ident=b;a.msg=c;return a}function _PACKETMSG(b,c){var a={};a.msg=b;a.content=c;return a}function _TMSGHEADER(b,c,a,d,e,g){var f={};f.code=b;f.socket=c;f.userGateIdx=a;f.ident=d;f.temp=e;f.length=g;return f}function EncodeMessage(b){var c=[];c[0]=b.record&255;c[1]=(b.record&65280)>>>8;c[2]=(b.record&16711680)>>>16;c[3]=(b.record&4278190080)>>>24;c[4]=b.ident&255;c[5]=(b.ident&65280)>>>8;c[6]=b.param&255;c[7]=(b.param&65280)>>>8;c[8]=b.tag&255;c[9]=(b.tag&65280)>>>8;c[10]=b.series&255;c[11]=(b.series&65280)>>>8;return fnEncode6BitBuf(c,12)}function zEncodeString(b){var c="";""!=b&&(b=string2ByteArray(b),c=(new Zlib.Deflate(b)).compress(),b=c.length,c=Array.from(c),c=fnEncode6BitBuf(c,b));return c}function zDecodeString(b){var c="";if(""!=b){b=string2ByteArray(b);b=fnDecode6BitBuf(b.arr,b.len,!1);b=(new Zlib.Inflate(b.pszDest)).decompress();for(var a=c=0,d=[];c<b.length;)128>b[c]?d[a]=b[c]:(d[a]=getUcsByGbkAsc((b[c]<<8)+b[c+1]),c++),c++,a++;return c=byteArray2String(d,d.length)}}function zDecode2String(b){return""!=b?(b=string2ByteArray(b),b=fnDecode6BitBuf(b.arr,b.len,!1),(new Zlib.Inflate(b.pszDest)).decompress()):null}function DecodeMessage(b){b=fnDecode6BitBuf(b,16,!1);var c=-1,a=-1,d=-1,e=-1,g=-1,c=b.pszDest[0]+(b.pszDest[1]<<8)+(b.pszDest[2]<<16)+(b.pszDest[3]<<24),a=b.pszDest[4]+(b.pszDest[5]<<8),d=b.pszDest[6]+(b.pszDest[7]<<8),e=b.pszDest[8]+(b.pszDest[9]<<8),g=b.pszDest[10]+(b.pszDest[11]<<8);return _TDEFAULTMESSAGE(a,c,d,e,g)}function EncodeString(b){b=ucsstr2gbkarr(b);return fnEncode6BitBuf(b,b.length)}function DecodeString(b){b=fnDecode6BitBuf(b,b.length,!0);for(var c="",a="",d=a=a=0,e=0;e<b.nDestPos;){a=b.pszDest[e].charCodeAt();if(127<a){e++;if(!b.pszDest[e])break;d=b.pszDest[e].charCodeAt();a=(a<<8)+d;d=getUcsByGbkAsc(a);a=String.fromCharCode(d);59337==d&&(a=" ");c+=a}else c+=b.pszDest[e];e++}return c}var Decode6BitMask=[252,248,240,224,192];function fnEncode6BitBuf(b,c){for(var a=0,d=0,e=0,g="",f=0;f<c;f++){var h="number"==typeof b[f]?b[f]:b[f].charCodeAt(),d=(e|h>>2+a)&63,e=h<<8-(2+a)>>2&63,a=a+2;6>a?g+=String.fromCharCode(d+60):(g+=String.fromCharCode(d+60),g+=String.fromCharCode(e+60),e=a=0)}0<a&&(g+=String.fromCharCode(e+60));return g}function fnDecode6BitBuf(b,c,a){for(var d=0,e=2,g=0,f,h,l=[],m=0;m<c&&b[m];m++){f="number"==typeof b[m]?b[m]:b[m].charCodeAt();if(0<=f-60)f-=60;else{d=0;break}if(8<=g+6)if(g=h|(f&63)>>6-e,l[d++]=g,g=0,6>e)e+=2;else{e=2;continue}h=f<<e&Decode6BitMask[e-2];g+=8-e}if(a)for(m=0;m<d;m++)l[m]=0==l[m]?"#0":String.fromCharCode(l[m]);return{pszDest:l,nDestPos:d}}!function(b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):"undefined"!=typeof window?window.JSZipUtils=b():"undefined"!=typeof global?global.JSZipUtils=b():"undefined"!=typeof self&&(self.JSZipUtils=b())}(function(){return function c(a,d,e){function g(h,m){if(!d[h]){if(!a[h]){var n="function"==typeof require&&require;if(!m&&n)return n(h,!0);if(f)return f(h,!0);throw Error("Cannot find module '"+h+"'");}n=d[h]={exports:{}};a[h][0].call(n.exports,function(f){var c=a[h][1][f];return g(c?c:f)},n,n.exports,c,a,d,e)}return d[h].exports}for(var f="function"==typeof require&&require,h=0;h<e.length;h++)g(e[h]);return g}({1:[function(c,a,d){function e(){try{return new window.XMLHttpRequest}catch(a){}}var g={_getBinaryFromXHR:function(a){return a.response||a.responseText}},f=window.ActiveXObject?function(){var a;if(!(a=e()))a:{try{a=new window.ActiveXObject("Microsoft.XMLHTTP");break a}catch(f){}a=void 0}return a}:e;g.getBinaryContent=function(a,c){try{var d=f();d.open("GET",a,!0);"responseType"in d&&(d.responseType="arraybuffer");d.overrideMimeType&&d.overrideMimeType("text/plain; charset\x3dx-user-defined");d.onreadystatechange=function(f){var e;if(4===d.readyState)if(200===d.status||0===d.status){e=f=null;try{f=g._getBinaryFromXHR(d)}catch(p){e=Error(p)}c(e,f)}else c(Error("Ajax error for "+a+" : "+this.status+" "+this.statusText),null)};d.send()}catch(e){c(Error(e),null)}};a.exports=g},{}]},{},[1])(1)});var ColorArray=[0,0,0,0,0,0,128,0,0,128,0,0,0,128,128,0,128,0,0,0,128,0,128,0,128,128,0,0,192,192,192,0,151,128,85,0,200,185,157,0,115,115,123,0,41,41,45,0,82,82,90,0,90,90,99,0,57,57,66,0,24,24,29,0,16,16,24,0,24,24,41,0,8,8,16,0,113,121,242,0,95,103,225,0,90,90,255,0,49,49,255,0,82,90,214,0,0,16,148,0,24,41,148,0,0,8,57,0,0,16,115,0,0,24,181,0,82,99,189,0,16,24,66,0,153,170,255,0,0,16,90,0,41,57,115,0,49,74,165,0,115,123,148,0,49,82,189,0,16,33,82,0,24,49,123,0,16,24,45,0,49,74,140,0,0,41,148,0,0,49,189,0,82,115,198,0,24,49,107,0,66,107,198,0,0,74,206,0,57,99,165,0,24,49,90,0,0,16,42,0,0,8,21,0,0,24,58,0,0,0,8,0,0,0,41,0,0,0,74,0,0,0,157,0,0,0,220,0,0,0,222,0,0,0,251,0,82,115,156,0,74,107,148,0,41,74,115,0,24,49,82,0,24,74,140,0,17,68,136,0,0,33,74,0,16,24,33,0,90,148,214,0,33,107,198,0,0,107,239,0,0,119,255,0,132,148,165,0,33,49,66,0,8,16,24,0,8,24,41,0,0,16,33,0,24,41,57,0,57,99,140,0,16,41,66,0,24,66,107,0,24,74,123,0,0,74,148,0,123,132,140,0,90,99,107,0,57,66,74,0,24,33,41,0,41,57,70,0,148,165,181,0,90,107,123,0,148,177,206,0,115,140,165,0,90,115,140,0,115,148,181,0,115,165,214,0,74,165,239,0,140,198,239,0,66,99,123,0,57,86,107,0,90,148,189,0,0,57,99,0,173,198,214,0,41,66,82,0,24,99,148,0,173,214,239,0,99,140,165,0,74,90,99,0,123,165,189,0,24,66,90,0,49,140,189,0,41,49,53,0,99,132,148,0,74,107,123,0,90,140,165,0,41,74,90,0,57,123,156,0,16,49,66,0,33,173,239,0,0,16,24,0,0,33,41,0,0,107,156,0,90,132,148,0,24,66,82,0,41,90,107,0,33,99,123,0,33,123,156,0,0,165,222,0,57,82,90,0,16,41,49,0,123,189,206,0,57,90,99,0,74,132,148,0,41,165,198,0,24,156,16,0,74,140,66,0,66,140,49,0,41,148,16,0,16,24,8,0,24,24,8,0,16,41,8,0,41,66,24,0,173,181,165,0,115,115,107,0,41,41,24,0,74,66,24,0,74,66,49,0,222,198,99,0,255,221,68,0,239,214,140,0,57,107,115,0,57,222,247,0,140,239,247,0,0,231,247,0,90,107,107,0,165,140,90,0,239,181,57,0,206,156,74,0,181,132,49,0,107,82,49,0,214,222,222,0,181,189,189,0,132,140,140,0,222,247,247,0,24,8,0,0,57,24,8,0,41,16,8,0,0,24,8,0,0,41,8,0,165,82,0,0,222,123,0,0,74,41,16,0,107,57,16,0,140,82,16,0,165,90,33,0,90,49,16,0,132,66,16,0,132,82,49,0,49,33,24,0,123,90,74,0,165,107,82,0,99,57,41,0,222,74,16,0,33,41,41,0,57,74,74,0,24,41,41,0,41,74,74,0,66,123,123,0,74,156,156,0,41,90,90,0,20,66,66,0,0,57,57,0,0,89,89,0,44,53,202,0,33,115,107,0,0,49,41,0,16,57,49,0,24,57,49,0,0,74,66,0,24,99,82,0,41,115,90,0,24,74,49,0,0,33,24,0,0,49,24,0,16,57,24,0,74,132,99,0,74,189,107,0,74,181,99,0,74,189,99,0,74,156,90,0,57,140,74,0,74,198,99,0,74,214,99,0,74,132,82,0,41,115,49,0,90,198,99,0,74,189,82,0,0,255,16,0,24,41,24,0,74,136,74,0,74,231,74,0,0,90,0,0,0,136,0,0,0,148,0,0,0,222,0,0,0,238,0,0,0,251,0,0,148,90,74,0,181,115,99,0,214,140,123,0,214,123,107,0,255,136,119,0,206,198,198,0,156,148,148,0,198,148,156,0,57,49,49,0,132,24,41,0,132,0,24,0,82,66,74,0,123,66,82,0,115,90,99,0,247,181,206,0,156,123,140,0,204,34,119,0,255,170,221,0,42,180,240,0,159,0,223,0,179,23,227,0,240,251,255,0,164,160,160,0,128,128,128,0,0,0,255,0,0,255,0,0,0,255,255,0,255,0,0,0,255,0,255,0,255,255,0,0,255,255,255,0];function GetRGB(b){return 0>b||255<b?0:ColorArray[4*b+2]|ColorArray[4*b+1]<<8|ColorArray[4*b+0]<<16}function GetMatrix(b){if(0>b||255<b)return!1;var c=ColorArray[4*b+0]/255,a=ColorArray[4*b+1]/255;b=ColorArray[4*b+2]/255;return[1*b,0*a,0*c,0,0,0*b,1*a,0*c,0,0,0*b,0*a,1*c,0,0,0*b,0*a,0*c,1,0]}function Get2RGB(b){if(null==b||void 0==b)return"#ffffff";if(0>b||255<b)return 0;var c=ColorArray[4*b+0]?c=GameUtil.getprefixname(ColorArray[4*b+0].toString(16),2):c="00",a=ColorArray[4*b+1]?a=GameUtil.getprefixname(ColorArray[4*b+1].toString(16),2):a="00";b=ColorArray[4*b+2]?b=GameUtil.getprefixname(ColorArray[4*b+2].toString(16),2):b="00";return"#"+b+a+c}function Get3RGB(b){for(var c="",a=b.length-1;0<a;a-=2)c+=b[a-1],c+=b[a];c.length!=b.length&&(c+=b[0]);return c}var hexcase=0,chrsz=8;function hex_sha1(b){return binb2hex(core_sha1(AlignSHA1(b)))}function core_sha1(b){for(var c=Array(80),a=1732584193,d=-271733879,e=-1732584194,g=271733878,f=-1009589776,h=0;h<b.length;h+=16){for(var l=a,m=d,n=e,q=g,p=f,r=0;80>r;r++){c[r]=16>r?b[h+r]:rol(c[r-3]^c[r-8]^c[r-14]^c[r-16],1);var v=safe_add(safe_add(rol(a,5),sha1_ft(r,d,e,g)),safe_add(safe_add(f,c[r]),sha1_kt(r))),f=g,g=e,e=rol(d,30),d=a,a=v}a=safe_add(a,l);d=safe_add(d,m);e=safe_add(e,n);g=safe_add(g,q);f=safe_add(f,p)}return[a,d,e,g,f]}function sha1_ft(b,c,a,d){return 20>b?c&a|~c&d:40>b?c^a^d:60>b?c&a|c&d|a&d:c^a^d}function sha1_kt(b){return 20>b?1518500249:40>b?1859775393:60>b?-1894007588:-899497514}function safe_add(b,c){var a=(b&65535)+(c&65535);return(b>>16)+(c>>16)+(a>>16)<<16|a&65535}function rol(b,c){return b<<c|b>>>32-c}function AlignSHA1(b){for(var c=(b.length+8>>6)+1,a=Array(16*c),d=0;d<16*c;d++)a[d]=0;for(d=0;d<b.length;d++)a[d>>2]|=b.charCodeAt(d)<<24-8*(d&3);a[d>>2]|=128<<24-8*(d&3);a[16*c-1]=8*b.length;return a}function binb2hex(b){for(var c=hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",d=0;d<4*b.length;d++)a+=c.charAt(b[d>>2]>>8*(3-d%4)+4&15)+c.charAt(b[d>>2]>>8*(3-d%4)&15);return a}
var ucs=[[19970,19972,19973,19974,19983,19986,19991,19999,2E4,20001,20003,20006,20009,20014,20015,20017,20019,20021,20023,20028,20032,20033,20034,20036,20038,20042,20049,20053,20055,20058,20059,20066,20067,20068,20069,20071,20072,20074,20075,20076,20077,20078,20079,20082,20084,20085,20086,20087,20088,20089,20090,20091,20092,20093,20095,20096,20097,20098,20099,20100,20101,20103,20106,63,20112,20118,20119,20121,20124,20125,20126,20131,20138,20143,20144,20145,20148,20150,20151,20152,20153,20156,20157,20158,20168,20172,20175,20176,20178,20186,20187,20188,20192,20194,20198,20199,20201,20205,20206,20207,20209,20212,20216,20217,20218,20220,20222,20224,20226,20227,20228,20229,20230,20231,20232,20235,20236,20242,20243,20244,20245,20246,20252,20253,20257,20259,20264,20265,20268,20269,20270,20273,20275,20277,20279,20281,20283,20286,20287,20288,20289,20290,20292,20293,20295,20296,20297,20298,20299,20300,20306,20308,20310,20321,20322,20326,20328,20330,20331,20333,20334,20337,20338,20341,20343,20344,20345,20346,20349,20352,20353,20354,20357,20358,20359,20362,20364,20366,20368,20370,20371,20373,20374,20376,20377,20378,20380,20382,20383,20385,20386],[20388,20395,20397,20400,20401,20402,20403,20404,20406,20407,20408,20409,20410,20411,20412,20413,20414,20416,20417,20418,20422,20423,20424,20425,20427,20428,20429,20434,20435,20436,20437,20438,20441,20443,20448,20450,20452,20453,20455,20459,20460,20464,20466,20468,20469,20470,20471,20473,20475,20476,20477,20479,20480,20481,20482,20483,20484,20485,20486,20487,20488,20489,20490,63,20491,20494,20496,20497,20499,20501,20502,20503,20507,20509,20510,20512,20514,20515,20516,20519,20523,20527,20528,20529,20530,20531,20532,20533,20534,20535,20536,20537,20539,20541,20543,20544,20545,20546,20548,20549,20550,20553,20554,20555,20557,20560,20561,20562,20563,20564,20566,20567,20568,20569,20571,20573,20574,20575,20576,20577,20578,20579,20580,20582,20583,20584,20585,20586,20587,20589,20590,20591,20592,20593,20594,20595,20596,20597,20600,20601,20602,20604,20605,20609,20610,20611,20612,20614,20615,20617,20618,20619,20620,20622,20623,20624,20625,20626,20627,20628,20629,20630,20631,20632,20633,20634,20635,20636,20637,20638,20639,20640,20641,20642,20644,20646,20650,20651,20653,20654,20655,20656,20657,20659,20660,20661,20662,20663,20664,20665,20668],[20669,20670,20671,20672,20673,20674,20675,20676,20677,20678,20679,20680,20681,20682,20683,20684,20685,20686,20688,20689,20690,20691,20692,20693,20695,20696,20697,20699,20700,20701,20702,20703,20704,20705,20706,20707,20708,20709,20712,20713,20714,20715,20719,20720,20721,20722,20724,20726,20727,20728,20729,20730,20732,20733,20734,20735,20736,20737,20738,20739,20740,20741,20744,63,20745,20746,20748,20749,20750,20751,20752,20753,20755,20756,20757,20758,20759,20760,20761,20762,20763,20764,20765,20766,20767,20768,20770,20771,20772,20773,20774,20775,20776,20777,20778,20779,20780,20781,20782,20783,20784,20785,20786,20787,20788,20789,20790,20791,20792,20793,20794,20795,20796,20797,20798,20802,20807,20810,20812,20814,20815,20816,20818,20819,20823,20824,20825,20827,20829,20830,20831,20832,20833,20835,20836,20838,20839,20841,20842,20847,20850,20858,20862,20863,20867,20868,20870,20871,20874,20875,20878,20879,20880,20881,20883,20884,20888,20890,20893,20894,20895,20897,20899,20902,20903,20904,20905,20906,20909,20910,20916,20920,20921,20922,20926,20927,20929,20930,20931,20933,20936,20938,20941,20942,20944,20946,20947,20948,20949,20950,20951],[20952,20953,20954,20956,20958,20959,20962,20963,20965,20966,20967,20968,20969,20970,20972,20974,20977,20978,20980,20983,20990,20996,20997,21001,21003,21004,21007,21008,21011,21012,21013,21020,21022,21023,21025,21026,21027,21029,21030,21031,21034,21036,21039,21041,21042,21044,21045,21052,21054,21060,21061,21062,21063,21064,21065,21067,21070,21071,21074,21075,21077,21079,21080,63,21081,21082,21083,21085,21087,21088,21090,21091,21092,21094,21096,21099,21100,21101,21102,21104,21105,21107,21108,21109,21110,21111,21112,21113,21114,21115,21116,21118,21120,21123,21124,21125,21126,21127,21129,21130,21131,21132,21133,21134,21135,21137,21138,21140,21141,21142,21143,21144,21145,21146,21148,21156,21157,21158,21159,21166,21167,21168,21172,21173,21174,21175,21176,21177,21178,21179,21180,21181,21184,21185,21186,21188,21189,21190,21192,21194,21196,21197,21198,21199,21201,21203,21204,21205,21207,21209,21210,21211,21212,21213,21214,21216,21217,21218,21219,21221,21222,21223,21224,21225,21226,21227,21228,21229,21230,21231,21233,21234,21235,21236,21237,21238,21239,21240,21243,21244,21245,21249,21250,21251,21252,21255,21257,21258,21259,21260,21262],[21265,21266,21267,21268,21272,21275,21276,21278,21279,21282,21284,21285,21287,21288,21289,21291,21292,21293,21295,21296,21297,21298,21299,21300,21301,21302,21303,21304,21308,21309,21312,21314,21316,21318,21323,21324,21325,21328,21332,21336,21337,21339,21341,21349,21352,21354,21356,21357,21362,21366,21369,21371,21372,21373,21374,21376,21377,21379,21383,21384,21386,21390,21391,63,21392,21393,21394,21395,21396,21398,21399,21401,21403,21404,21406,21408,21409,21412,21415,21418,21419,21420,21421,21423,21424,21425,21426,21427,21428,21429,21431,21432,21433,21434,21436,21437,21438,21440,21443,21444,21445,21446,21447,21454,21455,21456,21458,21459,21461,21466,21468,21469,21470,21473,21474,21479,21492,21498,21502,21503,21504,21506,21509,21511,21515,21524,21528,21529,21530,21532,21538,21540,21541,21546,21552,21555,21558,21559,21562,21565,21567,21569,21570,21572,21573,21575,21577,21580,21581,21582,21583,21585,21594,21597,21598,21599,21600,21601,21603,21605,21607,21609,21610,21611,21612,21613,21614,21615,21616,21620,21625,21626,21630,21631,21633,21635,21637,21639,21640,21641,21642,21645,21649,21651,21655,21656,21660,21662,21663,21664,21665],[21666,21669,21678,21680,21682,21685,21686,21687,21689,21690,21692,21694,21699,21701,21706,21707,21718,21720,21723,21728,21729,21730,21731,21732,21739,21740,21743,21744,21745,21748,21749,21750,21751,21752,21753,21755,21758,21760,21762,21763,21764,21765,21768,21770,21771,21772,21773,21774,21778,21779,21781,21782,21783,21784,21785,21786,21788,21789,21790,21791,21793,21797,21798,63,21800,21801,21803,21805,21810,21812,21813,21814,21816,21817,21818,21819,21821,21824,21826,21829,21831,21832,21835,21836,21837,21838,21839,21841,21842,21843,21844,21847,21848,21849,21850,21851,21853,21854,21855,21856,21858,21859,21864,21865,21867,21871,21872,21873,21874,21875,21876,21881,21882,21885,21887,21893,21894,21900,21901,21902,21904,21906,21907,21909,21910,21911,21914,21915,21918,21920,21921,21922,21923,21924,21925,21926,21928,21929,21930,21931,21932,21933,21934,21935,21936,21938,21940,21942,21944,21946,21948,21951,21952,21953,21954,21955,21958,21959,21960,21962,21963,21966,21967,21968,21973,21975,21976,21977,21978,21979,21982,21984,21986,21991,21993,21997,21998,22E3,22001,22004,22006,22008,22009,22010,22011,22012,22015,22018,22019,22020,22021],[22022,22023,22026,22027,22029,22032,22033,22034,22035,22036,22037,22038,22039,22041,22042,22044,22045,22048,22049,22050,22053,22054,22056,22057,22058,22059,22062,22063,22064,22067,22069,22071,22072,22074,22076,22077,22078,22080,22081,22082,22083,22084,22085,22086,22087,22088,22089,22090,22091,22095,22096,22097,22098,22099,22101,22102,22106,22107,22109,22110,22111,22112,22113,63,22115,22117,22118,22119,22125,22126,22127,22128,22130,22131,22132,22133,22135,22136,22137,22138,22141,22142,22143,22144,22145,22146,22147,22148,22151,22152,22153,22154,22155,22156,22157,22160,22161,22162,22164,22165,22166,22167,22168,22169,22170,22171,22172,22173,22174,22175,22176,22177,22178,22180,22181,22182,22183,22184,22185,22186,22187,22188,22189,22190,22192,22193,22194,22195,22196,22197,22198,22200,22201,22202,22203,22205,22206,22207,22208,22209,22210,22211,22212,22213,22214,22215,22216,22217,22219,22220,22221,22222,22223,22224,22225,22226,22227,22229,22230,22232,22233,22236,22243,22245,22246,22247,22248,22249,22250,22252,22254,22255,22258,22259,22262,22263,22264,22267,22268,22272,22273,22274,22277,22279,22283,22284,22285,22286,22287,22288,22289],[22290,22291,22292,22293,22294,22295,22296,22297,22298,22299,22301,22302,22304,22305,22306,22308,22309,22310,22311,22315,22321,22322,22324,22325,22326,22327,22328,22332,22333,22335,22337,22339,22340,22341,22342,22344,22345,22347,22354,22355,22356,22357,22358,22360,22361,22370,22371,22373,22375,22380,22382,22384,22385,22386,22388,22389,22392,22393,22394,22397,22398,22399,22400,63,22401,22407,22408,22409,22410,22413,22414,22415,22416,22417,22420,22421,22422,22423,22424,22425,22426,22428,22429,22430,22431,22437,22440,22442,22444,22447,22448,22449,22451,22453,22454,22455,22457,22458,22459,22460,22461,22462,22463,22464,22465,22468,22469,22470,22471,22472,22473,22474,22476,22477,22480,22481,22483,22486,22487,22491,22492,22494,22497,22498,22499,22501,22502,22503,22504,22505,22506,22507,22508,22510,22512,22513,22514,22515,22517,22518,22519,22523,22524,22526,22527,22529,22531,22532,22533,22536,22537,22538,22540,22542,22543,22544,22546,22547,22548,22550,22551,22552,22554,22555,22556,22557,22559,22562,22563,22565,22566,22567,22568,22569,22571,22572,22573,22574,22575,22577,22578,22579,22580,22582,22583,22584,22585,22586,22587,22588,22589],[22590,22591,22592,22593,22594,22595,22597,22598,22599,22600,22601,22602,22603,22606,22607,22608,22610,22611,22613,22614,22615,22617,22618,22619,22620,22621,22623,22624,22625,22626,22627,22628,22630,22631,22632,22633,22634,22637,22638,22639,22640,22641,22642,22643,22644,22645,22646,22647,22648,22649,22650,22651,22652,22653,22655,22658,22660,22662,22663,22664,22666,22667,22668,63,22669,22670,22671,22672,22673,22676,22677,22678,22679,22680,22683,22684,22685,22688,22689,22690,22691,22692,22693,22694,22695,22698,22699,22700,22701,22702,22703,22704,22705,22706,22707,22708,22709,22710,22711,22712,22713,22714,22715,22717,22718,22719,22720,22722,22723,22724,22726,22727,22728,22729,22730,22731,22732,22733,22734,22735,22736,22738,22739,22740,22742,22743,22744,22745,22746,22747,22748,22749,22750,22751,22752,22753,22754,22755,22757,22758,22759,22760,22761,22762,22765,22767,22769,22770,22772,22773,22775,22776,22778,22779,22780,22781,22782,22783,22784,22785,22787,22789,22790,22792,22793,22794,22795,22796,22798,22800,22801,22802,22803,22807,22808,22811,22813,22814,22816,22817,22818,22819,22822,22824,22828,22832,22834,22835,22837,22838,22843],[22845,22846,22847,22848,22851,22853,22854,22858,22860,22861,22864,22866,22867,22873,22875,22876,22877,22878,22879,22881,22883,22884,22886,22887,22888,22889,22890,22891,22892,22893,22894,22895,22896,22897,22898,22901,22903,22906,22907,22908,22910,22911,22912,22917,22921,22923,22924,22926,22927,22928,22929,22932,22933,22936,22938,22939,22940,22941,22943,22944,22945,22946,22950,63,22951,22956,22957,22960,22961,22963,22964,22965,22966,22967,22968,22970,22972,22973,22975,22976,22977,22978,22979,22980,22981,22983,22984,22985,22988,22989,22990,22991,22997,22998,23001,23003,23006,23007,23008,23009,23010,23012,23014,23015,23017,23018,23019,23021,23022,23023,23024,23025,23026,23027,23028,23029,23030,23031,23032,23034,23036,23037,23038,23040,23042,23050,23051,23053,23054,23055,23056,23058,23060,23061,23062,23063,23065,23066,23067,23069,23070,23073,23074,23076,23078,23079,23080,23082,23083,23084,23085,23086,23087,23088,23091,23093,23095,23096,23097,23098,23099,23101,23102,23103,23105,23106,23107,23108,23109,23111,23112,23115,23116,23117,23118,23119,23120,23121,23122,23123,23124,23126,23127,23128,23129,23131,23132,23133,23134,23135,23136],[23137,23139,23140,23141,23142,23144,23145,23147,23148,23149,23150,23151,23152,23153,23154,23155,23160,23161,23163,23164,23165,23166,23168,23169,23170,23171,23172,23173,23174,23175,23176,23177,23178,23179,23180,23181,23182,23183,23184,23185,23187,23188,23189,23190,23191,23192,23193,23196,23197,23198,23199,23200,23201,23202,23203,23204,23205,23206,23207,23208,23209,23211,23212,63,23213,23214,23215,23216,23217,23220,23222,23223,23225,23226,23227,23228,23229,23231,23232,23235,23236,23237,23238,23239,23240,23242,23243,23245,23246,23247,23248,23249,23251,23253,23255,23257,23258,23259,23261,23262,23263,23266,23268,23269,23271,23272,23274,23276,23277,23278,23279,23280,23282,23283,23284,23285,23286,23287,23288,23289,23290,23291,23292,23293,23294,23295,23296,23297,23298,23299,23300,23301,23302,23303,23304,23306,23307,23308,23309,23310,23311,23312,23313,23314,23315,23316,23317,23320,23321,23322,23323,23324,23325,23326,23327,23328,23329,23330,23331,23332,23333,23334,23335,23336,23337,23338,23339,23340,23341,23342,23343,23344,23345,23347,23349,23350,23352,23353,23354,23355,23356,23357,23358,23359,23361,23362,23363,23364,23365,23366,23367],[23368,23369,23370,23371,23372,23373,23374,23375,23378,23382,23390,23392,23393,23399,23400,23403,23405,23406,23407,23410,23412,23414,23415,23416,23417,23419,23420,23422,23423,23426,23430,23434,23437,23438,23440,23441,23442,23444,23446,23455,23463,23464,23465,23468,23469,23470,23471,23473,23474,23479,23482,23483,23484,23488,23489,23491,23496,23497,23498,23499,23501,23502,23503,63,23505,23508,23509,23510,23511,23512,23513,23514,23515,23516,23520,23522,23523,23526,23527,23529,23530,23531,23532,23533,23535,23537,23538,23539,23540,23541,23542,23543,23549,23550,23552,23554,23555,23557,23559,23560,23563,23564,23565,23566,23568,23570,23571,23575,23577,23579,23582,23583,23584,23585,23587,23590,23592,23593,23594,23595,23597,23598,23599,23600,23602,23603,23605,23606,23607,23619,23620,23622,23623,23628,23629,23634,23635,23636,23638,23639,23640,23642,23643,23644,23645,23647,23650,23652,23655,23656,23657,23658,23659,23660,23661,23664,23666,23667,23668,23669,23670,23671,23672,23675,23676,23677,23678,23680,23683,23684,23685,23686,23687,23689,23690,23691,23694,23695,23698,23699,23701,23709,23710,23711,23712,23713,23716,23717,23718,23719,23720],[23722,23726,23727,23728,23730,23732,23734,23737,23738,23739,23740,23742,23744,23746,23747,23749,23750,23751,23752,23753,23754,23756,23757,23758,23759,23760,23761,23763,23764,23765,23766,23767,23768,23770,23771,23772,23773,23774,23775,23776,23778,23779,23783,23785,23787,23788,23790,23791,23793,23794,23795,23796,23797,23798,23799,23800,23801,23802,23804,23805,23806,23807,23808,63,23809,23812,23813,23816,23817,23818,23819,23820,23821,23823,23824,23825,23826,23827,23829,23831,23832,23833,23834,23836,23837,23839,23840,23841,23842,23843,23845,23848,23850,23851,23852,23855,23856,23857,23858,23859,23861,23862,23863,23864,23865,23866,23867,23868,23871,23872,23873,23874,23875,23876,23877,23878,23880,23881,23885,23886,23887,23888,23889,23890,23891,23892,23893,23894,23895,23897,23898,23900,23902,23903,23904,23905,23906,23907,23908,23909,23910,23911,23912,23914,23917,23918,23920,23921,23922,23923,23925,23926,23927,23928,23929,23930,23931,23932,23933,23934,23935,23936,23937,23939,23940,23941,23942,23943,23944,23945,23946,23947,23948,23949,23950,23951,23952,23953,23954,23955,23956,23957,23958,23959,23960,23962,23963,23964,23966,23967,23968],[23969,23970,23971,23972,23973,23974,23975,23976,23977,23978,23979,23980,23981,23982,23983,23984,23985,23986,23987,23988,23989,23990,23992,23993,23994,23995,23996,23997,23998,23999,24E3,24001,24002,24003,24004,24006,24007,24008,24009,24010,24011,24012,24014,24015,24016,24017,24018,24019,24020,24021,24022,24023,24024,24025,24026,24028,24031,24032,24035,24036,24042,24044,24045,63,24048,24053,24054,24056,24057,24058,24059,24060,24063,24064,24068,24071,24073,24074,24075,24077,24078,24082,24083,24087,24094,24095,24096,24097,24098,24099,24100,24101,24104,24105,24106,24107,24108,24111,24112,24114,24115,24116,24117,24118,24121,24122,24126,24127,24128,24129,24131,24134,24135,24136,24137,24138,24139,24141,24142,24143,24144,24145,24146,24147,24150,24151,24152,24153,24154,24156,24157,24159,24160,24163,24164,24165,24166,24167,24168,24169,24170,24171,24172,24173,24174,24175,24176,24177,24181,24183,24185,24190,24193,24194,24195,24197,24200,24201,24204,24205,24206,24210,24216,24219,24221,24225,24226,24227,24228,24232,24233,24234,24235,24236,24238,24239,24240,24241,24242,24244,24250,24251,24252,24253,24255,24256,24257,24258,24259,24260,24261],[24262,24263,24264,24267,24268,24269,24270,24271,24272,24276,24277,24279,24280,24281,24282,24284,24285,24286,24287,24288,24289,24290,24291,24292,24293,24294,24295,24297,24299,24300,24301,24302,24303,24304,24305,24306,24307,24309,24312,24313,24315,24316,24317,24325,24326,24327,24329,24332,24333,24334,24336,24338,24340,24342,24345,24346,24348,24349,24350,24353,24354,24355,24356,63,24360,24363,24364,24366,24368,24370,24371,24372,24373,24374,24375,24376,24379,24381,24382,24383,24385,24386,24387,24388,24389,24390,24391,24392,24393,24394,24395,24396,24397,24398,24399,24401,24404,24409,24410,24411,24412,24414,24415,24416,24419,24421,24423,24424,24427,24430,24431,24434,24436,24437,24438,24440,24442,24445,24446,24447,24451,24454,24461,24462,24463,24465,24467,24468,24470,24474,24475,24477,24478,24479,24480,24482,24483,24484,24485,24486,24487,24489,24491,24492,24495,24496,24497,24498,24499,24500,24502,24504,24505,24506,24507,24510,24511,24512,24513,24514,24519,24520,24522,24523,24526,24531,24532,24533,24538,24539,24540,24542,24543,24546,24547,24549,24550,24552,24553,24556,24559,24560,24562,24563,24564,24566,24567,24569,24570,24572,24583],[24584,24585,24587,24588,24592,24593,24595,24599,24600,24602,24606,24607,24610,24611,24612,24620,24621,24622,24624,24625,24626,24627,24628,24630,24631,24632,24633,24634,24637,24638,24640,24644,24645,24646,24647,24648,24649,24650,24652,24654,24655,24657,24659,24660,24662,24663,24664,24667,24668,24670,24671,24672,24673,24677,24678,24686,24689,24690,24692,24693,24695,24702,24704,63,24705,24706,24709,24710,24711,24712,24714,24715,24718,24719,24720,24721,24723,24725,24727,24728,24729,24732,24734,24737,24738,24740,24741,24743,24745,24746,24750,24752,24755,24757,24758,24759,24761,24762,24765,24766,24767,24768,24769,24770,24771,24772,24775,24776,24777,24780,24781,24782,24783,24784,24786,24787,24788,24790,24791,24793,24795,24798,24801,24802,24803,24804,24805,24810,24817,24818,24821,24823,24824,24827,24828,24829,24830,24831,24834,24835,24836,24837,24839,24842,24843,24844,24848,24849,24850,24851,24852,24854,24855,24856,24857,24859,24860,24861,24862,24865,24866,24869,24872,24873,24874,24876,24877,24878,24879,24880,24881,24882,24883,24884,24885,24886,24887,24888,24889,24890,24891,24892,24893,24894,24896,24897,24898,24899,24900,24901,24902],[24903,24905,24907,24909,24911,24912,24914,24915,24916,24918,24919,24920,24921,24922,24923,24924,24926,24927,24928,24929,24931,24932,24933,24934,24937,24938,24939,24940,24941,24942,24943,24945,24946,24947,24948,24950,24952,24953,24954,24955,24956,24957,24958,24959,24960,24961,24962,24963,24964,24965,24966,24967,24968,24969,24970,24972,24973,24975,24976,24977,24978,24979,24981,63,24982,24983,24984,24985,24986,24987,24988,24990,24991,24992,24993,24994,24995,24996,24997,24998,25002,25003,25005,25006,25007,25008,25009,25010,25011,25012,25013,25014,25016,25017,25018,25019,25020,25021,25023,25024,25025,25027,25028,25029,25030,25031,25033,25036,25037,25038,25039,25040,25043,25045,25046,25047,25048,25049,25050,25051,25052,25053,25054,25055,25056,25057,25058,25059,25060,25061,25063,25064,25065,25066,25067,25068,25069,25070,25071,25072,25073,25074,25075,25076,25078,25079,25080,25081,25082,25083,25084,25085,25086,25088,25089,25090,25091,25092,25093,25095,25097,25107,25108,25113,25116,25117,25118,25120,25123,25126,25127,25128,25129,25131,25133,25135,25136,25137,25138,25141,25142,25144,25145,25146,25147,25148,25154,25156,25157,25158,25162],[25167,25168,25173,25174,25175,25177,25178,25180,25181,25182,25183,25184,25185,25186,25188,25189,25192,25201,25202,25204,25205,25207,25208,25210,25211,25213,25217,25218,25219,25221,25222,25223,25224,25227,25228,25229,25230,25231,25232,25236,25241,25244,25245,25246,25251,25254,25255,25257,25258,25261,25262,25263,25264,25266,25267,25268,25270,25271,25272,25274,25278,25280,25281,63,25283,25291,25295,25297,25301,25309,25310,25312,25313,25316,25322,25323,25328,25330,25333,25336,25337,25338,25339,25344,25347,25348,25349,25350,25354,25355,25356,25357,25359,25360,25362,25363,25364,25365,25367,25368,25369,25372,25382,25383,25385,25388,25389,25390,25392,25393,25395,25396,25397,25398,25399,25400,25403,25404,25406,25407,25408,25409,25412,25415,25416,25418,25425,25426,25427,25428,25430,25431,25432,25433,25434,25435,25436,25437,25440,25444,25445,25446,25448,25450,25451,25452,25455,25456,25458,25459,25460,25461,25464,25465,25468,25469,25470,25471,25473,25475,25476,25477,25478,25483,25485,25489,25491,25492,25493,25495,25497,25498,25499,25500,25501,25502,25503,25505,25508,25510,25515,25519,25521,25522,25525,25526,25529,25531,25533,25535,25536],[25537,25538,25539,25541,25543,25544,25546,25547,25548,25553,25555,25556,25557,25559,25560,25561,25562,25563,25564,25565,25567,25570,25572,25573,25574,25575,25576,25579,25580,25582,25583,25584,25585,25587,25589,25591,25593,25594,25595,25596,25598,25603,25604,25606,25607,25608,25609,25610,25613,25614,25617,25618,25621,25622,25623,25624,25625,25626,25629,25631,25634,25635,25636,63,25637,25639,25640,25641,25643,25646,25647,25648,25649,25650,25651,25653,25654,25655,25656,25657,25659,25660,25662,25664,25666,25667,25673,25675,25676,25677,25678,25679,25680,25681,25683,25685,25686,25687,25689,25690,25691,25692,25693,25695,25696,25697,25698,25699,25700,25701,25702,25704,25706,25707,25708,25710,25711,25712,25713,25714,25715,25716,25717,25718,25719,25723,25724,25725,25726,25727,25728,25729,25731,25734,25736,25737,25738,25739,25740,25741,25742,25743,25744,25747,25748,25751,25752,25754,25755,25756,25757,25759,25760,25761,25762,25763,25765,25766,25767,25768,25770,25771,25775,25777,25778,25779,25780,25782,25785,25787,25789,25790,25791,25793,25795,25796,25798,25799,25800,25801,25802,25803,25804,25807,25809,25811,25812,25813,25814,25817,25818],[25819,25820,25821,25823,25824,25825,25827,25829,25831,25832,25833,25834,25835,25836,25837,25838,25839,25840,25841,25842,25843,25844,25845,25846,25847,25848,25849,25850,25851,25852,25853,25854,25855,25857,25858,25859,25860,25861,25862,25863,25864,25866,25867,25868,25869,25870,25871,25872,25873,25875,25876,25877,25878,25879,25881,25882,25883,25884,25885,25886,25887,25888,25889,63,25890,25891,25892,25894,25895,25896,25897,25898,25900,25901,25904,25905,25906,25907,25911,25914,25916,25917,25920,25921,25922,25923,25924,25926,25927,25930,25931,25933,25934,25936,25938,25939,25940,25943,25944,25946,25948,25951,25952,25953,25956,25957,25959,25960,25961,25962,25965,25966,25967,25969,25971,25973,25974,25976,25977,25978,25979,25980,25981,25982,25983,25984,25985,25986,25987,25988,25989,25990,25992,25993,25994,25997,25998,25999,26002,26004,26005,26006,26008,26010,26013,26014,26016,26018,26019,26022,26024,26026,26028,26030,26033,26034,26035,26036,26037,26038,26039,26040,26042,26043,26046,26047,26048,26050,26055,26056,26057,26058,26061,26064,26065,26067,26068,26069,26072,26073,26074,26075,26076,26077,26078,26079,26081,26083,26084,26090,26091],[26098,26099,26100,26101,26104,26105,26107,26108,26109,26110,26111,26113,26116,26117,26119,26120,26121,26123,26125,26128,26129,26130,26134,26135,26136,26138,26139,26140,26142,26145,26146,26147,26148,26150,26153,26154,26155,26156,26158,26160,26162,26163,26167,26168,26169,26170,26171,26173,26175,26176,26178,26180,26181,26182,26183,26184,26185,26186,26189,26190,26192,26193,26200,63,26201,26203,26204,26205,26206,26208,26210,26211,26213,26215,26217,26218,26219,26220,26221,26225,26226,26227,26229,26232,26233,26235,26236,26237,26239,26240,26241,26243,26245,26246,26248,26249,26250,26251,26253,26254,26255,26256,26258,26259,26260,26261,26264,26265,26266,26267,26268,26270,26271,26272,26273,26274,26275,26276,26277,26278,26281,26282,26283,26284,26285,26287,26288,26289,26290,26291,26293,26294,26295,26296,26298,26299,26300,26301,26303,26304,26305,26306,26307,26308,26309,26310,26311,26312,26313,26314,26315,26316,26317,26318,26319,26320,26321,26322,26323,26324,26325,26326,26327,26328,26330,26334,26335,26336,26337,26338,26339,26340,26341,26343,26344,26346,26347,26348,26349,26350,26351,26353,26357,26358,26360,26362,26363,26365,26369,26370,26371],[26372,26373,26374,26375,26380,26382,26383,26385,26386,26387,26390,26392,26393,26394,26396,26398,26400,26401,26402,26403,26404,26405,26407,26409,26414,26416,26418,26419,26422,26423,26424,26425,26427,26428,26430,26431,26433,26436,26437,26439,26442,26443,26445,26450,26452,26453,26455,26456,26457,26458,26459,26461,26466,26467,26468,26470,26471,26475,26476,26478,26481,26484,26486,63,26488,26489,26490,26491,26493,26496,26498,26499,26501,26502,26504,26506,26508,26509,26510,26511,26513,26514,26515,26516,26518,26521,26523,26527,26528,26529,26532,26534,26537,26540,26542,26545,26546,26548,26553,26554,26555,26556,26557,26558,26559,26560,26562,26565,26566,26567,26568,26569,26570,26571,26572,26573,26574,26581,26582,26583,26587,26591,26593,26595,26596,26598,26599,26600,26602,26603,26605,26606,26610,26613,26614,26615,26616,26617,26618,26619,26620,26622,26625,26626,26627,26628,26630,26637,26640,26642,26644,26645,26648,26649,26650,26651,26652,26654,26655,26656,26658,26659,26660,26661,26662,26663,26664,26667,26668,26669,26670,26671,26672,26673,26676,26677,26678,26682,26683,26687,26695,26699,26701,26703,26706,26710,26711,26712,26713,26714,26715],[26716,26717,26718,26719,26730,26732,26733,26734,26735,26736,26737,26738,26739,26741,26744,26745,26746,26747,26748,26749,26750,26751,26752,26754,26756,26759,26760,26761,26762,26763,26764,26765,26766,26768,26769,26770,26772,26773,26774,26776,26777,26778,26779,26780,26781,26782,26783,26784,26785,26787,26788,26789,26793,26794,26795,26796,26798,26801,26802,26804,26806,26807,26808,63,26809,26810,26811,26812,26813,26814,26815,26817,26819,26820,26821,26822,26823,26824,26826,26828,26830,26831,26832,26833,26835,26836,26838,26839,26841,26843,26844,26845,26846,26847,26849,26850,26852,26853,26854,26855,26856,26857,26858,26859,26860,26861,26863,26866,26867,26868,26870,26871,26872,26875,26877,26878,26879,26880,26882,26883,26884,26886,26887,26888,26889,26890,26892,26895,26897,26899,26900,26901,26902,26903,26904,26905,26906,26907,26908,26909,26910,26913,26914,26915,26917,26918,26919,26920,26921,26922,26923,26924,26926,26927,26929,26930,26931,26933,26934,26935,26936,26938,26939,26940,26942,26944,26945,26947,26948,26949,26950,26951,26952,26953,26954,26955,26956,26957,26958,26959,26960,26961,26962,26963,26965,26966,26968,26969,26971,26972,26975],[26977,26978,26980,26981,26983,26984,26985,26986,26988,26989,26991,26992,26994,26995,26996,26997,26998,27002,27003,27005,27006,27007,27009,27011,27013,27018,27019,27020,27022,27023,27024,27025,27026,27027,27030,27031,27033,27034,27037,27038,27039,27040,27041,27042,27043,27044,27045,27046,27049,27050,27052,27054,27055,27056,27058,27059,27061,27062,27064,27065,27066,27068,27069,63,27070,27071,27072,27074,27075,27076,27077,27078,27079,27080,27081,27083,27085,27087,27089,27090,27091,27093,27094,27095,27096,27097,27098,27100,27101,27102,27105,27106,27107,27108,27109,27110,27111,27112,27113,27114,27115,27116,27118,27119,27120,27121,27123,27124,27125,27126,27127,27128,27129,27130,27131,27132,27134,27136,27137,27138,27139,27140,27141,27142,27143,27144,27145,27147,27148,27149,27150,27151,27152,27153,27154,27155,27156,27157,27158,27161,27162,27163,27164,27165,27166,27168,27170,27171,27172,27173,27174,27175,27177,27179,27180,27181,27182,27184,27186,27187,27188,27190,27191,27192,27193,27194,27195,27196,27199,27200,27201,27202,27203,27205,27206,27208,27209,27210,27211,27212,27213,27214,27215,27217,27218,27219,27220,27221,27222,27223,27226],[27228,27229,27230,27231,27232,27234,27235,27236,27238,27239,27240,27241,27242,27243,27244,27245,27246,27247,27248,27250,27251,27252,27253,27254,27255,27256,27258,27259,27261,27262,27263,27265,27266,27267,27269,27270,27271,27272,27273,27274,27275,27276,27277,27279,27282,27283,27284,27285,27286,27288,27289,27290,27291,27292,27293,27294,27295,27297,27298,27299,27300,27301,27302,63,27303,27304,27306,27309,27310,27311,27312,27313,27314,27315,27316,27317,27318,27319,27320,27321,27322,27323,27324,27325,27326,27327,27328,27329,27330,27331,27332,27333,27334,27335,27336,27337,27338,27339,27340,27341,27342,27343,27344,27345,27346,27347,27348,27349,27350,27351,27352,27353,27354,27355,27356,27357,27358,27359,27360,27361,27362,27363,27364,27365,27366,27367,27368,27369,27370,27371,27372,27373,27374,27375,27376,27377,27378,27379,27380,27381,27382,27383,27384,27385,27386,27387,27388,27389,27390,27391,27392,27393,27394,27395,27396,27397,27398,27399,27400,27401,27402,27403,27404,27405,27406,27407,27408,27409,27410,27411,27412,27413,27414,27415,27416,27417,27418,27419,27420,27421,27422,27423,27429,27430,27432,27433,27434,27435,27436,27437,27438],[27439,27440,27441,27443,27444,27445,27446,27448,27451,27452,27453,27455,27456,27457,27458,27460,27461,27464,27466,27467,27469,27470,27471,27472,27473,27474,27475,27476,27477,27478,27479,27480,27482,27483,27484,27485,27486,27487,27488,27489,27496,27497,27499,27500,27501,27502,27503,27504,27505,27506,27507,27508,27509,27510,27511,27512,27514,27517,27518,27519,27520,27525,27528,63,27532,27534,27535,27536,27537,27540,27541,27543,27544,27545,27548,27549,27550,27551,27552,27554,27555,27556,27557,27558,27559,27560,27561,27563,27564,27565,27566,27567,27568,27569,27570,27574,27576,27577,27578,27579,27580,27581,27582,27584,27587,27588,27590,27591,27592,27593,27594,27596,27598,27600,27601,27608,27610,27612,27613,27614,27615,27616,27618,27619,27620,27621,27622,27623,27624,27625,27628,27629,27630,27632,27633,27634,27636,27638,27639,27640,27642,27643,27644,27646,27647,27648,27649,27650,27651,27652,27656,27657,27658,27659,27660,27662,27666,27671,27676,27677,27678,27680,27683,27685,27691,27692,27693,27697,27699,27702,27703,27705,27706,27707,27708,27710,27711,27715,27716,27717,27720,27723,27724,27725,27726,27727,27729,27730,27731,27734,27736],[27737,27738,27746,27747,27749,27750,27751,27755,27756,27757,27758,27759,27761,27763,27765,27767,27768,27770,27771,27772,27775,27776,27780,27783,27786,27787,27789,27790,27793,27794,27797,27798,27799,27800,27802,27804,27805,27806,27808,27810,27816,27820,27823,27824,27828,27829,27830,27831,27834,27840,27841,27842,27843,27846,27847,27848,27851,27853,27854,27855,27857,27858,27864,63,27865,27866,27868,27869,27871,27876,27878,27879,27881,27884,27885,27890,27892,27897,27903,27904,27906,27907,27909,27910,27912,27913,27914,27917,27919,27920,27921,27923,27924,27925,27926,27928,27932,27933,27935,27936,27937,27938,27939,27940,27942,27944,27945,27948,27949,27951,27952,27956,27958,27959,27960,27962,27967,27968,27970,27972,27977,27980,27984,27989,27990,27991,27992,27995,27997,27999,28001,28002,28004,28005,28007,28008,28011,28012,28013,28016,28017,28018,28019,28021,28022,28025,28026,28027,28029,28030,28031,28032,28033,28035,28036,28038,28039,28042,28043,28045,28047,28048,28050,28054,28055,28056,28057,28058,28060,28066,28069,28076,28077,28080,28081,28083,28084,28086,28087,28089,28090,28091,28092,28093,28094,28097,28098,28099,28104,28105,28106],[28109,28110,28111,28112,28114,28115,28116,28117,28119,28122,28123,28124,28127,28130,28131,28133,28135,28136,28137,28138,28141,28143,28144,28146,28148,28149,28150,28152,28154,28157,28158,28159,28160,28161,28162,28163,28164,28166,28167,28168,28169,28171,28175,28178,28179,28181,28184,28185,28187,28188,28190,28191,28194,28198,28199,28200,28202,28204,28206,28208,28209,28211,28213,63,28214,28215,28217,28219,28220,28221,28222,28223,28224,28225,28226,28229,28230,28231,28232,28233,28234,28235,28236,28239,28240,28241,28242,28245,28247,28249,28250,28252,28253,28254,28256,28257,28258,28259,28260,28261,28262,28263,28264,28265,28266,28268,28269,28271,28272,28273,28274,28275,28276,28277,28278,28279,28280,28281,28282,28283,28284,28285,28288,28289,28290,28292,28295,28296,28298,28299,28300,28301,28302,28305,28306,28307,28308,28309,28310,28311,28313,28314,28315,28317,28318,28320,28321,28323,28324,28326,28328,28329,28331,28332,28333,28334,28336,28339,28341,28344,28345,28348,28350,28351,28352,28355,28356,28357,28358,28360,28361,28362,28364,28365,28366,28368,28370,28374,28376,28377,28379,28380,28381,28387,28391,28394,28395,28396,28397,28398,28399],[28400,28401,28402,28403,28405,28406,28407,28408,28410,28411,28412,28413,28414,28415,28416,28417,28419,28420,28421,28423,28424,28426,28427,28428,28429,28430,28432,28433,28434,28438,28439,28440,28441,28442,28443,28444,28445,28446,28447,28449,28450,28451,28453,28454,28455,28456,28460,28462,28464,28466,28468,28469,28471,28472,28473,28474,28475,28476,28477,28479,28480,28481,28482,63,28483,28484,28485,28488,28489,28490,28492,28494,28495,28496,28497,28498,28499,28500,28501,28502,28503,28505,28506,28507,28509,28511,28512,28513,28515,28516,28517,28519,28520,28521,28522,28523,28524,28527,28528,28529,28531,28533,28534,28535,28537,28539,28541,28542,28543,28544,28545,28546,28547,28549,28550,28551,28554,28555,28559,28560,28561,28562,28563,28564,28565,28566,28567,28568,28569,28570,28571,28573,28574,28575,28576,28578,28579,28580,28581,28582,28584,28585,28586,28587,28588,28589,28590,28591,28592,28593,28594,28596,28597,28599,28600,28602,28603,28604,28605,28606,28607,28609,28611,28612,28613,28614,28615,28616,28618,28619,28620,28621,28622,28623,28624,28627,28628,28629,28630,28631,28632,28633,28634,28635,28636,28637,28639,28642,28643,28644,28645],[28646,28647,28648,28649,28650,28651,28652,28653,28656,28657,28658,28659,28660,28661,28662,28663,28664,28665,28666,28667,28668,28669,28670,28671,28672,28673,28674,28675,28676,28677,28678,28679,28680,28681,28682,28683,28684,28685,28686,28687,28688,28690,28691,28692,28693,28694,28695,28696,28697,28700,28701,28702,28703,28704,28705,28706,28708,28709,28710,28711,28712,28713,28714,63,28715,28716,28717,28718,28719,28720,28721,28722,28723,28724,28726,28727,28728,28730,28731,28732,28733,28734,28735,28736,28737,28738,28739,28740,28741,28742,28743,28744,28745,28746,28747,28749,28750,28752,28753,28754,28755,28756,28757,28758,28759,28760,28761,28762,28763,28764,28765,28767,28768,28769,28770,28771,28772,28773,28774,28775,28776,28777,28778,28782,28785,28786,28787,28788,28791,28793,28794,28795,28797,28801,28802,28803,28804,28806,28807,28808,28811,28812,28813,28815,28816,28817,28819,28823,28824,28826,28827,28830,28831,28832,28833,28834,28835,28836,28837,28838,28839,28840,28841,28842,28848,28850,28852,28853,28854,28858,28862,28863,28868,28869,28870,28871,28873,28875,28876,28877,28878,28879,28880,28881,28882,28883,28884,28885,28886,28887,28890],[28892,28893,28894,28896,28897,28898,28899,28901,28906,28910,28912,28913,28914,28915,28916,28917,28918,28920,28922,28923,28924,28926,28927,28928,28929,28930,28931,28932,28933,28934,28935,28936,28939,28940,28941,28942,28943,28945,28946,28948,28951,28955,28956,28957,28958,28959,28960,28961,28962,28963,28964,28965,28967,28968,28969,28970,28971,28972,28973,28974,28978,28979,28980,63,28981,28983,28984,28985,28986,28987,28988,28989,28990,28991,28992,28993,28994,28995,28996,28998,28999,29E3,29001,29003,29005,29007,29008,29009,29010,29011,29012,29013,29014,29015,29016,29017,29018,29019,29021,29023,29024,29025,29026,29027,29029,29033,29034,29035,29036,29037,29039,29040,29041,29044,29045,29046,29047,29049,29051,29052,29054,29055,29056,29057,29058,29059,29061,29062,29063,29064,29065,29067,29068,29069,29070,29072,29073,29074,29075,29077,29078,29079,29082,29083,29084,29085,29086,29089,29090,29091,29092,29093,29094,29095,29097,29098,29099,29101,29102,29103,29104,29105,29106,29108,29110,29111,29112,29114,29115,29116,29117,29118,29119,29120,29121,29122,29124,29125,29126,29127,29128,29129,29130,29131,29132,29133,29135,29136,29137,29138,29139],[29142,29143,29144,29145,29146,29147,29148,29149,29150,29151,29153,29154,29155,29156,29158,29160,29161,29162,29163,29164,29165,29167,29168,29169,29170,29171,29172,29173,29174,29175,29176,29178,29179,29180,29181,29182,29183,29184,29185,29186,29187,29188,29189,29191,29192,29193,29194,29195,29196,29197,29198,29199,29200,29201,29202,29203,29204,29205,29206,29207,29208,29209,29210,63,29211,29212,29214,29215,29216,29217,29218,29219,29220,29221,29222,29223,29225,29227,29229,29230,29231,29234,29235,29236,29242,29244,29246,29248,29249,29250,29251,29252,29253,29254,29257,29258,29259,29262,29263,29264,29265,29267,29268,29269,29271,29272,29274,29276,29278,29280,29283,29284,29285,29288,29290,29291,29292,29293,29296,29297,29299,29300,29302,29303,29304,29307,29308,29309,29314,29315,29317,29318,29319,29320,29321,29324,29326,29328,29329,29331,29332,29333,29334,29335,29336,29337,29338,29339,29340,29341,29342,29344,29345,29346,29347,29348,29349,29350,29351,29352,29353,29354,29355,29358,29361,29362,29363,29365,29370,29371,29372,29373,29374,29375,29376,29381,29382,29383,29385,29386,29387,29388,29391,29393,29395,29396,29397,29398,29400,29402,29403],[58566,58567,58568,58569,58570,58571,58572,58573,58574,58575,58576,58577,58578,58579,58580,58581,58582,58583,58584,58585,58586,58587,58588,58589,58590,58591,58592,58593,58594,58595,58596,58597,58598,58599,58600,58601,58602,58603,58604,58605,58606,58607,58608,58609,58610,58611,58612,58613,58614,58615,58616,58617,58618,58619,58620,58621,58622,58623,58624,58625,58626,58627,58628,63,58629,58630,58631,58632,58633,58634,58635,58636,58637,58638,58639,58640,58641,58642,58643,58644,58645,58646,58647,58648,58649,58650,58651,58652,58653,58654,58655,58656,58657,58658,58659,58660,58661,12288,12289,12290,183,713,711,168,12291,12293,8212,65374,8214,8230,8216,8217,8220,8221,12308,12309,12296,12297,12298,12299,12300,12301,12302,12303,12310,12311,12304,12305,177,215,247,8758,8743,8744,8721,8719,8746,8745,8712,8759,8730,8869,8741,8736,8978,8857,8747,8750,8801,8780,8776,8765,8733,8800,8814,8815,8804,8805,8734,8757,8756,9794,9792,176,8242,8243,8451,65284,164,65504,65505,8240,167,8470,9734,9733,9675,9679,9678,9671,9670,9633,9632,9651,9650,8251,8594,8592,8593,8595,12307],[58662,58663,58664,58665,58666,58667,58668,58669,58670,58671,58672,58673,58674,58675,58676,58677,58678,58679,58680,58681,58682,58683,58684,58685,58686,58687,58688,58689,58690,58691,58692,58693,58694,58695,58696,58697,58698,58699,58700,58701,58702,58703,58704,58705,58706,58707,58708,58709,58710,58711,58712,58713,58714,58715,58716,58717,58718,58719,58720,58721,58722,58723,58724,63,58725,58726,58727,58728,58729,58730,58731,58732,58733,58734,58735,58736,58737,58738,58739,58740,58741,58742,58743,58744,58745,58746,58747,58748,58749,58750,58751,58752,58753,58754,58755,58756,58757,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,59238,59239,59240,59241,59242,59243,9352,9353,9354,9355,9356,9357,9358,9359,9360,9361,9362,9363,9364,9365,9366,9367,9368,9369,9370,9371,9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,9342,9343,9344,9345,9346,9347,9348,9349,9350,9351,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,59244,59245,12832,12833,12834,12835,12836,12837,12838,12839,12840,12841,59246,59247,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,8554,8555,59248,59249],[58758,58759,58760,58761,58762,58763,58764,58765,58766,58767,58768,58769,58770,58771,58772,58773,58774,58775,58776,58777,58778,58779,58780,58781,58782,58783,58784,58785,58786,58787,58788,58789,58790,58791,58792,58793,58794,58795,58796,58797,58798,58799,58800,58801,58802,58803,58804,58805,58806,58807,58808,58809,58810,58811,58812,58813,58814,58815,58816,58817,58818,58819,58820,63,58821,58822,58823,58824,58825,58826,58827,58828,58829,58830,58831,58832,58833,58834,58835,58836,58837,58838,58839,58840,58841,58842,58843,58844,58845,58846,58847,58848,58849,58850,58851,58852,58853,65281,65282,65283,65509,65285,65286,65287,65288,65289,65290,65291,65292,65293,65294,65295,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,65306,65307,65308,65309,65310,65311,65312,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65339,65340,65341,65342,65343,65344,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,65371,65372,65373,65507],[58854,58855,58856,58857,58858,58859,58860,58861,58862,58863,58864,58865,58866,58867,58868,58869,58870,58871,58872,58873,58874,58875,58876,58877,58878,58879,58880,58881,58882,58883,58884,58885,58886,58887,58888,58889,58890,58891,58892,58893,58894,58895,58896,58897,58898,58899,58900,58901,58902,58903,58904,58905,58906,58907,58908,58909,58910,58911,58912,58913,58914,58915,58916,63,58917,58918,58919,58920,58921,58922,58923,58924,58925,58926,58927,58928,58929,58930,58931,58932,58933,58934,58935,58936,58937,58938,58939,58940,58941,58942,58943,58944,58945,58946,58947,58948,58949,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,59250,59251,59252,59253,59254,59255,59256,59257,59258,59259,59260],[58950,58951,58952,58953,58954,58955,58956,58957,58958,58959,58960,58961,58962,58963,58964,58965,58966,58967,58968,58969,58970,58971,58972,58973,58974,58975,58976,58977,58978,58979,58980,58981,58982,58983,58984,58985,58986,58987,58988,58989,58990,58991,58992,58993,58994,58995,58996,58997,58998,58999,59E3,59001,59002,59003,59004,59005,59006,59007,59008,59009,59010,59011,59012,63,59013,59014,59015,59016,59017,59018,59019,59020,59021,59022,59023,59024,59025,59026,59027,59028,59029,59030,59031,59032,59033,59034,59035,59036,59037,59038,59039,59040,59041,59042,59043,59044,59045,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,59261,59262,59263,59264,59265,59266,59267,59268],[59046,59047,59048,59049,59050,59051,59052,59053,59054,59055,59056,59057,59058,59059,59060,59061,59062,59063,59064,59065,59066,59067,59068,59069,59070,59071,59072,59073,59074,59075,59076,59077,59078,59079,59080,59081,59082,59083,59084,59085,59086,59087,59088,59089,59090,59091,59092,59093,59094,59095,59096,59097,59098,59099,59100,59101,59102,59103,59104,59105,59106,59107,59108,63,59109,59110,59111,59112,59113,59114,59115,59116,59117,59118,59119,59120,59121,59122,59123,59124,59125,59126,59127,59128,59129,59130,59131,59132,59133,59134,59135,59136,59137,59138,59139,59140,59141,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,59269,59270,59271,59272,59273,59274,59275,59276,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,59277,59278,59279,59280,59281,59282,59283,65077,65078,65081,65082,65087,65088,65085,65086,65089,65090,65091,65092,59284,59285,65083,65084,65079,65080,65073,59286,65075,65076,59287,59288,59289,59290,59291,59292,59293,59294,59295],[59142,59143,59144,59145,59146,59147,59148,59149,59150,59151,59152,59153,59154,59155,59156,59157,59158,59159,59160,59161,59162,59163,59164,59165,59166,59167,59168,59169,59170,59171,59172,59173,59174,59175,59176,59177,59178,59179,59180,59181,59182,59183,59184,59185,59186,59187,59188,59189,59190,59191,59192,59193,59194,59195,59196,59197,59198,59199,59200,59201,59202,59203,59204,63,59205,59206,59207,59208,59209,59210,59211,59212,59213,59214,59215,59216,59217,59218,59219,59220,59221,59222,59223,59224,59225,59226,59227,59228,59229,59230,59231,59232,59233,59234,59235,59236,59237,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,59296,59297,59298,59299,59300,59301,59302,59303,59304,59305,59306,59307,59308,59309,59310,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,59311,59312,59313,59314,59315,59316,59317,59318,59319,59320,59321,59322,59323],[714,715,729,8211,8213,8229,8245,8453,8457,8598,8599,8600,8601,8725,8735,8739,8786,8806,8807,8895,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9581,9582,9583,9584,9585,9586,9587,9601,9602,9603,9604,9605,9606,9607,63,9608,9609,9610,9611,9612,9613,9614,9615,9619,9620,9621,9660,9661,9698,9699,9700,9701,9737,8853,12306,12317,12318,59324,59325,59326,59327,59328,59329,59330,59331,59332,59333,59334,257,225,462,224,275,233,283,232,299,237,464,236,333,243,466,242,363,250,468,249,470,472,474,476,252,234,593,59335,324,328,59336,609,59337,59338,59339,59340,12549,12550,12551,12552,12553,12554,12555,12556,12557,12558,12559,12560,12561,12562,12563,12564,12565,12566,12567,12568,12569,12570,12571,12572,12573,12574,12575,12576,12577,12578,12579,12580,12581,12582,12583,12584,12585,59341,59342,59343,59344,59345,59346,59347,59348,59349,59350,59351,59352,59353,59354,59355,59356,59357,59358,59359,59360,59361],[12321,12322,12323,12324,12325,12326,12327,12328,12329,12963,13198,13199,13212,13213,13214,13217,13252,13262,13265,13266,13269,65072,65506,65508,59362,8481,12849,59363,8208,59364,59365,59366,12540,12443,12444,12541,12542,12294,12445,12446,65097,65098,65099,65100,65101,65102,65103,65104,65105,65106,65108,65109,65110,65111,65113,65114,65115,65116,65117,65118,65119,65120,65121,63,65122,65123,65124,65125,65126,65128,65129,65130,65131,59367,59368,59369,59370,59371,59372,59373,59374,59375,59376,59377,59378,59379,12295,59380,59381,59382,59383,59384,59385,59386,59387,59388,59389,59390,59391,59392,9472,9473,9474,9475,9476,9477,9478,9479,9480,9481,9482,9483,9484,9485,9486,9487,9488,9489,9490,9491,9492,9493,9494,9495,9496,9497,9498,9499,9500,9501,9502,9503,9504,9505,9506,9507,9508,9509,9510,9511,9512,9513,9514,9515,9516,9517,9518,9519,9520,9521,9522,9523,9524,9525,9526,9527,9528,9529,9530,9531,9532,9533,9534,9535,9536,9537,9538,9539,9540,9541,9542,9543,9544,9545,9546,9547,59393,59394,59395,59396,59397,59398,59399,59400,59401,59402,59403,59404,59405,59406,59407],[29404,29405,29407,29410,29411,29412,29413,29414,29415,29418,29419,29429,29430,29433,29437,29438,29439,29440,29442,29444,29445,29446,29447,29448,29449,29451,29452,29453,29455,29456,29457,29458,29460,29464,29465,29466,29471,29472,29475,29476,29478,29479,29480,29485,29487,29488,29490,29491,29493,29494,29498,29499,29500,29501,29504,29505,29506,29507,29508,29509,29510,29511,29512,63,29513,29514,29515,29516,29518,29519,29521,29523,29524,29525,29526,29528,29529,29530,29531,29532,29533,29534,29535,29537,29538,29539,29540,29541,29542,29543,29544,29545,29546,29547,29550,29552,29553,57344,57345,57346,57347,57348,57349,57350,57351,57352,57353,57354,57355,57356,57357,57358,57359,57360,57361,57362,57363,57364,57365,57366,57367,57368,57369,57370,57371,57372,57373,57374,57375,57376,57377,57378,57379,57380,57381,57382,57383,57384,57385,57386,57387,57388,57389,57390,57391,57392,57393,57394,57395,57396,57397,57398,57399,57400,57401,57402,57403,57404,57405,57406,57407,57408,57409,57410,57411,57412,57413,57414,57415,57416,57417,57418,57419,57420,57421,57422,57423,57424,57425,57426,57427,57428,57429,57430,57431,57432,57433,57434,57435,57436,57437],[29554,29555,29556,29557,29558,29559,29560,29561,29562,29563,29564,29565,29567,29568,29569,29570,29571,29573,29574,29576,29578,29580,29581,29583,29584,29586,29587,29588,29589,29591,29592,29593,29594,29596,29597,29598,29600,29601,29603,29604,29605,29606,29607,29608,29610,29612,29613,29617,29620,29621,29622,29624,29625,29628,29629,29630,29631,29633,29635,29636,29637,29638,29639,63,29643,29644,29646,29650,29651,29652,29653,29654,29655,29656,29658,29659,29660,29661,29663,29665,29666,29667,29668,29670,29672,29674,29675,29676,29678,29679,29680,29681,29683,29684,29685,29686,29687,57438,57439,57440,57441,57442,57443,57444,57445,57446,57447,57448,57449,57450,57451,57452,57453,57454,57455,57456,57457,57458,57459,57460,57461,57462,57463,57464,57465,57466,57467,57468,57469,57470,57471,57472,57473,57474,57475,57476,57477,57478,57479,57480,57481,57482,57483,57484,57485,57486,57487,57488,57489,57490,57491,57492,57493,57494,57495,57496,57497,57498,57499,57500,57501,57502,57503,57504,57505,57506,57507,57508,57509,57510,57511,57512,57513,57514,57515,57516,57517,57518,57519,57520,57521,57522,57523,57524,57525,57526,57527,57528,57529,57530,57531],[29688,29689,29690,29691,29692,29693,29694,29695,29696,29697,29698,29700,29703,29704,29707,29708,29709,29710,29713,29714,29715,29716,29717,29718,29719,29720,29721,29724,29725,29726,29727,29728,29729,29731,29732,29735,29737,29739,29741,29743,29745,29746,29751,29752,29753,29754,29755,29757,29758,29759,29760,29762,29763,29764,29765,29766,29767,29768,29769,29770,29771,29772,29773,63,29774,29775,29776,29777,29778,29779,29780,29782,29784,29789,29792,29793,29794,29795,29796,29797,29798,29799,29800,29801,29802,29803,29804,29806,29807,29809,29810,29811,29812,29813,29816,29817,29818,57532,57533,57534,57535,57536,57537,57538,57539,57540,57541,57542,57543,57544,57545,57546,57547,57548,57549,57550,57551,57552,57553,57554,57555,57556,57557,57558,57559,57560,57561,57562,57563,57564,57565,57566,57567,57568,57569,57570,57571,57572,57573,57574,57575,57576,57577,57578,57579,57580,57581,57582,57583,57584,57585,57586,57587,57588,57589,57590,57591,57592,57593,57594,57595,57596,57597,57598,57599,57600,57601,57602,57603,57604,57605,57606,57607,57608,57609,57610,57611,57612,57613,57614,57615,57616,57617,57618,57619,57620,57621,57622,57623,57624,57625],[29819,29820,29821,29823,29826,29828,29829,29830,29832,29833,29834,29836,29837,29839,29841,29842,29843,29844,29845,29846,29847,29848,29849,29850,29851,29853,29855,29856,29857,29858,29859,29860,29861,29862,29866,29867,29868,29869,29870,29871,29872,29873,29874,29875,29876,29877,29878,29879,29880,29881,29883,29884,29885,29886,29887,29888,29889,29890,29891,29892,29893,29894,29895,63,29896,29897,29898,29899,29900,29901,29902,29903,29904,29905,29907,29908,29909,29910,29911,29912,29913,29914,29915,29917,29919,29921,29925,29927,29928,29929,29930,29931,29932,29933,29936,29937,29938,57626,57627,57628,57629,57630,57631,57632,57633,57634,57635,57636,57637,57638,57639,57640,57641,57642,57643,57644,57645,57646,57647,57648,57649,57650,57651,57652,57653,57654,57655,57656,57657,57658,57659,57660,57661,57662,57663,57664,57665,57666,57667,57668,57669,57670,57671,57672,57673,57674,57675,57676,57677,57678,57679,57680,57681,57682,57683,57684,57685,57686,57687,57688,57689,57690,57691,57692,57693,57694,57695,57696,57697,57698,57699,57700,57701,57702,57703,57704,57705,57706,57707,57708,57709,57710,57711,57712,57713,57714,57715,57716,57717,57718,57719],[29939,29941,29944,29945,29946,29947,29948,29949,29950,29952,29953,29954,29955,29957,29958,29959,29960,29961,29962,29963,29964,29966,29968,29970,29972,29973,29974,29975,29979,29981,29982,29984,29985,29986,29987,29988,29990,29991,29994,29998,30004,30006,30009,30012,30013,30015,30017,30018,30019,30020,30022,30023,30025,30026,30029,30032,30033,30034,30035,30037,30038,30039,30040,63,30045,30046,30047,30048,30049,30050,30051,30052,30055,30056,30057,30059,30060,30061,30062,30063,30064,30065,30067,30069,30070,30071,30074,30075,30076,30077,30078,30080,30081,30082,30084,30085,30087,57720,57721,57722,57723,57724,57725,57726,57727,57728,57729,57730,57731,57732,57733,57734,57735,57736,57737,57738,57739,57740,57741,57742,57743,57744,57745,57746,57747,57748,57749,57750,57751,57752,57753,57754,57755,57756,57757,57758,57759,57760,57761,57762,57763,57764,57765,57766,57767,57768,57769,57770,57771,57772,57773,57774,57775,57776,57777,57778,57779,57780,57781,57782,57783,57784,57785,57786,57787,57788,57789,57790,57791,57792,57793,57794,57795,57796,57797,57798,57799,57800,57801,57802,57803,57804,57805,57806,57807,57808,57809,57810,57811,57812,57813],[30088,30089,30090,30092,30093,30094,30096,30099,30101,30104,30107,30108,30110,30114,30118,30119,30120,30121,30122,30125,30134,30135,30138,30139,30143,30144,30145,30150,30155,30156,30158,30159,30160,30161,30163,30167,30169,30170,30172,30173,30175,30176,30177,30181,30185,30188,30189,30190,30191,30194,30195,30197,30198,30199,30200,30202,30203,30205,30206,30210,30212,30214,30215,63,30216,30217,30219,30221,30222,30223,30225,30226,30227,30228,30230,30234,30236,30237,30238,30241,30243,30247,30248,30252,30254,30255,30257,30258,30262,30263,30265,30266,30267,30269,30273,30274,30276,57814,57815,57816,57817,57818,57819,57820,57821,57822,57823,57824,57825,57826,57827,57828,57829,57830,57831,57832,57833,57834,57835,57836,57837,57838,57839,57840,57841,57842,57843,57844,57845,57846,57847,57848,57849,57850,57851,57852,57853,57854,57855,57856,57857,57858,57859,57860,57861,57862,57863,57864,57865,57866,57867,57868,57869,57870,57871,57872,57873,57874,57875,57876,57877,57878,57879,57880,57881,57882,57883,57884,57885,57886,57887,57888,57889,57890,57891,57892,57893,57894,57895,57896,57897,57898,57899,57900,57901,57902,57903,57904,57905,57906,57907],[30277,30278,30279,30280,30281,30282,30283,30286,30287,30288,30289,30290,30291,30293,30295,30296,30297,30298,30299,30301,30303,30304,30305,30306,30308,30309,30310,30311,30312,30313,30314,30316,30317,30318,30320,30321,30322,30323,30324,30325,30326,30327,30329,30330,30332,30335,30336,30337,30339,30341,30345,30346,30348,30349,30351,30352,30354,30356,30357,30359,30360,30362,30363,63,30364,30365,30366,30367,30368,30369,30370,30371,30373,30374,30375,30376,30377,30378,30379,30380,30381,30383,30384,30387,30389,30390,30391,30392,30393,30394,30395,30396,30397,30398,30400,30401,30403,21834,38463,22467,25384,21710,21769,21696,30353,30284,34108,30702,33406,30861,29233,38552,38797,27688,23433,20474,25353,26263,23736,33018,26696,32942,26114,30414,20985,25942,29100,32753,34948,20658,22885,25034,28595,33453,25420,25170,21485,21543,31494,20843,30116,24052,25300,36299,38774,25226,32793,22365,38712,32610,29240,30333,26575,30334,25670,20336,36133,25308,31255,26001,29677,25644,25203,33324,39041,26495,29256,25198,25292,20276,29923,21322,21150,32458,37030,24110,26758,27036,33152,32465,26834,30917,34444,38225,20621,35876,33502,32990,21253,35090,21093],[30404,30407,30409,30411,30412,30419,30421,30425,30426,30428,30429,30430,30432,30433,30434,30435,30436,30438,30439,30440,30441,30442,30443,30444,30445,30448,30451,30453,30454,30455,30458,30459,30461,30463,30464,30466,30467,30469,30470,30474,30476,30478,30479,30480,30481,30482,30483,30484,30485,30486,30487,30488,30491,30492,30493,30494,30497,30499,30500,30501,30503,30506,30507,63,30508,30510,30512,30513,30514,30515,30516,30521,30523,30525,30526,30527,30530,30532,30533,30534,30536,30537,30538,30539,30540,30541,30542,30543,30546,30547,30548,30549,30550,30551,30552,30553,30556,34180,38649,20445,22561,39281,23453,25265,25253,26292,35961,40077,29190,26479,30865,24754,21329,21271,36744,32972,36125,38049,20493,29384,22791,24811,28953,34987,22868,33519,26412,31528,23849,32503,29997,27893,36454,36856,36924,40763,27604,37145,31508,24444,30887,34006,34109,27605,27609,27606,24065,24199,30201,38381,25949,24330,24517,36767,22721,33218,36991,38491,38829,36793,32534,36140,25153,20415,21464,21342,36776,36777,36779,36941,26631,24426,33176,34920,40150,24971,21035,30250,24428,25996,28626,28392,23486,25672,20853,20912,26564,19993,31177,39292,28851],[30557,30558,30559,30560,30564,30567,30569,30570,30573,30574,30575,30576,30577,30578,30579,30580,30581,30582,30583,30584,30586,30587,30588,30593,30594,30595,30598,30599,30600,30601,30602,30603,30607,30608,30611,30612,30613,30614,30615,30616,30617,30618,30619,30620,30621,30622,30625,30627,30628,30630,30632,30635,30637,30638,30639,30641,30642,30644,30646,30647,30648,30649,30650,63,30652,30654,30656,30657,30658,30659,30660,30661,30662,30663,30664,30665,30666,30667,30668,30670,30671,30672,30673,30674,30675,30676,30677,30678,30680,30681,30682,30685,30686,30687,30688,30689,30692,30149,24182,29627,33760,25773,25320,38069,27874,21338,21187,25615,38082,31636,20271,24091,33334,33046,33162,28196,27850,39539,25429,21340,21754,34917,22496,19981,24067,27493,31807,37096,24598,25830,29468,35009,26448,25165,36130,30572,36393,37319,24425,33756,34081,39184,21442,34453,27531,24813,24808,28799,33485,33329,20179,27815,34255,25805,31961,27133,26361,33609,21397,31574,20391,20876,27979,23618,36461,25554,21449,33580,33590,26597,30900,25661,23519,23700,24046,35815,25286,26612,35962,25600,25530,34633,39307,35863,32544,38130,20135,38416,39076,26124,29462],[30694,30696,30698,30703,30704,30705,30706,30708,30709,30711,30713,30714,30715,30716,30723,30724,30725,30726,30727,30728,30730,30731,30734,30735,30736,30739,30741,30745,30747,30750,30752,30753,30754,30756,30760,30762,30763,30766,30767,30769,30770,30771,30773,30774,30781,30783,30785,30786,30787,30788,30790,30792,30793,30794,30795,30797,30799,30801,30803,30804,30808,30809,30810,63,30811,30812,30814,30815,30816,30817,30818,30819,30820,30821,30822,30823,30824,30825,30831,30832,30833,30834,30835,30836,30837,30838,30840,30841,30842,30843,30845,30846,30847,30848,30849,30850,30851,22330,23581,24120,38271,20607,32928,21378,25950,30021,21809,20513,36229,25220,38046,26397,22066,28526,24034,21557,28818,36710,25199,25764,25507,24443,28552,37108,33251,36784,23576,26216,24561,27785,38472,36225,34924,25745,31216,22478,27225,25104,21576,20056,31243,24809,28548,35802,25215,36894,39563,31204,21507,30196,25345,21273,27744,36831,24347,39536,32827,40831,20360,23610,36196,32709,26021,28861,20805,20914,34411,23815,23456,25277,37228,30068,36364,31264,24833,31609,20167,32504,30597,19985,33261,21021,20986,27249,21416,36487,38148,38607,28353,38500,26970],[30852,30853,30854,30856,30858,30859,30863,30864,30866,30868,30869,30870,30873,30877,30878,30880,30882,30884,30886,30888,30889,30890,30891,30892,30893,30894,30895,30901,30902,30903,30904,30906,30907,30908,30909,30911,30912,30914,30915,30916,30918,30919,30920,30924,30925,30926,30927,30929,30930,30931,30934,30935,30936,30938,30939,30940,30941,30942,30943,30944,30945,30946,30947,63,30948,30949,30950,30951,30953,30954,30955,30957,30958,30959,30960,30961,30963,30965,30966,30968,30969,30971,30972,30973,30974,30975,30976,30978,30979,30980,30982,30983,30984,30985,30986,30987,30988,30784,20648,30679,25616,35302,22788,25571,24029,31359,26941,20256,33337,21912,20018,30126,31383,24162,24202,38383,21019,21561,28810,25462,38180,22402,26149,26943,37255,21767,28147,32431,34850,25139,32496,30133,33576,30913,38604,36766,24904,29943,35789,27492,21050,36176,27425,32874,33905,22257,21254,20174,19995,20945,31895,37259,31751,20419,36479,31713,31388,25703,23828,20652,33030,30209,31929,28140,32736,26449,23384,23544,30923,25774,25619,25514,25387,38169,25645,36798,31572,30249,25171,22823,21574,27513,20643,25140,24102,27526,20195,36151,34955,24453,36910],[30989,30990,30991,30992,30993,30994,30996,30997,30998,30999,31E3,31001,31002,31003,31004,31005,31007,31008,31009,31010,31011,31013,31014,31015,31016,31017,31018,31019,31020,31021,31022,31023,31024,31025,31026,31027,31029,31030,31031,31032,31033,31037,31039,31042,31043,31044,31045,31047,31050,31051,31052,31053,31054,31055,31056,31057,31058,31060,31061,31064,31065,31073,31075,63,31076,31078,31081,31082,31083,31084,31086,31088,31089,31090,31091,31092,31093,31094,31097,31099,31100,31101,31102,31103,31106,31107,31110,31111,31112,31113,31115,31116,31117,31118,31120,31121,31122,24608,32829,25285,20025,21333,37112,25528,32966,26086,27694,20294,24814,28129,35806,24377,34507,24403,25377,20826,33633,26723,20992,25443,36424,20498,23707,31095,23548,21040,31291,24764,36947,30423,24503,24471,30340,36460,28783,30331,31561,30634,20979,37011,22564,20302,28404,36842,25932,31515,29380,28068,32735,23265,25269,24213,22320,33922,31532,24093,24351,36882,32532,39072,25474,28359,30872,28857,20856,38747,22443,30005,20291,30008,24215,24806,22880,28096,27583,30857,21500,38613,20939,20993,25481,21514,38035,35843,36300,29241,30879,34678,36845,35853,21472],[31123,31124,31125,31126,31127,31128,31129,31131,31132,31133,31134,31135,31136,31137,31138,31139,31140,31141,31142,31144,31145,31146,31147,31148,31149,31150,31151,31152,31153,31154,31156,31157,31158,31159,31160,31164,31167,31170,31172,31173,31175,31176,31178,31180,31182,31183,31184,31187,31188,31190,31191,31193,31194,31195,31196,31197,31198,31200,31201,31202,31205,31208,31210,63,31212,31214,31217,31218,31219,31220,31221,31222,31223,31225,31226,31228,31230,31231,31233,31236,31237,31239,31240,31241,31242,31244,31247,31248,31249,31250,31251,31253,31254,31256,31257,31259,31260,19969,30447,21486,38025,39030,40718,38189,23450,35746,20002,19996,20908,33891,25026,21160,26635,20375,24683,20923,27934,20828,25238,26007,38497,35910,36887,30168,37117,30563,27602,29322,29420,35835,22581,30585,36172,26460,38208,32922,24230,28193,22930,31471,30701,38203,27573,26029,32526,22534,20817,38431,23545,22697,21544,36466,25958,39039,22244,38045,30462,36929,25479,21702,22810,22842,22427,36530,26421,36346,33333,21057,24816,22549,34558,23784,40517,20420,39069,35769,23077,24694,21380,25212,36943,37122,39295,24681,32780,20799,32819,23572,39285,27953,20108],[31261,31263,31265,31266,31268,31269,31270,31271,31272,31273,31274,31275,31276,31277,31278,31279,31280,31281,31282,31284,31285,31286,31288,31290,31294,31296,31297,31298,31299,31300,31301,31303,31304,31305,31306,31307,31308,31309,31310,31311,31312,31314,31315,31316,31317,31318,31320,31321,31322,31323,31324,31325,31326,31327,31328,31329,31330,31331,31332,31333,31334,31335,31336,63,31337,31338,31339,31340,31341,31342,31343,31345,31346,31347,31349,31355,31356,31357,31358,31362,31365,31367,31369,31370,31371,31372,31374,31375,31376,31379,31380,31385,31386,31387,31390,31393,31394,36144,21457,32602,31567,20240,20047,38400,27861,29648,34281,24070,30058,32763,27146,30718,38034,32321,20961,28902,21453,36820,33539,36137,29359,39277,27867,22346,33459,26041,32938,25151,38450,22952,20223,35775,32442,25918,33778,38750,21857,39134,32933,21290,35837,21536,32954,24223,27832,36153,33452,37210,21545,27675,20998,32439,22367,28954,27774,31881,22859,20221,24575,24868,31914,20016,23553,26539,34562,23792,38155,39118,30127,28925,36898,20911,32541,35773,22857,20964,20315,21542,22827,25975,32932,23413,25206,25282,36752,24133,27679,31526,20239,20440,26381],[31395,31396,31399,31401,31402,31403,31406,31407,31408,31409,31410,31412,31413,31414,31415,31416,31417,31418,31419,31420,31421,31422,31424,31425,31426,31427,31428,31429,31430,31431,31432,31433,31434,31436,31437,31438,31439,31440,31441,31442,31443,31444,31445,31447,31448,31450,31451,31452,31453,31457,31458,31460,31463,31464,31465,31466,31467,31468,31470,31472,31473,31474,31475,63,31476,31477,31478,31479,31480,31483,31484,31486,31488,31489,31490,31493,31495,31497,31500,31501,31502,31504,31506,31507,31510,31511,31512,31514,31516,31517,31519,31521,31522,31523,31527,31529,31533,28014,28074,31119,34993,24343,29995,25242,36741,20463,37340,26023,33071,33105,24220,33104,36212,21103,35206,36171,22797,20613,20184,38428,29238,33145,36127,23500,35747,38468,22919,32538,21648,22134,22030,35813,25913,27010,38041,30422,28297,24178,29976,26438,26577,31487,32925,36214,24863,31174,25954,36195,20872,21018,38050,32568,32923,32434,23703,28207,26464,31705,30347,39640,33167,32660,31957,25630,38224,31295,21578,21733,27468,25601,25096,40509,33011,30105,21106,38761,33883,26684,34532,38401,38548,38124,20010,21508,32473,26681,36319,32789,26356,24218,32697],[31535,31536,31538,31540,31541,31542,31543,31545,31547,31549,31551,31552,31553,31554,31555,31556,31558,31560,31562,31565,31566,31571,31573,31575,31577,31580,31582,31583,31585,31587,31588,31589,31590,31591,31592,31593,31594,31595,31596,31597,31599,31600,31603,31604,31606,31608,31610,31612,31613,31615,31617,31618,31619,31620,31622,31623,31624,31625,31626,31627,31628,31630,31631,63,31633,31634,31635,31638,31640,31641,31642,31643,31646,31647,31648,31651,31652,31653,31662,31663,31664,31666,31667,31669,31670,31671,31673,31674,31675,31676,31677,31678,31679,31680,31682,31683,31684,22466,32831,26775,24037,25915,21151,24685,40858,20379,36524,20844,23467,24339,24041,27742,25329,36129,20849,38057,21246,27807,33503,29399,22434,26500,36141,22815,36764,33735,21653,31629,20272,27837,23396,22993,40723,21476,34506,39592,35895,32929,25925,39038,22266,38599,21038,29916,21072,23521,25346,35074,20054,25296,24618,26874,20851,23448,20896,35266,31649,39302,32592,24815,28748,36143,20809,24191,36891,29808,35268,22317,30789,24402,40863,38394,36712,39740,35809,30328,26690,26588,36330,36149,21053,36746,28378,26829,38149,37101,22269,26524,35065,36807,21704],[31685,31688,31689,31690,31691,31693,31694,31695,31696,31698,31700,31701,31702,31703,31704,31707,31708,31710,31711,31712,31714,31715,31716,31719,31720,31721,31723,31724,31725,31727,31728,31730,31731,31732,31733,31734,31736,31737,31738,31739,31741,31743,31744,31745,31746,31747,31748,31749,31750,31752,31753,31754,31757,31758,31760,31761,31762,31763,31764,31765,31767,31768,31769,63,31770,31771,31772,31773,31774,31776,31777,31778,31779,31780,31781,31784,31785,31787,31788,31789,31790,31791,31792,31793,31794,31795,31796,31797,31798,31799,31801,31802,31803,31804,31805,31806,31810,39608,23401,28023,27686,20133,23475,39559,37219,25E3,37039,38889,21547,28085,23506,20989,21898,32597,32752,25788,25421,26097,25022,24717,28938,27735,27721,22831,26477,33322,22741,22158,35946,27627,37085,22909,32791,21495,28009,21621,21917,33655,33743,26680,31166,21644,20309,21512,30418,35977,38402,27827,28088,36203,35088,40548,36154,22079,40657,30165,24456,29408,24680,21756,20136,27178,34913,24658,36720,21700,28888,34425,40511,27946,23439,24344,32418,21897,20399,29492,21564,21402,20505,21518,21628,20046,24573,29786,22774,33899,32993,34676,29392,31946,28246],[31811,31812,31813,31814,31815,31816,31817,31818,31819,31820,31822,31823,31824,31825,31826,31827,31828,31829,31830,31831,31832,31833,31834,31835,31836,31837,31838,31839,31840,31841,31842,31843,31844,31845,31846,31847,31848,31849,31850,31851,31852,31853,31854,31855,31856,31857,31858,31861,31862,31863,31864,31865,31866,31870,31871,31872,31873,31874,31875,31876,31877,31878,31879,63,31880,31882,31883,31884,31885,31886,31887,31888,31891,31892,31894,31897,31898,31899,31904,31905,31907,31910,31911,31912,31913,31915,31916,31917,31919,31920,31924,31925,31926,31927,31928,31930,31931,24359,34382,21804,25252,20114,27818,25143,33457,21719,21326,29502,28369,30011,21010,21270,35805,27088,24458,24576,28142,22351,27426,29615,26707,36824,32531,25442,24739,21796,30186,35938,28949,28067,23462,24187,33618,24908,40644,30970,34647,31783,30343,20976,24822,29004,26179,24140,24653,35854,28784,25381,36745,24509,24674,34516,22238,27585,24724,24935,21321,24800,26214,36159,31229,20250,28905,27719,35763,35826,32472,33636,26127,23130,39746,27985,28151,35905,27963,20249,28779,33719,25110,24785,38669,36135,31096,20987,22334,22522,26426,30072,31293,31215,31637],[31935,31936,31938,31939,31940,31942,31945,31947,31950,31951,31952,31953,31954,31955,31956,31960,31962,31963,31965,31966,31969,31970,31971,31972,31973,31974,31975,31977,31978,31979,31980,31981,31982,31984,31985,31986,31987,31988,31989,31990,31991,31993,31994,31996,31997,31998,31999,32E3,32001,32002,32003,32004,32005,32006,32007,32008,32009,32011,32012,32013,32014,32015,32016,63,32017,32018,32019,32020,32021,32022,32023,32024,32025,32026,32027,32028,32029,32030,32031,32033,32035,32036,32037,32038,32040,32041,32042,32044,32045,32046,32048,32049,32050,32051,32052,32053,32054,32908,39269,36857,28608,35749,40481,23020,32489,32521,21513,26497,26840,36753,31821,38598,21450,24613,30142,27762,21363,23241,32423,25380,20960,33034,24049,34015,25216,20864,23395,20238,31085,21058,24760,27982,23492,23490,35745,35760,26082,24524,38469,22931,32487,32426,22025,26551,22841,20339,23478,21152,33626,39050,36158,30002,38078,20551,31292,20215,26550,39550,23233,27516,30417,22362,23574,31546,38388,29006,20860,32937,33392,22904,32516,33575,26816,26604,30897,30839,25315,25441,31616,20461,21098,20943,33616,27099,37492,36341,36145,35265,38190,31661,20214],[32055,32056,32057,32058,32059,32060,32061,32062,32063,32064,32065,32066,32067,32068,32069,32070,32071,32072,32073,32074,32075,32076,32077,32078,32079,32080,32081,32082,32083,32084,32085,32086,32087,32088,32089,32090,32091,32092,32093,32094,32095,32096,32097,32098,32099,32100,32101,32102,32103,32104,32105,32106,32107,32108,32109,32111,32112,32113,32114,32115,32116,32117,32118,63,32120,32121,32122,32123,32124,32125,32126,32127,32128,32129,32130,32131,32132,32133,32134,32135,32136,32137,32138,32139,32140,32141,32142,32143,32144,32145,32146,32147,32148,32149,32150,32151,32152,20581,33328,21073,39279,28176,28293,28071,24314,20725,23004,23558,27974,27743,30086,33931,26728,22870,35762,21280,37233,38477,34121,26898,30977,28966,33014,20132,37066,27975,39556,23047,22204,25605,38128,30699,20389,33050,29409,35282,39290,32564,32478,21119,25945,37237,36735,36739,21483,31382,25581,25509,30342,31224,34903,38454,25130,21163,33410,26708,26480,25463,30571,31469,27905,32467,35299,22992,25106,34249,33445,30028,20511,20171,30117,35819,23626,24062,31563,26020,37329,20170,27941,35167,32039,38182,20165,35880,36827,38771,26187,31105,36817,28908,28024],[32153,32154,32155,32156,32157,32158,32159,32160,32161,32162,32163,32164,32165,32167,32168,32169,32170,32171,32172,32173,32175,32176,32177,32178,32179,32180,32181,32182,32183,32184,32185,32186,32187,32188,32189,32190,32191,32192,32193,32194,32195,32196,32197,32198,32199,32200,32201,32202,32203,32204,32205,32206,32207,32208,32209,32210,32211,32212,32213,32214,32215,32216,32217,63,32218,32219,32220,32221,32222,32223,32224,32225,32226,32227,32228,32229,32230,32231,32232,32233,32234,32235,32236,32237,32238,32239,32240,32241,32242,32243,32244,32245,32246,32247,32248,32249,32250,23613,21170,33606,20834,33550,30555,26230,40120,20140,24778,31934,31923,32463,20117,35686,26223,39048,38745,22659,25964,38236,24452,30153,38742,31455,31454,20928,28847,31384,25578,31350,32416,29590,38893,20037,28792,20061,37202,21417,25937,26087,33276,33285,21646,23601,30106,38816,25304,29401,30141,23621,39545,33738,23616,21632,30697,20030,27822,32858,25298,25454,24040,20855,36317,36382,38191,20465,21477,24807,28844,21095,25424,40515,23071,20518,30519,21367,32482,25733,25899,25225,25496,20500,29237,35273,20915,35776,32477,22343,33740,38055,20891,21531,23803],[32251,32252,32253,32254,32255,32256,32257,32258,32259,32260,32261,32262,32263,32264,32265,32266,32267,32268,32269,32270,32271,32272,32273,32274,32275,32276,32277,32278,32279,32280,32281,32282,32283,32284,32285,32286,32287,32288,32289,32290,32291,32292,32293,32294,32295,32296,32297,32298,32299,32300,32301,32302,32303,32304,32305,32306,32307,32308,32309,32310,32311,32312,32313,63,32314,32316,32317,32318,32319,32320,32322,32323,32324,32325,32326,32328,32329,32330,32331,32332,32333,32334,32335,32336,32337,32338,32339,32340,32341,32342,32343,32344,32345,32346,32347,32348,32349,20426,31459,27994,37089,39567,21888,21654,21345,21679,24320,25577,26999,20975,24936,21002,22570,21208,22350,30733,30475,24247,24951,31968,25179,25239,20130,28821,32771,25335,28900,38752,22391,33499,26607,26869,30933,39063,31185,22771,21683,21487,28212,20811,21051,23458,35838,32943,21827,22438,24691,22353,21549,31354,24656,23380,25511,25248,21475,25187,23495,26543,21741,31391,33510,37239,24211,35044,22840,22446,25358,36328,33007,22359,31607,20393,24555,23485,27454,21281,31568,29378,26694,30719,30518,26103,20917,20111,30420,23743,31397,33909,22862,39745,20608],[32350,32351,32352,32353,32354,32355,32356,32357,32358,32359,32360,32361,32362,32363,32364,32365,32366,32367,32368,32369,32370,32371,32372,32373,32374,32375,32376,32377,32378,32379,32380,32381,32382,32383,32384,32385,32387,32388,32389,32390,32391,32392,32393,32394,32395,32396,32397,32398,32399,32400,32401,32402,32403,32404,32405,32406,32407,32408,32409,32410,32412,32413,32414,63,32430,32436,32443,32444,32470,32484,32492,32505,32522,32528,32542,32567,32569,32571,32572,32573,32574,32575,32576,32577,32579,32582,32583,32584,32585,32586,32587,32588,32589,32590,32591,32594,32595,39304,24871,28291,22372,26118,25414,22256,25324,25193,24275,38420,22403,25289,21895,34593,33098,36771,21862,33713,26469,36182,34013,23146,26639,25318,31726,38417,20848,28572,35888,25597,35272,25042,32518,28866,28389,29701,27028,29436,24266,37070,26391,28010,25438,21171,29282,32769,20332,23013,37226,28889,28061,21202,20048,38647,38253,34174,30922,32047,20769,22418,25794,32907,31867,27882,26865,26974,20919,21400,26792,29313,40654,31729,29432,31163,28435,29702,26446,37324,40100,31036,33673,33620,21519,26647,20029,21385,21169,30782,21382,21033,20616,20363,20432],[32598,32601,32603,32604,32605,32606,32608,32611,32612,32613,32614,32615,32619,32620,32621,32623,32624,32627,32629,32630,32631,32632,32634,32635,32636,32637,32639,32640,32642,32643,32644,32645,32646,32647,32648,32649,32651,32653,32655,32656,32657,32658,32659,32661,32662,32663,32664,32665,32667,32668,32672,32674,32675,32677,32678,32680,32681,32682,32683,32684,32685,32686,32689,63,32691,32692,32693,32694,32695,32698,32699,32702,32704,32706,32707,32708,32710,32711,32712,32713,32715,32717,32719,32720,32721,32722,32723,32726,32727,32729,32730,32731,32732,32733,32734,32738,32739,30178,31435,31890,27813,38582,21147,29827,21737,20457,32852,33714,36830,38256,24265,24604,28063,24088,25947,33080,38142,24651,28860,32451,31918,20937,26753,31921,33391,20004,36742,37327,26238,20142,35845,25769,32842,20698,30103,29134,23525,36797,28518,20102,25730,38243,24278,26009,21015,35010,28872,21155,29454,29747,26519,30967,38678,20020,37051,40158,28107,20955,36161,21533,25294,29618,33777,38646,40836,38083,20278,32666,20940,28789,38517,23725,39046,21478,20196,28316,29705,27060,30827,39311,30041,21016,30244,27969,26611,20845,40857,32843,21657,31548,31423],[32740,32743,32744,32746,32747,32748,32749,32751,32754,32756,32757,32758,32759,32760,32761,32762,32765,32766,32767,32770,32775,32776,32777,32778,32782,32783,32785,32787,32794,32795,32797,32798,32799,32801,32803,32804,32811,32812,32813,32814,32815,32816,32818,32820,32825,32826,32828,32830,32832,32833,32836,32837,32839,32840,32841,32846,32847,32848,32849,32851,32853,32854,32855,63,32857,32859,32860,32861,32862,32863,32864,32865,32866,32867,32868,32869,32870,32871,32872,32875,32876,32877,32878,32879,32880,32882,32883,32884,32885,32886,32887,32888,32889,32890,32891,32892,32893,38534,22404,25314,38471,27004,23044,25602,31699,28431,38475,33446,21346,39045,24208,28809,25523,21348,34383,40065,40595,30860,38706,36335,36162,40575,28510,31108,24405,38470,25134,39540,21525,38109,20387,26053,23653,23649,32533,34385,27695,24459,29575,28388,32511,23782,25371,23402,28390,21365,20081,25504,30053,25249,36718,20262,20177,27814,32438,35770,33821,34746,32599,36923,38179,31657,39585,35064,33853,27931,39558,32476,22920,40635,29595,30721,34434,39532,39554,22043,21527,22475,20080,40614,21334,36808,33033,30610,39314,34542,28385,34067,26364,24930,28459],[32894,32897,32898,32901,32904,32906,32909,32910,32911,32912,32913,32914,32916,32917,32919,32921,32926,32931,32934,32935,32936,32940,32944,32947,32949,32950,32952,32953,32955,32965,32967,32968,32969,32970,32971,32975,32976,32977,32978,32979,32980,32981,32984,32991,32992,32994,32995,32998,33006,33013,33015,33017,33019,33022,33023,33024,33025,33027,33028,33029,33031,33032,33035,63,33036,33045,33047,33049,33051,33052,33053,33055,33056,33057,33058,33059,33060,33061,33062,33063,33064,33065,33066,33067,33069,33070,33072,33075,33076,33077,33079,33081,33082,33083,33084,33085,33087,35881,33426,33579,30450,27667,24537,33725,29483,33541,38170,27611,30683,38086,21359,33538,20882,24125,35980,36152,20040,29611,26522,26757,37238,38665,29028,27809,30473,23186,38209,27599,32654,26151,23504,22969,23194,38376,38391,20204,33804,33945,27308,30431,38192,29467,26790,23391,30511,37274,38753,31964,36855,35868,24357,31859,31192,35269,27852,34588,23494,24130,26825,30496,32501,20885,20813,21193,23081,32517,38754,33495,25551,30596,34256,31186,28218,24217,22937,34065,28781,27665,25279,30399,25935,24751,38397,26126,34719,40483,38125,21517,21629,35884,25720],[33088,33089,33090,33091,33092,33093,33095,33097,33101,33102,33103,33106,33110,33111,33112,33115,33116,33117,33118,33119,33121,33122,33123,33124,33126,33128,33130,33131,33132,33135,33138,33139,33141,33142,33143,33144,33153,33155,33156,33157,33158,33159,33161,33163,33164,33165,33166,33168,33170,33171,33172,33173,33174,33175,33177,33178,33182,33183,33184,33185,33186,33188,33189,63,33191,33193,33195,33196,33197,33198,33199,33200,33201,33202,33204,33205,33206,33207,33208,33209,33212,33213,33214,33215,33220,33221,33223,33224,33225,33227,33229,33230,33231,33232,33233,33234,33235,25721,34321,27169,33180,30952,25705,39764,25273,26411,33707,22696,40664,27819,28448,23518,38476,35851,29279,26576,25287,29281,20137,22982,27597,22675,26286,24149,21215,24917,26408,30446,30566,29287,31302,25343,21738,21584,38048,37027,23068,32435,27670,20035,22902,32784,22856,21335,30007,38590,22218,25376,33041,24700,38393,28118,21602,39297,20869,23273,33021,22958,38675,20522,27877,23612,25311,20320,21311,33147,36870,28346,34091,25288,24180,30910,25781,25467,24565,23064,37247,40479,23615,25423,32834,23421,21870,38218,38221,28037,24744,26592,29406,20957,23425],[33236,33237,33238,33239,33240,33241,33242,33243,33244,33245,33246,33247,33248,33249,33250,33252,33253,33254,33256,33257,33259,33262,33263,33264,33265,33266,33269,33270,33271,33272,33273,33274,33277,33279,33283,33287,33288,33289,33290,33291,33294,33295,33297,33299,33301,33302,33303,33304,33305,33306,33309,33312,33316,33317,33318,33319,33321,33326,33330,33338,33340,33341,33343,63,33344,33345,33346,33347,33349,33350,33352,33354,33356,33357,33358,33360,33361,33362,33363,33364,33365,33366,33367,33369,33371,33372,33373,33374,33376,33377,33378,33379,33380,33381,33382,33383,33385,25319,27870,29275,25197,38062,32445,33043,27987,20892,24324,22900,21162,24594,22899,26262,34384,30111,25386,25062,31983,35834,21734,27431,40485,27572,34261,21589,20598,27812,21866,36276,29228,24085,24597,29750,25293,25490,29260,24472,28227,27966,25856,28504,30424,30928,30460,30036,21028,21467,20051,24222,26049,32810,32982,25243,21638,21032,28846,34957,36305,27873,21624,32986,22521,35060,36180,38506,37197,20329,27803,21943,30406,30768,25256,28921,28558,24429,34028,26842,30844,31735,33192,26379,40527,25447,30896,22383,30738,38713,25209,25259,21128,29749,27607],[33386,33387,33388,33389,33393,33397,33398,33399,33400,33403,33404,33408,33409,33411,33413,33414,33415,33417,33420,33424,33427,33428,33429,33430,33434,33435,33438,33440,33442,33443,33447,33458,33461,33462,33466,33467,33468,33471,33472,33474,33475,33477,33478,33481,33488,33494,33497,33498,33501,33506,33511,33512,33513,33514,33516,33517,33518,33520,33522,33523,33525,33526,33528,63,33530,33532,33533,33534,33535,33536,33546,33547,33549,33552,33554,33555,33558,33560,33561,33565,33566,33567,33568,33569,33570,33571,33572,33573,33574,33577,33578,33582,33584,33586,33591,33595,33597,21860,33086,30130,30382,21305,30174,20731,23617,35692,31687,20559,29255,39575,39128,28418,29922,31080,25735,30629,25340,39057,36139,21697,32856,20050,22378,33529,33805,24179,20973,29942,35780,23631,22369,27900,39047,23110,30772,39748,36843,31893,21078,25169,38138,20166,33670,33889,33769,33970,22484,26420,22275,26222,28006,35889,26333,28689,26399,27450,26646,25114,22971,19971,20932,28422,26578,27791,20854,26827,22855,27495,30054,23822,33040,40784,26071,31048,31041,39569,36215,23682,20062,20225,21551,22865,30732,22120,27668,36804,24323,27773,27875,35755,25488],[33598,33599,33601,33602,33604,33605,33608,33610,33611,33612,33613,33614,33619,33621,33622,33623,33624,33625,33629,33634,33648,33649,33650,33651,33652,33653,33654,33657,33658,33662,33663,33664,33665,33666,33667,33668,33671,33672,33674,33675,33676,33677,33679,33680,33681,33684,33685,33686,33687,33689,33690,33693,33695,33697,33698,33699,33700,33701,33702,33703,33708,33709,33710,63,33711,33717,33723,33726,33727,33730,33731,33732,33734,33736,33737,33739,33741,33742,33744,33745,33746,33747,33749,33751,33753,33754,33755,33758,33762,33763,33764,33766,33767,33768,33771,33772,33773,24688,27965,29301,25190,38030,38085,21315,36801,31614,20191,35878,20094,40660,38065,38067,21069,28508,36963,27973,35892,22545,23884,27424,27465,26538,21595,33108,32652,22681,34103,24378,25250,27207,38201,25970,24708,26725,30631,20052,20392,24039,38808,25772,32728,23789,20431,31373,20999,33540,19988,24623,31363,38054,20405,20146,31206,29748,21220,33465,25810,31165,23517,27777,38738,36731,27682,20542,21375,28165,25806,26228,27696,24773,39031,35831,24198,29756,31351,31179,19992,37041,29699,27714,22234,37195,27845,36235,21306,34502,26354,36527,23624,39537,28192],[33774,33775,33779,33780,33781,33782,33783,33786,33787,33788,33790,33791,33792,33794,33797,33799,33800,33801,33802,33808,33810,33811,33812,33813,33814,33815,33817,33818,33819,33822,33823,33824,33825,33826,33827,33833,33834,33835,33836,33837,33838,33839,33840,33842,33843,33844,33845,33846,33847,33849,33850,33851,33854,33855,33856,33857,33858,33859,33860,33861,33863,33864,33865,63,33866,33867,33868,33869,33870,33871,33872,33874,33875,33876,33877,33878,33880,33885,33886,33887,33888,33890,33892,33893,33894,33895,33896,33898,33902,33903,33904,33906,33908,33911,33913,33915,33916,21462,23094,40843,36259,21435,22280,39079,26435,37275,27849,20840,30154,25331,29356,21048,21149,32570,28820,30264,21364,40522,27063,30830,38592,35033,32676,28982,29123,20873,26579,29924,22756,25880,22199,35753,39286,25200,32469,24825,28909,22764,20161,20154,24525,38887,20219,35748,20995,22922,32427,25172,20173,26085,25102,33592,33993,33635,34701,29076,28342,23481,32466,20887,25545,26580,32905,33593,34837,20754,23418,22914,36785,20083,27741,20837,35109,36719,38446,34122,29790,38160,38384,28070,33509,24369,25746,27922,33832,33134,40131,22622,36187,19977,21441],[33917,33918,33919,33920,33921,33923,33924,33925,33926,33930,33933,33935,33936,33937,33938,33939,33940,33941,33942,33944,33946,33947,33949,33950,33951,33952,33954,33955,33956,33957,33958,33959,33960,33961,33962,33963,33964,33965,33966,33968,33969,33971,33973,33974,33975,33979,33980,33982,33984,33986,33987,33989,33990,33991,33992,33995,33996,33998,33999,34002,34004,34005,34007,63,34008,34009,34010,34011,34012,34014,34017,34018,34020,34023,34024,34025,34026,34027,34029,34030,34031,34033,34034,34035,34036,34037,34038,34039,34040,34041,34042,34043,34045,34046,34048,34049,34050,20254,25955,26705,21971,20007,25620,39578,25195,23234,29791,33394,28073,26862,20711,33678,30722,26432,21049,27801,32433,20667,21861,29022,31579,26194,29642,33515,26441,23665,21024,29053,34923,38378,38485,25797,36193,33203,21892,27733,25159,32558,22674,20260,21830,36175,26188,19978,23578,35059,26786,25422,31245,28903,33421,21242,38902,23569,21736,37045,32461,22882,36170,34503,33292,33293,36198,25668,23556,24913,28041,31038,35774,30775,30003,21627,20280,36523,28145,23072,32453,31070,27784,23457,23158,29978,32958,24910,28183,22768,29983,29989,29298,21319,32499],[34051,34052,34053,34054,34055,34056,34057,34058,34059,34061,34062,34063,34064,34066,34068,34069,34070,34072,34073,34075,34076,34077,34078,34080,34082,34083,34084,34085,34086,34087,34088,34089,34090,34093,34094,34095,34096,34097,34098,34099,34100,34101,34102,34110,34111,34112,34113,34114,34116,34117,34118,34119,34123,34124,34125,34126,34127,34128,34129,34130,34131,34132,34133,63,34135,34136,34138,34139,34140,34141,34143,34144,34145,34146,34147,34149,34150,34151,34153,34154,34155,34156,34157,34158,34159,34160,34161,34163,34165,34166,34167,34168,34172,34173,34175,34176,34177,30465,30427,21097,32988,22307,24072,22833,29422,26045,28287,35799,23608,34417,21313,30707,25342,26102,20160,39135,34432,23454,35782,21490,30690,20351,23630,39542,22987,24335,31034,22763,19990,26623,20107,25325,35475,36893,21183,26159,21980,22124,36866,20181,20365,37322,39280,27663,24066,24643,23460,35270,35797,25910,25163,39318,23432,23551,25480,21806,21463,30246,20861,34092,26530,26803,27530,25234,36755,21460,33298,28113,30095,20070,36174,23408,29087,34223,26257,26329,32626,34560,40653,40736,23646,26415,36848,26641,26463,25101,31446,22661,24246,25968,28465],[34178,34179,34182,34184,34185,34186,34187,34188,34189,34190,34192,34193,34194,34195,34196,34197,34198,34199,34200,34201,34202,34205,34206,34207,34208,34209,34210,34211,34213,34214,34215,34217,34219,34220,34221,34225,34226,34227,34228,34229,34230,34232,34234,34235,34236,34237,34238,34239,34240,34242,34243,34244,34245,34246,34247,34248,34250,34251,34252,34253,34254,34257,34258,63,34260,34262,34263,34264,34265,34266,34267,34269,34270,34271,34272,34273,34274,34275,34277,34278,34279,34280,34282,34283,34284,34285,34286,34287,34288,34289,34290,34291,34292,34293,34294,34295,34296,24661,21047,32781,25684,34928,29993,24069,26643,25332,38684,21452,29245,35841,27700,30561,31246,21550,30636,39034,33308,35828,30805,26388,28865,26031,25749,22070,24605,31169,21496,19997,27515,32902,23546,21987,22235,20282,20284,39282,24051,26494,32824,24578,39042,36865,23435,35772,35829,25628,33368,25822,22013,33487,37221,20439,32032,36895,31903,20723,22609,28335,23487,35785,32899,37240,33948,31639,34429,38539,38543,32485,39635,30862,23681,31319,36930,38567,31071,23385,25439,31499,34001,26797,21766,32553,29712,32034,38145,25152,22604,20182,23427,22905,22612],[34297,34298,34300,34301,34302,34304,34305,34306,34307,34308,34310,34311,34312,34313,34314,34315,34316,34317,34318,34319,34320,34322,34323,34324,34325,34327,34328,34329,34330,34331,34332,34333,34334,34335,34336,34337,34338,34339,34340,34341,34342,34344,34346,34347,34348,34349,34350,34351,34352,34353,34354,34355,34356,34357,34358,34359,34361,34362,34363,34365,34366,34367,34368,63,34369,34370,34371,34372,34373,34374,34375,34376,34377,34378,34379,34380,34386,34387,34389,34390,34391,34392,34393,34395,34396,34397,34399,34400,34401,34403,34404,34405,34406,34407,34408,34409,34410,29549,25374,36427,36367,32974,33492,25260,21488,27888,37214,22826,24577,27760,22349,25674,36138,30251,28393,22363,27264,30192,28525,35885,35848,22374,27631,34962,30899,25506,21497,28845,27748,22616,25642,22530,26848,33179,21776,31958,20504,36538,28108,36255,28907,25487,28059,28372,32486,33796,26691,36867,28120,38518,35752,22871,29305,34276,33150,30140,35466,26799,21076,36386,38161,25552,39064,36420,21884,20307,26367,22159,24789,28053,21059,23625,22825,28155,22635,3E4,29980,24684,33300,33094,25361,26465,36834,30522,36339,36148,38081,24086,21381,21548,28867],[34413,34415,34416,34418,34419,34420,34421,34422,34423,34424,34435,34436,34437,34438,34439,34440,34441,34446,34447,34448,34449,34450,34452,34454,34455,34456,34457,34458,34459,34462,34463,34464,34465,34466,34469,34470,34475,34477,34478,34482,34483,34487,34488,34489,34491,34492,34493,34494,34495,34497,34498,34499,34501,34504,34508,34509,34514,34515,34517,34518,34519,34522,34524,63,34525,34528,34529,34530,34531,34533,34534,34535,34536,34538,34539,34540,34543,34549,34550,34551,34554,34555,34556,34557,34559,34561,34564,34565,34566,34571,34572,34574,34575,34576,34577,34580,34582,27712,24311,20572,20141,24237,25402,33351,36890,26704,37230,30643,21516,38108,24420,31461,26742,25413,31570,32479,30171,20599,25237,22836,36879,20984,31171,31361,22270,24466,36884,28034,23648,22303,21520,20820,28237,22242,25512,39059,33151,34581,35114,36864,21534,23663,33216,25302,25176,33073,40501,38464,39534,39548,26925,22949,25299,21822,25366,21703,34521,27964,23043,29926,34972,27498,22806,35916,24367,28286,29609,39037,20024,28919,23436,30871,25405,26202,30358,24779,23451,23113,19975,33109,27754,29579,20129,26505,32593,24448,26106,26395,24536,22916,23041],[34585,34587,34589,34591,34592,34596,34598,34599,34600,34602,34603,34604,34605,34607,34608,34610,34611,34613,34614,34616,34617,34618,34620,34621,34624,34625,34626,34627,34628,34629,34630,34634,34635,34637,34639,34640,34641,34642,34644,34645,34646,34648,34650,34651,34652,34653,34654,34655,34657,34658,34662,34663,34664,34665,34666,34667,34668,34669,34671,34673,34674,34675,34677,63,34679,34680,34681,34682,34687,34688,34689,34692,34694,34695,34697,34698,34700,34702,34703,34704,34705,34706,34708,34709,34710,34712,34713,34714,34715,34716,34717,34718,34720,34721,34722,34723,34724,24013,24494,21361,38886,36829,26693,22260,21807,24799,20026,28493,32500,33479,33806,22996,20255,20266,23614,32428,26410,34074,21619,30031,32963,21890,39759,20301,28205,35859,23561,24944,21355,30239,28201,34442,25991,38395,32441,21563,31283,32010,38382,21985,32705,29934,25373,34583,28065,31389,25105,26017,21351,25569,27779,24043,21596,38056,20044,27745,35820,23627,26080,33436,26791,21566,21556,27595,27494,20116,25410,21320,33310,20237,20398,22366,25098,38654,26212,29289,21247,21153,24735,35823,26132,29081,26512,35199,30802,30717,26224,22075,21560,38177,29306],[34725,34726,34727,34729,34730,34734,34736,34737,34738,34740,34742,34743,34744,34745,34747,34748,34750,34751,34753,34754,34755,34756,34757,34759,34760,34761,34764,34765,34766,34767,34768,34772,34773,34774,34775,34776,34777,34778,34780,34781,34782,34783,34785,34786,34787,34788,34790,34791,34792,34793,34795,34796,34797,34799,34800,34801,34802,34803,34804,34805,34806,34807,34808,63,34810,34811,34812,34813,34815,34816,34817,34818,34820,34821,34822,34823,34824,34825,34827,34828,34829,34830,34831,34832,34833,34834,34836,34839,34840,34841,34842,34844,34845,34846,34847,34848,34851,31232,24687,24076,24713,33181,22805,24796,29060,28911,28330,27728,29312,27268,34989,24109,20064,23219,21916,38115,27927,31995,38553,25103,32454,30606,34430,21283,38686,36758,26247,23777,20384,29421,19979,21414,22799,21523,25472,38184,20808,20185,40092,32420,21688,36132,34900,33335,38386,28046,24358,23244,26174,38505,29616,29486,21439,33146,39301,32673,23466,38519,38480,32447,30456,21410,38262,39321,31665,35140,28248,20065,32724,31077,35814,24819,21709,20139,39033,24055,27233,20687,21521,35937,33831,30813,38660,21066,21742,22179,38144,28040,23477,28102,26195],[34852,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34867,34868,34869,34870,34871,34872,34874,34875,34877,34878,34879,34881,34882,34883,34886,34887,34888,34889,34890,34891,34894,34895,34896,34897,34898,34899,34901,34902,34904,34906,34907,34908,34909,34910,34911,34912,34918,34919,34922,34925,34927,34929,34931,34932,34933,34934,34936,34937,34938,63,34939,34940,34944,34947,34950,34951,34953,34954,34956,34958,34959,34960,34961,34963,34964,34965,34967,34968,34969,34970,34971,34973,34974,34975,34976,34977,34979,34981,34982,34983,34984,34985,34986,23567,23389,26657,32918,21880,31505,25928,26964,20123,27463,34638,38795,21327,25375,25658,37034,26012,32961,35856,20889,26800,21368,34809,25032,27844,27899,35874,23633,34218,33455,38156,27427,36763,26032,24571,24515,20449,34885,26143,33125,29481,24826,20852,21009,22411,24418,37026,34892,37266,24184,26447,24615,22995,20804,20982,33016,21256,27769,38596,29066,20241,20462,32670,26429,21957,38152,31168,34966,32483,22687,25100,38656,34394,22040,39035,24464,35768,33988,37207,21465,26093,24207,30044,24676,32110,23167,32490,32493,36713,21927,23459,24748,26059,29572],[34988,34990,34991,34992,34994,34995,34996,34997,34998,35E3,35001,35002,35003,35005,35006,35007,35008,35011,35012,35015,35016,35018,35019,35020,35021,35023,35024,35025,35027,35030,35031,35034,35035,35036,35037,35038,35040,35041,35046,35047,35049,35050,35051,35052,35053,35054,35055,35058,35061,35062,35063,35066,35067,35069,35071,35072,35073,35075,35076,35077,35078,35079,35080,63,35081,35083,35084,35085,35086,35087,35089,35092,35093,35094,35095,35096,35100,35101,35102,35103,35104,35106,35107,35108,35110,35111,35112,35113,35116,35117,35118,35119,35121,35122,35123,35125,35127,36873,30307,30505,32474,38772,34203,23398,31348,38634,34880,21195,29071,24490,26092,35810,23547,39535,24033,27529,27739,35757,35759,36874,36805,21387,25276,40486,40493,21568,20011,33469,29273,34460,23830,34905,28079,38597,21713,20122,35766,28937,21693,38409,28895,28153,30416,20005,30740,34578,23721,24310,35328,39068,38414,28814,27839,22852,25513,30524,34893,28436,33395,22576,29141,21388,30746,38593,21761,24422,28976,23476,35866,39564,27523,22830,40495,31207,26472,25196,20335,30113,32650,27915,38451,27687,20208,30162,20859,26679,28478,36992,33136,22934,29814],[35128,35129,35130,35131,35132,35133,35134,35135,35136,35138,35139,35141,35142,35143,35144,35145,35146,35147,35148,35149,35150,35151,35152,35153,35154,35155,35156,35157,35158,35159,35160,35161,35162,35163,35164,35165,35168,35169,35170,35171,35172,35173,35175,35176,35177,35178,35179,35180,35181,35182,35183,35184,35185,35186,35187,35188,35189,35190,35191,35192,35193,35194,35196,63,35197,35198,35200,35202,35204,35205,35207,35208,35209,35210,35211,35212,35213,35214,35215,35216,35217,35218,35219,35220,35221,35222,35223,35224,35225,35226,35227,35228,35229,35230,35231,35232,35233,25671,23591,36965,31377,35875,23002,21676,33280,33647,35201,32768,26928,22094,32822,29239,37326,20918,20063,39029,25494,19994,21494,26355,33099,22812,28082,19968,22777,21307,25558,38129,20381,20234,34915,39056,22839,36951,31227,20202,33008,30097,27778,23452,23016,24413,26885,34433,20506,24050,20057,30691,20197,33402,25233,26131,37009,23673,20159,24441,33222,36920,32900,30123,20134,35028,24847,27589,24518,20041,30410,28322,35811,35758,35850,35793,24322,32764,32716,32462,33589,33643,22240,27575,38899,38452,23035,21535,38134,28139,23493,39278,23609,24341,38544],[35234,35235,35236,35237,35238,35239,35240,35241,35242,35243,35244,35245,35246,35247,35248,35249,35250,35251,35252,35253,35254,35255,35256,35257,35258,35259,35260,35261,35262,35263,35264,35267,35277,35283,35284,35285,35287,35288,35289,35291,35293,35295,35296,35297,35298,35300,35303,35304,35305,35306,35308,35309,35310,35312,35313,35314,35316,35317,35318,35319,35320,35321,35322,63,35323,35324,35325,35326,35327,35329,35330,35331,35332,35333,35334,35336,35337,35338,35339,35340,35341,35342,35343,35344,35345,35346,35347,35348,35349,35350,35351,35352,35353,35354,35355,35356,35357,21360,33521,27185,23156,40560,24212,32552,33721,33828,33829,33639,34631,36814,36194,30408,24433,39062,30828,26144,21727,25317,20323,33219,30152,24248,38605,36362,34553,21647,27891,28044,27704,24703,21191,29992,24189,20248,24736,24551,23588,30001,37038,38080,29369,27833,28216,37193,26377,21451,21491,20305,37321,35825,21448,24188,36802,28132,20110,30402,27014,34398,24858,33286,20313,20446,36926,40060,24841,28189,28180,38533,20104,23089,38632,19982,23679,31161,23431,35821,32701,29577,22495,33419,37057,21505,36935,21947,23786,24481,24840,27442,29425,32946,35465],[35358,35359,35360,35361,35362,35363,35364,35365,35366,35367,35368,35369,35370,35371,35372,35373,35374,35375,35376,35377,35378,35379,35380,35381,35382,35383,35384,35385,35386,35387,35388,35389,35391,35392,35393,35394,35395,35396,35397,35398,35399,35401,35402,35403,35404,35405,35406,35407,35408,35409,35410,35411,35412,35413,35414,35415,35416,35417,35418,35419,35420,35421,35422,63,35423,35424,35425,35426,35427,35428,35429,35430,35431,35432,35433,35434,35435,35436,35437,35438,35439,35440,35441,35442,35443,35444,35445,35446,35447,35448,35450,35451,35452,35453,35454,35455,35456,28020,23507,35029,39044,35947,39533,40499,28170,20900,20803,22435,34945,21407,25588,36757,22253,21592,22278,29503,28304,32536,36828,33489,24895,24616,38498,26352,32422,36234,36291,38053,23731,31908,26376,24742,38405,32792,20113,37095,21248,38504,20801,36816,34164,37213,26197,38901,23381,21277,30776,26434,26685,21705,28798,23472,36733,20877,22312,21681,25874,26242,36190,36163,33039,33900,36973,31967,20991,34299,26531,26089,28577,34468,36481,22122,36896,30338,28790,29157,36131,25321,21017,27901,36156,24590,22686,24974,26366,36192,25166,21939,28195,26413,36711],[35457,35458,35459,35460,35461,35462,35463,35464,35467,35468,35469,35470,35471,35472,35473,35474,35476,35477,35478,35479,35480,35481,35482,35483,35484,35485,35486,35487,35488,35489,35490,35491,35492,35493,35494,35495,35496,35497,35498,35499,35500,35501,35502,35503,35504,35505,35506,35507,35508,35509,35510,35511,35512,35513,35514,35515,35516,35517,35518,35519,35520,35521,35522,63,35523,35524,35525,35526,35527,35528,35529,35530,35531,35532,35533,35534,35535,35536,35537,35538,35539,35540,35541,35542,35543,35544,35545,35546,35547,35548,35549,35550,35551,35552,35553,35554,35555,38113,38392,30504,26629,27048,21643,20045,28856,35784,25688,25995,23429,31364,20538,23528,30651,27617,35449,31896,27838,30415,26025,36759,23853,23637,34360,26632,21344,25112,31449,28251,32509,27167,31456,24432,28467,24352,25484,28072,26454,19976,24080,36134,20183,32960,30260,38556,25307,26157,25214,27836,36213,29031,32617,20806,32903,21484,36974,25240,21746,34544,36761,32773,38167,34071,36825,27993,29645,26015,30495,29956,30759,33275,36126,38024,20390,26517,30137,35786,38663,25391,38215,38453,33976,25379,30529,24449,29424,20105,24596,25972,25327,27491,25919],[35556,35557,35558,35559,35560,35561,35562,35563,35564,35565,35566,35567,35568,35569,35570,35571,35572,35573,35574,35575,35576,35577,35578,35579,35580,35581,35582,35583,35584,35585,35586,35587,35588,35589,35590,35592,35593,35594,35595,35596,35597,35598,35599,35600,35601,35602,35603,35604,35605,35606,35607,35608,35609,35610,35611,35612,35613,35614,35615,35616,35617,35618,35619,63,35620,35621,35623,35624,35625,35626,35627,35628,35629,35630,35631,35632,35633,35634,35635,35636,35637,35638,35639,35640,35641,35642,35643,35644,35645,35646,35647,35648,35649,35650,35651,35652,35653,24103,30151,37073,35777,33437,26525,25903,21553,34584,30693,32930,33026,27713,20043,32455,32844,30452,26893,27542,25191,20540,20356,22336,25351,27490,36286,21482,26088,32440,24535,25370,25527,33267,33268,32622,24092,23769,21046,26234,31209,31258,36136,28825,30164,28382,27835,31378,20013,30405,24544,38047,34935,32456,31181,32959,37325,20210,20247,33311,21608,24030,27954,35788,31909,36724,32920,24090,21650,30385,23449,26172,39588,29664,26666,34523,26417,29482,35832,35803,36880,31481,28891,29038,25284,30633,22065,20027,33879,26609,21161,34496,36142,38136,31569],[35654,35655,35656,35657,35658,35659,35660,35661,35662,35663,35664,35665,35666,35667,35668,35669,35670,35671,35672,35673,35674,35675,35676,35677,35678,35679,35680,35681,35682,35683,35684,35685,35687,35688,35689,35690,35691,35693,35694,35695,35696,35697,35698,35699,35700,35701,35702,35703,35704,35705,35706,35707,35708,35709,35710,35711,35712,35713,35714,35715,35716,35717,35718,63,35719,35720,35721,35722,35723,35724,35725,35726,35727,35728,35729,35730,35731,35732,35733,35734,35735,35736,35737,35738,35739,35740,35741,35742,35743,35756,35761,35771,35783,35792,35818,35849,35870,20303,27880,31069,39547,25235,29226,25341,19987,30742,36716,25776,36186,31686,26729,24196,35013,22918,25758,22766,29366,26894,38181,36861,36184,22368,32512,35846,20934,25417,25305,21331,26700,29730,33537,37196,21828,30528,28796,27978,20857,21672,36164,23039,28363,28100,23388,32043,20180,31869,28371,23376,33258,28173,23383,39683,26837,36394,23447,32508,24635,32437,37049,36208,22863,25549,31199,36275,21330,26063,31062,35781,38459,32452,38075,32386,22068,37257,26368,32618,23562,36981,26152,24038,20304,26590,20570,20316,22352,24231,59408,59409,59410,59411,59412],[35896,35897,35898,35899,35900,35901,35902,35903,35904,35906,35907,35908,35909,35912,35914,35915,35917,35918,35919,35920,35921,35922,35923,35924,35926,35927,35928,35929,35931,35932,35933,35934,35935,35936,35939,35940,35941,35942,35943,35944,35945,35948,35949,35950,35951,35952,35953,35954,35956,35957,35958,35959,35963,35964,35965,35966,35967,35968,35969,35971,35972,35974,35975,63,35976,35979,35981,35982,35983,35984,35985,35986,35987,35989,35990,35991,35993,35994,35995,35996,35997,35998,35999,36E3,36001,36002,36003,36004,36005,36006,36007,36008,36009,36010,36011,36012,36013,20109,19980,20800,19984,24319,21317,19989,20120,19998,39730,23404,22121,20008,31162,20031,21269,20039,22829,29243,21358,27664,22239,32996,39319,27603,30590,40727,20022,20127,40720,20060,20073,20115,33416,23387,21868,22031,20164,21389,21405,21411,21413,21422,38757,36189,21274,21493,21286,21294,21310,36188,21350,21347,20994,21E3,21006,21037,21043,21055,21056,21068,21086,21089,21084,33967,21117,21122,21121,21136,21139,20866,32596,20155,20163,20169,20162,20200,20193,20203,20190,20251,20211,20258,20324,20213,20261,20263,20233,20267,20318,20327,25912,20314,20317],[36014,36015,36016,36017,36018,36019,36020,36021,36022,36023,36024,36025,36026,36027,36028,36029,36030,36031,36032,36033,36034,36035,36036,36037,36038,36039,36040,36041,36042,36043,36044,36045,36046,36047,36048,36049,36050,36051,36052,36053,36054,36055,36056,36057,36058,36059,36060,36061,36062,36063,36064,36065,36066,36067,36068,36069,36070,36071,36072,36073,36074,36075,36076,63,36077,36078,36079,36080,36081,36082,36083,36084,36085,36086,36087,36088,36089,36090,36091,36092,36093,36094,36095,36096,36097,36098,36099,36100,36101,36102,36103,36104,36105,36106,36107,36108,36109,20319,20311,20274,20285,20342,20340,20369,20361,20355,20367,20350,20347,20394,20348,20396,20372,20454,20456,20458,20421,20442,20451,20444,20433,20447,20472,20521,20556,20467,20524,20495,20526,20525,20478,20508,20492,20517,20520,20606,20547,20565,20552,20558,20588,20603,20645,20647,20649,20666,20694,20742,20717,20716,20710,20718,20743,20747,20189,27709,20312,20325,20430,40864,27718,31860,20846,24061,40649,39320,20865,22804,21241,21261,35335,21264,20971,22809,20821,20128,20822,20147,34926,34980,20149,33044,35026,31104,23348,34819,32696,20907,20913,20925,20924],[36110,36111,36112,36113,36114,36115,36116,36117,36118,36119,36120,36121,36122,36123,36124,36128,36177,36178,36183,36191,36197,36200,36201,36202,36204,36206,36207,36209,36210,36216,36217,36218,36219,36220,36221,36222,36223,36224,36226,36227,36230,36231,36232,36233,36236,36237,36238,36239,36240,36242,36243,36245,36246,36247,36248,36249,36250,36251,36252,36253,36254,36256,36257,63,36258,36260,36261,36262,36263,36264,36265,36266,36267,36268,36269,36270,36271,36272,36274,36278,36279,36281,36283,36285,36288,36289,36290,36293,36295,36296,36297,36298,36301,36304,36306,36307,36308,20935,20886,20898,20901,35744,35750,35751,35754,35764,35765,35767,35778,35779,35787,35791,35790,35794,35795,35796,35798,35800,35801,35804,35807,35808,35812,35816,35817,35822,35824,35827,35830,35833,35836,35839,35840,35842,35844,35847,35852,35855,35857,35858,35860,35861,35862,35865,35867,35864,35869,35871,35872,35873,35877,35879,35882,35883,35886,35887,35890,35891,35893,35894,21353,21370,38429,38434,38433,38449,38442,38461,38460,38466,38473,38484,38495,38503,38508,38514,38516,38536,38541,38551,38576,37015,37019,37021,37017,37036,37025,37044,37043,37046,37050],[36309,36312,36313,36316,36320,36321,36322,36325,36326,36327,36329,36333,36334,36336,36337,36338,36340,36342,36348,36350,36351,36352,36353,36354,36355,36356,36358,36359,36360,36363,36365,36366,36368,36369,36370,36371,36373,36374,36375,36376,36377,36378,36379,36380,36384,36385,36388,36389,36390,36391,36392,36395,36397,36400,36402,36403,36404,36406,36407,36408,36411,36412,36414,63,36415,36419,36421,36422,36428,36429,36430,36431,36432,36435,36436,36437,36438,36439,36440,36442,36443,36444,36445,36446,36447,36448,36449,36450,36451,36452,36453,36455,36456,36458,36459,36462,36465,37048,37040,37071,37061,37054,37072,37060,37063,37075,37094,37090,37084,37079,37083,37099,37103,37118,37124,37154,37150,37155,37169,37167,37177,37187,37190,21005,22850,21154,21164,21165,21182,21759,21200,21206,21232,21471,29166,30669,24308,20981,20988,39727,21430,24321,30042,24047,22348,22441,22433,22654,22716,22725,22737,22313,22316,22314,22323,22329,22318,22319,22364,22331,22338,22377,22405,22379,22406,22396,22395,22376,22381,22390,22387,22445,22436,22412,22450,22479,22439,22452,22419,22432,22485,22488,22490,22489,22482,22456,22516,22511,22520,22500,22493],[36467,36469,36471,36472,36473,36474,36475,36477,36478,36480,36482,36483,36484,36486,36488,36489,36490,36491,36492,36493,36494,36497,36498,36499,36501,36502,36503,36504,36505,36506,36507,36509,36511,36512,36513,36514,36515,36516,36517,36518,36519,36520,36521,36522,36525,36526,36528,36529,36531,36532,36533,36534,36535,36536,36537,36539,36540,36541,36542,36543,36544,36545,36546,63,36547,36548,36549,36550,36551,36552,36553,36554,36555,36556,36557,36559,36560,36561,36562,36563,36564,36565,36566,36567,36568,36569,36570,36571,36572,36573,36574,36575,36576,36577,36578,36579,36580,22539,22541,22525,22509,22528,22558,22553,22596,22560,22629,22636,22657,22665,22682,22656,39336,40729,25087,33401,33405,33407,33423,33418,33448,33412,33422,33425,33431,33433,33451,33464,33470,33456,33480,33482,33507,33432,33463,33454,33483,33484,33473,33449,33460,33441,33450,33439,33476,33486,33444,33505,33545,33527,33508,33551,33543,33500,33524,33490,33496,33548,33531,33491,33553,33562,33542,33556,33557,33504,33493,33564,33617,33627,33628,33544,33682,33596,33588,33585,33691,33630,33583,33615,33607,33603,33631,33600,33559,33632,33581,33594,33587,33638,33637],[36581,36582,36583,36584,36585,36586,36587,36588,36589,36590,36591,36592,36593,36594,36595,36596,36597,36598,36599,36600,36601,36602,36603,36604,36605,36606,36607,36608,36609,36610,36611,36612,36613,36614,36615,36616,36617,36618,36619,36620,36621,36622,36623,36624,36625,36626,36627,36628,36629,36630,36631,36632,36633,36634,36635,36636,36637,36638,36639,36640,36641,36642,36643,63,36644,36645,36646,36647,36648,36649,36650,36651,36652,36653,36654,36655,36656,36657,36658,36659,36660,36661,36662,36663,36664,36665,36666,36667,36668,36669,36670,36671,36672,36673,36674,36675,36676,33640,33563,33641,33644,33642,33645,33646,33712,33656,33715,33716,33696,33706,33683,33692,33669,33660,33718,33705,33661,33720,33659,33688,33694,33704,33722,33724,33729,33793,33765,33752,22535,33816,33803,33757,33789,33750,33820,33848,33809,33798,33748,33759,33807,33795,33784,33785,33770,33733,33728,33830,33776,33761,33884,33873,33882,33881,33907,33927,33928,33914,33929,33912,33852,33862,33897,33910,33932,33934,33841,33901,33985,33997,34E3,34022,33981,34003,33994,33983,33978,34016,33953,33977,33972,33943,34021,34019,34060,29965,34104,34032,34105,34079,34106],[36677,36678,36679,36680,36681,36682,36683,36684,36685,36686,36687,36688,36689,36690,36691,36692,36693,36694,36695,36696,36697,36698,36699,36700,36701,36702,36703,36704,36705,36706,36707,36708,36709,36714,36736,36748,36754,36765,36768,36769,36770,36772,36773,36774,36775,36778,36780,36781,36782,36783,36786,36787,36788,36789,36791,36792,36794,36795,36796,36799,36800,36803,36806,63,36809,36810,36811,36812,36813,36815,36818,36822,36823,36826,36832,36833,36835,36839,36844,36847,36849,36850,36852,36853,36854,36858,36859,36860,36862,36863,36871,36872,36876,36878,36883,36885,36888,34134,34107,34047,34044,34137,34120,34152,34148,34142,34170,30626,34115,34162,34171,34212,34216,34183,34191,34169,34222,34204,34181,34233,34231,34224,34259,34241,34268,34303,34343,34309,34345,34326,34364,24318,24328,22844,22849,32823,22869,22874,22872,21263,23586,23589,23596,23604,25164,25194,25247,25275,25290,25306,25303,25326,25378,25334,25401,25419,25411,25517,25590,25457,25466,25486,25524,25453,25516,25482,25449,25518,25532,25586,25592,25568,25599,25540,25566,25550,25682,25542,25534,25669,25665,25611,25627,25632,25612,25638,25633,25694,25732,25709,25750],[36889,36892,36899,36900,36901,36903,36904,36905,36906,36907,36908,36912,36913,36914,36915,36916,36919,36921,36922,36925,36927,36928,36931,36933,36934,36936,36937,36938,36939,36940,36942,36948,36949,36950,36953,36954,36956,36957,36958,36959,36960,36961,36964,36966,36967,36969,36970,36971,36972,36975,36976,36977,36978,36979,36982,36983,36984,36985,36986,36987,36988,36990,36993,63,36996,36997,36998,36999,37001,37002,37004,37005,37006,37007,37008,37010,37012,37014,37016,37018,37020,37022,37023,37024,37028,37029,37031,37032,37033,37035,37037,37042,37047,37052,37053,37055,37056,25722,25783,25784,25753,25786,25792,25808,25815,25828,25826,25865,25893,25902,24331,24530,29977,24337,21343,21489,21501,21481,21480,21499,21522,21526,21510,21579,21586,21587,21588,21590,21571,21537,21591,21593,21539,21554,21634,21652,21623,21617,21604,21658,21659,21636,21622,21606,21661,21712,21677,21698,21684,21714,21671,21670,21715,21716,21618,21667,21717,21691,21695,21708,21721,21722,21724,21673,21674,21668,21725,21711,21726,21787,21735,21792,21757,21780,21747,21794,21795,21775,21777,21799,21802,21863,21903,21941,21833,21869,21825,21845,21823,21840,21820],[37058,37059,37062,37064,37065,37067,37068,37069,37074,37076,37077,37078,37080,37081,37082,37086,37087,37088,37091,37092,37093,37097,37098,37100,37102,37104,37105,37106,37107,37109,37110,37111,37113,37114,37115,37116,37119,37120,37121,37123,37125,37126,37127,37128,37129,37130,37131,37132,37133,37134,37135,37136,37137,37138,37139,37140,37141,37142,37143,37144,37146,37147,37148,63,37149,37151,37152,37153,37156,37157,37158,37159,37160,37161,37162,37163,37164,37165,37166,37168,37170,37171,37172,37173,37174,37175,37176,37178,37179,37180,37181,37182,37183,37184,37185,37186,37188,21815,21846,21877,21878,21879,21811,21808,21852,21899,21970,21891,21937,21945,21896,21889,21919,21886,21974,21905,21883,21983,21949,21950,21908,21913,21994,22007,21961,22047,21969,21995,21996,21972,21990,21981,21956,21999,21989,22002,22003,21964,21965,21992,22005,21988,36756,22046,22024,22028,22017,22052,22051,22014,22016,22055,22061,22104,22073,22103,22060,22093,22114,22105,22108,22092,22100,22150,22116,22129,22123,22139,22140,22149,22163,22191,22228,22231,22237,22241,22261,22251,22265,22271,22276,22282,22281,22300,24079,24089,24084,24081,24113,24123,24124],[37189,37191,37192,37201,37203,37204,37205,37206,37208,37209,37211,37212,37215,37216,37222,37223,37224,37227,37229,37235,37242,37243,37244,37248,37249,37250,37251,37252,37254,37256,37258,37262,37263,37267,37268,37269,37270,37271,37272,37273,37276,37277,37278,37279,37280,37281,37284,37285,37286,37287,37288,37289,37291,37292,37296,37297,37298,37299,37302,37303,37304,37305,37307,63,37308,37309,37310,37311,37312,37313,37314,37315,37316,37317,37318,37320,37323,37328,37330,37331,37332,37333,37334,37335,37336,37337,37338,37339,37341,37342,37343,37344,37345,37346,37347,37348,37349,24119,24132,24148,24155,24158,24161,23692,23674,23693,23696,23702,23688,23704,23705,23697,23706,23708,23733,23714,23741,23724,23723,23729,23715,23745,23735,23748,23762,23780,23755,23781,23810,23811,23847,23846,23854,23844,23838,23814,23835,23896,23870,23860,23869,23916,23899,23919,23901,23915,23883,23882,23913,23924,23938,23961,23965,35955,23991,24005,24435,24439,24450,24455,24457,24460,24469,24473,24476,24488,24493,24501,24508,34914,24417,29357,29360,29364,29367,29368,29379,29377,29390,29389,29394,29416,29423,29417,29426,29428,29431,29441,29427,29443,29434],[37350,37351,37352,37353,37354,37355,37356,37357,37358,37359,37360,37361,37362,37363,37364,37365,37366,37367,37368,37369,37370,37371,37372,37373,37374,37375,37376,37377,37378,37379,37380,37381,37382,37383,37384,37385,37386,37387,37388,37389,37390,37391,37392,37393,37394,37395,37396,37397,37398,37399,37400,37401,37402,37403,37404,37405,37406,37407,37408,37409,37410,37411,37412,63,37413,37414,37415,37416,37417,37418,37419,37420,37421,37422,37423,37424,37425,37426,37427,37428,37429,37430,37431,37432,37433,37434,37435,37436,37437,37438,37439,37440,37441,37442,37443,37444,37445,29435,29463,29459,29473,29450,29470,29469,29461,29474,29497,29477,29484,29496,29489,29520,29517,29527,29536,29548,29551,29566,33307,22821,39143,22820,22786,39267,39271,39272,39273,39274,39275,39276,39284,39287,39293,39296,39300,39303,39306,39309,39312,39313,39315,39316,39317,24192,24209,24203,24214,24229,24224,24249,24245,24254,24243,36179,24274,24273,24283,24296,24298,33210,24516,24521,24534,24527,24579,24558,24580,24545,24548,24574,24581,24582,24554,24557,24568,24601,24629,24614,24603,24591,24589,24617,24619,24586,24639,24609,24696,24697,24699,24698,24642],[37446,37447,37448,37449,37450,37451,37452,37453,37454,37455,37456,37457,37458,37459,37460,37461,37462,37463,37464,37465,37466,37467,37468,37469,37470,37471,37472,37473,37474,37475,37476,37477,37478,37479,37480,37481,37482,37483,37484,37485,37486,37487,37488,37489,37490,37491,37493,37494,37495,37496,37497,37498,37499,37500,37501,37502,37503,37504,37505,37506,37507,37508,37509,63,37510,37511,37512,37513,37514,37515,37516,37517,37519,37520,37521,37522,37523,37524,37525,37526,37527,37528,37529,37530,37531,37532,37533,37534,37535,37536,37537,37538,37539,37540,37541,37542,37543,24682,24701,24726,24730,24749,24733,24707,24722,24716,24731,24812,24763,24753,24797,24792,24774,24794,24756,24864,24870,24853,24867,24820,24832,24846,24875,24906,24949,25004,24980,24999,25015,25044,25077,24541,38579,38377,38379,38385,38387,38389,38390,38396,38398,38403,38404,38406,38408,38410,38411,38412,38413,38415,38418,38421,38422,38423,38425,38426,20012,29247,25109,27701,27732,27740,27722,27811,27781,27792,27796,27788,27752,27753,27764,27766,27782,27817,27856,27860,27821,27895,27896,27889,27863,27826,27872,27862,27898,27883,27886,27825,27859,27887,27902],[37544,37545,37546,37547,37548,37549,37551,37552,37553,37554,37555,37556,37557,37558,37559,37560,37561,37562,37563,37564,37565,37566,37567,37568,37569,37570,37571,37572,37573,37574,37575,37577,37578,37579,37580,37581,37582,37583,37584,37585,37586,37587,37588,37589,37590,37591,37592,37593,37594,37595,37596,37597,37598,37599,37600,37601,37602,37603,37604,37605,37606,37607,37608,63,37609,37610,37611,37612,37613,37614,37615,37616,37617,37618,37619,37620,37621,37622,37623,37624,37625,37626,37627,37628,37629,37630,37631,37632,37633,37634,37635,37636,37637,37638,37639,37640,37641,27961,27943,27916,27971,27976,27911,27908,27929,27918,27947,27981,27950,27957,27930,27983,27986,27988,27955,28049,28015,28062,28064,27998,28051,28052,27996,28E3,28028,28003,28186,28103,28101,28126,28174,28095,28128,28177,28134,28125,28121,28182,28075,28172,28078,28203,28270,28238,28267,28338,28255,28294,28243,28244,28210,28197,28228,28383,28337,28312,28384,28461,28386,28325,28327,28349,28347,28343,28375,28340,28367,28303,28354,28319,28514,28486,28487,28452,28437,28409,28463,28470,28491,28532,28458,28425,28457,28553,28557,28556,28536,28530,28540,28538,28625],[37642,37643,37644,37645,37646,37647,37648,37649,37650,37651,37652,37653,37654,37655,37656,37657,37658,37659,37660,37661,37662,37663,37664,37665,37666,37667,37668,37669,37670,37671,37672,37673,37674,37675,37676,37677,37678,37679,37680,37681,37682,37683,37684,37685,37686,37687,37688,37689,37690,37691,37692,37693,37695,37696,37697,37698,37699,37700,37701,37702,37703,37704,37705,63,37706,37707,37708,37709,37710,37711,37712,37713,37714,37715,37716,37717,37718,37719,37720,37721,37722,37723,37724,37725,37726,37727,37728,37729,37730,37731,37732,37733,37734,37735,37736,37737,37739,28617,28583,28601,28598,28610,28641,28654,28638,28640,28655,28698,28707,28699,28729,28725,28751,28766,23424,23428,23445,23443,23461,23480,29999,39582,25652,23524,23534,35120,23536,36423,35591,36790,36819,36821,36837,36846,36836,36841,36838,36851,36840,36869,36868,36875,36902,36881,36877,36886,36897,36917,36918,36909,36911,36932,36945,36946,36944,36968,36952,36962,36955,26297,36980,36989,36994,37E3,36995,37003,24400,24407,24406,24408,23611,21675,23632,23641,23409,23651,23654,32700,24362,24361,24365,33396,24380,39739,23662,22913,22915,22925,22953,22954,22947],[37740,37741,37742,37743,37744,37745,37746,37747,37748,37749,37750,37751,37752,37753,37754,37755,37756,37757,37758,37759,37760,37761,37762,37763,37764,37765,37766,37767,37768,37769,37770,37771,37772,37773,37774,37776,37777,37778,37779,37780,37781,37782,37783,37784,37785,37786,37787,37788,37789,37790,37791,37792,37793,37794,37795,37796,37797,37798,37799,37800,37801,37802,37803,63,37804,37805,37806,37807,37808,37809,37810,37811,37812,37813,37814,37815,37816,37817,37818,37819,37820,37821,37822,37823,37824,37825,37826,37827,37828,37829,37830,37831,37832,37833,37835,37836,37837,22935,22986,22955,22942,22948,22994,22962,22959,22999,22974,23045,23046,23005,23048,23011,23E3,23033,23052,23049,23090,23092,23057,23075,23059,23104,23143,23114,23125,23100,23138,23157,33004,23210,23195,23159,23162,23230,23275,23218,23250,23252,23224,23264,23267,23281,23254,23270,23256,23260,23305,23319,23318,23346,23351,23360,23573,23580,23386,23397,23411,23377,23379,23394,39541,39543,39544,39546,39551,39549,39552,39553,39557,39560,39562,39568,39570,39571,39574,39576,39579,39580,39581,39583,39584,39586,39587,39589,39591,32415,32417,32419,32421,32424,32425],[37838,37839,37840,37841,37842,37843,37844,37845,37847,37848,37849,37850,37851,37852,37853,37854,37855,37856,37857,37858,37859,37860,37861,37862,37863,37864,37865,37866,37867,37868,37869,37870,37871,37872,37873,37874,37875,37876,37877,37878,37879,37880,37881,37882,37883,37884,37885,37886,37887,37888,37889,37890,37891,37892,37893,37894,37895,37896,37897,37898,37899,37900,37901,63,37902,37903,37904,37905,37906,37907,37908,37909,37910,37911,37912,37913,37914,37915,37916,37917,37918,37919,37920,37921,37922,37923,37924,37925,37926,37927,37928,37929,37930,37931,37932,37933,37934,32429,32432,32446,32448,32449,32450,32457,32459,32460,32464,32468,32471,32475,32480,32481,32488,32491,32494,32495,32497,32498,32525,32502,32506,32507,32510,32513,32514,32515,32519,32520,32523,32524,32527,32529,32530,32535,32537,32540,32539,32543,32545,32546,32547,32548,32549,32550,32551,32554,32555,32556,32557,32559,32560,32561,32562,32563,32565,24186,30079,24027,30014,37013,29582,29585,29614,29602,29599,29647,29634,29649,29623,29619,29632,29641,29640,29669,29657,39036,29706,29673,29671,29662,29626,29682,29711,29738,29787,29734,29733,29736,29744,29742,29740],[37935,37936,37937,37938,37939,37940,37941,37942,37943,37944,37945,37946,37947,37948,37949,37951,37952,37953,37954,37955,37956,37957,37958,37959,37960,37961,37962,37963,37964,37965,37966,37967,37968,37969,37970,37971,37972,37973,37974,37975,37976,37977,37978,37979,37980,37981,37982,37983,37984,37985,37986,37987,37988,37989,37990,37991,37992,37993,37994,37996,37997,37998,37999,63,38E3,38001,38002,38003,38004,38005,38006,38007,38008,38009,38010,38011,38012,38013,38014,38015,38016,38017,38018,38019,38020,38033,38038,38040,38087,38095,38099,38100,38106,38118,38139,38172,38176,29723,29722,29761,29788,29783,29781,29785,29815,29805,29822,29852,29838,29824,29825,29831,29835,29854,29864,29865,29840,29863,29906,29882,38890,38891,38892,26444,26451,26462,26440,26473,26533,26503,26474,26483,26520,26535,26485,26536,26526,26541,26507,26487,26492,26608,26633,26584,26634,26601,26544,26636,26585,26549,26586,26547,26589,26624,26563,26552,26594,26638,26561,26621,26674,26675,26720,26721,26702,26722,26692,26724,26755,26653,26709,26726,26689,26727,26688,26686,26698,26697,26665,26805,26767,26740,26743,26771,26731,26818,26990,26876,26911,26912,26873],[38183,38195,38205,38211,38216,38219,38229,38234,38240,38254,38260,38261,38263,38264,38265,38266,38267,38268,38269,38270,38272,38273,38274,38275,38276,38277,38278,38279,38280,38281,38282,38283,38284,38285,38286,38287,38288,38289,38290,38291,38292,38293,38294,38295,38296,38297,38298,38299,38300,38301,38302,38303,38304,38305,38306,38307,38308,38309,38310,38311,38312,38313,38314,63,38315,38316,38317,38318,38319,38320,38321,38322,38323,38324,38325,38326,38327,38328,38329,38330,38331,38332,38333,38334,38335,38336,38337,38338,38339,38340,38341,38342,38343,38344,38345,38346,38347,26916,26864,26891,26881,26967,26851,26896,26993,26937,26976,26946,26973,27012,26987,27008,27032,27E3,26932,27084,27015,27016,27086,27017,26982,26979,27001,27035,27047,27067,27051,27053,27092,27057,27073,27082,27103,27029,27104,27021,27135,27183,27117,27159,27160,27237,27122,27204,27198,27296,27216,27227,27189,27278,27257,27197,27176,27224,27260,27281,27280,27305,27287,27307,29495,29522,27521,27522,27527,27524,27538,27539,27533,27546,27547,27553,27562,36715,36717,36721,36722,36723,36725,36726,36728,36727,36729,36730,36732,36734,36737,36738,36740,36743,36747],[38348,38349,38350,38351,38352,38353,38354,38355,38356,38357,38358,38359,38360,38361,38362,38363,38364,38365,38366,38367,38368,38369,38370,38371,38372,38373,38374,38375,38380,38399,38407,38419,38424,38427,38430,38432,38435,38436,38437,38438,38439,38440,38441,38443,38444,38445,38447,38448,38455,38456,38457,38458,38462,38465,38467,38474,38478,38479,38481,38482,38483,38486,38487,63,38488,38489,38490,38492,38493,38494,38496,38499,38501,38502,38507,38509,38510,38511,38512,38513,38515,38520,38521,38522,38523,38524,38525,38526,38527,38528,38529,38530,38531,38532,38535,38537,38538,36749,36750,36751,36760,36762,36558,25099,25111,25115,25119,25122,25121,25125,25124,25132,33255,29935,29940,29951,29967,29969,29971,25908,26094,26095,26096,26122,26137,26482,26115,26133,26112,28805,26359,26141,26164,26161,26166,26165,32774,26207,26196,26177,26191,26198,26209,26199,26231,26244,26252,26279,26269,26302,26331,26332,26342,26345,36146,36147,36150,36155,36157,36160,36165,36166,36168,36169,36167,36173,36181,36185,35271,35274,35275,35276,35278,35279,35280,35281,29294,29343,29277,29286,29295,29310,29311,29316,29323,29325,29327,29330,25352,25394,25520],[38540,38542,38545,38546,38547,38549,38550,38554,38555,38557,38558,38559,38560,38561,38562,38563,38564,38565,38566,38568,38569,38570,38571,38572,38573,38574,38575,38577,38578,38580,38581,38583,38584,38586,38587,38591,38594,38595,38600,38602,38603,38608,38609,38611,38612,38614,38615,38616,38617,38618,38619,38620,38621,38622,38623,38625,38626,38627,38628,38629,38630,38631,38635,63,38636,38637,38638,38640,38641,38642,38644,38645,38648,38650,38651,38652,38653,38655,38658,38659,38661,38666,38667,38668,38672,38673,38674,38676,38677,38679,38680,38681,38682,38683,38685,38687,38688,25663,25816,32772,27626,27635,27645,27637,27641,27653,27655,27654,27661,27669,27672,27673,27674,27681,27689,27684,27690,27698,25909,25941,25963,29261,29266,29270,29232,34402,21014,32927,32924,32915,32956,26378,32957,32945,32939,32941,32948,32951,32999,33E3,33001,33002,32987,32962,32964,32985,32973,32983,26384,32989,33003,33009,33012,33005,33037,33038,33010,33020,26389,33042,35930,33078,33054,33068,33048,33074,33096,33100,33107,33140,33113,33114,33137,33120,33129,33148,33149,33133,33127,22605,23221,33160,33154,33169,28373,33187,33194,33228,26406,33226,33211],[38689,38690,38691,38692,38693,38694,38695,38696,38697,38699,38700,38702,38703,38705,38707,38708,38709,38710,38711,38714,38715,38716,38717,38719,38720,38721,38722,38723,38724,38725,38726,38727,38728,38729,38730,38731,38732,38733,38734,38735,38736,38737,38740,38741,38743,38744,38746,38748,38749,38751,38755,38756,38758,38759,38760,38762,38763,38764,38765,38766,38767,38768,38769,63,38770,38773,38775,38776,38777,38778,38779,38781,38782,38783,38784,38785,38786,38787,38788,38790,38791,38792,38793,38794,38796,38798,38799,38800,38803,38805,38806,38807,38809,38810,38811,38812,38813,33217,33190,27428,27447,27449,27459,27462,27481,39121,39122,39123,39125,39129,39130,27571,24384,27586,35315,26E3,40785,26003,26044,26054,26052,26051,26060,26062,26066,26070,28800,28828,28822,28829,28859,28864,28855,28843,28849,28904,28874,28944,28947,28950,28975,28977,29043,29020,29032,28997,29042,29002,29048,29050,29080,29107,29109,29096,29088,29152,29140,29159,29177,29213,29224,28780,28952,29030,29113,25150,25149,25155,25160,25161,31035,31040,31046,31049,31067,31068,31059,31066,31074,31063,31072,31087,31079,31098,31109,31114,31130,31143,31155,24529,24528],[38814,38815,38817,38818,38820,38821,38822,38823,38824,38825,38826,38828,38830,38832,38833,38835,38837,38838,38839,38840,38841,38842,38843,38844,38845,38846,38847,38848,38849,38850,38851,38852,38853,38854,38855,38856,38857,38858,38859,38860,38861,38862,38863,38864,38865,38866,38867,38868,38869,38870,38871,38872,38873,38874,38875,38876,38877,38878,38879,38880,38881,38882,38883,63,38884,38885,38888,38894,38895,38896,38897,38898,38900,38903,38904,38905,38906,38907,38908,38909,38910,38911,38912,38913,38914,38915,38916,38917,38918,38919,38920,38921,38922,38923,38924,38925,38926,24636,24669,24666,24679,24641,24665,24675,24747,24838,24845,24925,25001,24989,25035,25041,25094,32896,32895,27795,27894,28156,30710,30712,30720,30729,30743,30744,30737,26027,30765,30748,30749,30777,30778,30779,30751,30780,30757,30764,30755,30761,30798,30829,30806,30807,30758,30800,30791,30796,30826,30875,30867,30874,30855,30876,30881,30883,30898,30905,30885,30932,30937,30921,30956,30962,30981,30964,30995,31012,31006,31028,40859,40697,40699,40700,30449,30468,30477,30457,30471,30472,30490,30498,30489,30509,30502,30517,30520,30544,30545,30535,30531,30554,30568],[38927,38928,38929,38930,38931,38932,38933,38934,38935,38936,38937,38938,38939,38940,38941,38942,38943,38944,38945,38946,38947,38948,38949,38950,38951,38952,38953,38954,38955,38956,38957,38958,38959,38960,38961,38962,38963,38964,38965,38966,38967,38968,38969,38970,38971,38972,38973,38974,38975,38976,38977,38978,38979,38980,38981,38982,38983,38984,38985,38986,38987,38988,38989,63,38990,38991,38992,38993,38994,38995,38996,38997,38998,38999,39E3,39001,39002,39003,39004,39005,39006,39007,39008,39009,39010,39011,39012,39013,39014,39015,39016,39017,39018,39019,39020,39021,39022,30562,30565,30591,30605,30589,30592,30604,30609,30623,30624,30640,30645,30653,30010,30016,30030,30027,30024,30043,30066,30073,30083,32600,32609,32607,35400,32616,32628,32625,32633,32641,32638,30413,30437,34866,38021,38022,38023,38027,38026,38028,38029,38031,38032,38036,38039,38037,38042,38043,38044,38051,38052,38059,38058,38061,38060,38063,38064,38066,38068,38070,38071,38072,38073,38074,38076,38077,38079,38084,38088,38089,38090,38091,38092,38093,38094,38096,38097,38098,38101,38102,38103,38105,38104,38107,38110,38111,38112,38114,38116,38117,38119,38120,38122],[39023,39024,39025,39026,39027,39028,39051,39054,39058,39061,39065,39075,39080,39081,39082,39083,39084,39085,39086,39087,39088,39089,39090,39091,39092,39093,39094,39095,39096,39097,39098,39099,39100,39101,39102,39103,39104,39105,39106,39107,39108,39109,39110,39111,39112,39113,39114,39115,39116,39117,39119,39120,39124,39126,39127,39131,39132,39133,39136,39137,39138,39139,39140,63,39141,39142,39145,39146,39147,39148,39149,39150,39151,39152,39153,39154,39155,39156,39157,39158,39159,39160,39161,39162,39163,39164,39165,39166,39167,39168,39169,39170,39171,39172,39173,39174,39175,38121,38123,38126,38127,38131,38132,38133,38135,38137,38140,38141,38143,38147,38146,38150,38151,38153,38154,38157,38158,38159,38162,38163,38164,38165,38166,38168,38171,38173,38174,38175,38178,38186,38187,38185,38188,38193,38194,38196,38198,38199,38200,38204,38206,38207,38210,38197,38212,38213,38214,38217,38220,38222,38223,38226,38227,38228,38230,38231,38232,38233,38235,38238,38239,38237,38241,38242,38244,38245,38246,38247,38248,38249,38250,38251,38252,38255,38257,38258,38259,38202,30695,30700,38601,31189,31213,31203,31211,31238,23879,31235,31234,31262,31252],[39176,39177,39178,39179,39180,39182,39183,39185,39186,39187,39188,39189,39190,39191,39192,39193,39194,39195,39196,39197,39198,39199,39200,39201,39202,39203,39204,39205,39206,39207,39208,39209,39210,39211,39212,39213,39215,39216,39217,39218,39219,39220,39221,39222,39223,39224,39225,39226,39227,39228,39229,39230,39231,39232,39233,39234,39235,39236,39237,39238,39239,39240,39241,63,39242,39243,39244,39245,39246,39247,39248,39249,39250,39251,39254,39255,39256,39257,39258,39259,39260,39261,39262,39263,39264,39265,39266,39268,39270,39283,39288,39289,39291,39294,39298,39299,39305,31289,31287,31313,40655,39333,31344,30344,30350,30355,30361,30372,29918,29920,29996,40480,40482,40488,40489,40490,40491,40492,40498,40497,40502,40504,40503,40505,40506,40510,40513,40514,40516,40518,40519,40520,40521,40523,40524,40526,40529,40533,40535,40538,40539,40540,40542,40547,40550,40551,40552,40553,40554,40555,40556,40561,40557,40563,30098,30100,30102,30112,30109,30124,30115,30131,30132,30136,30148,30129,30128,30147,30146,30166,30157,30179,30184,30182,30180,30187,30183,30211,30193,30204,30207,30224,30208,30213,30220,30231,30218,30245,30232,30229,30233],[39308,39310,39322,39323,39324,39325,39326,39327,39328,39329,39330,39331,39332,39334,39335,39337,39338,39339,39340,39341,39342,39343,39344,39345,39346,39347,39348,39349,39350,39351,39352,39353,39354,39355,39356,39357,39358,39359,39360,39361,39362,39363,39364,39365,39366,39367,39368,39369,39370,39371,39372,39373,39374,39375,39376,39377,39378,39379,39380,39381,39382,39383,39384,63,39385,39386,39387,39388,39389,39390,39391,39392,39393,39394,39395,39396,39397,39398,39399,39400,39401,39402,39403,39404,39405,39406,39407,39408,39409,39410,39411,39412,39413,39414,39415,39416,39417,30235,30268,30242,30240,30272,30253,30256,30271,30261,30275,30270,30259,30285,30302,30292,30300,30294,30315,30319,32714,31462,31352,31353,31360,31366,31368,31381,31398,31392,31404,31400,31405,31411,34916,34921,34930,34941,34943,34946,34978,35014,34999,35004,35017,35042,35022,35043,35045,35057,35098,35068,35048,35070,35056,35105,35097,35091,35099,35082,35124,35115,35126,35137,35174,35195,30091,32997,30386,30388,30684,32786,32788,32790,32796,32800,32802,32805,32806,32807,32809,32808,32817,32779,32821,32835,32838,32845,32850,32873,32881,35203,39032,39040,39043],[39418,39419,39420,39421,39422,39423,39424,39425,39426,39427,39428,39429,39430,39431,39432,39433,39434,39435,39436,39437,39438,39439,39440,39441,39442,39443,39444,39445,39446,39447,39448,39449,39450,39451,39452,39453,39454,39455,39456,39457,39458,39459,39460,39461,39462,39463,39464,39465,39466,39467,39468,39469,39470,39471,39472,39473,39474,39475,39476,39477,39478,39479,39480,63,39481,39482,39483,39484,39485,39486,39487,39488,39489,39490,39491,39492,39493,39494,39495,39496,39497,39498,39499,39500,39501,39502,39503,39504,39505,39506,39507,39508,39509,39510,39511,39512,39513,39049,39052,39053,39055,39060,39066,39067,39070,39071,39073,39074,39077,39078,34381,34388,34412,34414,34431,34426,34428,34427,34472,34445,34443,34476,34461,34471,34467,34474,34451,34473,34486,34500,34485,34510,34480,34490,34481,34479,34505,34511,34484,34537,34545,34546,34541,34547,34512,34579,34526,34548,34527,34520,34513,34563,34567,34552,34568,34570,34573,34569,34595,34619,34590,34597,34606,34586,34622,34632,34612,34609,34601,34615,34623,34690,34594,34685,34686,34683,34656,34672,34636,34670,34699,34643,34659,34684,34660,34649,34661,34707,34735,34728,34770],[39514,39515,39516,39517,39518,39519,39520,39521,39522,39523,39524,39525,39526,39527,39528,39529,39530,39531,39538,39555,39561,39565,39566,39572,39573,39577,39590,39593,39594,39595,39596,39597,39598,39599,39602,39603,39604,39605,39609,39611,39613,39614,39615,39619,39620,39622,39623,39624,39625,39626,39629,39630,39631,39632,39634,39636,39637,39638,39639,39641,39642,39643,39644,63,39645,39646,39648,39650,39651,39652,39653,39655,39656,39657,39658,39660,39662,39664,39665,39666,39667,39668,39669,39670,39671,39672,39674,39676,39677,39678,39679,39680,39681,39682,39684,39685,39686,34758,34696,34693,34733,34711,34691,34731,34789,34732,34741,34739,34763,34771,34749,34769,34752,34762,34779,34794,34784,34798,34838,34835,34814,34826,34843,34849,34873,34876,32566,32578,32580,32581,33296,31482,31485,31496,31491,31492,31509,31498,31531,31503,31559,31544,31530,31513,31534,31537,31520,31525,31524,31539,31550,31518,31576,31578,31557,31605,31564,31581,31584,31598,31611,31586,31602,31601,31632,31654,31655,31672,31660,31645,31656,31621,31658,31644,31650,31659,31668,31697,31681,31692,31709,31706,31717,31718,31722,31756,31742,31740,31759,31766,31755],[39687,39689,39690,39691,39692,39693,39694,39696,39697,39698,39700,39701,39702,39703,39704,39705,39706,39707,39708,39709,39710,39712,39713,39714,39716,39717,39718,39719,39720,39721,39722,39723,39724,39725,39726,39728,39729,39731,39732,39733,39734,39735,39736,39737,39738,39741,39742,39743,39744,39750,39754,39755,39756,39758,39760,39762,39763,39765,39766,39767,39768,39769,39770,63,39771,39772,39773,39774,39775,39776,39777,39778,39779,39780,39781,39782,39783,39784,39785,39786,39787,39788,39789,39790,39791,39792,39793,39794,39795,39796,39797,39798,39799,39800,39801,39802,39803,31775,31786,31782,31800,31809,31808,33278,33281,33282,33284,33260,34884,33313,33314,33315,33325,33327,33320,33323,33336,33339,33331,33332,33342,33348,33353,33355,33359,33370,33375,33384,34942,34949,34952,35032,35039,35166,32669,32671,32679,32687,32688,32690,31868,25929,31889,31901,31900,31902,31906,31922,31932,31933,31937,31943,31948,31949,31944,31941,31959,31976,33390,26280,32703,32718,32725,32741,32737,32742,32745,32750,32755,31992,32119,32166,32174,32327,32411,40632,40628,36211,36228,36244,36241,36273,36199,36205,35911,35913,37194,37200,37198,37199,37220],[39804,39805,39806,39807,39808,39809,39810,39811,39812,39813,39814,39815,39816,39817,39818,39819,39820,39821,39822,39823,39824,39825,39826,39827,39828,39829,39830,39831,39832,39833,39834,39835,39836,39837,39838,39839,39840,39841,39842,39843,39844,39845,39846,39847,39848,39849,39850,39851,39852,39853,39854,39855,39856,39857,39858,39859,39860,39861,39862,39863,39864,39865,39866,63,39867,39868,39869,39870,39871,39872,39873,39874,39875,39876,39877,39878,39879,39880,39881,39882,39883,39884,39885,39886,39887,39888,39889,39890,39891,39892,39893,39894,39895,39896,39897,39898,39899,37218,37217,37232,37225,37231,37245,37246,37234,37236,37241,37260,37253,37264,37261,37265,37282,37283,37290,37293,37294,37295,37301,37300,37306,35925,40574,36280,36331,36357,36441,36457,36277,36287,36284,36282,36292,36310,36311,36314,36318,36302,36303,36315,36294,36332,36343,36344,36323,36345,36347,36324,36361,36349,36372,36381,36383,36396,36398,36387,36399,36410,36416,36409,36405,36413,36401,36425,36417,36418,36433,36434,36426,36464,36470,36476,36463,36468,36485,36495,36500,36496,36508,36510,35960,35970,35978,35973,35992,35988,26011,35286,35294,35290,35292],[39900,39901,39902,39903,39904,39905,39906,39907,39908,39909,39910,39911,39912,39913,39914,39915,39916,39917,39918,39919,39920,39921,39922,39923,39924,39925,39926,39927,39928,39929,39930,39931,39932,39933,39934,39935,39936,39937,39938,39939,39940,39941,39942,39943,39944,39945,39946,39947,39948,39949,39950,39951,39952,39953,39954,39955,39956,39957,39958,39959,39960,39961,39962,63,39963,39964,39965,39966,39967,39968,39969,39970,39971,39972,39973,39974,39975,39976,39977,39978,39979,39980,39981,39982,39983,39984,39985,39986,39987,39988,39989,39990,39991,39992,39993,39994,39995,35301,35307,35311,35390,35622,38739,38633,38643,38639,38662,38657,38664,38671,38670,38698,38701,38704,38718,40832,40835,40837,40838,40839,40840,40841,40842,40844,40702,40715,40717,38585,38588,38589,38606,38610,30655,38624,37518,37550,37576,37694,37738,37834,37775,37950,37995,40063,40066,40069,40070,40071,40072,31267,40075,40078,40080,40081,40082,40084,40085,40090,40091,40094,40095,40096,40097,40098,40099,40101,40102,40103,40104,40105,40107,40109,40110,40112,40113,40114,40115,40116,40117,40118,40119,40122,40123,40124,40125,40132,40133,40134,40135,40138,40139],[39996,39997,39998,39999,4E4,40001,40002,40003,40004,40005,40006,40007,40008,40009,40010,40011,40012,40013,40014,40015,40016,40017,40018,40019,40020,40021,40022,40023,40024,40025,40026,40027,40028,40029,40030,40031,40032,40033,40034,40035,40036,40037,40038,40039,40040,40041,40042,40043,40044,40045,40046,40047,40048,40049,40050,40051,40052,40053,40054,40055,40056,40057,40058,63,40059,40061,40062,40064,40067,40068,40073,40074,40076,40079,40083,40086,40087,40088,40089,40093,40106,40108,40111,40121,40126,40127,40128,40129,40130,40136,40137,40145,40146,40154,40155,40160,40161,40140,40141,40142,40143,40144,40147,40148,40149,40151,40152,40153,40156,40157,40159,40162,38780,38789,38801,38802,38804,38831,38827,38819,38834,38836,39601,39600,39607,40536,39606,39610,39612,39617,39616,39621,39618,39627,39628,39633,39749,39747,39751,39753,39752,39757,39761,39144,39181,39214,39253,39252,39647,39649,39654,39663,39659,39675,39661,39673,39688,39695,39699,39711,39715,40637,40638,32315,40578,40583,40584,40587,40594,37846,40605,40607,40667,40668,40669,40672,40671,40674,40681,40679,40677,40682,40687,40738,40748,40751,40761,40759,40765,40766,40772],[40163,40164,40165,40166,40167,40168,40169,40170,40171,40172,40173,40174,40175,40176,40177,40178,40179,40180,40181,40182,40183,40184,40185,40186,40187,40188,40189,40190,40191,40192,40193,40194,40195,40196,40197,40198,40199,40200,40201,40202,40203,40204,40205,40206,40207,40208,40209,40210,40211,40212,40213,40214,40215,40216,40217,40218,40219,40220,40221,40222,40223,40224,40225,63,40226,40227,40228,40229,40230,40231,40232,40233,40234,40235,40236,40237,40238,40239,40240,40241,40242,40243,40244,40245,40246,40247,40248,40249,40250,40251,40252,40253,40254,40255,40256,40257,40258,57908,57909,57910,57911,57912,57913,57914,57915,57916,57917,57918,57919,57920,57921,57922,57923,57924,57925,57926,57927,57928,57929,57930,57931,57932,57933,57934,57935,57936,57937,57938,57939,57940,57941,57942,57943,57944,57945,57946,57947,57948,57949,57950,57951,57952,57953,57954,57955,57956,57957,57958,57959,57960,57961,57962,57963,57964,57965,57966,57967,57968,57969,57970,57971,57972,57973,57974,57975,57976,57977,57978,57979,57980,57981,57982,57983,57984,57985,57986,57987,57988,57989,57990,57991,57992,57993,57994,57995,57996,57997,57998,57999,58E3,58001],[40259,40260,40261,40262,40263,40264,40265,40266,40267,40268,40269,40270,40271,40272,40273,40274,40275,40276,40277,40278,40279,40280,40281,40282,40283,40284,40285,40286,40287,40288,40289,40290,40291,40292,40293,40294,40295,40296,40297,40298,40299,40300,40301,40302,40303,40304,40305,40306,40307,40308,40309,40310,40311,40312,40313,40314,40315,40316,40317,40318,40319,40320,40321,63,40322,40323,40324,40325,40326,40327,40328,40329,40330,40331,40332,40333,40334,40335,40336,40337,40338,40339,40340,40341,40342,40343,40344,40345,40346,40347,40348,40349,40350,40351,40352,40353,40354,58002,58003,58004,58005,58006,58007,58008,58009,58010,58011,58012,58013,58014,58015,58016,58017,58018,58019,58020,58021,58022,58023,58024,58025,58026,58027,58028,58029,58030,58031,58032,58033,58034,58035,58036,58037,58038,58039,58040,58041,58042,58043,58044,58045,58046,58047,58048,58049,58050,58051,58052,58053,58054,58055,58056,58057,58058,58059,58060,58061,58062,58063,58064,58065,58066,58067,58068,58069,58070,58071,58072,58073,58074,58075,58076,58077,58078,58079,58080,58081,58082,58083,58084,58085,58086,58087,58088,58089,58090,58091,58092,58093,58094,58095],[40355,40356,40357,40358,40359,40360,40361,40362,40363,40364,40365,40366,40367,40368,40369,40370,40371,40372,40373,40374,40375,40376,40377,40378,40379,40380,40381,40382,40383,40384,40385,40386,40387,40388,40389,40390,40391,40392,40393,40394,40395,40396,40397,40398,40399,40400,40401,40402,40403,40404,40405,40406,40407,40408,40409,40410,40411,40412,40413,40414,40415,40416,40417,63,40418,40419,40420,40421,40422,40423,40424,40425,40426,40427,40428,40429,40430,40431,40432,40433,40434,40435,40436,40437,40438,40439,40440,40441,40442,40443,40444,40445,40446,40447,40448,40449,40450,58096,58097,58098,58099,58100,58101,58102,58103,58104,58105,58106,58107,58108,58109,58110,58111,58112,58113,58114,58115,58116,58117,58118,58119,58120,58121,58122,58123,58124,58125,58126,58127,58128,58129,58130,58131,58132,58133,58134,58135,58136,58137,58138,58139,58140,58141,58142,58143,58144,58145,58146,58147,58148,58149,58150,58151,58152,58153,58154,58155,58156,58157,58158,58159,58160,58161,58162,58163,58164,58165,58166,58167,58168,58169,58170,58171,58172,58173,58174,58175,58176,58177,58178,58179,58180,58181,58182,58183,58184,58185,58186,58187,58188,58189],[40451,40452,40453,40454,40455,40456,40457,40458,40459,40460,40461,40462,40463,40464,40465,40466,40467,40468,40469,40470,40471,40472,40473,40474,40475,40476,40477,40478,40484,40487,40494,40496,40500,40507,40508,40512,40525,40528,40530,40531,40532,40534,40537,40541,40543,40544,40545,40546,40549,40558,40559,40562,40564,40565,40566,40567,40568,40569,40570,40571,40572,40573,40576,63,40577,40579,40580,40581,40582,40585,40586,40588,40589,40590,40591,40592,40593,40596,40597,40598,40599,40600,40601,40602,40603,40604,40606,40608,40609,40610,40611,40612,40613,40615,40616,40617,40618,58190,58191,58192,58193,58194,58195,58196,58197,58198,58199,58200,58201,58202,58203,58204,58205,58206,58207,58208,58209,58210,58211,58212,58213,58214,58215,58216,58217,58218,58219,58220,58221,58222,58223,58224,58225,58226,58227,58228,58229,58230,58231,58232,58233,58234,58235,58236,58237,58238,58239,58240,58241,58242,58243,58244,58245,58246,58247,58248,58249,58250,58251,58252,58253,58254,58255,58256,58257,58258,58259,58260,58261,58262,58263,58264,58265,58266,58267,58268,58269,58270,58271,58272,58273,58274,58275,58276,58277,58278,58279,58280,58281,58282,58283],[40619,40620,40621,40622,40623,40624,40625,40626,40627,40629,40630,40631,40633,40634,40636,40639,40640,40641,40642,40643,40645,40646,40647,40648,40650,40651,40652,40656,40658,40659,40661,40662,40663,40665,40666,40670,40673,40675,40676,40678,40680,40683,40684,40685,40686,40688,40689,40690,40691,40692,40693,40694,40695,40696,40698,40701,40703,40704,40705,40706,40707,40708,40709,63,40710,40711,40712,40713,40714,40716,40719,40721,40722,40724,40725,40726,40728,40730,40731,40732,40733,40734,40735,40737,40739,40740,40741,40742,40743,40744,40745,40746,40747,40749,40750,40752,40753,58284,58285,58286,58287,58288,58289,58290,58291,58292,58293,58294,58295,58296,58297,58298,58299,58300,58301,58302,58303,58304,58305,58306,58307,58308,58309,58310,58311,58312,58313,58314,58315,58316,58317,58318,58319,58320,58321,58322,58323,58324,58325,58326,58327,58328,58329,58330,58331,58332,58333,58334,58335,58336,58337,58338,58339,58340,58341,58342,58343,58344,58345,58346,58347,58348,58349,58350,58351,58352,58353,58354,58355,58356,58357,58358,58359,58360,58361,58362,58363,58364,58365,58366,58367,58368,58369,58370,58371,58372,58373,58374,58375,58376,58377],[40754,40755,40756,40757,40758,40760,40762,40764,40767,40768,40769,40770,40771,40773,40774,40775,40776,40777,40778,40779,40780,40781,40782,40783,40786,40787,40788,40789,40790,40791,40792,40793,40794,40795,40796,40797,40798,40799,40800,40801,40802,40803,40804,40805,40806,40807,40808,40809,40810,40811,40812,40813,40814,40815,40816,40817,40818,40819,40820,40821,40822,40823,40824,63,40825,40826,40827,40828,40829,40830,40833,40834,40845,40846,40847,40848,40849,40850,40851,40852,40853,40854,40855,40856,40860,40861,40862,40865,40866,40867,40868,40869,63788,63865,63893,63975,63985,58378,58379,58380,58381,58382,58383,58384,58385,58386,58387,58388,58389,58390,58391,58392,58393,58394,58395,58396,58397,58398,58399,58400,58401,58402,58403,58404,58405,58406,58407,58408,58409,58410,58411,58412,58413,58414,58415,58416,58417,58418,58419,58420,58421,58422,58423,58424,58425,58426,58427,58428,58429,58430,58431,58432,58433,58434,58435,58436,58437,58438,58439,58440,58441,58442,58443,58444,58445,58446,58447,58448,58449,58450,58451,58452,58453,58454,58455,58456,58457,58458,58459,58460,58461,58462,58463,58464,58465,58466,58467,58468,58469,58470,58471],[64012,64013,64014,64015,64017,64019,64020,64024,64031,64032,64033,64035,64036,64039,64040,64041,59413,59414,59415,59416,59417,59418,59419,59420,59421,59422,59423,59424,59425,59426,59427,59428,59429,59430,59431,59432,59433,59434,59435,59436,59437,59438,59439,59440,59441,59442,59443,59444,59445,59446,59447,59448,59449,59450,59451,59452,59453,59454,59455,59456,59457,59458,59459,63,59460,59461,59462,59463,59464,59465,59466,59467,59468,59469,59470,59471,59472,59473,59474,59475,59476,59477,59478,59479,59480,59481,59482,59483,59484,59485,59486,59487,59488,59489,59490,59491,59492,58472,58473,58474,58475,58476,58477,58478,58479,58480,58481,58482,58483,58484,58485,58486,58487,58488,58489,58490,58491,58492,58493,58494,58495,58496,58497,58498,58499,58500,58501,58502,58503,58504,58505,58506,58507,58508,58509,58510,58511,58512,58513,58514,58515,58516,58517,58518,58519,58520,58521,58522,58523,58524,58525,58526,58527,58528,58529,58530,58531,58532,58533,58534,58535,58536,58537,58538,58539,58540,58541,58542,58543,58544,58545,58546,58547,58548,58549,58550,58551,58552,58553,58554,58555,58556,58557,58558,58559,58560,58561,58562,58563,58564,58565]];function getUcsByGbkAsc(b){var c=(b&65280)>>8,a=b&255;return 129<=c&&254>=c&&64<=a&&254>=a?ucs[c-129][a-64]:b}function gbkstr2ucsstr(b){for(var c="",a="",d=0,e=0;e<b.length;e++)d=b.charCodeAt(e),c=b[e],33088<=d&&(d=getUcsByGbkAsc(d),c=String.fromCharCode(d)),a+=c;return a}function gbkByteArr2UcsStr(b){for(var c=0,a="",d=0;0!=b[c]&&c<b.length;)128>b[c]?d=b[c]:(d=getUcsByGbkAsc((b[c]<<8)+b[c+1]),c++),a+=String.fromCharCode(d),c++;return a}function ucsstr2gbkarr(b){var c=$URL.encode(b);b=[];for(var a=0;a<c.length;a++){var d=c.charAt(a);"%"==d?(d=c.charAt(a+1)+c.charAt(a+2),b.push(parseInt(d,16)),a+=2):b.push(d.charCodeAt())}c=ucsSpecialUnicode(b);if(0<c.length)for(a=0;a<c.length;a++){var d=c[a],e=specialDeal(59299);b.splice(d,0,e[0]);b.splice(d+1,0,e[1]);b.splice(d+2,1)}return b}function ucsSpecialUnicode(b){for(var c=[],a=b.length,d=0;d<a;d++)59299==b[d]&&c.push(d);return c}function specialDeal(b){var c=[];switch(b){case 59299:c.push(167),c.push(197)}return c}var BS=20,shifts2=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],des_skb=[[0,16,536870912,536870928,65536,65552,536936448,536936464,2048,2064,536872960,536872976,67584,67600,536938496,536938512,32,48,536870944,536870960,65568,65584,536936480,536936496,2080,2096,536872992,536873008,67616,67632,536938528,536938544,524288,524304,537395200,537395216,589824,589840,537460736,537460752,526336,526352,537397248,537397264,591872,591888,537462784,537462800,524320,524336,537395232,537395248,589856,589872,537460768,537460784,526368,526384,537397280,537397296,591904,591920,537462816,537462832],[0,33554432,8192,33562624,2097152,35651584,2105344,35659776,4,33554436,8196,33562628,2097156,35651588,2105348,35659780,1024,33555456,9216,33563648,2098176,35652608,2106368,35660800,1028,33555460,9220,33563652,2098180,35652612,2106372,35660804,268435456,301989888,268443648,301998080,270532608,304087040,270540800,304095232,268435460,301989892,268443652,301998084,270532612,304087044,270540804,304095236,268436480,301990912,268444672,301999104,270533632,304088064,270541824,304096256,268436484,301990916,268444676,301999108,270533636,304088068,270541828,304096260],[0,1,262144,262145,16777216,16777217,17039360,17039361,2,3,262146,262147,16777218,16777219,17039362,17039363,512,513,262656,262657,16777728,16777729,17039872,17039873,514,515,262658,262659,16777730,16777731,17039874,17039875,134217728,134217729,134479872,134479873,150994944,150994945,151257088,151257089,134217730,134217731,134479874,134479875,150994946,150994947,151257090,151257091,134218240,134218241,134480384,134480385,150995456,150995457,151257600,151257601,134218242,134218243,134480386,134480387,150995458,150995459,151257602,151257603],[0,1048576,256,1048832,8,1048584,264,1048840,4096,1052672,4352,1052928,4104,1052680,4360,1052936,67108864,68157440,67109120,68157696,67108872,68157448,67109128,68157704,67112960,68161536,67113216,68161792,67112968,68161544,67113224,68161800,131072,1179648,131328,1179904,131080,1179656,131336,1179912,135168,1183744,135424,1184E3,135176,1183752,135432,1184008,67239936,68288512,67240192,68288768,67239944,68288520,67240200,68288776,67244032,68292608,67244288,68292864,67244040,68292616,67244296,68292872],[0,268435456,65536,268500992,4,268435460,65540,268500996,536870912,805306368,536936448,805371904,536870916,805306372,536936452,805371908,1048576,269484032,1114112,269549568,1048580,269484036,1114116,269549572,537919488,806354944,537985024,806420480,537919492,806354948,537985028,806420484,4096,268439552,69632,268505088,4100,268439556,69636,268505092,536875008,805310464,536940544,805376E3,536875012,805310468,536940548,805376004,1052672,269488128,1118208,269553664,1052676,269488132,1118212,269553668,537923584,806359040,537989120,806424576,537923588,806359044,537989124,806424580],[0,134217728,8,134217736,1024,134218752,1032,134218760,131072,134348800,131080,134348808,132096,134349824,132104,134349832,1,134217729,9,134217737,1025,134218753,1033,134218761,131073,134348801,131081,134348809,132097,134349825,132105,134349833,33554432,167772160,33554440,167772168,33555456,167773184,33555464,167773192,33685504,167903232,33685512,167903240,33686528,167904256,33686536,167904264,33554433,167772161,33554441,167772169,33555457,167773185,33555465,167773193,33685505,167903233,33685513,167903241,33686529,167904257,33686537,167904265],[0,256,524288,524544,16777216,16777472,17301504,17301760,16,272,524304,524560,16777232,16777488,17301520,17301776,2097152,2097408,2621440,2621696,18874368,18874624,19398656,19398912,2097168,2097424,2621456,2621712,18874384,18874640,19398672,19398928,512,768,524800,525056,16777728,16777984,17302016,17302272,528,784,524816,525072,16777744,16778E3,17302032,17302288,2097664,2097920,2621952,2622208,18874880,18875136,19399168,19399424,2097680,2097936,2621968,2622224,18874896,18875152,19399184,19399440],[0,67108864,262144,67371008,2,67108866,262146,67371010,8192,67117056,270336,67379200,8194,67117058,270338,67379202,32,67108896,262176,67371040,34,67108898,262178,67371042,8224,67117088,270368,67379232,8226,67117090,270370,67379234,2048,67110912,264192,67373056,2050,67110914,264194,67373058,10240,67119104,272384,67381248,10242,67119106,272386,67381250,2080,67110944,264224,67373088,2082,67110946,264226,67373090,10272,67119136,272416,67381280,10274,67119138,272418,67381282]],des_sptrans=[[34080768,524288,33554434,34080770,33554432,526338,524290,33554434,526338,34080768,34078720,2050,33556482,33554432,0,524290,524288,2,33556480,526336,34080770,34078720,2050,33556480,2,2048,526336,34078722,2048,33556482,34078722,0,0,34080770,33556480,524290,34080768,524288,2050,33556480,34078722,2048,526336,33554434,526338,2,33554434,34078720,34080770,526336,34078720,33556482,33554432,2050,524290,0,524288,33554432,33556482,34080768,2,34078722,2048,526338],[1074823184,0,1081344,1074790400,1073741840,32784,1073774592,1081344,32768,1074790416,16,1073774592,1048592,1074823168,1074790400,16,1048576,1073774608,1074790416,32768,1081360,1073741824,0,1048592,1073774608,1081360,1074823168,1073741840,1073741824,1048576,32784,1074823184,1048592,1074823168,1073774592,1081360,1074823184,1048592,1073741840,0,1073741824,32784,1048576,1074790416,32768,1073741824,1081360,1073774608,1074823168,32768,0,1073741840,16,1074823184,1081344,1074790400,1074790416,1048576,32784,1073774592,1073774608,16,1074790400,1081344],[67108865,67371264,256,67109121,262145,67108864,67109121,262400,67109120,262144,67371008,1,67371265,257,1,67371009,0,262145,67371264,256,257,67371265,262144,67108865,67371009,67109120,262401,67371008,262400,0,67108864,262401,67371264,256,1,262144,257,262145,67371008,67109121,0,67371264,262400,67371009,262145,67108864,67371265,1,262401,67108865,67108864,67371265,262144,67109120,67109121,262400,67109120,0,67371009,257,67108865,262401,256,67371008],[4198408,268439552,8,272633864,0,272629760,268439560,4194312,272633856,268435464,268435456,4104,268435464,4198408,4194304,268435456,272629768,4198400,4096,8,4198400,268439560,272629760,4096,4104,0,4194312,272633856,268439552,272629768,272633864,4194304,272629768,4104,4194304,268435464,4198400,268439552,8,272629760,268439560,0,4096,4194312,0,272629768,272633856,4096,268435456,272633864,4198408,4194304,272633864,8,268439552,4198408,4194312,4198400,272629760,268439560,4104,268435456,268435464,272633856],[134217728,65536,1024,134284320,134283296,134218752,66592,134283264,65536,32,134217760,66560,134218784,134283296,134284288,0,66560,134217728,65568,1056,134218752,66592,0,134217760,32,134218784,134284320,65568,134283264,1024,1056,134284288,134284288,134218784,65568,134283264,65536,32,134217760,134218752,134217728,66560,134284320,0,66592,134217728,1024,65568,134218784,1024,0,134284320,134283296,134284288,1056,65536,66560,134283296,134218752,1056,32,66592,134283264,134217760],[2147483712,2097216,0,2149588992,2097216,8192,2147491904,2097152,8256,2149589056,2105344,2147483648,2147491840,2147483712,2149580800,2105408,2097152,2147491904,2149580864,0,8192,64,2149588992,2149580864,2149589056,2149580800,2147483648,8256,64,2105344,2105408,2147491840,8256,2147483648,2147491840,2105408,2149588992,2097216,0,2147491840,2147483648,8192,2149580864,2097152,2097216,2149589056,2105344,64,2149589056,2105344,2097152,2147491904,2147483712,2149580800,2105408,0,8192,2147483712,2147491904,2149588992,2149580800,8256,64,2149580864],[16384,512,16777728,16777220,16794116,16388,16896,0,16777216,16777732,516,16793600,4,16794112,16793600,516,16777732,16384,16388,16794116,0,16777728,16777220,16896,16793604,16900,16794112,4,16900,16793604,512,16777216,16900,16793600,16793604,516,16384,512,16777216,16793604,16777732,16900,16896,0,512,16777220,4,16777728,0,16777732,16777728,16896,516,16384,16794116,16777216,16794112,4,16388,16794116,16777220,16794112,16793600,16388],[545259648,545390592,131200,0,537001984,8388736,545259520,545390720,128,536870912,8519680,131200,8519808,537002112,536871040,545259520,131072,8519808,8388736,537001984,545390720,536871040,0,8519680,536870912,8388608,537002112,545259648,8388608,131072,545390592,128,8388608,131072,536871040,545390720,131200,536870912,0,8519680,545259648,537002112,537001984,8388736,545390592,128,8388736,537001984,545390720,8388608,545259520,536871040,8519680,131200,537002112,545259520,128,545390592,8519808,0,536870912,545259648,131072,8519808]];function hperm_op(b,c,a,d){c=(b<<16-a^b)&d;return{a:b^c^c>>>16-a,t:c}}function perm_op(b,c,a,d,e){a=(b>>d^c)&e;return{a:b^a<<d,b:c^a,t:a}}function DoInit(b){var c,a,d,e,g,f=[];c=b[0]|b[1]<<8|b[2]<<16|b[3]<<24;b=b[4]|b[5]<<8|b[6]<<16|b[7]<<24;a=perm_op(b,c,0,4,252645135);b=a.a;c=a.b;a=a.t;a=hperm_op(c,a,-2,3435921408);c=a.a;a=a.t;a=hperm_op(b,a,-2,3435921408);b=a.a;a=a.t;a=perm_op(b,c,a,1,1431655765);b=a.a;c=a.b;a=a.t;a=perm_op(c,b,a,8,16711935);c=a.a;b=a.b;a=a.t;a=perm_op(b,c,a,1,1431655765);b=a.a;c=a.b;b=(b&255)<<16|b&65280|(b&16711680)>>>16|(c&4026531840)>>>4;c&=268435455;for(g=0;15>=g;g++)0!=shifts2[g]?(c=c>>>2|c<<26,b=b>>>2|b<<26):(c=c>>>1|c<<27,b=b>>>1|b<<27),c&=268435455,b&=268435455,d=des_skb[0][c&63]|des_skb[1][c>>>6&3|c>>>7&60]|des_skb[2][c>>>13&15|c>>>14&48]|des_skb[3][c>>>20&1|c>>>21&6|c>>>22&56],a=des_skb[4][b&63]|des_skb[5][b>>>7&3|b>>>8&60]|des_skb[6][b>>>15&63]|des_skb[7][b>>>21&15|b>>>22&48],e=a<<16|d&65535,f[g<<1]=(e<<2|e>>>30)>>>0,e=d>>>16|a&4294901760,f[(g<<1)+1]=(e<<6|e>>>26)>>>0;return f}function EncryptBlock(b,c,a){var d,e,g;d=(c>>>4^b)&252645135;b^=d;c^=d<<4;d=(b>>>16^c)&65535;c^=d;b^=d<<16;d=(c>>>2^b)&858993459;b^=d;c^=d<<2;d=(b>>>8^c)&16711935;c^=d;b^=d<<8;d=(c>>>1^b)&1431655765;b^=d;c^=d<<1;b=b>>>29|b<<3;c=c>>>29|c<<3;for(g=0;32>g;)e=b^a[g],d=b^a[g+1],d=d>>>4|d<<28,c=c^des_sptrans[0][e>>>2&63]^des_sptrans[2][e>>>10&63]^des_sptrans[4][e>>>18&63]^des_sptrans[6][e>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63],e=c^a[g+2],d=c^a[g+3],d=d>>>4|d<<28,b=b^des_sptrans[0][e>>>2&63]^des_sptrans[2][e>>>10&63]^des_sptrans[4][e>>>18&63]^des_sptrans[6][e>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63],e=b^a[g+4],d=b^a[g+5],d=d>>>4|d<<28,c=c^des_sptrans[0][e>>>2&63]^des_sptrans[2][e>>>10&63]^des_sptrans[4][e>>>18&63]^des_sptrans[6][e>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63],e=c^a[g+6],d=c^a[g+7],d=d>>>4|d<<28,b=b^des_sptrans[0][e>>>2&63]^des_sptrans[2][e>>>10&63]^des_sptrans[4][e>>>18&63]^des_sptrans[6][e>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63],g+=8;b=b>>>3|b<<29;c=c>>>3|c<<29;d=(b>>>1^c)&1431655765;c^=d;b^=d<<1;d=(c>>>8^b)&16711935;b^=d;c^=d<<8;d=(b>>>2^c)&858993459;c^=d;b^=d<<2;d=(c>>>16^b)&65535;b^=d;c^=d<<16;d=(b>>>4^c)&252645135;return{l:(c^d)>>>0,r:(b^d<<4)>>>0}}function DecryptBlock(b,c,a){var d,e,g;d=(c>>>4^b)&252645135;b^=d;c^=d<<4;d=(b>>>16^c)&65535;c^=d;b^=d<<16;d=(c>>>2^b)&858993459;b^=d;c^=d<<2;d=(b>>>8^c)&16711935;c^=d;b^=d<<8;d=(c>>>1^b)&1431655765;b^=d;c^=d<<1;b=b>>>29|b<<3;c=c>>>29|c<<3;for(g=30;0<g;)e=b^a[g],d=b^a[g+1],d=d>>>4|d<<28,c=c^des_sptrans[0][e>>>2&63]^des_sptrans[2][e>>>10&63]^des_sptrans[4][e>>>18&63]^des_sptrans[6][e>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63],e=c^a[g-2],d=c^a[g-1],d=d>>>4|d<<28,b=b^des_sptrans[0][e>>>2&63]^des_sptrans[2][e>>>10&63]^des_sptrans[4][e>>>18&63]^des_sptrans[6][e>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63],e=b^a[g-4],d=b^a[g-3],d=d>>>4|d<<28,c=c^des_sptrans[0][e>>>2&63]^des_sptrans[2][e>>>10&63]^des_sptrans[4][e>>>18&63]^des_sptrans[6][e>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63],e=c^a[g-6],d=c^a[g-5],d=d>>>4|d<<28,b=b^des_sptrans[0][e>>>2&63]^des_sptrans[2][e>>>10&63]^des_sptrans[4][e>>>18&63]^des_sptrans[6][e>>>26&63]^des_sptrans[1][d>>>2&63]^des_sptrans[3][d>>>10&63]^des_sptrans[5][d>>>18&63]^des_sptrans[7][d>>>26&63],g-=8;b=b>>>3|b<<29;c=c>>>3|c<<29;d=(b>>>1^c)&1431655765;c^=d;b^=d<<1;d=(c>>>8^b)&16711935;b^=d;c^=d<<8;d=(b>>>2^c)&858993459;c^=d;b^=d<<2;d=(c>>>16^b)&65535;b^=d;c^=d<<16;d=(b>>>4^c)&252645135;return{l:(c^d)>>>0,r:(b^d<<4)>>>0}}function GetKeyData(b){var c=Array(BS),a=Array(BS),d=Array(8);b=core_sha1(AlignSHA1(b));for(var e=0,g=0;5>e;e++,g+=4)a[g+3]=(b[e]&255)>>>0,a[g+2]=(b[e]&65280)>>>8,a[g+1]=(b[e]&16711680)>>>16,a[g+0]=(b[e]&4278190080)>>>24;for(e=0;8>e;e++)d[e]=a[e];a=DoInit(d);for(e=0;e<BS;e++)c[e]=143;b=EncryptBlock(2408550287,2408550287,a);c[0]=(b.l&255)>>>0;c[1]=(b.l&65280)>>>8;c[2]=(b.l&16711680)>>>16;c[3]=(b.l&4278190080)>>>24;c[4]=(b.r&255)>>>0;c[5]=(b.r&65280)>>>8;c[6]=(b.r&16711680)>>>16;c[7]=(b.r&4278190080)>>>24;return{IV:c,KeyData:a}}function XorBlock(b,c,a,d,e){for(var g=0;g<e;g++)b[c]^=a[d],c++,d++;return b}function EncryptCBC(b,c,a,d){for(var e=Array(c),g=0,f=0,h=0,l=0,m=1;m<=c/BS;m++){for(h=0;h<BS;h++)e[f+h]=b[g+h];e=XorBlock(e,f,a,0,BS);h=e[f+0]+(e[f+1]<<8)+(e[f+2]<<16)+(e[f+3]<<24)>>>0;l=e[f+4]+(e[f+5]<<8)+(e[f+6]<<16)+(e[f+7]<<24)>>>0;h=EncryptBlock(h,l,d);e[f+0]=(h.l&255)>>>0;e[f+1]=(h.l&65280)>>>8;e[f+2]=(h.l&16711680)>>>16;e[f+3]=(h.l&4278190080)>>>24;e[f+4]=(h.r&255)>>>0;e[f+5]=(h.r&65280)>>>8;e[f+6]=(h.r&16711680)>>>16;e[f+7]=(h.r&4278190080)>>>24;for(h=0;h<BS;h++)a[h]=e[f+h];g+=BS;f+=BS}if(c%BS){h=a[0]+(a[1]<<8)+(a[2]<<16)+(a[3]<<24)>>>0;l=a[4]+(a[5]<<8)+(a[6]<<16)+(a[7]<<24)>>>0;h=EncryptBlock(h,l,d);a[0]=(h.l&255)>>>0;a[1]=(h.l&65280)>>>8;a[2]=(h.l&16711680)>>>16;a[3]=(h.l&4278190080)>>>24;a[4]=(h.r&255)>>>0;a[5]=(h.r&65280)>>>8;a[6]=(h.r&16711680)>>>16;a[7]=(h.r&4278190080)>>>24;for(h=0;h<c%BS;h++)e[f+h]=b[g+h];e=XorBlock(e,f,a,0,c%BS)}return e}function DecryptCBC(b,c,a,d){for(var e=Array(BS),g=Array(c),f=0,h=0,l=0,m=0,n=1;n<=c/BS;n++){for(l=0;l<BS;l++)g[h+l]=b[f+l],e[l]=b[f+l];l=g[h+0]+(g[h+1]<<8)+(g[h+2]<<16)+(g[h+3]<<24)>>>0;m=g[h+4]+(g[h+5]<<8)+(g[h+6]<<16)+(g[h+7]<<24)>>>0;l=DecryptBlock(l,m,d);g[h+0]=(l.l&255)>>>0;g[h+1]=(l.l&65280)>>>8;g[h+2]=(l.l&16711680)>>>16;g[h+3]=(l.l&4278190080)>>>24;g[h+4]=(l.r&255)>>>0;g[h+5]=(l.r&65280)>>>8;g[h+6]=(l.r&16711680)>>>16;g[h+7]=(l.r&4278190080)>>>24;g=XorBlock(g,h,a,0,BS);for(l=0;l<BS;l++)a[l]=e[l];f+=BS;h+=BS}if(c%BS){l=a[0]+(a[1]<<8)+(a[2]<<16)+(a[3]<<24)>>>0;m=a[4]+(a[5]<<8)+(a[6]<<16)+(a[7]<<24)>>>0;l=EncryptBlock(l,m,d);a[0]=(l.l&255)>>>0;a[1]=(l.l&65280)>>>8;a[2]=(l.l&16711680)>>>16;a[3]=(l.l&4278190080)>>>24;a[4]=(l.r&255)>>>0;a[5]=(l.r&65280)>>>8;a[6]=(l.r&16711680)>>>16;a[7]=(l.r&4278190080)>>>24;for(l=0;l<c%BS;l++)g[h+l]=b[f+l];g=XorBlock(g,h,a,0,c%BS)}return g}function EncryptDes(b,c,a){a=GetKeyData(a);return EncryptCBC(b,c,a.IV,a.KeyData)}function DecryptDes(b,c,a){a=GetKeyData(a);return DecryptCBC(b,c,a.IV,a.KeyData)}function string2ByteArray(b){for(var c=[],a=0,d=0,e=0;d<b.length;d++,e++)a=b.charCodeAt(d),128>a?c[e]=a:(c[e++]=(a&255)>>>0,c[e]=(a&65280)>>>8);return{arr:c,len:e}}function byteArray2String(b,c){for(var a="",d=0;d<c&&0!=b[d];d++)a=27==b[d]?a+"\r\n":32==b[d]?a+"  ":12288==b[d]?a+"    ":9472==b[d]?a+"\u4e00":a+String.fromCharCode(b[d]);return a}var Addskills=function(b){function c(){c.__super.call(this);this.init()}Laya["class"](c,"Addskills",AddSkillsUI);b=c.prototype;b.init=function(){this.btn_close.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_determine.on(Laya.Event.CLICK,this,this.BtnClick);this.img_bg.left=Laya.stage.width-350};b.SkillInfo=function(a,b){if(b&&(this.img_skill.skin=b,!this.img_skill.getChildByName("skill_img2"))){var c=Animationmodule.playframe(!1,this.img_skill,"gameres/animation/addskills/",1,8,100,!0,!1);c&&(c.name="skill_img2",c.pos(-10,-10))}a&&(this.skill_name.text=a.Def.sMagicName,this.skill=a)};b.checkSkill=function(){for(var a=0;a<g_SetupMagicList.length;a++){var b=g_SetupMagicList[a];if(b&&b==this.skill)return!1}return!0};b.BtnClick=function(a){a=a.target.name;if("close"==a)Animationmodule.removeAniname("skill_img2"),this.removeSelf();else if("determine"==a&&(Animationmodule.removeAniname("skill_img2"),this.removeSelf(),this.num=null,this.checkSkill())){if(0==g_rotation)if(null!=g_SetupMagicList[3])this.SkillRocke();else for(a=0;4>a;a++){if(null==g_SetupMagicList[a]){g_SetupMagicList[a]=this.skill;GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,a+49);this.num=a;break}}else if(1==g_rotation)if(null!=g_SetupMagicList[7])this.SkillRocke();else for(a=4;8>a;a++)if(null==g_SetupMagicList[a]){g_SetupMagicList[a]=this.skill;GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,a+49);this.num=a;break}null!=this.num&&(Laya.stage.event("skillrocke",[this.num]),Laya.stage.event("Magic_Refresh"),Laya.stage.event("update_icon"))}};b.SkillRocke=function(){for(var a=0;8>a;a++)if(null==g_SetupMagicList[a]){g_SetupMagicList[a]=this.skill;GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,a+49);this.num=a;break}};return c}(AddSkillsUI),DoubleRocker=function(b){function c(){c.__super.call(this);this.init()}Laya["class"](c,"DoubleRocker",DoubleRockerUI);c.prototype.init=function(){this.rockerMoveType;this.lastClickDirArrowTime=0;this.rockerQiuOrigin=new Laya.Point;this.rockerBgRadius;this.centerPointOfRockerBg=new Laya.Point;this.moveShowAnim=new Laya.Image;this.addChild(this.moveShowAnim);this.initHalfWidth();this.initDefaultValue();this.addEvent();this.showRockerBg()};c.prototype.initHalfWidth=function(){this.halfOfRunBall=this.img_run_qiu.width/2;this.halfOfRunRockerBg=this.img_run_bg.width/2;this.halfOfWalkBall=this.img_walk_qiu.width/2;this.halfOfWalkRockerBg=this.img_walk_bg.width/2};c.prototype.initDefaultValue=function(){moveing||(this.dirNum=-1,this.isMoving=!1,this.moveShowAnim.visible=!1,this.rockerAnimFrame=-1,this.rockerSelected=!1)};c.prototype.addEvent=function(){Laya.stage.on("updateRocker",this,this.showRockerBg);this.on(Laya.Event.MOUSE_DOWN,this,this.onDragStart);this.addDirArrowEvent(this.box_run_otherDir._childs,ROCKER_RUN);this.addDirArrowEvent(this.box_walk_otherDir._childs,ROCKER_WALK)};c.prototype.showRockerBg=function(){this.setBallBgAndArrowBtnVisible([this.img_run_bg,this.box_run_otherDir,this.img_walk_bg,this.box_walk_otherDir])};c.prototype.setBallBgAndArrowBtnVisible=function(a){for(var b in a)a[b].visible=rockerposview};c.prototype.addDirArrowEvent=function(a,b){for(var c=0;8>c;c++)a[c].on(Laya.Event.CLICK,this,this.onDirArrow,[c,b])};c.prototype.onDirArrow=function(a,b){if(!(roledielock||Actionlock||rockerlock||player_stalls)&&this.dirArrowCdHasCooled()){var c=ObjectManage.findobject(playerID);if(c.cur_dir==a||!c.action_over&&1!=c.cur_state&&6!=c.cur_state){if(0==this.checkParalysisMove())return;Objectcontrol.objectmove({dir:a,state:b})}else GameUtil.delhalo(attackerID),c.changestate(null,1,a,!0),Sendmessage.ChangDir(c.grid.x,c.grid.y,a);this.lastClickDirArrowTime=Laya.Browser.now()}};c.prototype.dirArrowCdHasCooled=function(){return 400<=Laya.Browser.now()-this.lastClickDirArrowTime};c.prototype.keepMove=function(){if(g_furious_collision_ing){if(moveing)return;g_furious_collision_ing=!1}-1<this.dirNum&&this.isMoving&&0!=this.checkParalysisMove()&&(g_rocker_moving=!0,Objectcontrol.objectmove({dir:this.dirNum,state:this.getCurRockerMoveType()}),Fightmodule.leavefight(),Movemodule.stopmove(),Movemodule.end_point=null)};c.prototype.checkParalysisMove=function(){if(1==Objectcontrol.self_obj.paralysis_state){var a=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.WALK),b=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.RUN);if(1==this.rockerMoveType)return a;if(2==this.rockerMoveType)return b}return!0};c.prototype.getCurRockerMoveType=function(){return this.inSpiderWebSkill()?ROCKER_WALK:this.rockerMoveType};c.prototype.inSpiderWebSkill=function(){return g_boCobWeb};c.prototype.onDragStart=function(a){Objectcontrol.self_obj&&!this.rockerSelected&&(this.curTouchid=a.touchId,rockerposview?this.checkClickQiu(this.img_run_qiu)?this.initDrag(ROCKER_RUN,this.img_run_qiu):this.checkClickQiu(this.img_walk_qiu)&&this.initDrag(ROCKER_WALK,this.img_walk_qiu):this.inWalkClickArea()?(this.img_walk_bg.visible=!0,this.initDrag(ROCKER_WALK,this.img_walk_qiu),this.setNewRockerPos(this.img_walk_qiu,this.img_walk_bg,this.halfOfWalkBall,this.halfOfWalkRockerBg)):(this.img_run_bg.visible=!0,this.initDrag(ROCKER_RUN,this.img_run_qiu),this.setNewRockerPos(this.img_run_qiu,this.img_run_bg,this.halfOfRunBall,this.halfOfRunRockerBg)))};c.prototype.checkClickQiu=function(a){return a.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)};c.prototype.inWalkClickArea=function(){return this.mouseX<this.img_walk_bg.width&&this.mouseY>this.img_walk_bg.y};c.prototype.initDrag=function(a,b){this.rockerSelected=!0;this.rockerMoveType=a;autohookstate&&Laya.stage.event("stopAutoHookStateByRockerMove");this.setBaseValue(b);this.initMouseEvent()};c.prototype.setBaseValue=function(a){this.rockerQiuOrigin.x=a.x;this.rockerQiuOrigin.y=a.y;this.rockerBgRadius=this.rockerMoveType==ROCKER_WALK?this.halfOfRunRockerBg:this.halfOfWalkRockerBg};c.prototype.initMouseEvent=function(){attackerID=0;use_move_start=!0;Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onDragMove);Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onDragEnd);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onDragEnd);Laya.timer.frameLoop(1,this,this.keepMove);Laya.timer.loop(200,this,this.showAnim)};c.prototype.setNewRockerPos=function(a,b,c,g){a.x=this.mouseX-c;a.y=this.mouseY-c;b.x=a.x+c-g;b.y=a.y+c-g};c.prototype.showAnim=function(){this.moveShowAnim.visible=!0;this.rockerMoveType==ROCKER_RUN?this.setAnimSkinAndPos(this.isResetAnimPos(),this.img_run_bg,"gameres/ui/double_rockerman_run_"+this.getAnimFrame()+".png"):this.setAnimSkinAndPos(this.isResetAnimPos(),this.img_walk_bg,"gameres/ui/double_rockerman_walk_"+this.getAnimFrame()+".png");this.rockerAnimFrame++};c.prototype.isResetAnimPos=function(){return-1==this.rockerAnimFrame};c.prototype.getAnimFrame=function(){if(6<this.rockerAnimFrame||0>this.rockerAnimFrame)this.rockerAnimFrame=1;return this.rockerAnimFrame};c.prototype.setAnimSkinAndPos=function(a,b,c){this.moveShowAnim.skin=c;a&&(this.moveShowAnim.x=this.getCenterPointXOfBg(b)-this.moveShowAnim.width/2+2,this.moveShowAnim.y=this.getCenterPointYOfBg(b)-this.moveShowAnim.width/2)};c.prototype.getCenterPointXOfBg=function(a){return a.x+(this.rockerMoveType==ROCKER_RUN?this.halfOfRunRockerBg:this.halfOfWalkRockerBg)};c.prototype.getCenterPointYOfBg=function(a){return a.y+(this.rockerMoveType==ROCKER_RUN?this.halfOfRunRockerBg:this.halfOfWalkRockerBg)};c.prototype.onDragMove=function(a){if(a.touchId==this.curTouchid){rockerfirst=!0;var b,c,g,f;this.rockerMoveType==ROCKER_WALK?(a=this.img_walk_qiu,g=this.img_walk_bg,f=this.halfOfWalkBall,b=this.halfOfWalkRockerBg):(a=this.img_run_qiu,g=this.img_run_bg,f=this.halfOfRunBall,b=this.halfOfRunRockerBg);c=this.getMoveRadian(b,g);b=this.getMoveDistanceOfBall(g);this.moveBall(a,c,g,f,b);20<b&&(this.isMoving=!0,this.dirNum=GameUtil.getMoveDirNumberByAngle(GameUtil.getAngleByRadian(c)),this.showDirSelectEffct(),rocker_move_dir=this.dirNum);this.keepMove()}};c.prototype.getMoveRadian=function(a,b){return Math.atan2(this.mouseY-this.getCenterPointYOfBg(b),this.mouseX-this.getCenterPointXOfBg(b))};c.prototype.getMoveDistanceOfBall=function(a){this.centerPointOfRockerBg.x=this.getCenterPointXOfBg(a);this.centerPointOfRockerBg.y=this.getCenterPointYOfBg(a);return this.centerPointOfRockerBg.distance(this.mouseX,this.mouseY)};c.prototype.moveBall=function(a,b,c,g,f){f<this.rockerBgRadius?(a.x=this.mouseX-g,a.y=this.mouseY-g):(a.x=c.x+Math.cos(b)*this.rockerBgRadius+g+8,a.y=c.y+Math.sin(b)*this.rockerBgRadius+g+8)};c.prototype.showDirSelectEffct=function(){this.rockerMoveType==ROCKER_WALK?this.img_walk_dir.skin="gameres/png/double_rocker_hu_walk_"+this.dirNum+".png":this.img_run_dir.skin="gameres/png/double_rocker_hu_run_"+this.dirNum+".png"};c.prototype.onDragEnd=function(a){g_rocker_moving=rockerfirst=use_move_start=this.rockerSelected=!1;a&&(!(a.touches&&1<=a.touches.length)&&Objectcontrol.self_obj||this.isSpecialChannelOnIOS(a))&&this.dragEndHandle()};c.prototype.isSpecialChannelOnIOS=function(a){return Laya.Browser.onIOS&&a.touches&&1<=a.touches.length};c.prototype.dragEndHandle=function(){rocker_move_dir=-1;this.initDefaultValue();Laya.stage.event("RockerMoveEnd");this.checkHideRockerBg();this.recoverRockerOriginPos();Laya.timer.clear(this,this.showAnim);Laya.timer.clear(this,this.keepMove);Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onDragMove);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onDragEnd);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onDragEnd)};c.prototype.checkHideRockerBg=function(){rockerposview||(this.img_run_bg.visible=!1,this.img_walk_bg.visible=!1)};c.prototype.recoverRockerOriginPos=function(){this.rockerMoveType==ROCKER_WALK?(this.img_walk_qiu.pos(this.rockerQiuOrigin.x,this.rockerQiuOrigin.y),this.img_walk_bg.pos(this.rockerQiuOrigin.x+this.halfOfWalkBall-this.halfOfWalkRockerBg,this.rockerQiuOrigin.y+this.halfOfWalkBall-this.halfOfWalkRockerBg)):(this.img_run_qiu.pos(this.rockerQiuOrigin.x,this.rockerQiuOrigin.y),this.img_run_bg.pos(this.rockerQiuOrigin.x+this.halfOfRunBall-this.halfOfRunRockerBg,this.rockerQiuOrigin.y+this.halfOfRunBall-this.halfOfRunRockerBg))};return c}(DoubleRockerUI),DrugSetup=function(b){function c(){c.__super.call(this);this.init()}Laya["class"](c,"DrugSetup",DrugSetupUI);c.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Drug_bg.ItemsList=[];this.Drug_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.StartPos=new Laya.Point(0,0);this.but_rest.on(Laya.Event.CLICK,this,this.onRest);for(var a=0;6>a;a++){var b=new Laya.Button;b.width=49;b.height=49;switch(a){case 0:b.pos(50,1);b.nTag=a;this.Drug_but.addChild(b);break;case 1:b.pos(151,1);b.nTag=a;this.Drug_but.addChild(b);break;case 2:b.pos(201,89);b.nTag=a;this.Drug_but.addChild(b);break;case 3:b.pos(151,175);b.nTag=a;this.Drug_but.addChild(b);break;case 4:b.pos(50,175);b.nTag=a;this.Drug_but.addChild(b);break;case 5:b.pos(1,89),b.nTag=a,this.Drug_but.addChild(b)}b.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Drug_bg.ItemsList.push(b)}Laya.stage.on("Drug_Item_ico",this,this.dShowItems);Laya.stage.on("Drug_Set_Items",this,this.SetNoItems);this.dShowItems()};c.prototype.onRest=function(){for(var a=0;a<this.Drug_bg.ItemsList.length;a++)this.Drug_bg.ItemsList[a].removeChildren();for(a=0;6>a;a++)g_DrugItemsList[a]=null;Laya.stage.event("ShowDrug_Items");Laya.LocalStorage.removeItem("druglist")};c.prototype.dShowItems=function(){for(var a=0;a<this.Drug_bg.ItemsList.length;a++){var b=this.Drug_bg.ItemsList[a],c=b.nTag;if(c<g_DrugItemsList.length&&null!=g_DrugItemsList[c]){var g=new Laya.Image;g.skin=GameUtil.ParseNameFormat(g_DrugItemsList[c].s.Looks);g.pos(24.5-g.width/2,24.5-g.height/2);b.addChild(g)}}};c.prototype.SetNoItems=function(a){for(var b=0;b<this.Drug_bg.ItemsList.length;b++){var c=this.Drug_bg.ItemsList[b],g=c.nTag;if(g<g_DrugItemsList.length&&g==a&&null!=g_DrugItemsList[g]){c.removeChildren();a=new Laya.Image;a.skin=GameUtil.ParseNameFormat(g_DrugItemsList[g].s.Looks);a.pos(24.5-a.width/2,24.5-a.height/2);c.addChild(a);break}}};c.prototype.onItem_Down=function(a){g_DrugButNumber=a.target.nTag;if(-1!=g_DrugButNumber&&null!=g_WaitItems.Items){if(g_BagItemsList[g_nBagIdx])for(a=0;a<g_DrugItemsList.length;a++)if(null!=g_DrugItemsList[a]&&g_BagItemsList[g_nBagIdx].MakeIndex==g_DrugItemsList[a].MakeIndex)return;for(a=0;a<g_DrugItemsList.length;++a)g_DrugItemsList[a]&&g_DrugItemsList[a].s.Name==g_WaitItems.Items.s.Name&&(g_DrugItemsList[a]=null);g_DrugItemsList[g_DrugButNumber]=g_WaitItems.Items;g_WaitItems.Items=null;Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("ShowDrug_Items");Laya.stage.event("Drug_Item_ico");Laya.stage.event("Drug_Set_Items",[g_DrugButNumber]);GameApi.ShowScreen(!1);var b=[];for(a=0;a<g_DrugItemsList.length;++a){var c=g_DrugItemsList[a];null!=c?b.push({looks:c.s.Looks,mode:c.s.StdMode}):b.push({looks:null,mode:null})}a=JSON.stringify(b);Laya.LocalStorage.setItem("druglist",a)}this.close()};c.prototype.onMouseDown=function(a){this.Drug_but.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.StartPos.x=a.stageX,this.StartPos.y=a.stageY,this.Drug_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Drug_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Drug_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.Drug_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.Drug_but.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.Drug_bg.x+=a.stageX-this.StartPos.x,this.Drug_bg.y+=a.stageY-this.StartPos.y,this.StartPos.x=a.stageX,this.StartPos.y=a.stageY)};c.prototype.close=function(){Laya.stage.off("Drug_Item_ico",this,this.dShowItems);Laya.stage.off("Drug_Set_Items",this,this.SetNoItems);this.removeSelf()};return c}(DrugSetupUI),HeroWin=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(300,70);this.settxt=function(a,b){this.removeChildren();var c=new Laya.Image;c.skin="gameres/png/role_editor_skill_item_bg.png";c.size(299,67);this.addChild(c);f==b&&(c.skin="gameres/png/role_editor_skill_item_bg2.png");var d=new Laya.Text;d.color="#d8b34e";d.fontSize=20;d.text=0==a.Key?a.Def.sMagicName+"[\u5df2\u5173\u95ed]":a.Def.sMagicName;d.pos(72,10);c.addChild(d);var e=new Laya.Image,h=a.Def.btEffect;38==a.Def.wMagicId&&(h=4);46==a.Def.wMagicId&&(h=42);39==a.Def.wMagicId&&(h=0);var l="magicon"+GameUtil.getFile(2*h);GameUtil.loadImg(2*h,l,function(a){e.skin=a});e.size(48,48);e.pos(10,10);c.addChild(e);e.on(Laya.Event.CLICK,this,function(a,b,f){Sendmessage.sendHeroMagicKeyChange(a.Def.wMagicId);f.text=112==a.Key?a.Def.sMagicName+"[\u5df2\u5173\u95ed]":a.Def.sMagicName;112==a.Key?g_HeroMagicList[b].Key=0:g_HeroMagicList[b].Key=112},[a,b,d]);d=new Laya.Text;d.color="#1acb02";d.fontSize=20;d.text=a.Level+"\u7ea7";d.pos(72,39);c.addChild(d);d=new Laya.Text;d.color="#ffffff";d.fontSize=20;d.text=3<=a.Level?"\u7ecf\u9a8c\uff1a -":"\u7ecf\u9a8c\uff1a "+a.CurTrain+" / "+a.Def.MaxTrain[a.Level];d.pos(128,39);c.addChild(d);10<=a.Key&&(d=new Laya.Text,d.color="#ffffff",d.fontSize=14,d.text="NO."+(a.Key-48),d.pos(5,30),e.addChild(d))}}function d(){d.__super.call(this);this.size(350,54);this.settxt=function(a,b){this.removeChildren();if(a&&0<a.MakeIndex){var f=new Laya.Image;f.skin="gameres/png/title_item.png";h==b&&(f.skin="gameres/png/title_item_s.png");this.addChild(f);var c=new Laya.Text;c.color="#ffffff";c.fontSize=12;c.text=a.s.Name;c.pos(46,12);f.addChild(c);GameUtil.loadImg(a.s.Looks,"items",function(a){Laya.loader.getRes(a)&&(d.skin=a,d.pos(24.5-d.width/2,24.5-d.height/2))});var d=new Laya.Image;f.addChild(d)}}}var e=new Laya.Point(0,0),g=1,f=-1,h=-1,l=null;Laya["class"](c,"HeroWin",HeroWinUI);Laya["class"](a,"HeroSkillRender",Laya.Box);Laya["class"](d,"HeroIcon_Render",Laya.Box);b=c.prototype;b.GetTakePos=function(a){for(var b=this.Kuang_bg_1._childs.length,f=0;f<b;f++)for(var c=this.Kuang_bg_1._childs[f],d=0;d<c._childs.length;d++){var e=c._childs[d];if(a==e.nTag)break}return e};b.ShowItemico=function(a){for(var b=this.Kuang_bg_1._childs.length,f=0;f<b;f++){var c=this.Kuang_bg_1._childs[f];if(c instanceof Laya.Image)for(var d=0;d<c._childs.length;d++){var e=c._childs[d],h=e.nTag;if((a==h||-1==a)&&40>h&&(e.removeChildren(),13==h&&(this.GetTakePos(h).removeChildren(),Laya.stage.event("Show_HeroItem_ico",4)),null!=g_HeroItemList[h])){var l=new Laya.Image,g=g_HeroItemList[h].s.Looks;if(h==U_WEAPON||h==U_DRESS||h==U_HELMET||h==U_SHIELD||h==U_HAT){if(h==U_HELMET)null!=g_HeroItemList[U_HAT]&&0!=g_HeroItemList[U_HAT].s.AniCount&&(g=g_HeroItemList[U_HAT].s.Looks,h=U_HAT),this.LoadImageEx(g,l,!0,h,"stateitem");else if(h==U_HAT&&0!=g_HeroItemList[U_HAT].s.AniCount){this.Item_4.removeChildren();this.LoadImageEx(g,l,!0,h,"stateitem");var e=this.Item_4,u=new Laya.Image;this.LoadImageEx(g,u,!1,h,"stateitem");this.Item_13.addChild(u)}else this.LoadImageEx(g,l,!0,h,"stateitem");GameUtil.ShowItemeffectEx(this,e,g_HeroItemList[h],!0,h)}else this.LoadImageEx(g,l,!1,h,"stateitem"),GameUtil.ShowItemeffectEx(this,e,g_HeroItemList[h]);e.addChild(l)}}}for(f=a=0;f<g_HeroItemList.length;f++)null!=g_HeroItemList[f]&&(a+=GameApi.GetItemScore(g_HeroItemList[f]));this.itemScorse.text="\u88c5\u5907\u8bc4\u5206\uff1a"+a};b.LoadImageEx=function(a,b,f,c,d){var e=this;GameUtil.loadImg(a,d,function(a,d){if(f&&""!=a&&d){var h=Offsetmodule.getoffsetfromatlas(d.atlas,d.img);b.skin=a;e.img_Hair.y=1==g_GameType?68:39;c==U_WEAPON?1==g_GameType?b.pos(-17+h.x,48+h.y):b.pos(-10+h.x,64+h.y):c==U_DRESS?1==g_GameType?b.pos(-70+h.x,-26+h.y):b.pos(-67+h.x,-18+h.y):c==U_HELMET?1==g_GameType?b.pos(-69+h.x,14+h.y):b.pos(-69+h.x,16+h.y):c==U_SHIELD?b.pos(-50+h.x,-24+h.y):c==U_HAT&&b.pos(-69+h.x,20+h.y);c==U_FASHIONDRESS?1==g_GameType?b.pos(-67+h.x,-27+h.y):b.pos(-67+h.x,-18+h.y):c==U_FASHIONWEAPON&&1==g_GameType&&b.pos(-20+h.x,25+h.y)}else b.skin=a,b.pos(24.5-b.width/2,24.5-b.height/2)});this.ShowHeadItems()};b.onItem_Down=function(a){var b=a.target.nTag;g_SelectIndex=b;b==U_ICON?null!=g_HeroItemList[U_ICON]&&(g_SelectIndex=GameUtil.GetItemType(g_HeroItemList[U_ICON].s),g_OpenIdx=17,g_MoveItems.Index=U_ICON,g_MoveItems.Items=g_UserItemList[U_ICON],GameUtil.NewShowItemsInf(g_MoveItems.Items)):40==g_SelectIndex?GameApi.ShowShouShi(g_HeroItemList):(30==a.target.name&&GameApi.ShoushiBox(g_HeroItemList),null!=g_HeroItemList[b]?(g_OpenIdx=15,g_MoveItems.Index=b,g_MoveItems.Items=g_HeroItemList[b],GameUtil.NewShowItemsInf(g_MoveItems.Items)):GameApi.ShowScreen(!0,b,7))};b.onItem_Up=function(a){};b.onItem_Move=function(a){};b.init=function(){g_OpenHeroState=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boOpenShowItemScore&&(this.itemScorse.visible=!0);this.Hero_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.but_tab1.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab2.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab3.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab4.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab5.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab6.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab1.selected=!0;this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.nTag=0;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.nTag=1;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.nTag=2;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.nTag=3;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.nTag=4;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.nTag=5;this.Item_6.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_6.nTag=6;this.Item_7.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_7.nTag=7;this.Item_8.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_8.nTag=8;this.Item_9.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_9.nTag=9;this.Item_10.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_10.nTag=10;this.Item_11.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_11.nTag=11;this.Item_12.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_12.nTag=12;this.Item_13.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_13.nTag=13;this.Item_14.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_14.nTag=14;this.Item_15.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_15.nTag=15;this.Item_16.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_16.nTag=16;this.fashion_body.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.fashion_body.nTag=18;this.fashion_weapon.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.fashion_weapon.nTag=19;this.Item_20.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_20.nTag=20;this.Item_21.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_21.nTag=21;this.Item_22.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_22.nTag=22;this.Item_23.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_23.nTag=23;this.Item_24.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_24.nTag=24;this.Item_25.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_25.nTag=25;this.Item_26.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_26.nTag=26;this.Item_27.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_27.nTag=27;this.Item_28.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_28.nTag=28;this.Item_29.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_29.nTag=29;this.check_fashion.on(Laya.Event.CLICK,this,this.changefashion);this.check_fashion.selected=g_Show_Hero_Fashion;this.Skill_List.repeatX=1;this.Skill_List.repeatY=9;this.Skill_List.vScrollBarSkin="gameres/ui/vscroll.png";this.Skill_List.itemRender=a;this.Skill_List.selectEnable=!0;this.Skill_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.Skill_List.array=g_HeroMagicList;this.State_List=[];this.State_List.repeatX=2;this.State_List.repeatY=15;this.State_List.vScrollBarSkin="";Laya.stage.on("Show_HeroItem_ico",this,this.ShowItemico);Laya.stage.on("HeroMagic_Refresh",this,this.HeroMagic_Refresh);Laya.stage.on("State_skill",this,this.onState_skill);Laya.stage.on("updateHero",this,this.updateHero);Laya.stage.on("updateHeroNewDress",this,this.updateHeroNewDress);f=-1;this.ShowHeadItems();this.updateHero()};b.updateHeroIcon=function(a,b){this.HeroIcon_List.refresh()};b.HeroIconUpdateItem=function(a,b){a.settxt(a.dataSource,b)};b.HeroIconSelect=function(a){h=a;a<g_IconCList.length&&null!=g_IconCList[a]&&(l=g_IconCList[a],g_SelectIndex=GameUtil.GetItemType(l.s),g_OpenIdx=16,g_MoveItems.Index=a,g_MoveItems.Items=l,GameUtil.NewShowItemsInf(g_MoveItems.Items));this.HeroIcon_List._selectedIndex=-1};b.changefashion=function(a){Sendmessage.showfashion(2)};b.ShowHeadItems=function(){if(g_myHero){this.Hero_ico.skin="gameres/png/00377-1.png";this.fashion_hum.skin="gameres/png/00377-2.png";0==g_myHero.skin_feature.btGender&&(this.Hero_ico.skin="gameres/png/00376-1.png",this.fashion_hum.skin="gameres/png/00376-2.png");var a=new Laya.Label;a.color="#eee9e9";a.fontSize=20;a.text=g_myHero.m_Abil.name;a.centerX=0;a.y=32;this.Hero_bg.addChild(a);a=1==g_myHero.skin_feature.btGender?443:442;this.img_Hair.y=1==g_GameType?68:39;this.img_Hair.removeChildren();var b=this;GameUtil.loadImg(a,"prguse",function(a,f){if(""!=a&&f){Offsetmodule.getoffsetfromatlas(f.atlas,f.img);var c=new Laya.Image;c.skin=a;c.pos(-82+f.x,8+f.y);b.img_Hair.addChild(c)}})}};b.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};b.Skillselect=function(a){a<g_HeroMagicList.length&&null!=g_HeroMagicList[a]&&(g_MoveSkill=g_HeroMagicList[a]);this.Skill_List._selectedIndex=-1;GameUtil.NewShowMagicInf()};b.HeroMagic_Refresh=function(){this.Skill_List.refresh()};b.ontab1_Click=function(a){g=a.target.name;this.but_tab1.selected=!1;this.but_tab2.selected=!1;this.but_tab3.selected=!1;this.but_tab4.selected=!1;this.but_tab5.selected=!1;this.but_tab6.selected=!1;a.target.selected=!0;switch(parseInt(g)){case 1:this.state_bg.visible=!1;this.Kuang_bg_1.visible=!0;this.state_alb.visible=!1;this.state_skill.visible=!1;this.fashion_bg.visible=!1;this.title_bg.visible=!1;break;case 2:this.updateHero();this.Kuang_bg_1.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!1;this.state_bg.visible=!0;this.fashion_bg.visible=!1;this.title_bg.visible=!1;this.stateData.vScrollBarSkin="";break;case 3:this.updateHero();this.Kuang_bg_1.visible=!1;this.state_bg.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!0;this.fashion_bg.visible=!1;this.title_bg.visible=!1;this.AttributeData.vScrollBarSkin="";break;case 4:this.onState_skill();break;case 5:this.Kuang_bg_1.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!1;this.state_bg.visible=!1;this.fashion_bg.visible=!0;this.title_bg.visible=!1;this.stateData.vScrollBarSkin="";this.updateHeroNewDress();break;case 6:this.Kuang_bg_1.visible=!1,this.state_skill.visible=!1,this.state_alb.visible=!1,this.state_bg.visible=!1,this.fashion_bg.visible=!1,this.title_bg.visible=!0,this.title_bg.pos(36,70)}};b.updateHeroNewDress=function(){this.fashion_hum.visible=!0;for(var a=this.fashion_bg._childs.length,b=0;b<a;b++){var f=this.fashion_bg._childs[b];if(f instanceof Laya.Image)for(var c=0;c<f._childs.length;c++){var d=f._childs[c],e=d.nTag;d.removeChildren();if(e==U_FASHIONDRESS||e==U_FASHIONWEAPON||e==U_FASHIONHELMET){if(null!=g_HeroItemList[e]){var h=g_HeroItemList[e].s.Looks,l=new Laya.Image;d.addChild(l);this.LoadImageEx(h,l,!0,e,"stateitem");GameUtil.ShowItemeffectEx(this,d,g_HeroItemList[e],!0,e)}}else null!=g_HeroItemList[e]&&(h=g_HeroItemList[e].s.Looks,l=new Laya.Image,d.addChild(l),this.LoadImageEx(h,l,!1,e,"stateitem"),GameUtil.ShowItemeffectEx(this,d,g_HeroItemList[e]))}}};b.updateHero=function(){this.AttributeData.removeChildren();this.stateData.removeChildren();if(g_myHero&&THumFeature(g_myHero.data.fea.buffer))var a=THumFeature(g_myHero.data.fea.buffer).btJob;if(g_myHero&&g_myHero.m_Abil){for(var b=g_myHero.m_Abil,f="\u804c   \u4e1a\uff1a    ;\u7b49   \u7ea7\uff1a    ;\u5f53\u524d\u7ecf\u9a8c\uff1a;\u5347\u7ea7\u7ecf\u9a8c\uff1a;\u751f\u547d\u503c\uff1a    ;\u9b54\u6cd5\u503c\uff1a    ;\u836f\u529b\u503c\uff1a    ;\u9152\u91cf\u503c\uff1a    ;\u9152\u91cf\u8fdb\u5ea6\uff1a".split(";"),c=0;c<f.length;c++){var d=new Laya.Text;switch(c){case 0:d.text=f[0]+"         "+GameUtil.getJobName(a);break;case 1:d.text=f[1]+"         "+b.Level;break;case 2:d.text=f[2]+"         "+b.Exp;break;case 3:d.text=f[3]+"         "+b.MaxExp;break;case 4:d.text=f[4]+"         "+b.HP+" / "+b.MaxHP;break;case 5:d.text=f[5]+"         "+b.MP+" / "+b.MaxMP;break;case 6:d.text=f[6]+"         0";break;case 7:d.text=f[7]+"         0";break;case 8:d.text=f[8]+"         0"}this.stateData.addChild(d);d.fontSize=18;d.color="#ffffff";d.pos(5,20*c+8)}a="\u9632   \u5fa1\uff1a    ;\u9b54   \u5fa1\uff1a    ;\u653b   \u51fb\uff1a    ;\u9b54   \u6cd5\uff1a    ;\u9053   \u672f\uff1a    ;\u80cc\u5305\u91cd\u91cf\uff1a;\u7a7f\u6234\u91cd\u91cf\uff1a;\u8155   \u529b\uff1a    ;\u9b54\u6cd5\u8eb2\u907f\uff1a;\u6bd2\u7269\u8eb2\u907f\uff1a;\u4f53\u529b\u6062\u590d\uff1a;\u9b54\u6cd5\u6062\u590d\uff1a;\u653b\u51fb\u901f\u5ea6\uff1a;\u7cbe\u786e\u5ea6\uff1a    ;\u654f\u6377\u5ea6\uff1a    ;\u4e2d\u6bd2\u56de\u590d\uff1a".split(";");for(c=0;c<a.length;c++){d=new Laya.Text;switch(c){case 0:d.text=a[0]+"         "+b.AC+" - "+b.MaxAC;break;case 1:d.text=a[1]+"         "+b.MAC+" - "+b.MaxMAC;break;case 2:d.text=a[2]+"         "+b.DC+" - "+b.MaxDC;break;case 3:d.text=a[3]+"         "+b.MC+" - "+b.MaxMC;break;case 4:d.text=a[4]+"         "+b.SC+" - "+b.MaxSC;break;case 5:d.text=a[5]+"         "+b.Weight+" / "+b.MaxWeight;break;case 6:d.text=a[6]+"         "+b.WearWeight+" / "+b.MaxWearWeight;break;case 7:d.text=a[7]+"         "+b.HandWeight+" / "+b.MaxHandWeight;break;case 8:d.text=a[8]+"         "+10*g_nHeroAntiMagic+"%";break;case 9:d.text=a[9]+"         "+10*g_nHeroAntiPoison+"%";break;case 10:d.text=a[10]+"         "+10*g_nHeroHealthRecover+"%";break;case 11:d.text=a[11]+"         "+10*g_nHeroSpellRecover+"%";break;case 12:d.text=a[12]+"         ";break;case 13:d.text=a[13]+"         "+g_nHeroHitPoint;break;case 14:d.text=a[14]+"         "+g_nHeroSpeedPoint;break;case 15:d.text=a[15]+"         "+10*g_nHeroPoisonRecover;break;case 16:d.text=a[16]+"         ";break;case 17:d.text=a[17]+"         ";break;case 18:d.text=a[18]+"         ";break;case 19:d.text=a[19]+"         ";break;case 20:d.text=a[20]+"         ";break;case 21:d.text=a[21]+"         ";break;case 22:d.text=a[22]+"         ";break;case 23:d.text=a[23]+"         ";break;case 24:d.text=a[24]+"         ";break;case 25:d.text=a[25]+"         ";break;case 26:d.text=a[26]+"         "}this.AttributeData.addChild(d);d.fontSize=18;d.color="#ffffff";d.pos(5,20*c)}}};b.onState_skill=function(){f=-1;this.Skill_List.vScrollBarSkin="";this.Skill_List.refresh();this.but_tab1.selected=!1;this.but_tab2.selected=!1;this.but_tab3.selected=!1;this.but_tab4.selected=!1;this.but_tab5.selected=!1;this.but_tab6.selected=!1;this.Kuang_bg_1.visible=!1;this.state_bg.visible=!1;this.state_alb.visible=!1;this.state_skill.visible=!0;this.but_tab4.selected=!0;this.fashion_bg.visible=!1;this.title_bg.visible=!1};b.onMouseDown=function(a){e.x=a.stageX;e.y=a.stageY;this.Skill_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.stateData.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.AttributeData.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.Hero_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Hero_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Hero_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};b.onMouseUp=function(){this.Hero_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(a){this.Hero_bg.x+=a.stageX-e.x;this.Hero_bg.y+=a.stageY-e.y;e.x=a.stageX;e.y=a.stageY};b.close=function(){Laya.stage.off("Show_HeroItem_ico",this,this.ShowItemico);Laya.stage.off("HeroMagic_Refresh",this,this.HeroMagic_Refresh);Laya.stage.off("State_skill",this,this.onState_skill);Laya.stage.off("updateHero",this,this.updateHero);Laya.stage.off("updateHeroNewDress",this,this.updateHeroNewDress);g_OpenHeroState=!1;this.removeSelf()};return c}(HeroWinUI),HumWin=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(300,70);this.settxt=function(a,b){this.removeChildren();var c=new Laya.Image;c.skin="gameres/png/role_editor_skill_item_bg.png";c.size(299,67);this.addChild(c);f==b&&(c.skin="gameres/png/role_editor_skill_item_bg2.png");var d=new Laya.Image,e="";if(1E3<=a.Def.wMagicId&&1500>=a.Def.wMagicId){var h=Skillmodule.findCustomSkill(a.Def.wMagicId,a.Level);if(h)var l=g_pak_list[h.iconFileIndex],e=h.wIconImageIndex}else e=a.Def.btEffect,38==a.Def.wMagicId&&(e=4),46==a.Def.wMagicId&&(e=42),39==a.Def.wMagicId&&(e=0),l="magicon"+GameUtil.getFile(2*e),e*=2;GameUtil.loadImg(e,l,function(a){d.skin=a});d.size(48,48);d.pos(10,10);c.addChild(d);l=new Laya.Text;l.fontSize=20;l.color="#d8b34e";l.text=a.Def.sMagicName+" "+GameApi.GetNewMagicLevelString(a.btStrengLevel);l.pos(72,10);c.addChild(l);l=new Laya.Text;l.color="#1acb02";l.fontSize=20;l.text=a.Level+"\u7ea7";l.pos(72,39);c.addChild(l);l=new Laya.Text;l.color="#ffffff";l.fontSize=20;l.text=3<=a.Level?"\u7ecf\u9a8c\uff1a -":"\u7ecf\u9a8c\uff1a "+a.CurTrain+" / "+a.Def.MaxTrain[a.Level];l.pos(128,39);c.addChild(l);10<=a.Key&&(l=new Laya.Text,l.color="#ffffff",l.fontSize=14,l.text="NO."+(a.Key-48),l.pos(5,30),d.addChild(l))}}function d(){d.__super.call(this);this.size(350,54);this.settxt=function(a,b){this.removeChildren();if(a&&0<a.MakeIndex){var f=new Laya.Image;f.skin="gameres/png/title_item.png";h==b&&(f.skin="gameres/png/title_item_s.png");this.addChild(f);var c=new Laya.Text;c.color="#ffffff";c.fontSize=20;c.text=a.s.Name;c.pos(46,12);f.addChild(c);var c=0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items",d=new Laya.Image;f.addChild(d);GameUtil.loadImg(a.s.Looks+1,c,function(a,b){""!=a&&b&&(Offsetmodule.getoffsetfromatlas(b.atlas,b.img),d.skin=a,d.pos(24.5-d.width/2,24.5-d.height/2))})}}}var e=new Laya.Point(0,0),g=1,f=-1,h=-1,l=null;Laya["class"](c,"HumWin",HumWinUI);Laya["class"](a,"SkillRender",Laya.Box);Laya["class"](d,"HumIcon_Render",Laya.Box);c.prototype.ShowItemico=function(a){if(this.but_tab6.selected){if(this.IconShow.removeChildren(),g_UserItemList[U_ICON]){if(0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length)var b=g_pak_list[g_ClientConfig.nShowUserIcon];var f=this;GameUtil.loadImg(g_UserItemList[U_ICON].s.Looks+3,b,function(a){var b=new Laya.Image;b.skin=a;b.pos(24.5-b.width/2,24.5-b.height/2);f.IconShow.addChild(b)})}}else{null!=ItemHeard&&ItemHeard?this.Item_4.visible=!1:(this.Item_head.visible=!1,this.img_head.visible=!1);if(null!=g_UserItemList[U_HELMET]){this.Item_head.removeChildren();var b=g_UserItemList[U_HELMET].s.Looks,c=new Laya.Image;this.LoadImageEx(b,c,!1,U_HELMET,"stateitem");this.Item_head.addChild(c);GameUtil.ShowItemeffectEx(this,c,g_UserItemList[U_HELMET])}null==g_UserItemList[U_HELMET]&&this.Item_head.removeChildren();c=this.Kuang_bg_1._childs.length;for(b=0;b<c;b++){var d=this.Kuang_bg_1._childs[b];if(d instanceof Laya.Image)for(var e=0;e<d._childs.length;e++){var h=d._childs[e];if(h){var l=h.nTag;if("number"===typeof l&&(a==l||-1==a)&&40>l&&(h.removeChildren(),null!=g_UserItemList[l])){var g=new Laya.Image,u=g_UserItemList[l].s.Looks;if(l==U_WEAPON||l==U_DRESS||l==U_HELMET||l==U_HAT){if(l==U_HELMET)this.LoadImageEx(u,g,!0,l,"stateitem");else if(l==U_HAT&&0!=g_UserItemList[U_HAT].s.AniCount){var h=this.Item_13,B=new Laya.Image;this.LoadImageEx(u,B,!1,l,"stateitem");this.Item_13.addChild(B)}else this.LoadImageEx(u,g,!0,l,"stateitem");g_UserItemList[l].tag=l;GameUtil.ShowItemeffectEx(this,h,g_UserItemList[l],!0,l)}else l==U_SHIELD?(this.LoadImageEx(u,g,!0,l,"stateitem"),GameUtil.ShowItemeffectEx(this,h,g_UserItemList[l],!0,l)):(this.LoadImageEx(u,g,!1,l,"stateitem"),GameUtil.ShowItemeffectEx(this,h,g_UserItemList[l]));h.addChild(g)}}}}for(b=a=0;b<g_UserItemList.length;b++)null!=g_UserItemList[b]&&(a+=GameApi.GetItemScore(g_UserItemList[b]));this.itemScorse.text="\u88c5\u5907\u8bc4\u5206\uff1a"+a}};c.prototype.LoadImageEx=function(a,b,f,c,d){var e=this;GameUtil.loadImg(a,d,function(a,d){if(f){var h=Offsetmodule.getoffsetfromatlas(d.atlas,d.img);b.skin=a;e.img_Hair.y=1==g_GameType?35:39;switch(c){case U_WEAPON:1==g_GameType?b.pos(-25+h.x,40+h.y):b.pos(-20+h.x,52+h.y);break;case U_DRESS:1==g_GameType?b.pos(-75+h.x,-28+h.y):b.pos(-73+h.x,-18+h.y);break;case U_HELMET:1==g_GameType?b.pos(-69+h.x,14+h.y):b.pos(-69+h.x,18+h.y);break;case U_SHIELD:b.pos(-50+h.x,-24+h.y);break;case U_HAT:b.pos(-69+h.x,20+h.y);break;case U_FASHIONDRESS:1==g_GameType?b.pos(-67+h.x,-27+h.y):b.pos(-64+h.x,-18+h.y);break;case U_FASHIONWEAPON:1==g_GameType?b.pos(-27+h.x,40+h.y):b.pos(-20+h.x,52+h.y);break;case U_FASHIONHELMET:b.pos(-74.5+h.x,28+h.y)}}else b.skin=a,b.pos(24.5-b.width/2,24.5-b.height/2)});this.ShowHeadItems()};c.prototype.onItem_Down=function(a){var b=a.target.nTag;"head"==a.target.name&&(b=4);g_SelectIndex=b;b==U_ICON?null!=g_UserItemList[U_ICON]&&(g_SelectIndex=GameUtil.GetItemType(g_UserItemList[U_ICON].s),g_OpenIdx=17,g_MoveItems.Index=U_ICON,g_MoveItems.Items=g_UserItemList[U_ICON],GameUtil.NewShowItemsInf(g_MoveItems.Items)):40==g_SelectIndex?GameApi.ShowShouShi(g_UserItemList):41==g_SelectIndex?Sendmessage.SendGameMainBtnMsg("\u4fee\u70bc\u7cfb\u7edf"):30==a.target.name?sndacasketState.active==g_btSelfSndacasketState?Sendmessage.SendQFCMD("@openSndacasket"):GameApi.ShoushiBox(g_UserItemList):null!=g_UserItemList[b]?(g_OpenIdx=1,g_MoveItems.Index=b,g_MoveItems.Items=g_UserItemList[b],GameUtil.NewShowItemsInf(g_MoveItems.Items)):GameApi.ShowScreen(!0,b,1)};c.prototype.onItem_Up=function(a){};c.prototype.onItem_Move=function(a){};c.prototype.init=function(){this.itemArr=[];this.itemNum=[];this.AttributeArr=[];this.AttributeNum=[];this.setHum();g_OpenState=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boOpenShowItemScore&&(this.itemScorse.visible=!0);this.Hum_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.but_tab1.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab2.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab3.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab4.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab5.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab6.on(Laya.Event.CLICK,this,this.ontab1_Click);this.but_tab1.selected=!0;this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.nTag=0;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.nTag=1;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.nTag=2;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.nTag=3;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.nTag=4;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.nTag=5;this.Item_6.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_6.nTag=6;this.Item_7.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_7.nTag=7;this.Item_8.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_8.nTag=8;this.Item_9.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_9.nTag=9;this.Item_10.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_10.nTag=10;this.Item_11.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_11.nTag=11;this.Item_12.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_12.nTag=12;this.Item_13.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_13.nTag=13;this.Item_14.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_14.nTag=14;this.Item_15.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_15.nTag=15;this.Item_16.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_16.nTag=16;this.Item_40.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_40.nTag=40;this.fashion_body.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.fashion_body.nTag=18;this.fashion_weapon.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.fashion_weapon.nTag=19;this.Item_20.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_20.nTag=20;this.Item_21.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_21.nTag=21;this.Item_22.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_22.nTag=22;this.Item_23.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_23.nTag=23;this.Item_24.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_24.nTag=24;this.Item_25.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_25.nTag=25;this.Item_26.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_26.nTag=26;this.Item_27.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_27.nTag=27;this.Item_28.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_28.nTag=28;this.Item_29.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_29.nTag=29;this.Item_head.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_30.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.check_fashion.on(Laya.Event.CLICK,this,this.changefashion);this.check_fashion.selected=1==g_show_fashion;this.IconShow.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.IconShow.nTag=52;this.Skill_List.repeatX=1;this.Skill_List.repeatY=9;this.Skill_List.vScrollBarSkin="";this.Skill_List.itemRender=a;this.Skill_List.selectEnable=!0;this.Skill_List.selectHandler=new Laya.Handler(this,this.Skillselect);this.Skill_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.Skill_List.array=g_UserMagicList;this.State_List=[];this.State_List.repeatX=2;this.State_List.repeatY=15;this.State_List.vScrollBarSkin="";this.HumIcon_List.repeatX=1;this.HumIcon_List.repeatY=9;this.HumIcon_List.vScrollBarSkin="gameres/ui/vscroll.png";this.HumIcon_List.itemRender=d;this.HumIcon_List.selectEnable=!0;this.HumIcon_List.selectHandler=new Laya.Handler(this,this.HumIconSelect);this.HumIcon_List.renderHandler=new Laya.Handler(this,this.HumIconUpdateItem);this.HumIcon_List.array=g_IconCList;Laya.stage.on("Show_Item_ico",this,this.ShowItemico);Laya.stage.on("Magic_Refresh",this,this.Magic_Refresh);Laya.stage.on("State_skill",this,this.onState_skill);Laya.stage.on("updateHum",this,this.updateHum);Laya.stage.on("UpdateNameColor",this,this.UpdateNameColor);Laya.stage.on("updateHumIcon",this,this.updateHumIcon);Laya.stage.on("updateHumNewDress",this,this.updateHumNewDress);Laya.stage.on("showDuraHum",this,this.showDuraHum);Laya.stage.on("updateNeiGuanHair",this,this.updateNeiGuanHair);Laya.stage.on("update_SelfSndacasketState",this,this.setSndacasketState);this.setSndacasketState();this.Item_40.visible=1==g_btSelfShowGodBless?!0:!1;f=-1;this.changeSize();this.ShowHeadItems();this.updateHum()};c.prototype.setSndacasketState=function(){var a=null,a=null;switch(g_btSelfSndacasketState){case sndacasketState.disabled:this.Item_30.visible=!1;break;case sndacasketState.active:a=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0];a=new Laya.ColorFilter(a);this.Item_30.filters=[a];break;case sndacasketState.show:this.Item_30.filters=null;break;default:this.Item_30.visible=!1}};c.prototype.updateNeiGuanHair=function(a,b){GameUtil.updateNeiGuanHair(this.img_Hair,a,b)};c.prototype.showDuraHum=function(){for(var a=0;a<g_UserItemList.length;a++){var b=g_UserItemList[a];if(b)for(var f=0;f<this.Kuang_bg_1._childs.length;f++){var c=this.Kuang_bg_1._childs[f].getChildByName("Item_"+a);"img_head"==this.Kuang_bg_1._childs[f].name&&a==U_HELMET&&(c=this.Item_head);var d=b.Dura/b.DuraMax;if(c){var e=c.getChildByName("equip"),h=new Laya.Point(c.width-5,c.height-5);.15>d&&!e?(e=Animationmodule.playframe(!0,c,"gameres/animation/equip/",1,8,100,!0,!1,h),e.name="equip"):.15<=d&&e&&Animationmodule.removeAni(e)}}}this.Item_0};c.prototype.changeSize=function(){this.width=Laya.stage.width;this.height=Laya.stage.height};c.prototype.updateHumIcon=function(a,b){this.HumIcon_List.refresh()};c.prototype.HumIconUpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.HumIconSelect=function(a){h=a;a<g_IconCList.length&&null!=g_IconCList[a]&&(l=g_IconCList[a],g_SelectIndex=GameUtil.GetItemType(l.s),g_OpenIdx=16,g_MoveItems.Index=a,g_MoveItems.Items=l,GameUtil.NewShowItemsInf(g_MoveItems.Items));this.HumIcon_List._selectedIndex=-1};c.prototype.changefashion=function(a){Sendmessage.showfashion(1)};c.prototype.ShowHeadItems=function(){var a=ObjectManage.findobject(playerID);if(a&&a.txt_name){this.hum_ico.skin="gameres/png/00377-1.png";this.fashion_hum.skin="gameres/png/00377-2.png";0==a.skin_feature.btGender&&(this.hum_ico.skin="gameres/png/00376-1.png",this.fashion_hum.skin="gameres/png/00376-2.png");var b="";-1!=a.txt_name.text.indexOf("\n")?(b=a.txt_name.text.split("\n"),b=b[b.length-1]):b=a.txt_name.text;this.charName.text=b;b=G_Guild_Name.split("\\");this.guildName.text=b[0];GameUtil.updateNeiGuanHair(this.img_Hair,a.skin_feature.btHair,a.skin_feature.btGender)}};c.prototype.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.UpdateNameColor=function(a){this.charName.color=Get2RGB(a)};c.prototype.Skillselect=function(a){f=a;a<g_UserMagicList.length&&null!=g_UserMagicList[a]&&(g_MoveSkill=g_UserMagicList[a]);this.Skill_List._selectedIndex=-1;g_OpenIdx=11;GameUtil.NewShowMagicInf()};c.prototype.Magic_Refresh=function(){this.Skill_List.refresh()};c.prototype.ontab1_Click=function(a){g=a.target.name;this.but_tab1.selected=!1;this.but_tab2.selected=!1;this.but_tab3.selected=!1;this.but_tab4.selected=!1;this.but_tab5.selected=!1;this.but_tab6.selected=!1;a.target.selected=!0;this.showTab(g)};c.prototype.showTab=function(a){switch(parseInt(a)){case 1:this.state_bg.visible=!1;this.Kuang_bg_1.visible=!0;this.state_alb.visible=!1;this.state_skill.visible=!1;this.fashion_bg.visible=!1;this.state_icon.visible=!1;this.ShowItemico(-1);break;case 2:this.updateHum();this.Kuang_bg_1.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!1;this.state_bg.visible=!0;this.fashion_bg.visible=!1;this.state_icon.visible=!1;this.stateData.vScrollBarSkin="";break;case 3:this.updateHum();this.Kuang_bg_1.visible=!1;this.state_bg.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!0;this.fashion_bg.visible=!1;this.state_icon.visible=!1;this.AttributeData.vScrollBarSkin="";break;case 4:this.onState_skill();break;case 5:this.Kuang_bg_1.visible=!1;this.state_skill.visible=!1;this.state_alb.visible=!1;this.state_bg.visible=!1;this.fashion_bg.visible=!0;this.state_icon.visible=!1;this.stateData.vScrollBarSkin="";this.updateHumNewDress();break;case 6:this.Kuang_bg_1.visible=!1,this.state_skill.visible=!1,this.state_alb.visible=!1,this.state_bg.visible=!1,this.fashion_bg.visible=!1,this.state_icon.visible=!0,this.ShowItemico(-1)}};c.prototype.updateHumNewDress=function(){this.fashion_hum.visible=!0;for(var a=this.fashion_bg._childs.length,b=0;b<a;b++){var f=this.fashion_bg._childs[b];if(f instanceof Laya.Image)for(var c=0;c<f._childs.length;c++){var d=f._childs[c],e=d.nTag;if("number"===typeof e)if(d.removeChildren(),e==U_FASHIONDRESS||e==U_FASHIONWEAPON||e==U_FASHIONHELMET){if(null!=g_UserItemList[e]){var h=g_UserItemList[e].s.Looks,l=new Laya.Image;d.addChild(l);this.LoadImageEx(h,l,!0,e,"stateitem");if(e!=U_FASHIONHELMET){if(GameUtil.ShowItemeffectEx(this,d,g_UserItemList[e],!0,e),e!=U_FASHIONWEAPON)for(e=0;e<d._childs.length;e++);}else GameUtil.ShowItemeffectEx(this,d,g_UserItemList[e],!0,e)}}else null!=g_UserItemList[e]&&(h=g_UserItemList[e].s.Looks,l=new Laya.Image,d.addChild(l),this.LoadImageEx(h,l,!1,e,"stateitem"),GameUtil.ShowItemeffectEx(this,d,g_UserItemList[e]))}}};c.prototype.updateHum=function(){this.getHumAbil();var a=this.stateData._childs[0],b=this.AttributeData._childs[0];if(a)for(var f=0;f<this.itemNum.length;f++)if(this.itemNum[f]){var c=a._childs[f];if(c)var d=c.getChildByName("txt2");d&&(d.text=this.itemNum[f])}if(b)for(f=0;f<this.AttributeNum.length;f++)if(this.AttributeNum[f]){if(a=b._childs[f])var e=a.getChildByName("txt4");e&&(e.text=this.AttributeNum[f])}};c.prototype.getHumAbil=function(){var a=ObjectManage.findobject(playerID);if(a){var b=THumFeature(a.data.fea.buffer);if(b)var f=b.btJob}b=ObjectManage.GetAttr(playerID);a&&b&&b.NewValue&&10<b.NewValue.length&&(this.itemArr=["\u804c       \u4e1a:","\u7b49       \u7ea7:","\u5f53\u524d\u7ecf\u9a8c:","\u5347\u7ea7\u7ecf\u9a8c:","\u751f  \u547d  \u503c:","\u9b54  \u6cd5  \u503c:","\u836f  \u529b  \u503c:","\u9152  \u91cf  \u503c:","\u9152\u91cf\u8fdb\u5ea6:",g_nGameDiamond.key+":",g_nGameGird.key+":",g_GamePointNum.key+":",g_GameGoldNum.key+":",g_gamePopNum.key+":",g_gameGlory.key+":"],this.itemNum=[GameUtil.getJobName(f),b.Level,b.Exp,b.MaxExp,GameUtil.makeBigNum(b.HP)+" / "+GameUtil.makeBigNum(b.MaxHP),GameUtil.makeBigNum(b.MP)+" / "+GameUtil.makeBigNum(b.MaxMP),"0","0","0",g_nGameDiamond.value,g_nGameGird.value,g_GamePointNum.value,g_GameGoldNum.value,b.CreditPoint,g_gameGlory.value],this.AttributeArr="\u9632       \u5fa1:;\u9b54       \u5fa1:;\u653b       \u51fb:;\u9b54       \u6cd5:;\u9053       \u672f:;\u80cc\u5305\u91cd\u91cf:;\u7a7f\u6234\u91cd\u91cf:;\u8155       \u529b:;\u9b54\u6cd5\u8eb2\u907f:;\u6bd2\u7269\u8eb2\u907f:;\u4f53\u529b\u6062\u590d:;\u9b54\u6cd5\u6062\u590d:;\u653b\u51fb\u901f\u5ea6:;\u7cbe  \u786e  \u5ea6:;\u654f  \u6377  \u5ea6:;\u4e2d\u6bd2\u56de\u590d:;\u81f4\u547d\u4e00\u51fb:;\u653b\u51fb\u4f24\u5bb3:;\u7269\u4f24\u51cf\u5c11:;\u9b54\u4f24\u51cf\u5c11:;\u5ffd\u89c6\u9632\u5fa1:;\u4f24\u5bb3\u53cd\u5f39:;\u4f53\u8d28\u589e\u52a0:;\u7ecf\u9a8c\u9644\u52a0:;\u6012\u6c14\u6062\u590d:;\u5408\u51fb\u4f24\u5bb3:;\u76ee\u6807\u66b4\u7387:;\u9b54\u529b\u589e\u52a0:;\u4eba\u7269\u8840\u91cf:;\u4eba\u7269\u9b54\u529b:".split(";"),this.AttributeNum=[b.AC+" - "+b.MaxAC,b.MAC+" - "+b.MaxMAC,b.DC+" - "+b.MaxDC,b.MC+" - "+b.MaxMC,b.SC+" - "+b.MaxSC,b.Weight+" / "+b.MaxWeight,b.WearWeight+" / "+b.MaxWearWeight,b.HandWeight+" / "+b.MaxHandWeight,10*g_nMyAntiMagic+"%",10*g_nMyAntiPoison+"%",10*g_nMyHealthRecover+"%",10*g_nMySpellRecover+"%",rolespeed,g_nMyHitPoint,g_nMySpeedPoint,10*g_nMyPoisonRecover+"%",b.NewValue[0]+"%",b.NewValue[1]+"%",b.NewValue[2]+"%",b.NewValue[3]+"%",b.NewValue[4]+"%",b.NewValue[5]+"%",b.NewValue[6],b.NewValue[7]+"%",b.NewValue[8]+"%",b.NewValue[9]+"%",b.NewValue[10]+"%",b.NewValue[13],b.NewValue[14]+"%",b.NewValue[15]+"%"])};c.prototype.setHum=function(){this.AttributeData.removeChildren();this.stateData.removeChildren();this.getHumAbil();for(var a=0;a<this.itemArr.length;a++){var b=new Laya.Box;b.name="state_box";var f=new Laya.Text;f.text=this.itemArr[a];f.fontSize=20;f.color="#ded1c0";f.align="right";f.valign="middle";f.leading=2;f.size(110,30);b.addChild(f);f.pos(0,0);f=new Laya.Image;f.skin="gameres/png/hum_Attribute.png";f.size(165,30);b.addChild(f);f.x=115;f=new Laya.Text;f.name="txt2";f.text=this.itemNum[a];f.fontSize=20;f.color="#ded1c0";f.align="left";f.valign="middle";f.size(160,30);b.addChild(f);f.pos(120,0);b.y=40*a;this.stateData.addChild(b)}for(a=0;a<this.AttributeArr.length;a++)b=new Laya.Box,b.name="state_box1",f=new Laya.Text,f.text=this.AttributeArr[a],f.fontSize=20,f.color="#ded1c0",f.align="right",f.valign="middle",f.leading=2,f.size(110,30),b.addChild(f),f.pos(0,0),f=new Laya.Image,f.skin="gameres/png/hum_Attribute.png",f.size(165,30),b.addChild(f),f.x=115,f=new Laya.Text,f.name="txt4",f.text=this.AttributeNum[a],f.fontSize=20,f.color="#ded1c0",f.align="left",f.valign="middle",f.size(160,30),b.addChild(f),f.pos(120,0),b.y=40*a,this.AttributeData.addChild(b)};c.prototype.onState_skill=function(){f=-1;this.Skill_List.refresh();this.but_tab1.selected=!1;this.but_tab2.selected=!1;this.but_tab3.selected=!1;this.but_tab4.selected=!1;this.but_tab5.selected=!1;this.Kuang_bg_1.visible=!1;this.state_bg.visible=!1;this.state_alb.visible=!1;this.state_skill.visible=!0;this.but_tab4.selected=!0;this.fashion_bg.visible=!1;this.state_icon.visible=!1};c.prototype.onMouseDown=function(a){e.x=a.stageX;e.y=a.stageY;this.HumIcon_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.Skill_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.stateData.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.AttributeData.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.Hum_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Hum_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Hum_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.Hum_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.Hum_bg.x+=a.stageX-e.x;this.Hum_bg.y+=a.stageY-e.y;e.x=a.stageX;e.y=a.stageY};c.prototype.close=function(){g_OpenState=!1;for(var a=this.Kuang_bg_1._childs.length,b=0;b<a;b++){var f=this.Kuang_bg_1._childs[b];if(f instanceof Laya.Image)for(var c=0;c<f._childs.length;c++){var d=f._childs[c];d._childs[1]&&""!==d._childs[1].name&&Animationmodule.removeAniname(d._childs[1].name)}}a=this.fashion_bg._childs.length;for(b=0;b<a;b++)if(f=this.fashion_bg._childs[b],f instanceof Laya.Image)for(c=0;c<f._childs.length;c++)d=f._childs[c],d._childs[1]&&""!==d._childs[1].name&&Animationmodule.removeAniname(d._childs[1].name);Laya.stage.off("Show_Item_ico",this,this.ShowItemico);Laya.stage.off("Magic_Refresh",this,this.Magic_Refresh);Laya.stage.off("State_skill",this,this.onState_skill);Laya.stage.off("updateHum",this,this.updateHum);Laya.stage.off("UpdateNameColor",this,this.UpdateNameColor);Laya.stage.off("updateHumIcon",this,this.updateHumIcon);Laya.stage.off("updateHumNewDress",this,this.updateHumNewDress);Laya.stage.off("showDuraHum",this,this.showDuraHum);Laya.stage.off("updateNeiGuanHair",this,this.updateNeiGuanHair);this.removeSelf()};return c}(HumWinUI),JiaoYiWin=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(48,48);var b=new Laya.Image;b.width=50;b.height=50;b.skin="gameres/ui/img_bag_bg.png";this.addChild(b);var c=new Laya.Image;b.addChild(c);this.setpos=function(a){c.visible=!0;c.skin=a;c.x=b.width/2-c.width/2;c.y=b.height/2-c.height/2;GameUtil.setTxtFixedPos(c,b.height)};this.settxt=function(a,d){if(10>d&&null!=g_HumJiaoYiList[d]){c.blendMode="overlay";GameUtil.loadImg(g_HumJiaoYiList[d].s.Looks,"items",this.setpos);GameUtil.ShowItemeffect(b,g_HumJiaoYiList[d]);var e=g_HumJiaoYiList[d].s.StdMode;(17==e||18==e||41==e||40==e||42==e||31==e&&-1!=g_HumJiaoYiList[d].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_HumJiaoYiList[d].s.Reserved&&0<g_HumJiaoYiList[d].Dura?(e=b.getChildByName("txt"))?(e.text="x"+(g_HumJiaoYiList[d].Dura+1),e.x=8<g_HumJiaoYiList[d].Dura?24:30):(e=new Laya.Text,e.name="txt",e.color="#ffffff",e.width=40,e.text="x"+(g_HumJiaoYiList[d].Dura+1),GameUtil.setCanAddTxtStroke(e),e.pos(30,30),e.x=8<g_HumJiaoYiList[d].Dura?24:30,b.addChild(e)):0==e&&5==g_HumJiaoYiList[d].s.Source&&0<g_HumJiaoYiList[d].Dura&&((e=b.getChildByName("txt"))?(e.text="x"+g_HumJiaoYiList[d].Dura,e.x=9<g_HumJiaoYiList[d].Dura?24:30):(e=new Laya.Text,e.name="txt",e.color="#ffffff",e.width=40,e.text="x"+g_HumJiaoYiList[d].Dura,GameUtil.setCanAddTxtStroke(e),e.pos(30,30),e.x=9<g_HumJiaoYiList[d].Dura?24:30,b.addChild(e)))}else c.visible=!1,(e=b.getChildByName("effect"))&&e.removeSelf();b.skin="gameres/ui/img_bag_bg.png";g==d&&(b.skin="gameres/ui/img_bag_bg1.png")}}function d(){d.__super.call(this);this.size(48,48);var a=new Laya.Image;a.width=50;a.height=50;a.skin="gameres/ui/img_bag_bg.png";this.addChild(a);var b=new Laya.Image;a.addChild(b);this.setpos=function(c){b.visible=!0;b.skin=c;b.x=a.width/2-b.width/2;b.y=a.height/2-b.height/2;GameUtil.setTxtFixedPos(b,a.height)};this.settxt=function(c,d){if(10>d&&null!=g_MyJiaoYiList[d]){b.blendMode="overlay";GameUtil.loadImg(g_MyJiaoYiList[d].s.Looks,"items",this.setpos);GameUtil.ShowItemeffect(a,g_MyJiaoYiList[d]);var g=g_MyJiaoYiList[d].s.StdMode;(17==g||18==g||41==g||40==g||42==g||31==g&&-1!=g_MyJiaoYiList[d].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MyJiaoYiList[d].s.Reserved&&0<g_MyJiaoYiList[d].Dura?(g=a.getChildByName("txt"))?(g.text="x"+(g_MyJiaoYiList[d].Dura+1),g.x=8<g_MyJiaoYiList[d].Dura?24:30):(g=new Laya.Text,g.name="txt",g.color="#ffffff",g.width=40,g.text="x"+(g_MyJiaoYiList[d].Dura+1),GameUtil.setCanAddTxtStroke(g),g.pos(30,30),g.x=9<g_MyJiaoYiList[d].Dura?24:30,a.addChild(g)):0==g&&5==g_MyJiaoYiList[d].s.Source&&0<g_MyJiaoYiList[d].Dura&&((g=a.getChildByName("txt"))?(g.text="x"+g_MyJiaoYiList[d].Dura,g.x=9<g_MyJiaoYiList[d].Dura?24:30):(g=new Laya.Text,g.name="txt",g.color="#ffffff",g.width=40,g.text="x"+g_MyJiaoYiList[d].Dura,GameUtil.setCanAddTxtStroke(g),g.pos(30,30),g.x=9<g_MyJiaoYiList[d].Dura?24:30,a.addChild(g)))}else b.visible=!1,(g=a.getChildByName("effect"))&&g.removeSelf();a.skin="gameres/ui/img_bag_bg.png";e==d&&(a.skin="gameres/ui/img_bag_bg1.png")}}new Laya.Point(0,0);var e=-1,g=-1;Laya["class"](c,"JiaoYiWin",JiaoYiWinUI);Laya["class"](a,"Hum_ListRender",Laya.Box);Laya["class"](d,"Me_ListRender",Laya.Box);c.prototype.Hum_ListUpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.Me_ListUpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.init=function(){this.InPut_Me_Gold.editable=!0;this.nGold=0;g_OpenJiaoYi=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);this.but_QueR.on(Laya.Event.CLICK,this,this.no_QueR);this.but_ok.on(Laya.Event.CLICK,this,this.onJiaoYi);this.InPut_Me_Gold.text=0;for(var b=this.InPut_Hum_Gold.text=0;12>b;b++)g_MyJiaoYiList[b]=null,g_HumJiaoYiList[b]=null;g_OpenBag&&(b=GameUtil.InstanceOfMem(NewBagUI))&&(this.JiaoYi_bg.x=b.Bagimg_bg.x+b.Bagimg_bg.width-20,this.JiaoYi_bg.y=b.Bagimg_bg.y);this.JiaoYi_bg.skin="gameres/png/jiaoyibg.png";this.JiaoYi_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Hum_List.repeatX=5;this.Hum_List.repeatY=2;this.Hum_List.spaceX=1;this.Hum_List.spaceY=1;this.Hum_List.itemRender=a;this.Hum_List.selectEnable=!0;this.Hum_List.selectHandler=new Laya.Handler(this,this.Hum_Listselect);this.Hum_List.renderHandler=new Laya.Handler(this,this.Hum_ListUpdateItem);this.Me_List.repeatX=5;this.Me_List.repeatY=2;this.Me_List.spaceX=1;this.Me_List.spaceY=1;this.Me_List.itemRender=d;this.Me_List.selectEnable=!0;this.Me_List.selectHandler=new Laya.Handler(this,this.Me_Listselect);this.Me_List.renderHandler=new Laya.Handler(this,this.Me_ListUpdateItem);Laya.stage.on("Update_Hum_List_Refresh",this,this.Hum_List_Refresh);Laya.stage.on("Update_Me_List_Refresh",this,this.Me_List_Refresh);Laya.stage.on("Show_Me_Gold",this,this.Show_Me_Gold);Laya.stage.on("Show_Hum_Gold",this,this.Show_Hum_Gold);this.startpos=new Laya.Point;for(var c=[],b=0;12>b;b++)c.push(b);this.Hum_List.array=c;this.Me_List.array=c;""!=G_Trade_Other_Name&&(this.txt_HumName.text=G_Trade_Other_Name);g=e=-1;(b=ObjectManage.findobject(playerID))&&b.txt_name&&(this.txt_Me_Name.text=b.txt_name.text);this.InPut_Me_Gold.on(Laya.Event.FOCUS,this,this.OnFocus);this.InPut_Me_Gold.on(Laya.Event.BLUR,this,this.OnBlur)};c.prototype.OnFocus=function(){cur_use_app&&this.InPut_Me_Gold.editable&&(this.JiaoYi_bg.top=-220)};c.prototype.OnBlur=function(){cur_use_app&&(this.JiaoYi_bg.y=35)};c.prototype.onJiaoYi=function(a){this.InPut_Me_Gold.editable=!1;Sendmessage.SubmitTrade()};c.prototype.Show_Hum_Gold=function(a){this.InPut_Hum_Gold.text=a};c.prototype.Show_Me_Gold=function(a){this.InPut_Me_Gold.text=a};c.prototype.no_QueR=function(){var a=parseInt(this.InPut_Me_Gold.text);isNaN(a)&&(a=0);a>g_GameCionNum.value?(Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u91d1\u5e01\u4e0d\u8db3\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01",callfn:function(){}}]),this.InPut_Me_Gold.text=0):(this.InPut_Me_Gold.editable=!1,0<a?(Sendmessage.TradeGold(a),g_MyJiaoYiSum=this.nGold=a):this.InPut_Me_Gold.text=a)};c.prototype.Me_List_Refresh=function(a){this.Me_List.refresh()};c.prototype.Hum_List_Refresh=function(a){this.Hum_List.refresh()};c.prototype.Hum_Listselect=function(a){g=a;null!=g_HumJiaoYiList[a]&&(g_OpenIdx=5,g_MoveItems.Items=g_HumJiaoYiList[a],this.bgCanMove=!1,GameUtil.NewShowItemsInf(g_MoveItems.Items));this.Hum_List._selectedIndex=-1};c.prototype.Me_Listselect=function(a){e=a;null!=g_MyJiaoYiList[a]&&(g_OpenIdx=12,g_MoveItems.Items=g_MyJiaoYiList[a],this.bgCanMove=!1,GameUtil.NewShowItemsInf(g_MoveItems.Items));this.Me_List._selectedIndex=-1};c.prototype.onMouseDown=function(a){this.startpos.x=a.stageX;this.startpos.y=a.stageY;this.JiaoYi_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.JiaoYi_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.JiaoYi_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseUp=function(){this.JiaoYi_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.JiaoYi_bg.x+=a.stageX-this.startpos.x;this.JiaoYi_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};c.prototype.close=function(){Laya.stage.off("Update_Hum_List_Refresh",this,this.Hum_List_Refresh);Laya.stage.off("Update_Me_List_Refresh",this,this.Me_List_Refresh);Laya.stage.off("Show_Me_Gold",this,this.Show_Me_Gold);Laya.stage.off("Show_Hum_Gold",this,this.Show_Hum_Gold);g_OpenJiaoYi=!1;GameApi.CloseJiaoYi();Sendmessage.CancelTrade();this.removeSelf()};return c}(JiaoYiWinUI),LookHum=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(350,54);this.settxt=function(a,b){this.removeChildren();var c=new Laya.Image;c.skin="gameres/png/title_item.png";this.addChild(c);var d=new Laya.Text;d.color="#ffffff";d.fontSize=18;d.text=a.s.Name;d.pos(46,12);c.addChild(d);if(a&&0<a.MakeIndex){var d=0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items",e=new Laya.Image;c.addChild(e);GameUtil.loadImg(a.s.Looks,d,function(a){""!=a&&(e.skin=a,e.pos(24.5-e.width/2,24.5-e.height/2))})}}}var d=new Laya.Point(0,0),e=[],g=[];Laya["class"](c,"LookHum",LookHumUI);Laya["class"](a,"SHumIcon_Render",Laya.Box);c.prototype.ShowItemicon=function(a){ItemHeard?this.Item_4.visible=!1:(this.Item_head.visible=!1,this.img_head.visible=!1);if(null!=e[U_HELMET]){this.Item_head.removeChildren();var b=e[U_HELMET].s.Looks;if(e[U_HELMET]&&0<e[U_HELMET].MakeIndex){var c=new Laya.Image;this.LoadImageEx(b,c,!1,U_HELMET,"stateitem");this.Item_head.addChild(c);GameUtil.ShowItemeffectEx(this,c,e[U_HELMET])}}c=this.Kuang_bg_2._childs.length;for(b=0;b<c;b++){var d=this.Kuang_bg_2._childs[b];if(d instanceof Laya.Image)for(var g=0;g<d._childs.length;g++){var q=d._childs[g];if(q){var p=q.nTag;if("number"===typeof p&&(a==p||-1==a)&&40>p){q.removeChildren();if(null!=e[p]&&0<e[p].MakeIndex){var r=new Laya.Image,v=e[p].s.Looks;p==U_WEAPON||p==U_DRESS||p==U_HELMET?(e[p].tag=p,this.LoadImageEx(v,r,!0,p,"stateitem"),GameUtil.ShowItemeffectEx(this,q,e[p],!0,p)):p==U_SHIELD||p==U_HAT?(this.LoadImageEx(v,r,!0,p,"stateitem"),GameUtil.ShowItemeffectEx(this,q,e[p],!0,p)):(this.LoadImageEx(v,r,!1,p,"stateitem"),GameUtil.ShowItemeffectEx(this,q,e[p]));q.addChild(r)}if(a==p)break}}}}for(b=a=0;b<e.length;b++)null!=e[b]&&(a+=GameApi.GetItemScore(e[b]));this.itemScorse.text="\u88c5\u5907\u8bc4\u5206\uff1a"+a};c.prototype.LoadImageEx=function(a,b,c,d,e){var g=this;GameUtil.loadImg(a,e,function(a,f){if(c&&""!=a&&f){var e=Offsetmodule.getoffsetfromatlas(f.atlas,f.img);b.skin=a;g.img_Hair.y=1==g_GameType?35:39;switch(d){case U_WEAPON:1==g_GameType?b.pos(-25+e.x,40+e.y):b.pos(-20+e.x,52+e.y);break;case U_DRESS:1==g_GameType?b.pos(-75+e.x,-28+e.y):b.pos(-73+e.x,-18+e.y);break;case U_HELMET:1==g_GameType?b.pos(-69+e.x,14+e.y):b.pos(-69+e.x,18+e.y);break;case U_SHIELD:b.pos(-50+e.x,-24+e.y);break;case U_HAT:b.pos(-69+e.x,20+e.y);break;case U_FASHIONDRESS:1==g_GameType?b.pos(-67+e.x,-27+e.y):b.pos(-64+e.x,-18+e.y);break;case U_FASHIONWEAPON:1==g_GameType?b.pos(-27+e.x,40+e.y):b.pos(-20+e.x,52+e.y);break;case U_FASHIONHELMET:b.pos(-74.5+e.x,28+e.y)}}else b.skin=a,b.pos(24.5-b.width/2,24.5-b.height/2)})};c.prototype.onItem_Down=function(a){var b=a.target.nTag;"head"==a.target.name&&(b=4);30==a.target.name?GameApi.LookShoushiBox(e):40==b?GameApi.ShowLookShouS(e):null!=e[b]&&0<e[b].MakeIndex&&(g_OpenIdx=5,g_MoveItems.Index=b,g_MoveItems.Items=e[b],GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};c.prototype.init=function(){g_OpenState=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boOpenShowItemScore&&(this.itemScorse.visible=!0);this.LookHum_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.New_kuang.visible=!1;this.lookHumIcon_bg.visible=!1;this.selectedTab=this.Tab_1;this.Tab_1.selected=!0;this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.nTag=0;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.nTag=1;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.nTag=2;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.nTag=3;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.nTag=4;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.nTag=5;this.Item_6.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_6.nTag=6;this.Item_7.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_7.nTag=7;this.Item_8.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_8.nTag=8;this.Item_9.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_9.nTag=9;this.Item_10.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_10.nTag=10;this.Item_11.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_11.nTag=11;this.Item_12.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_12.nTag=12;this.Item_13.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_13.nTag=13;this.Item_14.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_14.nTag=14;this.Item_15.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_15.nTag=15;this.Item_16.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_16.nTag=16;this.Item_40.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_40.nTag=40;this.Tab_1.on(Laya.Event.MOUSE_DOWN,this,this.Tab_Show_Type);this.Tab_2.on(Laya.Event.MOUSE_DOWN,this,this.Tab_Show_Type);this.Tab_3.on(Laya.Event.MOUSE_DOWN,this,this.Tab_Show_Type);this.fashion_body.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.fashion_body.nTag=18;this.fashion_weapon.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.fashion_weapon.nTag=19;this.Item_20.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_20.nTag=20;this.Item_21.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_21.nTag=21;this.Item_22.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_22.nTag=22;this.Item_23.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_23.nTag=23;this.Item_24.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_24.nTag=24;this.Item_25.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_25.nTag=25;this.Item_26.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_26.nTag=26;this.Item_27.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_27.nTag=27;this.Item_28.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_28.nTag=28;this.Item_29.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_29.nTag=29;this.Item_30.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_head.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);e=null;this.Item_30.visible=1<=g_btSelfSndacasketState?!0:!1;this.Item_40.visible=1==g_btSelfShowGodBless?!0:!1;Laya.stage.on("updateNeiGuanHair",this,this.updateNeiGuanHair)};c.prototype.Tab_Show_Type=function(a){var b=a.target.name;this.Kuang_bg_2.visible=!1;this.New_kuang.visible=!1;this.lookHumIcon_bg.visible=!1;this.selectedTab.selected=!1;this.selectedTab=a.target;a.target.selected=!0;switch(parseInt(b)){case 1:this.Kuang_bg_2.visible=!0;break;case 2:this.New_kuang.visible=!0;this.updateLooksHumNewDress();break;case 3:this.lookHumIcon_bg.visible=!0,this.ShowsHumIcon()}};c.prototype.ShowsHumIcon=function(){this.LookIcon_List.repeatX=1;this.LookIcon_List.repeatY=9;this.LookIcon_List.vScrollBarSkin="gameres/ui/vscroll.png";this.LookIcon_List.itemRender=a;this.LookIcon_List.selectEnable=!0;this.LookIcon_List.selectHandler=new Laya.Handler(this,this.SHumIconSelect);this.LookIcon_List.renderHandler=new Laya.Handler(this,this.SHumIconUpdateItem);this.LookIcon_List.array=g;this.IconShow.on(Laya.Event.MOUSE_DOWN,this,this.onIconShow_Down);this.IconShow.removeChildren();if(e[U_ICON]&&0<e[U_ICON].MakeIndex){var b=new Laya.Image;this.IconShow.addChild(b);this.LoadImageEx(e[U_ICON].s.Looks,b,!1,U_ICON,0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items")}};c.prototype.onIconShow_Down=function(){null!=e[U_ICON]&&0<e[U_ICON].MakeIndex&&(g_OpenIdx=5,g_MoveItems.Items=e[U_ICON],GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};c.prototype.SHumIconSelect=function(a){null!=g[a]&&0<g[a].MakeIndex&&(g_OpenIdx=5,g_MoveItems.Items=g[a],GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};c.prototype.SHumIconUpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.updateLooksHumNewDress=function(){this.fashion_hum.visible=!0;for(var a=this.New_kuang._childs.length,b=0;b<a;b++){var c=this.New_kuang._childs[b];if(c instanceof Laya.Image)for(var d=0;d<c._childs.length;d++){var g=c._childs[d],q=g.nTag;if("number"===typeof q)if(g.removeChildren(),q==U_FASHIONDRESS||q==U_FASHIONWEAPON||q==U_FASHIONHELMET){if(null!=e[q]&&0<e[q].s.nIdx){var p=e[q].s.Looks,r=new Laya.Image;g.addChild(r);this.LoadImageEx(p,r,!0,q,"stateitem");GameUtil.ShowItemeffectEx(this,g,e[q],!0,q)}}else null!=e[q]&&0<e[q].s.nIdx&&(p=e[q].s.Looks,r=new Laya.Image,g.addChild(r),this.LoadImageEx(p,r,!1,q,"stateitem"),GameUtil.ShowItemeffectEx(this,g,e[q]))}}};c.prototype.ShowHum=function(a){if(null!=a){var b=THumFeature(a.Feature.buffer);this.hum_ico2.skin="gameres/png/00377-1.png";this.fashion_hum.skin="gameres/png/00377-2.png";0==b.btGender&&(this.hum_ico2.skin="gameres/png/00376-1.png",this.fashion_hum.skin="gameres/png/00376-2.png");this.uaer_name.text=a.UserName;this.uaer_name.color=Get2RGB(a.NAMECOLOR);this.user_title.text=a.GuildName;""!==a.GuildRankName&&(this.user_title.text+="["+a.GuildRankName+"]");GameUtil.updateNeiGuanHair(this.img_Hair,b.btHair,b.btGender);e=a.UseItems;g=a.UserIconList;this.ShowItemicon(-1);this.copyname.on(Laya.Event.CLICK,this,function(){g_copyName=a.UserName;Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u590d\u5236\u6210\u529f\uff0c\u53ef\u4ee5\u5728\u6dfb\u52a0\u597d\u53cb\u754c\u9762\u7c98\u8d34\u3002",callfn:function(){}}])})}};c.prototype.updateNeiGuanHair=function(a,b){GameUtil.updateNeiGuanHair(this.img_Hair,a,b)};c.prototype.onMouseDown=function(a){d.x=a.stageX;d.y=a.stageY;this.LookIcon_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.LookHum_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.LookHum_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.LookHum_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.LookHum_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.LookHum_bg.x+=a.stageX-d.x;this.LookHum_bg.y+=a.stageY-d.y;d.x=a.stageX;d.y=a.stageY};c.prototype.close=function(){Laya.stage.off("updateNeiGuanHair",this,this.updateNeiGuanHair);for(var a=this.Kuang_bg_2._childs.length,b=0;b<a;b++){var c=this.Kuang_bg_2._childs[b];if(c instanceof Laya.Image)for(var d=0;d<c._childs.length;d++){var e=c._childs[d];e._childs[1]&&""!==e._childs[1].name&&Animationmodule.removeAniname(e._childs[1].name)}}a=this.New_kuang._childs.length;for(b=0;b<a;b++)if(c=this.New_kuang._childs[b],c instanceof Laya.Image)for(d=0;d<c._childs.length;d++)e=c._childs[d],e._childs[1]&&""!==e._childs[1].name&&Animationmodule.removeAniname(e._childs[1].name);this.removeSelf()};return c}(LookHumUI),LookShop=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(48,48);var b=new Laya.Image;b.width=50;b.height=50;b.skin="gameres/ui/img_bag_bg.png";this.addChild(b);var f=new Laya.Image;b.addChild(f);this.setpos=function(a){f.visible=!0;f.skin=a;f.x=b.width/2-f.width/2;f.y=b.height/2-f.height/2;GameUtil.setTxtFixedPos(f,b.width)};this.settxt=function(a,c){if(20>c&&0!=G_BaiTanData.Item[c].MakeIndex)if(GameUtil.loadImg(G_BaiTanData.Item[c].s.Looks,"items",this.setpos),GameUtil.ShowItemeffect(b,G_BaiTanData.Item[c]),(17==G_BaiTanData.Item[c].s.StdMode||18==G_BaiTanData.Item[c].s.StdMode||41==G_BaiTanData.Item[c].s.StdMode||40==G_BaiTanData.Item[c].s.StdMode||42==G_BaiTanData.Item[c].s.StdMode||31==G_BaiTanData.Item[c].s.StdMode&&-1!=G_BaiTanData.Item[c].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<G_BaiTanData.Item[c].s.Reserved&&0<G_BaiTanData.Item[c].Dura){if(!f.getChildByName("itemNums")){var d=new Laya.Text;d.name="itemNums";d.color="#ffffff";d.align="right";d.width=40;d.text="x"+(G_BaiTanData.Item[c].Dura+1);GameUtil.setCanAddTxtStroke(d);d.pos(-5,20);f.addChild(d);GameUtil.setTxtFixedPos(f,b.width)}}else 0==G_BaiTanData.Item[c].s.StdMode&&5==G_BaiTanData.Item[c].s.Source&&0<G_BaiTanData.Item[c].Dura&&!f.getChildByName("itemNums")&&(d=new Laya.Text,d.name="itemNums",d.color="#ffffff",d.align="right",d.width=40,d.text="x"+G_BaiTanData.Item[c].Dura,GameUtil.setCanAddTxtStroke(d),d.pos(-10,20),f.addChild(d),GameUtil.setTxtFixedPos(f,b.width));else f.visible=!1,(d=b.getChildByName("effect"))&&d.removeSelf();b.skin="gameres/ui/img_bag_bg.png";e==c&&(b.skin="gameres/ui/img_bag_bg1.png")}}var d=new Laya.Point(0,0),e=-1;Laya["class"](c,"LookShop",LooksShopUI);Laya["class"](a,"LookShopRender",Laya.Box);c.prototype.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.but_Exit.on(Laya.Event.CLICK,this,this.close);this.but_Buy.on(Laya.Event.CLICK,this,this.onbut_Buy);this.LookShop_bg.skin="gameres/png/myshopwin.png";if(g_OpenBag){var b=GameUtil.InstanceOfMem(NewBagUI);b&&(this.LookShop_bg.x=b.Bagimg_bg.x+b.Bagimg_bg.width-20,this.LookShop_bg.y=b.Bagimg_bg.y)}this.LookShop_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.LookShop_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.LookShop_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.Look_S_List.repeatX=5;this.Look_S_List.repeatY=4;this.Look_S_List.spaceX=1;this.Look_S_List.spaceY=1;this.Look_S_List.itemRender=a;this.Look_S_List.selectEnable=!0;this.Look_S_List.selectHandler=new Laya.Handler(this,this.Shop_Listselect);this.Look_S_List.renderHandler=new Laya.Handler(this,this.UpdateItem);Laya.stage.on("Update_Look_S_List",this,this.Look_S_List_Refresh);this.initlist()};c.prototype.initlist=function(){this.txt_ShopName.text=g_SelectedName+" \u7684\u4e2a\u4eba\u5546\u5e97";this.txt_Name.text="";this.txt_Gold.text="";for(var a=[],b=0;20>b;b++)a.push(b);this.Look_S_List.array=a;e=-1};c.prototype.Look_S_List_Refresh=function(a){this.Look_S_List.refresh()};c.prototype.onbut_Buy=function(a){if(-1!=e&&20>e&&0!=G_BaiTanData.Item[e].MakeIndex){var b=G_BaiTanData.nRecogId,c=G_BaiTanData.Item[e].MakeIndex,d=baitanGoldTypes[e],m=G_BaiTanData.Item[e].s.Price;a=G_BaiTanData.Item[e].s.Name;var n=GameUtil.getCurrencyByGoldType(d)+".";Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u8d2d\u4e70\u8be5\u7269\u54c1\uff1f \r\n \u7269\u54c1: \u3010 "+a+" \u3011\r\n\u51fa\u552e\u4ef7\u683c\uff1a"+m+n,callfn:function(){Sendmessage.BuyBaiTanItem(b,c,d,m,e)}}])}};c.prototype.Shop_Listselect=function(a){this.txt_Name.text="";this.txt_Gold.text="";e=a;if(0!=G_BaiTanData.Item[a].MakeIndex)switch(g_OpenIdx=5,g_MoveItems.Items=G_BaiTanData.Item[a],this.bgCanMove=!1,GameUtil.NewShowItemsInf(g_MoveItems.Items),this.txt_Name.text=g_MoveItems.Items.s.Name,baitanGoldTypes[a]){case 1:this.txt_Gold.text=G_BaiTanData.Item[a].s.Price+" "+g_GameCionNum.key;break;case 2:this.txt_Gold.text=G_BaiTanData.Item[a].s.Price+" "+g_bindCionNum.key;break;case 3:this.txt_Gold.text=G_BaiTanData.Item[a].s.Price+" "+g_GameGoldNum.key;break;case 4:this.txt_Gold.text=G_BaiTanData.Item[a].s.Price+" "+g_bindGoldNum.key;break;case 5:this.txt_Gold.text=G_BaiTanData.Item[a].s.Price+" "+g_GamePointNum.key;break;case 6:this.txt_Gold.text=G_BaiTanData.Item[a].s.Price+" "+g_nGameDiamond.key;break;case 7:this.txt_Gold.text=G_BaiTanData.Item[a].s.Price+" "+g_nGameGird.key;break;case 8:this.txt_Gold.text=G_BaiTanData.Item[a].s.Price+" "+g_gameGlory.key;break;case 9:this.txt_Gold.text=G_BaiTanData.Item[a].s.Price+" "+g_gamePopNum.key}this.Look_S_List._selectedIndex=-1};c.prototype.onMouseDown=function(){if(!(this.but_Exit.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_Name.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_Gold.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_ShopName.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.Look_S_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))&&this.LookShop_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var a=this.LookShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));d.x=a.x;d.y=a.y;this.bgCanMove=!0}};c.prototype.onMouseUp=function(){this.bgCanMove=!1};c.prototype.onMouseMove=function(){if(!(this.but_Exit.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_Name.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_Gold.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.txt_ShopName.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.Look_S_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))&&this.LookShop_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.bgCanMove){var a=this.LookShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.LookShop_bg.x+=a.x-d.x;this.LookShop_bg.y+=a.y-d.y}};c.prototype.close=function(){this.removeSelf();Laya.stage.off("Update_Look_S_List",this,this.Look_S_List_Refresh)};return c}(LooksShopUI),LookShous=function(b){function c(){c.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya["class"](c,"LookShous",LookShousUI);c.prototype.ShouShiShow=function(a){if(null!=a)for(var b=this.sKuang._childs.length,c=0;c<b;c++){var f=this.sKuang._childs[c];f.removeChildren();var h=parseInt(f.name)+40;f.Items=null;if(null!=a[h]&&0<a[h].MakeIndex){var l=a[h].s.Looks,m=new Laya.Image,n=this;m.name=c;f.Items=a[h];GameUtil.loadImg(l,"items",function(a,b){var f=n.sKuang.getChildByName(a.name.toString());a.skin=b;a.pos(22-a.width/2,22-a.height/2);f.addChild(a)}.bind(this,m));f.addChild(m);GameUtil.ShowItemeffectEx(this,f,a[h],!0,h)}}};c.prototype.onItem_Down=function(a){a=a.target.Items;null!=a&&0<a.MakeIndex&&(g_OpenIdx=22,g_MoveItems.Index=a.tag,g_MoveItems.Items=a,GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};c.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Shoushi_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.Items=null;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.Items=null;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.Items=null;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.Items=null;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.Items=null;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.Items=null;this.Item_6.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_6.Items=null;this.Item_7.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_7.Items=null;this.Item_8.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_8.Items=null;this.Item_9.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_9.Items=null;this.Item_10.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_10.Items=null;this.Item_11.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_11.Items=null};c.prototype.onMouseDown=function(b){a.x=b.stageX;a.y=b.stageY;this.Shoushi_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.Shoushi_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.Shoushi_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseUp=function(){this.Shoushi_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(b){this.Shoushi_bg.x+=b.stageX-a.x;this.Shoushi_bg.y+=b.stageY-a.y;a.x=b.stageX;a.y=b.stageY};c.prototype.close=function(){this.removeSelf()};return c}(LookShousUI),LookShoushi=function(b){function c(){c.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya["class"](c,"LookShoushi",LookShoushiUI);b=c.prototype;b.init=function(){this.btn_close.on(Laya.Event.CLICK,this,this.BtnColse);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.Items=null;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.Items=null;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.Items=null;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.Items=null;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.Items=null;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.Items=null};b.ShowShoushi=function(a){if(null!=a)for(var b=this.img_box._childs.length,c=0;c<b;c++){var f=this.img_box._childs[c];f.removeChildren();var h=parseInt(f.name)+30;f.Items=null;if(null!=a[h]&&0<a[h].MakeIndex){var l=a[h].s.Looks,m=new Laya.Image;f.Items=a[h];GameUtil.loadImg(l,"items",function(a,b){a&&b&&(a.skin=b,a.pos(24.5-a.width/2,24.5-a.height/2))}.bind(this,m));f.addChild(m);GameUtil.ShowItemeffectEx(this,f,a[h],!0,h)}}};b.onItem_Down=function(a){var b=a.target.Items;parseInt(a.target.name);null!=b&&0<b.MakeIndex&&(g_OpenIdx=21,g_MoveItems.Index=b.tag,g_MoveItems.Items=b,GameUtil.NewShowItemsInf(g_MoveItems.Items,1))};b.BtnColse=function(){this.removeSelf()};b.OnMouseDown=function(b){a.x=b.stageX;a.y=b.stageY;this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(b){this.img_box.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.img_bg.x+=b.stageX-a.x,this.img_bg.y+=b.stageY-a.y,a.x=b.stageX,a.y=b.stageY)};return c}(LookShoushiUI),minimap=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(150,47);this.lb_txt=new Laya.Button;this.lb_txt.labelColors="#c6bb94";this.lb_txt.labelSize=18;this.lb_txt.skin="gameres/ui/npclist_btn.png";this.lb_txt.stateNum=2;this.lb_txt.size(150,47);this.addChild(this.lb_txt);this.settxt=function(a){this.lb_txt.label=a.npcname}}var d=-1;Laya["class"](c,"minimap",minimapUI);Laya["class"](a,"item",Laya.Box);c.prototype.init=function(){this.img_url=this.up_time=0;this.lb_posy=this.lb_posx="";this.mousetype=!0;Laya.stage.on("close_minimap",this,this.close);this.btn_close.on(Laya.Event.CLICK,this,this.close);this.but_goto.on(Laya.Event.CLICK,this,this.gotomapxy);this.Big_mapimg.skin="gameres/png/img_bj.png";this.Big_mapimg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)};c.prototype.MouseDownMap=function(){var a=this.img_bj.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),a=new Laya.Point(Math.floor(a.x/(this.img_bj.width/Mapmodule.mapMaxX)),Math.floor(a.y/(this.img_bj.height/Mapmodule.mapMaxY)));if(AStart.cur_matx&&AStart.cur_matx[0]&&a.y<AStart.cur_matx.length&&a.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[a.y][a.x]){Fightmodule.leavefight();Movemodule.stopmove();Movemodule.end_point=null;var b=ObjectManage.findobject(playerID);b&&!b.is_die&&(d=-1,this.npc_list.refresh(),Movemodule.autoMove(a))}};c.prototype.drawlin=function(){var a=this.img_bj.width/Mapmodule.mapMaxX,b=this.img_bj.height/Mapmodule.mapMaxY,f=ObjectManage.findobject(playerID);if(f){var c=f.grid.x*a,d=f.grid.y*b;this.role_sp.pos(c-this.role_sp.width/2,d-this.role_sp.height);this.sp_lines.graphics.clear();if(0<Movemodule.move_list.length){for(var m=[],n=Movemodule.move_index;n<Movemodule.move_list.length;++n)m.push((Movemodule.move_list[n].x-f.grid.x)*a),m.push((Movemodule.move_list[n].y-f.grid.y)*b);this.sp_lines.graphics.drawLines(c,d,m,"#ff0000",1)}}};c.prototype.gotomapxy=function(){var a=ObjectManage.findobject(playerID);if(!a.is_die&&-1!=d&&0<this.npc_list.array.length){var b=parseInt(this.npc_list.array[d].mapx),a=parseInt(this.npc_list.array[d].mapy),b=new Laya.Point(b,a);if(AStart.cur_matx&&AStart.cur_matx[0]&&b.y<AStart.cur_matx.length&&b.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[b.y][b.x]){for(a=0;8>a;a++){var f=GameUtil.GetNextPoint(b.x,b.y,a);if(AStart.cur_matx&&AStart.cur_matx[0]&&f.y<AStart.cur_matx.length&&f.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[f.y][f.x]){b=f;break}}Fightmodule.leavefight();Movemodule.stopmove();if(a=ObjectManage.findobject(playerID))20<a.grid.distance(b.x,b.y)?Movemodule.start2move(a.grid,b):Movemodule.startmove(a.grid,b),Movemodule.end_point=b,b=Laya.stage.getChildByName("moveing"),null==b&&(b=new Laya.Point(browser_width/2,browser_height/2+105),b=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/moveing/",1,12,100,!0,!1,b),b.name="moveing",b.zOrder=0,autohookstate&&Laya.stage.event("onhook",["0"]))}}};c.prototype.updatepos=function(){var a=ObjectManage.findobject(playerID);a&&(this.lb_posx="X:"+a.grid.x,this.lb_posy="Y:"+a.grid.y,this.lb_mapname.text=Mapdata.cur_name+"  "+this.lb_posx+" "+this.lb_posy,this.drawlin())};c.prototype.setMapdata=function(a){Laya.timer.loop(500,this,this.updatepos);this.lb_mapname.text=Mapdata.cur_name+"  "+this.lb_posx+" "+this.lb_posy;this.img_url=a;this.startpos=new Laya.Point;this.showimg();this.showlist();this.drawlin();this.ratio=this.last_dis=0;this.span=.05};c.prototype.mapmove=function(a){if(a.touches&&2==a.touches.length){var b=a.touches[0].stageX-a.touches[1].stageX;a=a.touches[0].stageY-a.touches[1].stageY;b=Math.sqrt(b*b+a*a);if(b>this.last_dis){if(2<this.ratio)return;this.ratio+=this.span;this.img_bj.x-=this.img_bj.width*this.span/2;this.img_bj.y-=this.img_bj.height*this.span/2;this.img_bj.scaleX+=this.span;this.img_bj.scaleY+=this.span}if(b<this.last_dis){if(0>=this.ratio){this.img_bj.scale(497/this.img_bj.width,334/this.img_bj.height);this.img_bj.pos(0,0);return}this.ratio-=this.span;this.img_bj.scaleX-=this.span;this.img_bj.scaleY-=this.span;0>this.img_bj.x&&(this.img_bj.x+=Math.abs(this.img_bj.x/5));0>this.img_bj.y&&(this.img_bj.y+=Math.abs(this.img_bj.y/5))}this.mousetype=!1;this.last_dis=b}else{0>this.img_bj.x+(a.stageX-this.startpos.x)&&this.img_bj.x+(a.stageX-this.startpos.x)>-(this.img_bj.width*this.img_bj.scaleX)+497&&(this.img_bj.x+=a.stageX-this.startpos.x);0>this.img_bj.y+(a.stageY-this.startpos.y)&&this.img_bj.y+(a.stageY-this.startpos.y)>-(this.img_bj.height*this.img_bj.scaleY)+334&&(this.img_bj.y+=a.stageY-this.startpos.y);if(this.startpos.x!=a.stageX||this.startpos.y!=a.stageY)this.mousetype=!1;this.startpos.x=a.stageX;this.startpos.y=a.stageY}};c.prototype.mapup=function(a){this.img_bj.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&(this.img_bj.off(Laya.Event.MOUSE_MOVE,this,this.mapmove),this.img_bj.off(Laya.Event.MOUSE_UP,this,this.mapup),this.img_bj.off(Laya.Event.MOUSE_OUT,this,this.mapup),this.mousetype&&3E3<Laya.Browser.now()-this.up_time&&(this.MouseDownMap(),this.up_time=Laya.Browser.now()),this.mousetype=!0)};c.prototype.mapdown=function(a){if(a.touches&&2==a.touches.length){var b=a.touches[0].stageX-a.touches[1].stageX,f=a.touches[0].stageY-a.touches[1].stageY;this.last_dis=Math.sqrt(b*b+f*f)}this.startpos.x=a.stageX;this.startpos.y=a.stageY;this.img_bj.on(Laya.Event.MOUSE_MOVE,this,this.mapmove);this.img_bj.on(Laya.Event.MOUSE_UP,this,this.mapup);this.img_bj.on(Laya.Event.MOUSE_OUT,this,this.mapup)};c.prototype.showimg=function(){this.img_bj=new Laya.Sprite;this.sp_lines=new Laya.Sprite;this.img_bj.addChild(this.sp_lines);this.role_sp=new Laya.Sprite;this.img_bj.addChild(this.role_sp);this.role_sp.name="minimap_pos";this.role_sp.width=45;this.role_sp.height=63;var a=Animationmodule.playframe(!1,this.role_sp,"gameres/animation/minimap/",530,539,120,!0,!1);a&&(a.pos(-2,35),a.name="ani_pos");this.boxmap.addChild(this.img_bj);if(null!=this.img_url){var b="";1E4<=this.img_url?(b="mmap10",this.img_url-=1E4):999<=this.img_url?(b="mmap",this.img_url-=999):800<=this.img_url?(b="mmap1",this.img_url-=800):(b="mmap",this.img_url=this.img_url)}a=GameMission.getUrl(b,this.img_url);this.img_bj.loadImage(a,0,0,0,0,Laya.Handler.create(this,function(){this.img_bj.on(Laya.Event.MOUSE_DOWN,this,this.mapdown);this.img_bj.on(Laya.Event.DOUBLE_CLICK,this,this.teleport);this.drawlin();this.drawdesc();this.img_bj.scale(497/this.img_bj.width,334/this.img_bj.height)}))};c.prototype.teleport=function(){var a=this.img_bj.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),a=new Laya.Point(Math.floor(a.x/(this.img_bj.width/Mapmodule.mapMaxX)),Math.floor(a.y/(this.img_bj.height/Mapmodule.mapMaxY)));if(AStart.cur_matx&&AStart.cur_matx[0]&&a.y<AStart.cur_matx.length&&a.x<AStart.cur_matx[0].length&&0==AStart.cur_matx[a.y][a.x]){Fightmodule.leavefight();Movemodule.stopmove();Movemodule.end_point=null;var b=ObjectManage.findobject(playerID);b&&!b.is_die&&Sendmessage.sendSay("@\u4f20\u9001 "+a.x+" "+a.y)}};c.prototype.drawdesc=function(){for(var a=this.img_bj.width/Mapmodule.mapMaxX,b=this.img_bj.height/Mapmodule.mapMaxY,f=0;f<g_mapdesc.length;f++){var c=g_mapdesc[f];if(c&&5<c.length&&c[0]==Mapdata.cur_name&&"0"==c[5]){var d=.1>this.img_bj.width/1300?.1:this.img_bj.width/1300,m=new Laya.Text;m.text=c[3];m.fontSize=34;m.scale(d,d);m.color="#"+Get3RGB(c[4].substr(1));m.stroke=1;m.bold=!0;m.strokeColor="#000000";d=parseInt(c[1])*a;c=parseInt(c[2])*b;m.pos(d-m.width/2,c-m.height/2);this.img_bj.addChild(m)}}};c.prototype.showlist=function(){var b=Mapdata.getNPClist();this.npc_list.itemRender=a;this.npc_list.repeatX=1;this.npc_list.repeatY=6;this.npc_list.spaceY=5;this.npc_list.vScrollBarSkin="";this.npc_list.selectEnable=!0;this.npc_list.renderHandler=new Laya.Handler(this,this.updateitem);this.npc_list.selectHandler=new Laya.Handler(this,this.select);this.npc_list.array=b};c.prototype.updateitem=function(a,b){a.settxt(a.dataSource);d==b?(a.lb_txt.color="#FFC600",a.lb_txt.selected=!0):(a.lb_txt.color="#ffffff",a.lb_txt.selected=!1);"1"==a.dataSource.mapnps&&(g_mapnpc=new Laya.Point(a.dataSource.mapx,a.dataSource.mapy))};c.prototype.select=function(a){d=a;this.npc_list._selectedIndex=-1};c.prototype.close=function(){Laya.stage.off("close_minimap",this,this.close);d=-1;Laya.timer.clear(this,this.updatepos);this.img_bj.off(Laya.Event.MOUSE_DOWN,this,this.mapdown);this.img_bj.off(Laya.Event.MOUSE_UP,this,this.mapup);this.img_bj.off(Laya.Event.MOUSE_OUT,this,this.mapup);isOpen=!0;Animationmodule.removeAniname("ani_pos");this.removeSelf()};c.prototype.onMouseDown=function(a){this.npc_list.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.boxmap.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.Big_mapimg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Big_mapimg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Big_mapimg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.Big_mapimg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.Big_mapimg.x+=a.stageX-this.startpos.x;this.Big_mapimg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};return c}(minimapUI),MyShop=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(48,48);var b=new Laya.Image;b.width=50;b.height=50;b.skin="gameres/ui/img_bag_bg.png";this.addChild(b);var f=new Laya.Image;b.addChild(f);this.setpos=function(a){f.visible=!0;f.skin=a;f.x=b.width/2-f.width/2;f.y=b.height/2-f.height/2;GameUtil.setTxtFixedPos(f,b.height)};this.settxt=function(a,c){if(c<g_MyShopList.length&&null!=g_MyShopList[c])if(GameUtil.loadImg(g_MyShopList[c].Items.s.Looks,"items",this.setpos),GameUtil.ShowItemeffect(b,g_MyShopList[c].Items),(17==g_MyShopList[c].Items.s.StdMode||18==g_MyShopList[c].Items.s.StdMode||41==g_MyShopList[c].Items.s.StdMode||40==g_MyShopList[c].Items.s.StdMode||42==g_MyShopList[c].Items.s.StdMode||31==g_MyShopList[c].Items.s.StdMode&&-1!=g_MyShopList[c].Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MyShopList[c].Items.s.Reserved&&0<g_MyShopList[c].Items.Dura){if(!f.getChildByName("itemNums")){var d=new Laya.Text;d.name="itemNums";d.color="#ffffff";d.align="right";d.width=40;d.text="x"+(g_MyShopList[c].Items.Dura+1);GameUtil.setCanAddTxtStroke(d);d.pos(-5,20);f.addChild(d);GameUtil.setTxtFixedPos(f,b.height)}}else 0==g_MyShopList[c].Items.s.StdMode&&5==g_MyShopList[c].Items.s.Source&&0<g_MyShopList[c].Items.Dura&&!f.getChildByName("itemNums")&&(d=new Laya.Text,d.name="itemNums",d.color="#ffffff",d.align="right",d.width=40,d.text="x"+g_MyShopList[c].Items.Dura,GameUtil.setCanAddTxtStroke(d),d.pos(-10,20),f.addChild(d),GameUtil.setTxtFixedPos(f,b.height));else f.visible=!1,(d=b.getChildByName("effect"))&&d.removeSelf();b.skin="gameres/ui/img_bag_bg.png";e==c&&(b.skin="gameres/ui/img_bag_bg1.png")}}var d=new Laya.Point(0,0),e=-1;Laya["class"](c,"MyShop",NewMyShopUI);Laya["class"](a,"MyShopRender",Laya.Box);c.prototype.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.init=function(){g_OpenMyShop=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);this.but_exit.on(Laya.Event.CLICK,this,this.Bait_exit);this.but_begin.on(Laya.Event.CLICK,this,this.begin_Bait);this.txt_ShopName.text="";this.txt_Name.text="";this.txt_Gold.text="";var b=ObjectManage.findobject(playerID);b&&(b=b.sp.getChildByName("stallstxt"))&&(this.txt_ShopName.text=b.text);this.MyShop_bg.skin="gameres/png/myshopwin.png";g_OpenBag&&(b=GameUtil.InstanceOfMem(NewBagUI))&&(this.MyShop_bg.x=b.Bagimg_bg.x+b.Bagimg_bg.width-20,this.MyShop_bg.y=b.Bagimg_bg.y);this.MyShop_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Shop_List.repeatX=5;this.Shop_List.repeatY=4;this.Shop_List.spaceX=1;this.Shop_List.spaceY=1;this.Shop_List.itemRender=a;this.Shop_List.selectEnable=!0;this.Shop_List.selectHandler=new Laya.Handler(this,this.Shop_Listselect);this.Shop_List.renderHandler=new Laya.Handler(this,this.UpdateItem);Laya.stage.on("Update_Shop_List",this,this.Shop_Refresh);for(var b=[],f=0;20>f;f++)b.push(f);this.Shop_List.array=b;e=-1;this.txt_Name.on(Laya.Event.FOCUS,this,this.OnFocus);this.txt_Name.on(Laya.Event.BLUR,this,this.OnBlur);this.txt_Gold.on(Laya.Event.FOCUS,this,this.OnFocus);this.txt_Gold.on(Laya.Event.BLUR,this,this.OnBlur)};c.prototype.OnFocus=function(){cur_use_app&&(this.MyShop_bg.top=-220)};c.prototype.OnBlur=function(){cur_use_app&&(this.MyShop_bg.y=34)};c.prototype.Shop_Refresh=function(a){this.Shop_List.refresh()};c.prototype.begin_Bait=function(){""==this.txt_ShopName.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6446\u644a\u540d\u79f0\u4e0d\u53ef\u4e3a\u7a7a\uff01\uff01\uff01",callfn:function(){}}]):15<this.txt_ShopName.text.length?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6446\u644a\u540d\u79f0\u6700\u591a15\u4e2a\u5b57\uff01\uff01",callfn:function(){}}]):(Sendmessage.StartBaiTan(this.txt_ShopName.text),this.removeSelf())};c.prototype.Shop_Listselect=function(a){this.txt_Name.text="";this.txt_Gold.text="";e=a;if(null!=g_MyShopList[a])switch(g_OpenIdx=5,g_MoveItems.Items=g_MyShopList[a].Items,this.bgCanMove=!1,GameUtil.NewShowItemsInf(g_MoveItems.Items),this.txt_Name.text=g_MoveItems.Items.s.Name,g_MyShopList[a].nType){case 1:this.txt_Gold.text=g_MyShopList[a].nGold+" "+g_GameCionNum.key;break;case 2:this.txt_Gold.text=g_MyShopList[a].nGold+" "+g_bindCionNum.key;break;case 3:this.txt_Gold.text=g_MyShopList[a].nGold+" "+g_GameGoldNum.key;break;case 4:this.txt_Gold.text=g_MyShopList[a].nGold+" "+g_bindGoldNum.key;break;case 5:this.txt_Gold.text=g_MyShopList[a].nGold+" "+g_GamePointNum.key;break;case 6:this.txt_Gold.text=g_MyShopList[a].nGold+" "+g_nGameDiamond.key;break;case 7:this.txt_Gold.text=g_MyShopList[a].nGold+" "+g_nGameGird.key;break;case 8:this.txt_Gold.text=g_MyShopList[a].nGold+" "+g_gameGlory.key;break;case 9:this.txt_Gold.text=g_MyShopList[a].nGold+" "+g_gamePopNum.key}this.Shop_List._selectedIndex=-1};c.prototype.onMouseDown=function(a){d.x=a.stageX;d.y=a.stageY;this.MyShop_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.MyShop_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.MyShop_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseUp=function(){this.MyShop_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.MyShop_bg.x+=a.stageX-d.x;this.MyShop_bg.y+=a.stageY-d.y;d.x=a.stageX;d.y=a.stageY};c.prototype.close=function(){Laya.stage.off("Update_Shop_List",this,this.Shop_Refresh);g_OpenMyShop=!1;this.removeSelf()};c.prototype.Bait_exit=function(){Laya.stage.off("Update_Shop_List",this,this.Shop_Refresh);g_OpenMyShop=!1;Sendmessage.StopBaiTan();this.removeSelf()};return c}(NewMyShopUI),MyShopMsg=function(b){function c(){c.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya["class"](c,"MyShopMsg",MyShopMsgUI);c.prototype.init=function(){this.but_baitan.on(Laya.Event.CLICK,this,this.baitan);this.but_Close.on(Laya.Event.CLICK,this,this.close);this.but_GameGold.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_Gold.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_GameGird.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_GameDiamond.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_bindCionNum.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_bindGoldNum.on(Laya.Event.CLICK,this,this.onTypeGold);this.but_gamePointNum.on(Laya.Event.CLICK,this,this.onTypeGold);this.txt_GoldCount.on(Laya.Event.FOCUS,this,this.OnFocus);this.txt_GoldCount.on(Laya.Event.BLUR,this,this.OnBlur);this.MyShopMsg_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.posList=[];this.but_GameGold.selected=!0;this.MyShopMsg_bg.skin="gameres/png/myshopmsg.png";g_GameGoldNum&&(this.goldname1.text=g_GameGoldNum.key);g_GameCionNum&&(this.goldname2.text=g_GameCionNum.key);g_nGameGird&&(this.goldname3.text=g_nGameGird.key);g_nGameDiamond&&(this.goldname4.text=g_nGameDiamond.key);g_bindCionNum&&(this.goldname5.text=g_bindCionNum.key);g_bindGoldNum&&(this.goldname6.text=g_bindGoldNum.key);g_GamePointNum&&(this.goldname7.text=g_GamePointNum.key);this.setCurrencyShow(g_serverconfigtxt.currencyShowList,this.btns_box._childs);GameUtil.showOperationBtnsSort(this.posList,this.btns_box._childs)};c.prototype.setCurrencyShow=function(a,b){if(a&&""!=a)for(var c=b.length,f=a.split(","),h=0;h<c;h++)b[h].visible="1"==f[h]};c.prototype.OnFocus=function(){cur_use_app&&(this.MyShopMsg_bg.top=0)};c.prototype.OnBlur=function(){cur_use_app&&(this.MyShopMsg_bg.y=122)};c.prototype.onTypeGold=function(a){this.but_GameGold.selected=!1;this.but_Gold.selected=!1;this.but_GameGird.selected=!1;this.but_GameDiamond.selected=!1;this.but_bindCionNum.selected=!1;this.but_bindGoldNum.selected=!1;this.but_gamePointNum.selected=!1;a.target.selected=!0};c.prototype.baitan=function(){g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;if(null!=g_WaitItems.Items){var a=parseInt(this.txt_GoldCount.text);if(0<a){var b=this.getGoldType();g_WaitItems.nGold=a;g_WaitItems.nType=b;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex);Sendmessage.AddBaiTanItem(g_WaitItems.Items.MakeIndex,a,b)}else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u8f93\u5165\u6446\u644a\u51fa\u552e\u4ef7\u683c\uff01",callfn:function(){}}])}this.removeSelf()};c.prototype.getGoldType=function(){if(this.but_Gold.selected)return 1;if(this.but_bindCionNum.selected)return 2;if(this.but_GameGold.selected)return 3;if(this.but_bindGoldNum.selected)return 4;if(this.but_gamePointNum.selected)return 5;if(this.but_GameDiamond.selected)return 6;if(this.but_GameGird.selected)return 7};c.prototype.onMouseDown=function(b){this.txt_GoldCount.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(a.x=b.stageX,a.y=b.stageY,this.MyShopMsg_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.MyShopMsg_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.MyShopMsg_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.MyShopMsg_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(b){this.txt_GoldCount.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.MyShopMsg_bg.x+=b.stageX-a.x,this.MyShopMsg_bg.y+=b.stageY-a.y,a.x=b.stageX,a.y=b.stageY)};c.prototype.close=function(){this.removeSelf()};return c}(MyShopMsgUI),MyStoreWin=function(b){function c(){c.__super.call(this);Storetype=-1;this.init()}function a(){a.__super.call(this);this.ItemZero=new MyStoreItemUI;this.addChild(this.ItemZero);this.ItemZero.ItemBack.on(Laya.Event.CLICK,this,function(){var a=this.dataSource.Item.MakeIndex,b=this.dataSource.Item.s.Name;a&&""!=a&&Sendmessage.SendMoveMyShopItem(a,0,1,b)});this.ItemZero.ItemRetrieve.on(Laya.Event.CLICK,this,function(){var a=this.dataSource.Item.MakeIndex,b=this.dataSource.Item.s.Name;a&&""!=a&&Sendmessage.SendMoveMyShopItem(a,0,2,b)});this.ZeroShowItem=function(a,b){var c=GameUtil.ShowMoneyType(a.btMoneyType),d=GameUtil.ShowbtItemType(a.btItemType);GameUtil.ShowItemNum(a.Item,this.ItemZero.ItemImg,23.5,18.5);this.ItemZero.ItemName.text=a.Item.s.Name;this.ItemZero.ItemPrice.text=a.Item.s.Price+c;this.ItemZero.ItemType.text=d;this.ItemZero.ItemTime.text=a.dCreateDate;this.ItemZero.ItemBack.text="\u8fd4\u56de\u4ed3\u5e93";this.ItemZero.ItemRetrieve.text="\u53d6\u56de"}}function d(){d.__super.call(this);this.ItemOne=new StoreSoldItemUI;this.addChild(this.ItemOne);this.ItemOne.ItemRemove.on(Laya.Event.CLICK,this,function(){var a=this.dataSource.Item.MakeIndex;a&&""!=a&&Sendmessage.SendDeleteSelledItem(a)});this.OneShowItem=function(a,b){var c=GameUtil.ShowMoneyType(a.btMoneyType);GameUtil.ShowItemNum(a.Item,this.ItemOne.ItemImg,23.5,18.5);this.ItemOne.ItemName.text=a.Item.s.Name;this.ItemOne.ItemSoldName.text=a.sBuyName;this.ItemOne.ItemPrice.text=a.Item.s.Price+c;this.ItemOne.ItemTime.text=a.dCreateDate;this.ItemOne.ItemRemove.text=1==a.boGetMoney?"\u5220\u9664":"\u53d6\u6b3e"}}function e(){e.__super.call(this);this.ItemTwo=new StoreStorageItemUI;this.addChild(this.ItemTwo);this.ItemTwo.ItemBack.on(Laya.Event.CLICK,this,function(){var a=this.dataSource.Item.MakeIndex,b=this.dataSource.Item.s.Name;a&&""!=a&&Sendmessage.SendMoveMyShopItem(a,1,0,b)});this.ItemTwo.ItemRetrieve.on(Laya.Event.CLICK,this,function(){var a=this.dataSource.Item.MakeIndex,b=this.dataSource.Item.s.Name;a&&""!=a&&Sendmessage.SendMoveMyShopItem(a,1,2,b)});this.TwoShowItem=function(a,b){var c=GameUtil.ShowMoneyType(a.btMoneyType),d=GameUtil.ShowbtItemType(a.btItemType);GameUtil.ShowItemNum(a.Item,this.ItemTwo.ItemImg,23.5,18.5);this.ItemTwo.ItemName.text=a.Item.s.Name;this.ItemTwo.ItemPrice.text=a.Item.s.Price+c;this.ItemTwo.ItemType.text=d;this.ItemTwo.ItemTime.text=a.dCreateDate;this.ItemTwo.ItemBack.text="\u653e\u5165\u5e97\u94fa";this.ItemTwo.ItemRetrieve.text="\u53d6\u56de"}}Laya["class"](c,"MyStoreWin",MyStoreUI);b=c.prototype;Laya["class"](a,"ShowBoxZero",Laya.Box);Laya["class"](d,"ShowBoxOne",Laya.Box);Laya["class"](e,"ShowBoxTwo",Laya.Box);b.init=function(){Storetype=0;var a=["\u4e0d\u9650"],b=[];this.box_0.visible=!0;this.box_1.visible=!1;this.box_2.visible=!1;this.box_3.visible=!1;this.box_4.visible=!1;this.startpos=new Laya.Point;this.btn_close.on(Laya.Event.CLICK,this,this.BtnClose);this.btn_information.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_sell.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_sold.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_mydepot.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_diary.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_search.on(Laya.Event.CLICK,this,this.BtnClick);this.img_item.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_add.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_baitan.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_first.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_previous.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_next.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_last.on(Laya.Event.CLICK,this,this.BtnClick);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);this.input_search.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_search.on(Laya.Event.BLUR,this,this.OnBlur);this.price.on(Laya.Event.FOCUS,this,this.OnFocus);this.price.on(Laya.Event.BLUR,this,this.OnBlur);this.price_low.on(Laya.Event.FOCUS,this,this.OnFocus);this.price_low.on(Laya.Event.BLUR,this,this.OnBlur);this.price_high.on(Laya.Event.FOCUS,this,this.OnFocus);this.price_high.on(Laya.Event.BLUR,this,this.OnBlur);Laya.stage.on("show_store_message",this,this.ShowStoreMessage);Laya.stage.on("show_store_selling",this,this.ShowSellingItems);Laya.stage.on("game_showStorePage",this,this.ShowPage);Laya.stage.on("show_store_sold",this,this.ShowSelledItems);Laya.stage.on("show_store_storage",this,this.ShowStorageItems);Laya.stage.on("delete_ItemImage",this,this.DeleteItemImage);for(var c=0;c<g_GameMoneyType.length;c++)g_GameMoneyType[c]&&""!=g_GameMoneyType[c]&&(a.push(g_GameMoneyType[c]),b.push(g_GameMoneyType[c]));this.type.labels=a.toString();this.type.selectedIndex=0;this.type1.labels=b.toString();this.type1.selectedIndex=0;this.ShowBox_0();this.ShowBox_1();this.ShowBox_2()};b.OnFocus=function(){cur_use_app&&(this.img_bg.top=-280)};b.OnBlur=function(){cur_use_app&&(this.img_bg.y=12)};b.ShowBox_0=function(){this.ListItem.repeatX=1;this.ListItem.repeatY=5;this.ListItem.itemRender=a;this.ListItem.selectEnable=!0;this.ListItem.selectHandler=new Laya.Handler(this,this.ZeroSelected);this.ListItem.renderHandler=new Laya.Handler(this,this.ZeroUpdataItem)};b.ShowSellingItems=function(a){this.ListItem.array=a;this.ZeroSelected=-1};b.ZeroSelected=function(a){this.ZeroSelected=a};b.ZeroUpdataItem=function(a,b){-1==this.ZeroSelected&&a.ZeroShowItem(a.dataSource,b);this.ZeroSelected==b?(a.ItemZero.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=24,SelectedStoreItem=a.dataSource.Item,GameUtil.ShowItemNum(SelectedStoreItem,this.img_item,34,34),this.btn_add.label="\u4fee\u6539",AddStoreItem=null,a.dataSource&&GameUtil.NewShowItemsInf(a.dataSource.Item,null,this.img_bg.x)):a.ItemZero.img_bg.skin=""};b.ShowBox_1=function(){this.ListOne.repeatX=1;this.ListOne.repeatY=5;this.ListOne.itemRender=d;this.ListOne.selectEnable=!0;this.ListOne.selectHandler=new Laya.Handler(this,this.OneSelected);this.ListOne.renderHandler=new Laya.Handler(this,this.OneUpDataItem)};b.ShowSelledItems=function(a){this.ListOne.array=a;this.OneSelected=-1};b.OneSelected=function(a){this.OneSelected=a};b.OneUpDataItem=function(a,b){-1==this.OneSelected&&a.OneShowItem(a.dataSource,b);this.OneSelected==b?(a.ItemOne.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=24,a.dataSource&&GameUtil.NewShowItemsInf(a.dataSource.Item,null,this.img_bg.x)):a.ItemOne.img_bg.skin=""};b.ShowBox_2=function(){this.ListTwo.repeatX=1;this.ListTwo.repeatY=5;this.ListTwo.itemRender=e;this.ListTwo.selectEnable=!0;this.ListTwo.selectHandler=new Laya.Handler(this,this.TwoSelected);this.ListTwo.renderHandler=new Laya.Handler(this,this.TwoUpDataItem)};b.ShowStorageItems=function(a){this.ListTwo.array=a;this.TwoSelected=-1};b.TwoSelected=function(a){this.TwoSelected=a};b.TwoUpDataItem=function(a,b){-1==this.TwoSelected&&a.TwoShowItem(a.dataSource,b);this.TwoSelected==b?(a.ItemTwo.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=24,SelectedStoreItem=a.dataSource.Item,GameUtil.ShowItemNum(SelectedStoreItem,this.img_item,34,34),this.btn_add.label="\u4fee\u6539",AddStoreItem=null,a.dataSource&&GameUtil.NewShowItemsInf(a.dataSource.Item,null,this.img_bg.x)):a.ItemTwo.img_bg.skin=""};b.BtnClick=function(a){a=a.target.name;switch(parseInt(a)){case 0:Storetype=0;this.position.selectedIndex=0;this.box_0.visible=!0;this.box_1.visible=!1;this.box_2.visible=!1;this.box_3.visible=!1;this.box_4.visible=!1;this.btn_sell.selected=!0;this.btn_sold.selected=!1;this.btn_mydepot.selected=!1;this.btn_diary.selected=!1;this.btn_information.selected=!1;break;case 1:Storetype=1;this.position.selectedIndex=1;this.box_0.visible=!1;this.box_1.visible=!0;this.box_2.visible=!1;this.box_3.visible=!1;this.box_4.visible=!1;this.btn_sell.selected=!1;this.btn_sold.selected=!0;this.btn_mydepot.selected=!1;this.btn_diary.selected=!1;this.btn_information.selected=!1;break;case 2:Storetype=2;this.position.selectedIndex=2;this.box_0.visible=!1;this.box_1.visible=!1;this.box_2.visible=!0;this.box_3.visible=!1;this.box_4.visible=!1;this.btn_sell.selected=!1;this.btn_sold.selected=!1;this.btn_mydepot.selected=!0;this.btn_diary.selected=!1;this.btn_information.selected=!1;break;case 3:Storetype=-1;this.box_0.visible=!1;this.box_1.visible=!1;this.box_2.visible=!1;this.box_3.visible=!0;this.box_4.visible=!1;this.btn_sell.selected=!1;this.btn_sold.selected=!1;this.btn_mydepot.selected=!1;this.btn_diary.selected=!0;this.btn_information.selected=!1;break;case 4:Storetype=-1,this.box_0.visible=!1,this.box_1.visible=!1,this.box_2.visible=!1,this.box_3.visible=!1,this.box_4.visible=!0,this.btn_information.selected=!0,this.btn_sell.selected=!1,this.btn_sold.selected=!1,this.btn_mydepot.selected=!1,this.btn_diary.selected=!1}switch(a){case "btn_first":0<g_StoreItemIndex[Storetype]&&-1!=Storetype&&Sendmessage.GetMyShopItems(0,Storetype);break;case "btn_previous":0<g_StoreItemIndex[Storetype]&&-1!=Storetype&&Sendmessage.GetMyShopItems(g_StoreItemIndex[Storetype]-5,Storetype);break;case "btn_next":5<g_StoreItemNum[Storetype]-g_StoreItemIndex[Storetype]&&-1!=Storetype&&Sendmessage.GetMyShopItems(g_StoreItemIndex[Storetype]+5,Storetype);break;case "btn_last":5<g_StoreItemNum[Storetype]-g_StoreItemIndex[Storetype]&&-1!=Storetype&&Sendmessage.GetMyShopItems(5*(this.MaxPage-1),Storetype);break;case "btn_search":var b=GameUtil.ShowSelectedIdx(this.type.selectedLabel);a=this.category.selectedIndex;var c=this.sort.selectedIndex,d=parseInt(this.price_low.text),e=parseInt(this.price_high.text),n=this.input_search.text;0==Storetype?Sendmessage.QueryMyShopSellingItems(a,b,c,d,e,n):1==Storetype?Sendmessage.QueryMyShopSelledItems(a,b,c,d,e,n):2==Storetype&&Sendmessage.QueryMyshopStorageItems(a,b,c,d,e,n);break;case "img_item":GameApi.ShowScreen(!0,null,11);break;case "btn_add":b=GameUtil.ShowSelectedIdx(this.type1.selectedLabel);AddStoreItem?(c=AddStoreItem.MakeIndex,d=this.ShopType.selectedIndex,a=this.type2.selectedIndex,e=parseInt(this.price.text),n=AddStoreItem.s.Name,Sendmessage.SendAddToMyShop(c,d,a,b,e,n)):SelectedStoreItem&&!AddStoreItem&&(c=SelectedStoreItem.MakeIndex,d=this.ShopType.selectedIndex,a=this.type2.selectedIndex,e=parseInt(this.price.text),n=SelectedStoreItem.s.Name,Sendmessage.SendChangeMyShopItem(c,d,a,b,e,n));break;case "btn_baitan":Laya.stage.event("show_alert_dlg",[{ipttype:"string",type:4,txt:"\u8f93\u5165\u5546\u94fa\u4fe1\u606f",callfn:function(a){Sendmessage.SendShopName(a)}}])}this.ListItem.selectedIndex=-1;this.ListOne.selectedIndex=-1;this.ListTwo.selectedIndex=-1};b.ShowPage=function(a,b,c){this.MaxPage=Math.ceil(a/5);this.CurPage=Math.ceil(b/5)+1;0==a&&(this.CurPage=0);switch(c){case 0:this.text_num0.text="\u6b63\u5728\u51fa\u552e"+this.CurPage+"/"+this.MaxPage;break;case 1:this.text_num1.text="\u5df2\u7ecf\u51fa\u552e"+this.CurPage+"/"+this.MaxPage;break;case 2:this.text_num2.text="\u6211\u7684\u4ed3\u5e93"+this.CurPage+"/"+this.MaxPage}};b.ShowStoreMessage=function(a){a&&(this.txt_storeName.text="\u5e97\u94fa\u540d\u79f0\uff1a"+a.sShopName,this.txt_storeTime.text="\u5f00\u4e1a\u65f6\u95f4\uff1a"+a.dCreateDate,this.txt_storeSelling.text="\u6b63\u5728\u51fa\u552e\uff1a"+a.nSellingItemCount,this.txt_storeSelled.text="\u5df2\u7ecf\u51fa\u552e\uff1a"+a.nSelledItemCount,this.txt_storeStorage.text="\u6211\u7684\u4ed3\u5e93\uff1a"+a.nStorageItemCount)};b.DeleteItemImage=function(){this.img_item._childs[0]&&this.img_item.removeChild(this.img_item._childs[0])};b.BtnClose=function(){Laya.stage.off("show_store_message",this.ShowStoreMessage);Laya.stage.off("show_store_selling",this,this.ShowSellingItems);Laya.stage.off("game_showStorePage",this,this.ShowPage);Laya.stage.off("show_store_sold",this,this.ShowSelledItems);Laya.stage.off("show_store_storage",this,this.ShowStorageItems);Laya.stage.off("delete_ItemImage",this,this.DeleteItemImage);this.removeSelf()};b.OnMouseDown=function(a){this.startpos.x=a.stageX;this.startpos.y=a.stageY;this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(a){this.img_bg.x+=a.stageX-this.startpos.x;this.img_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};b.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};return c}(MyStoreUI),NewBag=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(48,48);var b=new Laya.Image;b.width=50;b.height=50;this.addChild(b);var f=new Laya.Image;b.addChild(f);this.MakeIndex=0;this.settxt=function(a,c){if(c<g_BagItemsList.length&&null!=g_BagItemsList[c]&&this.MakeIndex!=g_BagItemsList[c].MakeIndex){this.MakeIndex=g_BagItemsList[c].MakeIndex;GameUtil.loadImg(g_BagItemsList[c].s.Looks,"items",function(a){f.visible=!0;f.skin=a;f.x=b.width/2-f.width/2;f.y=b.height/2-f.height/2;GameUtil.setTxtFixedPos(f,b.width);f._style&&(f.blendMode="overlay");GameUtil.ShowItemeffect(b,g_BagItemsList[c])});var e=b.getChildByName("effect");e&&Animationmodule.removeAni(e)}else if(null==g_BagItemsList[c]){f.visible=!1;this.MakeIndex=0;(e=b.getChildByName("effect"))&&e.removeSelf();var g=b.getChildByName("score");g&&(g_ItemScoreRecord.boStartArrow?Animationmodule.removeAni(g):g.removeSelf())}c<g_BagItemsList.length&&null!=g_BagItemsList[c]&&(e=g_BagItemsList[c].s.StdMode,f.removeChildren(),(17==e||18==e||41==e||40==e||42==e||31==e&&-1!=g_BagItemsList[c].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_BagItemsList[c].s.Reserved&&0<g_BagItemsList[c].Dura?(g=new Laya.Text,g.color="#ffffff",g.align="right",g.width=40,g.text="x"+(g_BagItemsList[c].Dura+1),GameUtil.setCanAddTxtStroke(g),f.addChild(g),GameUtil.setTxtFixedPos(f,b.width)):0==e&&5==g_BagItemsList[c].s.Source&&0<g_BagItemsList[c].Dura&&(g=new Laya.Text,g.color="#ffffff",g.align="right",g.width=40,g.text="x"+g_BagItemsList[c].Dura,GameUtil.setCanAddTxtStroke(g),f.addChild(g),GameUtil.setTxtFixedPos(f,b.width)),g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boBagShow&&((g=b.getChildByName("score"))&&Animationmodule.removeAni(g),(5==e||6==e||10==e||11==e||15==e||16==e||19<=e&&24>=e||26<=e&&30>=e||48==e||53==e||62<=e&&69>=e||78==e||75==e||76==e||77==e||79<=e&&89>=e||178==e)&&GameUtil.scoreComparison(g_BagItemsList[c])&&(g=b.getChildByName("score"),!g&&(e=Animationmodule.playframe(!1,b,"gameres/animation/equipment_comparison/","00000","00003",280,!0,!1)))))&&(e.pos(35,28),e.zOrder=99999,e.name="score");c>GameUtil.MaxBagItems()-1?b.skin="gameres/ui/lock_img.png":b.skin="gameres/ui/img_bag_bg.png";d==c&&c<=GameUtil.MaxBagItems()-1&&(b.skin="gameres/ui/img_bag_bg1.png")}}new Laya.Point(0,0);var d=-1,e=[],g,f=0;Laya["class"](c,"NewBag",NewBagUI);Laya["class"](a,"NewBagRender",Laya.Box);c.prototype.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Bagimg_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Bag_List.repeatX=8;this.Bag_List.repeatY=Math.ceil(GameUtil.LimitMaxBagItems()/this.Bag_List.repeatX);this.Bag_List.spaceX=1;this.Bag_List.spaceY=1;g_ClientConfig.boExtendDB&&(this.Bag_List.vScrollBarSkin="");this.Bag_List.itemRender=a;this.Bag_List.selectEnable=!0;this.Bag_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.but_re.on(Laya.Event.CLICK,this,this.onQueryBag);Laya.stage.on("Show_Bag_Item_ico",this,this.Bag_Refresh);Laya.stage.on("Update_Bag",this,this.UpdateGold);this.startpos=new Laya.Point;this.RandomPOS=!0;for(var b=[],f=0;f<this.Bag_List.repeatX*this.Bag_List.repeatY;f++)b.push(f);this.Bag_List.array=b;for(f=0;f<this.Bag_List._cells.length;f++)this.Bag_List._cells[f].on(Laya.Event.CLICK,this,this.Bag_Listselect);this.customBtn();this.customGold();this.UpdateGold();g_OpenBag=!0};c.prototype.ChangeMoney=function(){Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8bf7\u8f93\u5165\u91d1\u5e01\u6570\u91cf\uff1f",ipttype:"string",callfn:function(a){0<parseInt(a)?Sendmessage.sendDropGold(parseInt(a)):Sendmessage.sendDropGold(0)}}])};c.prototype.customBtn=function(){for(var a=0;a<g_customBtn.length;a++)if(0!=g_customBtn[a].boOpen){var b=new Laya.Button;b.skin="gameres/ui/btn_ok.png";b.stateNum=2;b.label=g_customBtn[a].sName;b.labelColors=Get2RGB(g_customBtn[a].nColor);b.labelSize=g_customBtn[a].nSize;b.width=83;b.height=39;this.Bagimg_bg.addChild(b);b.x=g_customBtn[a].nX;b.y=g_customBtn[a].nY;b.on(Laya.Event.CLICK,this,function(a){Sendmessage.SendQFCMD(a)},[g_customBtn[a].sCmd])}};c.prototype.Bag_Refresh=function(a){this.Bag_List.refresh()};c.prototype.Bag_Listselect=function(a){var b=a.currentTarget._dataSource;a=Laya.Browser.now();if(200>a-f){clearTimeout(g);if(null!=b&&g_BagItemsList[b])if(g_WaitItems.Items=g_BagItemsList[b],b=g_WaitItems.Items.s.StdMode,0==b||1==b||2==b||3==b||211==b||31==b||40==b||49==b||25==b&&"\u795d\u798f\u7f50"==g_WaitItems.Items.s.Name)211!=b&&GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),25==b&&8==g_WaitItems.Items.s.Source?Sendmessage.blessbottle(1,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name):(Sendmessage.sendEat(0,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name),14<g_WaitItems.Items.s.Shape&&25>g_WaitItems.Items.s.Shape&&(g_boxid=g_WaitItems.Items.MakeIndex)),1>=g_WaitItems.Items.Dura&&Laya.stage.event("ShowDrug_Items");else if(41==b)0<g_WaitItems.Items.Dura&&Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u62c6\u5206\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:function(a){0<parseInt(a)&&(GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.blessbottle(parseInt(a),g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name))}}]);else if(4==b)Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u5b66\u4e60 : \u3010 "+g_WaitItems.Items.s.Name+" \u3011 \uff1f",callfn:function(){g_WaitItems.Items&&(GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.sendEat(0,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name))}}]);else{b=GameUtil.GetItemType(g_WaitItems.Items.s);if(52==b){g_WaitItems.Index=b;Sendmessage.sendTakeOnItem(b,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name);return}6==b&&null!=g_UserItemList[6]?null!=g_UserItemList[5]?(b=this.getNposByEquipScoreComparison(g_UserItemList[5],g_UserItemList[6],5,6),b||(b=this.RandomPOS?6:5,this.RandomPOS=!this.RandomPOS)):b=5:7==b&&null!=g_UserItemList[7]?null!=g_UserItemList[8]?(b=this.getNposByEquipScoreComparison(g_UserItemList[7],g_UserItemList[8],7,8),b||(b=this.RandomPOS?7:8,this.RandomPOS=!this.RandomPOS)):b=8:23==b&&null!=g_UserItemList[23]?null!=g_UserItemList[22]?(b=this.RandomPOS?23:22,this.RandomPOS=!this.RandomPOS):b=22:24==b&&null!=g_UserItemList[24]&&(null!=g_UserItemList[25]?(b=this.RandomPOS?24:25,this.RandomPOS=!this.RandomPOS):b=25);g_WaitItems.Index=b;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Sendmessage.TakeOnItem2(g_WaitItems.Items,b);this.Bag_Refresh()}(b=GameUtil.InstanceOfMem(NewItemInfoUI))&&b.close()}else d=b,clearTimeout(g),g=setTimeout(function(){g_DrugButNumber=-1;g_nBagIdx=d;if(null!=g_BagItemsList[g_nBagIdx]){g_OpenIdx=0;g_DrugButNumber=-1;g_SelectIndex=GameUtil.GetItemType(g_BagItemsList[g_nBagIdx].s);if(207==g_SelectIndex||208==g_SelectIndex||209==g_SelectIndex)g_SelectIndex=GameUtil.GetItemTypeEx(g_BagItemsList[g_nBagIdx].s);g_MoveItems.Items=g_BagItemsList[g_nBagIdx];g_MoveItems.Index=-1;GameUtil.NewShowItemsInf(g_MoveItems.Items,null,Laya.stage.width/2)}else GameUtil.NewShowItemsClose();g_ClientConfig.boExtendDB&&g_nBagIdx>GameUtil.MaxBagItems()-1&&g_nBagIdx<GameUtil.LimitMaxBagItems()&&Sendmessage.sendLockedBagSlot()}.bind(this),200),this.Bag_List._selectedIndex=-1;f=a};c.prototype.getNposByEquipScoreComparison=function(a,b,f,c){if(g_ItemScoreRecord.BoOpen)return GameApi.GetItemScore(b)>GameApi.GetItemScore(a)?f:c};c.prototype.customGold=function(){for(var a=0;a<g_gameGold.length;a++)if(0!=g_gameGold[a].boOpen&&g_gameGold[a]&&g_gameGold[a].boOpen&&eval(g_gameGold[a].sVarName)){var b=this.Bagimg_bg.getChildByName("img"+a);b||(b=new Laya.Image,this.Bagimg_bg.addChild(b));b.skin=g_gameGold[a].sShowUI;b.x=g_gameGold[a].nX;b.y=g_gameGold[a].nY;b.name="img"+a;var f=this.Bagimg_bg.getChildByName("kuang"+a);f||(f=new Laya.TextArea,this.Bagimg_bg.addChild(f));f.mouseEnabled=!1;f.bgColor="#1e1a16";f.borderColor="#51462e";f.overflow="visible";f.valign="middle";f.font="SimSun";f.x=b.x+b.width;f.y=b.y;f.width=162;f.height=b.height;f.text=g_gameGold[a].sGoldName+"\uff1a"+eval(g_gameGold[a].sVarName).value;f.fontSize=16;f.align="left";f.color="#f6f1f1";f.name="kuang"+a;f.wordWrap="false";e.push({key:f.name,name:g_gameGold[a].sGoldName,value:eval(g_gameGold[a].sVarName)});if("g_GameCionNum"==g_gameGold[a].sVarName&&b)b.on(Laya.Event.CLICK,this,this.ChangeMoney)}};c.prototype.UpdateGold=function(){for(var a=0;a<e.length;a++){var b=e[a],f=this.Bagimg_bg.getChildByName(b.key);f&&b&&f.name==b.key&&(f.text=b.name+":"+b.value.value)}if(a=ObjectManage.GetAttr(playerID))this.txt_wsize.text="\u8d1f\u91cd\uff1a"+a.Weight+" / "+a.MaxWeight};c.prototype.onQueryBag=function(){Sendmessage.QueryBagItems();CanUserItem=!1};c.prototype.onMouseDown=function(a){this.Bag_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.Bagimg_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Bagimg_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Bagimg_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.Bagimg_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.Bagimg_bg.x+=a.stageX-this.startpos.x;this.Bagimg_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};c.prototype.close=function(){Laya.stage.off("Show_Bag_Item_ico",this,this.Bag_Refresh);Laya.stage.off("Update_Bag",this,this.UpdateGold);g_OpenBag=!1;d=-1;Animationmodule.removeAniname("effect");Animationmodule.removeAniname("score");this.removeSelf()};return c}(NewBagUI),NewHeroBag=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(48,48);var b=new Laya.Image;b.width=50;b.height=50;this.addChild(b);var c=new Laya.Image;b.addChild(c);this.setpos=function(a){c.visible=!0;c.skin=a;c.x=b.width/2-c.width/2;c.y=b.height/2-c.height/2;c._style&&(c.blendMode="overlay")};this.settxt=function(a,h){if(h<g_HeroBagItemsList.length&&null!=g_HeroBagItemsList[h]){if(GameUtil.loadImg(g_HeroBagItemsList[h].s.Looks,"items",this.setpos),GameUtil.ShowItemeffect(b,g_HeroBagItemsList[h]),c.removeChildren(),(17==g_HeroBagItemsList[h].s.StdMode||18==g_HeroBagItemsList[h].s.StdMode||41==g_HeroBagItemsList[h].s.StdMode||40==g_HeroBagItemsList[h].s.StdMode||42==g_HeroBagItemsList[h].s.StdMode||31==g_HeroBagItemsList[h].s.StdMode&&-1!=g_HeroBagItemsList[h].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_HeroBagItemsList[h].s.Reserved&&0<g_HeroBagItemsList[h].Dura){var l=new Laya.Text;l.color="#ffffff";l.align="right";l.width=40;l.text="x"+(g_HeroBagItemsList[h].Dura+1);l.pos(-5,20);c.addChild(l)}}else c.visible=!1,(l=b.getChildByName("effect"))&&l.removeSelf();h>g_HeroBagNum-1?b.skin="gameres/ui/lock_img.png":b.skin="gameres/ui/img_bag_bg.png";d==h&&h<=g_HeroBagNum-1&&(b.skin="gameres/ui/img_bag_bg1.png")}}new Laya.Point(0,0);var d=-1;Laya["class"](c,"NewHeroBag",NewHeroBagUI);Laya["class"](a,"NewHeroBagRender",Laya.Box);c.prototype.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.init=function(){g_OpenHeroBag=!0;this.but_Close.on(Laya.Event.CLICK,this,this.close);this.item_bg.ItemsList=[];this.HeroBag_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.HeroBag_List.repeatX=5;this.HeroBag_List.repeatY=10;this.HeroBag_List.spaceX=1;this.HeroBag_List.spaceY=1;this.HeroBag_List.vScrollBarSkin="";this.HeroBag_List.itemRender=a;this.HeroBag_List.selectEnable=!0;this.HeroBag_List.selectHandler=new Laya.Handler(this,this.HeroBag_Listselect);this.HeroBag_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.but_re.on(Laya.Event.CLICK,this,this.onQueryHeroBag);Laya.stage.on("Show_HeroBag_Item_ico",this,this.HeroBag_Refresh);this.startpos=new Laya.Point;for(var b=[],c=0;48>c;c++)b.push(c);this.HeroBag_List.array=b;g_OpenHeroBag=!0};c.prototype.HeroBag_Refresh=function(a){this.HeroBag_List.refresh()};c.prototype.HeroBag_Listselect=function(a){d=a;g_DrugButNumber=-1;g_nBagIdx=d;null!=g_HeroBagItemsList[g_nBagIdx]?(g_OpenIdx=14,g_SelectIndex=GameUtil.GetItemType(g_HeroBagItemsList[g_nBagIdx].s),g_MoveItems.Items=g_HeroBagItemsList[g_nBagIdx],g_MoveItems.Index=-1,GameUtil.NewShowItemsInf(g_MoveItems.Items)):GameUtil.NewShowItemsClose();this.HeroBag_List._selectedIndex=-1};c.prototype.onQueryHeroBag=function(){Sendmessage.QueryHeroBagItems()};c.prototype.onMouseDown=function(a){this.HeroBag_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.HeroBag_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.HeroBag_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.HeroBag_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.HeroBag_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.HeroBag_bg.x+=a.stageX-this.startpos.x;this.HeroBag_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};c.prototype.close=function(){Laya.stage.off("Show_HeroBag_Item_ico",this,this.HeroBag_Refresh);g_OpenHeroBag=!1;d=-1;this.removeSelf()};return c}(NewHeroBagUI),NewItemInfo=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(260,50);this.settxt=function(a,b){}}var d=new Laya.Point(0,0),e=[],g="",f=!0;Laya["class"](c,"NewItemInfo",NewItemInfoUI);Laya["class"](a,"ItemsRender",Laya.Box);c.prototype.line_feed=function(a){for(var b=0;b<a.length;b++){var f=a[b];if(f)if(f.name&&"desc"==f.name&&f.str)this.makeDescStr(f.str);else if(f.name&&"custom"==f.name&&f.obj)this.makeCunstomAttr(f.obj);else if(-1!=f.indexOf("\u2605")||-1!=f.indexOf("\u25cf"))this.makeStar(f);else{var c=new Laya.Box;c.height=20;c.width=260;var d=new Laya.Label,f=f.split("/*/");d.fontSize=18;d.width=260;d.wordWrap=!0;d.text=f[0];0==d.text.indexOf("\u88c5\u5907\u8bc4\u5206:")?d.color="#00ff00":d.color=f[1];c.addChild(d);this.m_List.addChild(c)}}};c.prototype.makeStar=function(a){var b=new Laya.Box;b.height=20;b.width=260;for(var f=0;f<a.length;f++){var c=new Laya.Image;"\u2605"==a[f]?c.skin="gameres/ui/star10.png":"\u25cf"==a[f]&&(c.skin="gameres/ui/star1.png");c.x=20*f;b.addChild(c)}this.m_List.addChild(b)};c.prototype.makeCunstomAttr=function(a){if(""!=a.sTitle&&"\u81ea\u5b9a\u4e49\u5c5e\u6027"!=a.sTitle){var b=new Laya.Box;b.height=20;b.width=260;var f=new Laya.Label;f.fontSize=18;f.text=a.sTitle;f.color=Get2RGB(a.nColor);b.addChild(f);this.m_List.addChild(b)}for(var c=[],f=[],d=0;d<CUSTOMITEMABIL_LEN;d++)0<a.arrAbilValue[d]&&0!=a.arrAbilType[d]&&(b=new Laya.Label,b.fontSize=18,b.text=g_customItemAttr.CustomItemAttr[a.arrAbilType[d]-1]+a.arrAbilValue[d]+(0==a.arrAbilMethod[d]?"":"%"),b.color=Get2RGB(a.arrAbilColor[d]),b.line=a.arrAbilLine[d],c.push(b));c.sort(function(a,b){return a.line-b.line});c=this.mergeLine(c);for(d=0;d<c.length;d++){b=new Laya.Box;b.height=20;b.width=260;for(var e=0,g=0;g<c[d].txt.length;g++)b.addChild(c[d].txt[g]),c[d].txt[g].x=e,e+=c[d].txt[g].width+5;this.m_List.addChild(b)}for(d=0;d<CUSTOMITEMPROGRESSBAR_LEN;d++)b={},b.caption=a.arrPrgbarCaption[d],b.color=a.arrPrgbarColor[d],b.enabled=a.arrPrgbarEnabled[d],b.img=a.arrPrgbarImg[d],b.level=a.arrPrgbarLevel[d],b.showmode=a.arrPrgbarShowMode[d],b.valuecur=a.arrPrgbarValueCur[d],b.valuemax=a.arrPrgbarValueMax[d],f.push(b);this.makeCustomBar(f)};c.prototype.makeCustomBar=function(a){for(var b=0;b<a.length;b++){var f=a[b];if(0!=f.enabled){var c=new Laya.Box;c.height=40;c.width=260;var d=f.valuecur/f.valuemax*100+"%",e=f.caption.replace(/%p/g,f.valuecur),g=new Laya.Label;g.fontSize=18;g.color=Get2RGB(f.color);e=e.replace(/%m/g,f.valuemax);e=e.replace(/%R/g,d);g.text=e;g.overflow="hidden";c.addChild(g);e=new Laya.Image;e.skin=1==b?"gameres/ui/00020.png":"gameres/ui/00000.png";e.y=20;0<f.img&&10>f.img?(g=new Laya.Image,g.skin="gameres/animation/bar/"+GameUtil.getprefixname(f.img+20*b,6)+".png",e.addChild(g)):9<f.img&&20>f.img&&(g=Animationmodule.playframe(!0,e,"gameres/animation/bar/",20*b+1,f.img+20*b,100,!0),e.addChild(g),g.zOrder=0);g=new Laya.Image;g.skin="gameres/animation/bar/hide"+b+".png";g.right=0;g.scaleX=1-f.valuecur/f.valuemax;e.addChild(g);2!=f.showmode&&(g=new Laya.Label,g.fontSize=10,g.color="#ffffff",1==f.showmode?g.text=d:0==f.showmode&&(g.text=f.valuecur+"/"+f.valuemax),e.addChild(g),g.centerX=.5,g.zOrder=1);c.addChild(e);this.m_List.addChild(c)}}};c.prototype.mergeLine=function(a){for(var b=[],f=[],c=0;c<a.length;c++)if(-1==b.indexOf(a[c].line))f.push({line:a[c].line,txt:[a[c]]}),b.push(a[c].line);else for(var d=0;d<f.length;d++)if(f[d].line==a[c].line){f[d].txt.push(a[c]);break}return f};c.prototype.makeDescStr=function(a){a=a.split("\\");for(var b=0;b<a.length;b++){var f=a[b],c=[];-1!=f.indexOf("\x3e")?(f=f.split("\x3e"),this.makeSliece(f,c)):c.push(f);(f=this.makeDescBox(c))&&this.m_List.addChild(f)}};c.prototype.makeSliece=function(a,b){for(var f=0;f<a.length;f++)for(var c=a[f].split("\x3c"),d=0;d<c.length;d++)b.push(c[d]);return b};c.prototype.makeDescBox=function(a){if(a){var b=new Laya.Box;b.height=20;b.width=260;for(var f=new Laya.Point(0,0),c=0;c<a.length;c++)if(-1==a[c].indexOf(":")||-1==a[c].toUpperCase().indexOf("PLAYIMG")&&-1==a[c].toUpperCase().indexOf("IMG"))if(-1!=a[c].indexOf("-/"))var d="#ffffff",f=this.makeDescTxt("\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014",d,f,b);else if(-1!=a[c].indexOf("/"))for(var e=a[c].split("/"),d="#ffffff",g=0;g<e.length;g+=2)""!=e[g+1]&&(""!=e[g].trim()&&(d=Get2RGB(e[g])),f=this.makeDescTxt(e[g+1],d,f,b));else""!=a[c]&&("-"==a[c]&&(a[c]="--------------------------------------"),f=this.makeDescTxt(a[c],"#ffffff",f,b));else-1!=a[c].toUpperCase().indexOf("PLAYIMG")?(f=GameMission.LineText_PLAYIMG(a[c],f,b,!0),20<f.y&&(b.height=f.y)):-1!=a[c].toUpperCase().indexOf("IMGEX")?(f=GameMission.LineText_IMGEX(a[c],f,b,!0),20<f.y&&(b.height=f.y)):-1!=a[c].toUpperCase().indexOf("IMG")&&(f=GameMission.LineText_IMG(a[c],f,b,!0),20<f.y&&(b.height=f.y));return 0<b._childs.length?b:null}};c.prototype.makeDescTxt=function(a,b,f,c){var d=new Laya.Label;d.fontSize=18;d.text=a;d.color=b;c.addChild(d);d.x=f.x;f.x+=d.width;return f};c.prototype.loadImg=function(a,b){if(a&&a.str)if(GameMission.LoadIngimage(a.str,null,!0),0<g_ItemImg.length){var f=this;GameUtil.loadImgEx(g_ItemImg,function(){f.ShowList(b)})}else this.ShowList(b)};c.prototype.ShowList=function(a){this.m_List.vScrollBarSkin="gameres/ui/vscroll.png";this.m_List.removeChildren();this.line_feed(a);if(this.m_List._childs[0]){a=this.m_List._childs[0];var b=5;this.Item_bg.height=22*a._childs.length+200;for(var f=0;f<a._childs.length;f++){var c=a._childs[f];c.y=b;b+=c.height+5}}280>this.Item_bg.height&&(this.Item_bg.height=280);520<this.Item_bg.height&&(this.Item_bg.height=520);this.m_List.height=this.Item_bg.height-135};c.prototype.ShowInfo=function(a,b,f,c){this.img_logo.removeChildren();this.img_logo.skin="gameres/ui/img_bag_bg.png";this.img_logo.width=50;this.img_logo.height=50;this.img_logo.pos(2,2);var d=new Laya.Image;d.skin=b;d.pos(25-d.width/2,25-d.height/2);"comparison1"==this.name&&c?GameUtil.ShowItemeffect(this.img_logo,c):null!=g_MoveItems.Items&&GameUtil.ShowItemeffect(this.img_logo,g_MoveItems.Items);d._style&&(d.blendMode="overlay");this.wear_txt.visible=c&&GameUtil.GetUserItems(c.MakeIndex)?!0:!1;this.img_logo.addChild(d);b=a[0].split("/*/");c=new Laya.Label;c.fontSize=18;c.color=5==g_OpenIdx?"#ffff00":b[1];c.text=b[0];c.width=185;c.wordWrap=!0;c.pos(51,6);this.img_logo.addChild(c);a.splice(0,1);d=!0;for(c=0;c<a.length;c++)a[c].name&&"desc"==a[c].name&&a[c].str&&(-1!=a[c].str.toUpperCase().indexOf("IMG")||-1!=a[c].str.toUpperCase().indexOf("PLAYIMG"))&&(d=!1,this.loadImg(a[c],a));d&&this.ShowList(a);this.GetShowType(b[0]);this.ItemDescTop.text="";if(g_ItemDescTop)for(a=g_ItemDescTop.split("\r\n"),c=0;c<a.length;c++){var e=a[c].split("\x3d");e[0]&&e[1]&&e[0]==b[0]&&-1!=e[1].indexOf("|")&&0==e[1].indexOf("{")&&e[1].indexOf("}")==e[1].length-1&&(d=e[1].substring(1,e[1].indexOf("|")),e=e[1].substring(e[1].indexOf("|")+1,e[1].indexOf("}")),this.ItemDescTop.text=d,this.ItemDescTop.color=Get2RGB(e))}f&&(this.Item_bg.x=0,0<f-this.Item_bg.width&&10<Math.abs(f-this.Item_bg.x-this.Item_bg.width)&&(this.Item_bg.x=f-this.Item_bg.width+10))};c.prototype.init=function(){e=[];this.but_Close.on(Laya.Event.CLICK,this,this.close);this.wear_txt.visible=!1;this.zOrder=9999;this.Item_bg.ItemsList=[];this.Item_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.shop_minus.on(Laya.Event.CLICK,this,this.onShopNumChange,[-1]);this.shop_plus.on(Laya.Event.CLICK,this,this.onShopNumChange,[1]);this.change_side.on(Laya.Event.CLICK,this,this.changeSide);this.ShopNum.on(Laya.Event.INPUT,this,this.onShopNumChange);this.GetShowType()};c.prototype.OnInput=function(){""===this.ShopNum.text&&(this.ShopNum.text="1");this.onShopNumChange()};c.prototype.OnFocus=function(){cur_use_app&&(this.Item_bg.top=-50)};c.prototype.OnBlur=function(){cur_use_app&&(this.Item_bg.y=50)};c.prototype.onShopNumChange=function(a){g=parseInt(this.ShopNum.text);if(1==a||-1==a)g+=a,this.ShopNum.text=g;1>this.ShopNum.text&&(g=0,this.ShopNum.text=0);for(var b=a=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]||(a+=1);var b=ObjectManage.GetAttr(playerID),f=1,f=Math.floor((b.MaxWeight-b.Weight)/g_MoveItems.Items.s.Weight);(17==g_MoveItems.Items.s.StdMode||18==g_MoveItems.Items.s.StdMode||41==g_MoveItems.Items.s.StdMode||40==g_MoveItems.Items.s.StdMode||42==g_MoveItems.Items.s.StdMode||31==g_MoveItems.Items.s.StdMode&&-1!=g_MoveItems.Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MoveItems.Items.s.Reserved&&0<g_MoveItems.Items.Dura||0==g_MoveItems.Items.s.StdMode&&5==g_MoveItems.Items.s.Source&&0<g_MoveItems.Items.Dura||(0!=g_MoveItems.Items.s.Weight?f>a?g>a&&(g=a):g>f&&(g=f):g>a&&(g=a),0==a&&(g=1));0>g&&(g=1);this.ShopNum.text=g;this.ShopPic.text=g*g_MoveItems.Items.s.Price};c.prototype.GetShowType=function(a){this.but_bg.removeChildren();if(5!=g_OpenIdx){if(null!=g_MoveItems.Items&&null!=g_MoveItems.Items.s){e=[];if(0==g_OpenIdx||3==g_OpenIdx){var b=g_MoveItems.Items.s.StdMode;0==b||1==b||2==b||3==b?(e.push("\u4f7f\u7528"),0==b&&5==g_MoveItems.Items.s.Source&&0<g_MoveItems.Items.DuraMax&&(e.push("\u53e0\u52a0"),e.push("\u62c6\u5206")),"\u4fee\u590d\u795e\u6c34"!=g_MoveItems.Items.s.Name&&e.push("\u5e03\u7f6e")):211==b||31==b?e.push("\u4f7f\u7528"):4==b?e.push("\u5b66\u4e60"):(17==b||18==b||40==b||41==b||42==b)&&0<g_MoveItems.Items.s.Reserved?(0<g_MoveItems.Items.Dura&&e.push("\u62c6\u5206"),e.push("\u53e0\u52a0")):40==b||41==b||49==b?e.push("\u4f7f\u7528"):25==b&&"\u795d\u798f\u7f50"==g_MoveItems.Items.s.Name?(e.push("\u4f7f\u7528"),e.push("\u88c5\u5907")):43!=b&&e.push("\u88c5\u5907");g_OpenStore&&3!=g_OpenIdx&&(e=[],e.push("\u5b58\u5230\u4ed3\u5e93"));g_OpenHeroBag&&3!=g_OpenIdx&&(e=[],e.push("\u8f6c\u7ed9\u82f1\u96c4"))}else 1==g_OpenIdx||18==g_OpenIdx||20==g_OpenIdx?e.push("\u5378\u4e0b"):15==g_OpenIdx?e.push("\u82f1\u96c4\u5378\u4e0b"):2==g_OpenIdx&&e.push("\u53d6\u56de\u80cc\u5305");4==g_OpenIdx?(e.push("\u8d2d\u4e70"),this.ShopTextNum.visible=!this.wear_txt.visible,this.ShopNum.visible=!this.wear_txt.visible,this.ShopTextPic.visible=!this.wear_txt.visible,this.ShopPic.visible=!this.wear_txt.visible,this.m_List.height-=60,this.m_List.vScrollBarSkin="gameres/ui/vscroll.png",g=this.ShopNum.text=1,this.ShopPic.text=parseInt(this.ShopNum.text)*g_MoveItems.Items.s.Price):14==g_OpenIdx?(b=g_MoveItems.Items.s.StdMode,0==b||1==b||2==b||3==b||31==b?e.push("\u82f1\u96c4\u4f7f\u7528"):(17==b||18==b||40==b||41==b||42==b)&&0<g_MoveItems.Items.s.Reserved?(0<g_MoveItems.Items.Dura&&e.push("\u82f1\u96c4\u62c6\u5206"),e.push("\u82f1\u96c4\u53e0\u52a0")):4==b?e.push("\u82f1\u96c4\u5b66\u4e60"):40==b&&41==b&&49==b&&31==b&&211==b&&25==b||e.push("\u82f1\u96c4\u88c5\u5907"),g_OpenBag&&(e=[],e.push("\u8f6c\u56de\u4e3b\u4eba"))):4!=g_OpenIdx&&(this.ShopTextNum.visible=!1,this.ShopNum.visible=!1,this.ShopTextPic.visible=!1,this.ShopPic.visible=!1);6==g_OpenIdx&&"\u4fee\u590d\u795e\u6c34"!=g_MoveItems.Items.s.Name?e.push("\u5e03\u7f6e\u836f\u54c1"):7==g_OpenIdx?e.push("\u786e\u5b9a"):8==g_OpenIdx?e.push("\u4fee\u7406"):9==g_OpenIdx?e.push("\u51fa\u552e"):12==g_OpenIdx?e.push("\u53d6\u56de\u7269\u54c1"):13==g_OpenIdx?e.push("\u4e0a\u4ea4"):g_OpenMyShop&&1!=g_OpenIdx&&3!=g_OpenIdx&&2!=g_OpenIdx&&16!=g_OpenIdx&&!player_stalls?(e=[],e.push("\u653e\u5165\u6446\u644a")):g_OpenJiaoYi&&1!=g_OpenIdx&&3!=g_OpenIdx&&16!=g_OpenIdx?(e=[],e.push("\u653e\u5165\u4ea4\u6613")):16==g_OpenIdx||17==g_OpenIdx?16==g_OpenIdx&&70<=g_MoveItems.Items.s.StdMode&&74>=g_MoveItems.Items.s.StdMode?e.push("\u88c5\u5907"):17==g_OpenIdx&&e.push("\u53d6\u6d88\u8bbe\u7f6e"):19==g_OpenIdx?e.push("\u786e\u5b9a"):23==g_OpenIdx?e.push("\u653e\u5165\u5546\u5e97"):25==g_OpenIdx?e.push("\u4e0a\u67b6\u62cd\u5356"):26!=g_OpenIdx&&27!=g_OpenIdx&&28!=g_OpenIdx||e.push("\u653e\u5165")}else if(11==g_OpenIdx&&a){e=[];if("\u57fa\u672c\u5251\u672f"==a||"\u653b\u6740\u5251\u672f"==a||"\u7cbe\u795e\u529b\u6218\u6cd5"==a||"\u62a4\u4f53\u795e\u76fe"==a)return;e.push("\u5e03\u7f6e\u6280\u80fd")}this.img_butbg.removeChildren();a=this.img_butbg.visible=!1;if(1<e.length||43==b)for(var f=this.but_bg.width/(e.length+1),b=0;b<e.length;b++){var c=new Laya.Button;c.width=f;c.height=25;c.stateNum=2;c.labelSize=18;c.skin="gameres/ui/btn_ok.png";c.label=e[b];c.labelColors="#D7B581,#D7B581";c.pos(b*f,9);c.on(Laya.Event.CLICK,this,this.but_fun_0_Click);this.but_bg.addChild(c);a=!0}else{if(""==e)return;c=new Laya.Button;c.width=85;c.height=25;c.stateNum=2;c.skin="gameres/ui/btn_ok.png";c.label=e[0];c.labelSize=18;c.labelColors="#D7B581,#D7B581";c.pos(30,9);if(4==g_OpenIdx||2==g_OpenIdx||3==g_OpenIdx||7==g_OpenIdx||6==g_OpenIdx||8==g_OpenIdx||9==g_OpenIdx||11==g_OpenIdx||12==g_OpenIdx||13==g_OpenIdx||16==g_OpenIdx||17==g_OpenIdx)6==g_OpenIdx&&-1!=g_DrugButNumber&&null!=g_DrugItemsList[g_DrugButNumber]&&(c.label="\u66ff\u6362\u836f\u54c1"),c.pos(87,9);c.on(Laya.Event.CLICK,this,this.but_fun_0_Click);this.but_bg.addChild(c)}2!=g_OpenIdx&&3!=g_OpenIdx&&4!=g_OpenIdx&&6!=g_OpenIdx&&7!=g_OpenIdx&&8!=g_OpenIdx&&9!=g_OpenIdx&&10!=g_OpenIdx&&11!=g_OpenIdx&&12!=g_OpenIdx&&13!=g_OpenIdx&&26!=g_OpenIdx&&27!=g_OpenIdx&&28!=g_OpenIdx&&16!=g_OpenIdx&&17!=g_OpenIdx&&18!=g_OpenIdx&&19!=g_OpenIdx&&20!=g_OpenIdx&&23!=g_OpenIdx?(c=new Laya.Button,c.width=85,c.height=25,c.stateNum=2,c.labelSize=18,c.skin="gameres/ui/btn_ok.png",14==g_OpenIdx?(b=g_MoveItems.Items.s.StdMode,c.label=!g_OpenBag||0==b||1==b||2==b||3==b||4==b||31==b||40==b&&41==b&&49==b&&31==b&&211==b&&25==b?"\u82f1\u96c4\u4e22\u5f03":"\u82f1\u96c4\u88c5\u5907"):c.label="\u4e22\u5f03",c.labelColors="#D7B581,#D7B581",g_OpenState&&0!=g_OpenIdx&&14!=g_OpenIdx&&(c.label="\u66ff\u6362"),g_OpenHeroState&&15==g_OpenIdx&&(c.label="\u82f1\u96c4\u66ff\u6362"),c.pos(150,9),1>e.length&&c.pos(93,9),a&&(c.width=f,c.height=25,c.pos(e.length*f,9)),c.on(Laya.Event.CLICK,this,this.but_funClick),this.but_bg.addChild(c)):c.x=(this.but_bg.width-c.width)/2}};c.prototype.but_fun_0_Click=function(a){var b=a.target.label;switch(b){case "\u66f4\u591a":a.target.label="\u9690\u85cf";this.img_butbg.visible=!0;break;case "\u9690\u85cf":a.target.label="\u66f4\u591a";this.img_butbg.visible=!1;break;case "\u4f7f\u7528":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;211!=g_WaitItems.Items.s.StdMode&&GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);25==g_WaitItems.Items.s.StdMode&&8==g_WaitItems.Items.s.Source?Sendmessage.blessbottle(1,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name):Sendmessage.sendEat(0,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name);Laya.stage.event("ShowDrug_Items");this.removeSelf();Laya.stage.removeChildByName("comparison1");14<g_WaitItems.Items.s.Shape&&25>g_WaitItems.Items.s.Shape&&(g_boxid=g_WaitItems.Items.MakeIndex);break;case "\u62c6\u5206":a=function(a){0<parseInt(a)&&(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.blessbottle(parseInt(a),g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name))};Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u62c6\u5206\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:a}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u53e0\u52a0":for(a=0;a<g_BagItemsList.length;a++){if(null!=g_BagItemsList[g_nBagIdx]&&null!=g_BagItemsList[a]&&0<=g_BagItemsList[g_nBagIdx].Dura&&g_BagItemsList[g_nBagIdx].s.Name==g_BagItemsList[a].s.Name&&g_BagItemsList[a].s.IsBind==g_BagItemsList[g_nBagIdx].s.IsBind&&g_BagItemsList[a].MakeIndex!=g_BagItemsList[g_nBagIdx].MakeIndex&&49!=g_BagItemsList[a].Dura&&49!=g_BagItemsList[g_nBagIdx].Dura&&(0==g_BagItemsList[g_nBagIdx].s.StdMode||17==g_BagItemsList[g_nBagIdx].s.StdMode||17==g_BagItemsList[g_nBagIdx].s.StdMode||18==g_BagItemsList[g_nBagIdx].s.StdMode||41==g_BagItemsList[g_nBagIdx].s.StdMode||40==g_BagItemsList[g_nBagIdx].s.StdMode||42==g_BagItemsList[g_nBagIdx].s.StdMode||31==g_BagItemsList[g_nBagIdx].s.StdMode&&-1!=g_BagItemsList[g_nBagIdx].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))){a>g_nBagIdx?(g_WaitItems.index=a,0==g_BagItemsList[g_nBagIdx].s.StdMode?Sendmessage.sendStackDrug(g_BagItemsList[a].MakeIndex,g_BagItemsList[g_nBagIdx].MakeIndex,g_BagItemsList[g_nBagIdx].s.DBName,0):Sendmessage.sendStackThing(g_BagItemsList[a].MakeIndex,g_BagItemsList[g_nBagIdx].MakeIndex,g_BagItemsList[g_nBagIdx].s.DBName,0)):(g_WaitItems.index=g_nBagIdx,0==g_BagItemsList[g_nBagIdx].s.StdMode?Sendmessage.sendStackDrug(g_BagItemsList[g_nBagIdx].MakeIndex,g_BagItemsList[a].MakeIndex,g_BagItemsList[g_nBagIdx].s.DBName,0):Sendmessage.sendStackThing(g_BagItemsList[g_nBagIdx].MakeIndex,g_BagItemsList[a].MakeIndex,g_BagItemsList[g_nBagIdx].s.DBName,0));var c=!0;break}if(c)break}this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u4f7f\u7528":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;211!=g_WaitItems.Items.s.StdMode&&(GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex),--g_HeroBagCount);Sendmessage.heroEat(g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u62c6\u5206":a=function(a){0<parseInt(a)&&(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.blessbottleH(parseInt(a),g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name))};Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u62c6\u5206\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:a}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u53e0\u52a0":for(a=0;a<g_HeroBagItemsList.length;a++){if(null!=g_HeroBagItemsList[a]&&null!=g_HeroBagItemsList[g_nBagIdx]&&0<=g_HeroBagItemsList[a].Dura&&g_HeroBagItemsList[a].s.Name==g_HeroBagItemsList[g_nBagIdx].s.Name&&g_HeroBagItemsList[g_nBagIdx].MakeIndex!=g_HeroBagItemsList[a].MakeIndex&&49!=g_HeroBagItemsList[a].Dura&&49!=g_HeroBagItemsList[g_nBagIdx].Dura&&(17==g_HeroBagItemsList[a].s.StdMode||18==g_HeroBagItemsList[a].s.StdMode||41==g_HeroBagItemsList[a].s.StdMode||40==g_HeroBagItemsList[a].s.StdMode||42==g_HeroBagItemsList[a].s.StdMode||31==g_HeroBagItemsList[a].s.StdMode&&-1!=g_HeroBagItemsList[a].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))){a>g_nBagIdx?(g_WaitItems.index=a,Sendmessage.sendHeroStackThing(g_HeroBagItemsList[a].MakeIndex,g_HeroBagItemsList[g_nBagIdx].MakeIndex,g_HeroBagItemsList[a].s.DBName,0)):(g_WaitItems.index=g_nBagIdx,Sendmessage.sendHeroStackThing(g_HeroBagItemsList[g_nBagIdx].MakeIndex,g_HeroBagItemsList[a].MakeIndex,g_HeroBagItemsList[a].s.DBName,0));c=!0;break}if(c)break}this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u5b66\u4e60":Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u5b66\u4e60 : \u3010 "+g_MoveItems.Items.s.Name+" \u3011 \uff1f",callfn:function(){g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex);--g_HeroBagCount;Sendmessage.heroEat(g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name)}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u5b66\u4e60":Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u5b66\u4e60 : \u3010 "+g_MoveItems.Items.s.Name+" \u3011 \uff1f",callfn:function(){g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;null!=g_WaitItems.Items.MakeIndex&&GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Sendmessage.sendEat(0,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name)}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u88c5\u5907":c=g_SelectIndex;g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;if(52==c){g_WaitItems.Items=g_WaitItems.Items;g_WaitItems.Index=c;Sendmessage.sendTakeOnItem(c,g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name);this.removeSelf();Laya.stage.removeChildByName("comparison1");return}if(0==g_OpenIdx){6==c&&null!=g_UserItemList[6]?null!=g_UserItemList[5]?(c=f?6:5,f=!f):c=5:7==c&&null!=g_UserItemList[7]?null!=g_UserItemList[8]?(c=f?7:8,f=!f):c=8:23==c&&null!=g_UserItemList[23]?null!=g_UserItemList[22]?(c=f?23:22,f=!f):c=22:24==c&&null!=g_UserItemList[24]&&(null!=g_UserItemList[25]?(c=f?24:25,f=!f):c=25);a=GameUtil.InstanceOfMem(ShoushiUI);var d=g_WaitItems.Items.s.StdMode,e=g_WaitItems.Items.s.OverLap;if(a)if(!(15!=d&&19!=d&&20!=d&&21!=d&&22!=d&&23!=d&&24!=d&&26!=d||3!=e&&6!=e&&7!=e))if(0==g_WaitItems.Items.s.Expand1||7==g_WaitItems.Items.s.Expand1)for(a=30;36>a;a++){if(null==g_UserItemList[a]){c=a;break}}else c=30+g_WaitItems.Items.s.Expand1-1;else if(0==g_WaitItems.Items.s.Expand1||7==g_WaitItems.Items.s.Expand1)for(a=30;36>a;a++)if(null==g_UserItemList[a]){c=a;break}}g_WaitItems.Index=c;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Sendmessage.TakeOnItem2(g_WaitItems.Items,c);this.removeSelf();Laya.stage.removeChildByName("comparison1");3==g_OpenIdx&&GameApi.ShowScreen(!1);break;case "\u53d6\u6d88\u8bbe\u7f6e":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;c=GameUtil.GetItemType(g_WaitItems.Items.s);g_WaitItems.Index=c;Sendmessage.TakeOffItem(g_WaitItems.Items,c);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u88c5\u5907":c=g_SelectIndex;g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;14==g_OpenIdx&&(6==c&&null!=g_HeroItemList[6]?null!=g_HeroItemList[5]?(c=f?6:5,f=!f):c=5:7==c&&null!=g_HeroItemList[7]?null!=g_HeroItemList[8]?(c=f?7:8,f=!f):c=8:23==c&&null!=g_HeroItemList[23]?null!=g_HeroItemList[22]?(c=f?23:22,f=!f):c=22:24==c&&null!=g_HeroItemList[24]&&(null!=g_HeroItemList[25]?(c=f?24:25,f=!f):c=25));g_WaitItems.Index=c;GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex);--g_HeroBagCount;Sendmessage.heroTakeOn(g_WaitItems.Items.MakeIndex,c,g_WaitItems.Items.s.Name);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u5378\u4e0b":g_WaitItems.Items=g_MoveItems.Items;g_WaitItems.Index=g_MoveItems.Index;g_MoveItems.Items=null;Sendmessage.TakeOffItem(g_WaitItems.Items,g_MoveItems.Index);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u5378\u4e0b":g_HeroBagNum>g_HeroBagCount?(g_WaitItems.Items=g_MoveItems.Items,g_WaitItems.Index=g_MoveItems.Index,g_MoveItems.Items=null,Sendmessage.HeroTakeOffItem(g_WaitItems.Items,g_WaitItems.Index),g_HeroBagCount+=1):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u82f1\u96c4\u80cc\u5305\u5df2\u6ee1\uff01\uff01\uff01",callfn:function(){}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u53d6\u56de\u80cc\u5305":c=!0;d=ObjectManage.GetAttr(playerID);for(a=0;a<g_BagItemsList.length;a++)g_BagItemsList[a]||(c=!1);if(c){Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]);return}if(d&&0<d.Weight+g_MoveItems.Items.s.Weight-d.MaxWeight){Laya.stage.event("show_log",[{txt:"\u8d1f\u91cd\u8d85\u51fa",color:"#ff0000"}]);return}g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;a=1;1!=g_StoreType&&(a=2);Sendmessage.DepotOrBagItems2(g_WaitItems.Items.MakeIndex,a);g_boOpenCaiji&&(g_WaitItems.Items.s.IsBind?g_LogSocket.AddGameDataLog(0,g_WaitItems.Items.s.DBName,g_WaitItems.Items.MakeIndex,"\u5df2\u7ed1\u5b9a\u7269\u54c1",""):g_LogSocket.AddGameDataLog(0,g_WaitItems.Items.s.DBName,g_WaitItems.Items.MakeIndex,"\u975e\u7ed1\u5b9a\u7269\u54c1",""));GameUtil.DelStoreItems(g_WaitItems.Items.MakeIndex);g_WaitItems.Items=null;--g_StoreCount;this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u8f6c\u56de\u4e3b\u4eba":c=!0;for(a=0;a<g_BagItemsList.length;a++)g_BagItemsList[a]||(c=!1);if(c){Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]);return}g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;Sendmessage.heroBagToMasterBag(g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name);GameUtil.AddItemNewBag(g_WaitItems.Items);GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex);g_WaitItems.Items=null;--g_HeroBagCount;this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u5b58\u5230\u4ed3\u5e93":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;a=3;1!=g_StoreType&&(a=4);g_StoreItemList.length<g_StoreMaxCount?(Sendmessage.DepotOrBagItems2(g_WaitItems.Items.MakeIndex,a),g_boOpenCaiji&&(g_WaitItems.Items.s.IsBind?g_LogSocket.AddGameDataLog(1,g_WaitItems.Items.s.DBName,g_WaitItems.Items.MakeIndex,"\u5df2\u7ed1\u5b9a\u7269\u54c1",""):g_LogSocket.AddGameDataLog(1,g_WaitItems.Items.s.DBName,g_WaitItems.Items.MakeIndex,"\u975e\u7ed1\u5b9a\u7269\u54c1","")),GameUtil.AddStoreItems(g_WaitItems.Items),GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_StoreCount+=1):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4ed3\u5e93\u5df2\u6ee1\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5b58\u50a8\uff01\uff01\uff01",callfn:function(){}}]);g_WaitItems.Items=null;this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u8f6c\u7ed9\u82f1\u96c4":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;g_HeroBagNum>g_HeroBagCount?(Sendmessage.masterBagToHeroBag(g_WaitItems.Items.MakeIndex,g_WaitItems.Items.s.Name),GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),GameUtil.HeroAddItem(g_WaitItems.Items),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_HeroBagCount+=1):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u82f1\u96c4\u80cc\u5305\u5df2\u6ee1\uff01\uff01\uff01",callfn:function(){}}]);g_WaitItems.Items=null;this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u5e03\u7f6e":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;g_ScrenIdx=1;GameApi.ShowDrug(!0);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u8d2d\u4e70":c=!0;for(a=0;a<g_BagItemsList.length;a++)g_BagItemsList[a]||(c=!1);if(c){Laya.stage.event("show_log",[{txt:"\u80cc\u5305\u5df2\u6ee1",color:"#ff0000"}]);return}4==g_OpenIdx&&(0==this.ShopNum.text||""==this.ShopNum.text?Laya.stage.event("show_log",[{txt:"\u8d2d\u4e70\u6570\u91cf\u4e0d\u80fd\u4e3a0",color:"#ff0000"}]):(Sendmessage.BuyShopItem(g,g_MoveItems.Items.s.Name),g_MoveItems.Items=null));this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u5e03\u7f6e\u836f\u54c1":case "\u66ff\u6362\u836f\u54c1":if(-1!=g_DrugButNumber){null!=g_DrugItemsList[g_DrugButNumber]&&(g_BagItemsList[g_nBagIdx]=g_DrugItemsList[g_DrugButNumber],g_BagItemsList[g_DrugButNumber]=g_MoveItems.Items);g_DrugItemsList[g_DrugButNumber]=g_MoveItems.Items;g_MoveItems.Items=null;Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("ShowDrug_Items");Laya.stage.event("Drug_Item_ico");Laya.stage.event("Drug_Set_Items",[g_DrugButNumber]);GameApi.ShowScreen(!1);c=[];for(a=0;a<g_DrugItemsList.length;++a)d=g_DrugItemsList[a],null!=d?c.push({looks:d.s.Looks,mode:d.s.StdMode}):c.push({looks:null,mode:null});a=JSON.stringify(c);Laya.LocalStorage.setItem("druglist",a)}this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u4fee\u7406":-1!=G_Show_Item_Price?Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u7ef4\u4fee\uff1f\r\n \u7269\u54c1: \u3010 "+g_MoveItems.Items.s.Name+" \u3011\r\n\u4fee\u7406\u4ef7\u683c\uff1a"+G_Show_Item_Price+" \u91d1\u5e01\u3002",callfn:function(){console.log("sName",b);Sendmessage.sendRepairItem(G_NPC_ID,g_MoveItems.Items.MakeIndex,g_MoveItems.Items.s.Name)}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u7269\u54c1\u65e0\u6cd5\u4fee\u7406\uff01\uff01\uff01",callfn:function(){}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u51fa\u552e":-1!=G_Show_Item_Price&&g_MoveItems&&g_MoveItems.Items?Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u51fa\u552e\uff1f\r\n \u7269\u54c1: \u3010 "+g_MoveItems.Items.s.Name+" \u3011\r\n\u51fa\u552e\u4ef7\u683c\uff1a"+G_Show_Item_Price+" \u91d1\u5e01\u3002",callfn:function(){console.log("sName",b);Sendmessage.sendSellItem(G_NPC_ID,g_MoveItems.Items.MakeIndex,g_MoveItems.Items.s.Name);g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Laya.stage.event("Screen_Del_Items",g_WaitItems.Items.MakeIndex)}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u7269\u54c1\u65e0\u6cd5\u51fa\u552e\uff01\uff01\uff01",callfn:function(){}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u786e\u5b9a":7==g_OpenIdx?(Laya.stage.event("draw_npc_items",g_MoveItems.Items),GameApi.ShowScreen(!1),Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,g_MoveItems.Items.MakeIndex,0),GameUtil.DelBagItems(g_MoveItems.Items.MakeIndex),this.removeSelf(),Laya.stage.removeChildByName("comparison1")):19==g_OpenIdx&&null!=g_MoveItems.Items&&(Sendmessage.SendCMOpenBox(g_MoveItems.Items.MakeIndex,g_MoveItems.Items.s.Name),this.removeSelf(),Laya.stage.removeChildByName("comparison1"));break;case "\u5e03\u7f6e\u6280\u80fd":GameApi.Showskillwin(!0);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u653e\u5165\u6446\u644a":GameApi.ShowMyShopMsg(!0);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u653e\u5165\u4ea4\u6613":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex);Sendmessage.AddTradeItem(g_WaitItems.Items);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u53d6\u56de\u7269\u54c1":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;GameApi.DelJiaoYiItems(g_WaitItems.Items.MakeIndex);Sendmessage.DeleteTradeItem(g_WaitItems.Items);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u4e0a\u4ea4":Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u4f60\u662f\u5426\u786e\u5b9a\u4e0a\u4ea4\u7269\u54c1: \u3010 "+g_MoveItems.Items.s.Name+" \u3011\uff1f",callfn:function(){console.log("sName",b);Sendmessage.sendGiveItem(g_MoveItems.Items,G_NPC_ID);g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);Laya.stage.event("Screen_Del_Items",g_WaitItems.Items.MakeIndex)}}]);this.removeSelf();Laya.stage.removeChildByName("comparison1");GameApi.ShowScreen(!1);break;case "\u653e\u5165\u5546\u5e97":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;var p=GameUtil.InstanceOfMem(MyStoreUI);p&&g_WaitItems.Items&&(GameUtil.loadImg(g_WaitItems.Items.s.Looks,"items",function(a,b){var f=new Laya.Image(a);p.img_item._childs[0]&&p.img_item.removeChild(p.img_item._childs[0]);p.img_item.addChild(f);GameUtil.ShowItemeffect(f,g_WaitItems.Items);if((41==g_WaitItems.Items.s.StdMode||40==g_WaitItems.Items.s.StdMode||31==g_WaitItems.Items.s.StdMode&&-1!=g_WaitItems.Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_WaitItems.Items.s.Reserved&&0<g_WaitItems.Items.Dura){var c=new Laya.Label;c.color="#ffffff";c.fontSize=18;c.text="x"+(g_WaitItems.Items.Dura+1);GameUtil.setCanAddTxtStroke(c);c.align="right";c.width=30;f.addChild(c);GameUtil.setTxtFixedPos(f,p.img_item.width,p.img_item.height)}f.pos(34-f.width/2,34-f.height/2);GameUtil.setTxtFixedPos(f,p.img_item.width,p.img_item.height)}),this.removeSelf(),Laya.stage.removeChildByName("comparison1"),GameApi.ShowScreen(!1),AddStoreItem=g_WaitItems.Items,SelectedStoreItem=null,p.btn_add.label="\u589e\u52a0");break;case "\u4e0a\u67b6\u62cd\u5356":g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;var r=this;g_WaitItems.Items&&(0,a=function(a){Sendmessage.sendTranslateItem(g_WaitItems.Items.MakeIndex,parseInt(a),G_NPC_ID,g_WaitItems.Items.s.Name);GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex);r.removeSelf();Laya.stage.event("Screen_Del_Items",g_WaitItems.Items.MakeIndex)},Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u4e0a\u67b6\u62cd\u5356\u7684\u4ef7\u683c\uff01",ipttype:"string",callfn:a}]));break;case "\u653e\u5165":Laya.stage.event("drawUpgrade",g_MoveItems.Items),GameApi.ShowScreen(!1),GameUtil.DelBagItems(g_MoveItems.Items.MakeIndex),this.removeSelf(),Laya.stage.removeChildByName("comparison1")}Laya.stage.event("Show_Bag_Item_ico")};c.prototype.but_funClick=function(a){switch(a.target.label){case "\u4e22\u5f03":if(null==g_MoveItems.Items)return;(17==g_MoveItems.Items.s.StdMode||18==g_MoveItems.Items.s.StdMode||41==g_MoveItems.Items.s.StdMode||40==g_MoveItems.Items.s.StdMode||42==g_MoveItems.Items.s.StdMode||31==g_MoveItems.Items.s.StdMode&&-1!=g_MoveItems.Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MoveItems.Items.s.Reserved&&0<g_MoveItems.Items.Dura||0==g_MoveItems.Items.s.StdMode&&5==g_MoveItems.Items.s.Source&&0<g_MoveItems.Items.DuraMax?(a=function(a){0<parseInt(a)&&(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.sendDropItem(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,parseInt(a)),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_selfdropitem.push(g_WaitItems.Items.MakeIndex))},Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u4e22\u5f03\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:a}])):(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelBagItems(g_WaitItems.Items.MakeIndex),Sendmessage.sendDropItem(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,1),GameApi.Drugnullforidx(g_WaitItems.Items.MakeIndex),g_selfdropitem.push(g_WaitItems.Items.MakeIndex),Laya.stage.event("ShowDrug_Items"),-1!=g_DrugButNumber&&(a=GameApi.autofillrule(g_WaitItems.Items.s.StdMode,g_WaitItems.Items.s.Looks),0!=a.length&&GameApi.autofillitem(a)));break;case "\u82f1\u96c4\u88c5\u5907":a=g_SelectIndex;g_WaitItems.Items=g_MoveItems.Items;g_MoveItems.Items=null;14==g_OpenIdx&&(6==a&&null!=g_HeroItemList[6]?null!=g_HeroItemList[5]?(a=f?6:5,f=!f):a=5:7==a&&null!=g_HeroItemList[7]?null!=g_HeroItemList[8]?(a=f?7:8,f=!f):a=8:23==a&&null!=g_HeroItemList[23]?null!=g_HeroItemList[22]?(a=f?23:22,f=!f):a=22:24==a&&null!=g_HeroItemList[24]&&(null!=g_HeroItemList[25]?(a=f?24:25,f=!f):a=25));g_WaitItems.Index=a;GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex);--g_HeroBagCount;Sendmessage.heroTakeOn(g_WaitItems.Items.MakeIndex,a,g_WaitItems.Items.s.Name);this.removeSelf();Laya.stage.removeChildByName("comparison1");break;case "\u82f1\u96c4\u4e22\u5f03":if(null==g_MoveItems.Items)return;(17==g_MoveItems.Items.s.StdMode||18==g_MoveItems.Items.s.StdMode||41==g_MoveItems.Items.s.StdMode||40==g_MoveItems.Items.s.StdMode||42==g_MoveItems.Items.s.StdMode||31==g_MoveItems.Items.s.StdMode&&-1!=g_MoveItems.Items.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_MoveItems.Items.s.Reserved&&0<g_MoveItems.Items.Dura||0==g_MoveItems.Items.s.StdMode&&5==g_MoveItems.Items.s.Source&&0<g_MoveItems.Items.DuraMax?(a=function(a){0<parseInt(a)&&(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex),--g_HeroBagCount,Sendmessage.HeroDropItems(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,parseInt(a)))},Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8f93\u5165\u8981\u4e22\u5f03\u7684\u6570\u91cf\uff01",ipttype:"string",callfn:a}])):(g_WaitItems.Items=g_MoveItems.Items,g_MoveItems.Items=null,GameUtil.DelHeroBagItems(g_WaitItems.Items.MakeIndex),--g_HeroBagCount,Sendmessage.HeroDropItems(g_WaitItems.Items.s.Name,g_WaitItems.Items.MakeIndex,1));break;case "\u66ff\u6362":a=GameUtil.GetItemType(g_MoveItems.Items.s);GameApi.ShowScreen(!0,a,1);break;case "\u82f1\u96c4\u66ff\u6362":a=GameUtil.GetItemType(g_MoveItems.Items.s),GameApi.ShowScreen(!0,a,7)}this.removeSelf();Laya.stage.removeChildByName("comparison1");this.removeSelf();Laya.stage.removeChildByName("comparison1")};c.prototype.onMouseDown=function(a){this.m_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(d.x=a.stageX,d.y=a.stageY,this.Item_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Item_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Item_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.Item_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.Item_bg.x+=a.stageX-d.x;this.Item_bg.y+=a.stageY-d.y;d.x=a.stageX;d.y=a.stageY};c.prototype.changeSide=function(){if(this.change_item){var a=GameUtil.GetItemInfo(this.change_item,this.change_type);if(70<=this.change_item.s.StdMode&&74>=this.change_item.s.StdMode)if(0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length)var b=GameMission.GetPakSing(g_ClientConfig.nShowUserIcon),f=(Array(5).join("0")+(0+(this.change_item.s.Looks+1))).slice(-5),c=b+f+".png";else c=GameUtil.ParseNameFormat(this.change_item.s.Looks);else c=GameUtil.ParseNameFormat(this.change_item.s.Looks);this.item=this.change_item;switch(this.change_idx){case 5:this.change_item=g_UserItemList[6];this.change_idx=6;break;case 6:this.change_item=g_UserItemList[5];this.change_idx=5;break;case 7:this.change_item=g_UserItemList[8];this.change_idx=8;break;case 8:this.change_item=g_UserItemList[7],this.change_idx=7}var d=Laya.stage.getChildByName("comparison");if(d&&d.item&&this.item){var e=GameApi.GetItemScore(this.item),b=GameApi.GetItemScore(d.item);if(b==e||!e&&0!=e){if(d.gradeColor=!0,e||0==e)this.gradeColor=!0}else b>e?(d.gradeColor=!0,this.gradeColor=!1):b<e&&(d.gradeColor=!1,this.gradeColor=!0);e=GameUtil.GetItemInfo(d.item,this.change_type);70<=d.item.s.StdMode&&74>=d.item.s.StdMode?0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?(b=GameMission.GetPakSing(g_ClientConfig.nShowUserIcon),f=(Array(5).join("0")+(0+(d.item.s.Looks+1))).slice(-5),b=b+f+".png"):b=GameUtil.ParseNameFormat(d.item.s.Looks):b=GameUtil.ParseNameFormat(d.item.s.Looks);d.ShowInfo(e,b,this.change_x);this.ShowInfo(a,c,this.change_x)}}};c.prototype.close=function(){this.removeSelf();Laya.stage.removeChildByName("comparison1")};return c}(NewItemInfoUI),NewNpcShop=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(400,30);this.settxt=function(a,b){this.removeChildren();var f=new Laya.Text;f.color="#ffffff";f.fontSize=18;f.text=a.name;this.addChild(f);var c=new Laya.Text;c.color="#ffffff";c.fontSize=18;c.text=a.gprice;c.pos(f.x+200,f.y);this.addChild(c);if(1<=parseInt(a.gsub)){var d=new Laya.Image;d.skin="gameres/png/npcxz2.png";d.pos(c.x+80,f.y-3);this.addChild(d)}g==b&&(d=new Laya.Image,d.skin="gameres/png/npcxz.png",d.pos(0,-5),this.addChild(d))}}function d(){d.__super.call(this);this.size(48,48);this.settxt=function(a,b){this.removeChildren();var c=new Laya.Image;c.width=50;c.height=50;c.skin="gameres/ui/img_bag_bg.png";45<b?c.skin="gameres/ui/lock_img.png":f==b&&(c.skin="gameres/ui/img_bag_bg1.png");this.addChild(c);if(b<g_ItemMemuListInf.length&&null!=g_ItemMemuListInf[b]){var d=new Laya.Image;GameUtil.loadImg(g_ItemMemuListInf[b].s.Looks,"items",function(a){d.skin=a;d.pos(24-d.width/2,24-d.height/2)});c.addChild(d);GameUtil.ShowItemeffect(c,g_ItemMemuListInf[b])}}}var e=new Laya.Point(0,0),g=-1,f=-1;Laya["class"](c,"NewNpcShop",NewNpcShopUI);Laya["class"](a,"NewNpcRender",Laya.Box);Laya["class"](d,"NewNpcRender2",Laya.Box);c.prototype.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.M_Listtselect=function(a){G_npcShopPage=0;g=a;f=-1;a<g_ItemMemuList.length&&(null!=g_ItemMemuList[g]&&1<=parseInt(g_ItemMemuList[g].gsub)?(Sendmessage.sendGetDetailItem(g_ItemMemuList[g],G_npcShopPage),this.inf_bg.visible=!0):this.inf_bg.visible=!1);this.M_List._selectedIndex=-1};c.prototype.changePage=function(a){null!=g_ItemMemuList[g]&&1<=parseInt(g_ItemMemuList[g].gsub)?0>G_npcShopPage+a||(Sendmessage.sendGetDetailItem(g_ItemMemuList[g],G_npcShopPage+a),this.inf_bg.visible=!0):this.inf_bg.visible=!1};c.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.NpcShop_bg.skin="gameres/png/npcitems.png";this.Npc_BuyBj.visible=g_show_Npcbj;this.NpcShop_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.NpcShop_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.NpcShop_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.NpcShop_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.pageup.on(Laya.Event.CLICK,this,this.changePage,[-10]);this.pagedown.on(Laya.Event.CLICK,this,this.changePage,[10]);this.M_List.repeatX=1;this.M_List.repeatY=10;this.M_List.vScrollBarSkin="gameres/ui/vscroll.png";this.M_List.itemRender=a;this.M_List.selectEnable=!0;this.M_List.selectHandler=new Laya.Handler(this,this.M_Listtselect);this.M_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.M_List.array=g_ItemMemuList;this.M_List2.repeatX=2;this.M_List2.repeatY=5;this.M_List2.spaceX=1;this.M_List2.spaceY=1;this.M_List2.itemRender=d;this.M_List2.selectEnable=!0;this.M_List2.selectHandler=new Laya.Handler(this,this.M_Listtselect2);this.M_List2.renderHandler=new Laya.Handler(this,this.UpdateItem2);for(var b=[],c=0;20>c;c++)b.push(c);this.M_List2.array=b;this.inf_Close.on(Laya.Event.CLICK,this,this.oninf_Close);Laya.stage.on("Update_Npc_Items2",this,this.ShowItem2);Laya.stage.on("npc_shop_BUYITEM_SUCCESS",this,this.BUYITEM_SUCCESS);f=g=-1;this.Npc_Buy.on(Laya.Event.CLICK,this,this.onNpc_Buy);this.Npc_BuyBj.on(Laya.Event.CLICK,this,this.onNpc_Buy);this.Npc_Repair.on(Laya.Event.CLICK,this,this.onNpc_Buy);this.Npc_Repair2.on(Laya.Event.CLICK,this,this.onNpc_Buy);this.Npc_Sell.on(Laya.Event.CLICK,this,this.onNpc_Buy)};c.prototype.onNpc_Buy=function(a){switch(a.target.name){case "2":GameApi.ShowScreen(!0,0,5);break;case "3":null!=g_ItemMemuList[g]&&(1<=parseInt(g_ItemMemuList[g].gsub)?null!=g_ItemMemuListInf[f]&&Sendmessage.SendButItemFormInfo(g_ItemMemuListInf[f]):Sendmessage.sendBuyItem(g_ItemMemuList[g]));break;case "4":null!=g_ItemMemuList[g]&&(1<=parseInt(g_ItemMemuList[g].gsub)?null!=g_ItemMemuListInf[f]&&Sendmessage.SendButBindItemFormInfo(g_ItemMemuListInf[f]):Sendmessage.sendBindBuyItem(g_ItemMemuList[g]))}};c.prototype.BUYITEM_SUCCESS=function(){g_ItemMemuListInf[f]=null;this.ShowItem2()};c.prototype.ShowItem2=function(){this.pageNum.text=G_npcShopPage/10+1;this.M_List2.array=g_ItemMemuListInf;this.M_List2.refresh()};c.prototype.UpdateItem2=function(a,b){a.settxt(a.dataSource,b)};c.prototype.M_Listtselect2=function(a){f=a;g_OpenIdx=10;g_MoveItems.Index=-11;g_MoveItems.Items=g_ItemMemuListInf[a];GameUtil.NewShowItemsInf(g_MoveItems.Items,null,615);this.M_List2._selectedIndex=-1};c.prototype.oninf_Close=function(){this.inf_bg.visible=!1};c.prototype.onMouseDown=function(){if(!this.win_gb.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.NpcShop_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var a=this.NpcShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));e.x=a.x;e.y=a.y;this.bgCanMove=!0}};c.prototype.onMouseUp=function(){this.bgCanMove=!1};c.prototype.onMouseMove=function(){if(!this.win_gb.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.NpcShop_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.bgCanMove){var a=this.NpcShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.NpcShop_bg.x+=a.x-e.x;this.NpcShop_bg.y+=a.y-e.y}};c.prototype.close=function(){Laya.stage.off("Update_Npc_Items2",this,this.ShowItem2);Laya.stage.off("npc_shop_BUYITEM_SUCCESS",this,this.BUYITEM_SUCCESS);this.removeSelf()};return c}(NewNpcShopUI),NewNpcWin=function(b){function c(){c.__super.call(this);this.init()}new Laya.Point(0,0);Laya["class"](c,"NewNpcWin",NewNpcWinUI);c.prototype.init=function(){this.closeOffestY=this.closeOffestX=30;this.panelPos=[];Laya.stage.on("Show_NewNpc",this,this.LoadIngimage);Laya.stage.on("Change_bg",this,this.changedialog);Laya.stage.on("close",this,this.close);Laya.stage.on("Change_pos",this,this.Change_pos);this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Npc_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Npc_bg.pos(browser_width/2-this.Npc_bg.width/2,browser_height/2-this.Npc_bg.height/2);this.startpos=new Laya.Point;this.posType=4;this.nWindowsY=this.nWindowsX=0;this.bShowClose=1};c.prototype.Change_pos=function(a,b,c,g){this.posType=a;this.nWindowsX=b;this.nWindowsY=c;this.bShowClose=g;this.SetPos()};c.prototype.onMouseDown=function(a){if(a.touches&&2==a.touches.length){var b=a.touches[0].stageX-a.touches[1].stageX,c=a.touches[0].stageY-a.touches[1].stageY;this.movedis=Math.sqrt(b*b+c*c)}this.startpos.x=a.stageX;this.startpos.y=a.stageY;this.Npc_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.Npc_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.Npc_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);(a=Laya.stage.getChildByName("yangdaweigood"))&&a.removeSelf()};c.prototype.onMouseUp=function(){this.Npc_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){if(g_npcCanMove)if(a.touches&&2==a.touches.length){var b=parseInt(a.touches[0].stageX-a.touches[1].stageX);a=parseInt(a.touches[0].stageY-a.touches[1].stageY);b=Math.sqrt(b*b+a*a);a=this.Npc_bg.scaleX+.01*(b-this.movedis);a<this.Npc_bg.width/this.Npc_bg.width&&(a=this.Npc_bg.width/this.Npc_bg.width);a>870/this.Npc_bg.width&&(a=870/this.Npc_bg.width);var c=this.Npc_bg.height/2;this.Npc_bg.x=parseInt(this.Npc_bg.x-(this.Npc_bg.width/2-this.Npc_bg.x)*(a-this.Npc_bg.scaleX)/this.Npc_bg.scaleX);this.Npc_bg.y=parseInt(this.Npc_bg.y-(c-this.Npc_bg.y)*(a-this.Npc_bg.scaleY)/this.Npc_bg.scaleY);this.Npc_bg.scaleX=a;this.Npc_bg.scaleY=a;this.movedis=b}else this.Npc_bg.x+=a.stageX-this.startpos.x,this.Npc_bg.y+=a.stageY-this.startpos.y,this.startpos.x=a.stageX,this.startpos.y=a.stageY};c.prototype.LoadIngimage=function(a){var b=this;fsize=12;b.Npc_bg.alpha=1;b.Show_gb.x=g_ClientConfig.nNPCDlgLabelX;b.Show_gb.y=g_ClientConfig.nNPCDlgLabelY;0==testNpc_X?b.but_Close.pos(b.Npc_bg.width-b.but_Close.width-20-this.closeOffestX,10-this.closeOffestY):b.but_Close.pos(testNpc_X-this.closeOffestX,testNpc_Y-this.closeOffestY);"gameres/png/npc_di.png"==b.Npc_bg.skin&&b.but_Close.pos(518-this.closeOffestX+10,0-this.closeOffestY+10);b.panelPos||(b.Show_gb.width=b.Npc_bg.width,b.Show_gb.height=b.Npc_bg.height);GameMission.LoadIngimage(a,b.Show_gb);sNewNpcStr="";GameApi.ShowNewNpcDlgEx(!1);0==b.Npc_bg.width||0==b.Npc_bg.height?Laya.loader.load(npc_img_name,Laya.Handler.create(b,function(){b.SetPos()})):b.SetPos()};c.prototype.changedialog=function(a,b,c,g){this.has_skin=!0;this.panelPos=c;g_ChangerIndex=g_Changerpak=-1;g_TempNPCLabe=!1;a=parseInt(a);if(a<g_pak_list.length){a=g_pak_list[a];var f=this;g&&(this.visible=!1);GameUtil.loadImg(b,a,function(a){npc_img_name=a;f.Npc_bg.skin=npc_img_name;f.Npc_bg.pos(browser_width/2-f.Npc_bg.width/2,browser_height/2-f.Npc_bg.height/2);f.Show_gb.width=f.Npc_bg.width;f.Show_gb.height=f.Npc_bg.height;0==testNpc_X?f.but_Close.pos(f.Npc_bg.width-f.but_Close.width-20-f.closeOffestX,10-f.closeOffestY):f.but_Close.pos(testNpc_X-f.closeOffestX,testNpc_Y-f.closeOffestY);this.SetPos();this.visible=!0}.bind(this))}this.panelPos&&4==this.panelPos.length?(this.Show_gb.visible=!1,GameUtil.intervalFrameDeal(56,this,function(){this.Show_gb.x=parseInt(this.panelPos[0]);this.Show_gb.y=parseInt(this.panelPos[1]);this.Show_gb.width=parseInt(this.panelPos[2]);this.Show_gb.height=parseInt(this.panelPos[3]);this.Show_gb.visible=!0}.bind(this)),g_npcCanMove||(this.Show_gb.vScrollBarSkin="")):(this.panelPos&&2==this.panelPos.length?(this.Show_gb.x=parseInt(this.panelPos[0]),this.Show_gb.y=parseInt(this.panelPos[1])):(this.Show_gb.x=0,this.Show_gb.y=0),this.Show_gb.width=this.Npc_bg.width,this.Show_gb.height=this.Npc_bg.height)};c.prototype.SetVisible=function(a){this.but_Close.pos(testNpc_X-this.closeOffestX,testNpc_Y-this.closeOffestY);"gameres/png/npc_di.png"==this.Npc_bg.skin&&this.but_Close.pos(518-this.closeOffestX+10,0-this.closeOffestY+10);this.Npc_bg.visible=a};c.prototype.SetPos=function(){switch(this.posType){case 0:this.Npc_bg.x=0+this.nWindowsX;this.Npc_bg.y=0+this.nWindowsY;break;case 1:this.Npc_bg.x=browser_width-this.Npc_bg.width+this.nWindowsX;this.Npc_bg.y=0+this.nWindowsY;break;case 2:this.Npc_bg.y=browser_height-this.Npc_bg.height+this.nWindowsY;this.Npc_bg.x=0+this.nWindowsX;break;case 3:this.Npc_bg.x=browser_width-this.Npc_bg.width+this.nWindowsX;this.Npc_bg.y=browser_height-this.Npc_bg.height+this.nWindowsY;break;case 4:this.Npc_bg.x=(browser_width-this.Npc_bg.width)/2+this.nWindowsX,this.Npc_bg.y=(browser_height-this.Npc_bg.height)/2+this.nWindowsY}this.Npc_bg.visible=!0;this.but_Close.visible=this.bShowClose?!0:!1};c.prototype.close=function(){var a=Laya.stage.getChildByName("yangdaweigood");a&&a.removeSelf();G_NPC_ID=-1;Laya.stage.event("close_screenwin");for(var a=!0,b=0;b<g_boxItemArr.length;b++)if(g_boxItemArr[b]){a&&(Sendmessage.NpcDlgOptions(null,null,null,3),a=!1);var c=g_boxItemArr[b];g_boxItemArr[b]=null;GameUtil.AddItemNewBag(c)}npc_img_name="gameres/png/npc_di.png";Laya.stage.off("Show_NewNpc",this,this.LoadIngimage);Laya.stage.off("Change_bg",this,this.changedialog);Laya.stage.off("close",this,this.close);Laya.stage.off("Change_pos",this,this.Change_pos);Laya.stage.offAll("draw_npc_items");this.removeSelf();OpenTextColor=!0};return c}(NewNpcWinUI),NewSaleShop=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(400,30);this.settxt=function(a,b){this.removeChildren();var f=new Laya.Text;f.color="#ffffff";f.fontSize=18;f.text=a.name;this.addChild(f);var c=new Laya.Text;c.color="#ffffff";c.fontSize=18;c.text=a.gprice;c.pos(f.x+200,f.y);this.addChild(c);if(1<=parseInt(a.gsub)){var d=new Laya.Image;d.skin="gameres/png/npcxz2.png";d.pos(c.x+80,f.y-3);this.addChild(d)}g==b&&(d=new Laya.Image,d.skin="gameres/png/npcxz.png",d.pos(0,-5),this.addChild(d))}}function d(){d.__super.call(this);this.size(300,30);this.settxt=function(a,b){if(a&&a.s){this.removeChildren();var c=new Laya.Text;c.color="#ffffff";c.fontSize=18;c.text=a.s.Name;this.addChild(c);var d=new Laya.Text;d.color="#ffffff";d.fontSize=18;d.text=a.s.Price;d.pos(c.x+150,c.y);this.addChild(d);var e=ObjectManage.findobject(playerID);a.sellerName==e.txt_name.text&&(c.color="#28ff00",d.color="#28ff00");f==b&&(c=new Laya.Image,c.skin="gameres/png/npcxz.png",c.pos(0,-5),this.addChild(c))}}}var e=new Laya.Point(0,0),g=-1,f=-1;Laya["class"](c,"NewSaleShop",NewSaleShopUI);Laya["class"](a,"NewSaleRender",Laya.Box);Laya["class"](d,"NewSaleRender2",Laya.Box);c.prototype.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.M_Listtselect=function(a){G_npcShopPage=0;g=a;f=-1;a<g_ItemMemuList.length&&Sendmessage.sendSaleDetailItem(g_ItemMemuList[g],G_npcShopPage);this.M_List._selectedIndex=-1};c.prototype.changePage=function(a){null==g_ItemMemuList[g]||0>G_npcShopPage+a||Sendmessage.sendSaleDetailItem(g_ItemMemuList[g],G_npcShopPage+a)};c.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.NpcShop_bg.skin="gameres/png/npcitems.png";G_npcShopPage=0;this.NpcShop_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.NpcShop_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.NpcShop_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.NpcShop_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.pageup.on(Laya.Event.CLICK,this,this.changePage,[-10]);this.pagedown.on(Laya.Event.CLICK,this,this.changePage,[10]);this.M_List.repeatX=1;this.M_List.repeatY=10;this.M_List.vScrollBarSkin="gameres/ui/vscroll.png";this.M_List.itemRender=a;this.M_List.selectEnable=!0;this.M_List.selectHandler=new Laya.Handler(this,this.M_Listtselect);this.M_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.M_List.array=g_ItemMemuList;this.M_List2.repeatX=1;this.M_List2.repeatY=10;this.M_List2.spaceX=1;this.M_List2.spaceY=1;this.M_List2.itemRender=d;this.M_List2.selectEnable=!0;this.M_List2.selectHandler=new Laya.Handler(this,this.M_Listtselect2);this.M_List2.renderHandler=new Laya.Handler(this,this.UpdateItem2);for(var b=[],c=0;20>c;c++)b.push(c);this.M_List2.array=b;this.inf_Close.on(Laya.Event.CLICK,this,this.oninf_Close);Laya.stage.on("Update_Sale_Items2",this,this.ShowItem2);Laya.stage.on("npc_sale_BUYITEM_SUCCESS",this,this.BUYITEM_SUCCESS);f=g=-1;this.Npc_Buy.on(Laya.Event.CLICK,this,this.onNpc_Buy)};c.prototype.onNpc_Buy=function(a){null!=g_ItemMemuList[g]&&null!=g_ItemMemuListInf[f]&&Sendmessage.SendButItemFormSale(g_ItemMemuListInf[f])};c.prototype.BUYITEM_SUCCESS=function(){g_ItemMemuListInf.splice(f,1);this.ShowItem2()};c.prototype.ShowItem2=function(){this.inf_bg.visible=!0;this.pageNum.text=G_npcShopPage/10+1;this.M_List2.array=g_ItemMemuListInf;this.M_List2.refresh()};c.prototype.UpdateItem2=function(a,b){a.settxt(a.dataSource,b)};c.prototype.M_Listtselect2=function(a){f=a;g_OpenIdx=10;g_MoveItems.Index=-11;g_MoveItems.Items=g_ItemMemuListInf[a];GameUtil.NewShowItemsInf(g_MoveItems.Items);this.M_List2._selectedIndex=-1};c.prototype.oninf_Close=function(){this.inf_bg.visible=!1;G_npcShopPage=0};c.prototype.onMouseDown=function(){if(!this.win_gb.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.NpcShop_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var a=this.NpcShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));e.x=a.x;e.y=a.y;this.bgCanMove=!0}};c.prototype.onMouseUp=function(){this.bgCanMove=!1};c.prototype.onMouseMove=function(){if(!this.win_gb.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.NpcShop_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.bgCanMove){var a=this.NpcShop_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.NpcShop_bg.x+=a.x-e.x;this.NpcShop_bg.y+=a.y-e.y}};c.prototype.close=function(){Laya.stage.off("Update_Sale_Items2",this,this.ShowItem2);Laya.stage.off("npc_sale_BUYITEM_SUCCESS",this,this.BUYITEM_SUCCESS);this.removeSelf()};return c}(NewSaleShopUI),NewStore=function(b){function c(){c.__super.call(this);this.init()}function a(){ItemsRender.__super.call(this);this.size(61,61);this.settxt=function(a,b,c){this.removeChildren();var d=new Laya.Image;d.skin="gameres/ui/img_bag_bg.png";b>=g_StoreMaxCount?d.skin="gameres/ui/lock_img.png":e==b&&(d.skin="gameres/ui/img_bag_bg1.png");d.width=60;d.height=60;this.addChild(d);if(b<g_StoreItemList.length&&null!=g_StoreItemList[b]&&null!=g_StoreItemList[b].s){var m=new Laya.Image;GameUtil.loadImg(g_StoreItemList[b].s.Looks,"items",function(a){m.skin=a;m.pos(30-m.width/2,30-m.height/2);GameUtil.setTxtFixedPos(m,d.width)});d.addChild(m);GameUtil.ShowItemeffect(d,g_StoreItemList[b]);m.removeChildren();(41==g_StoreItemList[b].s.StdMode||40==g_StoreItemList[b].s.StdMode||17==g_StoreItemList[b].s.StdMode||18==g_StoreItemList[b].s.StdMode||42==g_StoreItemList[b].s.StdMode||31==g_StoreItemList[b].s.StdMode&&-1!=g_StoreItemList[b].s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<g_StoreItemList[b].s.Reserved&&0<g_StoreItemList[b].Dura?(a=new Laya.Text,a.color="#ffffff",a.align="right",a.width=40,a.text="x"+(g_StoreItemList[b].Dura+1),GameUtil.setCanAddTxtStroke(a),m.addChild(a),GameUtil.setTxtFixedPos(m,d.height)):0==g_StoreItemList[b].s.StdMode&&5==g_StoreItemList[b].s.Source&&0<g_StoreItemList[b].DuraMax&&(a=new Laya.Text,a.color="#ffffff",a.align="right",a.width=40,a.text="x"+g_StoreItemList[b].Dura,GameUtil.setCanAddTxtStroke(a),m.addChild(a),GameUtil.setTxtFixedPos(m,d.height))}}}var d=new Laya.Point(0,0),e=-1;Laya["class"](c,"NewStore",NewStoreRomUI);Laya["class"](a,"StoreRender",Laya.Box);c.prototype.init=function(){g_OpenStore=!0;var b=GameUtil.InstanceOfMem(NewBagUI);b&&(this.y=b.Bagimg_bg.y-6);this.but_Close.on(Laya.Event.CLICK,this,this.close);Laya.stage.on("Show_Store_Item_ico",this,this.ShowInfo);Laya.stage.on("closestore",this,this.close);this.Store_bg.ItemsList=[];this.Store_bg.skin="gameres/png/store_bg.png";this.Store_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Store_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.Store_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.m_List.repeatX=5;this.m_List.repeatY=5;this.m_List.spaceX=1;this.m_List.spaceY=1;this.m_List.vScrollBarSkin="";this.m_List.itemRender=a;this.m_List.selectEnable=!0;this.m_List.selectHandler=new Laya.Handler(this,this.StoreSelect);this.m_List.renderHandler=new Laya.Handler(this,this.UpdateItem)};c.prototype.lb_Img_Click=function(a){console.log("sName",a.target.label)};c.prototype.UpdateItem=function(a,b){a.removeChildren();a.settxt(a.dataSource,b,this)};c.prototype.ShowItemico=function(a){e=-1;this.ShowInfo(a)};c.prototype.ShowInfo=function(a){if(0<a)for(var b=[],c=0;c<a;c++)b.push(c);else for(b=[],c=0;c<g_StoreMaxCount;c++)b.push(c);this.m_List.array=b;this.m_List.refresh()};c.prototype.StoreSelect=function(a){e=a;a<g_StoreItemList.length&&null!=g_StoreItemList[a]&&(g_OpenIdx=2,g_MoveItems.Items=g_StoreItemList[a],GameUtil.NewShowItemsInf(g_MoveItems.Items));a>=g_StoreMaxCount&&Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u662f\u5426\u5f00\u542f\u683c\u5b50\uff1f",callfn:function(){Sendmessage.DepotOrBagItems2(0,0)},callcancelfun:function(){}}]);this.m_List._selectedIndex=-1};c.prototype.onMouseDown=function(){if(!this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&!this.m_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.Store_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var a=this.Store_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));d.x=a.x;d.y=a.y;this.TaskCanMove=!0}};c.prototype.onMouseUp=function(){this.TaskCanMove=!1};c.prototype.onMouseMove=function(){if(!this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&!this.m_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.Store_bg.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.TaskCanMove){var a=this.Store_bg.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.Store_bg.x+=a.x-d.x;this.Store_bg.y+=a.y-d.y}};c.prototype.close=function(){Laya.stage.off("Show_Store_Item_ico",this,this.ShowInfo);Laya.stage.off("closestore",this,this.close);g_OpenStore=!1;this.removeSelf()};return c}(NewStoreRomUI),PersonalStore=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.item=new PerStore_shopUI;var b=ObjectManage.findobject(playerID);this.item.lable_shopName.on(Laya.Event.CLICK,this,function(){var a=this.item.lable_name.text;a&&""!=a&&(g_StoreName=a);b&&b.txt_name&&b.txt_name.text==a?Sendmessage.QuerySelectShopInfo(b.txt_name.text,b.data.record):Sendmessage.QueryUserShopItems(0,0,0,0,0,"",a);(a=GameUtil.InstanceOfMem(PersonalStoreUI))&&a.BtnClose()});this.addChild(this.item);this.show=function(a,b){var c="";switch(a.btState){case 0:c="\u5728\u7ebf";break;case 1:c="\u6446\u644a";break;case 2:c="\u79bb\u7ebf"}this.item.lable_shopName.text=a.sShopName;this.item.lable_name.text=a.sMasterName;this.item.lable_time.text=a.dCreateDate;this.item.lable_itemNum.text=a.nSellingItemCount;this.item.lable_num.text=a.nSelledItemCount;this.item.lable_state.text=c;this.item.label_attention.text=a.nCareValue;g_StoreOnline=c}}function d(){d.__super.call(this);this.ByItem=new PerStoreItemUI;this.addChild(this.ByItem);var a=ObjectManage.findobject(playerID);this.ShowItem=function(b,f){var c="",d=GameUtil.ShowMoneyType(b.btMoneyType),m=GameUtil.ShowbtItemType(b.btItemType),c=a&&a.txt_name&&b.sMasterName==a.txt_name.text?"\u53d6\u56de":"\u8d2d\u4e70";GameUtil.ShowItemNum(b.Item,this.ByItem.ItemImg,23.5,18.5);this.ByItem.ItemName.text=b.Item.s.Name;this.ByItem.ItemPrice.text=b.Item.s.Price+d;this.ByItem.ShopName.text=b.sShopName;this.ByItem.ShopkeeperName.text=b.sMasterName;this.ByItem.ItemType.text=m;this.ByItem.ItemBy.text=c};this.ByItem.ShopName.on(Laya.Event.CLICK,this,function(){var b=this.ByItem.ShopkeeperName.text;b&&""!=b&&(g_StoreName=b);a&&a.txt_name&&a.txt_name.text==b?Sendmessage.QuerySelectShopInfo(a.txt_name.text,a.data.record):Sendmessage.QueryUserShopItems(0,0,0,0,0,"",b);(b=GameUtil.InstanceOfMem(PersonalStoreUI))&&b.BtnClose()});this.ByItem.ItemBy.on(Laya.Event.CLICK,this,function(){var a=this.dataSource.Item.MakeIndex,b=this.ByItem.ShopkeeperName.text,c=this.ByItem.ItemName.text;"\u8d2d\u4e70"==this.ByItem.ItemBy.text?a&&""!=a&&Laya.stage.event("show_alert_dlg",[{type:2,txt:'\u662f\u5426\u786e\u8ba4\u8d2d\u4e70"'+this.ByItem.ItemName.text+'"?',callfn:function(){Sendmessage.SendBuyUserShopItem(a,b)}}]):"\u53d6\u56de"==this.ByItem.ItemBy.text&&a&&""!=a&&(Sendmessage.SendMoveMyShopItem(a,0,2,c),(c=GameUtil.InstanceOfMem(PersonalStoreUI))&&c.BtnClose())})}Laya["class"](c,"PersonalStore",PersonalStoreUI);Laya["class"](a,"shopItem",Laya.Box);Laya["class"](d,"ByShopItem",Laya.Box);b=c.prototype;b.init=function(){this.startpos=new Laya.Point;this.box_1.visible=!1;var b=["\u4e0d\u9650"];this.btn_close.on(Laya.Event.CLICK,this,this.BtnClose);this.btn_myshop.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_buyitem.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_allstore.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_next.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_previous.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_first.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_last.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_itemsearch.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_search.on(Laya.Event.CLICK,this,this.BtnClick);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);Laya.stage.on("game_show_PersonalStore",this,this.ShowStore);Laya.stage.on("game_show_PersonalItems",this,this.ShowPresonalItem);Laya.stage.on("game_show_Page",this,this.ShowPage);this.list_shop.repeatX=1;this.list_shop.repeatY=8;this.list_shop.selectEnable=!0;this.list_shop.itemRender=a;this.list_shop.renderHandler=new Laya.Handler(this,this.updataShop);this.list_shop.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_item.itemRender=d;this.list_item.repeatX=1;this.list_item.repeatY=5;this.list_item.selectEnable=!0;this.list_item.renderHandler=new Laya.Handler(this,this.updataItem);this.list_item.selectHandler=new Laya.Handler(this,this.SelectItem);for(var c=0;c<g_GameMoneyType.length;c++)g_GameMoneyType[c]&&""!=g_GameMoneyType[c]&&b.push(g_GameMoneyType[c]);this.pricetype.labels=b.toString();this.pricetype.selectedIndex=0;this.Search();this.input_search.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_search.on(Laya.Event.BLUR,this,this.OnBlur);this.ItemSearch.on(Laya.Event.FOCUS,this,this.OnFocus);this.ItemSearch.on(Laya.Event.BLUR,this,this.OnBlur);this.price_low.on(Laya.Event.FOCUS,this,this.OnFocus);this.price_low.on(Laya.Event.BLUR,this,this.OnBlur);this.price_high.on(Laya.Event.FOCUS,this,this.OnFocus);this.price_high.on(Laya.Event.BLUR,this,this.OnBlur)};b.OnFocus=function(){cur_use_app&&(this.img_bg.top=-280)};b.OnBlur=function(){cur_use_app&&(this.img_bg.y=3)};b.BtnClose=function(){this.removeSelf();Laya.stage.off("game_show_PersonalStore",this,this.ShowStore);Laya.stage.off("game_show_PersonalItems",this,this.ShowPresonalItem);Laya.stage.off("game_show_Page",this,this.ShowPage)};b.BtnClick=function(a){switch(a.target.name){case "myshop":(a=ObjectManage.findobject(playerID))&&a.txt_name&&Sendmessage.QuerySelectShopInfo(g_RoleNameOnly,a.data.record);break;case "buyitem":this.btn_allstore.selected=!1;this.btn_buyitem.selected=!0;this.box_0.visible=!1;this.box_1.visible=!0;break;case "btn_allstore":this.box_0.visible=!0;this.box_1.visible=!1;this.btn_allstore.selected=!0;this.btn_buyitem.selected=!1;break;case "btn_first":this.box_0.visible?0<G_Cur_Store_Page&&Sendmessage.GetUserShops(0):this.box_1.visible&&0<G_Cur_Item_Page&&Sendmessage.SearchGetShopItems(0);break;case "btn_previous":this.box_0.visible?0<G_Cur_Store_Page&&Sendmessage.GetUserShops(G_Cur_Store_Page-8):this.box_1.visible&&0<G_Cur_Item_Page&&Sendmessage.SearchGetShopItems(G_Cur_Item_Page-5);break;case "btn_next":this.box_0.visible?8<G_Total_Store_num-G_Cur_Store_Page&&Sendmessage.GetUserShops(G_Cur_Store_Page+8):this.box_1.visible&&5<G_Total_Item_num-G_Cur_Item_Page&&Sendmessage.SearchGetShopItems(G_Cur_Item_Page+5);break;case "btn_last":this.box_0.visible?8<G_Total_Store_num-G_Cur_Store_Page&&Sendmessage.GetUserShops(8*(this.MaxPage-1)):this.box_1.visible&&5<G_Total_Item_num-G_Cur_Item_Page&&Sendmessage.SearchGetShopItems(5*(this.MaxPage-1));break;case "btn_search":Sendmessage.QueryUserShops(this.searchType.selectedIndex,this.sort.selectedIndex,this.input_search.text);break;case "btn_itemsearch":this.Search()}this.list_shop.selectedIndex=-1;this.list_item.selectedIndex=-1};b.Search=function(){var a=GameUtil.ShowSelectedIdx(this.pricetype.selectedLabel),b=parseInt(this.price_low.text),f=parseInt(this.price_high.text);Sendmessage.SearchShopItems(b,f,this.ItemType.selectedIndex,a,this.ItemSort.selectedIndex,this.ItemSearch.text)};b.ShowPage=function(a,b,f){this.MaxPage=Math.ceil(a/f);this.CurPage=Math.ceil(b/f)+1;0==a&&(this.CurPage=0);5==f?this.item_num.text=this.CurPage+"/"+this.MaxPage:8==f&&(this.store_num.text=this.CurPage+"/"+this.MaxPage)};b.ShowStore=function(a){this.list_shop.array=a;this.selected=-1};b.updataShop=function(a,b){-1==this.selected&&a.show(a.dataSource,b);a.item.img_bg.skin=this.selected==b?"gameres/png/personalstore_00112.png":""};b.OnSelect=function(a){this.selected=a};b.ShowPresonalItem=function(a){this.list_item.array=a;this.ItemSelected=-1};b.updataItem=function(a,b){-1==this.ItemSelected&&a.ShowItem(a.dataSource,b);this.ItemSelected==b?(a.ByItem.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=-1,GameUtil.NewShowItemsInf(a.dataSource.Item,null,this.img_bg.x)):a.ByItem.img_bg.skin=""};b.SelectItem=function(a){this.ItemSelected=a};b.OnMouseDown=function(a){this.box_0.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.box_1.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};b.onMouseMove=function(a){this.img_bg.x+=a.stageX-this.startpos.x;this.img_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};b.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};return c}(PersonalStoreUI),RichText=function(b){function c(a,b,e){c.__super.call(this);this.init(a,b,e)}Laya["class"](c,"RichText",Laya.Panel);c.prototype.init=function(a,b,c){this.line_h=0;this.size(a,b);this.vScrollBarSkin="";this.all_list=[];this.max_line=c;this.scrollh=this.cur_line=0};c.prototype.autolien=function(a){if(this.line_h>this.height){if(this.cur_line>this.max_line){this.line_h-=a;for(var b=this.all_list.length-1;0<=b;b--){var c=this.all_list[b];0==b?(c.removeSelf(),this.all_list.splice(b,1),this.cur_line--):c.y-=a}}this._content.scrollRect&&(this._content.scrollRect.y=this.line_h-this.height)}};c.prototype.resetbox=function(a){this.removeChildren();this.cur_line=this.line_h=0;for(var b=this._content.scrollRect.y=0;b<this.all_list.length;b++){var c=this.all_list[b];c&&c.visible&&(c.pos(0,this.line_h),this.addChild(c),this.line_h+=a,this.cur_line++,this.autolien(22))}};c.prototype.countwidth=function(a,b,c){var g=new Laya.Label;g.fontSize=b;b="";for(var f=0;f<a.length;f++)if(g.text=b+=a[f],g.displayWidth+c>this.width)return g.removeSelf(),f;g.removeSelf();return-1};c.prototype.getcontrol=function(a,b){var c=this._childs[0]._childs[a];return null==c?null:c._childs[b]};c.prototype.setBox=function(a,b,c,g){var f=0,h=[],l=new Laya.Box;l.width=this.width-20;var m=new Laya.Sprite;l.addChild(m);for(l.type=c;0<a.length;){var n=a[0];if(n&&f+n.width<this.width-20)n.pos(f,0),l.addChild(n),f+=n.width,a.shift();else if("label"==n.name){var q=new Laya.Sprite;q.name="label";q.color=n.color;q.height=18;for(var p=0;p<n.text.length+1;p++)if(q.text=n.text.substr(0,p),q.width=GameUtil.getTxtWidthByContent("18px",q.text),f+q.width>=this.width-10){q.text=n.text.substr(p-1);GameUtil.resetGraphicsTxtAttr(q);q.width=GameUtil.getTxtWidthByContent("18px",q.text);n.text=n.text.substr(0,p-1);GameUtil.resetGraphicsTxtAttr(n);n.width=GameUtil.getTxtWidthByContent("18px",n.text);a[0]=q;h=a;a=[];break}n.width=GameUtil.getTxtWidthByContent("18px",n.text);n.pos(f,0);l.addChild(n);f+=n.width;0<a.length&&a.shift()}else h=a,a=[]}m.graphics.drawRect(0,0,f+10,18,Get2RGB(parseInt(b)));l.pos(0,this.line_h);this.addChild(l);this.all_list.push(l);this.line_h+=22;this.cur_line++;this.autolien(22);if(0<g)Laya.timer.once(1E3*g,this,function(){l.time=-1;for(var a=0;a<this.all_list.length;a++)-1==this.all_list[a].time&&(l.removeSelf(),this.all_list.splice(a,1),Laya.stage.event("delChatBox"),this.height-=21,this.cur_line--,5>this.height&&(this.height=0));this.resetbox(22)},[l]);h&&0<h.length&&this.setBox(h,b,c,g)};c.prototype.getMaxTextLength=function(a,b,c){for(var g=0;g<b.length;g++){if(a.displayWidth>c-20)return g;a.text+=b[g]}return 0};c.prototype.showByType=function(a,b,c){for(b=0;b<this.all_list.length;b++)if(c=this.all_list[b])c.visible=c.type==a||-1==a;this.resetbox(22)};return c}(Laya.Panel),RockerUI=function(b){function c(){c.__super.call(this);this.rocker=new Laya.Sprite;this.visible=!1;this.onLoaded()}this.rocker=null;this.use_h=this.use_w=0;this.type="";this.lastmovedir=-1;this.rockercount=1;Laya["class"](c,"RockerUI",Laya.View);c.prototype.onLoaded=function(){this.curpos=new Laya.Point;this.dir=0;this.bg=new Laya.Image;this.bg.alpha=1;this.on(Laya.Event.MOUSE_DOWN,this,this.onDragStart);var a=Laya.loader.getRes("gameres/ui/rocke_bj.png");a.width=154;a.height=154;this.bg.loadImage("gameres/ui/rocke_bj.png");this.bg_radius=a.width/2;this.rockerman=new Laya.Image;this.rockerman.loadImage("gameres/ui/rockerman_1.png");this.rockerman.pos(53,50);this.rocker_hu=new Laya.Image;this.rocker_hu.loadImage("gameres/png/rocker_hu_1.png",0,0,154,154);this.rocker_hu.pos(0,0);this.bg.addChild(this.rockerman);this.bg.addChild(this.rocker_hu);this.bg.x-=65;this.bg.y+=70;this.addChild(this.bg);this.clickcdtime=Laya.Browser.now();this.but_dir_list=[];for(var b=0;8>b;b++){this.but_dir=new Laya.Button;this.but_dir.alpha=1;this.but_dir.skin="gameres/ui/rocke_"+b+".png";this.but_dir.stateNum=1;this.but_dir.nDir=b;switch(b){case 0:this.but_dir.x=49;this.but_dir.y=-13;this.but_dir_list.push(this.but_dir);break;case 1:this.but_dir.x=94;this.but_dir.y=8;this.but_dir_list.push(this.but_dir);break;case 2:this.but_dir.x=112;this.but_dir.y=49;this.but_dir_list.push(this.but_dir);break;case 3:this.but_dir.x=93;this.but_dir.y=91;this.but_dir_list.push(this.but_dir);break;case 4:this.but_dir.x=49;this.but_dir.y=114;this.but_dir_list.push(this.but_dir);break;case 5:this.but_dir.x=7;this.but_dir.y=95;this.but_dir_list.push(this.but_dir);break;case 6:this.but_dir.x=-16;this.but_dir.y=49;this.but_dir_list.push(this.but_dir);break;case 7:this.but_dir.x=2,this.but_dir.y=6,this.but_dir_list.push(this.but_dir)}this.but_dir.on(Laya.Event.CLICK,this,this.DirMoseDown);this.bg.addChild(this.but_dir);this.but_dir_list[b].visible=!1;this.but_dir_list[b].alpha=1}this.rocker.loadImage("gameres/ui/rocke_qiu.png");this.addChild(this.rocker);b=Laya.loader.getRes("gameres/ui/rocke_qiu.png");this.ball_radius=b.width/2;this.rocker.pivot(b.width/2,b.height/2);this.rocker.alpha=1;this.use_w=a.width/2-65;this.use_h=a.height/2+70;this.rocker.pos(this.use_w,this.use_h);g_rocker_moving=this.is_move=!1;Laya.timer.clear(this,this.passEvent);Laya.timer.frameLoop(1,this,this.passEvent);Laya.stage.on("move_position",this,this.ChangeRocker);Laya.stage.on("dragEnd",this,this.leaverocker);this.turn_dir=this.move_time=0};c.prototype.DirMoseDown=function(a){if(!(roledielock||Actionlock||rockerlock||player_stalls)&&400<=Laya.Browser.now()-this.clickcdtime){a=a.target.nDir;var b=ObjectManage.findobject(playerID);b.cur_dir==a||!b.action_over&&1!=b.cur_state&&6!=b.cur_state?Objectcontrol.objectmove({dir:a,state:g_Move_Type}):(GameUtil.delhalo(attackerID),b.changestate(null,1,a,!0),Sendmessage.ChangDir(b.grid.x,b.grid.y,a));this.clickcdtime=Laya.Browser.now()}};c.prototype.passEvent=function(){if(!GlobalCfglist.doubleRocker&&!g_furious_collision_ing&&this.dir&&this.is_move){if(1==Objectcontrol.self_obj.paralysis_state){var a=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.WALK),b=GameUtil.checkParalysisM2(E_PARALYSISACTIVE.RUN);if(1==g_Move_Type&&0==a)return a;if(2==g_Move_Type&&0==b)return b}g_rocker_moving=!0;Objectcontrol.objectmove({dir:this.dir-1,state:g_Move_Type});Fightmodule.leavefight();Movemodule.stopmove();Movemodule.end_point=null}};c.prototype.onDragStart=function(a){Objectcontrol.self_obj&&!GlobalCfglist.doubleRocker&&(this.curTouchid=a.touchId,this.rocker&&this.rocker.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&(this.move_over=this.is_move=!0,attackerID=0,Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onDragEnd),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onDragMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onDragEnd),use_move_start=!0,this.move_time=Laya.Browser.now(),Laya.timer.loop(200,this,this.rockerman_loop)))};c.prototype.onDragMove=function(a){if(a.touchId==this.curTouchid&&(autohookstate&&Laya.stage.event("stopAutoHookStateByRockerMove"),this.bg.alpha=1,this.rocker.alpha=1,rockerfirst=!0,this.is_move&&(677>Laya.stage.mouseX||300>Laya.stage.mouseY))){this.curpos.x=this.mouseX;this.curpos.y=this.mouseY;a=this.curpos.distance(this.use_w,this.use_h);var b=Math.atan2(this.curpos.y-this.use_h,this.curpos.x-this.use_w),c=this.bg_radius;a<.8*c?(this.rocker.pos(this.curpos.x,this.curpos.y),g_Move_Type=1):(this.rocker.pos(Math.cos(b)*c+this.use_w,Math.sin(b)*c+this.use_h),g_Move_Type=2,g_boCobWeb&&(g_Move_Type=1));20>a||(this.turn_dir=0,this.dir=this.Countdir(b),rocker_move_dir=this.dir-1,this.passEvent())}};c.prototype.rockerman_loop=function(){6<rockercount&&(rockercount=1);1==g_Move_Type?this.rockerman.skin="gameres/ui/rockerman_"+rockercount+".png":2==g_Move_Type&&(this.rockerman.skin="gameres/ui/rockerman_1"+rockercount+".png");-1<rocker_move_dir&&8>rocker_move_dir&&(this.rocker_hu.skin="gameres/png/rocker_hu_"+rocker_move_dir+".png");rockercount++};c.prototype.setRockerType=function(a){this.type=a};c.prototype.leaverocker=function(){g_rocker_moving=this.is_move=!1;this.move_time=this.turn_dir=this.dir=this.curTouchid=0;rocker_move_dir=-1;this.rocker.pos(this.use_w,this.use_h);Laya.stage.event("RockerMoveEnd");Laya.stage.event("rockertip",!0);Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onDragMove);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onDragEnd);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onDragEnd);rockerposview||(this.visible=!1);Laya.timer.clear(this,this.rockerman_loop)};c.prototype.onDragEnd=function(a){use_move_start=rockerfirst=!1;this.bg&&a&&(!(a.touches&&1<=a.touches.length)&&Objectcontrol.self_obj||this.isSpecialChannelOnIOS(a))&&(0==this.turn_dir||!Objectcontrol.self_obj||Objectcontrol.self_obj.cur_dir+1==this.turn_dir||1!=Objectcontrol.self_obj.cur_state&&6!=Objectcontrol.self_obj.cur_state||(Objectcontrol.self_obj.changestate(null,1,this.turn_dir-1,!0),Sendmessage.ChangDir(Objectcontrol.self_obj.grid.x,Objectcontrol.self_obj.grid.y,this.turn_dir-1)),this.leaverocker())};c.prototype.isSpecialChannelOnIOS=function(a){return Laya.Browser.onIOS&&a.touches&&1<=a.touches.length};c.prototype.Countdir=function(a){a=0<a?180*a/Math.PI:180*(2*Math.PI+a)/Math.PI;return 20<a&&55>=a?4:55<a&&120>=a?5:120<a&&150>=a?6:150<a&&210>=a?7:210<a&&250>=a?8:250<a&&300>=a?1:300<a&&330>=a?2:3};c.prototype.ChangeRocker=function(){if(rockerposview){this.left=125;this.bottom=78;for(var a=0;8>a;a++)this.but_dir_list[a].visible=!0}else for(a=0;8>a;a++)this.but_dir_list[a].visible=!1;GlobalCfglist.doubleRocker||(this.rocker.visible=!0,Laya.stage.event("rockertip",!rockerposview),this.visible=rockerposview)};return c}(Laya.View),ScreenWin=function(b){function c(){c.__super.call(this);this.init()}function a(){ItemsRender.__super.call(this);this.size(51,51);this.settxt=function(a,b){this.removeChildren();var f=new Laya.Image;f.skin="gameres/ui/img_bag_bg.png";g==b&&(f.skin="gameres/ui/img_bag_bg1.png");f.width=50;f.height=50;this.addChild(f);if(b<e.length&&null!=e[b]&&e[b]&&e[b].s){var c=new Laya.Image;GameUtil.loadImg(e[b].s.Looks,"items",function(a){c.skin=a;c.pos(25-c.width/2,25-c.height/2);f._style&&(f.blendMode="overlay")});f.addChild(c);GameUtil.ShowItemeffect(f,e[b]);var d=e[b],h=d.s.StdMode;(17==h||18==h||41==h||40==h||42==h||31==h&&-1!=d.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<d.s.Reserved&&0<d.Dura?(h=new Laya.Text,h.color="#ffffff",h.align="right",h.width=40,h.text="x"+(d.Dura+1),GameUtil.setCanAddTxtStroke(h),c.addChild(h),h.pos(-8,20)):0==h&&5==d.s.Source&&0<d.Dura&&(h=new Laya.Text,h.color="#ffffff",h.align="right",h.width=40,h.text="x"+d.Dura,GameUtil.setCanAddTxtStroke(h),c.addChild(h),h.pos(-8,20))}}}var d=new Laya.Point(0,0),e=[],g=-1,f=-1,h=-1;Laya["class"](c,"ScreenWin",ScreenWUI);Laya["class"](a,"ScreeRender",Laya.Box);c.prototype.RefreshSearchItems=function(){this.SearchItems(h,f,this.sellTypes)};c.prototype.SearchItems=function(a,b,c){this.InType=b;e=[];this.m_List.refresh();f=b;h=a;var d=!1;c&&(this.sellTypes=c);switch(b){case 1:for(b=0;b<g_BagItemsList.length;b++)null!=g_BagItemsList[b]&&(c=GameUtil.GetItemType(g_BagItemsList[b].s),d=g_BagItemsList[b].s.OverLap,0==d||1==d)&&(a==U_ARMRINGL||a==U_ARMRINGR?(c==U_ARMRINGL||c==U_ARMRINGR||a==U_ARMRINGL&&25==g_BagItemsList[b].s.StdMode)&&e.push(g_BagItemsList[b]):a==U_RINGL||a==U_RINGR?c!=U_RINGL&&c!=U_RINGR||e.push(g_BagItemsList[b]):a==U_FASHIONARMRINGL||a==U_FASHIONARMRINGR?c!=U_FASHIONARMRINGL&&c!=U_FASHIONARMRINGR||e.push(g_BagItemsList[b]):a==U_FASHIONRINGL||a==U_FASHIONRINGR?c!=U_FASHIONRINGL&&c!=U_FASHIONRINGR||e.push(g_BagItemsList[b]):c==a&&e.push(g_BagItemsList[b]));break;case 2:for(b=0;b<g_BagItemsList.length;b++)if(d=!1,null!=g_BagItemsList[b]&&3>=g_BagItemsList[b].s.StdMode&&"\u4fee\u590d\u795e\u6c34"!=g_BagItemsList[b].s.Name){for(a=0;a<g_DrugItemsList.length;a++)if(null!=g_DrugItemsList[a]&&g_BagItemsList[b].s.Name==g_DrugItemsList[a].s.Name){d=!0;break}d||e.push(g_BagItemsList[b])}break;case 3:if("*"==a)for(b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&e.push(g_BagItemsList[b]);else if(a)for(a=a.split(","),b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&-1!=a.indexOf(g_BagItemsList[b].s.StdMode+"")&&e.push(g_BagItemsList[b]);break;case 4:for(b=0;b<g_BagItemsList.length;b++)null!=g_BagItemsList[b]&&4<g_BagItemsList[b].s.StdMode&&this.filterItemByStdMode(g_BagItemsList[b],c);break;case 5:for(b=0;b<g_BagItemsList.length;b++)null!=g_BagItemsList[b]&&this.filterItemByStdMode(g_BagItemsList[b],c);break;case 6:for(b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&g_BagItemsList[b].s.Name==a&&e.push(g_BagItemsList[b]);break;case 7:for(b=0;b<g_HeroBagItemsList.length;b++)null!=g_HeroBagItemsList[b]&&(c=GameUtil.GetItemType(g_HeroBagItemsList[b].s),d=g_HeroBagItemsList[b].s.OverLap,0==d||1==d)&&(a==U_ARMRINGL||a==U_ARMRINGR?c!=U_ARMRINGL&&c!=U_ARMRINGR||e.push(g_HeroBagItemsList[b]):a==U_RINGL||a==U_RINGR?c!=U_RINGL&&c!=U_RINGR||e.push(g_HeroBagItemsList[b]):a==U_FASHIONARMRINGL||a==U_FASHIONARMRINGR?c!=U_FASHIONARMRINGL&&c!=U_FASHIONARMRINGR||e.push(g_HeroBagItemsList[b]):a==U_FASHIONRINGL||a==U_FASHIONRINGR?c!=U_FASHIONRINGL&&c!=U_FASHIONRINGR||e.push(g_HeroBagItemsList[b]):c==a&&e.push(g_HeroBagItemsList[b]));break;case 8:for(b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&e.push(g_BagItemsList[b]);break;case 9:for(b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&(c=g_BagItemsList[b].s.Expand1,d=g_BagItemsList[b].s.OverLap,4==d||5==d||6==d||7==d)&&(c!=a&&0!=c||e.push(g_BagItemsList[b]));break;case 10:for(b=0;b<g_BagItemsList.length;b++)null!=g_BagItemsList[b]&&(c=g_BagItemsList[b].s.Expand1,d=g_BagItemsList[b].s.OverLap,2==d||3==d||6==d||7==d)&&(c!=a&&0!=c&&7!=c||e.push(g_BagItemsList[b]));break;case 11:for(b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&e.push(g_BagItemsList[b]);break;case 12:a=g_BagItemsList;if(4==Gameconfig.drugType||5==Gameconfig.drugType||6==Gameconfig.drugType)a=g_HeroBagItemsList;for(b=0;b<a.length;b++)if(d=a[b])switch(Gameconfig.drugType){case 0:case 4:0==d.s.StdMode&&0<d.s.AC&&0==d.s.MAC&&e.push(d);break;case 1:case 5:0==d.s.StdMode&&0==d.s.AC&&0<d.s.MAC&&e.push(d);break;case 2:case 6:0==d.s.StdMode&&0<d.s.AC&&0<d.s.MAC&&e.push(d);break;case 3:(2!=d.s.StdMode&&3!=d.s.StdMode||-1==d.s.Name.indexOf("\u4f20\u9001"))&&-1==d.s.Name.indexOf("\u56de\u57ce")&&-1==d.s.Name.indexOf("\u5730\u7262\u9003\u8131")||e.push(d)}break;case 13:for(b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&e.push(g_BagItemsList[b]);break;case 14:for(b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&(a=g_BagItemsList[b].s.StdMode,5>a||31==a||40==a||41==a||49==a||54<a&&90>a&&62!=a&&64!=a&&65!=a||175==a||176==a||177==a||211==a||e.push(g_BagItemsList[b]));break;case 15:for(b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&(a=g_BagItemsList[b].s.StdMode,55!=a&&56!=a&&57!=a&&58!=a&&175!=a||e.push(g_BagItemsList[b]));break;case 16:for(b=0;b<g_BagItemsList.length;b++)g_BagItemsList[b]&&(a=g_BagItemsList[b].s.StdMode,59!=a&&176!=a&&177!=a||e.push(g_BagItemsList[b]))}if(10>e.length){a=[];for(b=0;15>b;b++)a.push(b);this.to25GridNum(a)}else this.to25GridNum(e);this.m_List.refresh();g=-1};c.prototype.to25GridNum=function(a){if(25>a.length)for(var b=25-a.length,f=0;f<b;f++)a.push({});this.m_List.array=a};c.prototype.filterItemByStdMode=function(a,b){b?-1<b.indexOf(a.s.StdMode+"")&&e.push(a):e.push(a)};c.prototype.init=function(){this.InType=0;this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Screen_bg.skin="gameres/png/00029.png";this.Screen_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.sellTypes=null;this.m_List.repeatX=5;this.m_List.repeatY=5;this.m_List.spaceX=1;this.m_List.spaceY=1;this.m_List.vScrollBarSkin="gameres/ui/vscroll.png";this.m_List.itemRender=a;this.m_List.selectEnable=!0;this.m_List.selectHandler=new Laya.Handler(this,this.ScreenSelect);this.m_List.renderHandler=new Laya.Handler(this,this.UpdateItem);for(var b=[],f=0;15>f;f++)b.push(f);this.to25GridNum(b);Laya.stage.on("Screen_Uptade_Items",this,this.Uptade_Items);Laya.stage.on("Screen_Del_Items",this,this.Del_Items);Laya.stage.on("Screen_Add_Items",this,this.Add_Items);Laya.stage.on("Screen_Refresh_Items",this,this.Refresh_Items);Laya.stage.on("close_screenwin",this,function(){4!=this.InType&&5!=this.InType||this.close()});Laya.stage.on("Screen_Refresh_SearchItems",this,this.RefreshSearchItems)};c.prototype.Refresh_Items=function(a){this.m_List.refresh()};c.prototype.Uptade_Items=function(a,b,f){for(var c=0;c<e.length;c++)null!=e[c]&&e[c].MakeIndex==a&&(e[c].Dura=b,e[c].DuraMax=f)};c.prototype.Del_Items=function(a){for(var b=0;b<e.length;b++)if(null!=e[b]&&e[b].MakeIndex==a){e[b]=null;this.m_List.refresh();break}};c.prototype.Add_Items=function(a){if(null!=a)for(var b=0;b<e.length;b++)if(null==e[b]){e[b]=a;this.m_List.refresh();break}};c.prototype.ScreenSelect=function(a){g=a;if(null!=e[g]&&e[g].s){switch(f){case 1:g_OpenIdx=3;break;case 9:g_OpenIdx=3;a=GameUtil.GetItemType(e[g].s);var b=e[g].s.Expand1;if(0==b)for(a=40;52>a;a++){if(null==g_UserItemList[a]){g_SelectIndex=a;break}}else g_SelectIndex=40+b-1;break;case 10:g_OpenIdx=3;GameUtil.GetItemType(e[g].s);b=e[g].s.Expand1;if(0==b||7==b)for(a=30;36>a;a++){if(null==g_UserItemList[a]){g_SelectIndex=a;break}}else g_SelectIndex=30+b-1;break;case 2:g_OpenIdx=6;if(-1!=g_setDrugNumber){for(a=0;a<g_DrugItemsList.length;++a)g_DrugItemsList[a]&&g_DrugItemsList[a].s.Name==e[g].s.Name&&(g_DrugItemsList[a]=null);g_DrugButNumber=g_setDrugNumber;g_setDrugNumber=-1;g_DrugItemsList[g_DrugButNumber]=e[g];Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("ShowDrug_Items");Laya.stage.event("Drug_Item_ico");Laya.stage.event("Drug_Set_Items",[g_DrugButNumber]);GameApi.ShowScreen(!1);b=[];for(a=0;a<g_DrugItemsList.length;++a){var c=g_DrugItemsList[a];null!=c?b.push({looks:c.s.Looks,mode:c.s.StdMode}):b.push({looks:null,mode:null})}a=JSON.stringify(b);Laya.LocalStorage.setItem("druglist",a);Laya.stage.event("Show_Bag_Item_ico")}return;case 4:g_OpenIdx=8;Sendmessage.sendQueryRepairCost(G_NPC_ID,e[g].MakeIndex,e[g].s.Name);break;case 5:g_OpenIdx=9;Sendmessage.sendQueryPrice(G_NPC_ID,e[g].MakeIndex,e[g].s.Name);break;case 6:g_OpenIdx=13;break;case 7:g_OpenIdx=14;break;case 8:g_OpenIdx=19;break;case 11:g_OpenIdx=23;break;case 12:Laya.stage.event("setDrugImg",[e[g]]);GameApi.ShowScreen(!1);return;case 13:g_OpenIdx=25;Sendmessage.sendTranslateChoose(e[g].MakeIndex);break;case 14:g_OpenIdx=26;break;case 15:g_OpenIdx=27;break;case 16:g_OpenIdx=28}g_MoveItems.Items=e[g];GameUtil.NewShowItemsInf(g_MoveItems.Items)}this.m_List._selectedIndex=-1};c.prototype.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.onItem_Down=function(a){};c.prototype.onItem_Up=function(a){};c.prototype.onItem_Move=function(a){};c.prototype.onMouseDown=function(a){this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.m_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(d.x=a.stageX,d.y=a.stageY,this.Screen_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.Screen_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.Screen_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.Screen_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.Screen_bg.x+=a.stageX-d.x;this.Screen_bg.y+=a.stageY-d.y;d.x=a.stageX;d.y=a.stageY};c.prototype.close=function(){this.sellTypes=null;Laya.stage.off("Screen_Uptade_Items",this,this.Uptade_Items);Laya.stage.off("Screen_Del_Items",this,this.Del_Items);Laya.stage.off("Screen_Add_Items",this,this.Add_Items);Laya.stage.off("Screen_Refresh_Items",this,this.Refresh_Items);Laya.stage.off("Screen_Refresh_SearchItems",this,this.RefreshSearchItems);this.removeSelf()};return c}(ScreenWUI),ShoushiWin=function(b){function c(){c.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya["class"](c,"ShoushiWin",ShoushiUI);b=c.prototype;b.init=function(){this.btn_close.on(Laya.Event.CLICK,this,this.BtnColse);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.Items=null;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.Items=null;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.Items=null;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.Items=null;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.Items=null;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.Items=null;Laya.stage.on("show_shoushi_box",this,this.ShowShoushi)};b.ShowShoushi=function(a){if(null!=a)for(var b=this.img_box._childs.length,c=0;c<b;c++){var f=this.img_box._childs[c];f.removeChildren();var h=parseInt(f.name)+30;f.Items=null;if(null!=a[h]&&0<a[h].MakeIndex){var l=new Laya.Image;f.Items=a[h];GameUtil.loadImg(a[h].s.Looks,"stateitem",function(a,b){a.skin=b;a.pos(24.5-a.width/2,24.5-a.height/2)}.bind(this,l));f.addChild(l);GameUtil.ShowItemeffect(l,a[h])}}};b.onItem_Down=function(a){var b=a.target.Items;a=parseInt(a.target.name)+1;null==b?GameApi.ShowScreen(!0,a,10):null!=b&&0<b.MakeIndex&&(g_OpenIdx=18,g_MoveItems.Index=b.tag,g_MoveItems.Items=b,GameUtil.NewShowItemsInf(g_MoveItems.Items))};b.BtnColse=function(){Laya.stage.off("show_shoushi_box",this,this.ShowShoushi);this.removeSelf()};b.OnMouseDown=function(b){a.x=b.stageX;a.y=b.stageY;this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(b){this.img_box.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.img_bg.x+=b.stageX-a.x,this.img_bg.y+=b.stageY-a.y,a.x=b.stageX,a.y=b.stageY)};return c}(ShoushiUI),ShousWin=function(b){function c(){c.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya["class"](c,"ShousWin",ShousWinUI);c.prototype.onItem_Down=function(a){var b=a.target.Items;null!=b&&0<b.MakeIndex?(g_OpenIdx=20,g_MoveItems.Index=b.tag,g_MoveItems.Items=b,GameUtil.NewShowItemsInf(g_MoveItems.Items)):(a=parseInt(a.target.name)+1,GameApi.ShowScreen(!0,a,9))};c.prototype.ParseNameFormat=function(a){var b=a;1E4<=a&&(a-=1E4);a=GameUtil.getprefixname(a,5);return 1E4<=b?"data/stateitem1/"+a+".png":"data/stateitem/"+a+".png"};c.prototype.ShouShiShow=function(a){if(null!=a)for(var b=this.sKuang._childs.length,c=0;c<b;c++){var f=this.sKuang._childs[c];f.removeChildren();var h=parseInt(f.name)+40;f.Items=null;if(null!=a[h]&&0<a[h].MakeIndex){var l=new Laya.Image,m=this;l.name=c;GameUtil.loadImg(a[h].s.Looks,"stateitem",function(a,b){var f=m.sKuang.getChildByName(a.name.toString());a.skin=b;a.pos(22-a.width/2,22-a.height/2);f.addChild(a)}.bind(this,l));f.Items=a[h];f.addChild(l);GameUtil.ShowItemeffect(l,a[h])}}};c.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.Shoushi_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.Item_0.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_0.Items=null;this.Item_1.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_1.Items=null;this.Item_2.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_2.Items=null;this.Item_3.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_3.Items=null;this.Item_4.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_4.Items=null;this.Item_5.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_5.Items=null;this.Item_6.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_6.Items=null;this.Item_7.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_7.Items=null;this.Item_8.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_8.Items=null;this.Item_9.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_9.Items=null;this.Item_10.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_10.Items=null;this.Item_11.on(Laya.Event.MOUSE_DOWN,this,this.onItem_Down);this.Item_11.Items=null;Laya.stage.on("update_shengxiao",this,this.ShouShiShow)};c.prototype.onMouseDown=function(b){a.x=b.stageX;a.y=b.stageY;this.Shoushi_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.Shoushi_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.Shoushi_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseUp=function(){this.Shoushi_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(b){this.Shoushi_bg.x+=b.stageX-a.x;this.Shoushi_bg.y+=b.stageY-a.y;a.x=b.stageX;a.y=b.stageY};c.prototype.close=function(){Laya.stage.off("update_shengxiao",this,this.ShouShiShow);this.removeSelf()};return c}(ShousWinUI),SimpleScreen=function(b){function c(){c.__super.call(this);this.chatMsgList=[];this.chatNum=0;this.newTaskNodeList=[];this.init()}function a(){a.__super.call(this);this.hum=new box_item4UI;this.addChild(this.hum);this.hum.btn.text="\u67e5\u770b";this.hum.btn.x+=10;this.hum.btn.on(Laya.Event.CLICK,this,function(){var a=parseInt(this._childs[0].posX.text),b=ObjectManage.findobject(a);b&&b.txt_name&&(2==b.type?(GameApi.ShowNewNpcDlg(!1),ObjectManage.clickObjHandle(b,null,1),Sendmessage.sendNPCClick(a)):3==b.type&&b.data.record!=playerID&&(Laya.stage.event("game_dlg_cmd",[{id:"show_roleMenu",name:b.txt_name.text,record:b.data.record,x:b.x,y:b.y,click_x:300,click_y:200}]),GameUtil.addhalo(b)))});this.show=function(a){a&&(this.hum.txt.text=a.key,this.hum.txt.width=150,this.hum.txt.x=0,this.hum.posX.text=a.value)}}function d(){d.__super.call(this);this.item=new box_item4UI;this.addChild(this.item);this.item.btn.text="\u62fe\u53d6";this.show=function(a){a&&(this.item.txt.text=a.key,this.item.txt.color=a.color,this.item.posX.text=a.value.x,this.item.posY.text=a.value.y)};this.item.btn.on(Laya.Event.CLICK,this,function(){var a=this._childs[0],a=new Laya.Point(Math.floor(a.posX.text),Math.floor(a.posY.text)),b=Objectcontrol.self_obj;if(b.action_over||1==b.cur_state||6==b.cur_state)AStart.cur_matx&&AStart.cur_matx[0]&&a.y<AStart.cur_matx.length&&a.x<AStart.cur_matx[0].length&&Movemodule.start3move(b.grid,a),b.grid.x==a.x&&b.grid.y==a.y&&Laya.stage.event("updatepos")})}function e(){e.__super.call(this);this.chatTxt=new Laya.TextArea;this.chatTxt.skin="gameres/png/chat.png";this.chatTxt.mouseEnabled=!1;this.chatTxt.height=18;this.chatTxt.width=180;this.chatTxt.color="#ffffff";this.addChild(this.chatTxt);this.show=function(a){this.chatTxt.text=a}}Laya["class"](c,"SimpleScreen",SimpleScreenUI);Laya["class"](a,"humItem",Laya.Box);Laya["class"](d,"itemItem",Laya.Box);Laya["class"](e,"chatItem",Laya.Box);b=c.prototype;b.init=function(){this.img_task.visible=!0;this.img_circum.visible=!1;this.btn_task.selected=!0;this.getCircum();Laya.stage.on("UPDATETASK",this,this.updatetask);this.btn_task.on(Laya.Event.CLICK,this,this.showPanel,[this.img_task,this.btn_task]);this.btn_circum.on(Laya.Event.CLICK,this,this.showPanel,[this.img_circum,this.btn_circum]);this.chat_detail.on(Laya.Event.CLICK,this,this.showDetail,[this.chat_detail]);this.task_detail.on(Laya.Event.CLICK,this,this.showDetail,[this.task_detail]);this.btn_hide.on(Laya.Event.CLICK,this,function(){this.img_screen.visible=!this.img_screen.visible;this.btn_hide.skin=this.img_screen.visible?"gameres/ui/img_hide.png":"gameres/ui/img_show.png";this.btn_task.visible=!this.btn_task.visible;this.btn_circum.visible=!this.btn_circum.visible});this.img_screen.visible=1==g_simScreen;this.panel_task.vScrollBarSkin="gameres/ui/vscroll.png";this.panel_task._childs[1]&&(this.panel_task._childs[1].hide=!0);this.list_chat.repeatX=1;this.list_chat.repeatY=10;this.list_chat.vScrollBarSkin="gameres/ui/vscroll.png";this.list_chat.getChildByName("scrollBar")&&(this.list_chat.getChildByName("scrollBar").hide=!0);this.list_chat.itemRender=e;Laya.timer.clear(this,this.updateinfo);Laya.timer.loop(1E3,this,this.updateinfo);Laya.stage.on("closeTimer_simplescreen",this,function(){Laya.timer.clear(this,this.updateinfo)})};b.showPanel=function(a,b){a&&b&&("btn_task"==b.name&&TaskOpen&&1==this.img_screen.visible&&1==this.img_task.visible&&!g_ClientConfig.boNewTaskMode?(Laya.stage.event("game_dlg_cmd",[{id:"task_scene"}]),TaskOpen=!1):(this.img_task.visible=!1,this.btn_task.selected=!1,this.img_chat.visible=!1,this.img_circum.visible=!1,this.btn_circum.selected=!1,this.img_screen.visible=!0,a.visible=!0,b.selected=!0,this.btn_hide.skin=1==this.img_screen.visible?"gameres/ui/img_hide.png":"gameres/ui/img_show.png"))};b.getCircum=function(){this.humArray=[];this.itemArray=[];this.startpos=new Laya.Point;this.box0.visible=!0;this.box1.visible=!1;this.btn_hum.on(Laya.Event.CLICK,this,this.TabClick);this.btn_item.on(Laya.Event.CLICK,this,this.TabClick);this.list_hum.repeatX=1;this.list_hum.repeatY=10;this.list_hum.vScrollBarSkin="gameres/ui/vscroll.png";this.list_hum.getChildByName("scrollBar")&&(this.list_hum.getChildByName("scrollBar").hide=!0);this.list_hum.itemRender=a;this.list_hum.selectEnable=!0;this.list_hum.renderHandler=new Laya.Handler(this,this.UpdateHum);this.list_item.repeatX=1;this.list_item.repeatY=10;this.list_item.vScrollBarSkin="gameres/ui/vscroll.png";this.list_item.getChildByName("scrollBar")&&(this.list_item.getChildByName("scrollBar").hide=!0);this.list_item.itemRender=d;this.list_item.selectEnable=!0;this.list_item.renderHandler=new Laya.Handler(this,this.UpdateItem);Laya.stage.on("update_circum_hum",this,this.updateHumList);Laya.stage.on("update_circum_item",this,this.updateItemList)};b.updateinfo=function(){this.updateItemList();this.updateHumList()};b.updateHumList=function(){this.getHumList();this.list_hum.array=this.humArray};b.updateItemList=function(){this.getItemList();this.list_item.array=this.itemArray};b.updateChatList=function(){this.list_chat.renderHandler=new Laya.Handler(this,this.UpdateChat);this.list_chat.array=this.chatMsgList};b.getHumList=function(){var a=ObjectManage.object_list,b=[],c=ObjectManage.findobject(playerID);if(c){for(var d=0;d<a.length;d++)if(a[d]&&(3==a[d].type||2==a[d].type)&&null!=a[d].data&&a[d].data.record!=playerID&&a[d].txt_name&&""!==a[d].txt_name.text&&!(7<c.grid.distance(a[d].grid.x,a[d].grid.y))){var e=GameUtil.getName(a[d].type,a[d].txt_name.text,a[d].txt_name.nameList);b.push({key:e,value:a[d].data.record})}this.humArray=b}};b.getItemList=function(){var a=ItemMgr.getInstance().DropItemList,b=[],c=ObjectManage.findobject(playerID);if(c){for(var d=0;d<a.length;d++)if(a[d]){var e=a[d].Name,n=Get2RGB(a[d].Color),q=new Laya.Point(a[d].x,a[d].y);""!=e&&0!=n&&3>c.grid.distance(q.x,q.y)&&b.push({key:e,value:q,color:n})}this.itemArray=b}};b.UpdateHum=function(a){a.show(a.dataSource)};b.UpdateItem=function(a){a.show(a.dataSource)};b.UpdateChat=function(a){a.show(a.dataSource)};b.TabClick=function(a){a=a.target.name.toString();"btn_hum"==a?(this.box0.visible=!0,this.btn_hum.selected=!0,this.box1.visible=!1,this.btn_item.selected=!1):"btn_item"==a&&(this.box0.visible=!1,this.btn_hum.selected=!1,this.box1.visible=!0,this.btn_item.selected=!0)};b.showDetail=function(a){a==this.chat_detail?Laya.stage.event("show_chat_dlg",[null,!0]):a==this.task_detail&&1==TaskOpen&&(Laya.stage.event("game_dlg_cmd",[{id:"task_scene"}]),TaskOpen=!1)};b.updatetask=function(a,b){var c=this.panel_task;if(c&&!g_ClientConfig.boNewTaskMode){c.on(Laya.Event.CLICK,this,GameUtil.onRWWin_CLICK);c.removeChildren();for(var d=nGT_Y=nGT_X=0;d<g_MissCaptionList.length;d++){var e=new Laya.Image;e.y=nGT_Y;e.skin="gameres/png/rw_bg.png";e.width=185;e.height=25;if(""!=g_MissCaptionList[d].sTabName&&0<g_MissCaptionList[d].sList.length){var n=new Laya.Image;switch(g_MissCaptionList[d].sTabName){case "\u4e3b\u7ebf\u4efb\u52a1":n.skin="gameres/ui/task_main.png";break;case "\u652f\u7ebf\u4efb\u52a1":n.skin="gameres/ui/task_branch.png";break;case "\u65e5\u5e38\u4efb\u52a1":n.skin="gameres/ui/task_day.png";break;case "\u526f\u672c\u4efb\u52a1":n.skin="gameres/ui/task_fuben.png";break;case "\u6d3b\u52a8\u4efb\u52a1":n.skin="gameres/ui/task_event.png"}n.pos(0,0);n.size(39,20);e.addChild(n);for(n=0;n<g_MissCaptionList[d].sList.length;n++)""!=g_MissCaptionList[d].sList[n].sNvStr&&GameMission.ShowNavigation(g_MissCaptionList[d].sList[n].sShowtxt+"\\"+g_MissCaptionList[d].sList[n].sNvStr,e);c.addChild(e);nGT_Y+=e.height+2}}}};b.tidyMsg=function(a){var b="";a=a.split("{");for(var c=0;c<a.length;c++){var d=a[c];if(d){var e=d.indexOf("|"),n=d.indexOf("}");-1!=e&&-1!=n&&(e=d.substring(e,n+1),d=d.replace(e,""));b+=d}}return b};return c}(SimpleScreenUI),skillwin=function(b){function c(){c.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya["class"](c,"skillwin",skillwinUI);c.prototype.UpdateItem=function(a,b){a.settxt(a.dataSource,b)};c.prototype.init=function(){this.but_Close.on(Laya.Event.CLICK,this,this.close);this.skill_gb.skin="gameres/png/skillwin.png";this.skill_gb.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.skill_0.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_1.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_2.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_3.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_4.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_5.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_6.on(Laya.Event.CLICK,this,this.onskillDown);this.skill_7.on(Laya.Event.CLICK,this,this.onskillDown);this.but_rest.on(Laya.Event.CLICK,this,this.onbut_rest);Laya.stage.on("Update_Skill_Show",this,this.ShowSkillIcon);this.ShowSkillIcon()};c.prototype.onbut_rest=function(){for(var a=0;a<g_UserMagicList.length;a++)null!=g_UserMagicList[a]&&GameApi.SetSkillKey(g_UserMagicList[a].Def.wMagicId,0);for(a=0;a<g_SetupMagicList.length;a++)Laya.stage.event("remove_magic",a),g_SetupMagicList[a]=null;this.ShowSkillIcon();Laya.stage.event("add_magic_attack");Laya.stage.event("Magic_Refresh");Animationmodule.removeAniname("skilllockani");activate_ok=null};c.prototype.onskillDown=function(a){a=parseInt(a.target.name);if(null!=g_MoveSkill){if(g_SetupMagicList[a]==g_MoveSkill)return;for(var b=0;b<g_SetupMagicList.length;b++)if(null!=g_SetupMagicList[b]&&g_MoveSkill.Def.wMagicId==g_SetupMagicList[b].Def.wMagicId){GameApi.SetSkillKey(g_SetupMagicList[b].Def.wMagicId,0);Laya.stage.event("remove_magic",b);g_SetupMagicList[b]=null;break}null!=g_SetupMagicList[a]&&(GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,0),activate_ok==g_SetupMagicList[a]&&(activate_ok=null),Laya.stage.event("remove_magic",a));g_SetupMagicList[a]=g_MoveSkill;GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,a+49);null==g_SetupMagicList[12]?Laya.stage.event("add_magic_attack"):Laya.stage.event("add_magic_attack",[g_SetupMagicList[12]]);this.ShowSkillIcon();Laya.stage.event("Magic_Refresh");Laya.stage.event("update_icon",a)}console.log("onskillDown",a)};c.prototype.ShowSkillIcon=function(){for(var a=-1,b=null,c=0;c<this.but_bg._childs.length;c++)if(b=this.but_bg._childs[c],null!=b&&(b.removeChildren(),a=parseInt(b.name),null!=g_SetupMagicList[a])){var f=new Laya.Button,h=g_SetupMagicList[a].Def.btEffect;38==g_SetupMagicList[a].Def.wMagicId&&(h=4);46==g_SetupMagicList[a].Def.wMagicId&&(h=42);39==g_SetupMagicList[a].Def.wMagicId&&(h=0);GameUtil.loadImg(2*h,"magicon",function(a){f.skin=a});f.size(48,48);f.stateNum=1;f.name=b.name;b.addChild(f);b=new Laya.Text;b.text=g_SetupMagicList[a].Def.sMagicName;b.color="#ffffff";b.fontSize=10;f.addChild(b);b.x=(48-b.width)/2;b.y=30}};c.prototype.onMouseDown=function(b){this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.but_rest.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(a.x=b.stageX,a.y=b.stageY,this.skill_gb.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.skill_gb.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.skill_gb.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.skill_gb.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(b){this.but_Close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.but_rest.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.skill_gb.x+=b.stageX-a.x,this.skill_gb.y+=b.stageY-a.y,a.x=b.stageX,a.y=b.stageY)};c.prototype.close=function(){Laya.stage.off("Update_Skill_Show",this,this.ShowSkillIcon);this.removeSelf()};return c}(skillwinUI),statebonus=function(b){function c(){c.__super.call(this);this.init()}Laya["class"](c,"statebonus",statebonusUI);c.prototype.init=function(){this.startpos=new Laya.Point;this.btnnum=-1;this.btnbool=!1;this.btncount=0;Laya.timer.loop(100,this,this.statechange);this.statpoint_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.statpoint_close.on(Laya.Event.CLICK,this,this.close);this.state_panel.vScrollBarSkin="gameres/ui/vscroll.png";for(var a=1;10>a;a++){var b=this.state_panel.getChildByName("statpoint_plus"+a);b&&(b.on(Laya.Event.MOUSE_DOWN,this,this.setbtn,[a,!0,1]),b.on(Laya.Event.MOUSE_OUT,this,this.setbtn,[a,!1,1]),b.on(Laya.Event.MOUSE_UP,this,this.setbtn,[a,!1,1]))}for(a=1;10>a;a++)if(b=this.state_panel.getChildByName("statpoint_minus"+a))b.on(Laya.Event.MOUSE_DOWN,this,this.setbtn,[a,!0,-1]),b.on(Laya.Event.MOUSE_OUT,this,this.setbtn,[a,!1,-1]),b.on(Laya.Event.MOUSE_UP,this,this.setbtn,[a,!1,-1]);this.updatestate();this.statpoint_ok.on(Laya.Event.CLICK,this,function(){Sendmessage.sendAdjustBonus(g_nBonusPoint,g_BonusAbilChg);this.close()})};c.prototype.setbtn=function(a,b,c){this.btnnum=a;this.btnbool=b;this.btncount=c};c.prototype.statechange=function(){if(0<this.btnnum&&this.btnbool&&this.btncount){switch(this.btnnum){case 1:if(0>=g_BonusAbilChg.DC&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.DC+=this.btncount;break;case 2:if(0>=g_BonusAbilChg.MC&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.MC+=this.btncount;break;case 3:if(0>=g_BonusAbilChg.SC&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.SC+=this.btncount;break;case 4:if(0>=g_BonusAbilChg.AC&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.AC+=this.btncount;break;case 5:if(0>=g_BonusAbilChg.MAC&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.MAC+=this.btncount;break;case 6:if(0>=g_BonusAbilChg.HP&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.HP+=this.btncount;break;case 7:if(0>=g_BonusAbilChg.MP&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.MP+=this.btncount;break;case 8:if(0>=g_BonusAbilChg.Hit&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.Hit+=this.btncount;break;case 9:if(0>=g_BonusAbilChg.Speed&&-1==this.btncount||0>=g_nBonusPoint&&1==this.btncount)return;g_BonusAbilChg.Speed+=this.btncount}g_nBonusPoint-=this.btncount;this.updatestate()}};c.prototype.close=function(){this.statpoint_bg.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.statpoint_bg.off(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.statpoint_bg.off(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.statpoint_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);Laya.timer.clear(this,this.statechange);this.removeSelf()};c.prototype.onMouseDown=function(a){this.state_panel.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.statpoint_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.statpoint_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.statpoint_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.prototype.onMouseUp=function(){this.statpoint_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.statpoint_bg.x+=a.stageX-this.startpos.x;this.statpoint_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};c.prototype.updatestate=function(){var a=ObjectManage.findobject(playerID);if(g_BonusTick&&g_BonusAbil&&g_NakedAbil&&a&&a.m_Abil){var b=function(a,b,f){var c=CodeUtil._LOBYTE(a);a=CodeUtil._HIBYTE(a);for(var d=1;d<b+1;d++)c+1<a?(c++,f.x++):(a++,f.y++)};this.statpoint_minus1.disabled=0>=g_BonusAbilChg.DC;this.statpoint_minus2.disabled=0>=g_BonusAbilChg.MC;this.statpoint_minus3.disabled=0>=g_BonusAbilChg.SC;this.statpoint_minus4.disabled=0>=g_BonusAbilChg.AC;this.statpoint_minus5.disabled=0>=g_BonusAbilChg.MAC;this.statpoint_minus6.disabled=0>=g_BonusAbilChg.HP;this.statpoint_minus7.disabled=0>=g_BonusAbilChg.MP;this.statpoint_minus8.disabled=0>=g_BonusAbilChg.Hit;this.statpoint_minus9.disabled=0>=g_BonusAbilChg.Speed;this.statpoint_plus1.disabled=0>=g_nBonusPoint;this.statpoint_plus2.disabled=0>=g_nBonusPoint;this.statpoint_plus3.disabled=0>=g_nBonusPoint;this.statpoint_plus4.disabled=0>=g_nBonusPoint;this.statpoint_plus5.disabled=0>=g_nBonusPoint;this.statpoint_plus6.disabled=0>=g_nBonusPoint;this.statpoint_plus7.disabled=0>=g_nBonusPoint;this.statpoint_plus8.disabled=0>=g_nBonusPoint;this.statpoint_plus9.disabled=0>=g_nBonusPoint;this.point1.text=g_BonusAbilChg.DC+g_BonusAbil.DC+" / "+g_BonusTick.DC;this.point2.text=g_BonusAbilChg.MC+g_BonusAbil.MC+" / "+g_BonusTick.MC;this.point3.text=g_BonusAbilChg.SC+g_BonusAbil.SC+" / "+g_BonusTick.SC;this.point4.text=g_BonusAbilChg.AC+g_BonusAbil.AC+" / "+g_BonusTick.AC;this.point5.text=g_BonusAbilChg.MAC+g_BonusAbil.MAC+" / "+g_BonusTick.MAC;this.point6.text=g_BonusAbilChg.HP+g_BonusAbil.HP+" / "+g_BonusTick.HP;this.point7.text=g_BonusAbilChg.MP+g_BonusAbil.MP+" / "+g_BonusTick.MP;this.point8.text=g_BonusAbilChg.Hit+g_BonusAbil.Hit+" / "+g_BonusTick.Hit;this.point9.text=g_BonusAbilChg.Speed+g_BonusAbil.Speed+" / "+g_BonusTick.Speed;var c=new Laya.Point(0,0),g=new Laya.Point(0,0),f=new Laya.Point(0,0),h=new Laya.Point(0,0),l=new Laya.Point(0,0),m=new Laya.Point(0,0),n=new Laya.Point(0,0),q=new Laya.Point(0,0),p=new Laya.Point(0,0),r=new Laya.Point(0,0),v=parseInt((g_BonusAbilChg.DC+g_BonusAbil.DC)/g_BonusTick.DC),w=parseInt((g_BonusAbilChg.MC+g_BonusAbil.MC)/g_BonusTick.MC),z=parseInt((g_BonusAbilChg.SC+g_BonusAbil.SC)/g_BonusTick.SC),C=parseInt((g_BonusAbilChg.AC+g_BonusAbil.AC)/g_BonusTick.AC),u=parseInt((g_BonusAbilChg.MAC+g_BonusAbil.MAC)/g_BonusTick.MAC),B=parseInt(g_BonusAbil.DC/g_BonusTick.DC),A=parseInt(g_BonusAbil.MC/g_BonusTick.MC),D=parseInt(g_BonusAbil.SC/g_BonusTick.SC),F=parseInt(g_BonusAbil.AC/g_BonusTick.AC),E=parseInt(g_BonusAbil.MAC/g_BonusTick.MAC);b(g_NakedAbil.DC,v,c);b(g_NakedAbil.MC,w,g);b(g_NakedAbil.SC,z,f);b(g_NakedAbil.AC,C,h);b(g_NakedAbil.MAC,u,l);b(g_NakedAbil.DC,B,m);b(g_NakedAbil.MC,A,n);b(g_NakedAbil.SC,D,q);b(g_NakedAbil.AC,F,p);b(g_NakedAbil.MAC,E,r);this.state1.text=a.m_Abil.DC+c.x-m.x+" - "+(a.m_Abil.MaxDC+c.y-m.y);this.state2.text=a.m_Abil.MC+g.x-n.x+" - "+(a.m_Abil.MaxMC+g.y-n.y);this.state3.text=a.m_Abil.SC+f.x-q.x+" - "+(a.m_Abil.MaxSC+f.y-q.y);this.state4.text=a.m_Abil.AC+h.x-p.x+" - "+(a.m_Abil.MaxAC+h.y-p.y);this.state5.text=a.m_Abil.MAC+l.x-r.x+" - "+(a.m_Abil.MaxMAC+l.y-r.y);this.state6.text=a.m_Abil.MaxHP+parseInt(g_BonusAbilChg.HP/g_BonusTick.HP);this.state7.text=a.m_Abil.MaxMP+parseInt(g_BonusAbilChg.MP/g_BonusTick.MP);this.state8.text=g_nMyHitPoint+parseInt(g_BonusAbilChg.Hit/g_BonusTick.Hit);this.state9.text=g_nMySpeedPoint+parseInt(g_BonusAbilChg.Speed/g_BonusTick.Speed);this.pointcount.text=g_nBonusPoint}else this.statpoint_bg.visible=!1};return c}(statebonusUI),StoreWin=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.item=new StoreItemUI;this.addChild(this.item);this.item.ItemBy.on(Laya.Event.CLICK,this,function(){var a=this.dataSource.Item.MakeIndex;a&&""!=a&&g_StoreName&&""!=g_StoreName&&Laya.stage.event("show_alert_dlg",[{type:2,txt:'\u662f\u5426\u786e\u8ba4\u8d2d\u4e70"'+this.item.ItemNmae.text+'"?',callfn:function(){Sendmessage.SendBuyUserShopItem(a,g_StoreName)}}])});this.show=function(a,b){var c=GameUtil.ShowMoneyType(a.btMoneyType),f=GameUtil.ShowbtItemType(a.btItemType);GameUtil.ShowItemNum(a.Item,this.item.ItemImg,23.5,18.5);this.item.ItemNmae.text=a.Item.s.Name;this.item.ItemPrice.text=a.Item.s.Price+c;this.item.ItemType.text=f;this.item.ItemTime.text=a.dCreateDate;this.item.ItemBy.text="\u8d2d\u4e70"}}Laya["class"](c,"StoreWin",StoreUI);b=c.prototype;Laya["class"](a,"ShowStoreItems",Laya.Box);b.init=function(){var a=["\u4e0d\u9650"];this.txt_name.text=g_StoreName+"\u7684\u5e97\u94fa";this.txt_state.text="\u5f53\u524d\u72b6\u6001\uff1a"+g_StoreOnline;this.txt_num.text="\u5e97\u94fa\u7269\u54c1\u6570\uff1a"+G_Total_Item_num;this.startpos=new Laya.Point;this.btn_close.on(Laya.Event.CLICK,this,this.BtnClose);this.btn_first.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_previous.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_next.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_last.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_itemsearch.on(Laya.Event.CLICK,this,this.BtnClick);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);Laya.stage.on("game_show_storeItem",this,this.ShowItems);Laya.stage.on("game_show_showStorePage",this,this.ShowPage);for(var b=0;b<g_GameMoneyType.length;b++)g_GameMoneyType[b]&&""!=g_GameMoneyType[b]&&a.push(g_GameMoneyType[b]);this.pricetype.labels=a.toString();this.pricetype.selectedIndex=0;this.ShowList()};b.ShowList=function(){this.List_store.repeatX=1;this.List_store.repeatY=5;this.List_store.itemRender=a;this.List_store.selectEnable=!0;this.List_store.selectHandler=new Laya.Handler(this,this.onSelect);this.List_store.renderHandler=new Laya.Handler(this,this.updataItem)};b.ShowItems=function(a){this.List_store.array=a;this.Selected=-1};b.onSelect=function(a){this.Selected=a};b.updataItem=function(a,b){-1==this.Selected&&a.show(a.dataSource,b);this.Selected==b?(a.item.img_bg.skin="gameres/png/personalstore_00112.png",g_OpenIdx=24,SelectedStoreItem=a.dataSource.Item,AddStoreItem=null,a.dataSource&&GameUtil.NewShowItemsInf(a.dataSource.Item,null,this.img_bg.x)):a.item.img_bg.skin=""};b.BtnClose=function(){Laya.stage.off("game_show_storeItem",this,this.ShowItems);Laya.stage.off("game_show_showStorePage",this,this.ShowPage);this.removeSelf()};b.BtnClick=function(a){switch(a.target.name){case "btn_first":0<G_Cur_Item_Page&&Sendmessage.GetUserShopItems(0);break;case "btn_previous":0<G_Cur_Item_Page&&Sendmessage.GetUserShopItems(G_Cur_Item_Page-5);break;case "btn_next":5<G_Total_Item_num-G_Cur_Item_Page&&Sendmessage.GetUserShopItems(G_Cur_Item_Page+5);break;case "btn_last":5<G_Total_Item_num-G_Cur_Item_Page&&Sendmessage.GetUserShopItems(5*(this.MaxPage-1));break;case "btn_itemsearch":this.Search()}this.List_store.selectedIndex=-1};b.Search=function(){var a=GameUtil.ShowSelectedIdx(this.pricetype.selectedLabel),b=parseInt(this.price_low.text),c=parseInt(this.price_high.text);Sendmessage.QueryUserShopItems(b,c,this.ItemType.selectedIndex,a,this.ItemSort.selectedIndex,this.ItemSearch.text,g_StoreName)};b.ShowPage=function(a,b,c){this.MaxPage=Math.ceil(a/c);this.CurPage=Math.ceil(b/c)+1;0==a&&(this.CurPage=0);5==c&&(this.txt_page.text="\u9875\u6570\uff1a"+this.CurPage+"/"+this.MaxPage)};b.OnMouseDown=function(a){this.List_store.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};b.onMouseMove=function(a){this.img_bg.x+=a.stageX-this.startpos.x;this.img_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};b.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};return c}(StoreUI),TaskScene=function(b){function c(){c.__super.call(this);this.size(350,30);this.lb_txt=new Laya.Button;this.lb_txt.size(142,54);this.lb_txt.labelColors="#faf4e4,#faf4e4";this.lb_txt.labelSize=16;this.lb_txt.stateNum=2;this.lb_txt.skin="gameres/ui/tast_btn_selected.png";this.addChild(this.lb_txt);this.settxt=function(a){this.lb_txt.label=a.sShowtxt}}function a(){a.__super.call(this);this.init()}var d=new Laya.Point(0,0);Laya["class"](c,"tasktitle",Laya.Box);Laya["class"](a,"TaskScene",TaskSceneUI);a.prototype.update=function(){this.updatetitle();this.updatepaging();this.updatecontent()};a.prototype.init=function(){this.img_url=0;this.btn_close.on(Laya.Event.CLICK,this,this.close);this.task_Win.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.task_Win.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.task_Win.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove);this.img_bj2.vScrollBarSkin="";this.btn_panel.hScrollBarSkin="";this.update()};a.prototype.onMouseDown=function(){if(!(this.btn_close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.img_bj2.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.list_title_w.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.btn_panel.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY))&&this.task_Win.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var a=this.task_Win.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));d.x=a.x;d.y=a.y;this.TaskCanMove=!0}};a.prototype.onMouseUp=function(){this.TaskCanMove=!1};a.prototype.onMouseMove=function(){if(!this.btn_close.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&!this.img_bj2.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&!this.list_title_w.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.task_Win.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&this.TaskCanMove){var a=this.task_Win.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.task_Win.x+=a.x-d.x;this.task_Win.y+=a.y-d.y}};a.prototype.updatetitle=function(){for(var a=0;a<g_MissCaptionList.length;a++)if(""!=g_MissCaptionList[a].sTabName&&0<g_MissCaptionList[a].sList.length){var b=new Laya.Button("gameres/ui/auxiliary_tab.png",g_MissCaptionList[a].sTabName);b.stateNum=2;b.name=""+a;b.width=142;b.height=49;b.labelColors="#ffffff,#ffffff";b.labelSize=16;b.labelStroke=2;b.labelStrokeColor="#000000";b.pos(1+146*a,1);b.on(Laya.Event.CLICK,this,this.onTab_CLICK);this.btn_panel.addChild(b)}};a.prototype.getcontent=function(){};a.prototype.updatepaging=function(){var a=[];if(g_MissCaptionList[g_MissIndex])for(var b=0;b<g_MissCaptionList[g_MissIndex].sList.length;b++)""!=g_MissCaptionList[g_MissIndex].sList[b].sShowtxt&&""!=g_MissCaptionList[g_MissIndex].sList[b].sMemo&&a.push(g_MissCaptionList[g_MissIndex].sList[b]);this.list_title.itemRender=c;this.list_title.repeatX=1;this.list_title.repeatY=4;this.list_title.selectEnable=!0;this.list_title.renderHandler=new Laya.Handler(this,this.updateitem);this.list_title.selectHandler=new Laya.Handler(this,this.select);this.list_title.array=a;this.img_bj2.removeChildren()};a.prototype.updateitem=function(a,b){a.settxt(a.dataSource);a.lb_txt.selected=this.selectIndex==b?!0:!1};a.prototype.select=function(a){this.selectIndex=a;a=this.list_title.array[this.selectIndex].sMemo;""==a&&(Sendmessage.gettmissitem(rw_recog,10,"@"+this.list_title.array[this.selectIndex].sCmdGo),a=this.list_title.array[this.selectIndex].sNvStr);this.ShowMissMemo(a);this.list_title._selectedIndex=-1};a.prototype.onTab_CLICK=function(a){for(var b=0;b<g_MissCaptionList.length;b++){var f=this.btn_panel.getChildByName(b.toString());f&&(f.selected=!1)}b=parseInt(a.target.name);a.target.selected=!0;b<g_MissCaptionList.length&&(g_MissIndex=b,this.updatepaging());this.selectIndex=-1};a.prototype.ShowMissMemo=function(a){this.img_bj2.removeChildren();a=a.split("\\");for(var b=-1,f=8,c=9;;){b+=1;if(b>=a.length)break;if(""!=a[b]){var d=a[b].indexOf("{"),m=a[b].indexOf("}");-1!=d&&-1!=m&&(a[b]=a[b].replace("{","\x3c"),a[b]=a[b].replace("}","\x3e"));for(var n=a[b].split("\x3c"),q=0;q<n.length;q++)if(""!=n[q])for(var p=n[q].split("\x3e"),r=0;r<p.length;r++)if(""!=p[r]){var v=p[r].toUpperCase();if(-1!=v.indexOf("#NEW"))d=v.indexOf("#NEW("),m=v.indexOf(")"),d=v.substr(d+5,m-d-5),v=v.substr(m+1,v.length),d=GameUtil.GetMissGloba(d,parseInt(v),0),""==d&&(d=v),m=new Laya.Text,m.fontSize=14,m.color="#ffffff",m.text=""+d,m.pos(f,c),f+=GameApi.newcount(m)+GameApi.GetSpWidth(m.text),this.img_bj2.addChild(m);else if(-1!=v.indexOf("ITEMSHOW")){var w=-1,m=-1,z=v.split(":");if(z&&4<z.length)for(var C=new Laya.Image,u=parseInt(z[3]),B=parseInt(z[4]),v=0;v<g_Showitem.length;v++)if(z[1]==g_Showitem[v].s.nIdx){w=v;m=g_Showitem[v].s.Looks;break}if(-1!=m){(Array(5).join("0")+(0+m)).slice(-5);GameUtil.loadImg(m,"items",function(a){C.skin=a;if(-1!=w)C.on(Laya.Event.CLICK,A,A.onShowItemClick,[w]);"1"==z[5]?(a=new Laya.Image,a.skin="data/prguse/00265.png",a.pos(f+u,c+B),A.img_bj2.addChild(a),z[6]&&z[7]&&C.pos(parseInt(z[6]),parseInt(z[7])),a.addChild(C)):(C.pos(f+u,c+B),A.img_bj2.addChild(C));f+=C.width});var A=this}else C.pos(f+u,nG_y+B),this.img_bj2.addChild(C),f+=C.width;z[2]&&0<parseInt(z[2])&&(v=new Laya.Text,v.color="#ffffff",v.align="right",v.text=z[2],v.pos(25,18),C.addChild(v))}else{if(-1!=v.indexOf("FCOLOR")||-1!=v.indexOf("SCOLOR")){d=v.indexOf("FCOLOR");m=new Laya.Text;m.fontSize=14;m.color="#ffffff";if(-1!=d)var d=v.indexOf("/FCOLOR\x3d"),D=v.substr(d+8,3);else d=v.indexOf("/SCOLOR\x3d"),D=v.substr(d+8,3);v=v.substr(0,d);m.color=Get2RGB(D);m.text=v;m.pos(f,c);f+=GameApi.newcount(m)+GameApi.GetSpWidth(m.text)}else-1!=v.indexOf("/@")?(m=new Laya.Text,m.fontSize=14,m.color=Get2RGB("251"),v=v.split("/@"),m.text=v[0],m.name=v[1],m.underline=!0,m.on(Laya.Event.MOUSE_DOWN,this,GameUtil.onLa_CLICK),m.on(Laya.Event.MOUSE_UP,this,GameUtil.onLa_CLICK_OVER),m.on(Laya.Event.MOUSE_OUT,this,GameUtil.onLa_CLICK_OVER),m.pos(f,c),f+=GameApi.newcount(m)+GameApi.GetSpWidth(m.text)):(m=new Laya.Text,m.fontSize=14,m.color="#ffffff",m.text=v,m.pos(f,c),f+=GameApi.newcount(m)+GameApi.GetSpWidth(v));this.img_bj2.addChild(m)}}c+=18;f=0}}};a.prototype.onShowItemClick=function(a){-1!=a&&a<g_Showitem.length&&null!=g_Showitem[a]&&(g_OpenIdx=5,g_MoveItems.Items=g_Showitem[a],GameUtil.NewShowItemsInf(g_MoveItems.Items))};a.prototype.ShowMissMemo_bak=function(a){this.img_bj2.removeChildren();for(var b=0,f=8,c=9;;)if(""!=a){a=a.replace("{","\x3c");a=a.replace("}","\x3e");var d=a.split("\\");if(b<d.length){if(""!=d[b]){if(0<d[b].indexOf("$"))break;for(var d=d[b].split("\x3c"),m=0;m<d.length;m++)if(""!=d[m]&&-1==d[m].indexOf(";"))for(var n=d[m].split("\x3e"),q=0;q<n.length;q++)if(""!=n[q]){var p="",r=new Laya.Label;r.color="#ffffff";r.fontSize=14;if(0<n[q].indexOf("#new")){var v=n[q].split(")"),w=v[0].split("(");""!=w[1]&&(v=v[1].split("}"),""!=v[0]&&(w=GameUtil.GetMissGloba(w[1],parseInt(v[0]),0),r.text=""+w+v[1]))}else p=n[q].split("/"),r.text=p[0];-1!=n[q].indexOf("FCOLOR")&&(w=p[1].split("\x3d"),""!=w[1]&&(r.color=Get2RGB(w[1])));-1!=n[q].indexOf("@")&&(w=p[1].split("@"),""!=w[1]&&(r.color=Get2RGB("251"),r.name=w[1],r.on(Laya.Event.CLICK,this,GameUtil.onLa_CLICK)));""!=p[0]&&(r.pos(f,c),f+=r.width,this.img_bj2.addChild(r))}}c+=18;f=8;b+=1}else break}else break};a.prototype.updatecontent=function(){};a.prototype.close=function(){this.removeSelf();TaskOpen=!0};return a}(TaskSceneUI);(function(){function b(){b.__super.call(this);this.Init()}Laya["class"](b,"UIAlert",laya.display.Sprite);var c=b.prototype;c.Init=function(){this.ShowCallFn=null;this.Cfg={};Laya.stage.on("show_alert_dlg",this,this.ShowAlert);this.ResLoaded()};c.OnFocus=function(){cur_use_app&&(this.root.img_bg.top=0)};c.OnBlur=function(){cur_use_app&&(this.root.img_bg.y=117)};c.ResLoaded=function(){this.root=new AlertUI;this.addChild(this.root);this.ResetUI()};c.ShowAlert=function(a){if(this.root){this.root.visible=!0;this.Cfg=a;var b=this.root.img_bg.getChildByName("node_grop"),c=this.root.img_bg.getChildByName("btn_ok"),g=this.root.img_bg.getChildByName("txt_input");g.text="";var f=this.root.img_bg.getChildByName("lbl_txt_ipt"),h=this.root.img_bg.getChildByName("sel_node");h.getChildByName("btn_sel_0").visible=!1;h.getChildByName("btn_sel_1").visible=!1;h.getChildByName("lbl_sel_0").visible=!1;h.getChildByName("lbl_sel_1").visible=!1;a.ipttype&&(g.type=a.ipttype);f&&(f.y=87);switch(a.type){case 1:b.visible=!1;c.visible=!0;g.visible=!1;f.visible=!1;h.visible=!1;break;case 2:b.visible=!0;c.visible=!1;g.visible=!1;f.visible=!1;h.visible=!1;h.getChildByName("btn_sel_0").visible=!1;h.getChildByName("btn_sel_1").visible=!1;h.getChildByName("lbl_sel_0").visible=!1;h.getChildByName("lbl_sel_1").visible=!1;break;case 3:b.visible=!1;c.visible=!1;g.visible=!1;var l=this;f.visible=!1;h.visible=!1;setTimeout(function(){l.visible=!1;clearTimeout(this)},5E3);break;case 4:g.visible=!0;b.visible=!0;c.visible=!1;f.text=a.txt;f.y=51;f.visible=!0;h.visible=!1;a.txt="";break;case 5:g.visible=!0;g.mouseEnabled=!0;h.visible=!0;b.visible=!0;c.visible=!1;f.visible=!0;f.text=a.des;f.y=51;h.getChildByName("btn_sel_0").visible=!0;h.getChildByName("btn_sel_1").visible=!0;h.getChildByName("btn_sel_0").selected=!0;h.getChildByName("btn_sel_1").selected=!1;h.getChildByName("lbl_sel_0").text=a.sel_des;h.getChildByName("lbl_sel_1").text=a.sel_des1;h.getChildByName("lbl_sel_0").visible=!0;h.getChildByName("lbl_sel_1").visible=!0;break;case 6:b.visible=!1;c.visible=!0;g.visible=!1;f.visible=!1;h.visible=!1;Actionlock=!0;Laya.timer.once(3E3,this,function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u521d\u59cb\u5316\u6570\u636e\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u52a0\u8f7d\uff01",callfn:function(){Laya.Browser.window.location.reload()}}])});break;case 7:b.visible=!1,c.visible=!0,g.visible=!1,f.visible=!1,h.visible=!1}this.root.img_bg.getChildByName("lbl_txt").text=a.txt;a.callfn&&(this.ShowCallFn=a.callfn);a.callcancelfun&&(this.CallCancelFn=a.callcancelfun);this.root.img_bg.pos((Laya.stage.width-this.root.img_bg.width)/2,(Laya.stage.height-this.root.img_bg.height)/2)}};c.ResetUI=function(){this.root.visible=!1;this.root.img_bg.getChildByName("btn_ok").on(Laya.Event.CLICK,this,this.BtnClick);this.root.img_bg.getChildByName("node_grop").getChildByName("btn_ok").on(Laya.Event.CLICK,this,this.BtnClick);this.root.img_bg.getChildByName("node_grop").getChildByName("btn_cnl").on(Laya.Event.CLICK,this,this.BtnClick);this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_0").on(Laya.Event.CLICK,this,this.BtnClick);this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_1").on(Laya.Event.CLICK,this,this.BtnClick);this.root.img_bg.getChildByName("txt_input").on(Laya.Event.FOCUS,this,this.OnFocus);this.root.img_bg.getChildByName("txt_input").on(Laya.Event.BLUR,this,this.OnBlur)};c.BtnClick=function(a){switch(a.target.name){case "btn_ok":if(this.ShowCallFn){if(5==this.Cfg.type)this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_0").selected?type=0:this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_1").selected&&(type=1),a=this.root.img_bg.getChildByName("txt_input").text,a={type:0,num:parseInt(a),id:this.Cfg.id};else if(4==this.Cfg.type)a=this.root.img_bg.getChildByName("txt_input").text;else{a={num:this.root.img_bg.getChildByName("txt_input").text};var b=this.root.img_bg.getChildByName("lbl_txt").text;1<=b.indexOf("\u5f3a\u884c\u79bb\u7ebf")&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f3a\u884c\u79bb\u7ebf\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u52a0\u8f7d\uff01",callfn:function(){Laya.Browser.window.location.reload()}}])}this.ShowCallFn(a);this.ShowCallFn=null}else 1==this.Cfg.type&&(b=this.root.img_bg.getChildByName("lbl_txt").text,1<=b.indexOf("\u5f3a\u884c\u79bb\u7ebf")&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f3a\u884c\u79bb\u7ebf\uff0c\u70b9\u51fb\u786e\u5b9a\u91cd\u65b0\u52a0\u8f7d\uff01",callfn:function(){Laya.Browser.window.location.reload()}}]));this.root.visible=!1;break;case "btn_cnl":this.root.visible=!1;this.CallCancelFn&&this.CallCancelFn();break;case "btn_sel_0":this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_0").selected=!0;this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_1").selected=!1;break;case "btn_sel_1":this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_0").selected=!1,this.root.img_bg.getChildByName("sel_node").getChildByName("btn_sel_1").selected=!0}}})();var uiAuxiliary=function(b){function c(){c.__super.call(this);this.Init()}Laya["class"](c,"uiAuxiliary",AuxiliaryUI);b=c.prototype;b.Init=function(){this.ShowDlg();this.skill_list4=this.skill_list3=this.skill_list1=this.skill_list0=this.skill_list="\u7a7a";this.itemSort_list=[];this.startpos=new Laya.Point;this.onloaded();this.showDrugImg();this.update_m2set();this.getSkill();this.Controlsinit();this.heroeqsecure.visible=!1;this.viewControl.min=1;this.viewControl.max=1.5;this.viewControl.tick=.25;this.viewControl.value=1;this.viewControl.changeHandler=new Laya.Handler(this,function(a){this.viewValue.text=~~(100*a)+"%";this.viewControl.value=a;Mapmodule.root.scale(a,a);Mapmodule.onLocation();GlobalCfglist.viewScale=Math.floor(100*a)});if(GlobalCfglist.viewScale){var a="";switch(GlobalCfglist.viewScale){case 100:a="100%";this.viewControl.value=1;break;case 125:a="125%";this.viewControl.value=1.25;break;case 150:a="150%",this.viewControl.value=1.5}this.viewValue.text=a}this.humsimple.visible=1==g_ClientConfig.boClothesSimple;this.monsimple.visible=1==g_ClientConfig.boMonSimple;this.weaponsimple.visible=1==g_ClientConfig.boWeaponSimple;Laya.stage.on("setSimple",this,this.setSimple)};b.setSimple=function(){(1==g_ClientConfig.boClothesSimple&&!GlobalCfglist.humsimple||1==g_ClientConfig.boMonSimple&&!GlobalCfglist.monsimple||1==g_ClientConfig.boWeaponSimple&&!GlobalCfglist.weaponsimple)&&Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u68c0\u6d4b\u5230\u60a8\u5f53\u524d\u5ef6\u8fdf\u8f83\u9ad8\uff0c\u5df2\u4e3a\u60a8\u6253\u5f00\u7b80\u88c5\u6a21\u5f0f\u3002\r\n\u5982\u4e0d\u9700\u8981\uff0c\u53ef\u5728\u8bbe\u7f6e\u754c\u9762\u4e2d\u5173\u95ed\u3002",callfn:function(){}}]);1==g_ClientConfig.boClothesSimple&&(this.humsimple.selected=!0,GlobalCfglist.humsimple=!0);1==g_ClientConfig.boMonSimple&&(this.monsimple.selected=!0,GlobalCfglist.monsimple=!0);1==g_ClientConfig.boWeaponSimple&&(this.weaponsimple.selected=!0,GlobalCfglist.weaponsimple=!0)};b.onloaded=function(){this.img_base.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.btn_exit.on(Laya.Event.CLICK,this,this.BtnClick);this.tab.on(Laya.Event.CLICK,this,this.ShowDlg);g_ClientConfig&&g_ClientConfig.DOpenHeroButton&&(this.item6.visible=!0);this.hpN_img.on(Laya.Event.CLICK,this,this.setDrug,[0]);this.mpN_img.on(Laya.Event.CLICK,this,this.setDrug,[1]);this.hpS_img.on(Laya.Event.CLICK,this,this.setDrug,[2]);this.mpS_img.on(Laya.Event.CLICK,this,this.setDrug,[2]);this.tp_img.on(Laya.Event.CLICK,this,this.setDrug,[3]);this.tp1_img.on(Laya.Event.CLICK,this,this.setDrug,[3]);Laya.stage.on("setDrugImg",this,this.setDrugImg);Laya.stage.on("update_m2set",this,this.update_m2set);Laya.stage.on("update_autoSkill",this,this.getSkill);this.hpN_imgH.on(Laya.Event.CLICK,this,this.setDrug,[4]);this.mpN_imgH.on(Laya.Event.CLICK,this,this.setDrug,[5]);this.hpS_imgH.on(Laya.Event.CLICK,this,this.setDrug,[6]);this.mpS_imgH.on(Laya.Event.CLICK,this,this.setDrug,[6]);this.hptimetext.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.hp_time]);this.mptimetext.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.mp_time]);this.hptimetext1.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.hp_mp_time]);this.mptimetext1.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.hp_mp_time2]);this.tptimetext.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.tp_time_vs]);this.tptimetext1.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.tp_time_vs2]);this.hptimetextH.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.hp_timeH]);this.mptimetextH.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.mp_timeH]);this.hptimetext1H.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.hp_mp_timeH]);this.mptimetext1H.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.hp_mp_time2H]);this.tptimetextH.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.tp_time_vsH]);this.exercise_time.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.exercise_slider]);this.ds_cure_time.on(Laya.Event.MOUSE_DOWN,this,this.showTimeBar,[this.ds_time_slider]);this.hp_time.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.mp_time.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.hp_mp_time.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.hp_mp_time2.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.tp_time_vs.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.tp_time_vs2.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.hp_timeH.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.mp_timeH.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.hp_mp_timeH.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.hp_mp_time2H.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.tp_time_vsH.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.exercise_slider.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);this.ds_time_slider.on(Laya.Event.MOUSE_UP,this,this.showTimeBar);for(var a=0;7>a;a++){var b=this.img_base.getChildByName("box"+a);b&&b._childs&&this.setEvent(b)}this.z_autoskill_1.on(Laya.Event.CHANGE,this,this.checkBox,[this.z_autoskill_1]);this.z_autoskill_2.on(Laya.Event.CHANGE,this,this.checkBox,[this.z_autoskill_2]);this.z_autoskill_3.on(Laya.Event.CHANGE,this,this.checkBox,[this.z_autoskill_3]);this.z_autoskill_4.on(Laya.Event.CHANGE,this,this.checkBox,[this.z_autoskill_4]);this.zs_gwcs.on(Laya.Event.CHANGE,this,this.checkBox,[this.zs_gwcs]);this.zs_lyjf.on(Laya.Event.CHANGE,this,this.checkBox,[this.zs_lyjf]);this.zs_zrjf.on(Laya.Event.CHANGE,this,this.checkBox,[this.zs_zrjf]);this.i_delayShow.on(Laya.Event.CHANGE,this,this.checkBox,[this.i_delayShow]);this.f_autoskill_1.on(Laya.Event.CHANGE,this,this.checkBox,[this.f_autoskill_1]);this.f_keepskill_1.on(Laya.Event.CHANGE,this,this.checkBox,[this.f_keepskill_1]);this.d_autoskill_2.on(Laya.Event.CHANGE,this,this.checkBox,[this.d_autoskill_2]);this.d_autoskill_3.on(Laya.Event.CHANGE,this,this.checkBox,[this.d_autoskill_3]);this.d_autoskill_1.on(Laya.Event.CHANGE,this,this.comboBox,[this.d_autoskill_1]);this.d_autoskill_5.on(Laya.Event.CHANGE,this,this.checkBox,[this.d_autoskill_5]);this.d_autoskill_6.on(Laya.Event.CHANGE,this,this.checkBox,[this.d_autoskill_6]);this.d_autoskill_7.on(Laya.Event.CHanGE,this,this.comboBox,[this.d_autoskill_7]);this.d_autoskill_8.on(Laya.Event.CHaNGE,this,this.comboBox,[this.d_autoskill_8]);this.hp_vs.on(Laya.Event.CHANGE,this,this.barAtion,[this.hp_vs,this.hp_pro]);this.hp_time.on(Laya.Event.CHANGE,this,this.barAtion,[this.hp_time]);this.mp_vs.on(Laya.Event.CHANGE,this,this.barAtion,[this.mp_vs,this.mp_pro]);this.mp_time.on(Laya.Event.CHANGE,this,this.barAtion,[this.mp_time]);this.Hp_mp_vs.on(Laya.Event.CHANGE,this,this.barAtion,[this.Hp_mp_vs,this.Hp_mp_pro]);this.hp_mp_time.on(Laya.Event.CHANGE,this,this.barAtion,[this.hp_mp_time]);this.Hp_mp_vs2.on(Laya.Event.CHANGE,this,this.barAtion,[this.Hp_mp_vs2,this.Hp_mp_pro2]);this.hp_mp_time2.on(Laya.Event.CHANGE,this,this.barAtion,[this.hp_mp_time2]);this.tp_vs.on(Laya.Event.CHANGE,this,this.barAtion,[this.tp_vs,this.tp_pro]);this.tp_vs1.on(Laya.Event.CHANGE,this,this.barAtion,[this.tp_vs1,this.tp_pro1]);this.tp_time_vs.on(Laya.Event.CHANGE,this,this.barAtion,[this.tp_time_vs]);this.tp_time_vs2.on(Laya.Event.CHANGE,this,this.barAtion,[this.tp_time_vs2]);this.ds_limit_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.ds_limit_slider]);this.ds_time_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.ds_time_slider]);this.hp_vsH.on(Laya.Event.CHANGE,this,this.barAtion,[this.hp_vsH,this.hp_proH]);this.hp_timeH.on(Laya.Event.CHANGE,this,this.barAtion,[this.hp_timeH]);this.mp_vsH.on(Laya.Event.CHANGE,this,this.barAtion,[this.mp_vsH,this.mp_proH]);this.mp_timeH.on(Laya.Event.CHANGE,this,this.barAtion,[this.mp_timeH]);this.Hp_mp_vsH.on(Laya.Event.CHANGE,this,this.barAtion,[this.Hp_mp_vsH,this.Hp_mp_proH]);this.hp_mp_timeH.on(Laya.Event.CHANGE,this,this.barAtion,[this.hp_mp_timeH]);this.Hp_mp_vs2H.on(Laya.Event.CHANGE,this,this.barAtion,[this.Hp_mp_vs2H,this.Hp_mp_pro2H]);this.hp_mp_time2H.on(Laya.Event.CHANGE,this,this.barAtion,[this.hp_mp_time2H]);this.tp_vsH.on(Laya.Event.CHANGE,this,this.barAtion,[this.tp_vsH,this.tp_proH]);this.tp_time_vsH.on(Laya.Event.CHANGE,this,this.barAtion,[this.tp_time_vsH]);this.exercise_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.exercise_slider]);this.ds_limit_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.ds_limit_slider,this.ds_limit_pro]);this.ds_time_slider.on(Laya.Event.CHANGE,this,this.barAtion,[this.ds_time_slider]);this.gameVoice.on(Laya.Event.CHANGE,this,function(){this.gameVoice.value&&(Laya.SoundManager.soundVolume=this.gameVoice.value/100-.01,this.voiceLable.text=this.gameVoice.value-1,GlobalCfglist.gameVoice=this.gameVoice.value)});this.itemtext.on(Laya.Event.INPUT,this,this.TxtSelectItemChange);this.searchMonster.on(Laya.Event.INPUT,this,this.TxtSelectMosterChange);this.btn_ref.on(Laya.Event.CLICK,this,this.resetItemList);this.btn_ref_mon.on(Laya.Event.CLICK,this,this.resetMosterList);this.allShow.on(Laya.Event.CHANGE,this,this.AllChange,[0]);this.allPick.on(Laya.Event.CHANGE,this,this.AllChange,[1]);this.allColor.on(Laya.Event.CHANGE,this,this.AllChange,[2]);this.allAutopick.on(Laya.Event.CHANGE,this,this.AllChange,[3]);this.allCancel.on(Laya.Event.CHANGE,this,this.AllCancel);this.itemtext.on(Laya.Event.FOCUS,this,this.OnFocus);this.itemtext.on(Laya.Event.BLUR,this,this.OnBlur);this.itemSort_select.on(Laya.Event.CLICK,this,function(){this.itemSort_bg.visible=!this.itemSort_bg.visible});this.itemSort_all.on(Laya.Event.CLICK,this,this.itemSort,[this.itemSort_all]);this.itemSort_skill.on(Laya.Event.CLICK,this,this.itemSort,[this.itemSort_skill]);this.itemSort_weapon.on(Laya.Event.CLICK,this,this.itemSort,[this.itemSort_weapon]);this.itemSort_clothes.on(Laya.Event.CLICK,this,this.itemSort,[this.itemSort_clothes]);this.itemSort_jewelry.on(Laya.Event.CLICK,this,this.itemSort,[this.itemSort_jewelry]);this.itemSort_drug.on(Laya.Event.CLICK,this,this.itemSort,[this.itemSort_drug]);this.itemSort_others.on(Laya.Event.CLICK,this,this.itemSort,[this.itemSort_others]);this.itemSort(this.itemSort_all);this.pickPlan.on(Laya.Event.CHANGE,this,this.setPickPlan);this.hidePlayer.on(Laya.Event.CLICK,this,this.hideObj);this.hideMonster.on(Laya.Event.CLICK,this,this.hideObj)};b.hideObj=function(){for(var a=0;a<ObjectManage.object_list.length;a++){var b=ObjectManage.object_list[a];b&&(3==b.type&&b.data.record!=playerID&&(b.sp&&(b.sp.visible=!GlobalCfglist.hidePlayer),b.obj_wapeff&&(b.obj_wapeff.visible=!GlobalCfglist.hidePlayer),b.obj_wing&&(b.obj_wing.visible=!GlobalCfglist.hidePlayer),b.obj_hores&&(b.obj_hores.visible=!GlobalCfglist.hidePlayer)),1==b.type&&(b.sp.visible=!GlobalCfglist.hideMonster))}};b.OnFocus=function(){cur_use_app&&(this.img_base.top=0)};b.OnBlur=function(){cur_use_app&&(this.img_base.top=19)};b.update_m2set=function(){1==g_ClientConfig.boNoSmartPosLongHit?(GlobalCfglist.zs_gwcs=!1,this.zs_gwcs.selected=!1,this.zs_gwcs.disabled=!0):this.zs_gwcs.disabled=!1};b.itemSort=function(a){if(a)if(GlobalCfglist.itemtype=a.name,this.itemSort_select.skin=a.skin,this.itemSort_bg.visible=!1,"\u5168\u90e8"==GlobalCfglist.itemtype)this.itemSort_list=this.itemlist.array=AllItemList;else{this.itemSort_list=[];for(var b=0;b<AllItemList.length;b++)AllItemList[b].itemtype==a.name&&this.itemSort_list.push(AllItemList[b]);this.itemlist.array=this.itemSort_list}};b.getSkill=function(){this.skill_list4=this.skill_list3=this.skill_list1=this.skill_list0=this.skill_list="\u7a7a";for(var a=0;a<g_UserMagicList.length;a++)if(g_UserMagicList[a]){var b=g_UserMagicList[a];(b=Skillmodule.getskilldata(b.Def.btEffect,b.Def.wMagicId))&&0==b.mode?this.skill_list0+=","+g_UserMagicList[a].Def.sMagicName:b&&1==b.mode?this.skill_list1+=","+g_UserMagicList[a].Def.sMagicName:b&&4==b.mode?this.skill_list4+=","+g_UserMagicList[a].Def.sMagicName:b&&3==b.mode&&(this.skill_list3+=","+g_UserMagicList[a].Def.sMagicName);b&&5!=b.mode&&(this.skill_list+=","+g_UserMagicList[a].Def.sMagicName)}if(a=ObjectManage.findobject(playerID))var c=THumFeature(a.data.fea.buffer).btJob;this.exercise_list.labels=this.skill_list;this.exercise_list.selectedLabel=GlobalCfglist.exercise_list;this.single_fs_list.labels="";this.single_fs_list.selectedLabel="";this.group_fs_list.labels="";this.group_fs_list.selectedLabel="";this.single_ds_list.labels="";this.single_ds_list.selectedLabel="";this.group_ds_list.labels="";this.group_ds_list.selectedLabel="";this.ds_summon_list.labels="";this.ds_summon_list.selectedLabel="";this.ds_cure_list.labels="";this.ds_cure_list.selectedLabel="";c&&1==c?(this.single_fs_list.labels=this.skill_list,this.single_fs_list.selectedLabel=GlobalCfglist.single_fs_list,this.group_fs_list.labels=this.skill_list,this.group_fs_list.selectedLabel=GlobalCfglist.group_fs_list):c&&2==c&&(this.single_ds_list.labels=this.skill_list,this.single_ds_list.selectedLabel=GlobalCfglist.single_ds_list,this.group_ds_list.labels=this.skill_list,this.group_ds_list.selectedLabel=GlobalCfglist.group_ds_list,this.ds_summon_list.labels=this.skill_list4,this.ds_summon_list.selectedLabel=GlobalCfglist.ds_summon_list,this.ds_cure_list.labels=this.skill_list3,this.ds_cure_list.selectedLabel=GlobalCfglist.ds_cure_list)};b.setEvent=function(a){for(var b=0;b<a._childs.length;b++)if(a._childs[b]){var c=a._childs[b];if("laya.ui.CheckBox"==c.__className)c.on(Laya.Event.CHANGE,this,this.checkBox,[c]);else"laya.ui.ComboBox"==c.__className&&"itemtype"!=c.name&&(c.selectHandler=new Laya.Handler(this,this.comboBox,[c]))}};b.checkBox=function(a){if(a){var b=a.name;b&&(GlobalCfglist[b]=a.selected);switch(b){case "nameshow1":ObjectManage.ReObjectVisible(1);break;case "nameshow2":ObjectManage.ReObjectVisible(2);break;case "nameshow3":ObjectManage.ReObjectVisible(3);break;case "nameshow4":ObjectManage.ReObjectVisible(4);break;case "showhp":ObjectManage.ReObjHpvisible(GlobalCfglist.showhp);break;case "showExp":G_SHOW_EXP=this.showExp.selected;break;case "ShowName":ObjectManage.ShowName();break;case "ShowTitle":ObjectManage.ShowTitle();break;case "heroeqsecure":Sendmessage.sendConfig(a.selected);break;case "showBlue":for(a=0;a<ObjectManage.object_list.length;a++)(b=ObjectManage.object_list[a])&&3==b.type&&b.Blood&&b.Blood.showBlueBar(b);break;case "i_delayShow":GlobalCfglist.delayShow=this.i_delayShow.selected;Laya.stage.event("delayShow",GlobalCfglist.delayShow);break;case "humsimple":GlobalCfglist.humsimple=this.humsimple.selected;for(a=0;a<ObjectManage.object_list.length;a++)(b=ObjectManage.object_list[a])&&3==b.type&&b.updateskin();break;case "weaponsimple":GlobalCfglist.weaponsimple=this.weaponsimple.selected;for(a=0;a<ObjectManage.object_list.length;a++)(b=ObjectManage.object_list[a])&&3==b.type&&b.updateskin();break;case "monsimple":for(a=0;a<ObjectManage.object_list.length;a++)(b=ObjectManage.object_list[a])&&1==b.type&&b.updateskin();break;case "doubleRocker":Laya.stage.event("switchRocker"),Laya.stage.event("move_position"),GlobalCfglist.doubleRocker||Laya.stage.event("hideSingleRocker",!rockerposview)}}};b.resetItemList=function(){Laya.LocalStorage.removeItem("role_set_itemlist");AllItemList=[];var a=Laya.loader.getRes("data/json/filteitemlist.txt");if(a)for(var a=a.toString(),a=a.split("\r\n"),b=0;b<a.length;b++){var c=a[b].split(" ");if(6>c.length)for(var g=0;6>g;g++)c[g]||(c[g]="0");AllItemList.push({});AllItemList[b].itemtype=c[0];AllItemList[b].itemname=c[1];1==c[2]?c[2]=!0:c[2]=!1;1==c[3]?c[3]=!0:c[3]=!1;1==c[4]?c[4]=!0:c[4]=!1;1==c[5]?c[5]=!0:c[5]=!1;AllItemList[b].isshow=c[2];AllItemList[b].ispickup=c[3];AllItemList[b].special=c[4];AllItemList[b].prompt=c[5]}this.itemSort(this.itemSort_all);this.itemtext.text="";Gameconfig.setItemlist();this.itemlist.array=AllItemList};b.resetMosterList=function(){Laya.LocalStorage.removeItem("role_set_monsterlist");AllMonsterList=[];var a=Laya.loader.getRes("data/json/filtemonsterlist.txt");if(a)for(var a=a.toString(),a=a.split("\r\n"),b=0;b<a.length;b++){var c=a[b].split(" ");if(6>c.length)for(var g=0;6>g;g++)c[g]||(c[g]="0");AllMonsterList.push({});AllMonsterList[b].monsterName=c[0];1==c[1]?c[1]=!0:c[1]=!1;AllMonsterList[b].isExclude=c[1]}this.allCancel.selected=!1;Gameconfig.setMonsterList();this.monsterlist.array=AllMonsterList};b.barAtion=function(a,b){if(a){var c=a.parent;c&&a.value&&(c.label?c.label=a.value:c.text=a.value,GlobalCfglist[c.name]=a.value.toString(),GlobalCfglist[a.name]=a.value);b&&(b.value=a.value/100)}};b.onMouseDown=function(a){this.itemlist.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||this.box0.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_base.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_base.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_base.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};b.onMouseUp=function(){this.img_base.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(a){this.img_base.x+=a.stageX-this.startpos.x;this.img_base.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};b.AllChange=function(a){for(var b=0;b<this.itemSort_list.length;b++)if(this.itemSort_list[b])switch(a){case 0:this.itemSort_list[b].isshow=this.allShow.selected;break;case 1:this.itemSort_list[b].ispickup=this.allPick.selected;break;case 2:this.itemSort_list[b].special=this.allColor.selected;break;case 3:this.itemSort_list[b].prompt=this.allAutopick.selected}this.itemlist.array=this.itemSort_list;Gameconfig.setItemlist()};b.AllCancel=function(){for(var a=0;a<AllMonsterList.length;a++)AllMonsterList[a]&&(AllMonsterList[a].isExclude=this.allCancel.selected);this.monsterlist.array=AllMonsterList;Gameconfig.setMonsterList()};b.TxtSelectItemChange=function(a){this.itemSort_list=[];for(var b=0;b<AllItemList.length;b++)0<=AllItemList[b].itemname.indexOf(a.text)&&this.itemSort_list.push(AllItemList[b]);this.itemlist.array=this.itemSort_list};b.TxtSelectMosterChange=function(a){for(var b=[],c=0;c<AllMonsterList.length;c++)0<=AllMonsterList[c].monsterName.indexOf(a.text)&&b.push(AllMonsterList[c]);this.monsterlist.array=b};b.SaveLocal=function(){var a=Laya.LocalStorage.getItem("username"),b=[],c=[],b=JSON.stringify(g_pickPlan1),c=JSON.stringify(g_pickPlan2);Laya.LocalStorage.setItem(a+g_playerName+"role_set_itemlist1",b);Laya.LocalStorage.setItem(a+g_playerName+"role_set_itemlist2",c)};b.SaveMonster=function(){for(var a=Laya.LocalStorage.getItem("username"),b=[],c=0;c<AllMonsterList.length;c++)AllMonsterList[c]&&(b[c]=[AllMonsterList[c].isExclude]);b=JSON.stringify(b);Laya.LocalStorage.setItem(a+g_playerName+"role_set_monsterlist",b)};b.SaveGlobalCfglist=function(){var a=Laya.LocalStorage.getItem("username"),b=JSON.stringify(GlobalCfglist);Laya.LocalStorage.setItem(a+g_playerName+"role_set_cfglist",b)};b.select=function(a){this.SelectIndex=a};b.select1=function(a){this.SelectIndex1=a};b.itemchange=function(a){if(a.currentTarget.array[this.SelectIndex]){var b=a.currentTarget.array[this.SelectIndex].itemname;switch(a.target.name){case "isshow":a.currentTarget.array[this.SelectIndex].isshow=a.target.selected;Gameconfig.itemlist[b]&&(Gameconfig.itemlist[b][0]=a.target.selected);break;case "ispickup":a.currentTarget.array[this.SelectIndex].ispickup=a.target.selected;Gameconfig.itemlist[b]&&(Gameconfig.itemlist[b][1]=a.target.selected);break;case "special":a.currentTarget.array[this.SelectIndex].special=a.target.selected;Gameconfig.itemlist[b]&&(Gameconfig.itemlist[b][2]=a.target.selected);break;case "prompt":a.currentTarget.array[this.SelectIndex].prompt=a.target.selected,Gameconfig.itemlist[b]&&(Gameconfig.itemlist[b][3]=a.target.selected)}}};b.monsterChange=function(a){if(a.currentTarget.array[this.SelectIndex1]&&"isExclude"==a.target.name){a.currentTarget.array[this.SelectIndex1].isExclude=a.target.selected;var b=a.currentTarget.array[this.SelectIndex1].monsterName;Gameconfig.monsterlist[b]&&(Gameconfig.monsterlist[b][0]=a.target.selected)}};b.comboBox=function(a){if(a){var b=a.name;a.selectedLabel&&(GlobalCfglist[b]=a.selectedLabel)}};b.ShowDlg=function(){this.img_base.visible=!0;this.box0.visible=!1;this.box1.visible=!1;this.box2.visible=!1;this.box3.visible=!1;this.box4.visible=!1;this.box5.visible=!1;this.box6.visible=!1;var a=this.tab.selectedIndex,b=this.img_base.getChildByName("box"+a);b&&(b.visible=!0);a&&3==a?(1>AllMonsterList.length&&this.resetMosterList(),this.monsterlist.array=AllMonsterList,this.monsterlist.on(Laya.Event.CLICK,this,this.monsterChange),this.monsterlist.selectEnable=!0,this.monsterlist.selectHandler=new Laya.Handler(this,this.select1),this.SelectIndex1=0):a&&4==a&&(1>AllItemList.length&&this.initItemList(),this.itemlist.array=AllItemList,this.itemlist.on(Laya.Event.CLICK,this,this.itemchange),this.itemlist.selectEnable=!0,this.itemlist.selectHandler=new Laya.Handler(this,this.select),this.SelectIndex=0)};b.BtnClick=function(a){this.savePickPlan(GlobalCfglist.pickPlan);this.SaveGlobalCfglist();this.setItemPick();this.SaveLocal();this.SaveMonster();this.visible=!1};b.setItemPick=function(){var a=ItemMgr.getInstance().DropItemList;Gameconfig.pickItemList=[];for(var b=0;b<a.length;b++)a[b]&&Gameconfig.itemCheck(a[b].Name,3)&&Gameconfig.pickItemList.push(a[b])};b.showTimeBar=function(a){this.hp_time.visible=!1;this.mp_time.visible=!1;this.hp_mp_time.visible=!1;this.hp_mp_time2.visible=!1;this.tp_time_vs.visible=!1;this.tp_time_vs2.visible=!1;this.exercise_slider.visible=!1;this.ds_time_slider.visible=!1;this.hp_timeH.visible=!1;this.mp_timeH.visible=!1;this.hp_mp_timeH.visible=!1;this.hp_mp_time2H.visible=!1;this.tp_time_vsH.visible=!1;a&&(a.visible=!0)};b.showDrugImg=function(){this.drawDrug(this.hpN_img.getChildByName("drug"),GlobalCfglist[this.hpN_img.name]);this.drawDrug(this.mpN_img.getChildByName("drug"),GlobalCfglist[this.mpN_img.name]);this.drawDrug(this.hpS_img.getChildByName("drug"),GlobalCfglist[this.hpS_img.name]);this.drawDrug(this.mpS_img.getChildByName("drug"),GlobalCfglist[this.mpS_img.name]);this.drawDrug(this.tp_img.getChildByName("drug"),GlobalCfglist[this.tp_img.name]);this.drawDrug(this.tp1_img.getChildByName("drug"),GlobalCfglist[this.tp1_img.name]);this.drawDrug(this.hpN_imgH.getChildByName("drug"),GlobalCfglist[this.hpN_imgH.name]);this.drawDrug(this.mpN_imgH.getChildByName("drug"),GlobalCfglist[this.mpN_imgH.name]);this.drawDrug(this.hpS_imgH.getChildByName("drug"),GlobalCfglist[this.hpS_imgH.name]);this.drawDrug(this.mpS_imgH.getChildByName("drug"),GlobalCfglist[this.mpS_imgH.name])};b.drawDrug=function(a,b){a&&b&&b.s&&(draw=function(b){a.skin=b;a.parent&&(a.x=a.parent.width/2-a.width/2,a.y=a.parent.height/2-a.height/2)},GameUtil.loadImg(b.s.Looks,"items",draw))};b.setDrug=function(a,b){4!=a&&5!=a&&6!=a||null!=g_myHero?(Gameconfig.drugType=a,this.drugimg=b.target,GameApi.ShowScreen(!0,0,12)):Laya.stage.event("show_log",[{txt:"\u8bf7\u5148\u53ec\u5524\u82f1\u96c4\uff01",color:"#ff0000"}])};b.setDrugImg=function(a){if(a){var b=this;setpos=function(a){if(b.drugimg&&a){var c=b.drugimg.getChildByName("drug");c&&(c.skin=a);c.x=b.drugimg.width/2-c.width/2;c.y=b.drugimg.height/2-c.height/2}};GameUtil.loadImg(a.s.Looks,"items",setpos);this.drugimg&&(GlobalCfglist[this.drugimg.name]=a)}};b.setPickPlan=function(){GlobalCfglist.pickPlan!=this.pickPlan.selectedLabel&&(Laya.LocalStorage.getItem("username"),GlobalCfglist.pickPlan=this.pickPlan.selectedLabel,1>AllItemList.length?this.initItemList():(this.itemSort(this.itemSort_all),1==GlobalCfglist.pickPlan?(this.savePickPlan(2),GameApi.setLocalData(AllItemList,g_pickPlan1)):(this.savePickPlan(1),GameApi.setLocalData(AllItemList,g_pickPlan2)),this.itemlist.array=AllItemList))};b.savePickPlan=function(a){for(var b=[],c=0;c<AllItemList.length;c++)b[c]=[AllItemList[c].isshow,AllItemList[c].ispickup,AllItemList[c].special,AllItemList[c].prompt];2==a?(g_pickPlan2=[],g_pickPlan2=g_pickPlan2.concat(b)):1==a&&(g_pickPlan1=[],g_pickPlan1=g_pickPlan1.concat(b))};b.initItemList=function(){this.resetItemList();1==GlobalCfglist.pickPlan?GameApi.setLocalData(AllItemList,g_pickPlan1):GameApi.setLocalData(AllItemList,g_pickPlan2)};b.Controlsinit=function(){this.backmusic.selected=GlobalCfglist.backmusic;this.clear.selected=GlobalCfglist.clear;this.nameshow1.selected=GlobalCfglist.nameshow1;this.nameshow2.selected=GlobalCfglist.nameshow2;this.nameshow3.selected=GlobalCfglist.nameshow3;this.nameshow4.selected=GlobalCfglist.nameshow4;this.showhp.selected=GlobalCfglist.showhp;this.gameVoice.value=GlobalCfglist.gameVoice;this.showExp.selected=GlobalCfglist.showExp;this.ShowName.selected=GlobalCfglist.ShowName;this.ShowTitle.selected=GlobalCfglist.ShowTitle;this.banCkilcMove.selected=GlobalCfglist.banCkilcMove;this.notLock.selected=GlobalCfglist.notLock;this.hidePlayer.selected=GlobalCfglist.hidePlayer;this.hideMonster.selected=GlobalCfglist.hideMonster;this.smooth.selected=GlobalCfglist.smooth;this.showBlue.selected=GlobalCfglist.showBlue;this.autoWear.selected=GlobalCfglist.autoWear;this.i_delayShow.selected=GlobalCfglist.delayShow;this.humsimple.selected=GlobalCfglist.humsimple;this.monsimple.selected=GlobalCfglist.monsimple;this.doubleRocker.selected=GlobalCfglist.doubleRocker;this.weaponsimple.selected=GlobalCfglist.weaponsimple;this.z_autoskill_1.selected=GlobalCfglist.z_autoskill_1;this.z_autoskill_2.selected=GlobalCfglist.z_autoskill_2;this.z_autoskill_3.selected=GlobalCfglist.z_autoskill_3;this.z_autoskill_4.selected=GlobalCfglist.z_autoskill_4;this.zs_gwcs.selected=GlobalCfglist.zs_gwcs;this.zs_lyjf.selected=GlobalCfglist.zs_lyjf;this.zs_zrjf.selected=GlobalCfglist.zs_zrjf;this.d_autoskill_1.selectedLabel=GlobalCfglist.d_autoskill_1;this.d_autoskill_2.selected=GlobalCfglist.d_autoskill_2;this.d_autoskill_3.selected=GlobalCfglist.d_autoskill_3;this.d_autoskill_4.selected=GlobalCfglist.d_autoskill_4;this.d_autoskill_5.selected=GlobalCfglist.d_autoskill_5;this.d_autoskill_6.selected=GlobalCfglist.d_autoskill_6;this.d_autoskill_7.selectedLabel=GlobalCfglist.d_autoskill_7;this.d_autoskill_8.selectedLabel=GlobalCfglist.d_autoskill_8;this.f_autoskill_1.selected=GlobalCfglist.f_autoskill_1;this.f_keepskill_1.selected=GlobalCfglist.f_keepskill_1;this.autohp.selected=GlobalCfglist.autohp;this.hppercentagetext.text=GlobalCfglist.hppercentagetext;this.hptimetext.text=GlobalCfglist.hptimetext;this.autohpH.selected=GlobalCfglist.autohpH;this.hppercentagetextH.text=GlobalCfglist.hppercentagetextH;this.hptimetextH.text=GlobalCfglist.hptimetextH;this.automp.selected=GlobalCfglist.automp;this.mppercentagetext.text=GlobalCfglist.mppercentagetext;this.mptimetext.text=GlobalCfglist.mptimetext;this.autompH.selected=GlobalCfglist.autompH;this.mppercentagetextH.text=GlobalCfglist.mppercentagetextH;this.mptimetextH.text=GlobalCfglist.mptimetextH;this.autohp_mp.selected=GlobalCfglist.autohp_mp;this.hppercentagetext1.text=GlobalCfglist.hppercentagetext1;this.hptimetext1.text=GlobalCfglist.hptimetext1;this.autohp_mp2.selected=GlobalCfglist.autohp_mp2;this.hppercentagetext2.text=GlobalCfglist.hppercentagetext2;this.mptimetext1.text=GlobalCfglist.mptimetext1;this.autohp_mpH.selected=GlobalCfglist.autohp_mpH;this.hppercentagetext1H.text=GlobalCfglist.hppercentagetext1H;this.hptimetext1H.text=GlobalCfglist.hptimetext1H;this.autohp_mp2H.selected=GlobalCfglist.autohp_mp2H;this.hppercentagetext2H.text=GlobalCfglist.hppercentagetext2H;this.mptimetext1H.text=GlobalCfglist.mptimetext1H;this.autotp.selected=GlobalCfglist.autotp;this.tppercentagetext.text=GlobalCfglist.tppercentagetext;this.tptimetext.text=GlobalCfglist.tptimetext;this.autotp1.selected=GlobalCfglist.autotp1;this.tppercentagetext1.text=GlobalCfglist.tppercentagetext1;this.tptimetext.text=GlobalCfglist.tptimetext;this.autotpH.selected=GlobalCfglist.autotpH;this.tppercentagetextH.text=GlobalCfglist.tppercentagetextH;this.tptimetextH.text=GlobalCfglist.tptimetextH;this.hp_vs.value=GlobalCfglist.hp_vs;this.hp_time.value=GlobalCfglist.hp_time;this.mp_vs.value=GlobalCfglist.mp_vs;this.mp_time.value=GlobalCfglist.mp_time;this.Hp_mp_vs.value=GlobalCfglist.Hp_mp_vs;this.hp_mp_time.value=GlobalCfglist.hp_mp_time;this.Hp_mp_vs2.value=GlobalCfglist.Hp_mp_vs2;this.hp_mp_time2.value=GlobalCfglist.hp_mp_time2;this.tp_vs.value=GlobalCfglist.tp_vs;this.tp_time_vs.value=GlobalCfglist.tp_time_vs;this.tp_vs1.value=GlobalCfglist.tp_vs1;this.tp_time_vs2.value=GlobalCfglist.tp_time_vs2;this.hp_vsH.value=GlobalCfglist.hp_vsH;this.hp_timeH.value=GlobalCfglist.hp_timeH;this.mp_vsH.value=GlobalCfglist.mp_vsH;this.mp_timeH.value=GlobalCfglist.mp_timeH;this.Hp_mp_vsH.value=GlobalCfglist.Hp_mp_vsH;this.hp_mp_timeH.value=GlobalCfglist.hp_mp_timeH;this.Hp_mp_vs2H.value=GlobalCfglist.Hp_mp_vs2H;this.hp_mp_time2H.value=GlobalCfglist.hp_mp_time2;this.tp_vsH.value=GlobalCfglist.tp_vsH;this.tp_time_vsH.value=GlobalCfglist.tp_time_vsH;this.unpack.selected=GlobalCfglist.unpack;this.pickPlan.selectedIndex=GlobalCfglist.pickPlan-1;this.pickItemsFirst.selected=GlobalCfglist.pickItemsFirst;this.exercise.selected=GlobalCfglist.exercise;this.exercise_list.selectedLabel=GlobalCfglist.exercise_list;this.exercise_time.text=GlobalCfglist.exercise_time;this.exercise_slider.value=GlobalCfglist.exercise_slider;this.single_fs.selected=GlobalCfglist.single_fs;this.group_fs.selected=GlobalCfglist.group_fs;this.single_fs_list.selectedLabel=GlobalCfglist.single_fs_list;this.group_fs_list.selectedLabel=GlobalCfglist.group_fs_list;this.single_ds.selected=GlobalCfglist.single_ds;this.group_ds.selected=GlobalCfglist.group_ds;this.poison_ds.selected=GlobalCfglist.poison_ds;this.ds_summon.selected=GlobalCfglist.ds_summon;this.ds_cure.selected=GlobalCfglist.ds_cure;this.auto_dodge.selected=GlobalCfglist.auto_dodge;this.single_ds_list.selectedLabel=GlobalCfglist.single_ds_list;this.group_ds_list.selectedLabel=GlobalCfglist.group_ds_list;this.ds_summon_list.selectedLabel=GlobalCfglist.ds_summon_list;this.ds_cure_list.selectedLabel=GlobalCfglist.ds_cure_list;this.ds_cure_limit.text=GlobalCfglist.ds_cure_limit;this.ds_cure_time.text=GlobalCfglist.ds_cure_time;this.ds_limit_slider.value=GlobalCfglist.ds_limit_slider;this.ds_time_slider.value=GlobalCfglist.ds_time_slider};return c}(AuxiliaryUI);(function(){function b(a){b.__super.call(this);this.baseKey="ui/baitan/";this.root=void 0;this.CanDragMove=!1;this.BaiTanData=a;this.StartDragPos=new Laya.Point(0,0);this.Init()}Laya["class"](b,"UIBaiTan",laya.display.Sprite);var c=b.prototype;c.Init=function(){Laya.stage.on("update_baitan_items",this,this.UpdateBaiTanItems);this.ResLoaded()};c.ResLoaded=function(){this.root=new BaiTanUI;this.addChild(this.root);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.MouseDown);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.ResetUI()};c.MouseDown=function(){if(this.root){this.CanDragMove=!0;var a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.StartDragPos.x=a.x;this.StartDragPos.y=a.y}};c.MouseMove=function(){if(0!=this.CanDragMove){var a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.root.x=a.x-this.StartDragPos.x;this.root.y=a.y-this.StartDragPos.y}};c.MouseUp=function(){this.CanDragMove=!1};c.ExitDlg=function(){this.root.visible=!1;for(var a=0;20>a;a++){for(var b=this.root.getChildByName("item_"+a),c=0;c<b._childs.length;c++)b._childs[c].removeSelf();b.skin=""}0==ObjectManage.findobject(playerID).data.fea.buffer[13]&&(ItemMgr.getInstance().AddBaiTanItemToBag(),Sendmessage.StopBaiTan())};c.UpdateBaiTanItems=function(){if(1==G_ShowBaiTanDataIsSelf)for(var a=ItemMgr.getInstance().BaiTanList,b=0;20>b;b++){var c=this.root.getChildByName("item_"+b);a[b]&&a[b].item&&GameUtil.ShowItemeffect(c,a[b].item);a[b]&&a[b].item&&a[b].item.s.Name?(GameUtil.loadImg(a[b].s.Looks,"items",function(a){c.skin=a;c.pivotX=c.width/2;c.pivotY=c.height/2}),GameUtil.ShowItemeffect(c,this.BaiTanData.Item[b])):c.skin=""}else this.ShowDlg(G_BaiTanData)};c.Update=function(){var a=null;this.BaiTanData&&(a=this.BaiTanData.Item);a||(a=ItemMgr.getInstance().BaiTanList);if(this.root&&a)for(var b=0;b<a.length;b++){var c=this.root.getChildByName("item_"+b)._childs[0];if(a[b]){var g=a[b].item;g||(g=a[b]);if(g&&g.eff_list&&c){if(c.skin=g.eff_list[g.eff_idx],g.eff_idx++,g.eff_idx>=g.eff_list.length&&(g.eff_idx=0),g)for(var f=0;f<g.eff_list.length;f++){var h=-c.height/2+13;c.x=-c.width/2+12+g.offset_list[f].x;c.y=h+g.offset_list[f].y}}else c&&c._childs[0]&&(c._childs[0].skin="")}}};c.LoadItemEffect=function(a,b){var c=a.s.EffectStartOffSet;if(0<c){var g=new Laya.Image;g.blendMode="overlay";b&&b.addChild(g);a.eff_list=[];a.offset_list=[];a.eff_idx=0;for(var g=[],f=c;f<c+a.s.EffectImageCount;f++){for(var h="/",l=f.toString().length;5>l;l++)h+="0";h+=f+".png";g.push("data/"+g_pak_list[a.s.EffectFileIndex]+h);a.offset_list.push(Offsetmodule.getoffset(g_pak_list[a.s.EffectFileIndex],f))}}};c.ShowDlg=function(a){if(null!=this.root&&void 0!=this.root&&(this.BaiTanData=a,this.root.visible=!0,this.BaiTanData||0!=G_ShowBaiTanDataIsSelf))if(this.root.getChildByName("lbl_item_name").text="",this.root.getChildByName("lbl_item_price").text="",this.root.getChildByName("lbl_tw_name").text=G_BaiTanName+"\u7684\u644a\u4f4d",0==G_ShowBaiTanDataIsSelf)for(a=0;20>a;a++){var b=this.root.getChildByName("item_"+a);this.BaiTanData.Item[a]&&this.BaiTanData.Item[a].s.Name?(GameUtil.loadImg(this.BaiTanData.Item[a].s.Looks,"items",function(a){b.skin=a;b.pivotX=b.width/2;b.pivotY=b.height/2}),GameUtil.ShowItemeffect(b,this.BaiTanData.Item[a])):b.skin=""}else this.UpdateBaiTanItems()};c.ResetUI=function(){if(void 0!=this.root){this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_baitan").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_esc").on(Laya.Event.CLICK,this,this.BtnClick);for(var a=0;20>a;a++)this.root.getChildByName("item_"+a).on(Laya.Event.CLICK,this,this.BtnClick);this.ShowDlg(G_BaiTanData)}};c.ShowPrice=function(a){this.root.getChildByName("lbl_item_name").text=a.item.s.Name;var b="",b=0==a.goldtype||0==a.type?" \u5143\u5b9d":" \u91d1\u5e01";this.root.getChildByName("lbl_item_price").text=a.price+b};c.BtnClick=function(a){a=a.target.name;switch(a){case "btn_exit":this.ExitDlg();break;case "btn_baitan":if(0==G_ShowBaiTanDataIsSelf)return;Laya.stage.event("show_alert_dlg",[{type:4,txt:"\u8bf7\u8f93\u5165\u6446\u644a\u4fe1\u606f",callfn:function(a){Sendmessage.StartBaiTan(a)},ipttype:"text"}]);break;case "btn_esc":this.ExitDlg(),G_ShowBaiTanDataIsSelf&&1==ObjectManage.findobject(playerID).data.fea.buffer[13]&&(ItemMgr.getInstance().AddBaiTanItemToBag(),Sendmessage.StopBaiTan())}if(0<=a.indexOf("item_")){a=parseInt(a.split("_")[1]);var b=null;G_ShowBaiTanDataIsSelf?b=ItemMgr.getInstance().BaiTanList[a]:(b={},b.item=this.BaiTanData.Item[a],b.price=this.BaiTanData.Price[a],b.goldtype=this.BaiTanData.PriceGold[a],b.idx=a);ItemMgr.getInstance().CurSelecItem=b.item;ItemMgr.getInstance().LastBaiItem=b;Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo",state:-1}]);b&&this.ShowPrice(b)}}})();(function(){function b(a){b.__super.call(this);this.boxid=a;this.Init()}Laya["class"](b,"UIBox",laya.display.Sprite);var c=b.prototype;c.Init=function(){this.ResLoaded()};c.ResLoaded=function(){this.StartPos=new Laya.Point;this.root=new BoxUI;this.addChild(this.root);this.ResetUI(this.boxid);this.root.getChildByName("boxbackdrop").on(Laya.Event.CLICK,this,this.BoxClick);this.root.getChildByName("itemshow").visible=!1;var a=this.root.getChildByName("itemshow");a.visible=!1;a.getChildByName("but_itemok").on(Laya.Event.CLICK,this,this.but_itemokClick);a.getChildByName("close").on(Laya.Event.CLICK,this,this.itemshowClick);a.getChildByName("but_itemok").skin="gameres/ui/box_btn_ok.png";a.on(Laya.Event.MOUSE_DOWN,this,this.MouseDown)};c.ResetUI=function(a){this.boxid=a;var b=this.root.getChildByName("boxbackdrop");b.visible=!0;this.is_RotationBox=this.is_roulette=!1;this.RotationNumber=0;this.rollingkey=null;switch(a){case 15:this.showboxitemimgkey=520;this.Rotationimg=602;break;case 16:this.showboxitemimgkey=540;this.Rotationimg=606;break;case 17:this.showboxitemimgkey=560;this.Rotationimg=608;break;case 18:this.showboxitemimgkey=580;this.Rotationimg=610;break;default:this.showboxitemimgkey=540,this.Rotationimg=616}GameUtil.loadImg(this.showboxitemimgkey,"prguse3",function(a){b.skin=a})};c.BoxClick=function(){var a=ItemMgr.getInstance().FindItemShapeFromInBag(40,this.boxid);a&&(this.keyitemindex=a.item.MakeIndex);Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u662f\u5426\u4f7f\u7528\u94a5\u5319\u6253\u5f00\u6b64\u5b9d\u7bb1\uff1f",callfn:function(b){a?(Sendmessage.SendOpenBox(a.item.MakeIndex,a.item.s.DBName,CodeUtil._LOWORD(g_boxid),CodeUtil._HIWORD(g_boxid)),g_boxid=0):(Laya.stage.event("game_dlg_cmd",[{id:"openbox_fail"}]),Laya.stage.event("show_log",[{txt:"\u7f3a\u5c11\u5b9d\u7bb1\u94a5\u5319\uff01",color:"#ff0000"}]))},callcancelfun:function(){Laya.stage.event("game_dlg_cmd",[{id:"openbox_fail"}])}}])};c.ClosesBox=function(){Sendmessage.SendtakeoffBox();this.root&&(this.root.getChildByName("boxbackdrop").visible=!1,this.root.getChildByName("itemshow").visible=!1)};c.showboxitemlist=function(a){this.keyitemindex&&(GameUtil.DelBagItems(this.keyitemindex),Laya.stage.event("show_bag_items"),this.keyitemindex=null);Animationmodule.playframe(!1,this.root,"data/prguse3/",this.showboxitemimgkey,this.showboxitemimgkey+6,100,!1,!0,null,this,this.callback);Animationmodule.playframe(!0,this.root,"data/prguse3/",this.showboxitemimgkey+7,this.showboxitemimgkey+13,100,!1,!0);GameUtil.PlayMusicFormat("wav/Openbox.wav");this.root.getChildByName("boxbackdrop").visible=!1;for(var b=[],c=0;c<a.length;c++){var g=a[c].item.s.Looks,f="",h=g;1E4<=g&&(f=Math.floor(g/1E4),h=g%1E4);h=("000000"+h).slice(-6);b.push("data/items"+f+"/"+h)}GameUtil.loadImgEx(b,function(b){for(var f=l.root.getChildByName("itemshow"),c=0;c<a.length;c++){var d=f.getChildByName("item_"+c);d.skin=b[c];d.on(Laya.Event.DOUBLE_CLICK,l,l.itemshowClick);d.on(Laya.Event.CLICK,l,l.showitemClick);d.item=a[c].item}b=new Laya.Point(-15,-15);l.root.itemshowani=Animationmodule.playframe(!1,f.getChildByName("item_4"),"data/prguse3/",l.Rotationimg,l.Rotationimg+1,100,!0,!1,null);l.root.itemshowani&&(l.root.itemshowani.pos(b.x,b.y),l.root.itemshowani.name="baoxiang")});var l=this};c.callback=function(){this.root.getChildByName("itemshow").visible=!0};c.GetBoxItemIndex=function(a){this.selectitemindex=a;this.root.itemshowani._app=this;this.root.itemshowani._callback=this.rolling;this.is_RotationBox=!0};c.showitemClick=function(a){a=this.root.getChildByName("itemshow").getChildByName(a.target.name).item;g_OpenIdx=5;g_MoveItems.Items=a;GameUtil.NewShowItemsInf(g_MoveItems.Items);a&&GameUtil.ClickSound(a)};c.itemshowClick=function(){this.is_roulette||(Sendmessage.SendGetGetselBoxItem(this.selectitemindex),this.root.getChildByName("itemshow").visible=!1,this.selectitemindex=0,this.root.itemshowani.destroy(),Animationmodule.removeAniname(this.root.itemshowani.name))};c.but_itemokClick=function(){this.is_RotationBox?this.itemshowClick():(Sendmessage.SendRotationBox(),this.canclose=!0,this.root.itemshowani._app=this,this.root.itemshowani._callback=this.rolling)};c.rolling=function(){if(null==this.rollingkey)this.root.getChildByName("itemshow").getChildByName("item_4").removeChild(this.root.itemshowani),this.root.getChildByName("itemshow").getChildByName("item_0").addChild(this.root.itemshowani),this.rollingkey=9,this.roulettenumber=0,this.is_roulette=!0;else{var a=this.rollingkey%8,b=0==a?7:a-1;this.root.getChildByName("itemshow").getChildByName("item_"+[0,1,2,5,8,7,6,3][a]).removeChild(this.root.itemshowani);this.root.getChildByName("itemshow").getChildByName("item_"+[0,1,2,5,8,7,6,3][b]).addChild(this.root.itemshowani);7==b&&(this.RotationNumber+=1);5<=this.RotationNumber&this.selectitemindex==[0,1,2,5,8,7,6,3][b]&&(this.root.itemshowani._app=null,this.root.itemshowani._callback=null,this.is_roulette=!1);this.rollingkey+=1}GameUtil.PlayMusicFormat("wav/Flashbox.wav")};c.MouseDown=function(a){var b=this.root.getChildByName("itemshow");b.getChildByName("but_itemok").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||b.getChildByName("close").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.StartPos.x=a.stageX,this.StartPos.y=a.stageY,b.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),b.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),b.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};c.onMouseUp=function(){this.root.getChildByName("itemshow").off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.onMouseMove=function(a){this.root.getChildByName("itemshow").x+=a.stageX-this.StartPos.x;this.root.getChildByName("itemshow").y+=a.stageY-this.StartPos.y;this.StartPos.x=a.stageX;this.StartPos.y=a.stageY}})();var chat_item_height=0,g_start_idx=0;(function(){function b(a,f,c){b.__super.call(this);this.txt=new Laya.Text(a);this.temp=new Laya.Text;this.bgSpr=new Laya.Sprite;this.data=null;this.addChild(this.bgSpr);this.addChild(this.txt);this.size(310,18);this.txt.wordWrap=!0;this.txt.fontSize=18;this.temp.fontSize=18;this.Show=function(a,b,f){if(a.info!=this.data){this.data=a.info;b=this.parent.parent.name;"list_txt"==b?(this.txt.width=310,this.txt.wordWrap=!1):"chat_list"==b&&(this.txt.text=a.info,this.txt.wordWrap=!1);this.txt.removeChildren();"chat_list"!=b&&(this.temp.text=a.info);b=0==this.temp.width?b=this.txt.width:b=this.temp.width;this.bgSpr.graphics.clear();f=a.info;var c=f.indexOf("{"),d=f.indexOf("}");0<=c&&0<=d?(c=Get2RGB(parseInt(a.front)),this.txt.text="",GameUtil.GetColorText(this.txt,f,"{","}",c),this.bgSpr.graphics.drawRect(0,0,b,18,Get2RGB(parseInt(a.bg)))):(this.txt.text=a.info,this.bgSpr.graphics.drawRect(0,0,b,this.txt.height,Get2RGB(parseInt(a.bg))),this.txt.color=Get2RGB(parseInt(a.front)))}};this.CreateText=function(a,b,f){var c=new Laya.Text;c.color=b;c.fontSize=18;b=this.CreateSpace(f);c.text=b+a;this.txt.addChild(c)};this.CreateSpace=function(a){for(var b="",f=0;f<a;f++)b+=" ";return b}}function c(){c.__super.call(this);this.size(45,45);var a=new Laya.Image;this.addChild(a);a.pos(0,0);this.settxt=function(b){a.skin="gameres/ui/chat_face/"+b+".png";a.name=b}}function a(){a.__super.call(this);this.size(55,55);var b=new Laya.Image;b.width=55;b.height=55;b.pos(0,0);b.skin="gameres/ui/img_bag_bg.png";this.addChild(b);var f=new Laya.Image;b.addChild(f);this.setpos=function(a){f.visible=!0;f.skin=a;f.x=b.width/2-f.width/2;f.y=b.height/2-f.height/2};this.settxt=function(a){a<g_BagItemsList.length&&null!=g_BagItemsList[a]?(GameUtil.loadImg(g_BagItemsList[a].s.Looks,"items",this.setpos),GameUtil.ShowItemeffect(b,g_BagItemsList[a])):(f.visible=!1,(a=b.getChildByName("effect"))&&a.removeSelf())}}function d(){d.__super.call(this);this.chatMsgList=[];this.specialItemList=[];this.chatType=-1;this.CurSelectChat=0;this.CMDNode=this.btnInfoItem=null;this.baseKey="png/ui_chat/";this.ChatBaseKey="";this.ChatTypeBtnList=[];this.SelectChatIdx=-1;this.Init()}Laya["class"](b,"ChatItem",Laya.Box);Laya["class"](c,"faceItem",Laya.Box);Laya["class"](a,"specialItem",Laya.Box);Laya["class"](d,"UIChat",laya.display.Sprite);var e=d.prototype;e.Init=function(){Laya.stage.on("show_chat_from_editor",this,this.ShowChatUI);Laya.stage.on("show_chat_dlg",this,this.ShowChatDlg);Laya.stage.on("get_chat_name",this,this.getChatName);Laya.stage.on("onGetPhotoURL",this,this.onGetPhotoURL);this.ResLoaded()};e.onGetPhotoURL=function(a){Sendmessage.SendMonsterGM(a)||(0>a.indexOf(this.ChatBaseKey)&&""!=this.ChatBaseKey?Sendmessage.sendSay(this.ChatBaseKey+a):Sendmessage.sendSay(a));this.root.getChildByName("img_send").getChildByName("input_txt").text=""};e.ShowChatDlg=function(a,b){this.visible=b;var c=this.root.getChildByName("img_send").getChildByName("input_txt");c&&(this.visible&&a?c.text=a:c.text="");Laya.stage.event("show_chat_node",this.visible);this.root&&this.root.getChildByName("list_txt").refresh()};e.ShowChatUI=function(a){4==a.id&&(this.CurSelectChat=4,this.ResetChatBtnState(),this.ChatBaseKey="/");a&&(this.root.getChildByName("img_send").getChildByName("input_txt").text=a.name)};e.ResLoaded=function(){this.root=new Chat1UI;this.addChild(this.root);this.ResetUI();this.root.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.root.getChildByName("img_send").getChildByName("btn_send").on(Laya.Event.CLICK,this,this.BtnClick);Laya.stage.on("new_chat_msg",this,this.ChatMsg);this.root.getChildByName("list_txt").skin="gameres/ui/chat_bg.png";this.root.getChildByName("list_txt").repeatX=1;this.root.getChildByName("list_txt").repeatY=33;this.root.getChildByName("list_txt").vScrollBarSkin="";this.root.getChildByName("list_txt").itemRender=b;this.root.getChildByName("list_txt").selectEnable=!0;this.root.getChildByName("list_txt").selectHandler=new Laya.Handler(this,this.OnSelect);this.root.getChildByName("list_txt").renderHandler=new Laya.Handler(this,this.UpdateItem);this.root.getChildByName("list_txt").mouseHandler=new Laya.Handler(this,this.ClickItem);this.root.getChildByName("list_txt").array=this.chatMsgList;this.root.getChildByName("list_txt").on(Laya.Event.MOUSE_DOWN,this,this.on_Mousedown);this.ChatTypeBtnList.push(this.root.getChildByName("btn_gongliao_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_system_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_nearby_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_hanhua_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_hanghui_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_team_enable"));this.ChatTypeBtnList.push(this.root.getChildByName("btn_siliao_enable"));this.ShowBtnInfoItem("");this.ResetChatBtnState();this.chat_show=new RichText(325,477,50);this.root.chat_panel.addChild(this.chat_show);this.chat_show.pos(0,0);Laya.stage.on("setCMDlist",this,this.setCMDlist)};e.OnFocus=function(){cur_use_app&&(this.root.getChildByName("img_send").top=0)};e.OnBlur=function(){cur_use_app&&(this.root.getChildByName("img_send").y=460)};e.setCMDlist=function(){if(g_CMDlist&&0<g_CMDlist.length){this.CMDNode.removeChildren();this.CMDNode.y=485-35*g_CMDlist.length;for(var a=0;a<g_CMDlist.length;a++){var b=g_CMDlist[a],c=new Laya.Button;c.label=b.sCaption;c.name=b.sCmd;c.skin="gameres/ui/chat_select_order.png";c.stateNum=2;c.labelAlign="center";c.labelBold=!0;c.labelColors="#FBF1B3,#FBF1B3";c.labelSize=16;c.size(105,35);this.CMDNode.height=35*(a+1)+15;this.CMDNode.addChild(c);c.pos(3,35*a);c.on(Laya.Event.CLICK,this,this.getCMD)}}};e.getCMD=function(a){this.root.input_txt.text=a.target.name+" ";this.root.panel_cmd.visible=!1};e.ResetChatBtnState=function(){for(var a=0;7>a;a++)this.CurSelectChat==a?(this.ChatTypeBtnList[a].stateNum=2,this.ChatTypeBtnList[a].selected=!0):(this.ChatTypeBtnList[a].stateNum=2,this.ChatTypeBtnList[a].selected=!1)};e.ClickItem=function(a,b){if("mousedown"==a.type){var c=this.GetChatListByType(this.SelectChatIdx);c[b]&&(c=c[b].info.split(":"),this.root.getChildByName("img_send").getChildByName("input_txt").text=c[0])}};e.ResetCMDNode=function(){void 0!=this.root&&(this.CMDNode=this.root.getChildByName("panel_cmd"),this.CMDNode.zOrder=1,this.CMDNode.getChildByName("btn_chuanyin").on(Laya.Event.CLICK,this,this.BtnClick),this.CMDNode.getChildByName("btn_rest").on(Laya.Event.CLICK,this,this.BtnClick),this.CMDNode.getChildByName("btn_add_hanghui").on(Laya.Event.CLICK,this,this.BtnClick),this.CMDNode.getChildByName("btn_del_hanghui").on(Laya.Event.CLICK,this,this.BtnClick),this.CMDNode.visible=!1)};e.ShowBtnInfoItem=function(a){null==this.btnInfoItem?(this.btnInfoItem=new Laya.Image,this.btnInfoItem.skin="gameres/ui/000000.png",this.btnInfoItem.width=100,this.btnInfoItem.height=30,this.txt=new Laya.Text,this.txt.text=" ...... ",this.addChild(this.btnInfoItem),this.btnInfoItem.addChild(this.txt),this.btnInfoItem.visible=!1):""!=a?(this.btnInfoItem.visible=!0,this.btnInfoItem.width=this.txt.width,this.txt.text=a):this.btnInfoItem.visible=!1};e.OnSelect=function(a){};e.UpdateItem=function(a,b){0==b&&(chat_item_height=0);a.Show(a.dataSource,b,chat_item_height);var c=a.height;20<a._childs[1].height&&(c=2*a.height);chat_item_height+=c};e.ResetUI=function(){this.root.getChildByName("spr_bg").skin="gameres/png/chat.png";this.root.getChildByName("img_send").getChildByName("btn_send").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_team_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("img_send").getChildByName("input_txt").skin="gameres/ui/chat.png";this.root.getChildByName("btn_gongliao_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_system_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_nearby_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_hanhua_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_siliao_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_hanghui_enable").on(Laya.Event.CLICK,this,this.BtnClick);this.root.chat_oder.on(Laya.Event.CLICK,this,this.BtnClick);this.root.chat_face.on(Laya.Event.CLICK,this,this.BtnClick);this.root.chat_item.on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_hide").on(Laya.Event.CLICK,this,this.BtnClick);this.ResetCMDNode();this.visible=!1;this.root.list_face.vScrollBarSkin="";this.root.list_face.itemRender=c;this.root.list_face.selectEnable=!0;this.root.list_face.selectHandler=new Laya.Handler(this,this.faceSelect);this.root.list_face.renderHandler=new Laya.Handler(this,this.UpdateFace);this.root.list_face.array=g_face_list;this.root.list_special.vScrollBarSkin="";this.root.list_special.itemRender=a;this.root.list_special.selectEnable=!0;this.root.list_special.selectHandler=new Laya.Handler(this,this.specialSelect);this.root.list_special.renderHandler=new Laya.Handler(this,this.UpdateSpecial);this.root.chat_pos.on(Laya.Event.CLICK,this,this.sendPos);(this.root.btn_add.visible=cur_use_app)?this.root.input_txt.width=326:this.root.input_txt.width=373;this.root.btn_add.on(Laya.Event.CLICK,this,function(){oncallLocalPhoto()})};e.faceSelect=function(a){g_face_list[a]&&(this.root.input_txt.text+="\x3c/:"+g_face_list[a]+"\x3e",this.root.list_face._selectedIndex=-1,this.root.chat_face_bg.visible=!1)};e.specialSelect=function(a){var b=this.root.input_txt.text;if(-1!=b.indexOf("\x3c[")&&-1!=b.indexOf("]\x3e"))Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u6b21\u53ea\u80fd\u53d1\u9001\u4e00\u4e2a\u88c5\u5907\u3002",callfn:function(){}}]);else if(a=g_BagItemsList[this.specialItemList[a]])this.root.input_txt.text+="\x3c["+a.s.Name+"\\"+a.MakeIndex+"]\x3e",this.root.list_special._selectedIndex=-1,this.root.chat_item_bg.visible=!1};e.UpdateFace=function(a,b){a.settxt(a.dataSource,b)};e.UpdateSpecial=function(a,b){a.settxt(a.dataSource,b)};e.sendPos=function(){var a=ObjectManage.findobject(playerID),b=this.root.input_txt.text;a&&(-1!=b.indexOf("{pos|")?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4e00\u6b21\u53ea\u80fd\u53d1\u9001\u4e00\u4e2a\u5750\u6807\u70b9\u3002",callfn:function(){}}]):this.root.input_txt.text+="{pos|("+a.grid.x+","+a.grid.y+")|"+Mapdata.cur_id+"|"+Mapdata.cur_name+"}")};e.BtnClick=function(a){switch(a.target.name){case "btn_send":a=this.root.getChildByName("img_send").getChildByName("input_txt").text;""==a||Sendmessage.SendMonsterGM(a)||(0>a.indexOf(this.ChatBaseKey)&&""!=this.ChatBaseKey?Sendmessage.sendSay(this.ChatBaseKey+a):Sendmessage.sendSay(a));this.root.getChildByName("img_send").getChildByName("input_txt").text="";this.specialItemList=[];this.root.chat_face_bg.visible=!1;this.root.chat_item_bg.visible=!1;this.CMDNode.visible=!1;break;case "btn_hanghui":this.chatType=1;break;case "btn_zudui":this.chatType=2;break;case "btn_hanhua":this.chatType=3;break;case "btn_hide":this.root.chat_face_bg.visible=!1;this.root.chat_item_bg.visible=!1;this.CMDNode.visible=!1;0==this.x&&(this.visible=!1,this.root.panel_cmd.visible=!1,Laya.stage.event("show_chat_node"),this.root.getChildByName("img_send").getChildByName("input_txt").text="");break;case "chat_oder":this.root.chat_face_bg.visible=!1;this.root.chat_item_bg.visible=!1;this.CMDNode.visible=!this.CMDNode.visible;break;case "chat_face":this.CMDNode.visible=!1;this.root.chat_item_bg.visible=!1;this.root.chat_face_bg.visible=!this.root.chat_face_bg.visible;break;case "chat_item":this.specialItemList=[];for(a=0;a<g_BagItemsList.length;a++)null!=g_BagItemsList[a]&&this.specialItemList.push(a);this.root.list_special.array=this.specialItemList;this.root.chat_face_bg.visible=!1;this.CMDNode.visible=!1;this.root.chat_item_bg.visible=!this.root.chat_item_bg.visible;break;case "btn_gongliao_enable":this.CurSelectChat=0;this.ResetChatBtnState();this.SelectChatIdx=-1;this.ChatBaseKey="";this.chat_show.showByType(-1);break;case "btn_system_enable":this.CurSelectChat=1;this.ResetChatBtnState();this.SelectChatIdx=0;this.ChatBaseKey="";this.chat_show.showByType(0);break;case "btn_nearby_enable":this.CurSelectChat=2;this.ResetChatBtnState();this.SelectChatIdx=4;this.ChatBaseKey="";this.chat_show.showByType(4);break;case "btn_hanhua_enable":this.CurSelectChat=3;this.ResetChatBtnState();this.SelectChatIdx=6;this.ChatBaseKey="!";this.chat_show.showByType(6);break;case "btn_hanghui_enable":this.CurSelectChat=4;this.ResetChatBtnState();this.ChatBaseKey="!~";this.SelectChatIdx=3;this.chat_show.showByType(3);break;case "btn_team_enable":this.CurSelectChat=5;this.ResetChatBtnState();this.ChatBaseKey="!!";this.SelectChatIdx=1;this.chat_show.showByType(1);break;case "btn_siliao_enable":this.CurSelectChat=6,this.ResetChatBtnState(),this.ChatBaseKey="/",this.SelectChatIdx=2,this.chat_show.showByType(2)}};e.GetChatListByType=function(a){var b=[];if(0>a)return this.chatMsgList;for(var c=0;c<this.chatMsgList.length;c++)this.chatMsgList[c].type==a&&b.push(this.chatMsgList[c]);return b};e.MouseMove=function(a){this.ShowBtnInfoItem("")};e.ChatMsg=function(a){if(8!=a.type){var b=[],c=a.info;if(-1!=c.indexOf(":")&&10>c.indexOf(":")&&-1==c.indexOf("[\u653b\u51fb\u6a21\u5f0f")&&-1==c.indexOf("\u516c\u544a:")&&0!=a.type){var d=c.indexOf(":"),e=c.substring(0,d);-1==e.indexOf("{")&&(b.push(e+"|name"),c=c.substring(d))}else-1!=c.indexOf("\x3d\x3e")&&(d=c.indexOf("\x3d\x3e"),e=c.substring(0,d),-1==e.indexOf("{")&&(b.push(e+"|name"),c=c.substring(d)));for(;-1!=c.indexOf("{")&&-1!=c.indexOf("|")&&-1!=c.indexOf("}")||-1!=c.indexOf("\x3c/:");)0!=c.indexOf("{")&&(d=c.indexOf("{"),b.push(c.substring(0,d)),c=c.substring(d)),0!=c.indexOf("\x3c")&&(d=c.indexOf("\x3c"),b.push(c.substring(0,d)),c=c.substring(d)),0!=c.indexOf("\x3e")&&(d=c.indexOf("\x3e"),b.push(c.substring(0,d+1)),c=c.substring(d+1)),d=c.indexOf("{"),e=c.indexOf("}"),-1!=d&&-1!=e?(b.push(c.substring(0,e+1)),c=c.substring(e+1)):""!=c&&b.push(c);""!=c&&b.push(c);b=GameUtil.check_showItem(b);if(-1==this.SelectChatIdx||this.SelectChatIdx==a.type)this.chatMsgList=GameUtil.makeLable(b,a.front,a.bg,!0,a.type),this.chat_show.setBox(this.chatMsgList,a.bg,a.type)}};e.getChatName=function(a){this.CurSelectChat=6;this.ResetChatBtnState();this.ChatBaseKey="/";this.SelectChatIdx=2;var b=this.GetChatListByType(2);this.root.getChildByName("list_txt").array=b;this.root.input_txt.text="/"+a+" "};e.on_Mousedown=function(){this.x1=Laya.stage.mouseX;this.y1=Laya.stage.mouseY;this.root.getChildByName("list_txt").on(Laya.Event.MOUSE_MOVE,this,this.on_Mousemove)};e.on_Mousemove=function(){this.root.getChildByName("list_txt").on(Laya.Event.MOUSE_UP,this,this.on_Mouseup)};e.on_Mouseup=function(){this.x2=Laya.stage.mouseX;this.y2=Laya.stage.mouseY;50<this.x1-this.x2&&50>Math.abs(this.y1-this.y2)&&(this.visible=!1,Laya.stage.event("show_chat_node"),this.root.getChildByName("img_send").getChildByName("input_txt").text="")}})();var uiChatConfig=function(b){function c(){c.__super.call(this);this.init()}Laya["class"](c,"uiChatConfig",chatconfigUI);b=c.prototype;b.init=function(){Laya.stage.on("VOICE_EVENT",this,this.onevent);this.pos(browser_width/2-this.width/2,browser_height/2-this.height/2);this.cur_cbox=null;this.cur_type=0;this.cur_name="";this.room_lock=!1;this.btn_close.on(Laya.Event.CLICK,this,function(){this.room_lock=this.visible=!1;Laya.MouseManager.multiTouchEnabled=!0});this.cb_voice.on(Laya.Event.CHANGE,this,function(a){VoiceSocket.switchsound(a.selected)},[this.cb_voice]);this.cb_microphone.on(Laya.Event.CHANGE,this,function(a){VoiceSocket.switchMic(a.selected)},[this.cb_microphone]);this.createselecet(VoiceSocket.roomtypes)};b.afreshlink=function(){VoiceSocket.socket.connected||(console.log("-----afreshlinking-------"),g_serverconfig.boVoice&&VoiceSocket.connect(g_serverconfig.sVoiceIP,g_serverconfig.nVoicePort),VoiceSocket.exitroom());Laya.MouseManager.multiTouchEnabled=!1};b.onexitroom=function(){this.cb_voice.selected=!1;this.cb_microphone.selected=!1;VoiceSocket.exitroom(this.cur_type,this.cur_name)};b.onevent=function(a){switch(a){case "onvoiceopen":this.createselecet(VoiceSocket.roomtypes);break;case "onvoiceclose":this.box_select.removeChildren();VoiceSocket.exitroom();break;case "onenterroomsuccess":this.cb_voice.selected=!0;this.cb_microphone.selected=!0;break;case "onexitroom":this.onexitroom()}};b.createselecet=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c]+(c==a.length-1?"":",");var g=new Laya.RadioGroup;g.labels=b;g.stateNum=2;g.labelPadding="10,0,0,10";g.labelSize=20;g.labelColors="#c69c61";g.skin="gameres/ui/btn2.png";g.selectHandler=new Laya.Handler(this,this.routeSelect,[g]);this.box_select.addChild(g);Laya.timer.once(500,this,function(){for(var a=0,b=0,c=0;a<g._childs.length;a++,b++)3<=b&&(b=0,c++),g._childs[a].x=10+170*b,g._childs[a].y=10+60*c,console.log(g._childs[a].x,g._childs[a].y)})};b.routeSelect=function(a,b){a.disabled=!0;var c=a._childs[b].label;this.onexitroom();switch(c){case "\u961f\u4f0d":if(0!=G_Team_Grop_List.length)this.cur_type=1,this.cur_name="Team_"+G_Team_Grop_List[0].split(";")[0];else{Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u6ca1\u6709\u961f\u4f0d!",callfn:function(){}}]);a.disabled=!1;return}break;case "\u884c\u4f1a":if(""!=G_Guild_Name)this.cur_type=2,this.cur_name="Gild_"+G_Guild_Name.substring(0,G_Guild_Name.indexOf("["));else{Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u6ca1\u6709\u884c\u4f1a!",callfn:function(){}}]);a.disabled=!1;return}break;case "\u672c\u533a":this.cur_type=3;this.cur_name="Area_"+g_ServerName;break;case "\u8de8\u670d":this.cur_type=4;this.cur_name="";break;case "\u5173\u95ed":this.cur_type=0,this.cur_name=""}Laya.timer.once(1E3,this,function(a){VoiceSocket.switchroom(1,this.cur_type,this.cur_name);a.disabled=!1},[a])};return c}(chatconfigUI);(function(){function b(){b.__super.call(this);this.size(64,64);var a=new Laya.Image("gameres/png/00061.png");a.size(63,63);var c=new Laya.Image;a.addChild(c);this.addChild(a);this.Show=function(b,f,h){0!=ItemMgr.getInstance().InDepotRoomList[f]?(a.addChild(c),c.skin=h,c.tag=f,a.mouseEnabled=!0,c.mouseEnabled=!1,c.visible=!0,c.anchorX=.5,c.anchorY=.5,c.pivotX=c.width/2,c.pivotY=c.height/2,c.x=a.width/2,c.y=a.height/2):c.skin=""}}function c(){c.__super.call(this);this.dragDlg=!1;this.startDragPos=new Laya.Point(0,0);this.baseKey="ui/store/";this.Init()}Laya["class"](b,"DepotItem",Laya.Box);Laya["class"](c,"UIDepot",laya.display.Sprite);var a=c.prototype;a.Init=function(){Laya.stage.on("update_depot",this,this.UpdateDepot);this.ResLoaded()};a.ResLoaded=function(){this.root=new StoreRoomUI;this.addChild(this.root);this.ResetUI();this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.OnMouseDown);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,this,this.OnMouseMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,this,this.OnMouseUp);this.UpdateDepot()};a.UpdateDepot=function(){if(void 0!=this.root){var a=ItemMgr.getInstance().InDepotRoomList;this.root.getChildByName("list_view").repeatX=5;this.root.getChildByName("list_view").repeatY=8;this.root.getChildByName("list_view").vScrollBarSkin="";this.root.getChildByName("list_view").itemRender=b;this.root.getChildByName("list_view").selectEnable=!0;this.root.getChildByName("list_view").selectHandler=new Laya.Handler(this,this.OnSelect);this.root.getChildByName("list_view").renderHandler=new Laya.Handler(this,this.UpdateItem);this.root.getChildByName("list_view").mouseHandler=new Laya.Handler(this,this.ClickItem);this.root.getChildByName("list_view").array=[];for(var c=0;c<a.length;c++)0==a[c]&&(a.splice(c,1),c--);for(c=a.length;49>c;c++)a.push(0);this.root.getChildByName("list_view").array=a}};a.OnSelect=function(a){};a.ClickItem=function(a,b){"mouseup"==a.type&&0!=ItemMgr.getInstance().InDepotRoomList[b]&&a.target._childs[0]&&(ItemMgr.getInstance().CurSelecItem=ItemMgr.getInstance().InDepotRoomList[b],ItemMgr.getInstance().CurSelecItem.from="depot_dlg",Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}]))};a.UpdateItem=function(a,b){var c=ItemMgr.getInstance().InDepotRoomList[b];c&&GameUtil.loadImg(c.s.Looks,"items",function(f){a.Show(a.dataSource,b,f)})};a.OnMouseDown=function(){var a=this.root.getChildByName("img_bg"),b=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));a.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&(this.dragDlg=!0,this.startDragPos.x=.8*b.x,this.startDragPos.y=.8*b.y);this.root.getChildByName("list_view").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&("depot"==ItemMgr.getInstance().LastDragFrom?Laya.stage.event("update_depot"):"bag"==ItemMgr.getInstance().LastDragFrom&&(item=ItemMgr.getInstance().InBagList[g_CurDragItem.tag],ItemMgr.getInstance().AddItemToDepot(item),ItemMgr.getInstance().DeleteItem(item.MakeIndex),2==G_SpotDlgMode?Sendmessage.DepotOrBagItems(item.MakeIndex,4):Sendmessage.DepotOrBagItems(item.MakeIndex,3),Laya.stage.event("update_depot"),Laya.stage.event("show_bag_items")))};a.OnMouseMove=function(){this.root.getChildByName("img_bg");this.dragDlg&&(this.x=(Laya.stage.mouseX-this.startDragPos.x)*g_BaseScale,this.y=(Laya.stage.mouseY-this.startDragPos.y)*g_BaseScale)};a.OnMouseUp=function(){this.dragDlg=!1};a.ResetUI=function(){null!=this.root&&(this.root.getChildByName("list_view").skin="",this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick))};a.BtnClick=function(a){"btn_exit"==a.target.name&&(this.visible=!1)}})();(function(){function b(a,b){this.asset;this.msgcontent=a;this.npcId=b;Laya.Dialog.closeAll();this.dialog=new Laya.Dialog;this.Init()}Laya["class"](b,"UIDialog",laya.display.Sprite);var c=b.prototype;c.Init=function(){Laya.stage.on("npc_log_close",this,this.DoNpc);this.onSkinLoaded()};c.DoNpc=function(a){this.visible=!1;Laya.Dialog.closeAll()};c.onSkinLoaded=function(){var a=new Laya.Image;a.skin=this.asset[1];a.width=550;a.height=200;a.name="img_bg";this.dialog.addChild(a);a=new Laya.Button(this.asset[0]);a.on(Laya.Event.CLICK,this,this.DoNpc);a.height=46;a.pos(507,0);a.stateNum=2;this.dialog.addChild(a);this.dialog.dragArea="0,0,550,200";this.dialog.show();var b=this;setTimeout(function(){b.onAddMsgItem()},300)};c.onAddMsgItem=function(){var a=this.msgcontent.split("\\"),b=new RegExp(/<.+?>/g);this.dlg_height=0;a.forEach(function(a,c){var f=new Laya.Text,h=21*c+10;f.fontSize=16;f.color="#ffffff";f.textHeight=21;f.x=40;f.y=h;var l=a.match(b);this.dlg_height=h;if(null!=l)for(var f=40,m=0;m<l.length;m++){var n=new Laya.Text,q=new Laya.Text;this.dialog.addChild(q);this.dialog.addChild(n);n.fontSize=16;n.textHeight=21;q.textHeight=21;q.fontSize=16;var p="",p=0,r=a.indexOf(l[m]);0<m&&(p=a.indexOf(l[m-1])+l[m-1].length);q.x=f;q.y=h;q.color="#ffffff";q.text=a.substring(p,r);f=q.x+q.textWidth;n.x=f;n.y=h;/text/.test(l[m])||(/\/@/.test(l[m])?(p=l[m].substring(1,l[m].length-1),q=p.split("/"),n.text=q[0],n.underline=!0,n.color="#ffff00",n.on(Laya.Event.CLICK,this,this.onCmdClick,[q[1]])):/\/F/.test(l[m])&&(p=l[m].substring(1,l[m].length-1),q=p.split("/"),n.text=q[0],n.underline=!1,0<q[1].indexOf("$")?n.color="#"+Get3RGB(q[1].split("$")[1].substr(2,6)):n.color=Get2RGB(parseInt(q[1].split("\x3d")[1]))));f+=n.textWidth;m==l.length-1&&(n=new Laya.Text,n.fontSize=16,n.x=f,n.y=h,n.textHeight=21,n.color="#ffffff",n.text=a.substring(a.indexOf(l[m])+l[m].length,a.length),this.dialog.addChild(n))}else f.text=a,this.dialog.addChild(f)},this)};c.onCmdClick=function(a){"@exit"==a?this.dialog.close():Sendmessage.SendNpcCMD(a,this.npcId)}})();
var UIdoudizhu=function(b){function c(){c.__super.call(this);this.init()}function a(){a.__super.call(this);this.size(86,128);this.img=new Laya.Image;this.addChild(this.img);this.setImg=function(a){this.img.skin=a}}var d=[],e=20,g=0,f=1,h=[],l=0,m=[],n=!0;Laya["class"](c,"UIdoudizhu",doudizhuUI);b=c.prototype;Laya["class"](a,"Item",Laya.Box);b.init=function(){var a=[];a.push({url:["ui/doudizhu/00019.png"]});Laya.loader.load(a,Laya.Handler.create(this,this.ResLoaded),null,Laya.Loader.IMAGE);this.ready=!0;this.btn_1.visible=!1;this.btn_2.visible=!1;this.btn_3.visible=!1;this.btn_chupai.visible=!1;this.btn_chongxuan.visible=!1;this.btn_buchu.visible=!1;this.img_play1_buchu.visible=!1;this.img_play2_buchu.visible=!1;this.img_play3_buchu.visible=!1;this.img_yb_play1.visible=!1;this.img_yb_play2.visible=!1;this.img_yb_play3.visible=!1;this.img_zhenying1.visible=!1;this.img_zhenying2.visible=!1;this.img_zhenying3.visible=!1;this.img_play1_fen.visible=!1;this.img_play2_fen.visible=!1;this.img_play3_fen.visible=!1;this.img_play1.skin="ui/doudizhu/00113.png";this.img_play2.skin="ui/doudizhu/00113.png";this.img_play3.skin="ui/doudizhu/00113.png";this.text_ready2go.visible=!1;this.text_ready3go.visible=!1;this.img_play2_buchu.visible=!1;this.img_play3_buchu.visible=!1;this.text_yb_play1.text=0;this.text_yb_play2.text=0;this.text_yb_play3.text=0;this.name_play1.text="";this.name_play2.text="";this.name_play3.text="";this.play1_time.visible=!1;this.play2_time.visible=!1;this.play3_time.visible=!1;this.list_shoupai.array=[];this.game_result.visible=!1;Laya.stage.on("Update",this,this.Update);Laya.stage.on("NotOut",this,this.NotOut);Laya.stage.on("OutLine",this,this.OutLine);Laya.stage.on("OnTime",this,this.OnTimeUpdate);Laya.stage.on("clockTime",this,this.clockTime);Laya.stage.on("OutLineEnterGetTimerNum",this,this.OutLineEnterGetTimerNum);Laya.stage.on("MusicSound",this,this.MusicSound);Laya.SoundManager.playMusic("wav/doudizhu/MusicEx_Exciting.wav",0);Laya.timer.loop(1E3,this,this.countDown)};b.ResLoaded=function(){this.btn_exit.on(Laya.Event.CLICK,this,this.exitCardGame3);this.btn_ready.on(Laya.Event.CLICK,this,this.ReadyCardGame3);this.btn_1.on(Laya.Event.CLICK,this,this.chooseScore);this.btn_2.on(Laya.Event.CLICK,this,this.chooseScore);this.btn_3.on(Laya.Event.CLICK,this,this.chooseScore);this.btn_chupai.on(Laya.Event.CLICK,this,this.throwCard);this.btn_buchu.on(Laya.Event.CLICK,this,this.notThrowCard);this.btn_tuoguan.on(Laya.Event.CLICK,this,this.autoCard);this.btn_chongkai.on(Laya.Event.CLICK,this,this.oneMore);this.btn_chongxuan.on(Laya.Event.CLICK,this,this.Reelection);this.btn_tishi.on(Laya.Event.CLICK,this,this.hint);this.list_shoupai.on(Laya.Event.MOUSE_DOWN,this,this.MouseDown);this.btn_off_tuoguan.on(Laya.Event.CLICK,this,this.autoCard)};b.Update=function(){this.data=new cardGameInfo;this.lastCard=this.data.lastOutCard;this.lastCard=this.lastCard.split(",");for(var a=0;a<this.lastCard.length;a++)""==this.lastCard[a]&&this.lastCard.splice(a,1);if(a=ObjectManage.findobject(playerID))switch(a.nametites[0]){case this.data.role1name:this.role(1,2,3);break;case this.data.role2name:this.role(2,3,1);break;case this.data.role3name:this.role(3,1,2)}this.ReadyGame();this.text_desk_num.text="\u3010\u6597\u5730\u4e3b\u521d\u7ea7\u573a - \u7b2c"+this.data.deskID+"\u684c\u3011";this.btn_ready.visible&&(this.box_outcard2._childs=[],this.box_outcard1._childs=[],this.box_outcard3._childs=[]);this.yuanbao.text="\u5143\u5b9d\uff1a"+g_GameGoldNum.value;this.dizhu.text="\u5e95\u6ce8\uff1a"+this.data.baseGoldPer;this.beilv.text="\u500d\u7387\uff1a"+this.data.multiple};b.role=function(a,b,f){this.name_play1.text=this.data["role"+a+"name"];this.text_yb_play1.text=this.data["role"+a+"gameGold"];this.img_play1.skin="ui/doudizhu/00115.png";"1"==this.data["role"+a+"isCollocation"]?(this.btn_off_tuoguan.visible=!0,this.btn_chupai.visible=!1,this.btn_chongxuan.visible=!1,this.btn_buchu.visible=!1,this.btn_tishi.visible=!1,this.play1_time.visible=!1,this.play2_time.visible=!1,this.play3_time.visible=!1):(this.btn_off_tuoguan.visible=!1,this.btn_chupai.visible=!0,this.btn_chongxuan.visible=!0,this.btn_buchu.visible=!0,this.btn_tishi.visible=!0,this.play1_time.visible=!0,this.play2_time.visible=!0,this.play3_time.visible=!0);"1"==this.data["role"+a+"chooseDiZhuChance"]?(this.btn_1.visible=!0,this.btn_2.visible=!0,this.btn_3.visible=!0):(this.btn_1.visible=!1,this.btn_2.visible=!1,this.btn_3.visible=!1);this.MyHandCard(this.data["role"+a+"roleCardsTab"]);"1"==this.data["role"+a+"outCardChance"]&&"0"==this.data["role"+a+"isCollocation"]?(this.btn_chupai.visible=!0,this.btn_chongxuan.visible=!0,this.btn_buchu.visible=!0,this.btn_tishi.visible=!0):(this.btn_chupai.visible=!1,this.btn_chongxuan.visible=!1,this.btn_buchu.visible=!1,this.btn_tishi.visible=!1);if(this.data.lastOutCard&&this.data.lastCardName==this.data["role"+a+"name"]){this.box_outcard1._childs=[];var c=this.data.lastOutCard.split(",");c.sort(this.sortNum);for(var d=[],h=0;h<c.length-1;h++)""!=c[h]&&(d[h]=new Laya.Image("ui/doudizhu/"+c[h]+"00.png"),d[0].x=(this.box_outcard1.width-(70+20*(c.length-1)))/2,d[h].x=d[0].x+20*h,this.box_outcard1.addChild(d[h]));this.box_outcard3._childs=[];this.box_outcard2._childs=[]}"0"==this.data["role"+a+"score"]||this.btn_ready.visible?this.img_play1_fen.visible=!1:(this.img_play1_fen.visible=!0,this.img_play1_fen.skin="1"==this.data["role"+a+"score"]?"ui/doudizhu/00104.png":"2"==this.data["role"+a+"score"]?"ui/doudizhu/00105.png":"ui/doudizhu/00106.png");this.data["role"+b+"name"]?(this.name_play2.text=this.data["role"+b+"name"],this.text_yb_play2.text=this.data["role"+b+"gameGold"],this.img_play2.skin="ui/doudizhu/00115.png",this.text_ready2go.visible="1"==this.data["role"+b+"isReady"]?!0:!1):(this.name_play2.text=this.data["role"+b+"name"],this.text_yb_play2.text=0,this.img_play2.skin="ui/doudizhu/00113.png",this.text_ready2go.visible=!1);if(this.data.lastOutCard&&this.data.lastCardName==this.data["role"+b+"name"]){this.box_outcard2._childs=[];c=this.data.lastOutCard.split(",");c.sort(this.sortNum);d=[];for(h=0;h<c.length-1;h++)""!=c[h]&&(d[h]=new Laya.Image("ui/doudizhu/"+c[h]+"00.png"),d[0].x=this.box_outcard2.width-(70+20*(c.length-1)),d[h].x=d[0].x+20*h,this.box_outcard2.addChild(d[h]));this.box_outcard1._childs=[];this.box_outcard3._childs=[]}"0"==this.data["role"+b+"score"]||this.btn_ready.visible||(this.img_play2_fen.visible=!0,this.img_play2_fen.skin="1"==this.data["role"+b+"score"]?"ui/doudizhu/00104.png":"2"==this.data["role"+b+"score"]?"ui/doudizhu/00105.png":"ui/doudizhu/00106.png");this.data["role"+f+"name"]?(this.name_play3.text=this.data["role"+f+"name"],this.text_yb_play3.text=this.data["role"+f+"gameGold"],this.img_play3.skin="ui/doudizhu/00115.png",this.text_ready3go.visible="1"==this.data["role"+f+"isReady"]?!0:!1):(this.name_play3.text=this.data["role"+f+"name"],this.text_yb_play3.text=0,this.img_play3.skin="ui/doudizhu/00113.png",this.text_ready3go.visible=!1);if(this.data.lastOutCard&&this.data.lastCardName==this.data["role"+f+"name"]){this.box_outcard3._childs=[];c=this.data.lastOutCard.split(",");c.sort(this.sortNum);d=[];for(h=0;h<c.length-1;h++)""!=c[h]&&(d[h]=new Laya.Image("ui/doudizhu/"+c[h]+"00.png"),d[h].x=20*h,this.box_outcard3.addChild(d[h]));this.box_outcard2._childs=[];this.box_outcard1._childs=[]}"0"==this.data["role"+f+"score"]||this.btn_ready.visible||(this.img_play3_fen.visible=!0,this.img_play3_fen.skin="1"==this.data["role"+f+"score"]?"ui/doudizhu/00104.png":"2"==this.data["role"+f+"score"]?"ui/doudizhu/00105.png":"ui/doudizhu/00106.png");"0"==this.data["role"+a+"score"]&&"0"==this.data["role"+b+"score"]&&"0"==this.data["role"+f+"score"]&&(this.img_play1_fen.visible=!1,this.img_play2_fen.visible=!1,this.img_play3_fen.visible=!1);this.data["role"+a+"name"]&&(this.img_play1.skin="1"==this.data["role"+a+"chooseDiZhuChance"]?"ui/doudizhu/00114.png":"ui/doudizhu/00115.png");this.data["role"+b+"name"]&&(this.img_play2.skin="1"==this.data["role"+b+"chooseDiZhuChance"]?"ui/doudizhu/00114.png":"ui/doudizhu/00115.png");this.data["role"+f+"name"]&&(this.img_play3.skin="1"==this.data["role"+f+"chooseDiZhuChance"]?"ui/doudizhu/00114.png":"ui/doudizhu/00115.png");e=20;"1"!=this.data["role"+a+"outCardChance"]&&"1"!=this.data["role"+a+"chooseDiZhuChance"]||"0"!=this.data["role"+a+"isCollocation"]?(this.play1_time.visible=!1,this.play1_time_text.text=20):(this.play1_time.visible=!0,g=1);"1"!=this.data["role"+b+"outCardChance"]&&"1"!=this.data["role"+b+"chooseDiZhuChance"]||"0"!=this.data["role"+b+"isCollocation"]?(this.play2_time.visible=!1,this.play2_time_text.text=20):(this.play2_time.visible=!0,g=2);"1"!=this.data["role"+f+"outCardChance"]&&"1"!=this.data["role"+f+"chooseDiZhuChance"]||"0"!=this.data["role"+f+"isCollocation"]?(this.play3_time.visible=!1,this.play3_time_text.text=20):(this.play3_time.visible=!0,g=3);"1"==this.data["role"+a+"outCardChance"]?this.img_play1_buchu.visible=!1:"1"==this.data["role"+b+"outCardChance"]?this.img_play2_buchu.visible=!1:this.img_play3_buchu.visible=!1;"1"==this.data.isGameOver&&this.GameResult(a,b,f);if("1"==this.data["role"+a+"isDiZhu"]&&this.data["role"+b+"name"]&&this.data["role"+f+"name"]&&(this.img_play1.skin="ui/doudizhu/00114.png",this.img_play2.skin="ui/doudizhu/00115.png",this.img_play3.skin="ui/doudizhu/00115.png",this.img_zhenying1.skin="ui/doudizhu/00116.png",this.img_zhenying2.skin="ui/doudizhu/00117.png",this.img_zhenying3.skin="ui/doudizhu/00117.png",this.img_play2_fen.visible=!1,this.img_play3_fen.visible=!1,this.img_play1_fen.visible=!1,this.data.underCards)){this.list_dipai._childs=[];c=this.data.underCards.split(",");c.sort(this.sortNum);d=[];for(h=0;h<c.length-1;h++)d[h]=new Laya.Image("ui/doudizhu/"+c[h]+"00.png"),d[h].x=95*h,this.list_dipai.addChild(d[h]);this.img_yb_play1.visible=!0;this.img_yb_play2.visible=!0;this.img_yb_play3.visible=!0;this.img_zhenying1.visible=!0;this.img_zhenying2.visible=!0;this.img_zhenying3.visible=!0}if("1"==this.data["role"+b+"isDiZhu"]&&this.data["role"+f+"name"]&&this.data["role"+a+"name"]&&(this.img_play2.skin="ui/doudizhu/00114.png",this.img_play3.skin="ui/doudizhu/00115.png",this.img_play1.skin="ui/doudizhu/00115.png",this.img_zhenying1.skin="ui/doudizhu/00117.png",this.img_zhenying2.skin="ui/doudizhu/00116.png",this.img_zhenying3.skin="ui/doudizhu/00117.png",this.img_play1_fen.visible=!1,this.img_play3_fen.visible=!1,this.img_play2_fen.visible=!1,this.data.underCards)){this.list_dipai._childs=[];c=this.data.underCards.split(",");c.sort(this.sortNum);d=[];for(h=0;h<c.length-1;h++)d[h]=new Laya.Image("ui/doudizhu/"+c[h]+"00.png"),d[h].x=95*h,this.list_dipai.addChild(d[h]);this.img_yb_play1.visible=!0;this.img_yb_play2.visible=!0;this.img_yb_play3.visible=!0;this.img_zhenying1.visible=!0;this.img_zhenying2.visible=!0;this.img_zhenying3.visible=!0}if("1"==this.data["role"+f+"isDiZhu"]&&this.data["role"+a+"name"]&&this.data["role"+b+"name"]&&(this.img_play3.skin="ui/doudizhu/00114.png",this.img_play1.skin="ui/doudizhu/00115.png",this.img_play2.skin="ui/doudizhu/00115.png",this.img_zhenying1.skin="ui/doudizhu/00117.png",this.img_zhenying2.skin="ui/doudizhu/00117.png",this.img_zhenying3.skin="ui/doudizhu/00116.png",this.img_play1_fen.visible=!1,this.img_play2_fen.visible=!1,this.img_play3_fen.visible=!1,this.data.underCards)){this.list_dipai._childs=[];c=this.data.underCards.split(",");c.sort(this.sortNum);d=[];for(h=0;h<c.length-1;h++)d[h]=new Laya.Image("ui/doudizhu/"+c[h]+"00.png"),d[h].x=95*h,this.list_dipai.addChild(d[h]);this.img_yb_play1.visible=!0;this.img_yb_play2.visible=!0;this.img_yb_play3.visible=!0;this.img_zhenying1.visible=!0;this.img_zhenying2.visible=!0;this.img_zhenying3.visible=!0}};b.GameResult=function(a,b,f){this.game_result.visible=!0;this.MusicSound(this.data.lastOutCard);"1"==this.data["role"+a+"isWinner"]&&"1"==this.data["role"+a+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00008.png",this.img_game_dizhu1.visible=!0,this.text_gameplay1name.text=this.data["role"+a+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="+"+2*this.data.baseGoldPer*this.data.multiple,this.text_gameplay2name.text=this.data["role"+b+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,this.text_gameplay3name.text=this.data["role"+f+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,n&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Win.wav")):"0"==this.data["role"+a+"isWinner"]&&"1"==this.data["role"+a+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00006.png",this.img_game_dizhu1.visible=!0,this.text_gameplay1name.text=this.data["role"+a+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="-"+2*this.data.baseGoldPer*this.data.multiple,this.text_gameplay2name.text=this.data["role"+b+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,this.text_gameplay3name.text=this.data["role"+f+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,n&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Lose.wav")):"1"==this.data["role"+a+"isWinner"]&&"1"==this.data["role"+b+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00009.png",this.text_gameplay1name.text=this.data["role"+a+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,this.img_game_dizhu2.visible=!0,this.text_gameplay2name.text=this.data["role"+b+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="-"+2*this.data.baseGoldPer*this.data.multiple,this.text_gameplay3name.text=this.data["role"+f+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,n&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Win.wav")):"1"==this.data["role"+a+"isWinner"]&&"1"==this.data["role"+f+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00009.png",this.text_gameplay1name.text=this.data["role"+a+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,this.text_gameplay2name.text=this.data["role"+b+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="+"+this.data.baseGoldPer*this.data.multiple,this.img_game_dizhu3.visible=!0,this.text_gameplay3name.text=this.data["role"+f+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="-"+2*this.data.baseGoldPer*this.data.multiple,n&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Win.wav")):("0"==this.data["role"+a+"isWinner"]&&"1"==this.data["role"+b+"isDiZhu"]?(this.game_win.skin="ui/doudizhu/00007.png",this.text_gameplay1name.text=this.data["role"+a+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,this.img_game_dizhu2.visible=!0,this.text_gameplay2name.text=this.data["role"+b+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="+"+2*this.data.baseGoldPer*this.data.multiple,this.text_gameplay3name.text=this.data["role"+f+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple):(this.game_win.skin="ui/doudizhu/00007.png",this.text_gameplay1name.text=this.data["role"+a+"name"],this.text_gameplay1_dizhu.text=this.data.baseGoldPer,this.text_gameplay1_beishu.text=this.data.multiple,this.text_gameplay1_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,this.text_gameplay2name.text=this.data["role"+b+"name"],this.text_gameplay2_dizhu.text=this.data.baseGoldPer,this.text_gameplay2_beishu.text=this.data.multiple,this.text_gameplay2_jiesuan.text="-"+this.data.baseGoldPer*this.data.multiple,this.img_game_dizhu3.visible=!0,this.text_gameplay3name.text=this.data["role"+f+"name"],this.text_gameplay3_dizhu.text=this.data.baseGoldPer,this.text_gameplay3_beishu.text=this.data.multiple,this.text_gameplay3_jiesuan.text="+"+2*this.data.baseGoldPer*this.data.multiple),n&&GameUtil.PlayMusicFormat("wav/doudizhu/MusicEx_Lose.wav"));this.btn_chupai.visible=!1;this.btn_chongxuan.visible=!1;this.btn_buchu.visible=!1;this.btn_tishi.visible=!1;this.play1_time.visible=!1;this.play2_time.visible=!1;this.play3_time.visible=!1};b.OutLine=function(){if(this.data.role1roleCardsTab||this.data.role2roleCardsTab||this.data.role3roleCardsTab)this.btn_ready.visible=!1;if(!this.btn_ready.visible)for(var a=[],b=0;3>b;b++)a[b]=new Laya.Image("ui/doudizhu/00017.png"),a[b].x=95*b,this.list_dipai.addChild(a[b]);this.data.underCards&&(this.img_zhenying1.visible=!0,this.img_zhenying2.visible=!0,this.img_zhenying3.visible=!0);n=!0;this.Update();e=this.data.timerNum};b.OnTimeUpdate=function(a){f=a;var b,c;if(a=ObjectManage.findobject(playerID))switch(a.nametites[0]){case this.data.role1name:b=this.data.role1outCardChance;c=this.data.role1isCollocation;break;case this.data.role2name:b=this.data.role2outCardChance;c=this.data.role2isCollocation;break;case this.data.role3name:b=this.data.role3outCardChance,c=this.data.role3isCollocation}if("1"==b&&"1"==c)Laya.timer.once(250,this,function(){Sendmessage.sendCardGame3("SystemOutCard|"+f.toString())})};b.OutLineEnterGetTimerNum=function(){Sendmessage.sendCardGame3("OutLineEnterGetTimerNum|"+e.toString())};b.NotOut=function(){var a=ObjectManage.findobject(playerID);n&&GameUtil.PlayMusicFormat("wav/doudizhu/Woman_buyao1.wav");if(a)switch(a.nametites[0]){case this.data.role1name:"1"==this.data.role1outCardChance?this.img_play3_buchu.visible=!0:"1"==this.data.role2outCardChance?this.img_play1_buchu.visible=!0:this.img_play2_buchu.visible=!0;break;case this.data.role2name:"1"==this.data.role2outCardChance?this.img_play3_buchu.visible=!0:"1"==this.data.role3outCardChance?this.img_play1_buchu.visible=!0:this.img_play2_buchu.visible=!0;break;case this.data.role3name:"1"==this.data.role3outCardChance?this.img_play3_buchu.visible=!0:"1"==this.data.role1outCardChance?this.img_play1_buchu.visible=!0:this.img_play2_buchu.visible=!0}};b.ReadyGame=function(){if("1"==this.data.role1isReady&&"1"==this.data.role2isReady&&"1"==this.data.role3isReady){this.btn_ready.visible=!1;for(var a=[],b=0;3>b;b++)a[b]=new Laya.Image("ui/doudizhu/00017.png"),a[b].x=95*b,this.list_dipai.addChild(a[b])}};b.MyHandCard=function(b){b=b.split(",");b.sort(this.sortNum);var f=[];this.list_shoupai.width=86*(b.length-1)-63*(b.length-2);this.list_shoupai.itemRender=a;this.list_shoupai.repeatX=b.length-1;this.list_shoupai.repeatY=1;this.list_shoupai.spaceX=-63;this.list_shoupai.selectEnable=!0;this.list_shoupai.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_shoupai.selectHandler=new Laya.Handler(this,this.onSelect);this.list_shoupai.x=(Laya.stage.width-this.list_shoupai.width)/2;for(var c=0;c<b.length;c++)""!=b[c]&&f.push("ui/doudizhu/"+b[c]+"00.png");this.list_shoupai.array=f;for(c=0;c<this.list_shoupai.cells.length;c++)this.list_shoupai.cells[c].name=b[c]};b.UpdateItem=function(a,b){a.setImg(a.dataSource)};b.onSelect=function(a){this.list_shoupai._selectedIndex=-1};b.MouseDown=function(a){this.list_shoupai.on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.list_shoupai.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.list_shoupai.on(Laya.Event.MOUSE_OUT,this,this.MouseUp);console.log(m);if(""==m){var b=this.list_shoupai.cells.indexOf(a.target);-1==m.indexOf(b)&&m.push(b);b=new Laya.GlowFilter("#ffff00",3,0,0);a.target.filters=[b]}};b.MouseUp=function(){this.list_shoupai.off(Laya.Event.MOUSE_MOVE,this,this.MouseMove);for(var a=0;a<m.length;a++){var b=this.list_shoupai.cells[m[a]];b.y=0==b.y?b.y-10:b.y+10;b.filters=[]}m=[]};b.MouseMove=function(a){var b=this.list_shoupai.cells.indexOf(a.target);-1==m.indexOf(b)&&m.push(b);b=new Laya.GlowFilter("#ffff00",3,0,0);a.target.filters=[b]};b.MusicSound=function(a){switch(a){case "1":n&&GameUtil.PlayMusicFormat("wav/doudizhu/Woman_NoOrder.wav");break;case "2":n&&GameUtil.PlayMusicFormat("wav/doudizhu/Woman_Order.wav");break;case "3":n&&GameUtil.PlayMusicFormat("wav/doudizhu/Woman_Rob1.wav")}if(n)switch(this.data.lastOutCardType){case "1":a=a.slice(1,3);"16"==a?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_15.wav"):"18"==a?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_100.wav"):"19"==a?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_200.wav"):GameUtil.PlayMusicFormat("wav/doudizhu/Woman_"+a+".wav");break;case "2":a=a.slice(1,3);"16"==a?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_dui15.wav"):GameUtil.PlayMusicFormat("wav/doudizhu/Woman_dui"+a+".wav");break;case "3":a=a.slice(1,3);"16"==a?GameUtil.PlayMusicFormat("wav/doudizhu/Woman_tuple15.wav"):GameUtil.PlayMusicFormat("wav/doudizhu/Woman_tuple"+a+".wav");break;case "4":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_sandaiyi.wav");break;case "5":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_sandaiyidui.wav");break;case "6":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_sidaier.wav");break;case "7":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_sidailiangdui.wav");break;case "8":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_shunzi.wav");break;case "9":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_liandui.wav");break;case "10":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_zhadan.wav");break;case "11":case "12":case "13":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_feiji.wav");break;case "14":GameUtil.PlayMusicFormat("wav/doudizhu/Woman_wangzha.wav")}};b.Reelection=function(){for(var a=0;a<this.list_shoupai.cells.length;a++)this.list_shoupai.cells[a]&&-10==this.list_shoupai.cells[a].y&&(this.list_shoupai.cells[a].y+=10)};b.exitCardGame3=function(){Sendmessage.sendCardGame3("exitGame|\u9000\u51fa\u623f\u95f4");Laya.timer.clear(this,this.countDown);Laya.SoundManager.stopAll();n=!1;this.removeSelf()};b.CardGame3=function(){Sendmessage.sendCardGame3("QuickJoinRoom|\u52a0\u5165\u623f\u95f4")};b.ReadyCardGame3=function(){Sendmessage.sendCardGame3("ReadyStartGame|\u73a9\u5bb6\u51c6\u5907");this.ready?(this.btn_ready.label="\u5df2\u51c6\u5907",this.ready=!1):(this.btn_ready.label="\u51c6\u5907",this.ready=!0)};b.chooseScore=function(a){a=a.target.name.split("_")[1];Sendmessage.sendCardGame3("FromChooseDiZhuBtn|"+a);this.btn_1.visible=!1;this.btn_2.visible=!1;this.btn_3.visible=!1};b.oneMore=function(){Sendmessage.sendCardGame3("OneMoreToServer|\u518d\u6765\u4e00\u5c40");this.game_result.visible=!1;this.btn_ready.visible=!0;this.btn_ready.label="\u51c6\u5907";this.ready=!0;this.btn_off_tuoguan.visible=!1;this.img_play1_buchu.visible=!1;this.img_play2_buchu.visible=!1;this.img_play3_buchu.visible=!1;this.img_yb_play1.visible=!1;this.img_yb_play2.visible=!1;this.img_yb_play3.visible=!1;this.img_zhenying1.visible=!1;this.img_zhenying2.visible=!1;this.img_zhenying3.visible=!1;this.img_game_dizhu1.visible=!1;this.img_game_dizhu2.visible=!1;this.img_game_dizhu3.visible=!1;this.list_dipai._childs=[];this.box_outcard1._childs=[];this.box_outcard2._childs=[];this.box_outcard3._childs=[];this.list_shoupai.array=[]};b.throwCard=function(){for(var a=0;a<this.list_shoupai.cells.length;a++)-10==this.list_shoupai.cells[a].y&&d.push(this.list_shoupai.cells[a].name);for(a=0;a<d.length;a++)d[a]="["+(a+1)+"]\x3d"+d[a];a=d.toString();Sendmessage.sendCardGame3("CheckCards|"+("\x3c"+a+"\x3e"));d=[];h=[];l=0};b.notThrowCard=function(){Sendmessage.sendCardGame3("NoOutCards|\u4e0d\u51fa\u724c");h=[];l=0};b.autoCard=function(){Sendmessage.sendCardGame3("FromCollocationBtn|\u6258\u7ba1");h=[];l=0};b.countDown=function(){switch(g){case 1:this.play1_time_text.align="center";this.play1_time_text.text=e.toString();break;case 2:this.play2_time_text.align="center";this.play2_time_text.text=e.toString();break;case 3:this.play3_time_text.align="center",this.play3_time_text.text=e.toString()}0<e?e--:(1==this.data.role1chooseDiZhuChance||1==this.data.role2chooseDiZhuChance||1==this.data.role3chooseDiZhuChance?Sendmessage.sendCardGame3("SystemChooseDiZhu|"+f.toString()):1!=this.data.role1outCardChance&&1!=this.data.role2outCardChance&&1!=this.data.role3outCardChance||Sendmessage.sendCardGame3("SystemOutCard|"+f.toString()),e=20)};b.hint=function(){this.Reelection();var a=[],b=ObjectManage.findobject(playerID);if(b)switch(b.nametites[0]){case this.data.role1name:a=this.data.role1roleCardsTab;break;case this.data.role2name:a=this.data.role2roleCardsTab;break;case this.data.role3name:a=this.data.role3roleCardsTab}this.lastCard&&a&&(a=a.split(","),""==a[a.length-1]&&a.pop(),this.toNum(this.lastCard),this.toNum(a),this.autoPick(this.lastCard,a));h&&0!=h.length?(h=this.unique(h),console.log(h),h.length-1<l&&(l=0),this.pushHint(h[l]),l++):(Laya.stage.event("show_log",[{txt:"\u624b\u4e2d\u6ca1\u6709\u7b26\u5408\u8981\u6c42\u7684\u724c\u3002",color:"#ff0000"}]),l=0);h=[]};b.pushHint=function(a){for(var b=0;b<a.length;b++)for(var f=0;f<this.list_shoupai.cells.length;f++)if(parseInt(this.list_shoupai.cells[f].name)%100==a[b]&&-10!=this.list_shoupai.cells[f].y){this.list_shoupai.cells[f].y=-10;break}};b.unique=function(a){for(var b=[a[0]],f=1;f<a.length;f++)a[f].toString()!==b[b.length-1].toString()&&b.push(a[f]);return b};b.toNum=function(a){for(var b=0;b<a.length;b++)a[b]=parseInt(a[b])%100};b.toStr=function(a){for(var b=0;b<a.length;b++)a[b]=a[b].toString()};b.sortNum=function(a,b){return b%100-a%100};b.getType=function(a){for(var b=new cardGameType,f=0;f<a.length;){for(var c=0,d=0;d<a.length;d++)a[f]==a[d]&&c++;1==c&&b.solo.push(a[f]);2==c&&b["double"].push(a[f]);3==c&&b.triple.push(a[f]);4==c&&b.four.push(a[f]);f+=c}return b};b.checkHand=function(a,b){for(var f=0;f<a.length;f++)if(a[f]==b)return a[f]};b.autoPick=function(a,b){var f=this.getType(a),c=this.getType(b);switch(this.data.lastOutCardType){case "1":for(var d=0;d<b.length;d++)if(b[d]>a[0]&&-1==h.indexOf(b[d])){var e=[];e.push(b[d]);h.push(e)}break;case "2":for(d=0;d<c["double"].length;d++)c["double"][d]>a[0]&&(e=[],e.push(c["double"][d],c["double"][d]),h.push(e));for(d=0;d<c.triple.length;d++)c.triple[d]>a[0]&&(e=[],e.push(c.triple[d],c.triple[d]),h.push(e));break;case "3":for(d=0;d<c.triple.length;d++)c.triple[d]>f.triple[0]&&(e=[],e.push(c.triple[d],c.triple[d],c.triple[d]),h.push(e));break;case "4":for(d=0;d<c.triple.length;d++)c.triple[d]>f.triple[0]&&(e=[],e.push(c.triple[d],c.triple[d],c.triple[d]),c.solo[0]?e.push(c.solo[0]):c["double"][0]?e.push(c["double"][0]):c.triple[0]&&e.push(c.triple[0]),h.push(e));break;case "5":for(d=0;d<c.triple.length;d++)c.triple[d]>f.triple[0]&&(e=[],e.push(c.triple[d],c.triple[d],c.triple[d]),c["double"][0]?e.push(c["double"][0],c["double"][0]):c.triple[0]&&e.push(c.triple[0],c.triple[0]),h.push(e));break;case "6":for(d=0;d<c.four.length;d++){if(c.four[d]>f.four[0]){e=[];e.push(c.four[d],c.four[d],c.four[d],c.four[d]);for(var l=c.solo,g=c["double"],m=c.triple,d=0;2>d;d++)l[0]?e.push(l.shift()):g[0]?e.push(g.shift()):m[0]&&e.push(m.shift())}h.push(e)}break;case "7":for(d=0;d<c.four.length;d++){if(c.four[d]>f.four[0])for(e=[],e.push(c.four[d],c.four[d],c.four[d],c.four[d]),g=c["double"],m=c.triple,d=0;2>d;d++)g[0]?(l=g.shift(),e.push(l,l)):m[0]&&(l=m.shift(),e.push(l,l));h.push(e)}break;case "8":for(d=0;d<b.length;d++)if(b[d]>a[0]){e=[];e.push(b[d]);for(var n=1;n<a.length;n++)(l=this.checkHand(b,b[d]+n))&&e.push(l);e.length==a.length&&h.push(e)}break;case "9":for(d=0;d<c["double"].length;d++){if(c["double"][d]>f["double"][0]){e=[];e.push(c["double"][d],c["double"][d]);for(n=1;n<f["double"].length;n++)(l=this.checkHand(c["double"],c["double"][d]+n))&&e.push(l,l);e.length==2*f["double"].length&&h.push(e)}if(c.triple[d]>f["double"][0]){e=[];e.push(c.triple[d],c.triple[d]);for(n=1;n<f["double"].length;n++)(l=this.checkHand(c.triple,c.triple[d]+n))&&e.push(l,l);e.length==2*f["double"].length&&h.push(e)}}break;case "10":for(d=0;d<c.four.length;d++)c.four[d]>a[0]&&(e=[],e.push(c.four[d],c.four[d],c.four[d],c.four[d]),h.push(e));for(d=0;d<b.length-1;d++)18==b[d]&&19==b[d+1]&&(f=[],f.push(18,19),h.push(f));return;case "11":for(d=0;d<b.length;d++)if(c.triple[d]>f.triple[0]){e=[];e.push(c.triple[d]);for(n=1;n<f.triple.length;n++)(l=this.checkHand(c.triple,c.triple[d]+n))&&e.push(l,l,l);e.length==a.length&&h.push(e)}break;case "12":for(d=0;d<b.length;d++)if(c.triple[d]>f.triple[0]){e=[];e.push(c.triple[d]);for(n=1;n<f.triple.length;n++)(l=this.checkHand(c.triple,c.triple[d]+n))&&e.push(l,l,l),l=c.solo,g=c["double"],l[0]?e.push(l.shift()):g[0]&&e.push(g.shift());e.length==a.length&&h.push(e)}break;case "13":for(d=0;d<b.length;d++)if(c.triple[d]>f.triple[0]){e=[];e.push(c.triple[d]);for(n=1;n<f.triple.length;n++)(l=this.checkHand(c.triple,c.triple[d]+n))&&e.push(l,l,l),g=c["double"],m=c.triple,g[0]?(g.shift(),e.push(l,l)):m[0]&&(m.shift(),e.push(l,l));e.length==a.length&&h.push(e)}break;case "14":return}for(d=0;d<c.four.length;d++)c.four[d]&&(f=[],f.push(c.four[d],c.four[d],c.four[d],c.four[d]),h.push(f));for(d=0;d<b.length-1;d++)18==b[d]&&19==b[d+1]&&(f=[],f.push(18,19),h.push(f))};return c}(doudizhuUI),UIFPack=function(b){function c(){c.__super.call(this);this.Init()}new Laya.Point(0,0);Laya["class"](c,"UIFPack",fsredpackUI);b=c.prototype;b.Init=function(){this.start()};b.start=function(){this.fasongpack.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.startpos=new Laya.Point;this.but_close.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownBut);this.but_pakSend.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownFaSong);this.combox_index.on(Laya.Event.CHANGE,this,this.onCHANGED);this.box_haoy.on(Laya.Event.CHANGE,this,this.onSELECT);this.pack_logo.skin="gameres/ui/redpak_redbag0.png";this.edit_gold.text="100";this.edit_gold_count.text="1";this.setGoldLabels();this.combox_gold.selectedIndex=0;Laya.stage.on("update_friend_list",this,this.onCHANGED);this.edit_gold.on(Laya.Event.FOCUS,this,this.OnFocus);this.edit_gold.on(Laya.Event.BLUR,this,this.OnBlur);this.edit_gold_count.on(Laya.Event.FOCUS,this,this.OnFocus);this.edit_gold_count.on(Laya.Event.BLUR,this,this.OnBlur);this.pack_msg.on(Laya.Event.FOCUS,this,this.OnFocus);this.pack_msg.on(Laya.Event.BLUR,this,this.OnBlur)};b.setGoldLabels=function(){var a=g_ClientConfig.btRedPackGameUsesOptions;if(a){for(var a=a.toString(2),a=GameUtil.getprefixname(a,6),b="",c=a.length-1;0<=c;c--)if("1"==a[c])switch(c){case 5:b+=g_GameCionNum.key+",";break;case 4:b+=g_GameGoldNum.key+",";break;case 3:b+=g_GamePointNum.key+",";break;case 2:b+=g_nGameDiamond.key+",";break;case 1:b+=g_nGameGird.key+",";break;case 0:b+=g_gameGlory.key+","}this.combox_gold.labels=b.slice(0,b.length-1)}};b.OnFocus=function(){cur_use_app&&(this.fasongpack.top=-120)};b.OnBlur=function(){cur_use_app&&(this.fasongpack.y=42)};b.onCHANGED=function(){this.box_haoy.visible=!1;this.Lb_haoy.visible=!1;this.txt_gold.y=173;this.txt_edit.y=217;this.txt_msg.y=260;this.edit_gold.y=168;this.edit_gold_count.y=212;this.pack_msg.y=255;if(4==this.combox_index.selectedIndex){this.box_haoy.visible=!0;this.Lb_haoy.visible=!0;this.txt_gold.y=217;this.txt_edit.y=261;this.txt_msg.y=304;this.edit_gold.y=212;this.edit_gold_count.y=256;this.pack_msg.y=299;for(var a="",b="",c=0;c<G_Friend_RedPack_List.length;c++)a=G_Friend_RedPack_List[c].split(","),"1"==a[1]&&(b+=","+a[0]);this.box_haoy.labels="\u5168\u90e8"+b;this.box_haoy.selectedIndex=0}};b.onMouseDownBut=function(){Laya.stage.off("update_friend_list",this,this.onCHANGED);Laya.stage.removeChild(this)};b.onSELECT=function(){0==this.box_haoy.selectedIndex?this.edit_gold_count.disabled=!1:(this.edit_gold_count.text=1,this.edit_gold_count.disabled=!0)};b.onMouseDownFaSong=function(){var a=parseInt(this.edit_gold.text),b=parseInt(this.edit_gold_count.text),c=this.combox_gold.selectedLabel,g=-1,f=parseInt(this.combox_index.selectedIndex),h=this.pack_msg.text,l=0,m=0,n=0;if(15<h.length)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u795d\u798f\u8bed\u957f\u5ea6\u8d85\u8fc715\u4e2a\u5b57\uff01",callfn:function(){}}]);else{switch(c){case g_GameCionNum.key:g=1;l=g_GameCionNum.value;m=g_ClientConfig.nRedPackGoldMax;n=g_ClientConfig.nRedPackGoldMin;break;case g_GameGoldNum.key:g=0;l=g_GameGoldNum.value;m=g_ClientConfig.nRedPackGameGoldMax;n=g_ClientConfig.nRedPackGameGoldMin;break;case g_GamePointNum.key:g=2;l=g_GamePointNum.value;m=g_ClientConfig.nRedPackGamePointMax;n=g_ClientConfig.nRedPackGamePointMin;break;case g_nGameDiamond.key:g=3;l=g_nGameDiamond.value;m=g_ClientConfig.nRedPackGameDiamondMax;n=g_ClientConfig.nRedPackGameDiamondMin;break;case g_nGameGird.key:g=4;l=g_nGameGird.value;m=g_ClientConfig.nRedPackGameGirdMax;n=g_ClientConfig.nRedPackGameGirdMin;break;case g_gameGlory.key:g=5,l=g_gameGlory.value,m=g_ClientConfig.nRedPackGameGirdMax,n=g_ClientConfig.nRedPackGameGloryMin}if(a>l)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u4f60\u6ca1\u6709\u8db3\u591f\u7684"+c+"\uff01",callfn:function(){}}]);else if(a<n||a>m||50<b||1>b)Laya.stage.event("show_alert_dlg",[{type:1,txt:c+"\u6570\u91cf\u6700\u5c0f\uff1a"+n+"\u6700\u5927\uff1a"+m+" \r\n\u7ea2\u5305\u6570\u91cf\u6700\u5c0f\uff1a1 \u4e2a,\u6700\u5927\uff1a50\u4e2a",callfn:function(){}}]);else{l="";switch(f){case 0:l="\u884c\u4f1a";break;case 1:l="\u961f\u4f0d";break;case 2:l="\u56fd\u5bb6";break;case 3:l="\u5168\u670d";break;case 4:l="\u597d\u53cb"}var q=this;Laya.stage.event("show_alert_dlg",[{type:2,txt:"\u60a8\u786e\u5b9a\u8981\u53d1\u653e\u7ea2\u5305\u5417\uff1f \r\n"+b+" \u4e2a\u7ea2\u5305\uff0c\u5171\u8ba1\uff1a"+a+" \u4e2a"+c+",\u53d1\u653e\u8303\u56f4\uff1a"+l+"\r\n\u795d\u798f\u5185\u5bb9\uff1a"+h,callfn:function(c){c="";var e=0;if(4==f){if(0==q.box_haoy.selectedIndex){for(var l=0;l<G_Friend_RedPack_List.length;l++){var m=G_Friend_RedPack_List[l].split(",");""!=m[0]&&(m[1]="1",e+=1,c=c+m[0]+"\\")}if(1>e){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u672a\u6709\u597d\u53cb\u5728\u7ebf\uff0c\u53d1\u9001\u5931\u8d25\uff01",callfn:function(){}}]);return}}else c=q.box_haoy.labels.split(",")[q.box_haoy.selectedIndex]+"\\";c=c+"|"+h}else c=h;Sendmessage.sendRedPack(a,g,b,f,c);q.removeSelf()}}])}}};b.onMouseDown=function(a){this.startpos.x=a.stageX;this.startpos.y=a.stageY;this.fasongpack.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.fasongpack.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.fasongpack.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseUp=function(){this.fasongpack.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(a){this.fasongpack.x+=a.stageX-this.startpos.x;this.fasongpack.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};return c}(fsredpackUI),UIfriend=function(){function b(){b.__super.call(this);this.item=new friend_itemUI;this.addChild(this.item);this.Show=function(a,b){for(var c=a.split(":"),f=0;4>f;f++)if(c[f]){var h=c[f].split(",");this.item.getChildByName("lbl_"+f).text=h[0];this.item.getChildByName("lbl_"+f).overflow="hidden";this.item.getChildByName("lbl_"+f).fontSize=14}else this.item.getChildByName("lbl_"+f).text="";g_Select_Idx!=b&&(this.item.getChildByName("img_sel").visible=!1)}}function c(){c.__super.call(this);this.FriendList=[];this.SelectIdx=-1;this.StartDragPos=new Laya.Point(0,0);this.ClickPos=new Laya.Point(0,0);this.Init()}g_Select_Idx=-1;Laya["class"](b,"FriendItem",Laya.Box);Laya["class"](c,"UIFriend",FriendUI);var a=c.prototype;a.Init=function(){Laya.stage.on("update_friend_list",this,this.UpdateFriendList);Laya.stage.on("show_input_node",this,this.ShowInputNode);Laya.stage.on("update_friend_info",this,this.UpdateItems);Laya.stage.on("friendRequest",this,this.friendRequest);this.ResLoaded()};a.ResLoaded=function(){this.img_base.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.friendRequest();this.startpos=new Laya.Point;this.ResetUI()};a.friendRequest=function(){if(g_friend_request[0]){var a=g_friend_request[0];Laya.stage.event("show_alert_dlg",[{type:2,txt:a+"\u7533\u8bf7\u52a0\u4f60\u4e3a\u597d\u53cb\uff0c\u4f60\u662f\u5426\u540c\u610f\uff1f",callfn:function(b){Sendmessage.FriendOpition(1,a)},callcancelfun:function(){Laya.stage.event("friendRequest")}}]);g_friend_request.shift()}};a.onMouseDown=function(a){this.friend_list.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_base.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),this.img_base.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_base.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp))};a.onMouseUp=function(){this.img_base.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};a.onMouseMove=function(a){this.img_base.x+=a.stageX-this.startpos.x;this.img_base.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};a.ResetUI=function(){this.friend_list.skin="";this.friend_list.repeatX=1;this.friend_list.repeatY=9;this.friend_list.vScrollBarSkin="";this.friend_list.itemRender=b;this.friend_list.selectEnable=!0;this.friend_list.renderHandler=new Laya.Handler(this,this.UpdateItem);this.friend_list.mouseHandler=new Laya.Handler(this,this.ClickItem);this.btn_exit.on(Laya.Event.CLICK,this,this.BtnClick);this.input_node.visible=!1;this.btn_friend.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_hmd.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_nearby.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_add.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_del.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_chat.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_team.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_add_group.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_add_hmd.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_del_hmd.on(Laya.Event.CLICK,this,this.BtnClick);this.input_str.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_str.on(Laya.Event.BLUR,this,this.OnBlur);for(var a=0;a<G_Friend_List.length;a++){var c=G_Friend_List[a].split(",")[0];Sendmessage.FriendInfo(c)}this.UpdateFriendList()};a.OnFocus=function(){cur_use_app&&(this.input_node.top=0)};a.OnBlur=function(){cur_use_app&&(this.input_node.y=119)};a.UpdateItems=function(a){if(3==G_Friend_Option_Type){for(var b=!1,c=0;c<G_Friend_List.length;c++)G_Friend_List[c].split(":")[0]==a.split(":")[0]&&(b=!0);b||G_Friend_List.push(a)}else{for(c=0;c<this.FriendList.length;c++)if(this.FriendList[c].split(",")[0]==a.split(":")[0]){this.FriendList[c]=a;c==this.FriendList.length-1&&(this.friend_list.array=this.FriendList);break}this.UpdateFriendList()}};a.UpdateItem=function(a,b){a.Show(a.dataSource,b)};a.ClickItem=function(a,b){"click"==a.type&&(this.FriendList[b]&&(this.SelectIdx=b),g_Select_Idx=this.SelectIdx,a.target._childs[0].getChildByName("img_sel").visible=!0)};a.ShowInputNode=function(a){if(this.input_node){this.lbl_desc.text=void 0!=a.desc?a.desc:"";this.input_str.visible=void 0!=a.input?!0:!1;""!=g_copyName&&(this.btn_copy.visible=this.input_str.visible,this.input_str.width=285,this.btn_copy.on(Laya.Event.CLICK,this,function(){this.input_str.text=g_copyName}));var b=this;void 0!=a.callfn?(this.btn_ok.on(Laya.Event.CLICK,this,function(){a.callfn&&(a.callfn(),a.callfn=null,b.input_node.visible=!1,b.btn_copy.visible=!1,b.input_str.width=312,b.input_str.text="")}),this.btn_esc.on(Laya.Event.CLICK,this,function(){a.callfn=null;b.input_node.visible=!1;b.btn_copy.visible=!1;b.input_str.width=312;b.input_str.text=""}),this.btn_ok.visible=!0,this.btn_esc.visible=!0):(this.btn_ok.visible=!1,this.btn_esc.visible=!1);this.input_node.visible=!0}};a.UpdateFriendList=function(){switch(G_Friend_Option_Type){case 0:this.FriendList=G_Friend_List;break;case 1:this.FriendList=G_Friend_HMD_List;break;case 2:this.FriendList=G_Friend_Target_List;break;case 3:var a=ObjectManage.object_list,b=[],c="",f="";if(0<a.length)for(var h=0;h<a.length;h++)if(a[h]&&a[h].data&&a[h].skin_feature&&3==a[h].type&&1!=a[h].skin_feature.wRace&&150!=a[h].skin_feature.wRace&&a[h].data.record!=playerID&&a[h].txt_name&&""!==a[h].txt_name.text&&a[h].data.fea.buffer&&(fea=THumFeature(a[h].data.fea.buffer),0==fea.boLeader)){switch(fea.nSex){case 0:c="\u7537";break;case 1:c="\u5973"}f=a[h].guildName;""==f?f="- -":f&&-1!=f.indexOf("[")&&-1!=f.indexOf("]")&&(f=f.substring(0,f.indexOf("[")));f=a[h].txt_name.text+":"+c+":"+a[h].level+":"+f;b.push(f)}this.FriendList=b;break;default:this.FriendList=[]}switch(G_Friend_Option_Type){case 0:this.btn_del_hmd.visible=!1;this.btn_add_hmd.visible=!1;this.btn_chat.visible=!0;this.btn_add.visible=!0;this.btn_del.visible=!0;this.btn_team.visible=!0;this.btn_add_group.visible=!0;this.btn_friend.selected=!0;this.btn_hmd.selected=!1;this.btn_nearby.selected=!1;break;case 3:this.btn_del_hmd.visible=!1;this.btn_add_hmd.visible=!1;this.btn_chat.visible=!0;this.btn_add.visible=!0;this.btn_del.visible=!1;this.btn_team.visible=!0;this.btn_add_group.visible=!0;this.btn_nearby.visible=!0;this.btn_nearby.selected=!0;this.btn_friend.selected=!1;this.btn_hmd.selected=!1;break;default:this.btn_del_hmd.visible=!0,this.btn_add_hmd.visible=!0,this.btn_chat.visible=!1,this.btn_add.visible=!1,this.btn_del.visible=!1,this.btn_team.visible=!1,this.btn_add_group.visible=!1,this.btn_friend.selected=!1,this.btn_hmd.selected=!0,this.btn_nearby.selected=!1}this.friend_list.array=this.FriendList;this.friend_list.refresh()};a.ExitDlg=function(){this.visible=!1;for(var a=0;a<G_Friend_List.length;a++){var b=G_Friend_List[a].split(":");G_Friend_List[a]=b[0]}g_Select_Idx=-1;G_Friend_Option_Type=0};a.RemoveFriend=function(a){for(var b=0;b<G_Friend_List.length;b++){var c=G_Friend_List[b].split(":")[0];if(a==c){G_Friend_List.splice(b,1);this.UpdateFriendList();return}}for(b=0;b<G_Friend_HMD_List.length;b++)if(c=G_Friend_HMD_List[b].split(":")[0],a==c){G_Friend_HMD_List.splice(b,1);this.UpdateFriendList();break}};a.BtnClick=function(a){a=a.target.name;var b=this.FriendList[this.SelectIdx];b&&2<b.split(":").length&&(b=b.split(":")[0],-1<b.indexOf("\n")&&(b=b.split("\n")[1]));switch(a){case "btn_exit":this.ExitDlg();this.SelectIdx=-1;break;case "btn_friend":G_Friend_Option_Type=0;g_Select_Idx=-1;this.UpdateFriendList();break;case "btn_nearby":G_Friend_Option_Type=3;g_Select_Idx=-1;this.UpdateFriendList();break;case "btn_target":G_Friend_Option_Type=2;g_Select_Idx=-1;this.UpdateFriendList();break;case "btn_hmd":G_Friend_Option_Type=1;g_Select_Idx=-1;this.UpdateFriendList();break;case "btn_add":if(this.btn_nearby.selected&&-1<g_Select_Idx&&g_Select_Idx<this.FriendList.length){if(b=this.FriendList[g_Select_Idx],-1!=b.indexOf(":")){a=!1;for(var b=b.split(":"),c=0;c<G_Friend_List.length;c++){var f=G_Friend_List[c].split(":")[0];b[0]==f&&(a=!0)}a?Laya.stage.event("show_log",[{txt:"\u8be5\u597d\u53cb\u5df2\u6dfb\u52a0\uff01",color:"#ff0000"}]):(Sendmessage.FriendOpition(1,b[0]),Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u597d\u53cb\u7533\u8bf7\u5df2\u53d1\u9001\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\uff01",callfn:function(){}}]),Sendmessage.FriendInfo(b[0]))}}else{var h=this;a={desc:"\u8bf7\u8f93\u5165\u73a9\u5bb6\u6635\u79f0",callfn:function(){for(var a=h.input_str.text,b=!1,c=0;c<G_Friend_List.length;c++){var f=G_Friend_List[c].split(":")[0];a==f&&(b=!0)}b?Laya.stage.event("show_log",[{txt:"\u8be5\u597d\u53cb\u5df2\u6dfb\u52a0\uff01",color:"#ff0000"}]):(Sendmessage.FriendOpition(1,a),h.input_str.text="",Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u597d\u53cb\u7533\u8bf7\u5df2\u53d1\u9001\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\uff01",callfn:function(){}}]),Sendmessage.FriendInfo(a))},input:" "};Laya.stage.event("show_input_node",[a])}break;case "btn_del":0<=this.SelectIdx&&this.FriendList[this.SelectIdx]&&(h=this,a=this.FriendList[this.SelectIdx])&&(b=a.split(":"),2<b.length&&(a=b[0]),b=function(a){a=h.FriendList[h.SelectIdx];2<a.split(":").length&&(a=a.split(":")[0]);h.RemoveFriend(a);Sendmessage.FriendOpition(2,a)},a={desc:"\u786e\u5b9a\u8981\u5220\u9664 "+a+" \u5417\uff1f",callfn:b},Laya.stage.event("show_input_node",[a]));break;case "btn_chat":if(!this.FriendList[this.SelectIdx])break;a=this.FriendList[this.SelectIdx];2<a.split(":").length&&(a=a.split(":")[0]);Laya.stage.event("show_chat_from_editor",[{name:a+" ",id:4}]);Laya.stage.event("show_chat_dlg",["/"+a+" ",!0]);break;case "btn_team":G_BaseSetList[0].val?b?1<G_Team_Grop_List.length?Sendmessage.sendAddGroupMember(b):Sendmessage.sendCreateGroup(b):Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u9080\u8bf7\u7ec4\u961f\u7684\u5bf9\u8c61",color:"#ff0000"}]):Laya.stage.event("show_log",[{txt:"\u8bf7\u5f00\u542f\u5141\u8bb8\u7ec4\u961f",color:"#ff0000"}]);break;case "btn_add_group":b?(Sendmessage.GuildOperate(10,b),Laya.stage.event("update_guald_user")):Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u9080\u8bf7\u52a0\u5165\u884c\u4f1a\u7684\u5bf9\u8c61",color:"#ff0000"}]);break;case "btn_add_hmd":h=this;a={desc:"\u8bf7\u8f93\u5165\u52a0\u5165\u9ed1\u540d\u5355\u6635\u79f0",callfn:function(){var a=h.input_str.text;if(15<a.length)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc715\u4e2a\u5b57",callfn:function(){}}]);else if(""!=a){for(var b=!0,c=0;c<G_Friend_HMD_List.length;++c)G_Friend_HMD_List[c]==a&&(b=!1);b?(G_Friend_HMD_List.push(a),h.input_str.text="",Laya.stage.event("update_friend_list")):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8be5\u73a9\u5bb6\u5df2\u5728\u9ed1\u540d\u5355\u4e2d",callfn:function(){}}])}else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u8f93\u5165\u540d\u5b57",callfn:function(){}}])},input:" "};Laya.stage.event("show_input_node",[a]);break;case "btn_del_hmd":0<=this.SelectIdx&&this.FriendList[this.SelectIdx]&&(h=this,a=this.FriendList[this.SelectIdx],b=a.split(":"),2<b.length&&(a=b[0]),b=function(a){a=h.FriendList[h.SelectIdx];for(var b=0;b<G_Friend_HMD_List.length;b++)G_Friend_HMD_List[b]==a&&G_Friend_HMD_List.splice(b,1);Laya.stage.event("update_friend_list")},a={desc:"\u786e\u5b9a\u8981\u4ece\u9ed1\u540d\u5355\u4e2d\u5220\u9664 "+a+" \u5417\uff1f",callfn:b},Laya.stage.event("show_input_node",[a]))}};return UIfriend}(FriendUI),UIHangHui2=function(){function b(){b.__super.call(this);this.txt=new Laya.Text;this.addChild(this.txt);this.size(476,35);this.y=17;this.img_line=new laya.ui.Image("gameres/png/img_line.png");this.img_line.visible=!1;this.addChild(this.img_line);this.Show=function(a,b){var c=this.parent.parent.parent.name;"string"!=typeof a&&a.info&&(a=a.info);var d="";switch(c){case "img_notice":this.txt.text=a;break;case "changetitle":d=a.split(",");this.txt.text=d[0];this.txt.y=5;this.txt.x=5;this.txt.leading=3;this.txt.width=310;this.txt.height=180;this.txt.align="left";this.txt.wordWrap=!0;this.txt.color="#ffffff";this.txt.fontSize=14;break;case "img_zhaoxian":d=a.split(",");this.txt.text=d[0];this.txt.y=2;this.txt.x=2;this.txt.leading=3;this.txt.width=460;this.txt.height=220;this.txt.align="left";this.txt.wordWrap=!0;this.txt.color="#ffffff";this.txt.fontSize=14;break;case "img_waijiao":d=a.split(",");this.txt.text=d[0];this.txt.y=5;this.txt.x=5;this.txt.leading=3;this.txt.width=600;this.txt.height=240;this.txt.align="left";this.txt.wordWrap=!0;this.txt.color="#ffffff";this.txt.fontSize=14;break;case "img_chat":d=a.split(",");this.txt.text=d[0];this.txt.y=5;this.txt.x=5;this.txt.leading=3;this.txt.width=635;this.txt.height=245;this.txt.align="left";this.txt.wordWrap=!0;this.txt.color="#ffffff";this.txt.fontSize=14;break;case "img_rolelist":d=a.split(","),this.txt.text=d[0],this.txt.x=1,this.txt.y=0,this.txt.height=40,this.txt.width=170,this.txt.align="center",this.img_line.y=26,this.img_line.visible=!0,g_SelectTitleIdx==b?(this.txt.color="#ff0000",this.txt.fontSize=18):(this.txt.fontSize=16,this.txt.color="#ffffff")}}}function c(){c.__super.call(this);this.item=new box_item2UI;this.addChild(this.item);this.name="user_item";this.GetJob=function(a){return 0==a?"\u6218\u58eb":1==a?"\u6cd5\u5e08":"\u9053\u58eb"};this.GetSex=function(a){return 0==a?"\u7537":"\u5973"};this.Show=function(a,b){this.item=this._childs[0];this.item.x=0;this.item.y=0;this.item.width=464;this.item.height=36;this.item.getChildByName("img_sel").x=0;this.item.getChildByName("img_sel").y=0;b==g_SelectRoleIdx?this.item.getChildByName("img_sel").visible=!0:this.item.getChildByName("img_sel").visible=!1;var c=a.split("|"),d="#ffffff";1==c[1]&&(d="#fbf1b3");this.item.getChildByName("lbl_0").text=c[0];this.item.getChildByName("lbl_0").width=106;this.item.getChildByName("lbl_0").x=1;this.item.getChildByName("lbl_0").y=11;this.item.getChildByName("lbl_1").text=this.GetJob(c[2]);this.item.getChildByName("lbl_1").width=56;this.item.getChildByName("lbl_1").x=107;this.item.getChildByName("lbl_1").y=11;this.item.getChildByName("lbl_2").text=this.GetSex(c[3]);this.item.getChildByName("lbl_2").width=56;this.item.getChildByName("lbl_2").x=163;this.item.getChildByName("lbl_2").y=11;this.item.getChildByName("lbl_3").text=c[4];this.item.getChildByName("lbl_3").width=56;this.item.getChildByName("lbl_3").x=219;this.item.getChildByName("lbl_3").y=11;for(var e=0;4>e;e++)this.item.getChildByName("lbl_"+e).fontSize=14,this.item.getChildByName("lbl_"+e).color=d;this.item.getChildByName("btn_change_title").x=325;this.item.getChildByName("btn_change_title").y=4;this.item.getChildByName("btn_change_title").width=80;this.item.getChildByName("btn_change_title").height=28;this.item.getChildByName("btn_change_title").labelColors="#D7B581,#D7B581";this.item.getChildByName("btn_change_title").labelSize=14;this.item.getChildByName("btn_change_title").tag=c[0];this.item.getChildByName("btn_change_title").on(Laya.Event.CLICK,this,function(){var a=this.item.getChildByName("btn_change_title").tag;Laya.stage.event("show_changetitle_list",[a])});this.item.getChildByName("btn_change_title").visible=0!=g_SelectTitleIdx;0==g_SelectTitleIdx&&0!=b&&(this.item.getChildByName("btn_change_title").visible=!0)}}function a(){a.__super.call(this);this.item=new box_item1UI;this.addChild(this.item);this.onclick_ok=function(a){1==G_Guald_Admin&&a&&a.target.zname&&(Sendmessage.SendManagerAdd(0,a.target.zname+";"),Sendmessage.sendGuildMemberList(2),Sendmessage.sendOpenGuildDlg())};this.onclick_esc=function(a){1==G_Guald_Admin&&a&&a.target.zname&&(Sendmessage.SendManagerAdd(1,a.target.zname+";"),Sendmessage.sendGuildMemberList(2))};this.item.getChildByName("btn_ok").on(Laya.Event.CLICK,this,this.onclick_ok);this.item.getChildByName("btn_esc").on(Laya.Event.CLICK,this,this.onclick_esc);this.GetJob=function(a){return 0==a?"\u6218\u58eb":1==a?"\u6cd5\u5e08":"\u9053\u58eb"};this.GetSex=function(a){return 0==a?"\u7537":"\u5973"};this.Show=function(a,b){this.item.name="item_"+b;this.item.x=0;this.item.y=0;this.item.getChildByName("lbl_idx").text=a.split(",")[0];this.item.getChildByName("lbl_idx").width=106;this.item.getChildByName("lbl_idx").x=1;this.item.getChildByName("lbl_name").text=this.GetSex(a.split(",")[1]);this.item.getChildByName("lbl_name").width=56;this.item.getChildByName("lbl_name").x=107;this.item.getChildByName("lbl_cnt").text=this.GetJob(a.split(",")[2]);this.item.getChildByName("lbl_cnt").width=56;this.item.getChildByName("lbl_cnt").x=163;this.item.getChildByName("lbl_tj").text=a.split(",")[3];this.item.getChildByName("lbl_tj").width=56;this.item.getChildByName("lbl_tj").x=219;var c="#fbf1b3";1==a.split(",")[4]&&(c="#00ff00");this.item.getChildByName("lbl_idx").color=c;this.item.getChildByName("lbl_name").color=c;this.item.getChildByName("lbl_cnt").color=c;this.item.getChildByName("lbl_tj").color=c;this.item.getChildByName("btn_ok").x=292;this.item.getChildByName("btn_ok").width=70;this.item.getChildByName("btn_ok").height=24;this.item.getChildByName("btn_ok").label="\u540c\u610f";this.item.getChildByName("btn_ok").labelSize=14;this.item.getChildByName("btn_ok").labelColors="#D7B581,#D7B581";this.item.getChildByName("btn_ok").labelStroke=2;this.item.getChildByName("btn_ok").labelStrokeColor="#000000";this.item.getChildByName("btn_esc").x=378;this.item.getChildByName("btn_esc").width=70;this.item.getChildByName("btn_esc").height=24;this.item.getChildByName("btn_esc").label="\u62d2\u7edd";this.item.getChildByName("btn_esc").labelSize=14;this.item.getChildByName("btn_esc").labelColors="#D7B581,#D7B581";this.item.getChildByName("btn_esc").labelStroke=2;this.item.getChildByName("btn_esc").labelStrokeColor="#000000";0==G_Guald_Admin&&(this.item.getChildByName("btn_ok").visible=!1,this.item.getChildByName("btn_esc").visible=!1);this.item.getChildByName("btn_ok").zname=this.item.getChildByName("lbl_idx").text;this.item.getChildByName("btn_esc").zname=this.item.getChildByName("lbl_idx").text}}function d(){d.__super.call(this);this.item=new box_item3UI;this.addChild(this.item);this.Show=function(a,b){var c=a;this.temp=a;if(0<=c.indexOf("\u3010")&&0<=c.indexOf("\u3011"))this.item.getChildByName("lbl_title").text=c,this.item.getChildByName("lbl_text").visible=!1,this.item.getChildByName("lbl_title").visible=!0,this.item.getChildByName("bnt_ok").visible=!1,this.item.getChildByName("bnt_esc").visible=!1;else if(0<=c.indexOf("\x3csqlm\x3e"))c=c.split("\x3csqlm\x3e"),this.item.getChildByName("lbl_text").text=c[0],this.item.getChildByName("lbl_text").visible=!0,this.item.getChildByName("lbl_title").visible=!1,this.item.getChildByName("bnt_ok").visible=!0,this.item.getChildByName("bnt_esc").visible=!0,this.item.getChildByName("bnt_ok").on(Laya.Event.CLICK,this,function(){1==G_Guald_Admin&&(Sendmessage.GuildOperate(221,c[0]),Sendmessage.sendGuildMemberList(3))}),this.item.getChildByName("bnt_esc").on(Laya.Event.CLICK,this,function(){1==G_Guald_Admin&&(Sendmessage.GuildOperate(222,c[0]),Sendmessage.sendGuildMemberList(3))}),this.item.getChildByName("bnt_ok").visible=!0,this.item.getChildByName("bnt_esc").visible=!0,0==G_Guald_Admin&&(this.item.getChildByName("bnt_ok").visible=!1,this.item.getChildByName("bnt_esc").visible=!1);else if(""!=c){var d="",d=0<=c.indexOf("\x3clm\x3e")?c.split("\x3clm\x3e")[0]:0<=c.indexOf("gz")?c.split("\x3cgz\x3e")[0]:c;this.item.getChildByName("lbl_text").text=d;this.item.getChildByName("lbl_text").visible=!0;this.item.getChildByName("lbl_title").visible=!1;this.item.getChildByName("bnt_ok").visible=!1;this.item.getChildByName("bnt_esc").visible=!1}this.item.name=a}}function e(){e.__super.call(this);this.StartDragPos=new Laya.Point(0,0);this.CanDragMove=!1;this.IsEditor=!0;this.basePath="";this.MainBtnList=[];this.MainNodeList=[];this.ShowDlgType=0;this.SelectRoleIdx=this.SelectUserTypeIdx=-1;this.ChangeTitleNode=this.InputNode=null;this.Init()}g_SelectRoleIdx=-1;g_SelectTitleIdx=0;Laya["class"](b,"NoticeItem",Laya.Box);Laya["class"](c,"UserItem",Laya.Box);Laya["class"](a,"ZMUserItem",Laya.Box);Laya["class"](d,"WaiJiaoItem",Laya.Box);Laya["class"](e,"UIHangHui",HangHui2UI);var g=e.prototype;g.Init=function(){this.list_zhaoxian.array=null;this.list_role.array=null;Laya.stage.on("update_notice",this,this.UpdateNotice);Laya.stage.on("update_guald_user",this,this.UpdateUser);Laya.stage.on("upadte_zm_user",this,this.UpdateZhaoMu);Laya.stage.on("updata_wj_list",this,this.UpdateWjList);Laya.stage.on("show_changetitle_list",this,this.ShowChangeNode);Laya.stage.on("show_input_node2",this,this.ShowInputNode);this.ResLoaded()};g.cloneui=function(){Laya.stage.off("update_notice",this,this.UpdateNotice);Laya.stage.off("update_guald_user",this,this.UpdateUser);Laya.stage.off("upadte_zm_user",this,this.UpdateZhaoMu);Laya.stage.off("updata_wj_list",this,this.UpdateWjList);Laya.stage.off("show_changetitle_list",this,this.ShowChangeNode);Laya.stage.off("show_input_node2",this,this.ShowInputNode)};g.ResLoaded=function(){this.startpos=new Laya.Point;this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.ShowDlgType=0;this.ResetUI()};g.ShowChangeNode=function(a){this.ChangeTitleNode.visible=!0;this.ChangeTitleUser=a;this.title_list.array=G_Guald_Title_List};g.ResetUI=function(){this.MainBtnList.push(this.btn_notice);this.MainBtnList.push(this.btn_rolelist);this.MainBtnList.push(this.btn_waijiao);this.MainBtnList.push(this.btn_chat);this.MainBtnList.push(this.btn_zhaomu);this.MainNodeList.push(this.img_notice);this.MainNodeList.push(this.img_rolelist);this.MainNodeList.push(this.img_waijiao);this.MainNodeList.push(this.img_chat);this.MainNodeList.push(this.img_zhaoxian);this.InputNode=this.img_Editor;this.InputNode.visible=!1;this.ChangeTitleNode=this.changetitle;this.ChangeTitleNode.visible=!1;this.btn_exit3.on(Laya.Event.CLICK,this,this.BtnClick);this.input_str1.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_str1.on(Laya.Event.BLUR,this,this.OnBlur);this.input_str2.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_str2.on(Laya.Event.BLUR,this,this.OnBlur);this.input_str.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_str.on(Laya.Event.BLUR,this,this.OnBlur);this.notice_input.on(Laya.Event.FOCUS,this,this.OnFocus);this.notice_input.on(Laya.Event.BLUR,this,this.OnBlur);this.lbl_zm_info.on(Laya.Event.FOCUS,this,this.OnFocus);this.lbl_zm_info.on(Laya.Event.BLUR,this,this.OnBlur);this.lbl_zm_lv.on(Laya.Event.FOCUS,this,this.OnFocus);this.lbl_zm_lv.on(Laya.Event.BLUR,this,this.OnBlur);this.ResetMainDlgUI();this.BindClick();this.SetHangHuiBaseInfo();this.ResetNoticeNode()};g.OnFocus=function(a){if(cur_use_app)if(a=a.name,"input_str1"==a||"input_str2"==a||"input_str"==a)this.img_Editor.top=-60;else if(this.btn_notice_sumit.visible&&"notice_input"==a)this.img_bg.top=-60;else if("lbl_zm_info"==a||"lbl_zm_lv"==a)this.img_bg.top=-90};g.OnBlur=function(a){if(cur_use_app)if(a=a.name,"input_str1"==a||"input_str2"==a||"input_str"==a)this.img_Editor.y=109;else if(this.btn_notice_sumit.visible&&"notice_input"==a)this.img_bg.y=25;else if("lbl_zm_info"==a||"lbl_zm_lv"==a)this.img_bg.y=25};g.SetHangHuiBaseInfo=function(){this.lbl_name.text=G_Guald_Name;this.lbl_cnt.text=G_Guald_OnlineCount+" / "+G_Guald_NowCount+" / "+G_Guald_MaxCount};g.ShowInputNode=function(a){this.img_Editor.visible=!0;this.lbl_title.text=a.title?a.title:"";this.lbl_desc.text=a.desc?a.desc:"";this.input_str.visible=a.input?!0:!1;a.btndesc1?this.btn_ok.label=a.btndesc1:this.btn_ok.text="";a.btndesc2?this.btn_esc.label=a.btndesc2:this.btn_esc.text="";a.input_desc1?(this.lbl_input_desc0.label=a.input_desc0,this.input_str1.visible=!0,this.input_str1.restrict="\u4e00-\u9fa5-a-zA-Z0-9",this.lbl_input_desc0.text=a.input_desc1,this.lbl_input_desc0.restrict="0-9"):(this.lbl_input_desc0.text="",this.input_str1.visible=!1);a.input_desc2?(this.lbl_input_desc1.label=a.input_desc0,this.input_str2.visible=!0,this.lbl_input_desc1.text=a.input_desc2):(this.lbl_input_desc1.text="",this.input_str2.visible=!1);var b=this,c=function(){setTimeout(function(){b.input_str2.text="";b.input_str1.text="";b.input_str.text="";b.img_Editor.visible=!1;a.callfn=null;a.callfn1=null},500)};this.btn_esc.on(Laya.Event.CLICK,this,function(){a.callfn1&&a.callfn1();c()});this.btn_exit1.on(Laya.Event.CLICK,this,function(){b.img_Editor.visible=!1;b.input_str1.text="";b.input_str2.text="";a.callfn&&(a.callfn=null);a.callfn1&&(a.callfn1=null)});this.btn_ok.on(Laya.Event.CLICK,this,function(){a.callfn&&a.callfn();c()})};g.UpdateWjList=function(){var a=[],b=G_WaiJiaoStr.split("/");this.list_waijiao.array=[];a.push("\u3010\u5173\u6ce8\u884c\u4f1a\u5217\u8868\u3011");for(var c=b[0].split(","),d=0;d<c.length;d++)""!=c[d].split("|")[0]&&a.push(c[d].split("|")[0]+"\x3cgz\x3e");a.push("\u3010\u5f85\u5904\u7406\u8054\u76df\u7533\u8bf7\u3011");c=b[1].split(",");for(d=0;d<c.length;d++)""!=c[d]&&a.push(c[d]+"\x3csqlm\x3e");a.push("\u3010\u6b63\u5728\u5ba3\u6218\u884c\u4f1a\u3011");c=b[2].split(",");for(d=0;d<c.length;d++)""!=c[d].split("|")[0]&&a.push(c[d].split("|")[0]);a.push("\u3010\u6b63\u5728\u8054\u76df\u884c\u4f1a\u3011");c=b[3].split(",");for(d=0;d<c.length;d++)""!=c[d]&&a.push(c[d]+"\x3clm\x3e");this.list_waijiao.array=a};g.UpdateUser=function(){this.ResetMainDlgUI();if(G_Guald_Title_List){for(var a=[],b=0;b<G_Guald_Title_List.length-1;b++)a.push(G_Guald_Title_List[b].split(",")[0]);this.list_title.array=a;this.btn_title_del.disabled=2>g_SelectTitleIdx}a=g_SelectTitleIdx;0>a&&(a=0);G_Guald_User_List[a]&&(this.list_role.array=G_Guald_User_List[a])};g.BindClick=function(){this.btn_notice.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_rolelist.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_waijiao.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_chat.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_exit.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_notice_editor.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_notice_sumit.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_title_add.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_title_set.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_title_del.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_remove_role.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_title_change.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_sel_zhan.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_sel_fa.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_sel_dao.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu_editor.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu_ok.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu_esc.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_zhaomu_mdm.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_waijiao_look.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_waijiao_add.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_waijiao_fight.on(Laya.Event.CLICK,this,this.BtnClick);this.btn_waijiao_can.on(Laya.Event.CLICK,this,this.BtnClick);0==G_Guald_Admin&&(this.btn_notice_editor.visible=!1,this.btn_title_add.label="\u9000\u51fa\u884c\u4f1a",this.btn_title_set.visible=!1,this.btn_title_del.visible=!1,this.btn_remove_role.visible=!1,this.btn_title_change.visible=!1,this.btn_waijiao_look.visible=!1,this.btn_waijiao_add.visible=!1,this.btn_waijiao_fight.visible=!1,this.btn_waijiao_can.visible=!1,this.btn_zhaomu_mdm.visible=!1,this.btn_zhaomu_editor.visible=!1,this.lbl_zm_lv.editable=!1);this.btn_waijiao_can.selected=1==G_Guald_Can_Lianmeng?!0:!1};g.SetEditorTxt=function(){this.IsEditor=!this.IsEditor;this.notice_input.text=G_Guald_Notice_List;this.IsEditor?(this.notice_input.visible=!0,this.notice_input.editable=!0,this.lbl_des_title.visible=!1,this.btn_notice_sumit.visible=!0,this.btn_notice_editor.label="\u53d6 \u6d88"):(this.notice_input.visible=!0,this.notice_input.editable=!1,this.lbl_des_title.visible=!0,this.btn_notice_sumit.visible=!1,this.btn_notice_editor.label="\u7f16 \u8f91")};g.ResetMainDlgUI=function(){for(var a=0;5>a;a++)this.ShowDlgType==a?(this.MainNodeList[a].visible=!0,this.MainBtnList[a].selected=!0):(this.MainNodeList[a].visible=!1,this.MainBtnList[a].selected=!1);this.IsEditor&&this.SetEditorTxt();0==this.btn_zhaomu_editor.visible&&1==G_Guald_Admin&&(this.btn_zhaomu_editor.visible=!0)};g.UpdateZhaoMu=function(a){var b=[];a&&(b=a.split(";"));b[0]&&(this.lbl_zm_info.text=b[0]);b[1]&&(0<=b[1].indexOf("\u6218\u58eb")?this.btn_sel_zhan.selected=!0:this.btn_sel_zhan.selected=!1,0<=b[1].indexOf("\u6cd5\u5e08")?this.btn_sel_fa.selected=!0:this.btn_sel_fa.selected=!1,0<=b[1].indexOf("\u9053\u58eb")?this.btn_sel_dao.selected=!0:this.btn_sel_dao.selected=!1);b[2]&&(this.lbl_zm_lv.text=b[2]);a=[];for(var c=3;c<b.length;c++)""!=b[c]&&a.push(b[c]);this.list_zhaoxian.array=a;this.btn_zhaomu_esc.visible=!1;this.btn_zhaomu_ok.visible=!1};g.EditorZhaoMu=function(){this.IsEditor=!this.IsEditor;this.btn_sel_dao.mouseEnabled=this.IsEditor;this.btn_sel_fa.mouseEnabled=this.IsEditor;this.btn_sel_zhan.mouseEnabled=this.IsEditor;this.lbl_zm_info.mouseEnabled=this.IsEditor;this.btn_sel_zhan.selected=!this.IsEditor;this.btn_sel_fa.selected=!this.IsEditor;this.btn_sel_dao.selected=!this.IsEditor;this.lbl_zm_lv.selected=this.IsEditor;this.btn_zhaomu_esc.visible=this.IsEditor;this.btn_zhaomu_ok.visible=this.IsEditor;1==G_Guald_Admin&&(this.btn_zhaomu_editor.visible=!this.IsEditor)};g.UpdateNotice=function(){this.notice_input.text=G_Guald_Notice_List};g.ResetNoticeNode=function(){this.list_title.repeatX=1;this.list_title.repeatY=9;this.list_title.vScrollBarSkin="";this.list_title.itemRender=b;this.list_title.selectEnable=!0;this.list_title.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_title.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_title.mouseHandler=new Laya.Handler(this,this.ClickItem1);this.list_role.repeatX=1;this.list_role.repeatY=10;this.list_role.vScrollBarSkin="";this.list_role.itemRender=c;this.list_role.selectEnable=!0;this.list_role.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_role.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_role.mouseHandler=new Laya.Handler(this,this.ClickItem2);this.list_chat.repeatX=1;this.list_chat.repeatY=9;this.list_chat.vScrollBarSkin="";this.list_chat.itemRender=b;this.list_chat.selectEnable=!0;this.list_chat.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_chat.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_chat.mouseHandler=new Laya.Handler(this,this.ClickItem);this.list_chat.array=G_Guald_Chat_List;this.list_zhaoxian.repeatX=1;this.list_zhaoxian.repeatY=9;this.list_zhaoxian.vScrollBarSkin="";this.list_zhaoxian.itemRender=a;this.list_zhaoxian.selectEnable=!0;this.list_zhaoxian.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_zhaoxian.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_zhaoxian.mouseHandler=new Laya.Handler(this,this.ClickItem);this.list_waijiao.repeatX=1;this.list_waijiao.repeatY=9;this.list_waijiao.vScrollBarSkin="";this.list_waijiao.itemRender=d;this.list_waijiao.selectEnable=!0;this.list_waijiao.selectHandler=new Laya.Handler(this,this.OnSelect);this.list_waijiao.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_waijiao.mouseHandler=new Laya.Handler(this,this.ClickItem4);this.title_list.repeatX=1;this.title_list.repeatY=9;this.title_list.vScrollBarSkin="";this.title_list.itemRender=b;this.title_list.selectEnable=!0;this.title_list.selectHandler=new Laya.Handler(this,this.OnSelect);this.title_list.renderHandler=new Laya.Handler(this,this.UpdateItem);this.title_list.mouseHandler=new Laya.Handler(this,this.ClickItem5)};g.onMouseDown=function(a){this.list_chat.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};g.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};g.onMouseMove=function(a){this.img_bg.x+=a.stageX-this.startpos.x;this.img_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};g.ClickItem2=function(a,b){"click"==a.type&&(g_SelectRoleIdx=this.SelectRoleIdx=b,a.target._childs[0].visible=!0)};g.ClickItem5=function(a,b){if("mouseup"==a.type){var c=G_Guald_Title_List[b].split(",")[0];this.ChangeTitleNode.visible=!1;""!=this.ChangeTitleUser?(Sendmessage.GuildOperate(5,c+"/"+this.ChangeTitleUser),this.ChangeTitleUser="",Sendmessage.sendGuildMemberList(1)):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u9009\u62e9\u6210\u5458",color:"#ff0000"}])}};g.ClickItem4=function(a,b){if("mouseup"==a.type&&0!=G_Guald_Admin){var c=a.target.name;if(0<=c.indexOf("\x3clm\x3e")){var d=c.split("\x3clm\x3e"),c={title:"",desc:"\u60f3\u8981\u5bf9 "+d[0]+" \u8054\u76df\u8fdb\u884c",input:"",btndesc1:"\u53d6\u6d88\u8054\u76df",btndesc2:"\u6dfb\u52a0\u5173\u6ce8",callfn:function(){Sendmessage.GuildOperate(22,d[0]);Sendmessage.sendGuildMemberList(3)},callfn1:function(){Sendmessage.GuildOperate(1,d[0]);Sendmessage.sendGuildMemberList(3)}};Laya.stage.event("show_input_node2",[c])}else 0<=c.indexOf("\x3cgz\x3e")?(d=c.split("\x3cgz\x3e"),c={title:"",desc:"\u60f3\u8981\u5bf9 "+d[0]+" \u8054\u76df\u8fdb\u884c",input:"",btndesc1:"\u53d6\u6d88\u5173\u6ce8",btndesc2:"\u6dfb\u52a0\u8054\u76df",callfn:function(){Sendmessage.GuildOperate(11,d[0]);Sendmessage.sendGuildMemberList(3)},callfn1:function(){Sendmessage.GuildOperate(2,d[0]);Sendmessage.sendGuildMemberList(3)}},Laya.stage.event("show_input_node2",[c])):0<=c.indexOf("\x3csqlm\x3e")&&(d=c.split("\x3csqlm\x3e"),c={title:"",desc:"\u60f3\u8981\u5bf9 "+d[0]+" \u8054\u76df\u8fdb\u884c",input:"",btndesc1:"\u62d2\u7edd\u8054\u76df",btndesc2:"\u6dfb\u52a0\u8054\u76df",callfn:function(){Sendmessage.GuildOperate(222,d[0]);Sendmessage.sendGuildMemberList(3)},callfn1:function(){Sendmessage.GuildOperate(221,d[0]);Sendmessage.sendGuildMemberList(3)}},Laya.stage.event("show_input_node2",[c]))}};g.ClickItem1=function(a,b){"mouseup"==a.type&&G_Guald_User_List[b]&&(g_SelectTitleIdx=b,g_SelectRoleIdx=-1,this.SelectUserTypeIdx=b,this.UpdateUser())};g.UpdateItem=function(a,b){a.Show(a.dataSource,b)};g.ResetInputUI=function(){};g.BtnClick=function(a){switch(a.target.name){case "btn_exit":Laya.stage.event("remove_hanghui_dlg");break;case "btn_exit3":this.ChangeTitleNode&&(this.ChangeTitleNode.visible=!1);break;case "btn_notice":this.ShowDlgType=0;this.ResetMainDlgUI();break;case "btn_rolelist":this.ShowDlgType=1;this.ResetMainDlgUI();Sendmessage.sendGuildMemberList(1);break;case "btn_waijiao":this.ShowDlgType=2;this.ResetMainDlgUI();Sendmessage.sendGuildMemberList(3);break;case "btn_chat":this.ShowDlgType=3;this.ResetMainDlgUI();a=[];for(var b=0;b<G_Guald_Chat_List.length;b++)a.push(G_Guald_Chat_List[b].info);this.list_chat.array=a;break;case "btn_zhaomu":this.ShowDlgType=4;this.ResetMainDlgUI();Sendmessage.sendGuildMemberList(2);break;case "btn_title_set":if(G_Guald_Title_List[this.SelectUserTypeIdx]){var c=this;c.input_str2.type="number";a={title:"\u8bbe\u7f6e\u5c01\u53f7",input_desc1:"\u5c01\u53f7\u540d\u5b57",input_desc2:"\u5c01\u53f7\u4eba\u6570",btndesc1:"\u8bbe\u7f6e\u5c01\u53f7",btndesc2:"\u8fd4\u56de",callfn:function(){var a=G_Guald_Title_List[c.SelectUserTypeIdx].split(",")[0],b=c.input_str1.text,f=c.input_str2.text,f=""==f?G_Guald_Title_List[c.SelectUserTypeIdx].split(",")[1]:parseInt(f);0>=parseInt(f)?Laya.stage.event("show_log",[{txt:"\u8bf7\u8f93\u5165\u4eba\u6570",color:"#ff0000"}]):""==b||"number"==typeof b?Laya.stage.event("show_log",[{txt:"\u5c01\u53f7\u540d\u4e0d\u80fd\u4e3a\u7a7a",color:"#ff0000"}]):"number"==typeof f?Sendmessage.GuildManagerEditor(a+";"+b,f,1):Laya.stage.event("show_log",[{txt:"\u5c01\u53f7\u4eba\u6570\u683c\u5f0f\u9519\u8bef",color:"#ff0000"}])}};this.input_str1.text=G_Guald_Title_List[c.SelectUserTypeIdx].split(",")[0];this.input_str2.text=G_Guald_Title_List[c.SelectUserTypeIdx].split(",")[2];this.ShowInputNode(a)}else Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u8981\u8bbe\u7f6e\u7684\u5c01\u53f7",color:"#ff0000"}]);break;case "btn_title_add":1==G_Guald_Admin?(c=this,c.input_str2.type="number",a={title:"\u6dfb\u52a0\u5c01\u53f7",input_desc1:"\u8bf7\u8f93\u5165\u5c01\u53f7",input_desc2:"\u8bf7\u8f93\u5165\u5c01\u53f7\u4eba\u6570",btndesc1:"\u6dfb\u52a0\u5c01\u53f7",btndesc2:"\u8fd4\u56de",callfn:function(){var a=c.input_str1.text,b=c.input_str2.text;0>=parseInt(b)||""==b?Laya.stage.event("show_log",[{txt:"\u8bf7\u8f93\u5165\u4eba\u6570",color:"#ff0000"}]):""==a||"number"==typeof a?Laya.stage.event("show_log",[{txt:"\u5c01\u53f7\u540d\u4e0d\u80fd\u4e3a\u7a7a",color:"#ff0000"}]):"number"==typeof parseInt(b)?Sendmessage.GuildManagerEditor(a,parseInt(b),0):Laya.stage.event("show_log",[{txt:"\u5c01\u53f7\u4eba\u6570\u683c\u5f0f\u9519\u8bef",color:"#ff0000"}])}},this.input_str2.text=1E3,this.ShowInputNode(a)):(Sendmessage.GuildOperate(8,""),this.list_role.array=null,ObjectManage.findobject(playerID).grildname=null,this.visible=!1);break;case "btn_title_del":if(G_Guald_Title_List[this.SelectUserTypeIdx]){var c=this,d=G_Guald_Title_List[c.SelectUserTypeIdx].split(",")[0];a={title:"\u5220\u9664\u5c01\u53f7",desc:"\u786e\u5b9a\u8981\u5220\u9664 "+d+" \u5c01\u53f7",btndesc1:"\u5220\u9664\u5c01\u53f7",btndesc2:"\u8fd4\u56de",callfn:function(){Sendmessage.GuildManagerEditor(d,0,2)}};this.ShowInputNode(a)}else Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u5c01\u53f7",color:"#ff0000"}]);break;case "btn_remove_role":G_Guald_Title_List[this.SelectUserTypeIdx]?(a=G_Guald_Title_List[this.SelectUserTypeIdx].split(","),a[this.SelectRoleIdx+3]?Sendmessage.GuildOperate(9,a[this.SelectRoleIdx+3].split("|")[0]):Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u4f60\u8981\u5220\u9664\u7684\u6210\u5458",color:"#ff0000"}]),this.SelectRoleIdx=-1):Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u884c\u4f1a",color:"#ff0000"}]);break;case "btn_title_change":c=this;a={title:"\u8f6c\u8ba9\u57ce\u4e3b",desc:"\u8bf7\u8f93\u5165\u60f3\u8981\u8f6c\u8ba9\u57ce\u4e3b\u7684\u540d\u5b57 ",input:" ",btndesc1:"\u63d0\u4ea4",btndesc2:"\u53d6\u6d88",callfn:function(){Sendmessage.GuildOperate(7,c.input_str.text)}};this.ShowInputNode(a);break;case "btn_notice_editor":this.SetEditorTxt();break;case "btn_waijiao_look":c=this;a={title:"\u5173\u6ce8\u884c\u4f1a",desc:"\u8bf7\u8f93\u5165\u60f3\u8981\u5173\u6ce8\u7684\u884c\u4f1a\u540d ",input:" ",btndesc1:"\u63d0\u4ea4",btndesc2:"\u53d6\u6d88",callfn:function(){Sendmessage.GuildOperate(1,c.input_str.text)}};this.ShowInputNode(a);break;case "btn_waijiao_add":c=this;a={title:"\u884c\u4f1a\u8054\u76df",desc:"\u8bf7\u8f93\u5165\u60f3\u8981\u8054\u76df\u7684\u884c\u4f1a\u540d ",input:" ",btndesc1:"\u63d0\u4ea4",btndesc2:"\u53d6\u6d88",callfn:function(){Sendmessage.GuildOperate(2,c.input_str.text)}};this.ShowInputNode(a);break;case "btn_waijiao_fight":c=this;a={title:"\u884c\u4f1a\u5ba3\u6218",desc:"\u8bf7\u8f93\u5165\u60f3\u8981\u5ba3\u6218\u7684\u884c\u4f1a\u540d ",input:" ",btndesc1:"\u63d0\u4ea4",btndesc2:"\u53d6\u6d88",callfn:function(){Sendmessage.GuildOperate(3,c.input_str.text)}};this.ShowInputNode(a);break;case "btn_waijiao_can":Sendmessage.sendSay("@\u5141\u8bb8\u8054\u76df");0!=G_Guald_Can_Lianmeng?(G_Guald_Can_Lianmeng=0,this.btn_waijiao_can.selected=!1):(this.btn_waijiao_can.selected=!0,G_Guald_Can_Lianmeng=1);break;case "btn_notice_sumit":a=this.notice_input.text.split("\n");for(var b="",e=0;e<a.length;e++)b+=a[e]+"\n";Sendmessage.guildEditorNotice(b);this.SetEditorTxt();break;case "btn_zhaomu_editor":this.EditorZhaoMu();break;case "btn_sel_dao":case "btn_sel_fa":case "btn_sel_zhan":this.IsEditor&&(a.target.selected=!a.target.selected);break;case "btn_zhaomu_ok":a=this.lbl_zm_info.text;if(""==a){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u62db\u52df\u4fe1\u606f\u4e0d\u80fd\u4e3a\u7a7a",color:"#ff0000"}]);break}b="";this.btn_sel_zhan.selected&&(b+="\u6218\u58eb");this.btn_sel_fa.selected&&(b=""==b?"\u6cd5\u5e08":b+",\u6cd5\u5e08");this.btn_sel_dao.selected&&(b=""==b?"\u9053\u58eb":b+",\u9053\u58eb");""!=b?(e=this.lbl_zm_lv.text,0>=parseInt(e)?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7b49\u7ea7\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e1",color:"#ff0000"}]):(Sendmessage.GuildManagereCruit(a,b,e),this.lbl_zm_lv.text="",this.lbl_zm_info.text="",this.IsEditor=!0,this.EditorZhaoMu(),Sendmessage.sendGuildMemberList(2))):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8bf7\u9009\u62e9\u804c\u4e1a",color:"#ff0000"}]);break;case "btn_zhaomu_esc":this.IsEditor=!0;this.EditorZhaoMu();break;case "btn_zhaomu_mdm":Sendmessage.GuildOperate(6,""),Sendmessage.sendOpenGuildDlg()}};return e}(HangHui2UI),UIHangHuiWorld=function(b){function c(){c.__super.call(this);this.StartDragPos=new Laya.Point(0,0);this.CanDragMove=!1;this.basePath="";this.SelectIdx=-1;this.Init()}function a(){a.__super.call(this);var b=new Laya.Text;this.addChild(b);b.fontSize=18;b.width=520;b.wordWrap=!0;b.color="#ffffff";this.size(520,600);this.Show=function(a,b){this._childs[0].text=a}}function d(){d.__super.call(this);this.size(675,40);var a=new box_itemUI;this.addChild(a);a.getChildByName("btn_ok").on(Laya.Event.CLICK,this,function(){if(G_Guald_HangHui_World_List[e]){var a=G_Guald_HangHui_World_List[e].split(",")[0];a!=G_Guald_Last_Name&&Sendmessage.NewGuildOpt(0,a)}});a.getChildByName("btn_esc").on(Laya.Event.CLICK,this,function(){if(G_Guald_HangHui_World_List[e]){var a=G_Guald_HangHui_World_List[e].split(",")[0];a==G_Guald_Last_Name?(G_Guald_Last_Name="",Sendmessage.NewGuildOpt(2,a)):(Sendmessage.NewGuildOpt(2,G_Guald_Last_Name),G_Guald_Last_Name=a,Sendmessage.NewGuildOpt(1,a));Laya.stage.event("update_world_list")}});this.Show=function(a,b){var c=this._childs[0];c.parent=null;c.name="item_"+b;c.x=0;c.y=0;c.getChildByName("lbl_idx").text=b+1;c.getChildByName("lbl_name").text=a.split(",")[0];c.getChildByName("lbl_cnt").text=a.split(",")[1];c.getChildByName("lbl_tj").text=a.split(",")[2];this.addChild(c);a.split(",")[0]==G_Guald_Last_Name?(c.getChildByName("btn_ok").label="\u7533\u8bf7\u4e2d",c.getChildByName("btn_ok").labelSize=14,c.getChildByName("btn_ok").labelColors="#D7B581,#D7B581",c.getChildByName("btn_ok").labelStroke=2,c.getChildByName("btn_ok").labelStrokeColor="#000000",c.getChildByName("btn_ok").width=70,c.getChildByName("btn_ok").height=25,c.getChildByName("btn_esc").x=c.getChildByName("btn_ok").x+90,c.getChildByName("btn_esc").width=70,c.getChildByName("btn_esc").height=25,c.getChildByName("btn_esc").label="\u53d6\u6d88",c.getChildByName("btn_esc").labelSize=14,c.getChildByName("btn_esc").labelStroke=2,c.getChildByName("btn_esc").labelStrokeColor="#000000",c.getChildByName("btn_esc").labelColors="#D7B581,#D7B581"):(c.getChildByName("btn_ok").width=70,c.getChildByName("btn_ok").height=25,c.getChildByName("btn_ok").label="\u67e5\u770b",c.getChildByName("btn_ok").labelSize=14,c.getChildByName("btn_ok").labelColors="#D7B581,#D7B581",c.getChildByName("btn_ok").labelStroke=2,c.getChildByName("btn_ok").labelStrokeColor="#000000",c.getChildByName("btn_esc").x=c.getChildByName("btn_ok").x+90,c.getChildByName("btn_esc").width=70,c.getChildByName("btn_esc").height=25,c.getChildByName("btn_esc").label="\u7533\u8bf7",c.getChildByName("btn_esc").labelSize=14,c.getChildByName("btn_esc").labelColors="#D7B581,#D7B581",c.getChildByName("btn_esc").labelStroke=2,c.getChildByName("btn_esc").labelStrokeColor="#000000")}}var e=-1,g=!0;Laya["class"](c,"UIHangHuiWorld",HangHuiWorldUI);Laya["class"](a,"GuildInfoItem",Laya.Box);Laya["class"](d,"WorldGuildItem",Laya.Box);b=c.prototype;b.Init=function(){Laya.stage.on("update_world_list",this,this.UpdateWorld);Laya.stage.on("show_guild_info",this,this.ShowInfoNode);this.img_AddGuild.visible=!1;this.img_GuildInfo.visible=!1;this.showGuildList()};b.showGuildList=function(){this.btn_lj.on(Laya.Event.CLICK,this,this.btnClick);this.btn_add.on(Laya.Event.CLICK,this,this.btnClick);this.btn_exit.on(Laya.Event.CLICK,this,this.btnClick);this.btn_add1.on(Laya.Event.CLICK,this,this.btnClick);this.btn_esc1.on(Laya.Event.CLICK,this,this.btnClick);this.btn_exit1.on(Laya.Event.CLICK,this,this.btnClick);this.btn_join.on(Laya.Event.CLICK,this,this.btnClick);this.btn_back.on(Laya.Event.CLICK,this,this.btnClick);this.btn_exit2.on(Laya.Event.CLICK,this,this.btnClick);this.input_str.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_str.on(Laya.Event.BLUR,this,this.OnBlur);this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.startpos=new Laya.Point;this.list_hanghui.repeatX=1;this.list_hanghui.repeatY=9;this.list_hanghui.vScrollBarSkin="";this.list_hanghui.itemRender=d;this.list_hanghui.selectEnable=!0;this.list_hanghui.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_hanghui.mouseHandler=new Laya.Handler(this,this.ClickItem);this.list_hanghui.array=G_Guald_HangHui_World_List};b.OnFocus=function(){cur_use_app&&(this.img_AddGuild.top=-80)};b.OnBlur=function(){cur_use_app&&(this.img_AddGuild.y=45)};b.UpdateWorld=function(){this.list_hanghui.array=G_Guald_HangHui_World_List};b.ShowInfoNode=function(b){var c="";this.guildInfo_List.repeatX=1;this.guildInfo_List.repeatY=1;this.guildInfo_List.itemRender=a;this.guildInfo_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.guildInfo_List.vScrollBarSkin="";if(b)this.guildInfo_List.mouseEnabled=!0,this.lbl_title.visible=!0,this.btn_join.visible=!1,this.btn_back.visible=!1,c=b.list;else{this.btn_join.visible=!0;this.btn_back.visible=!0;b=G_Guald_Info;var d=["\u884c\u4f1a\u540d:  ","\u62db\u52df\u516c\u544a:  ","\u804c\u4e1a\u8981\u6c42:  ","\u7b49\u7ea7\u8981\u6c42:  "];b=b.split(";");for(var e=0;e<d.length;e++)c+=d[e]+b[e]+"\n\n";this.guildInfo_List.mouseEnabled=!1;for(var e=ObjectManage.findobject(playerID),d=ObjectManage.GetAttr(playerID),e=THumFeature(e.data.fea.buffer).btJob,n=GameUtil.getJobName(e),q=b[2].split(","),e=!1,p=0;p<q.length;p++)n==q[p]&&(e=!0);d=d.Level;if(0==e||d<parseInt(b[3]))g=!1}b=[];b.push(c);this.guildInfo_List.array=b;this.img_GuildInfo.visible=!0};b.ClickItem=function(a,b){"mouseup"==a.type&&(e=b)};b.UpdateItem=function(a,b){a.Show(a.dataSource,b)};b.onMouseDown=function(a){this.list_hanghui.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};b.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(a){this.img_bg.x+=a.stageX-this.startpos.x;this.img_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};b.btnClick=function(a){a=a.target.name;switch(a){case "btn_lj":var b=this;Laya.loader.load("json/hanghui_desc.txt",Laya.Handler.create(this,function(){var a=Laya.Loader.getRes("json/hanghui_desc.txt");a&&(a=a.toString(),b.ShowInfoNode({title:"\u4e86\u89e3\u884c\u4f1a",list:a}))}),null,Laya.Loader.TEXT);break;case "btn_add":this.img_AddGuild.visible=!0;break;case "btn_exit":this.visible=!1;break;case "btn_add1":a=this.input_str.text;a!=G_Guald_Last_Name&&(G_Guald_Last_Name=a,Sendmessage.NewGuildOpt(1,a),Laya.stage.event("update_world_list"));this.input_str.text="";this.img_AddGuild.visible=!1;break;case "btn_esc1":case "btn_exit1":this.input_str.text="";this.img_AddGuild.visible=!1;break;case "btn_join":a=G_Guald_HangHui_World_List[e].split(",")[0];g?a!=G_Guald_Last_Name&&(G_Guald_Last_Name=a,Sendmessage.NewGuildOpt(1,a),Laya.stage.event("update_world_list")):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7533\u8bf7\u5931\u8d25\uff0c\u4f60\u4e0d\u7b26\u5408\u76ee\u6807\u884c\u4f1a\u8981\u6c42\uff01",callfn:function(){}}]);this.img_GuildInfo.visible=!1;break;case "btn_back":case "btn_exit2":this.img_GuildInfo.visible=!1}};return c}(HangHuiWorldUI);(function(){function b(){b.__super.call(this);this.CanDragMove=!1;this.StartDragPos=new Laya.Point(0,0);this.Init()}Laya["class"](b,"UIMagicEditor",laya.display.Sprite);var c=b.prototype;c.Init=function(){Laya.stage.on("update_magic_editor",this,this.ResetUI);this.ResLoaded()};c.DragUIStart=function(){this.root.getChildByName("img_bg");var a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.StartDragPos.x=.9*a.x;this.StartDragPos.y=.9*a.y;this.CanDragMove=!0};c.DragUIMove=function(){if(0!=this.CanDragMove){this.root.getChildByName("img_bg");var a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.root.x=(a.x-this.StartDragPos.x)*g_BaseScale;this.root.y=(a.y-this.StartDragPos.y)*g_BaseScale}};c.DragUIEnd=function(){this.CanDragMove=!1};c.ResLoaded=function(){this.root=new magicEditorUI;this.addChild(this.root);for(var a=1;14>a;a++)this.root.getChildByName("btn_"+a).on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,this,this.DragUIMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.DragUIStart);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,this,this.DragUIEnd);this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);this.ResetUI()};c.ResetUI=function(){this.root.visible=!0;for(var a=MagicMgr.getInstance().UseList,b=1;14>b;b++){var c=this.root.getChildByName("btn_"+b);c.skin="gameres/ui/magicbtn.png";c.stateNum=2;c.pivotX=c.width/2;c.pivotY=c.height/2}for(b=0;b<a.length;b++){c=a[b].Def.btEffect;38==a[b].Def.wMagicId&&(c=4);46==a[b].Def.wMagicId&&(c=42);39==a[b].Def.wMagicId&&(c=0);var g=GameUtil.ParseMagicResName(2*c);console.log(b,"\x3d\x3d\x3d\x3d\x3duseList\x3d\x3d\x3d\x3d\x3d",a[b].Key,g);c=this.root.getChildByName("btn_"+a[b].Key);c.skin=g;c.stateNum=2}};c.BtnClick=function(a){a=a.target.name;if("btn_exit"==a)this.root.visible=!1;else{a=parseInt(a.split("_")[1]);var b=MagicMgr.getInstance().OnRoleList[MagicMgr.getInstance().CurSelectIdx];MagicMgr.getInstance().DeleteFromUseNpos(a);b?(0!=b.Key&&13!=b.Key?Laya.stage.event("remove_magic",[b.Key-1]):13==b.Key&&(b.Key=0,Laya.stage.event("add_magic_attack")),b.Key=a,MagicMgr.getInstance().AddMagicToUseList(b),Sendmessage.SendMagicKey(b),13!=b.Key?Laya.stage.event("add_magic",[b,b.Key-1]):Laya.stage.event("add_magic_attack",[b]),Laya.stage.event("update_magic_editor"),Laya.stage.event("hide_iteminfo_dlg"),Laya.stage.event("update_magic_list"),this.root.visible=!1):Laya.stage.event("show_log",[{txt:"\u653e\u7f6e\u6280\u80fd\u5931\u8d25",color:"#ff0000"}])}}})();(function(){function b(){b.__super.call(this);this.CanDragMove=!1;this.DescList=[];this.StartDragPos=new Laya.Point(0,0);this.baseKey="ui/magicinfo/";this.Init()}Laya["class"](b,"UIMagicInfo",laya.display.Sprite);var c=b.prototype;c.Init=function(){Laya.loader.load("json/skilldesc.txt",Laya.Handler.create(this,function(){var a=Laya.Loader.getRes("json/skilldesc.txt");a&&(this.DescList=a.toString().split("\r"))}),null,Laya.Loader.TEXT);Laya.stage.on("update_magic_info",this,this.ResetUI);this.ResLoaded()};c.ResLoaded=function(){this.root=new magicinfoUI;this.addChild(this.root);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,this,this.DragUIMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.DragUIStart);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,this,this.DragUIEnd);this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_set").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("img_group").getChildByName("btn_del").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("img_group").getChildByName("btn_set").on(Laya.Event.CLICK,this,this.BtnClick);this.ResetUI()};c.DragUIStart=function(){this.root.getChildByName("img_bg");var a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.StartDragPos.x=a.x*g_BaseScale;this.StartDragPos.y=a.y*g_BaseScale;this.CanDragMove=!0};c.DragUIMove=function(){if(0!=this.CanDragMove){this.root.getChildByName("img_bg");var a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.root.x=(a.x-this.StartDragPos.x)*g_BaseScale;this.root.y=(a.y-this.StartDragPos.y)*g_BaseScale}};c.DragUIEnd=function(){this.CanDragMove=!1};c.GetJobString=function(a){if(0==a)return"\u6218\u58eb: ";if(1==a)return"\u6cd5\u5e08: ";if(2==a)return"\u9053\u58eb: "};c.ResetUI=function(){this.root.visible=!1;var a=MagicMgr.getInstance().CurSelectIdx,a=MagicMgr.getInstance().GetOnRoleMagicList()[a],b=GameUtil.ParseMagicNameFormat(2*a.Def.btEffect);this.root.getChildByName("img_magic").skin=b;this.root.getChildByName("lbl_name").text=a.Def.sMagicName;this.root.getChildByName("lbl_info").text="Lv "+a.Level;b=this.GetMagicDes(a.Def.sMagicName).split(",");if(0!=b.length){for(var c=0;3>c;c++){var g="";if(1!=c){0==c&&0<=b[c].indexOf("\n")&&(b[c]=b[c].split("\n")[1]);if(""==b[c]||void 0==b[c])return;0==c&&(g+=this.GetJobString(a.Def.btJob));this.root.getChildByName("lbl_des_type"+c).text=g+b[c]}}this.root.visible=!0;8<=MagicMgr.getInstance().UseList.length?(this.root.getChildByName("btn_set").label="\u66ff\u6362",this.root.getChildByName("img_group").getChildByName("btn_set").label="\u66ff\u6362"):(this.root.getChildByName("img_group").getChildByName("btn_set").label="\u5e03\u7f6e",this.root.getChildByName("btn_set").label="\u5e03\u7f6e");this.root.getChildByName("btn_set").visible=!0;this.root.getChildByName("img_group").getChildByName("btn_set").visible=!0;void 0!=MagicMgr.getInstance().FindMagicFromUseList(a.Def.wMagicId)?(this.root.getChildByName("img_group").visible=!0,this.root.getChildByName("btn_set").visible=!1):(this.root.getChildByName("img_group").visible=!1,this.root.getChildByName("btn_set").visible=!0);if(0==a.Def.btEffect||5==a.Def.btEffect)this.root.getChildByName("btn_set").visible=!1,this.root.getChildByName("img_group").getChildByName("btn_set").visible=!1}};c.GetMagicDes=function(a){var b=Laya.Loader.getRes("json/skilldesc.txt");if(b)for(var b=b.toString().split("\r"),c=0;c<b.length;c++)if(-1!=b.indexOf(a))return b[c];return""};c.BtnClick=function(a){switch(a.target.name){case "btn_exit":this.root.visible=!1;break;case "btn_del":a=MagicMgr.getInstance().CurSelectIdx;a=MagicMgr.getInstance().GetOnRoleMagicList()[a];13!=a.Key?Laya.stage.event("remove_magic",[a.Key-1]):Laya.stage.event("add_magic_attack",[null]);a.Key=0;MagicMgr.getInstance().DeleteFromUseNpos(a.Key);Laya.stage.event("update_use_magic_list");Laya.stage.event("update_magic_list");Laya.stage.event("update_magic_info");this.root.visible=!1;break;case "btn_set":Laya.stage.event("game_dlg_cmd",[{id:"show_magiceditor"}]),this.root.visible=!1}}})();(function(){function b(){b.__super.call(this);this.AttNode=this.BtnListNode=this.LogicNode=this.CtrlNode=this.HeadNode=null;this.CtrlState=!0;this.CanRotate=!1;this.StartRotatePos=new Laya.Point;this.SkillBtnList=[];this.DragSkillNode=null;this.StartRotation=0;this.IsDragMoved=!1;this.UseItemBtnList=[];this.DragItem=!1;this.HpNodeBasePos=new Laya.Point(0,0);this.BlueNodeBasePos=new Laya.Point(0,0);this.RedAniCurIdx=34;this.BlueAniCurIdx=62;this.MathTouchTime=!1;this.TotalTouchTime=0;this.showGameLogList=[];this.showLogTag=0;this.chatMsgList=[];this.ShowChatDlg=!1;this.root=null;this.ChatBox_time=this.exp_width=0;this.guajitime=-1;this.startpos=new Laya.Point;this.cur_touchID=null;this.isShowDrug=!0;this.showDuraCount=0;this.Init()}Laya["class"](b,"UIMain",Laya.Image);var c=b.prototype;c.Init=function(){this.mouseThrough=this.is_cls=!0;this.ResLoaded()};c.UpdateName_Color=function(a){};c.BindMagicToAtt=function(a){var b=this.root.getChildByName("panel_att").getChildByName("btn_att");if(b)if(a){if(a==activate_ok){var c=Animationmodule.playframe(!1,b,"gameres/animation/mouse_click/",41,52,100,!0,!1);c.name="skilllockani";c.pos(-12,-15)}c=a.Def.btEffect;38==a.Def.wMagicId&&(c=4);46==a.Def.wMagicId&&(c=42);39==a.Def.wMagicId&&(c=0);var g=GameUtil.ParseMagicResName(2*c);Laya.loader.load(g,Laya.Handler.create(this,function(){b.skin=g;b.stateNum=2}),null,Laya.Loader.IMAGE)}else b.getChildByName("skilllockani")&&Animationmodule.removeAniname("skilllockani"),b.skin="gameres/ui/btn_att.png",b.stateNum=2};c.ShowChatNode=function(a){this.ChatNode&&(this.ChatNode.visible=!a);this.ShowChatDlg=a;this.BtnListNode.visible&&(this.root.btn_bag0.visible=!0,this.BtnListNode.visible=!1,this.CtrlState=!0)};c.BindChatNode=function(){this.chat_list=this.root.chat_bg.getChildByName("chat_list");this.chat_list.skin="";this.chat_list.repeatX=1;this.chat_list.repeatY=5;this.chat_list.vScrollBarSkin="";this.chat_list.itemRender=ChatItem;this.chat_list.renderHandler=new Laya.Handler(this,this.UpdateItem);this.chat_list.array=this.chatMsgList;this.root.btn_chat.on(Laya.Event.CLICK,this,this.openchatconfig);this.root.btn_chatChange.on(Laya.Event.CLICK,this,this.ChangeChatType);this.root.btn_public.on(Laya.Event.CLICK,this,this.ChangeChatType);this.root.btn_guild.on(Laya.Event.CLICK,this,this.ChangeChatType);this.root.btn_troops.on(Laya.Event.CLICK,this,this.ChangeChatType);this.root.btn_siliao.on(Laya.Event.CLICK,this,this.ChangeChatType);this.SelectChatIdx=0};c.openchatconfig=function(a){cur_use_app?(a=GameUtil.InstanceOfMem(chatconfigUI),a||(a=new uiChatConfig,Laya.stage.addChild(a)),a.visible=!0,a.afreshlink()):(this.ShowChatDlg=!0,this.ChatNode.visible=!1,Laya.stage.event("show_chat_dlg",[null,!0]))};c.ChangeChatType=function(a){switch(a.target.name){case "chatChange":this.root.img_changeChat.visible=!this.root.img_changeChat.visible;break;case "public":this.chat_list.array=this.chatMsgList;this.chat_list.scrollTo(this.chatMsgList.length-1);this.SelectChatIdx=-1;this.root.btn_chatChange.skin="gameres/ui/chat_public.png";this.root.img_changeChat.visible=!1;break;case "guild":a=this.GetChatListByType(3);this.chat_list.array=a;this.chat_list.scrollTo(a.length-1);this.SelectChatIdx=3;this.root.btn_chatChange.skin="gameres/ui/chat_hanghui.png";this.root.img_changeChat.visible=!1;break;case "troops":a=this.GetChatListByType(1);this.chat_list.array=a;this.chat_list.scrollTo(a.length-1);this.SelectChatIdx=1;this.root.btn_chatChange.skin="gameres/ui/chat_duiwu.png";this.root.img_changeChat.visible=!1;break;case "siliao":a=this.GetChatListByType(2),this.chat_list.array=a,this.chat_list.scrollTo(a.length-1),this.SelectChatIdx=2,this.root.btn_chatChange.skin="gameres/ui/chat_siliao.png",this.root.img_changeChat.visible=!1}};c.GetChatListByType=function(a){var b=[];if(0>=a)return this.chatMsgList;for(var c=0;c<this.chatMsgList.length;c++)this.chatMsgList[c].type==a&&b.push(this.chatMsgList[c]);return b};c.OnSelect=function(a,b){};c.ClickItem=function(a,b){"click"==a.type&&(this.ShowChatDlg=!0,this.ChatNode.visible=!1,Laya.stage.event("show_chat_dlg",[null,!0]))};c.UpdateItem=function(a,b){a.Show(a.dataSource,b)};c.ResLoaded=function(){var a=this;this.root=new GameMainUI;this.addChild(this.root);Mapdata.setParent(this.root.pl_mini);this.SimpleScreen=GameUtil.InstanceOfMem(SimpleScreenUI);this.SimpleScreen||(this.SimpleScreen=new SimpleScreen,this.addChild(this.SimpleScreen),this.SimpleScreen.left=0,this.SimpleScreen.top=115,g_taskPanel=this.SimpleScreen.panel_task);this.getEventBtn();this.getFunBtn();Laya.stage.on("update_role_info",this,this.UpdateHeadInfo);Laya.stage.on("update_actor_name",this,this.UpdateActorName);Laya.stage.on("update_att_mode",this,this.UpdateAttMode);Laya.stage.on("update_magic_list",this,this.UpdateSkillIcons);Laya.stage.on("udpate_maindlg_items",this,this.UpdateMainDlgItems);Laya.stage.on("reset_head_icon",this,this.ResetActorHeadIcon);Laya.stage.on("show_log",this,this.ShowGameLog);Laya.stage.on("show_chat_node",this,this.ShowChatNode);Laya.stage.on("new_chat_msg",this,this.ChatMessage);Laya.stage.on("add_magic_attack",this,this.BindMagicToAtt);Laya.stage.on("update_hero_info",this,this.UpdateHeroInfo);Laya.stage.on("update_AngryValue",this,this.UpdateAngryValue);Laya.stage.on("show_BtnHero",this,this.ShowHeroBtn);Laya.stage.on("update_Name_Color",this,this.UpdateName_Color);Laya.stage.on("role_die_state",this,this.setroledie);Laya.stage.on("heroCall_OK",this,this.heroCall);Laya.stage.on("heroExit_OK",this,this.heroExit);Laya.stage.on("heroState",this,this.heroState);Laya.stage.on("show_petBtn",this,this.show_petBtn);Laya.stage.on("close_petBtn",this,this.close_petBtn);Laya.stage.on("open_gm_info",this,this.open_gminfo);Laya.stage.on("open_gm",this,this.opengm);Laya.stage.on("delayShow",this,this.openDelayStateBox);Laya.stage.on("stopHook",this,function(){var a=this.root.btn_autohook.getChildByName("autohook_btn");a&&(a.visible=!1)});Laya.stage.on("topeffect",this,this.showTopEffect);this.root.btn_gm_gb.on(Laya.Event.CLICK,this,function(){this.root.ta_gmtest.visible=!1});this.root.btn_gm_qk.on(Laya.Event.CLICK,this,function(){this.root.ta_gmtest.text=""});Laya.stage.on("api_getItem",this,this.api_getItem);Laya.stage.on("DELAY_TIME",this,function(b){if(null!=a.delayLab){var c=1096484;200>b&&(c=1096484);200<=b&&500>b&&(c=15463433);500<b&&(c=13571599);a.delayLab.color=c;a.delayLab.text=b+"ms"}});this.root.btn_lock.visible=!1;this.root.btn_autohook.visible="1"==g_openhook;this.ResetUI();this.LoadHpAniRes();Laya.stage.on("ShowDrug_Items",this,this.ShowDrug_Items);this.lastDrugTime=0;this.root.Drug_0.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.Drug_1.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.Drug_2.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.Drug_3.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.Drug_4.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.Drug_5.on(Laya.Event.CLICK,this,this.noDrug_Click);this.root.show_drug_kuang.on(Laya.Event.CLICK,this,function(){this.isShowDrug=!this.isShowDrug;this.show_drug_kuang()});this.root.btn_openmini.on(Laya.Event.CLICK,this,function(){this.root.img_mini.visible=!this.root.img_mini.visible;this.root.lbl_map_name.visible=this.root.img_mini.visible;this.root.lbl_map_grid.visible=this.root.img_mini.visible;this.root.btn_openmini.skin=1==this.root.img_mini.visible?"gameres/ui/minimapjian.png":"gameres/ui/minimapjia.png"});this.root.btn_position.on(Laya.Event.CLICK,this,function(){rockerposview=!rockerposview;this.root.btn_position.skin=rockerposview?"gameres/ui/btn_closepos.png":"gameres/ui/btn_position.png";GlobalCfglist.doubleRocker?Laya.stage.event("updateRocker"):(Laya.stage.event("move_position"),Laya.stage.event("hideSingleRocker",!rockerposview))});this.root.btn_lock.on(Laya.Event.CLICK,this,function(){GameUtil.delhalo(lockingID);g_boMagicGood=!1});Laya.stage.on("add_unlock_icon",this,function(){this.root.btn_lock.visible=!0});Laya.stage.on("del_unlock_icon",this,function(){this.root.btn_lock.visible=!1});this.root.btn_qing.on(Laya.Event.CLICK,this,function(){(this.is_cls=!this.is_cls)?(this.root.btn_qing.pos(292,14),this.root.btn_qing.skin="gameres/ui/head_hide.png"):(this.root.btn_qing.pos(5,14),this.root.btn_qing.skin="gameres/ui/head_show.png");this.SimpleScreen.visible=this.is_cls;this.ChatNode.visible=this.is_cls;this.root.btn_bag0.visible=this.is_cls;this.root.role_head.visible=this.is_cls;this.root.bnt_show.show=!1;this.root.bnt_show.skin=this.root.bnt_show.show?"gameres/ui/map_showbtn1.png":"gameres/ui/map_showbtn.png";this.root.btn_list.visible=this.root.bnt_show.show;this.CtrlState||(this.BtnListNode.visible=this.is_cls)});this.root.btn_autohook.on(Laya.Event.CLICK,this,this.onhook,["3"]);Laya.stage.on("onhook",this,this.onhook);Laya.stage.on("stopAutoHookStateByRockerMove",this,this.stopAutoHookStateByRockerMove);Laya.stage.on("guaji_pic",this,function(){var a=Laya.stage.getChildByName("autohook");a&&(a.visible=!1);if(a=this.root.btn_autohook.getChildByName("autohook_btn"))a.visible=!1});this.root.hero_hide.visible=!1;this.root.hero_panel.visible=!1;this.root.hero_li.visible=!1;this.root.herocall_btn.on(Laya.Event.CLICK,this,function(){Sendmessage.sendConfig(!0);Sendmessage.SendHeroCall()});this.root.herohead_sex.on(Laya.Event.CLICK,this,this.BtnClick);this.root.petState_btn.on(Laya.Event.CLICK,this,this.BtnClick);this.root.herolock_btn.on(Laya.Event.CLICK,this,this.heroLock);this.root.heroguard_btn.on(Laya.Event.CLICK,this,this.heroGuard);this.root.herobag_btn.on(Laya.Event.CLICK,this,this.BtnClick);this.root.hero_hide.on(Laya.Event.CLICK,this,function(){this.root.hero_panel.visible=!this.root.hero_panel.visible;this.root.hero_panel.visible?this.root.hero_li.skin="gameres/ui/hero_fang.png":this.root.hero_li.skin="gameres/ui/hero_suo.png"});this.root.heroatt_btn.on(Laya.Event.CLICK,this,function(){g_myHero&&lockingID&&(this.root.hero_power.getChildByName("poweMax")&&this.heroLock(),Sendmessage.sendHeroAtk())});Laya.stage.on("redHintCheck",this,this.redHintCheck);Laya.stage.on("showDuraHead",this,this.showDuraHead);Laya.stage.on("showDuraTime",this,this.showDuraTime);Laya.stage.on("showbonus",this,function(a){var b=Laya.stage.getChildByName("bonusflash");null==b&&(b=Animationmodule.playframe(!1,this.root.showbonus,"gameres/animation/bonus/",1,6,100,!0,!1),b.name="bonusflash");this.root.showbonus.visible=a});this.root.showbonus.on(Laya.Event.CLICK,this,this.showstatebonus);this.root.btn_att.on(Laya.Event.MOUSE_DOWN,this,this.onbtnatt_down);this.ShowHeroBtn();this.root.btn_get_item.on(Laya.Event.CLICK,this,this.horseRiding);this.root.btn_bag0.on(Laya.Event.CLICK,this,this.openBag);this.root.auto_pick.visible=g_autopick;this.root.auto_pick.on(Laya.Event.CLICK,this,function(){autohookstate||(autopickstate=!0)});this.chat_show=new RichText(392,98,10);this.root.chat_bg.addChild(this.chat_show);this.chat_show.pos(56,2);this.chat_show1=new RichText(392,0,3);this.root.chat_bg.addChild(this.chat_show1);this.chat_show1.pos(56,2);this.chat_show.on(Laya.Event.CLICK,this,this.ClickItem);this.chat_show1.on(Laya.Event.CLICK,this,this.ClickItem);this.root.panel_att_type.zOrder=9999;this.root.atttype_all.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_couple.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_guild.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_mentor.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_peace.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_red.on(Laya.Event.CLICK,this,this.chooseatt_type);this.root.atttype_team.on(Laya.Event.CLICK,this,this.chooseatt_type);Laya.stage.on("delChatBox",this,this.delChatBox);Laya.stage.on("show_target_head",this,this.showTargetHead);Laya.stage.on("updateTargetHp",this,this.updateTargetHp);Laya.stage.on("close_target_menu",this,function(){this.root.target_menu.visible=!1});this.root.target_job.on(Laya.Event.CLICK,this,this.showTargetMenu);this.root.menu_info.on(Laya.Event.CLICK,this,this.targetMenuClick);this.root.menu_chat.on(Laya.Event.CLICK,this,this.targetMenuClick);this.root.menu_friend.on(Laya.Event.CLICK,this,this.targetMenuClick);this.root.menu_shield.on(Laya.Event.CLICK,this,this.targetMenuClick);this.root.menu_team.on(Laya.Event.CLICK,this,this.targetMenuClick);this.root.menu_guild.on(Laya.Event.CLICK,this,this.targetMenuClick);var b=Laya.stage.getChildByName("mailflash");null==b&&(b=Animationmodule.playframe(!1,this.root.img_mail_Logo,"gameres/animation/maillogo/",1,12,120,!0,!1),b.name="mailflash");g_mailLogo=this.root.img_mail_Logo};c.clienmsg=function(){Laya.stage.off("update_role_info",this,this.UpdateHeadInfo);Laya.stage.off("update_actor_name",this,this.UpdateActorName);Laya.stage.off("update_att_mode",this,this.UpdateAttMode);Laya.stage.off("update_magic_list",this,this.UpdateSkillIcons);Laya.stage.off("udpate_maindlg_items",this,this.UpdateMainDlgItems);Laya.stage.off("reset_head_icon",this,this.ResetActorHeadIcon);Laya.stage.off("show_log",this,this.ShowGameLog);Laya.stage.off("show_chat_node",this,this.ShowChatNode);Laya.stage.off("new_chat_msg",this,this.ChatMessage);Laya.stage.off("add_magic_attack",this,this.BindMagicToAtt);Laya.stage.off("update_hero_info",this,this.UpdateHeroInfo);Laya.stage.off("update_AngryValue",this,this.UpdateAngryValue);Laya.stage.off("show_BtnHero",this,this.ShowHeroBtn);Laya.stage.off("update_Name_Color",this,this.UpdateName_Color);Laya.stage.off("role_die_state",this,this.setroledie);Laya.stage.off("heroCall_OK",this,this.heroCall);Laya.stage.off("heroExit_OK",this,this.heroExit);Laya.stage.off("heroState",this,this.heroState);Laya.stage.off("show_petBtn",this,this.show_petBtn);Laya.stage.off("close_petBtn",this,this.close_petBtn);Laya.stage.off("open_gm_info",this,this.open_gminfo);Laya.stage.off("stopHook",this);Laya.stage.off("onhook",this,this.onhook);Laya.stage.off("stopAutoHookStateByRockerMove",this,this.stopAutoHookStateByRockerMove);Laya.stage.off("open_gm",this,this.opengm);Laya.stage.off("delayShow",this,this.openDelayStateBox);Laya.stage.off("topeffect",this,this.showTopEffect);Laya.stage.off("api_getItem",this,this.api_getItem);Laya.stage.off("DELAY_TIME",this);Laya.stage.off("ShowDrug_Items",this,this.ShowDrug_Items);Laya.stage.off("add_unlock_icon",this);Laya.stage.off("del_unlock_icon",this);Laya.stage.off("guaji_pic",this);Laya.stage.off("redHintCheck",this,this.redHintCheck);Laya.stage.off("showbonus",this);Laya.stage.off("showDuraHead",this,this.showDuraHead);Laya.stage.off("showDuraTime",this,this.showDuraTime);Laya.stage.off("delChatBox",this,this.delChatBox);Laya.stage.off("show_target_head",this,this.showTargetHead);Laya.stage.off("updateTargetHp",this,this.updateTargetHp);Laya.stage.off("close_target_menu",this)};c.horseRiding=function(){var a=ObjectManage.findobject(playerID);a&&!autohookstate&&(a.obj_hores?Sendmessage.sendSay("@\u4e0b\u9a6c"):Sendmessage.sendSay("@\u9a91\u9a6c"))};c.openBag=function(){var a=GameUtil.InstanceOfMem(NewBagUI);GameUtil.ShowNewBag(!a)};c.showstatebonus=function(){GameUtil.InstanceOfMem(statebonusUI)||(this.statebonus=new statebonus,Laya.stage.addChild(this.statebonus))};c.showDuraTime=function(){if(30<this.showDuraCount){for(var a=0;a<g_UserItemList.length;a++){var b=g_UserItemList[a];if(b){var c=b.Dura/b.DuraMax;.15>c&&Laya.stage.event("show_log",[{txt:"\u60a8\u7684"+b.s.Name+"\u6301\u4e45\u5ea6\u4f4e\u4e8e"+parseInt(100*c)+"%\uff0c\u8bf7\u53ca\u65f6\u4fee\u7406\u3002",color:"#ff0000"}])}}this.showDuraCount=0}this.showDuraCount++};c.showDuraHead=function(){for(var a=this.root.headinfo_img.getChildByName("equip"),b=0;b<g_UserItemList.length;b++){var c=g_UserItemList[b];if(c&&.15>c.Dura/c.DuraMax){a||(a=new Laya.Point(65,65),a=Animationmodule.playframe(!0,this.root.headinfo_img,"gameres/animation/equip/",1,8,100,!0,!1,a),a.name="equip");return}}a&&Animationmodule.removeAni(a)};c.changSize=function(){};c.stopAutoHookStateByRockerMove=function(){GameUtil.delhalo(lockingID);Movemodule.stopmove();chaseing=autohookstate=!1;Fightmodule.path_list=[];3==type&&Sendmessage.SendGameMainBtnMsg("stophook");var a=Laya.stage.getChildByName("autohook");a&&(a.visible=!1);if(a=this.root.btn_autohook.getChildByName("autohook_btn"))a.visible=!1};c.onhook=function(a){var b=Laya.Browser.now();if(!roledielock&&a&&300<b-this.guajitime)if(this.guajitime=b,GameUtil.delhalo(lockingID),Movemodule.stopmove(),autohookstate="3"==a?!autohookstate:"1"==a)Objectcontrol.self_obj&&Objectcontrol.self_obj.obj_hores&&Sendmessage.sendSay("@\u4e0b\u9a6c"),Movemodule.end_point&&(Movemodule.end_point=null),3==a&&Sendmessage.SendGameMainBtnMsg("openhook"),a=Laya.stage.getChildByName("autohook"),null==a?(a=new Laya.Point(browser_width/2,browser_height/2+115),a=Animationmodule.playframe(!1,Laya.stage,"gameres/animation/autohook/",1,10,100,!0,!1,a),a.name="autohook",a.zOrder=0):a.visible=!0,a=this.root.btn_autohook.getChildByName("autohook_btn"),null==a?(a=new Laya.Point(25,25),a=Animationmodule.playframe(!1,this.root.btn_autohook,"gameres/animation/autohook/",12,23,100,!0,!1,a),a.name="autohook_btn",a.zOrder=0):a.visible=!0;else{chaseing=!1;Fightmodule.path_list=[];3==a&&Sendmessage.SendGameMainBtnMsg("stophook");if(a=Laya.stage.getChildByName("autohook"))a.visible=!1;if(a=this.root.btn_autohook.getChildByName("autohook_btn"))a.visible=!1}};c.getEventBtn=function(){for(var a=this.root,a=[a.btn_vip,a.bnt_game_fl,a.bnt_bysc,a.bnt_game_hd,a.bnt_shop,a.btn_rank_list,a.bnt_chongzi,a.bnt_new_user,a.btn_recharge_reward,a.onLine],b=[{x:256,y:10},{x:196,y:10},{x:136,y:10},{x:76,y:10},{x:16,y:10},{x:256,y:70},{x:196,y:70},{x:136,y:70},{x:76,y:70},{x:16,y:70}],c=0,g=0;g<g_eventBtn.length;g++)0===g_eventBtn[g]?a[g].visible=!1:(a[g].visible=!0,a[g].pos(b[c].x,b[c].y),c++)};c.getFunBtn=function(){for(var a=this.root,b=[a.btn_bag,a.btn_jiaoyi,a.btn_team,a.btn_zhaomu,a.btn_xiaotui,a.btn_redpack,a.btn_hanghui,a.btn_baitan,a.btn_friend,a.btn_set,a.btn_get_item],c=[{x:26,y:25},{x:86,y:25},{x:147,y:25},{x:207,y:25},{x:267,y:25},{x:26,y:81},{x:86,y:81},{x:147,y:81},{x:207,y:81},{x:267,y:81}],g=0,f=0;f<g_funBtn.length-1;f++)1===g_funBtn[f]&&g++;g=10-g;for(f=0;f<g_funBtn.length-1;f++)0===g_funBtn[f]?b[f].visible=!1:(b[f].visible=!0,b[f].pos(c[g].x,c[g].y),g++);a.btn_get_item.visible=1===g_funBtn[10]?!0:!1};c.ShowHeroBtn=function(){g_ClientConfig&&g_ClientConfig.DOpenHeroButton?(this.root.hero_hide.visible=!0,this.root.hero_panel.visible=!0,this.root.hero_li.visible=!0,this.root.targethead_bg.x=this.root.herohead_bg.x+255):this.root.targethead_bg.left=340};c.noDrug_Click=function(a){if(!(1E3>Laya.Browser.now()-this.lastDrugTime)&&(this.lastDrugTime=Laya.Browser.now(),a=a.target.name,a<g_DrugItemsList.length))if(null!=g_DrugItemsList[a]){var b=Laya.Browser.now();CanUserItem&&(g_setDrugNumber=a,GameUtil.DelBagItemByName(g_DrugItemsList[a].s.Name),CanUserItem=b,CanUserItem=!1)}else g_setDrugNumber=a,GameApi.ShowScreen(!0,0,2)};c.GetTypeCount=function(a){for(var b=0,c=0;c<g_BagItemsList.length;c++){var g=g_BagItemsList[c];null!=g&&g.s.StdMode==a.s.StdMode&&g.s.AniCount==a.s.AniCount&&g.s.Shape==a.s.Shape&&g.s.AC==a.s.AC&&g.s.MAC==a.s.MAC&&(b=0==a.s.StdMode&&5==a.s.Source&&0<a.DuraMax?b+g_BagItemsList[c].Dura:b+1)}return b};c.ShowDrug_Items=function(){function a(){for(var a=6;a<f.root.Drug_bg._childs.length;a++){var b=f.root.Drug_bg._childs[a],c=parseInt(b.name);if(c<g_DrugItemsList.length&&(b.removeChildren(),null!=g_DrugItemsList[c])){var d=new Laya.Image;d.skin=GameMission.getUrl("items",g_DrugItemsList[c].s.Looks);d.pos(18-d.width/2,18-d.height/2);var e=new Laya.Text;e.text="x"+f.GetTypeCount(g_DrugItemsList[c]);e.color="#f4ebeb";e.pos(23,25);b.addChild(d);b.addChild(e)}}}for(var b=[],c=0;c<g_DrugItemsList.length;c++)if(null!=g_DrugItemsList[c]){var g=("000000"+g_DrugItemsList[c].s.Looks).slice(-6);b.push("data/items/"+g)}GameUtil.loadImgEx(b,a);var f=this;0==b.length&&a()};c.drawItems=function(){};c.ResetActorHeadIcon=function(a,b){this.HeadNode&&(0==a&&0==b?this.root.headinfo_img.skin="gameres/ui/head_img-00.png":0==a&&1==b?this.root.headinfo_img.skin="gameres/ui/head_img-01.png":0==a&&2==b?this.root.headinfo_img.skin="gameres/ui/head_img-02.png":1==a&&0==b?this.root.headinfo_img.skin="gameres/ui/head_img-10.png":1==a&&1==b?this.root.headinfo_img.skin="gameres/ui/head_img-11.png":1==a&&2==b&&(this.root.headinfo_img.skin="gameres/ui/head_img-12.png"))};c.ShowGameLog=function(a){if(0!=g_GameInitFinish){var b=new Laya.Label(a.txt);b.strokeColor="#000000";b.stroke=2;b.x=(Laya.stage.width-b.width)/2;void 0==a.color&&(a.color="#00ff00");b.color=a.color;b.fontSize=18;this.showLogTag++;b.tag=this.showLogTag;b.y=this.GetLogTxtPosY();this.showGameLogList.push(b);Laya.stage.addChild(b);var c=this;setTimeout(function(){b.removeSelf();c.ResetLogList(b.tag)},1E3);b.zOrder=9999}};c.ResetLogList=function(a){for(var b=0;b<this.showGameLogList.length;b++)this.showGameLogList[b].tag==a&&this.showGameLogList.splice(b,1)};c.GetLogTxtPosY=function(){for(var a=0;a<this.showGameLogList.length;a++)if(this.showGameLogList[a].tag==this.showLogTag)return this.showGameLogList[a].y;return 200+20*this.showGameLogList.length};c.LoadHpAniRes=function(){Laya.timer.clear(this,this.AnimationLoop);Laya.timer.loop(50,this,this.AnimationLoop)};c.AnimationLoop=function(){1==this.MathTouchTime&&this.TotalTouchTime++};c.DragUIMove=function(a){if(0!=this.CanRotate&&null!=this.DragSkillNode){a=Laya.stage.mouseX-this.StartRotatePos.x;var b=Laya.stage.mouseY-this.StartRotatePos.y,c=this.AttNode.getChildByName("scroll_skills");c.visible=!1;if(this.DragSkillNode.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var g=Math.abs(Laya.stage.mouseX)-Math.abs(this.StartRotatePos.x),f=Math.abs(Laya.stage.mouseY)-Math.abs(this.StartRotatePos.y);c.rotation=g>f?c.rotation+a/10:c.rotation-b/10;if(15<g||15<f)this.MathTouchTime=!1}}};c.DragUIStart=function(){if(!this.CanRotate){this.IsDragMoved=!1;for(var a=this.TotalTouchTime=0;6>a;a++)if(this.AttNode.getChildByName("btn_item_"+a).hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){this.MathTouchTime=!0;return}for(a=0;a<this.SkillBtnList.length;a++)if(this.SkillBtnList[a].hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){this.DragSkillNode=this.SkillBtnList[a];this.MathTouchTime=this.CanRotate=!0;this.StartRotation=45*parseInt(this.DragSkillNode.rotation/45);this.StartRotatePos=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY);break}}};c.DragUIEnd=function(){if(this.MathTouchTime&&15<this.TotalTouchTime)for(var a=0;6>a;a++)if(this.AttNode.getChildByName("btn_item_"+a).hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){g_Show_Bag_Type="main_item_editor";ItemMgr.getInstance().SelectEquipNPos=a;ItemMgr.getInstance().CurSelecItem=ItemMgr.getInstance().MainDlgUseList[a];Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}]);this.MathTouchTime=!1;return}this.TotalTouchTime=0};c.UpdateActorName=function(a){};c.ResetUI=function(){this.HeadNode=this.root.panel_head;this.CtrlNode=this.root.getChildByName("panel_ctrl");this.exp_width=this.CtrlNode.getChildByName("img_exp").width;this.BtnListNode=this.root.getChildByName("btn_btnList");this.AttNode=this.root.getChildByName("panel_att");this.LogicNode=this.root.getChildByName("panel_node");this.ChatNode=this.root.getChildByName("chat_node");this.infoStateBaox=this.root.img_mini.getChildByName("infoStateBaox");this.fpsLab=this.root.fpsLab;this.delayLab=this.root.delayLab;this.skill_rocke=new UISkillRock;this.skill_rocke.bottom=-174;this.skill_rocke.right=-170;this.skill_rocke.scale(1.2,1.2);this.AttNode.addChild(this.skill_rocke);this.BtnListNode_Y=this.BtnListNode.y;this.CtrlNode_X=this.CtrlNode.x;this.CtrlNode_Y=this.CtrlNode.y;this.ChatNode_X=this.ChatNode.x;this.ChatNode_Y=this.ChatNode.y;this.AttNode_X=this.AttNode.x;this.AttNode_Y=this.AttNode.y;this.btn_att_X=this.AttNode.getChildByName("btn_att").x;this.rock_x=this.skill_rocke.x;this.LogicNode_X=this.LogicNode.x;if(this.HeadNode&&this.CtrlNode&&this.BtnListNode&&this.AttNode&&this.LogicNode){if(this.root.btn_off_target)this.root.btn_off_target.on(Laya.Event.CLICK,this,function(){GameUtil.delhalo(lockingID);Fightmodule.leavefight()});this.AttNode.getChildByName("panel_rotate");var a=this.AttNode.getChildByName("scroll_skills");a.loadImage("gameres/ui/att_base.png",0,0,0,0,Laya.Handler.create(this,function(a){a.pivotX=a.width/2;a.pivotY=a.height/2},[a]));this.ResetAttNodeRes();this.ResetBtnListRes();this.ResetLogicNodeRes();this.ResetCtrlNodeRes();this.ResetHeadNodeRes();this.UpdateMainDlgItems();this.UpdateCtrlState();this.CreateSkillIconList();this.BindChatNode();Laya.stage.on("syncDelayShow",this,function(){this.infoStateBaox.visible=GlobalCfglist.delayShow}.bind(this))}};c.ParseNameItemsFormat=function(a){for(var b="",c=a.toString().length;5>c;c++)b+="0";return 1E4<=a?"data/items1/"+b+a+".png":"data/items/"+b+a+".png"};c.UpdateMainDlgItems=function(a){this.DragItem=a?!0:!1;if(this.AttNode){a=ItemMgr.getInstance().MainDlgUseList;for(var b=0;6>b;b++){var c=this.AttNode.getChildByName("btn_item_"+b);if(a[b]){var g=this.ParseNameItemsFormat(a[b].s.Looks);if(void 0==c._childs[0]){var f=new Laya.Image;c.addChild(f);f.skin=g}var h=this;Laya.loader.load(g,Laya.Handler.create(this,function(a,b,c){b.skin=a;b.pivotX=b.width/2;b.pivotY=b.height/2;null==b.parent&&(b.parent=h.AttNode.getChildByName("btn_item_"+c));b.x=b.parent.width/2;b.y=b.parent.height/2},[g,c._childs[0],b]),null,Laya.Loader.IMAGE)}else c._childs[0]&&(c._childs[0].skin="")}}};c.UpdateCtrlState=function(a){this.show_drug_kuang();this.ShowChatDlg?(Laya.stage.event("show_chat_dlg",[null,!1]),this.ChatNode.visible=!0,this.ShowChatDlg=!1,this.CtrlState=!this.CtrlState,this.root.btn_bag0.visible=!0):(this.CtrlState?(this.BtnListNode.visible=!1,this.ChatNode.visible=!0,this.AttNode.visible=!0,this.root.Drug_bg.visible=this.isShowDrug,this.root.show_drug_kuang.visible=!0,this.root.btn_bag0.visible=!0,this.root.chat_bg.visible=!0,this.ChatNode.bottom=115):(this.root.Drug_bg.visible=!1,this.root.show_drug_kuang.visible=!1,this.BtnListNode.visible=!0,this.root.btn_bag0.visible=!1,this.root.chat_bg.visible=!1,this.ChatNode.bottom=12),this.root.img_changeChat.visible=!1)};c.UpdateSkillIcons=function(a){};c.CreateSkillIconList=function(){};c.ParseNameFormat=function(a){for(var b="",c=a.toString().length;5>c;c++)b+="0";return"data/magicion/"+b+a+".png"};c.setroledie=function(){this.root.img_hp.width=0;var a=this.root.lbl_hp.text.split("/");this.root.lbl_hp.text="0/"+GameUtil.makeBigNum(a[1])};c.UpdateHeroInfo=function(a){if(this.HeadNode&&this.CtrlNode){this.root.hero_level.text=a.Level;var b=a.Exp/a.MaxExp;0>b?b=0:1<b&&(b=1);this.root.hero_exp.width=80*b;b=a.HP/a.MaxHP;1<=b&&(b=0);0>=b&&(b=1);0==a.HP&&(b=0);this.root.hero_hp.width=110*b;this.root.lbl_herohp.text=a.HP+"/"+a.MaxHP;if(0>=a.HP||g_myHero.is_die)this.root.lbl_herohp.text="0/"+a.MaxHP,this.root.herohead_sex.gray=!0;b=a.MP/a.MaxMP;1<=b&&(b=0);0>=b&&(b=1);0==a.MP&&(b=0);this.root.hero_mp.width=110*b;this.root.lbl_heromp.text=a.MP+"/"+a.MaxMP;this.root.hero_loyal.text=g_HeroLoyalPoint}};c.UpdateAngryValue=function(){if(this.HeadNode&&this.CtrlNode&&g_myHero){var a=g_myHero.AngryValue/g_myHero.AngryValueMax;if(0>a)a=0,this.root.hero_power.removeChildByName("poweMax");else if(1<=a){var a=1,b=this.root.hero_power.getChildByName("poweMax");null==b&&(b=Animationmodule.playframe(!1,this.root.hero_power,"gameres/animation/hero_power/",1,6,100,!0,!1))&&(b.name="poweMax");if(this.root.heroatt_btn.getChildByName("heroatt"))return;if(b=Animationmodule.playframe(!1,this.root.heroatt_btn,"gameres/animation/mouse_click/",20,31,100,!0,!1))b.name="heroatt",b.scale(.5,.5),b.pos(-12,-12)}else this.root.hero_power.removeChildByName("poweMax"),this.root.heroatt_btn.removeChildByName("heroatt");this.root.hero_power.width=62*a}};c.UpdateHeadInfo=function(a){if(isWebForYYY()&&g_RoleLevelUp){var b=function(a){console.log(a)};g_RoleLevelUp--;gameClient.clientAction.saveRole({roleName:g_RoleName,level:a.Level,isNew:!1,onSuccess:b,onCancel:b})}this.HeadNode&&this.CtrlNode&&(this.root.lbl_level.text!=a.Level+""&&0!=cur_game_type&&(3==cur_game_type&&0!=E_NewPlayerID&&a.Level?MRGameRoleUpate(g_RoleName,a.Level,3):4==cur_game_type&&0!=E_NewPlayerID&&a.Level?MRGameH5RoleUpate(a.Level,3):quicksdkuploadrole(E_NewPlayerID,g_RoleName,a.Level,g_Server_Name)),g_levelForCaiji=a.Level,this.root.lbl_level.text=a.Level,b=a.Exp/a.MaxExp,0>b?b=0:1<b&&(b=1),b*=this.exp_width,this.CtrlNode.getChildByName("img_exp").width=b,b=a.HP/a.MaxHP,1<=b&&(b=0),0>=b&&(b=1),0==a.HP&&(b=0),this.root.img_hp.width=142*b,this.root.lbl_hp.text=GameUtil.makeBigNum(a.HP)+"/"+GameUtil.makeBigNum(a.MaxHP),this.CtrlNode.getChildByName("lbl_exp").text=a.Exp+"/"+a.MaxExp,b=a.MP/a.MaxMP,1<=b&&(b=0),0>=b&&(b=1),0==a.MP&&(b=0),this.root.img_mp.width=142*b,this.root.lbl_mp.text=GameUtil.makeBigNum(a.MP)+"/"+GameUtil.makeBigNum(a.MaxMP))};c.UpdateAttMode=function(a){switch(a){case 0:this.root.lbl_att_type.skin="gameres/ui/atttype_all.png";G_att_type="[\u5168\u4f53\u653b\u51fb]";break;case 1:this.root.lbl_att_type.skin="gameres/ui/atttype_peace.png";G_att_type="[\u548c\u5e73\u653b\u51fb]";break;case 2:this.root.lbl_att_type.skin="gameres/ui/atttype_couple.png";G_att_type="[\u592b\u59bb\u653b\u51fb]";break;case 3:this.root.lbl_att_type.skin="gameres/ui/atttype_mentor.png";G_att_type="[\u5e08\u5f92\u653b\u51fb]";break;case 4:this.root.lbl_att_type.skin="gameres/ui/atttype_team.png";G_att_type="[\u7ec4\u961f\u653b\u51fb]";break;case 5:this.root.lbl_att_type.skin="gameres/ui/atttype_guild.png";G_att_type="[\u884c\u4f1a\u653b\u51fb]";break;case 6:this.root.lbl_att_type.skin="gameres/ui/atttype_red.png",G_att_type="[\u7ea2\u540d\u653b\u51fb]"}};c.ResetHeadNodeRes=function(){this.HeadNode&&(this.root.lbl_att_type.text="",this.root.lbl_att_type.on(Laya.Event.CLICK,this,this.BtnClick),this.root.headinfo_img.on(Laya.Event.CLICK,this,this.BtnClick),this.root.lbl_level.text="")};c.ResetCtrlNodeRes=function(){if(void 0!=this.CtrlNode)this.CtrlNode.getChildByName("bnt_role").on(Laya.Event.CLICK,this,this.BtnClick)};c.ResetAttNodeRes=function(){if(this.AttNode){var a=this.AttNode._childs;this.AttNode.getChildByName("btn_move_type").selected=!1;for(var b=0;b<a.length;b++)a[b].on(Laya.Event.CLICK,this,this.BtnClick);for(b=0;6>b;b++)a=this.AttNode.getChildByName("btn_item_"+b),a.on(Laya.Event.MOUSE_MOVE,this,this.DragUIMove),a.on(Laya.Event.MOUSE_DOWN,this,this.DragUIStart),a.on(Laya.Event.MOUSE_UP,this,this.DragUIEnd)}};c.ResetBtnListRes=function(){if(this.BtnListNode)for(var a=this.BtnListNode._childs,b=0;b<a.length;b++)a[b].on(Laya.Event.CLICK,this,this.BtnClick)};c.ResetLogicNodeRes=function(){if(this.LogicNode&&this.LogicNode){for(var a=this.LogicNode._childs,b=0;b<this.LogicNode._childs.length-2;b++)a[b].on(Laya.Event.CLICK,this,this.BtnClick);this.root.lbl_map_name.text="";this.root.lbl_map_grid.text="";this.LogicNode.getChildByName("bnt_show").on(Laya.Event.CLICK,this,this.BtnClick);this.LogicNode.getChildByName("bnt_show").show=!0;this.root.bnt_new_user.on(Laya.Event.CLICK,this,this.BtnClick)}};c.ChatMessage=function(a,b){if(null!=this.root&&void 0!=this.root){for(var c=[],g=a.info;-1!=g.indexOf("{")&&-1!=g.indexOf("|")&&-1!=g.indexOf("}")||-1!=g.indexOf("\x3c/:");){if(0!=g.indexOf("{")){var f=g.indexOf("{");c.push(g.substring(0,f));g=g.substring(f)}0!=g.indexOf("\x3c")&&(f=g.indexOf("\x3c"),c.push(g.substring(0,f)),g=g.substring(f));0!=g.indexOf("\x3e")&&(f=g.indexOf("\x3e"),c.push(g.substring(0,f+1)),g=g.substring(f+1));var f=g.indexOf("{"),h=g.indexOf("}");-1!=f&&-1!=h?(c.push(g.substring(0,h+1)),g=g.substring(h+1)):""!=g&&c.push(g)}""!=g&&c.push(g);c=GameUtil.check_showItem(c);c=GameUtil.makeLable(c,a.front,a.bg,!1,a.type);b?(this.chat_show1.setBox(c,a.bg,a.type,b),this.chat_show1.height=21*this.chat_show1.all_list.length,65<this.chat_show1.height&&65==this.chat_show1.height,this.chat_show1.resetbox(21),this.chat_show.y=21*this.chat_show1.all_list.length+2,this.chat_show.height=98-21*this.chat_show1.all_list.length,this.chat_show.autolien(21)):this.chat_show.setBox(c,a.bg,a.type)}};c.delChatBox=function(){this.chat_show.height=98-21*this.chat_show1.all_list.length;this.chat_show.y=21*this.chat_show1.all_list.length+2;this.chat_show.autolien(21)};c.BtnClick=function(a){if(a.target)var b=a.target.name.toString();for(var c in g_GameMainBtnResList)if(b==c){if("bnt_chongzi"===b&&isWebForYYY())break;Sendmessage.SendGameMainBtnMsg(g_GameMainBtnResList[c])}switch(b){case "bnt_role":this.CtrlState=!this.CtrlState;this.UpdateCtrlState(!0);break;case "bnt_chongzi":Laya.stage.event("game_dlg_cmd",[{id:"show_chongzhi"}]);break;case "btn_set":Laya.stage.event("game_dlg_cmd",[{id:"show_Auxiliary"}]);break;case "btn_get_item":(c=ObjectManage.findobject(playerID))&&!autohookstate&&(c.obj_hores?Sendmessage.sendSay("@\u4e0b\u9a6c"):Sendmessage.sendSay("@\u9a91\u9a6c"));break;case "btn_friend":if(this.root.btn_friend){c=this.root.bnt_role.getChildByName("RedPacket");var g=this.root.btn_redpack.getChildByName("RedPacket2"),f=this.root.btn_friend.getChildByName("friendAni");f&&(Animationmodule.removeAniname("friendAni"),f=null);g||f||!c||Animationmodule.removeAniname("RedPacket")}Sendmessage.FriendOpition(0,"");Laya.stage.event("game_dlg_cmd",[{id:"show_friend"}]);break;case "btn_team":Laya.stage.event("game_dlg_cmd",[{id:"show_team"}]);break;case "btn_hanghui":Sendmessage.sendOpenGuildDlg();break;case "headinfo_img":GameUtil.ShowNewLogo(!0);break;case "doudizhu":Sendmessage.sendCardGame3("QuickJoinRoom|\u52a0\u5165\u623f\u95f4");break;case "btn_chonglian":Sendmessage.sendCardGame3("OutLineEnterCheck|\u91cd\u8fde");break;case "btn_bag":this.openBag();break;case "herostate_btn":Sendmessage.sendSay("@RestHero");break;case "petState_btn":Sendmessage.sendSay("@rest");break;case "herohead_sex":GameUtil.ShowHeroWin(!0);break;case "herobag_btn":GameUtil.ShowNewHeroBag(!0);break;case "btn_skills":GameUtil.ShowNewLogo(!0,1);break;case "bnt_shop":Laya.stage.event("game_dlg_cmd",[{id:"show_npc_shop"}]);break;case "bnt_show":this.root.bnt_show.show=!this.root.bnt_show.show;this.root.bnt_show.skin=this.root.bnt_show.show?"gameres/ui/map_showbtn1.png":"gameres/ui/map_showbtn.png";this.root.btn_list.visible=this.root.bnt_show.show;lockingID&&g_ClientConfig&&g_ClientConfig.DOpenHeroButton&&(this.root.targethead_bg.visible=!this.root.btn_list.visible);break;case "btn_jiaoyi":Sendmessage.StartTrade();break;case "btn_target":Objectcontrol.locking();break;case "btn_redpack":this.BtnListNode.getChildByName("btn_redpack")&&(c=this.root.bnt_role.getChildByName("RedPacket"),g=this.root.btn_redpack.getChildByName("RedPacket2"),f=this.root.btn_friend.getChildByName("friendAni"),g&&(Animationmodule.removeAniname("RedPacket2"),g=null),g||f||!c||Animationmodule.removeAniname("RedPacket"));(c=GameUtil.InstanceOfMem(RedPakUI))?c.visible=!c.visible:(c=new UIRedPak,Laya.stage.addChild(c));break;case "btn_warou":Objectcontrol.excavate();break;case "btn_wakuang":Objectcontrol.controltype=5;Objectcontrol.mining();break;case "btn_task":Laya.stage.event("game_dlg_cmd",[{id:"task_scene"}]);break;case "btn_xiaotui":Laya.stage.event("game_dlg_cmd",[{id:"exit_to_role"}]);break;case "btn_baitan":1==g_ClientConfig.nMyShopType?player_stalls?GameApi.ShowMyShop(!0):Sendmessage.OpenMyBaiTan():(c=GameUtil.InstanceOfMem(PersonalStoreUI))?Laya.stage.removeChild(c):Sendmessage.QueryUserShops(0,0,"");break;case "btn_zhaomu":Laya.stage.event("game_dlg_cmd",[{id:"open_user_mail"}]);break;case "btn_move_type":c=this.AttNode.getChildByName("btn_move_type");c.selected=!c.selected;Laya.stage.event("game_dlg_cmd",[{id:"change_move_type"}]);break;case "lbl_att_type":this.root.panel_att_type.visible=!this.root.panel_att_type.visible}0<=b.indexOf("btn_skill_")?0<=b.indexOf("btn_skill_")&&0==this.IsDragMoved&&(0==this.MathTouchTime&&0==this.IsDragMoved?(G_Show_Editor_Type="look_self_skill",Laya.stage.event("game_dlg_cmd",[{id:"show_skills"}])):(this.MathTouchTime=!1,a=a.target._childs[0].tag,b=MagicMgr.getInstance().UseList,a=MagicMgr.getInstance().GetUseListIndexFromNpos(a),0>a?(G_Show_Editor_Type="look_self_skill",Laya.stage.event("game_dlg_cmd",[{id:"show_skills"}])):b[a]&&Objectcontrol.useskill(b[a].Def.btEffect))):0<=b.indexOf("btn_item_")&&0!=this.MathTouchTime&&(this.MathTouchTime=!1,a=b.split("_"),a=parseInt(a[2]),b=ItemMgr.getInstance().CurSelecItem,ItemMgr.getInstance().MainDlgUseList[a]?null==b?(ItemMgr.getInstance().MainDlgUseList[a].form="main_dlg",ItemMgr.getInstance().UseItem(ItemMgr.getInstance().MainDlgUseList[a])):0==ItemMgr.getInstance().CanTakeOnItems?Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u5e03\u7f6e",color:"#ff0000"}]):3>=b.s.StdMode?(a=ItemMgr.getInstance().MainDlgUseList[a],ItemMgr.getInstance().AddItemToBag(a,!1),ItemMgr.getInstance().RemoveItemFromMainDlg(a.MakeIndex),ItemMgr.getInstance().AddItemToMainDlg(b),ItemMgr.getInstance().DeleteItem(b.MakeIndex),ItemMgr.getInstance().CurSelecItem=null,Laya.stage.event("hide_bag_dlg"),Laya.stage.event("udpate_maindlg_items"),Laya.stage.event("hide_iteminfo_dlg")):Laya.stage.event("show_log",[{txt:"\u6b64\u7269\u54c1\u4e0d\u80fd\u51c6\u5907\u5230\u836f\u6c34\u680f",color:"#ff0000"}]):null==b?(g_Show_Bag_Type="main_item_editor",Laya.stage.event("game_dlg_cmd",[{id:"show_bag"}])):0==ItemMgr.getInstance().CanTakeOnItems?Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u5e03\u7f6e",color:"#ff0000"}]):3>=b.s.StdMode?(ItemMgr.getInstance().AddItemToMainDlg(b),ItemMgr.getInstance().DeleteItem(b.MakeIndex),ItemMgr.getInstance().CurSelecItem=null,Laya.stage.event("show_bag_items"),Laya.stage.event("udpate_maindlg_items"),Laya.stage.event("hide_iteminfo_dlg")):Laya.stage.event("show_log",[{txt:"\u6b64\u7269\u54c1\u4e0d\u80fd\u51c6\u5907\u5230\u836f\u6c34\u680f",color:"#ff0000"}]))};c.onbtnatt_down=function(a){a&&(this.cur_touchID=a.touchId);this.startpos.x=Laya.stage.mouseX;this.startpos.y=Laya.stage.mouseY;Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onbtnatt_up);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onbtnatt_up)};c.onbtnatt_up=function(a){if(a&&a.touchId==this.cur_touchID){var b=ObjectManage.findobject(playerID);if(null!=b){var c=Math.atan2(this.startpos.y-Laya.stage.mouseY,Laya.stage.mouseX-this.startpos.x)/Math.PI;0>c&&(c+=2);10>this.startpos.distance(Laya.stage.mouseX,Laya.stage.mouseY)?Laya.stage.event("game_dlg_cmd",[{id:"actor_att",type:1,target:a.target}]):.75<=c&&1.75>c?((a=ObjectManage.findlateobject1(b.grid,9,1))?GameUtil.addhalo(a):Laya.stage.event("show_log",[{txt:"\u5f53\u524d\u6ca1\u6709\u76ee\u6807",color:"#ff0000"}]),a=this.root.btn_att.getChildByName("mon_atteffect"),a||(a=Animationmodule.playframe(!1,this.root.btn_att,"gameres/animation/skill/",24,31,50,!1,!0),a.scale(.53,.53),a.pos(-32,-35),a.name="mon_atteffect")):((a=ObjectManage.findlateobject1(b.grid,9,3))?GameUtil.addhalo(a):Laya.stage.event("show_log",[{txt:"\u5f53\u524d\u6ca1\u6709\u76ee\u6807",color:"#ff0000"}]),a=this.root.btn_att.getChildByName("player_atteffect"),a||(a=Animationmodule.playframe(!1,this.root.btn_att,"gameres/animation/skill/",16,23,50,!1,!0),a.scale(.53,.53),a.pos(-32,-35),a.name="player_atteffect"));Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onbtnatt_up);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onbtnatt_up)}}};c.redHintCheck=function(a){var b=this.CtrlNode.getChildByName("bnt_role"),c=this.BtnListNode.getChildByName("btn_redpack");if(b){var g=b.getChildByName("RedPacket");!g&&(b=Animationmodule.playframe(!1,b,"gameres/animation/mouse_click/",20,31,100,!0,!1))&&(b.name="RedPacket",b.scale(.7,.7),b.pos(-15,-15))}c&&"red"==a&&(g=c.getChildByName("RedPacket2"),!g&&(b=Animationmodule.playframe(!1,c,"gameres/animation/mouse_click/",20,31,100,!0,!1)))&&(b.name="RedPacket2",b.scale(.6,.6),b.pos(-13,-13));this.root.btn_friend&&"friend"==a&&!this.root.btn_friend.getChildByName("friendAni")&&(b=Animationmodule.playframe(!1,this.root.btn_friend,"gameres/animation/mouse_click/",20,31,100,!0,!1))&&(b.name="friendAni",b.scale(.6,.6),b.pos(-13,-13))};c.heroLock=function(){if(lockingID&&g_myHero){var a=ObjectManage.findobject(lockingID);Sendmessage.HeroLock(lockingID,a.grid,g_HeroLockType);g_HeroLockType?g_HeroLockType=0:g_HeroLockType=1}};c.heroGuard=function(){g_myHero&&(Laya.stage.event("show_log",[{txt:"\u70b9\u51fb\u9009\u62e9\u82f1\u96c4\u5b88\u62a4\u7684\u533a\u57df\uff01",color:"#ff0000"}]),g_HeroGuardOn=!0)};c.open_gminfo=function(a){this.root&&this.root.ta_gmtest&&(this.root.ta_gmtest.text+=a)};c.opengm=function(a){this.root&&this.root.ta_gmtest&&(this.root.ta_gmtest.visible=!0)};c.openDelayStateBox=function(a){this.root&&this.infoStateBaox&&(this.infoStateBaox.visible=a)};c.heroCall=function(a,b){var c=this.root;c.herohead_bg.visible=!0;c.herolock_btn.visible=!0;c.heroguard_btn.visible=!0;c.heroatt_btn.visible=!0;c.herostate_btn.visible=!0;c.herobag_btn.visible=!0;var g=b.split("\\");c.hero_name.text=g[1];c.hero_loyal.text=g[0];g_myHero&&(0==g_myHero.skin_feature.btGender?c.herohead_sex.skin="gameres/ui/herohead0.png":c.herohead_sex.skin="gameres/ui/herohead1.png",this.root.herohead_sex.gray=!1);c.hero_level.text=g_myHero.m_Abil.Level};c.heroExit=function(){var a=this.root;a.herohead_bg.visible=!1;a.herolock_btn.visible=!1;a.heroguard_btn.visible=!1;a.heroatt_btn.visible=!1;a.herostate_btn.visible=!1;a.herobag_btn.visible=!1;g_myHero=null;g_HeroBagCount=-1};c.heroState=function(a){-1!=a.indexOf("\u4f11\u606f")?this.root.herostate_btn.skin="gameres/ui/herostate_btn1.png":-1!=a.indexOf("\u8ddf\u968f")?this.root.herostate_btn.skin="gameres/ui/herostate_btn2.png":-1!=a.indexOf("\u653b\u51fb")&&(this.root.herostate_btn.skin="gameres/ui/herostate_btn3.png")};c.show_petBtn=function(){this.root.petState_btn.visible=!0};c.close_petBtn=function(){this.root.petState_btn.visible=!1};c.api_getItem=function(a){a&&0<a&&Sendmessage.sendapi_getItem(a)};c.show_drug_kuang=function(){this.root.Drug_bg.visible=this.isShowDrug;this.root.show_drug_kuang.skin=this.isShowDrug?"gameres/ui/hero_suo.png":"gameres/ui/hero_fang.png"};c.chooseatt_type=function(a){if(a&&a.target)switch(this.root.panel_att_type.visible=!1,a.target.name){case "atttype_all":Sendmessage.SendChageAttackMode(0);break;case "atttype_peace":Sendmessage.SendChageAttackMode(1);break;case "atttype_couple":Sendmessage.SendChageAttackMode(2);break;case "atttype_mentor":Sendmessage.SendChageAttackMode(3);break;case "atttype_team":Sendmessage.SendChageAttackMode(4);break;case "atttype_guild":Sendmessage.SendChageAttackMode(5);break;case "atttype_red":Sendmessage.SendChageAttackMode(6)}};c.showTopEffect=function(a,b,c){var g=this.root,g=[g.btn_vip,g.bnt_game_fl,g.bnt_bysc,g.bnt_game_hd,g.bnt_shop,g.btn_rank_list,g.bnt_chongzi,g.bnt_new_user,g.btn_recharge_reward,g.onLine];if(g[a]){if(0==c){var f=g[a].getChildByName("btn_halo");c=new Laya.Point(27,28);b&&!f?(f=Animationmodule.playframe(!1,g[a],"gameres/animation/halo/",0,7,100,!0,!1,c),f.name="btn_halo"):!b&&f&&Animationmodule.removeAni(f)}else 1==c&&(g[a].visible=1==b);c=[{x:256,y:10},{x:196,y:10},{x:136,y:10},{x:76,y:10},{x:16,y:10},{x:256,y:70},{x:196,y:70},{x:136,y:70},{x:76,y:70},{x:16,y:70}];for(b=a=0;b<g.length;b++)g[b]&&g[b].visible&&(g[b].pos(c[a].x,c[a].y),a++)}};c.showTargetHead=function(a){if((this.root.targethead_bg.visible=a)&&lockingID&&(this.root.target_menu.visible&&(this.root.target_menu.visible=!1),g_ClientConfig&&g_ClientConfig.DOpenHeroButton&&this.root.bnt_show.show&&(this.root.bnt_show.show=!1,this.root.bnt_show.skin="gameres/ui/map_showbtn.png",this.root.btn_list.visible=!1),a=ObjectManage.findobject(lockingID))){var b=a.txt_name.cur_name.toLowerCase();a.txt_name.text?-1!=a.txt_name.text.indexOf("\n")?(b=a.txt_name.text.split("\n"),this.root.target_name.text=b[b.length-1]):this.root.target_name.text=a.txt_name.text:b&&(0==b.indexOf("centerwall")?this.root.target_name.text="\u4e2d\u95f4\u57ce\u5899":0==b.indexOf("leftwall")?this.root.target_name.text="\u5de6\u57ce\u5899":0==b.indexOf("maindoor")?this.root.target_name.text="\u57ce\u95e8":0==b.indexOf("rightwall")&&(this.root.target_name.text="\u53f3\u57ce\u5899"));if(3==a.type){if(b=THumFeature(a.data.fea.buffer))0==b.btJob?this.root.target_job.skin="gameres/ui/target_zs.png":1==b.btJob?this.root.target_job.skin="gameres/ui/target_fs.png":2==b.btJob&&(this.root.target_job.skin="gameres/ui/target_ds.png")}else 1==a.type&&(this.root.target_job.skin="gameres/ui/target_mon.png");this.root.target_level.text=a.data.level?a.data.level:"???";this.root.target_hpNum.text="100%";this.root.target_hpBar.scaleX=1}};c.updateTargetHp=function(a,b,c){lockingID&&(c=ObjectManage.findobject(lockingID))&&(this.root.target_hpNum.text=Math.ceil(a/b*100)+"%",this.root.target_level.text=c.data.level,this.root.target_hpBar.scaleX=(a/b).toFixed(2))};c.showTargetMenu=function(){if(lockingID){var a=ObjectManage.findobject(lockingID);if(a&&3==a.type){var b=a.txt_name.text;-1!=a.txt_name.text.indexOf("\n")&&(b=a.txt_name.text.split("\n"),b=b[b.length-1]);a.txt_name.text&&(this.root.target_menu_name.text=b);this.root.menu_shield.label="\u5c4f\u655d\u53d1\u8a00";for(a=0;a<G_PRIVATE_CHAT_list.length;a++)G_PRIVATE_CHAT_list[a]==this.root.target_menu_name.text&&(this.root.menu_shield.label="\u89e3\u9664\u53d1\u8a00");this.root.target_menu.visible=!0}}};c.targetMenuClick=function(a){if(lockingID){var b=ObjectManage.findobject(lockingID);if(b){var c=b.txt_name.text;switch(a.target.name){case "menu_info":Sendmessage.sendQueryState(lockingID,b.grid.x,b.grid.y);break;case "menu_chat":Laya.stage.event("show_chat_dlg",["/"+c+" ",!0]);break;case "menu_friend":Sendmessage.FriendOpition(1,GameUtil.getPureName(b));break;case "menu_guild":Sendmessage.GuildOperate(10,c);break;case "menu_team":1<G_Team_Grop_List.length?Sendmessage.sendAddGroupMember(GameUtil.getPureName(b)):Sendmessage.sendCreateGroup(GameUtil.getPureName(b));break;case "menu_shield":a=null;for(b=0;b<G_PRIVATE_CHAT_list.length;b++)G_PRIVATE_CHAT_list[b]==c&&(a=b);null==a?G_PRIVATE_CHAT_list.push(c):G_PRIVATE_CHAT_list.splice(a,1)}}this.root.target_menu.visible=!1}}})();var UIRecharge=function(b){function c(){c.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya["class"](c,"UIRecharge",rechargeUI);c.prototype.init=function(){this.rate=1;this.name="\u5143\u5b9d";this.weburl=null;this.textlist=[];this.pricelist=[];this.loadertxt();this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.btn_close.on(Laya.Event.CLICK,this,this.close);this.price0.on(Laya.Event.CLICK,this,this.charge);this.price1.on(Laya.Event.CLICK,this,this.charge);this.price2.on(Laya.Event.CLICK,this,this.charge);this.price3.on(Laya.Event.CLICK,this,this.charge);this.price4.on(Laya.Event.CLICK,this,this.charge);this.price5.on(Laya.Event.CLICK,this,this.charge);this.price6.on(Laya.Event.CLICK,this,this.charge);this.price7.on(Laya.Event.CLICK,this,this.showCustom);this.custom_pay_ok.on(Laya.Event.CLICK,this,this.customOK);this.custom_pay_cel.on(Laya.Event.CLICK,this,this.customCancel);this.btn_closePay.on(Laya.Event.CLICK,this,this.closePay);this.custom_value.on(Laya.Event.INPUT,this,this.customValut);this.btn_wx.on(Laya.Event.CLICK,this,this.onpay,[2001]);this.btn_zfb.on(Laya.Event.CLICK,this,this.onpay,[1001]);this.min_value=10};c.prototype.customValut=function(){""!=this.custom_value.text&&1>Number(this.custom_value.text)&&(this.custom_value.text=this.min_value)};c.prototype.customOK=function(){var a=Number(this.custom_value.text);a<this.min_value?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u6700\u5c0f\u91d1\u989d\u4e3a\uff1a"+this.min_value,callfn:function(){}}]):0<a&&(this.charge(a,a*this.rate),this.customCancel())};c.prototype.customCancel=function(){this.custom.visible=!1};c.prototype.showCustom=function(){this.custom.visible=!0;this.custom_value.text=this.min_value;this.custom_value.focus=!0};c.prototype.onpay=function(a){if(cur_use_app&&conchConfig&&this.weburl){if(0==cur_game_type){var b=conchConfig.getOS(),c,f={};"Conch-ios"==b?c=Laya.PlatformClass.createClass("JSBridge"):"Conch-android"==b&&(c=Laya.PlatformClass.createClass("com.testpro.game.JSBridge"));var h=Charge_Value.split("\r\n"),f=this.weburl.split("a\x3d");if(2<=f.length&&2<=h.length){var l=f[1].split("\x26")[0],f={};f.areaid=l;f.uid=dataFromRoleScene.uid;f.yuanbao=this.lb_yuanbao.text;f.money=this.lb_money.text;f.type=a;f.url=h[1];a=JSON.stringify(f);"Conch-ios"==b?c.call("gotopay:",a):"Conch-android"==b&&c.call("gotopay",a)}}}else console.log("------------------no conchConfig-----------------------"),3==this.type&&callpayforuu(this.lb_yuanbao.text,a)};c.prototype.closePay=function(){this.pay_Panel.visible=!1};c.prototype.charge=function(a,b){var c=b?a:a.target.num,f=b?b:a.target.body;switch(cur_game_type){case 0:this.pay_Panel.visible=!0;this.lb_yuanbao.text=f;this.lb_money.text=c;this.product_name.text=this.name;this.product_name2.text=this.name;break;case 3:MRGamePay(f,this.name,this.rate,c);break;case 4:MRGameH5Pay(100*c,this.name);break;case 5:YXFH5SDKPay(c);break;default:quicksdkpay(playerID,g_RoleName,g_levelForCaiji,f,c,this.name)}};c.prototype.onMouseDown=function(b){a.x=b.stageX;a.y=b.stageY;this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(b){this.img_bg.x+=b.stageX-a.x;this.img_bg.y+=b.stageY-a.y;a.x=b.stageX;a.y=b.stageY};c.prototype.close=function(){this.removeSelf()};c.prototype.loadertxt=function(){this.textlist.push(this.text0,this.text1,this.text2,this.text3,this.text4,this.text5,this.text6);this.pricelist.push(this.price0,this.price1,this.price2,this.price3,this.price4,this.price5,this.price6)};c.prototype.update3Money=function(a){this.name=a.data.currency;this.type=3;for(var b=0;b<this.pricelist.length;b++)this.pricelist[b].num=a.data.amount[b]*a.data.ratio,this.pricelist[b].body=a.data.amount[b],this["money"+b].text="\uffe5"+a.data.amount[b],this.textlist[b].text=a.data.amount[b]*a.data.ratio+this.name};c.prototype.update2Money=function(a){console.log("---\x3e ",a);var b="";a=a.split("|");2==a.length&&(b=a[1].split(","),this.name=b[0],this.type=a[0],this.rate=b[1]);3==a.length&&(b=a[2].split(","),this.name=a[1],this.type=a[0],this.rate=b[1]);for(a=0;a<this.pricelist.length;a++){var c="";b[a+2]&&(c=b[a+2].split(":"));c&&2<=c.length&&(this.pricelist[a].num=c[1],this.pricelist[a].body=c[0],this["money"+a].text="\uffe5"+c[1],this.textlist[a].text=c[0]+b[0])}};c.prototype.updateMoney=function(a){console.log("---\x3e ",a);if(a.load){this.name=a.area._charge_scale[0].name;this.rate=a.area._charge_scale[0].rate;for(var b=0;b<this.pricelist.length;b++){var c=a.area.custom_amount[b].amount;this.pricelist[b].labelSize=20;this.pricelist[b].labelColors="#f1c055";this.pricelist[b].num=c;this.pricelist[b].body=c*this.rate;this["money"+b].text="\uffe5"+c;this.textlist[b].text=c*this.rate+this.name}this.min_value=Number(a.gmaster.min_charge_amount);this.custom_value.text=this.min_value}else console.log("---\u65e0\u6548\u6570\u636e----")};return c}(rechargeUI),UIRedPak=function(b){function c(){c.__super.call(this);this.Init()}function a(){a.__super.call(this);this.size(500,60);this.lb_Name=new Laya.Label;this.lb_Num=new Laya.Label;this.lb_String1=new Laya.Label;this.lb_String2=new Laya.Label;this.lb_String3=new Laya.Label;this.lb_Msg=new Laya.Label;this.lb_Time=new Laya.Label;this.img_bg=new laya.ui.Image("gameres/ui/redpak_item.png");this.img_bg.x=0;this.img_bg.y=0;this.img_line=new laya.ui.Image("gameres/ui/redpak_line.png");this.img_line.x=0;this.img_line.y=59;this.img_bg.visible=!1;this.img_line.visible=!1;this.img_Logo=new laya.ui.Image("gameres/ui/redpak_redbag0.png");this.img_Logo.x=0;this.img_Logo.y=5;this.lb_String1.x=120;this.lb_String1.y=7;this.lb_String1.color="#ffffff";this.lb_String1.fontSize=14;this.lb_String1.heigth=15;this.lb_String2.y=7;this.lb_String2.color="#ffffff";this.lb_String2.fontSize=14;this.lb_String2.heigth=15;this.lb_String3.y=7;this.lb_String3.color="#ffffff";this.lb_String3.fontSize=14;this.lb_String3.heigth=15;this.lb_Name.y=7;this.lb_Name.color="#00FF1E";this.lb_Name.fontSize=14;this.lb_Name.align="center";this.lb_Name.heigth=15;this.lb_Num.y=7;this.lb_Num.color="#ff0000";this.lb_Num.fontSize=14;this.lb_Num.align="center";this.lb_Num.heigth=15;this.lb_Time.x=42;this.lb_Time.y=22;this.lb_Time.color="#FFF600";this.lb_Time.fontSize=14;this.lb_Time.width=100;this.lb_Time.heigth=60;this.lb_Msg.x=120;this.lb_Msg.y=35;this.lb_Msg.color="#ffffff";this.lb_Msg.fontSize=14;this.addChild(this.lb_Name);this.addChild(this.lb_Msg);this.addChild(this.lb_Time);this.addChild(this.img_Logo);this.addChild(this.lb_Num);this.addChild(this.lb_String1);this.addChild(this.lb_String2);this.addChild(this.lb_String3);this.addChild(this.img_bg);this.addChild(this.img_line);this.settxt=function(a){var b=" \u91d1\u5e01";switch(a.nGoldType){case 0:b=g_GameGoldNum.key;break;case 1:b=g_GameCionNum.key;break;case 2:b=g_GamePointNum.key;break;case 3:b=g_nGameDiamond.key;break;case 4:b=g_nGameGird.key;break;case 5:b=g_gameGlory.key}this.img_Logo.skin=a.bOpened?"gameres/ui/redpak_redbag1.png":"gameres/ui/redpak_redbag0.png";var c="";switch(a.nType){case 0:c="[\u884c\u4f1a]";break;case 1:c="[\u961f\u4f0d]";break;case 2:c="[\u56fd\u5bb6]";break;case 3:c="[\u5168\u670d]";break;case 4:c="[\u597d\u53cb]"}this.lb_String1.text=c+" ";this.lb_String2.text=" \u53d1\u7684 ";this.lb_String3.text=" \u7ea2\u5305\u3002";this.lb_Name.text=a.sUserName;this.lb_Time.text=a.sRedPacketTime;this.lb_Num.text=a.nGoldNum+b;this.lb_Msg.text="\u795d\u798f\u8bed\uff1a "+a.sMsg;this.lb_Name.x=this.lb_String1.x+this.lb_String1.width;this.lb_String2.x=this.lb_Name.x+this.lb_Name.width;this.lb_Num.x=this.lb_String2.x+this.lb_String2.width;this.lb_String3.x=this.lb_Num.x+this.lb_Num.width}}new Laya.Point(0,0);var d=0;Laya["class"](c,"UIRedPak",RedPakUI);b=c.prototype;b.Init=function(){this.start()};b.start=function(){this.RedWindows.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.startpos=new Laya.Point;this.but_close.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownBut);this.but_close2.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownBut);this.but_openSend.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownOpenSend);this.combox_index.on(Laya.Event.CHANGE,this,this.onchanged);this.Red_List.repeatX=1;this.Red_List.repeatY=6;this.Red_List.vScrollBarSkin="gameres/ui/vscroll.png";this.Red_List.itemRender=a;this.Red_List.selectEnable=!0;this.Red_List.selectHandler=new Laya.Handler(this,this.UIRedPakselect);this.Red_List.renderHandler=new Laya.Handler(this,this.UpdateItem);this.GetRedPackList()};b.onchanged=function(){var a=[];if(0==this.combox_index.selectedIndex)for(var b=g_RedPack_List.length-1;0<=b;b--)a.push(g_RedPack_List[b]);else for(b=g_RedPack_List.length-1;0<=b;b--)g_RedPack_List[b].nType==this.combox_index.selectedIndex-1&&a.push(g_RedPack_List[b]);this.Red_List.array=a;this.lb_listCount.text=this.Red_List.array.length};b.GetRedPackList=function(){this.onchanged();this.lb_listCount.text=this.Red_List.array.length;this.combox_index.selectedIndex=0};b.onMouseDownBut=function(){Laya.stage.removeChild(this)};b.onMouseDownOpenSend=function(){var a=GameUtil.InstanceOfMem(fsredpackUI);a||(a=new UIFPack,Laya.stage.addChild(a))};Laya["class"](a,"RedPackitem",Laya.Box);b.UpdateItem=function(a,b){a.settxt(a.dataSource,b);d==a.dataSource.nRedRecog?(a.img_bg.visible=!0,a.img_line.visible=!0):(a.img_bg.visible=!1,a.img_line.visible=!1)};b.UIRedPakselect=function(a){g_RedPackIndex=a;this.Red_List.getCell(a)&&this.Red_List.array[a]&&(this.Red_List.array[a].bOpened=!0,g_RedPack_List[g_RedPack_List.length-1-a].bOpened=!0,g_RedPackOpen=this.Red_List.array[a].nRedRecog,d=this.Red_List.array[a].nRedRecog,Sendmessage.sendOpenRedPack(this.Red_List.array[a].nRedRecog),a=GameUtil.InstanceOfMem(SendRedPackUI),a||(a=new UISendPak,Laya.stage.addChild(a)),a.GetRedPackList());this.Red_List._selectedIndex=-1};b.onMouseDown=function(a){this.Red_List.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.RedWindows.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.RedWindows.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.RedWindows.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};b.onMouseUp=function(){this.RedWindows.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(a){this.RedWindows.x+=a.stageX-this.startpos.x;this.RedWindows.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};return c}(RedPakUI);(function(b){function c(a,b,e,g,f,h){c.__super.call(this);this.labSelectInfo.on(Laya.Event.CLICK,this,this.LabClick);this.labchat.on(Laya.Event.CLICK,this,this.LabClick);this.labshieldchat.on(Laya.Event.CLICK,this,this.LabClick);this.ResetUI(a,b,e,g,f,h)}Laya["class"](c,"UIRoleMenu",b);b=c.prototype;b.ResetUI=function(a,b,c,g,f,h){var l="";-1!=c.indexOf("\n")?(c=c.split("\n"),l=c[c.length-1]):l=c;this.record=g;this.name=l;this.menu.x=f;this.menu.y=h;this.role_x=a;this.role_y=b;this.labName.text="\u540d\u5b57\uff1a"+l;this.labhanghu.color="#9e9e9e";this.labhanghu.off(Laya.Event.CLICK,this,this.LabClick);ObjectManage.findobject(playerID).grildname&&(this.labhanghu.color="#f6fbb6",this.labhanghu.on(Laya.Event.CLICK,this,this.LabClick));this.labaddfriend.on(Laya.Event.CLICK,this,this.LabClick);this.labaddfriend.color="#f6fbb6";for(a=0;a<G_Friend_List.length;a++)G_Friend_List[a].split(",")[0]==this.name&&(this.labaddfriend.off(Laya.Event.CLICK,this,this.LabClick),this.labaddfriend.color="#9e9e9e");this.labteam.on(Laya.Event.CLICK,this,this.LabClick);this.labteam.color="#f6fbb6";for(a=0;a<G_Team_Grop_List.length;a++)G_Team_Grop_List[a].split(";")[0]==this.name&&(this.labteam.off(Laya.Event.CLICK,this,this.LabClick),this.labteam.color="#9e9e9e");this.labshieldchat.text="\u5c4f\u655d\u53d1\u8a00";for(a=0;a<G_PRIVATE_CHAT_list.length;a++)G_PRIVATE_CHAT_list[a]==this.name&&(this.labshieldchat.text="\u89e3\u9664\u53d1\u8a00");this.autoWidth();this.autoPos()};b.LabClick=function(a){switch(a.target.name){case "labSelectInfo":Sendmessage.sendQueryState(this.record,this.role_x/48,this.role_y/32);break;case "labchat":Laya.stage.event("show_chat_dlg",["/"+this.name+" ",!0]);break;case "labaddfriend":Sendmessage.FriendOpition(1,this.name);break;case "labhanghu":Sendmessage.GuildOperate(10,this.name);break;case "labteam":1<G_Team_Grop_List.length?Sendmessage.sendAddGroupMember(this.name):Sendmessage.sendCreateGroup(this.name);break;case "labshieldchat":a=null;for(var b=0;b<G_PRIVATE_CHAT_list.length;b++)G_PRIVATE_CHAT_list[b]==this.name&&(a=b);null==a?G_PRIVATE_CHAT_list.push(this.name):G_PRIVATE_CHAT_list.splice(a,1)}this.visible=!1};b.autoWidth=function(){for(var a=0,b=0;b<this.menu._childs.length;b++)a=Math.max(a,this.menu._childs[b].width);this.menu.width=a+20};b.autoPos=function(){this.menu.x+this.menu.width>Laya.stage.width&&(this.menu.x-=this.menu.x+this.menu.width-Laya.stage.width);this.menu.y+this.menu.height>Laya.stage.height&&(this.menu.y-=this.menu.y+this.menu.height-Laya.stage.height)}})(RoleMenuUI);var UISendPak=function(b){function c(){c.__super.call(this);this.Init()}function a(){a.__super.call(this);this.size(500,50);this.lb_Name=new Laya.Label;this.lb_Gold=new Laya.Label;this.lb_date=new Laya.Label;this.lb_Msg=new Laya.Label;this.lb_luck=new Laya.Label;this.img_Logo=new laya.ui.Image("gameres/ui/redpak_redbag0.png");this.img_Logo.x=0;this.img_Logo.y=0;this.lb_Name.x=this.img_Logo.x+33;this.lb_Name.y=this.img_Logo.y;this.lb_Name.color="#ffffff";this.lb_Name.fontSize=16;this.lb_Gold.x=this.lb_Name.x+150;this.lb_Gold.y=this.lb_Name.y;this.lb_Gold.color="#ffffff";this.lb_Gold.fontSize=16;this.lb_date.x=this.lb_Gold.x+150;this.lb_date.y=this.lb_Gold.y;this.lb_date.color="#ffffff";this.lb_date.fontSize=16;this.lb_Msg.x=this.lb_Name.x;this.lb_Msg.y=this.lb_Name.y+18;this.lb_Msg.color="#ffffff";this.lb_Msg.fontSize=16;this.lb_luck.x=this.lb_Name.x;this.lb_luck.y=this.lb_Name.y+18;this.lb_luck.color="#ffffff";this.lb_luck.fontSize=16;this.addChild(this.lb_Name);this.addChild(this.lb_Gold);this.addChild(this.lb_date);this.addChild(this.lb_Msg);this.addChild(this.lb_luck);this.addChild(this.img_Logo);this.settxt=function(a){var b=" \u91d1\u5e01";switch(e){case 0:b=g_GameGoldNum.key;break;case 1:b=g_GameCionNum.key;break;case 2:b=g_GamePointNum.key;break;case 3:b=g_nGameDiamond.key;break;case 4:b=g_nGameGird.key;break;case 5:b=g_gameGlory.key}this.lb_Name.text=a.sUserName;this.lb_Gold.text="\u83b7\u5f97 "+a.nGoldValue+b;this.lb_date.text=a.sTime;this.lb_Msg.text="\u7559\u8a00\uff1a"+a.sNote;a.sUserName==m&&""!=a.sNote&&(l.Editinput.disabled=!0,l.but_send.disabled=!0);g==a.sUserName&&f&&(this.lb_luck.x=this.lb_date.x,this.lb_luck.text="\u6700\u4f73\u624b\u6c14\uff01")}}new Laya.Point(0,0);var d=-1,e=0,g="",f=!1,h=-1,l=null,m="";Laya["class"](c,"UISendPak",SendRedPackUI);b=c.prototype;b.Init=function(){l=this;this.start()};b.start=function(){this.startpos=new Laya.Point;this.SendRpakWin.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.but_close.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownBut);this.but_send.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownSendMsg);this.GetRedPackList();this.Editinput.on(Laya.Event.FOCUS,this,this.OnFocus);this.Editinput.on(Laya.Event.BLUR,this,this.OnBlur)};b.OnFocus=function(){cur_use_app&&(this.SendRpakWin.top=-20)};b.OnBlur=function(){cur_use_app&&(this.SendRpakWin.y=68)};b.onMouseDownSendMsg=function(){if(15<this.Editinput.text.length)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7559\u8a00\u4e0d\u80fd\u8d85\u8fc715\u4e2a\u5b57\uff01",callfn:function(){}}]);else if(1<=this.Editinput.text.length){var a=ObjectManage.findobject(playerID);a&&a.txt_name&&(Sendmessage.sendRedPackMsg(g_RedPack_List[h].nRedRecog,a.txt_name.text+" "+this.Editinput.text),m=a.txt_name.text,this.Editinput.disabled=!0)}else Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u7559\u8a00\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}])};b.onMouseDownBut=function(){this.removeSelf();Laya.stage.removeChild(this)};b.GetRedPackList=function(){this.send_list.repeatX=1;this.send_list.repeatY=6;this.send_list.vScrollBarSkin="gameres/ui/vscroll.png";this.send_list.itemRender=a;this.send_list.selectEnable=!0;this.send_list.selectHandler=new Laya.Handler(this,this.select);this.send_list.renderHandler=new Laya.Handler(this,this.UpdateItem);var b=[],c=0,d=0;f=!1;for(var m=0;m<g_RedPack_List.length;m++)if(g_RedPack_List[m].nRedRecog==g_RedPackOpen){for(var v=0;100>v;v++)""!=g_RedPack_List[m].OpenRedPacket[v].sUserName&&(g_RedPack_List[m].OpenRedPacket[v].nGoldValue>d&&(d=g_RedPack_List[m].OpenRedPacket[v].nGoldValue,g=g_RedPack_List[m].OpenRedPacket[v].sUserName),b.push(g_RedPack_List[m].OpenRedPacket[v]),c++);v=g_RedPack_List[m].nRedPacketCount;0!=v&&c>=v&&(f=!0);h=m;break}if(-1!=h){v="";switch(g_RedPack_List[h].nType){case 0:v="[\u884c\u4f1a]";break;case 1:v="[\u961f\u4f0d]";break;case 2:v="[\u56fd\u5bb6]";break;case 3:v="[\u5168\u670d]";break;case 4:v="[\u597d\u53cb]"}e=g_RedPack_List[h].nGoldType;this.send_list.array=b.filter(function(a){return a.nGoldValue&&a.sTime&&a.sUserName});this.lb_name.text=g_RedPack_List[h].sUserName+" \u7684\u7ea2\u5305 "+v;this.lb_smsg.text=g_RedPack_List[h].sMsg;this.lb_count.text=g_RedPack_List[h].nRedPacketCount+" \u4e2a\u7ea2\u5305\uff0c\u5df2\u5206\u6d3e\u4e86 "+c+" \u4e2a"}c=ObjectManage.findobject(playerID);m=!0;for(v=0;v<b.length;++v)if(d=b[v],c&&c.txt_name&&d.sUserName==c.txt_name.text&&""==d.sNote){m=!1;break}m?(l.Editinput.disabled=!0,l.but_send.disabled=!0):(l.Editinput.disabled=!1,l.but_send.disabled=!1)};Laya["class"](a,"Sendpakitem",Laya.Box);b.UpdateItem=function(a,b){a.settxt(a.dataSource,b);b==d?(a.lb_Name.color="#ff0000",a.lb_Gold.color="#ff0000",a.lb_date.color="#ff0000",a.lb_Msg.color="#ff0000"):(a.lb_Name.color="#ffffff",a.lb_Gold.color="#ffffff",a.lb_date.color="#ffffff",a.lb_Msg.color="#ffffff")};b.select=function(a){d=a;var b=this.send_list.getCell(a);b&&g_RedPack_List[a]&&!g_RedPack_List[a].bOpened&&(b.img_Logo.skin="gameres/ui/redpak_redbag0.png",g_RedPack_List[a].bOpened=!0,this.send_list.array[a]=g_RedPack_List[a])};b.onMouseDown=function(a){this.send_list.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.SendRpakWin.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.SendRpakWin.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.SendRpakWin.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};b.onMouseUp=function(){this.SendRpakWin.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(a){this.SendRpakWin.x+=a.stageX-this.startpos.x;this.SendRpakWin.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};return c}(SendRedPackUI);(function(){function b(){b.__super.call(this);this.CurSelectItem=this.LastSelectItemNode=null;this.CurSelectNum=1;this.Cur_Select_Page_Type=0;this.CanDragMove=!1;this.StartDragPos=new Laya.Point(0,0);this.baseKey="gameres/ui/";this.resList=[];this.resSelList=[];this.btnList=[];this.Init()}Laya["class"](b,"UIShop",laya.display.Sprite);var c=b.prototype;c.Init=function(){Laya.stage.on("update_items",this,this.UpdateItems);Laya.stage.on("UpDown",this,this.BtnUpDown);this.ResLoaded()};c.UpdateItems=function(a){void 0!=this.root&&(a?this.DrawItems():this.DrwaStrangeItems())};c.ResLoaded=function(){this.resList.push(this.basePath+"00863.png");this.resList.push(this.basePath+"00866.png");this.resList.push(this.basePath+"00869.png");this.resList.push(this.basePath+"00872.png");this.resList.push(this.basePath+"00875.png");this.resSelList.push(this.basePath+"00864.png");this.resSelList.push(this.basePath+"00867.png");this.resSelList.push(this.basePath+"00870.png");this.resSelList.push(this.basePath+"00873.png");this.resSelList.push(this.basePath+"00876.png");this.root=new NpcShopUI;Laya.stage.addChild(this.root);for(var a=1;11>a;a++){if(6>a)this.root.getChildByName("pane_qz_"+a).on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("pane_"+a).on(Laya.Event.CLICK,this,this.BtnClick)}this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_DOWN,this,this.OnDragStart);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_MOVE,this,this.OnDragMove);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_UP,this,this.OnDragEnd);this.root.getChildByName("img_bg").on(Laya.Event.MOUSE_OUT,this,this.OnDragEnd);this.btnList.push(this.root.getChildByName("btn_zhuagnshi"));this.btnList.push(this.root.getChildByName("btn_buji"));this.btnList.push(this.root.getChildByName("btn_qianghua"));this.btnList.push(this.root.getChildByName("btn_haoyou"));this.btnList.push(this.root.getChildByName("btn_xianliang"));this.ResetUI();this.ResetBtnRes("btn_zhuagnshi")};c.ResetBtnRes=function(a){for(var b=0;b<this.btnList.length;b++)this.btnList[b].selected=a==this.btnList[b].name?!0:!1};c.OnDragStart=function(){if(this.root.getChildByName("img_bg").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.StartDragPos.x=a.x;this.StartDragPos.y=a.y;this.CanDragMove=!0}};c.OnDragMove=function(){if(0!=this.CanDragMove)if(this.root.getChildByName("img_bg").hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)){var a=this.parent.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.root.x=(a.x-this.StartDragPos.x)*g_BaseScale;this.root.y=(a.y-this.StartDragPos.y)*g_BaseScale}else this.CanDragMove=!1};c.OnDragEnd=function(){this.CanDragMove=!1};c.Update=function(){if(this.root)for(var a=ItemMgr.getInstance().ShopItemList,b=0;b<a.length;b++){var c=this.root.getChildByName("pane_"+(b+1)).getChildByName("img_item");if(a[b]&&a[b].eff_list&&c&&""!=c.skin){if(c._childs[0].skin=a[b].eff_list[a[b].eff_idx],a[b].eff_idx++,a[b].eff_idx>=a[b].eff_list.length&&(a[b].eff_idx=0),a[b])for(var g=0;g<a[b].eff_list.length;g++){var f=-c._childs[0].height/2+13;c._childs[0].x=-c._childs[0].width/2+12+a[b].offset_list[g].x;c._childs[0].y=f+a[b].offset_list[g].y}}else c&&c._childs[0]&&(c._childs[0].skin="")}};c.LoadItemEffect=function(a,b){var c=a.s.EffectStartOffSet;if(0<c){var g=new Laya.Image;g.blendMode="overlay";b&&b.addChild(g);a.eff_list=[];a.offset_list=[];a.eff_idx=0;for(g=c;g<c+a.s.EffectImageCount;g++){for(var f="/",h=g.toString().length;5>h;h++)f+="0";f+=g+".png";a.eff_list.push("data/"+g_pak_list[a.s.EffectFileIndex]+f);a.offset_list.push(Offsetmodule.getoffset(g_pak_list[a.s.EffectFileIndex],g));Laya.loader.load(a.eff_list,Laya.Handler.create(this,function(){}),null,Laya.Loader.IMAGE)}}};c.DrawItems=function(){function a(){for(var a=0;10>a;a++){var c="pane_"+(a+1),e=g.root.getChildByName(c).getChildByName("img_item");if(b[a]){var m=GameMission.getUrl("items",b[a].s.Looks);e._style&&(e.blendMode="overlay");GameUtil.ShowItemeffect(e,ItemMgr.getInstance().ShopItemList[a]);g.root.getChildByName(c).getChildByName("img_item").skin=m;g.root.getChildByName(c).getChildByName("lbl_info").text=b[a].s.DBName+"\n"+b[a].s.Price+g.GetMoneyType(b[a].GameMoney)}else e&&e.getChildByName("effect")&&e.getChildByName("effect").removeSelf(),g.root.getChildByName(c).getChildByName("img_item").skin="",g.root.getChildByName(c).getChildByName("lbl_info").text=""}g.UpdatePageTitle()}var b=ItemMgr.getInstance().ShopItemList,c=this.loadItemImg(b),g=this;0==c.length?a():GameUtil.loadImgEx(c,a)};c.DrwaStrangeItems=function(){var a=ItemMgr.getInstance().StrageList,b=this.loadItemImg(a),c=this;GameUtil.loadImgEx(b,function(){for(var b=0;5>b;b++){var f="pane_qz_"+(b+1);if(a[b]){var d=GameMission.getUrl("items",a[b].s.Looks);c.root.getChildByName(f).getChildByName("img_item").skin=d;c.root.getChildByName(f).getChildByName("lbl_info").text=a[b].s.DBName+"\n"+a[b].s.Price+c.GetMoneyType(a[b].GameMoney)}else c.root.getChildByName(f).getChildByName("img_item").skin="",c.root.getChildByName(f).getChildByName("lbl_info").text=""}})};c.GetMoneyType=function(a){var b="";switch(a){case 0:b=g_GameGoldNum.key;break;case 1:b=g_GameCionNum.key;break;case 2:b=g_GamePointNum.key;break;case 3:b=g_bindCionNum.key;break;case 4:b=g_bindGoldNum.key;break;case 5:b=g_nGameDiamond.key;break;case 6:b=g_nGameGird.key}return G_Money_Type=b};c.GetResNameByLooks=function(a){var b=a;1E4<=b&&(b-=1E4);for(var c="",b=b.toString().length;5>b;b++)c+="0";return 1E4<=a?"data/items1/"+c+(a-1E4)+".png":"data/items/"+c+a+".png"};c.ResetUI=function(){if(void 0!=this.root){this.root.getChildByName("panel_gift").visible=!1;this.root.getChildByName("btn_zhuagnshi").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_buji").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_qianghua").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_haoyou").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_xianliang").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_last").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_next").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_chongzhi").on(Laya.Event.CLICK,this,this.BtnClick);this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);var a=this.root.getChildByName("panel_gift");a.getChildByName("input_tar_name").on(Laya.Event.CLICK,this,this.BtnClick);a.getChildByName("btn_submit").on(Laya.Event.CLICK,this,this.BtnClick);a.getChildByName("btn_return1").on(Laya.Event.CLICK,this,this.BtnClick);this.DrawItems();this.DrwaStrangeItems()}};c.BtnUpDown=function(){null!=this.root&&(0==G_Cur_Shop_Page?this.root.getChildByName("btn_last").selected=!0:this.root.getChildByName("btn_last").selected=!1,G_Cur_Shop_Page==G_Total_Shop_Page-1?this.root.getChildByName("btn_next").selected=!0:this.root.getChildByName("btn_next").selected=!1)};c.BgImg=function(){null!=this.indexBg&&(this.root.getChildByName(this.indexBg).skin="gameres/ui/bg_1.png");null!=this.BgName&&(this.root.getChildByName(this.BgName).skin="")};c.UpdatePageTitle=function(){ItemMgr.getInstance().ShopItemList[0]&&(this.root.getChildByName("lbl_page").text=G_Cur_Shop_Page+1+" / "+G_Total_Shop_Page)};c.ShowGiftNode=function(){this.root.getChildByName("panel_gift").visible=!0};c.SetSelectNode=function(a){var b=this.root.getChildByName("img_sel");b.x=a.x;b.y=a.y;b.parent=null;a.parent.addChild(b)};c.loadItemImg=function(a){for(var b=[],c=0;c<a.length;c++){var g=a[c].s.Looks,f="",h=g;1E4<=g&&(f=Math.floor(g/1E4),h=g%1E4);h=("000000"+h).slice(-6);g=GameUtil.getImageSetNameByPath("data/items"+f+"/"+h);b.push(g)}return b};c.BtnClick=function(a){a=a.target.name;if("btn_exit"==a)this.root.getChildByName("panel_gift").visible=!1,this.root.getChildByName("panel_gift").getChildByName("input_tar_name").text="",this.root.visible=!1,this.BgImg();else if("btn1_exit"==a)this.root.getChildByName("panel_buy").visible=!1,Laya.stage.event("hide_iteminfo_dlg");else if("btn_return1"==a)this.root.getChildByName("panel_gift").visible=!1;else if("btn_submit"==a)a=this.root.getChildByName("panel_gift").getChildByName("input_tar_name").text,Sendmessage.GiftShopItem(a,this.CurSelectItem.s.DBName),this.root.getChildByName("panel_gift").visible=!1,this.root.getChildByName("panel_gift").getChildByName("input_tar_name").text="",Laya.stage.event("show_bag_items");else if("btn_buy"==a)this.LastSelectItemNode?this.ShowBuyItemInfo():Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u60a8\u8981\u8d2d\u4e70\u7684\u7269\u54c1",color:"#ff0000"}]);else if("btn_gift"==a)this.LastSelectItemNode?this.ShowGiftNode():Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u60a8\u8981\u8d60\u9001\u7684\u7269\u54c1",color:"#ff0000"}]);else if("btn_chongzhi"==a)Sendmessage.SendGameMainBtnMsg("\u5145\u503c\u94fe\u63a5");else if("btn_zhuagnshi"==a)this.ResetBtnRes(a),this.Cur_Select_Page_Type=G_Cur_Shop_Page=0,Sendmessage.GetShopItems(0),ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),this.BgImg();else if("btn_buji"==a)this.ResetBtnRes(a),G_Cur_Shop_Page=0,this.Cur_Select_Page_Type=1,Sendmessage.GetShopItems(1),ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),this.BgImg();else if("btn_qianghua"==a)this.ResetBtnRes(a),G_Cur_Shop_Page=0,this.Cur_Select_Page_Type=2,Sendmessage.GetShopItems(2),ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),this.BgImg();else if("btn_haoyou"==a)this.ResetBtnRes(a),G_Cur_Shop_Page=0,this.Cur_Select_Page_Type=3,Sendmessage.GetShopItems(3),ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),this.BgImg();else if("btn_xianliang"==a)this.ResetBtnRes(a),G_Cur_Shop_Page=0,this.Cur_Select_Page_Type=4,Sendmessage.GetShopItems(4),ItemMgr.getInstance().ShopItemList=[],this.DrawItems(),this.BgImg();else if("btn_last"==a)0<G_Cur_Shop_Page&&(G_Cur_Shop_Page--,Sendmessage.GetShopItems(this.Cur_Select_Page_Type));else if("btn_next"==a)G_Cur_Shop_Page<G_Total_Shop_Page-1&&(G_Cur_Shop_Page++,Sendmessage.GetShopItems(this.Cur_Select_Page_Type));else if(0<=a.indexOf("pane_qz_")){var b=a.split("_")[2];this.BgName;null!=this.BgName&&(this.root.getChildByName(this.BgName).skin="");this.root.getChildByName(a).skin="gameres/ui/select_bg.png";if(this.CurSelectItem=ItemMgr.getInstance().StrageList[b-1])g_OpenIdx=4,g_MoveItems.Items=this.CurSelectItem,GameUtil.NewShowItemsInf(g_MoveItems.Items);this.BgName=a;null!=this.indexBg&&(this.root.getChildByName(this.indexBg).skin="gameres/ui/bg_1.png")}else if(0<=a.indexOf("pane_")){b=a.split("_")[1];this.indexBg;null!=this.indexBg&&(this.root.getChildByName(this.indexBg).skin="gameres/ui/bg_1.png");this.root.getChildByName(a).skin="gameres/ui/bg_2.png";if(this.CurSelectItem=ItemMgr.getInstance().ShopItemList[b-1])g_OpenIdx=4,g_MoveItems.Items=this.CurSelectItem,GameUtil.NewShowItemsInf(g_MoveItems.Items);this.indexBg=a;null!=this.BgName&&(this.root.getChildByName(this.BgName).skin="")}}})();(function(){function b(){b.__super.call(this);this.DragStartPos=new Laya.Point(0,0);this.CanDragDlg=!1;this.ShowType=0;this.DragItemSkin="";this.CurSelectBuyIdx=-1;this.baseKey="png/ui_shop/";this.CurPageIdx=0;this.Init()}Laya["class"](b,"UIShopRoom",laya.display.Sprite);var c=b.prototype;c.Init=function(){Laya.stage.on("buy_npc_item",this,this.BuySelectItem);Laya.stage.on("reset_img_item",this,function(){this.shellNode.getChildByName("img_item")._childs[0]&&(this.shellNode.getChildByName("img_item")._childs[0].skin="")});this.ResLoaded()};c.BuySelectItem=function(){var a=ItemMgr.getInstance().BuyItemRoomList;0<a.length?0<=this.CurSelectBuyIdx&&this.CurSelectBuyIdx<a.length&&Sendmessage.sendBuyItem(a[this.CurPageIdx+this.CurSelectBuyIdx]):(a=ItemMgr.getInstance().BuyItemInfoRoomList,0<=this.CurSelectBuyIdx&&this.CurSelectBuyIdx<a.length&&Sendmessage.SendButItemFormInfo(a[this.CurPageIdx+this.CurSelectBuyIdx]),this.CurSelectBuyIdx=-1)};c.ShowItemPrice=function(){var a="??????";0<=G_Show_Item_Price&&(a=G_Show_Item_Price);this.shellNode.getChildByName("lbl_goldNum").text=a};c.ShowShopRoom=function(a){G_Show_Item_Price=0;this.CurSelectBuyIdx=-1;this.ShowType=a.type;if(void 0!=this.root){this.visible=!0;g_CurGameDlgZorder++;this.zOrder=g_CurGameDlgZorder;if(1==a.type){this.shellNode.visible=!1;this.buyNode.visible=!0;a=ItemMgr.getInstance().BuyItemRoomList;for(var b=ItemMgr.getInstance().BuyItemInfoRoomList,c=0;10>c;c++){var g=this.CurPageIdx+c;a[g]?(this.buyNode.getChildByName("lbl_"+c).text=a[g].name,this.buyNode.getChildByName("lbl_0_"+c).text=a[g].gprice,1<=a[g].gsub?this.buyNode.getChildByName("lbl_2_"+c).text="\x3e\x3e\x3e\x3e\x3e":this.buyNode.getChildByName("lbl_2_"+c).text=""):b[g]?(this.buyNode.getChildByName("lbl_"+c).text=b[g].s.Name,this.buyNode.getChildByName("lbl_0_"+c).text=b[g].price,this.buyNode.getChildByName("lbl_2_"+c).text=b[g].Dura):(this.buyNode.getChildByName("lbl_"+c).text="",this.buyNode.getChildByName("lbl_0_"+c).text="",this.buyNode.getChildByName("lbl_2_"+c).text="");this.buyNode.getChildByName("lbl_"+c).color="#ffffff";this.buyNode.getChildByName("lbl_0_"+c).color="#ffffff";this.buyNode.getChildByName("lbl_2_"+c).color="#ffffff"}}else 2==a.type?(this.buyNode.visible=!1,this.shellNode.getChildByName("lbl_title").text="\u51fa\u552e\uff1a"):3==a.type&&(this.buyNode.visible=!1,this.shellNode.getChildByName("lbl_title").text="\u4fee\u7406\uff1a");this.shellNode.getChildByName("lbl_goldNum").text="";this.shellNode.getChildByName("img_item").skin=""}};c.ResLoaded=function(){this.root=new ShopRoomUI;this.buyNode=this.root.getChildByName("img_buy");this.shellNode=this.root.getChildByName("img_shell");this.buyNode.on(Laya.Event.MOUSE_DOWN,this,this.MouseDwon);this.buyNode.on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.buyNode.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.shellNode.on(Laya.Event.MOUSE_DOWN,this,this.MouseDwon);this.shellNode.on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.shellNode.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.addChild(this.root);this.ResetUI();this.shellNode.getChildByName("btn_exit1").on(Laya.Event.CLICK,this,this.BtnClick);this.buyNode.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick);this.buyNode.getChildByName("btn_page_last").on(Laya.Event.CLICK,this,this.BtnClick);this.buyNode.getChildByName("btn_page_next").on(Laya.Event.CLICK,this,this.BtnClick);this.buyNode.getChildByName("btn_gold_bind").on(Laya.Event.CLICK,this,this.BtnClick);this.shellNode.getChildByName("btn_ok").on(Laya.Event.CLICK,this,this.BtnClick);this.buyNode.getChildByName("btn_gold").on(Laya.Event.CLICK,this,this.BtnClick);this.shellNode.getChildByName("lbl_title").color="#ffffff";this.shellNode.getChildByName("lbl_goldNum").color="#ffffff";for(var a=0;10>a;a++)this.buyNode.getChildByName("lbl_"+a).on(Laya.Event.CLICK,this,this.BtnClick),this.buyNode.getChildByName("lbl_0_"+a).on(Laya.Event.CLICK,this,this.BtnClick),this.buyNode.getChildByName("lbl_2_"+a).on(Laya.Event.CLICK,this,this.BtnClick);this.ShowShopRoom({type:this.ShowType})};c.ResetUI=function(){Laya.Button;this.buyNode.skin="gameres/png/00057.png";this.buyNode.getChildByName("btn_exit").skin="gameres/ui/btn_close.png";this.buyNode.getChildByName("btn_page_last").labelColors="#ffffff";this.buyNode.getChildByName("btn_page_next").labelColors="#ffffff";this.buyNode.getChildByName("btn_gold_bind").labelColors="#ffffff";this.buyNode.getChildByName("btn_gold").labelColors="#ffffff";this.buyNode.getChildByName("btn_page_last").skin="gameres/ui/00317.png";this.buyNode.getChildByName("btn_page_next").skin="gameres/ui/00317.png";this.buyNode.getChildByName("btn_gold_bind").skin="gameres/ui/00317.png";this.buyNode.getChildByName("btn_gold").skin="gameres/ui/00317.png";this.shellNode.getChildByName("btn_exit1").skin="gameres/ui/btn_close.png";this.shellNode.visible=!1};c.MouseDwon=function(){var a=this.shellNode.getChildByName("img_item").parent.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));1==this.buyNode.visible&&(this.buyNode.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY),a=this.root.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),this.DragStartPos.x=a.x*g_BaseScale,this.DragStartPos.y=a.y*g_BaseScale,this.CanDragDlg=!0)};c.MouseMove=function(){if(0!=this.CanDragDlg)if(1==this.buyNode.visible){this.root.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY);var a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));this.root.x=(a.x-this.DragStartPos.x)*g_BaseScale;this.root.y=(a.y-this.DragStartPos.y)*g_BaseScale}else 1==this.shellNode.visible&&(this.root.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY),a=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),this.root.x=(a.x-this.DragStartPos.x)*g_BaseScale,this.root.y=(a.y-this.DragStartPos.y)*g_BaseScale)};c.MouseUp=function(){this.CanDragDlg=!1};c.BtnClick=function(a){a=a.target.name;switch(a){case "btn_exit":case "btn_exit1":Laya.stage.event("show_bag_items");this.visible=!1;Laya.stage.event("hide_bag_dlg");this.CurPageIdx=0;break;case "btn_page_last":0<this.CurPageIdx?this.CurPageIdx-=10:Laya.stage.event("show_log",[{txt:"\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875",color:"#ff0000"}]);Laya.stage.event("show_shoproom",[{type:1}]);break;case "btn_page_next":a=parseInt(ItemMgr.getInstance().BuyItemRoomList.length/10);this.CurPageIdx<a?this.CurPageIdx+=10:Laya.stage.event("show_log",[{txt:"\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875",color:"#ff0000"}]);Laya.stage.event("show_shoproom",[{type:1}]);break;case "btn_gold_bind":this.BuySelectItem();break;case "btn_gold":this.BuySelectItem();break;case "btn_ok":a=ItemMgr.getInstance().LastDragItem;if(0>G_Show_Item_Price)break;2==this.ShowType?Sendmessage.sendSellItem(G_NPC_ID,a.MakeIndex,a.s.Name):3==this.ShowType&&Sendmessage.sendRepairItem(G_NPC_ID,a.MakeIndex,a.s.Name);ItemMgr.getInstance().DeleteItem(a.MakeIndex);Laya.stage.event("show_bag_items");this.shellNode.getChildByName("lbl_goldNum").text="";this.shellNode.getChildByName("img_item").skin="";ItemMgr.getInstance().LastDragItem=null;Laya.stage.event("reset_img_item");break;default:for(var b=0;10>b;b++)if(this.buyNode.getChildByName("lbl_"+b).color="#ffffff",this.buyNode.getChildByName("lbl_0_"+b).color="#ffffff",this.buyNode.getChildByName("lbl_2_"+b).color="#ffffff",a=="lbl_"+b||a=="lbl_0_"+b||a=="lbl_2_"+b){this.buyNode.getChildByName("lbl_"+b).color="#ff0000";this.buyNode.getChildByName("lbl_0_"+b).color="#ff0000";this.buyNode.getChildByName("lbl_2_"+b).color="#ff0000";var c=ItemMgr.getInstance().BuyItemRoomList,g=ItemMgr.getInstance().BuyItemInfoRoomList;0<c.length?c[this.CurPageIdx+b]&&(1<=c[this.CurPageIdx+b].gsub?(Sendmessage.sendGetDetailItem(c[this.CurPageIdx+b]),this.CurPageIdx=0):this.CurSelectBuyIdx=b):g[b]&&(g_Show_Bag_Type="npc_buy_item",this.CurSelectBuyIdx=b,ItemMgr.getInstance().CurSelecItem=g[b],ItemMgr.getInstance().CurSelecItem.from="npc_buy_item",Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}]))}}}})();var UITeamGroup=function(b){function c(){c.__super.call(this);this.item=new friend_itemUI;this.addChild(this.item);this.GetJob=function(a){return 0==a?"\u6218\u58eb":1==a?"\u6cd5\u5e08":"\u9053\u58eb"};this.GetSex=function(a){return 0==a?"\u7537":"\u5973"};this.Show=function(a,b){for(var c=a.split(";"),f=0;4>f;f++){var h="--";c[f]&&(0==f?h=c[0]:3==f?h=this.GetJob(c[2]):2==f?h=c[1]:1==f&&(h=this.GetSex(c[3])));this.item.getChildByName("lbl_"+f).text=h;this.item.getChildByName("lbl_"+f).fontSize=14}b!=g_Select_Idx&&(this.item.getChildByName("img_sel").visible=!1)}}function a(){a.__super.call(this);this.SelectIdx=0;this.CanDragMove=!1;this.StartDragPos=new Laya.Point(0,0);this.OptionType=0;this.Init()}g_Select_Idx=-1;Laya["class"](c,"TeamItem",Laya.Box);Laya["class"](a,"TeamGroup",TreamGroupUI);b=a.prototype;b.Init=function(){this.btn_new.on(Laya.Event.CLICK,this,this.BtnClick_new);this.btn_add.on(Laya.Event.CLICK,this,this.BtnClick_add);this.btn_del.on(Laya.Event.CLICK,this,this.BtnClick_del);this.btn_exit.on(Laya.Event.CLICK,this,this.BtnClick_exit);this.che_can_team.on(Laya.Event.CLICK,this,this.CheckCanTeam);this.input_node.visible=!1;this.input_str.color="#ffffff";this.che_can_team.selected=G_BaseSetList[0].val;this.list_team.repeatX=1;this.list_team.repeatY=10;this.list_team.vScrollBarSkin="";this.list_team.itemRender=c;this.list_team.selectEnable=!0;this.list_team.renderHandler=new Laya.Handler(this,this.UpdateItem);this.list_team.mouseHandler=new Laya.Handler(this,this.ClickItem);this.list_team.array=G_Team_Grop_List;Laya.stage.on("update_teamlist",this,this.UpdateTeamList);Laya.stage.on("show_input_node1",this,this.ShowInputNode);this.startpos=new Laya.Point;this.img_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.input_str.on(Laya.Event.FOCUS,this,this.OnFocus);this.input_str.on(Laya.Event.BLUR,this,this.OnBlur);this.btn_myteam.on(Laya.Event.CLICK,this,this.btn_myteamClick);this.btn_nearby.on(Laya.Event.CLICK,this,this.btn_nearbyClick);this.btn_myteam.selected=!0};b.btn_myteamClick=function(){this.btn_myteam.selected=!0;this.btn_nearby.selected=!1;this.list_team.array=G_Team_Grop_List;g_Select_Idx=-1};b.btn_nearbyClick=function(){this.btn_myteam.selected=!1;this.btn_nearby.selected=!0;var a=ObjectManage.object_list;g_Select_Idx=-1;var b=[],c="";if(0<a.length){for(var f=0;f<a.length;f++)a[f]&&3==a[f].type&&null!=a[f].data&&a[f].skin_feature&&1!=a[f].skin_feature.wRace&&150!=a[f].skin_feature.wRace&&a[f].data.record!=playerID&&a[f].txt_name&&""!==a[f].txt_name.text&&a[f].data.fea.buffer&&(fea=THumFeature(a[f].data.fea.buffer),0==fea.boLeader&&(c=a[f].txt_name.text+";"+a[f].level+";"+fea.btJob+";"+fea.btGender,b.push(c)));this.list_team.array=b}else this.list_team.array=[]};b.OnFocus=function(){cur_use_app&&(this.input_node.top=0)};b.OnBlur=function(){cur_use_app&&(this.input_node.y=142)};b.onMouseDown=function(a){this.list_team.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)||(this.startpos.x=a.stageX,this.startpos.y=a.stageY,this.img_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.img_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove))};b.onMouseUp=function(){this.img_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(a){this.img_bg.x+=a.stageX-this.startpos.x;this.img_bg.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};b.ShowInputNode=function(a){if(this.input_node){""!=g_copyName&&(this.btn_copy.visible=!0,this.input_str.width=285,this.btn_copy.on(Laya.Event.CLICK,this,function(){this.input_str.text=g_copyName}));this.lbl_desc.text=void 0!=a.desc?a.desc:"";this.input_str.visible=void 0!=a.input?!0:!1;if(void 0!=a.callfn){var b=this;this.btn_ok.on(Laya.Event.CLICK,this,function(){a.callfn&&(a.callfn(b),a.callfn=null,this.input_node.visible=!1,this.btn_copy.visible=!1,this.input_str.width=312,this.input_str.text="")});this.btn_esc.on(Laya.Event.CLICK,this,function(){a.callfn=null;this.input_node.visible=!1;this.btn_copy.visible=!1;this.input_str.width=312;this.input_str.text=""});this.btn_ok.visible=!0;this.btn_esc.visible=!0}else this.btn_ok.visible=!1,this.btn_esc.visible=!1;this.input_node.visible=!0}};b.UpdateItem=function(a,b){a.Show(a.dataSource,b)};b.ClickItem=function(a,b){"click"==a.type&&(g_Select_Idx=this.SelectIdx=b,a.target._childs[0].getChildByName("img_sel").visible=!0)};b._callfn=function(a){a.input_node.visible=!1;""!=a.input_str.text?(1==a.OptionType?Sendmessage.sendCreateGroup(a.input_str.text):0==a.OptionType&&(0<G_Team_Grop_List.length?Sendmessage.sendAddGroupMember(a.input_str.text):Sendmessage.sendCreateGroup(a.input_str.text)),a.input_str.text=""):""==a.input_str.text?Laya.stage.event("show_log",[{txt:"\u8bf7\u8f93\u5165\u540d\u5b57",color:"#00ff00"}]):0==G_BaseSetList[0].val&&Laya.stage.event("show_log",[{txt:"\u8bf7\u9009\u62e9\u53ef\u4ee5\u7ec4\u961f",color:"#00ff00"}])};b.BtnClick_new=function(){if(this.btn_nearby.selected){var a=this.list_team.array;-1<g_Select_Idx&&g_Select_Idx<a.length?(a=a[g_Select_Idx],-1!=a.indexOf(";")&&(a=a.split(";"),0<G_Team_Grop_List.length?Sendmessage.sendAddGroupMember(a[0]):Sendmessage.sendCreateGroup(a[0]))):(g_Select_Idx=-1,this.OptionType=1,a={desc:"\u8bf7\u8f93\u5165\u73a9\u5bb6\u6635\u79f0",callfn:this._callfn,input:" "},Laya.stage.event("show_input_node1",[a]))}else this.OptionType=1,a={desc:"\u8bf7\u8f93\u5165\u73a9\u5bb6\u6635\u79f0",callfn:this._callfn,input:" "},Laya.stage.event("show_input_node1",[a])};b.CheckCanTeam=function(){Sendmessage.sendGroupMode()};b.BtnClick_del=function(){G_Team_Grop_List[this.SelectIdx]&&(Sendmessage.sendDelGroupMember(G_Team_Grop_List[this.SelectIdx]),g_Select_Idx=-1)};b.BtnClick_exit=function(){g_Select_Idx=-1;this.visible=!1;this.input_node&&(this.input_node.visible=!1)};b.BtnClick_add=function(){if(this.btn_nearby.selected){var a=this.list_team.array;-1<g_Select_Idx&&g_Select_Idx<a.length?(a=a[g_Select_Idx],-1!=a.indexOf(";")&&(a=a.split(";"),0<G_Team_Grop_List.length?Sendmessage.sendAddGroupMember(a[0]):Sendmessage.sendCreateGroup(a[0]))):(g_Select_Idx=-1,this.OptionType=0,a={desc:"\u8bf7\u8f93\u5165\u73a9\u5bb6\u6635\u79f0",callfn:this._callfn,input:" "},Laya.stage.event("show_input_node1",[a]))}else this.OptionType=0,a={desc:"\u8bf7\u8f93\u5165\u73a9\u5bb6\u6635\u79f0",callfn:this._callfn,input:" "},Laya.stage.event("show_input_node1",[a])};b.UpdateTeamList=function(){this.list_team.array=G_Team_Grop_List;this.che_can_team.selected=G_BaseSetList[0].val;this.btn_myteamClick()};return UITeamGroup}(TreamGroupUI);(function(){function b(){b.__super.call(this);this.otherItemNode=this.selfItemNode=null;this.baseKey="ui/trade/";this.Init()}Laya["class"](b,"UITrade",laya.display.Sprite);var c=b.prototype;c.Init=function(){Laya.stage.on("update_trade_item",this,this.UpdateTradeItem);Laya.stage.on("trade_cmd",this,this.TradeCMD);Laya.stage.on("update_items",this,this.UpdateTradeItem);Laya.stage.on("cannel_trade",this,this.CannelTrade);this.ResLoaded()};c.ResLoaded=function(){this.root=new TradeUI;this.addChild(this.root);this.selfItemNode=this.root.getChildByName("img_self");this.otherItemNode=this.root.getChildByName("img_other");this.root.getChildByName("img_self").on(Laya.Event.MOUSE_DOWN,this,this.MouseDown);this.root.getChildByName("img_self").on(Laya.Event.MOUSE_MOVE,this,this.MouseMove);this.root.getChildByName("img_self").on(Laya.Event.MOUSE_UP,this,this.MouseUp);this.BindClick(this.selfItemNode);this.BindClick(this.otherItemNode);this.ResetUI()};c.BindClick=function(a){for(var b=1;11>b;b++)a.getChildByName("img_"+b).on(Laya.Event.CLICK,this,this.BtnClick)};c.MouseDown=function(){};c.MouseMove=function(){};c.MouseUp=function(){};c.TradeCMD=function(a){"start_trade"==a.id?(g_Trade_GameIcon=g_GameCionNum.value,Laya.stage.event("show_trade",[{id:"show_trade"}]),this.selfItemNode.getChildByName("lbl_self_num").text=g_RoleName,this.otherItemNode.getChildByName("lbl_other_name").text=G_Trade_Other_Name):"start_faild"==a.id?Laya.stage.event("cannel_trade",[{from:"start_faild"}]):"additem_faild"==a.id?(ItemMgr.getInstance().LastTradeItem=null,Laya.stage.event("show_bag_items")):"change_gold_fiald"==a.id?this.selfItemNode.getChildByName("input_num").text=0:"change_gold_ok"==a.id?(this.selfItemNode.getChildByName("input_num").text=a.remsg.record,g_Trade_GameIcon=a=CodeUtil._MAKELONG(a.remsg.param,a.remsg.tag),Laya.stage.event("update_bag_info",[a])):"change_gold"==a.id?this.otherItemNode.getChildByName("lbl_other_num").text=a.remsg.record:"cancal_trade"==a.id?Laya.stage.event("cannel_trade",[{from:"cancal_trade"}]):"finish_trade"==a.id?Laya.stage.event("cannel_trade",[{from:"finish_trade"}]):"delete_item_faild"==a.id?(Laya.stage.event("update_items"),Laya.stage.event("show_log",[{txt:"\u5220\u9664\u4ea4\u6613\u7269\u54c1\u5931\u8d25",color:"#ff0000"}])):"change_gold_fiald"==a.id?(Laya.stage.event("show_log",[{txt:"\u4fee\u6539\u91d1\u5e01\u5931\u8d25"+list[0].s.DBName,color:"#ff0000"}]),a=CodeUtil._MAKELONG(msg.param,msg.tag),Laya.stage.event("update_bag_info",[a])):"delete_item"==a.id?(a=ItemMgr.getInstance().LastTradeItem,ItemMgr.getInstance().DeleteTradeItem(a.MakeIndex),ItemMgr.getInstance().AddItemToBag(a),Laya.stage.event("update_items"),Laya.stage.event("show_bag_items")):"additem_ok"==a.id?(a=ItemMgr.getInstance().LastTradeItem,ItemMgr.getInstance().DeleteItem(a.MakeIndex),ItemMgr.getInstance().TradeItemList.push(a),Laya.stage.event("update_items"),Laya.stage.event("show_bag_items"),ItemMgr.getInstance().LastTradeItem=null):"trade_item_info"==a.id?(a=fnDecode6BitBuf(a.body,a.body.length,!1),a=TClientItem(a.pszDest),ItemMgr.getInstance().TradeOtherList.push(a),Laya.stage.event("update_items")):"delete_item_ok"==a.id&&(a=fnDecode6BitBuf(a.body,a.body.length,!1),a=TClientItem(a.pszDest),ItemMgr.getInstance().DeleteTradeOtherItem(a.MakeIndex))};c.Update=function(){var a=ItemMgr.getInstance().TradeItemList,b=ItemMgr.getInstance().TradeOtherList;if(this.root){for(var c=0;c<a.length;c++){var g=c,g=this.selfItemNode.getChildByName("img_"+(g+1)),g=g._childs[0];if(a[c]&&a[c].eff_list&&g&&""!=g.skin&&g._childs[0]){if(g._childs[0].skin=a[c].eff_list[a[c].eff_idx],a[c].eff_idx++,a[c].eff_idx>=a[c].eff_list.length&&(a[c].eff_idx=0),a[c])for(var f=0;f<a[c].eff_list.length;f++){var h=-g._childs[0].width/2+12,l=-g._childs[0].height/2+13;g._childs[0].x=h+a[c].offset_list[f].x;g._childs[0].y=l+a[c].offset_list[f].y}}else g&&g._childs[0]&&(g._childs[0].skin="")}for(c=0;c<b.length;c++)if(g=c,g=this.otherItemNode.getChildByName("img_"+(g+1)))if(g=g._childs[0],b[c]&&b[c].eff_list&&g&&""!=g.skin&&g._childs[0]){if(g._childs[0].skin=b[c].eff_list[b[c].eff_idx],b[c].eff_idx++,b[c].eff_idx>=b[c].eff_list.length&&(b[c].eff_idx=0),b[c])for(f=0;f<b[c].eff_list.length;f++)h=-g._childs[0].width/2+12,l=-g._childs[0].height/2+13,g._childs[0].x=h+b[c].offset_list[f].x,g._childs[0].y=l+b[c].offset_list[f].y}else g&&g._childs[0]&&(g._childs[0].skin="")}};c.LoadItemEffect=function(a,b){this.item=a;var c=a.s.EffectStartOffSet;if(0<c){var g=new Laya.Image;g.blendMode="overlay";b._childs[0]&&b._childs[0].addChild(g);a.eff_list=[];a.offset_list=[];a.eff_idx=0;for(g=c;g<c+a.s.EffectImageCount;g++){for(var f="/",h=g.toString().length;5>h;h++)f+="0";f+=g+".png";a.eff_list.push("data/"+g_pak_list[a.s.EffectFileIndex]+f);a.offset_list.push(Offsetmodule.getoffset(g_pak_list[a.s.EffectFileIndex],g));Laya.loader.load(a.eff_list,Laya.Handler.create(this,function(){}),null,Laya.Loader.IMAGE)}}};c.CannelTrade=function(a){var b=null;"finish_trade"==a.from?(g_GameCionNum.value=g_Trade_GameIcon,Laya.stage.event("update_bag_info"),b=ItemMgr.getInstance().TradeOtherList):"cancal_trade"==a.from&&(Laya.stage.event("update_bag_info"),b=ItemMgr.getInstance().TradeItemList);if(b){for(a=0;a<b.length;a++)ItemMgr.getInstance().AddItemToBag(b[a]);Laya.stage.event("show_bag_items")}ItemMgr.getInstance().TradeItemList=[];ItemMgr.getInstance().TradeOtherList=[];ItemMgr.getInstance().LastTradeItem=null;"game_trade"==g_Show_Bag_Type&&(g_Show_Bag_Type="");Laya.stage.event("hide_bag_dlg");this.visible=!1};c.UpdateTradeItem=function(){for(var a=ItemMgr.getInstance().TradeItemList,b=0;b<a.length;b++){var c=b;GameUtil.ParseNameFormat(a[b].s.Looks);c=this.selfItemNode.getChildByName("img_"+(c+1));this.CreteItemIcon(c,a[b]);GameUtil.ShowItemeffect(c,a[b])}a=ItemMgr.getInstance().TradeOtherList;for(b=0;b<a.length;b++)c=b,GameUtil.ParseNameFormat(a[b].s.Looks),c=this.otherItemNode.getChildByName("img_"+(c+1)),this.CreteItemIcon(c,a[b]),GameUtil.ShowItemeffect(c,a[b])};c.GetOffset=function(a){var b="",c=a;1E4<=a&&(c=a-1E4);for(var g=c.toString().length;5>g;g++)b+="0";return 1E4<=a?"data/item/inbag/1/Placements/"+b+c+".txt":"data/item/inbag/Placements/"+b+a+".txt"};c.ResetTradeUI=function(){if(void 0!=this.root){for(var a=1;11>a;a++)this.CreteItemIcon(this.selfItemNode.getChildByName("img_"+a),""),this.CreteItemIcon(this.otherItemNode.getChildByName("img_"+a),"");this.otherItemNode.getChildByName("lbl_other_num").text="0";this.selfItemNode.getChildByName("input_num").text="0";this.selfItemNode.getChildByName("lbl_self_num").text=g_RoleName;this.otherItemNode.getChildByName("lbl_other_name").text=G_Trade_Other_Name}};c.CreteItemIcon=function(a,b){function c(b){var f=null;0<a._childs.length?(a._childs[0].skin=b,f=a._childs[0]):(f=new Laya.Image(b),f.anchorX=.5,f.anchorY=.5,a.addChild(f));for(b=0;b<f._childs.length;b++)f._childs[b].removeSelf();f.x=a.width/2;f.y=a.height/2}a&&b&&GameUtil.loadImg(b.s.Looks,"items",c)};c.ResetUI=function(){void 0!=this.root&&(this.selfItemNode.getChildByName("btn_trade").on(Laya.Event.CLICK,this,this.BtnClick),this.root.getChildByName("btn_exit").on(Laya.Event.CLICK,this,this.BtnClick),this.selfItemNode.getChildByName("btn_submit").on(Laya.Event.CLICK,this,this.BtnClick),this.otherItemNode.getChildByName("lbl_other_num").color="#ffffff",this.selfItemNode.getChildByName("input_num").color="#ffffff",this.selfItemNode.getChildByName("lbl_self_num").text=g_RoleName,this.otherItemNode.getChildByName("lbl_other_name").text=G_Trade_Other_Name)};c.BtnClick=function(a){switch(a.target.name){case "btn_exit":Sendmessage.CancelTrade();this.visible=!1;break;case "btn_trade":Sendmessage.SubmitTrade();break;case "btn_submit":var b=this.selfItemNode.getChildByName("input_num").text;Sendmessage.TradeGold(parseInt(b));break;default:if(b=a.target.parent,a=a.target.name.split("_")[1]-1,"img_self"==b.name){if(b=ItemMgr.getInstance().TradeItemList[parseInt(a)])ItemMgr.getInstance().CurSelecItem=b,ItemMgr.getInstance().CurSelecItem.from="dlg_trade",Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}])}else"img_other"==b.name&&(b=ItemMgr.getInstance().TradeOtherList[parseInt(a)])&&(ItemMgr.getInstance().CurSelecItem=b,ItemMgr.getInstance().CurSelecItem.from="dlg_trade",Laya.stage.event("game_dlg_cmd",[{id:"show_iteminfo"}]))}}})();var upGradeItem=function(b){function c(){c.__super.call(this);this.init()}var a=new Laya.Point(0,0);Laya["class"](c,"upGradeItem",upgradeUI);b=c.prototype;b.init=function(){this.material2=this.material1=this.item=null;this.btn_close.on(Laya.Event.CLICK,this,this.close);this.upgrade_item.on(Laya.Event.CLICK,this,this.setUpgradeItem);this.upgrade_material1.on(Laya.Event.CLICK,this,this.setmaterial1);this.upgrade_material2.on(Laya.Event.CLICK,this,this.setmaterial2);this.upgrade_bg.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.btn_upgrade.on(Laya.Event.CLICK,this,this.sendUpgradeOK);Laya.stage.on("drawUpgrade",this,this.drawUpgrade);Laya.stage.on("upgradeOK",this,this.upgradeOK);Laya.stage.on("upgradeFaild",this,this.upgradeFaild)};b.sendUpgradeOK=function(){var a="";this.item&&(a+=this.item.s.Name+"/"+this.item.MakeIndex+"/");this.material1&&(a+=this.material1.s.Name+"/"+this.material1.MakeIndex+"/");this.material2&&(a+=this.material2.s.Name+"/"+this.material2.MakeIndex+"/");Sendmessage.sendUpgrade(a)};b.upgradeOK=function(a){this.clearBox();a&&(Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u88c5\u5907\u5347\u7ea7\u6210\u529f\uff01",callfn:function(){}}]),GameUtil.AddItemNewBag(a))};b.upgradeFaild=function(a,b){if(a){if(0==a.record){if(this.clearBox(),1==a.series){var c=fnDecode6BitBuf(b,b.length,!1);(c=TClientItem(c.pszDest))&&GameUtil.AddItemNewBag(c)}}else-7==a.record&&(this.material2=this.material1=null,this.material1_img.visible=!1,this.material1_txt.visible=!0,this.material2_img.visible=!1,this.material2_txt.visible=!0);switch(a.record){case 0:1==a.series?Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u88c5\u5907\u5347\u7ea7\u5931\u8d25,\u88c5\u5907\u5df2\u7834\u788e\uff01\uff01\uff01",callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u88c5\u5907\u5347\u7ea7\u5931\u8d25\uff01\uff01\uff01",callfn:function(){}}]);break;case -1:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u8bf7\u5728\u7b2c\u4e00\u4e2a\u683c\u5b50\u91cc\u653e\u5165\u60a8\u8981\u5347\u7ea7\u7684\u88c5\u5907\uff01\uff01\uff01",callfn:function(){}}]);break;case -2:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u8bf7\u5728\u7b2c\u4e8c\u4e2a\u683c\u5b50\u91cc\u653e\u5165\u5347\u7ea7\u5b9d\u77f3\uff01\uff01\uff01",callfn:function(){}}]);break;case -3:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u8be5\u88c5\u5907\u7981\u6b62\u5347\u7ea7\uff01\uff01\uff01",callfn:function(){}}]);break;case -4:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u8be5\u88c5\u5907\u65e0\u6cd5\u5347\u7ea7\uff01\uff01\uff01",callfn:function(){}}]);break;case -5:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u7b2c\u4e8c\u4e2a\u683c\u5b50\u653e\u7684\u4e0d\u662f\u5347\u7ea7\u5b9d\u77f3\uff01\uff01\uff01",callfn:function(){}}]);break;case -6:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u7b2c\u4e09\u4e2a\u683c\u5b50\u653e\u7684\u4e0d\u662f\u9644\u52a0\u5b9d\u77f3\uff01\uff01\uff01",callfn:function(){}}]);break;case -7:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u88c5\u5907\u5347\u7ea7\u5931\u8d25\uff01\uff01\uff01",callfn:function(){}}]);break;case -9:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u6ca1\u6709\u53ef\u4ee5\u9644\u52a0\u7684\u6280\u80fd\uff01\uff01\uff01",callfn:function(){}}]);break;case -11:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u6ca1\u6709\u6307\u5b9a\u6280\u80fd\uff01\uff01\uff01",callfn:function(){}}]);break;case -12:Laya.stage.event("show_alert_dlg",[{type:1,txt:"[\u5931\u8d25] \u88c5\u5907\u5347\u7ea7\u5df2\u7ecf\u8fbe\u5230\u6700\u5927\u6b21\u6570\uff01\uff01\uff01",callfn:function(){}}])}}};b.clearBox=function(){this.material2=this.material1=this.item=null;this.item_img.visible=!1;this.item_txt.visible=!0;this.material1_img.visible=!1;this.material1_txt.visible=!0;this.material2_img.visible=!1;this.material2_txt.visible=!0};b.setUpgradeItem=function(){if(this.item){var a=this.item;this.item=null;this.item_img.visible=!1;this.item_txt.visible=!0;GameUtil.AddItemNewBag(a)}else GameApi.ShowScreen(!0,null,14)};b.setmaterial1=function(){if(this.material1){var a=this.material1;this.material1=null;this.material1_img.visible=!1;this.material1_txt.visible=!0;GameUtil.AddItemNewBag(a)}else GameApi.ShowScreen(!0,null,15)};b.setmaterial2=function(){if(this.material2){var a=this.material2;this.material2=null;this.material2_img.visible=!1;this.material2_txt.visible=!0;GameUtil.AddItemNewBag(a)}else GameApi.ShowScreen(!0,null,16)};b.drawUpgrade=function(a){if(26==g_OpenIdx){var b=this.item_img,c=this.item_txt;this.item=a}else 27==g_OpenIdx?(b=this.material1_img,c=this.material1_txt,this.material1=a):28==g_OpenIdx&&(b=this.material2_img,c=this.material2_txt,this.material2=a);b&&(null==a?(b.visible=!1,c.visible=!0):(a=GameUtil.ParseNameFormat(a.s.Looks),b.skin=a,b.visible=!0,c.visible=!1,b.loadImage(a,0,0,0,0,Laya.Handler.create(this,function(){b.x=33-b.width/2;b.y=33-b.height/2}))))};b.close=function(){Laya.stage.off("drawUpgrade",this,this.drawUpgrade);Laya.stage.off("upgradeOK",this,this.upgradeOK);Laya.stage.off("upgradeFaild",this,this.upgradeFaild);if(this.item){var a=this.item;this.item=null;this.item_img.visible=!1;this.item_txt.visible=!0;GameUtil.AddItemNewBag(a)}this.material1&&(a=this.material1,this.material1=null,this.material1_img.visible=!1,this.material1_txt.visible=!0,GameUtil.AddItemNewBag(a));this.material2&&(a=this.material2,this.material2=null,this.material2_img.visible=!1,this.material2_txt.visible=!0,GameUtil.AddItemNewBag(a));this.removeSelf()};b.onMouseDown=function(b){a.x=b.stageX;a.y=b.stageY;this.upgrade_bg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.upgrade_bg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.upgrade_bg.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseUp=function(){this.upgrade_bg.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};b.onMouseMove=function(b){this.upgrade_bg.x+=b.stageX-a.x;this.upgrade_bg.y+=b.stageY-a.y;a.x=b.stageX;a.y=b.stageY};return c}(upgradeUI),ZhaomuScene=function(b){function c(){c.__super.call(this);this.init()}new Laya.Point(0,0);var a=0;Laya["class"](c,"ZhaomuScene",ZhaomuUI);c.prototype.init=function(){this.img_url=0;this.btn_close.on(Laya.Event.CLICK,this,this.close);this.ZhaomuWin.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.startpos=new Laya.Point;this.but_quxiao.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.but_xiougai.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.but_fabu.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.but_zhaomu.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.check_dangq.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.check_all.on(Laya.Event.CLICK,this,this.but_zhaomuClick);this.check_hh.on(Laya.Event.CLICK,this,this.but_zhaomuClick);"0"==g_Zmu_Quyu&&(this.check_dangq.selected=!0,this.check_hh.selected=!1,this.check_all.selected=!1);"2"==g_Zmu_Quyu&&(this.check_dangq.selected=!1,this.check_hh.selected=!0,this.check_all.selected=!1);"3"==g_Zmu_Quyu&&(this.check_dangq.selected=!1,this.check_hh.selected=!1,this.check_all.selected=!0);this.txt_lvmin.text=g_Zmu_MinLv;this.txt_lvmax.text=g_Zmu_MaxLv;this.txt_zmemo.text=g_Zmu_Memo};c.prototype.but_zhaomuClick=function(b){var c=b.target.name;"check_dangq"==c?(this.check_dangq.selected=!0,this.check_hh.selected=!1,this.check_all.selected=!1):"check_all"==c?(this.check_all.selected=!0,this.check_dangq.selected=!1,this.check_hh.selected=!1):"check_hh"==c&&(this.check_hh.selected=!0,this.check_dangq.selected=!1,this.check_all.selected=!1);this.check_dangq.selected&&(g_Zmu_Quyu="0");this.check_all.selected&&(g_Zmu_Quyu="3");this.check_hh.selected&&(g_Zmu_Quyu="2");g_Zmu_MinLv=this.txt_lvmin.text;g_Zmu_MaxLv=this.txt_lvmax.text;g_Zmu_Memo=this.txt_zmemo.text;"but_quxiao"==c?(g_Zmu_MinLv="0",g_Zmu_MaxLv="55",g_Zmu_Type="0",g_Zmu_Memo="",g_Zmu_Type="3",this.sendmsg=g_Zmu_MinLv+" "+g_Zmu_MaxLv+" "+g_Zmu_Type+" "+g_Zmu_Quyu+" "+g_Zmu_Memo,Sendmessage.SendzhaomuMsg(this.sendmsg),this.removeSelf()):"but_xiougai"==c?(g_Zmu_Type="2",this.sendmsg=g_Zmu_MinLv+" "+g_Zmu_MaxLv+" "+g_Zmu_Type+" "+g_Zmu_Quyu+" "+g_Zmu_Memo,Sendmessage.SendzhaomuMsg(this.sendmsg),this.removeSelf()):"but_fabu"==c?0>g_Zmu_MinLv?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u62db\u52df\u7b49\u7ea7\u4e0d\u80fd\u5c0f\u4e8e0"}]):0==a?(GameApi.onHitText(this,b.target.x+b.target.width,b.target.y,["\u53d1\u5e03\u62db\u52df\u4fe1\u606f\u6bcf\u6b215W\u91d1\u5e01"]),a++):(a=0,g_Zmu_Type="1",this.sendmsg=g_Zmu_MinLv+" "+g_Zmu_MaxLv+" "+g_Zmu_Type+" "+g_Zmu_Quyu+" "+g_Zmu_Memo,Sendmessage.SendzhaomuMsg(this.sendmsg),this.removeSelf()):"but_zhaomu"==c&&(0>g_Zmu_MinLv?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u62db\u52df\u7b49\u7ea7\u4e0d\u80fd\u5c0f\u4e8e0"}]):(g_Zmu_Type="0",this.sendmsg=g_Zmu_MinLv+" "+g_Zmu_MaxLv+" "+g_Zmu_Type+" "+g_Zmu_Quyu+" "+g_Zmu_Memo,Sendmessage.SendzhaomuMsg(this.sendmsg),this.removeSelf()))};c.prototype.onMouseDown=function(a){this.startpos.x=a.stageX;this.startpos.y=a.stageY;this.ZhaomuWin.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.ZhaomuWin.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.ZhaomuWin.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseUp=function(){this.ZhaomuWin.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.prototype.onMouseMove=function(a){this.ZhaomuWin.x+=a.stageX-this.startpos.x;this.ZhaomuWin.y+=a.stageY-this.startpos.y;this.startpos.x=a.stageX;this.startpos.y=a.stageY};c.prototype.close=function(){this.removeSelf()};return c}(ZhaomuUI),Astart=function(){function b(){this.cost_stargiht=1;this._open=[];this._close=[];this.path_data=[];this.gridsSet=[];this.grids=this.cur_matx=null}b.prototype.setMapData=function(b,a){this.finder=new PathFinding.finders.AStarFinder({allowDiagonal:!0});a&&(this.cur_id=b,this.cur_matx=a,this.maxX=this.cur_matx[0].length,this.maxY=this.cur_matx.length,this.path_data[b]={matrix:a},rockerlock=Actionlock=!1);this.setGrids(b)};b.prototype.setGrids=function(b){if(!this.gridsSet["_aspecialmatrix-_-!"]){for(var a=[],d=0;1E3>d;d++){a[d]=[];for(var e=0;1E3>e;e++)a[d][e]=0}this.gridsSet["_aspecialmatrix-_-!"]=new PathFinding.core.Grid(1E3,1E3,a);this.finder.findPath(50,50,500,500,this.gridsSet["_aspecialmatrix-_-!"]);this.ResetGrid(this.gridsSet["_aspecialmatrix-_-!"],a)}b&&!this.gridsSet[b]&&(this.gridsSet[b]=new PathFinding.core.Grid(this.maxX,this.maxY,this.cur_matx));this.grids=this.gridsSet[b]};b.prototype.ResetGrid=function(b,a){for(var d,e=b.height,g=b.width,f=0;f<e;++f)for(var h=0;h<g;++h)d=b.nodes[f][h],d.g=0,d.f=0,d.h=0,d.by=0,d.parent=null,d.opened=null,d.closed=null,d.tested=null,d.walkable=!0,d.walkable=a[f][h]?!1:!0};b.prototype.obsdata=function(b){this.finder=new PathFinding.finders.AStarFinder({allowDiagonal:!0});this.cur_id=b;if(null==this.path_data[b])this.initpath(b);else if(this.cur_matx=this.path_data[b].matrix)this.maxX=this.cur_matx[0].length,this.maxY=this.cur_matx.length,this.setGrids(b),rockerlock=Actionlock=!1};b.prototype.creategrid=function(b){matrix&&this.maxY<=matrix.length&&b==Mapmodule.sceneid&&(console.log("------------------------creategrid----------------------------------\x3e",this.cur_id,matrix.length),this.cur_matx=matrix,this.path_data[this.cur_id]=[],this.path_data[this.cur_id].matrix=matrix,this.setGrids(this.cur_id))};b.prototype.initpath=function(b){var a=this,d=user_site+"data/mapdata/matrix/"+b+"matrix.js",e=Laya.Browser.document.createElement("script");e.src=d;e.setAttribute("type","text/javascript");e.setAttribute("src",d);e.onload=function(){matrix&&a.cur_id==b&&(a.maxX=matrix[0].length,a.maxY=matrix.length,rockerlock=Actionlock=!1,a.creategrid(b))};e.onerror=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5730\u56fe\u6587\u4ef6\u52a0\u8f7d\u9519\u8bef\uff01"+b,callfn:function(){}}])};Laya.Browser.document.getElementsByTagName("head")[0].appendChild(e)};b.prototype.findpath=function(b,a){if(null==this.path_data[this.cur_id])return null;for(var d=0;d<ObjectManage.object_list.length;++d){var e=ObjectManage.object_list[d];(!e.data||e.data.record!=lockingID&&e.data.record!=playerID)&&(1==e.type||2==e.type||3==e.type)&&e.grid.x<this.grids.width&&e.grid.y<this.grids.height&&this.grids.setWalkableAt(e.grid.x,e.grid.y,!1)}d=this.finder.findPath(b.x,b.y,a.x,a.y,this.grids);this.ResetGrid(this.grids,this.cur_matx);return d};b.prototype.getmoveable=function(b,a){if(null==this.path_data[this.cur_id]||null==this.path_data[this.cur_id].matrix)return!1;for(var d=!1,e=0;e<ObjectManage.object_list.length;++e){var g=ObjectManage.object_list[e];if(!(g.data&&g.data.record==playerID||b==this.end.x&&a==this.end.y||g.is_die||g.grid.x!=b||g.grid.y!=a||1!=g.type&&2!=g.type&&3!=g.type)){d=!0;break}}if((e=this.path_data[this.cur_id].matrix)&&e[0]&&a<e.length&&b<e[0].length)return 0==e[a][b]&&!d};b.prototype.createnode=function(b,a){var d=[];d.x=b;d.y=a;d.g=0;d.h=0;d.f=0;d.moveable=this.getmoveable(b,a);d.father=[];return d};b.prototype.calculateH=function(b,a){return(new Laya.Point(b.x,b.y)).distance(a.x,a.y)};b.prototype.isclose=function(b){for(var a=0;a<this._close.length;++a)if(this._close[a].x==b.x&&this._close[a].y==b.y)return!0;return!1};b.prototype.isopen=function(b){for(var a=0;a<this._open.length;++a)if(this._open[a].x==b.x&&this._open[a].y==b.y)return!0;return!1};b.prototype.getpointdir=function(b){var a=[];0<b.y&&a.push(this.createnode(b.x,b.y-1));0<b.y&&0<b.x&&a.push(this.createnode(b.x-1,b.y-1));0<b.y&&b.x<this.maxX&&a.push(this.createnode(b.x+1,b.y-1));b.y<this.maxY&&a.push(this.createnode(b.x,b.y+1));b.y<this.maxY&&0<b.x&&a.push(this.createnode(b.x-1,b.y+1));b.y<this.maxY&&b.x<this.maxX&&a.push(this.createnode(b.x+1,b.y+1));0<b.x&&a.push(this.createnode(b.x-1,b.y));b.y<this.maxX&&a.push(this.createnode(b.x+1,b.y));return a};b.prototype.find2path=function(b,a){for(var d=0;d<ObjectManage.object_list.length;++d){var e=ObjectManage.object_list[d];(!e.data||e.data.record!=lockingID&&e.data.record!=playerID)&&(1==e.type||2==e.type||3==e.type)&&e.grid.x<this.grids.width&&e.grid.y<this.grids.height&&this.grids.setWalkableAt(e.grid.x,e.grid.y,!1)}this._open=[];this._close=[];this.end=a;var g=this.createnode(b.x,b.y);g.g=0;g.h=this.calculateH(g,a);g.f=g.g+g.h;for(var f=0;g.x!=a.x||g.y!=a.y;){if(150==f++)return null;for(var h=this.getpointdir(g),d=0;d<h.length;++d)if(e=h[d],!this.isclose(e)&&e.moveable){var l=this.cost_stargiht+g.g,m=this.calculateH(e,a),n=l+m;if(this.isopen(e))for(var q=0;q<this._open.length;++q){var p=this._open[q];p.x==e.x&&p.y==e.y&&p.g>l&&(p.f=n,p.g=l,p.h=m,p.parent=g)}else e.g=l,e.h=m,e.f=n,e.father=g,this._open.push(e)}this._close.push(g);if(0==this._open.length)return 0;g=9999;for(d=e=0;d<this._open.length;++d)this._open[d].f<g&&(g=this._open[d].f,e=d);g=this._open[e];this._open.splice(e,1)}return g.father};return b}(),CodeUtil=function(){function b(){}b._MAKELONG=function(b,a){return b&65535|(a&65535)<<16};b._MAKEWORD=function(b,a){return b&255|(a&255)<<8};b._LOWORD=function(b){return b&65535};b._HIWORD=function(b){return b>>16&65535};b._LOBYTE=function(b){return b&255};b._HIBYTE=function(b){return b>>8&255};b.getEncodeSize=function(b){var a=0;b=4*b/3;return a=Math.floor(b)<b?Math.floor(b)+1:Math.floor(b)};b.getDecodeSize=function(b){return Math.floor(b-b/4)};b.getCodeMsgSize=function(b){var a=Math.floor(b);return a<b?a+1:a};b.getFeatureLen=function(b){return this.getCodeMsgSize(4*b/3)};b.str2Bytes=function(b){var a=0,d=b.length;if(0!=d%2)return null;for(var d=d/2,e=[],g=0;g<d;g++){var f=b.substr(a,2),f=parseInt(f,16);e.push(f);a+=2}return e};b.getKey=function(){return(Math.round(100*Math.random())%58<<24)+(Math.round(100*Math.random())%58<<16)+(Math.round(100*Math.random())%58<<8)+Math.round(100*Math.random())%58};b.getKeyValue=function(b){var a=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,60,61,62,64,91,92,93],d=0,e=0,g=0,d=(b&4278190080)>>>24,e=(b&16711680)>>>16,g=(b&65280)>>>8,f="";return f=String.fromCharCode(a[b&255])+String.fromCharCode(a[g])+String.fromCharCode(a[e])+String.fromCharCode(a[d])};return b}(),UISkillRock=function(b){function c(){c.__super.call(this);this.init()}Laya["class"](c,"UISkillRock",SkillRockUI);b=c.prototype;b.init=function(){this.click_pos=new Laya.Point;this.use_dis=this.cur_num=this.click_type=0;this.skill_list=[];this.curTouchid=null;this.curpos=new Laya.Point;this.num=8;this.rs=150;this.qiu_h=55;this.timelist=[];for(var a=0;8>a;a++)this.timelist[a]=0;this.cdlist=[];for(a=0;8>a;a++)this.cdlist[a]=0;this.nowtime=0;this.click_ok=!0;Laya.stage.on("add_magic",this,this.addskill);Laya.stage.on("remove_magic",this,this.delskill);Laya.stage.on("update_icon",this,this.update_icon);Laya.stage.on(Laya.Event.RESIZE,this,this.changeSize);Laya.stage.on("skillrocke",this,this.skillrocke);Laya.stage.on("delskillani",this,this.delskillani);Laya.stage.on("skillcd_ani",this,this.set_skillcd);this.skillBtn_arc.on(Laya.Event.MOUSE_DOWN,this,this.onmousedown);this.base.on(Laya.Event.MOUSE_DOWN,this,this.onmousedown);for(a=0;a<this.num;++a){var b=2*Math.PI/360*-30*(a-3),c=180+Math.sin(b)*this.rs-this.qiu_h/2,g=180-Math.cos(b)*this.rs-this.qiu_h/2,b=new Laya.Button,f=a;b.name=a;b.skin="gameres/ui/att_base.png";b.stateNum=2;b.width=57;b.height=57;b.pivot(b.width/2,b.height/2);b.pos(c+b.width/2,g+b.height/2);this.base.addChild(b);b.on(Laya.Event.CLICK,this,this.callskill);b.on(Laya.Event.MOUSE_OUT,this,this.SkillUp);b.on(Laya.Event.MOUSE_DOWN,this,this.SkillDown);b.on(Laya.Event.MOUSE_UP,this,this.SkillUp);this.skill_list.push(b);c=new Laya.Text;c.color="#ffffff";c.fontSize=20;c.text=f+1;c.pivotX=c.width/2;c.pivotY=c.height/2;c.name="lbl_name";c.x=b.width/2;c.y=b.height/2;b.addChild(c);c=new Laya.Sprite;c.size(57,57);c.pos(0,0);c.name="skillbtn_mask";new Laya.Sprite;c.alpha=.5;c.visible=!1;b.addChild(c);c.zOrder=2;b.labelSize=25;b.labelPadding="2,0,0,0";b.labelColors="#ffffff,#ffffff";b.labelStroke=2;b.labelStrokeColor="#000000"}this.base.rotation=-90;this.updateicon();this.changeSize()};b.changeSize=function(){};b.set_skillcd=function(a){this.cdlist[a]=Skillmodule.checklegal(g_SetupMagicList[a].Def.btEffect,g_SetupMagicList[a].Def.wMagicId)/1E3;0!=this.cdlist[a]&&this.skill_list[a]&&(this.timelist[a]=Laya.Browser.now(),this.skill_list[a].getChildByName("skillbtn_mask").visible=!0,Laya.timer.frameLoop(1,this,this.skillcd_timer))};b.skillcd_timer=function(){var a=8;this.nowtime=Laya.Browser.now();for(var b=0;8>b;b++){var c=(this.nowtime-this.timelist[b])/(1E3*this.cdlist[b]);if(this.timelist[b]&&1>c){var g=360*c,f=this.skill_list[b].getChildByName("skillbtn_mask");f.graphics.clear();f.graphics.drawPie(28.5,28.5,28.5,-90+g,270,"#7f7f7f");1<=(this.cdlist[b]*(1-c)).toFixed(1)&&(this.skill_list[b].label=(this.cdlist[b]*(1-c)).toFixed(0))}else this.skill_list[b].getChildByName("skillbtn_mask").visible=!1,this.skill_list[b].label="",this.timelist[b]=0,--a}0==a&&Laya.timer.clear(this,this.skillcd_timer)};b.callskill=function(a){if(10<this.use_dis)this.use_dis=0;else if(a=this.skill_list[a.target.name])if(null==a.getChildByName("btn_skill"))GameUtil.ShowNewLogo(!0,1,a.name);else{var b=null,b=parseInt(a.name);if(null!=g_SetupMagicList[b]){var b=g_SetupMagicList[b],c=ObjectManage.findobject(playerID);if(b&&c){if(1E3<=b.Def.wMagicId&&1500>=b.Def.wMagicId)var g=Skillmodule.findCustomSkill(b.Def.wMagicId,b.Level);GameUtil.israngeskill(b.Def.btEffect)||g&&g.boFiyFried?activate_ok&&activate_ok.Def.btEffect==b.Def.btEffect&&activate_ok.Def.wMagicId==b.Def.wMagicId?(activate_ok=null,Laya.stage.event("show_log",[{txt:"\u6280\u80fd\u5df2\u53d6\u6d88\uff01",color:"#ff0000"}]),Animationmodule.removeAniname("skilllockani")):(Laya.stage.event("show_log",[{txt:"\u70b9\u51fb\u9009\u62e9\u91ca\u653e\u7684\u533a\u57df\uff01",color:"#ff0000"}]),activate_ok=b,Animationmodule.removeAniname("skilllockani"),this.rangeskillani(a)):GameUtil.JudgeMagicMp(b,c)?(Objectcontrol.useskill(b.Def.btEffect,b.Def.wMagicId,null,b.Level),activate_skilluse=b.Def.btEffect,activate_skilltype=b.Def.wMagicId):Laya.stage.event("show_log",[{txt:"\u9b54\u6cd5\u4e0d\u8db3",color:"#ff0000"}])}}g=new Laya.Point(a.width/2,a.height/2);Animationmodule.playframe(!1,a,"gameres/animation/skill/",1,8,50,!1,!0,g)}};b.SkillDown=function(a){Laya.Tween.to(a.target,{scaleX:.8,scaleY:.8},100,null)};b.SkillUp=function(a){Laya.Tween.to(a.target,{scaleX:1,scaleY:1},200,null)};b.SkillOut=function(a){this.skill_list[a.target.name].scale(1,1)};b.onmousedown=function(a){this.curTouchid=a.touchId;this.base.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&(this.click_type=1,this.click_pos.x=this.mouseX,this.click_pos.y=this.mouseY,this.click_ok=!0,this.use_dis=0,this.curpos.x=Laya.stage.mouseX,this.curpos.y=Laya.stage.mouseY);this.curbase_rotation=this.base.rotation;Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onmouseup);Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onmousemove);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onmouseup)};b.onmousemove=function(a){if(!(a&&a.touchId&&a.touchId!=this.curTouchid||1!=this.click_type)){this.angle=Math.atan2(this.mouseX-this.click_pos.x,this.mouseY-this.click_pos.y);this.use_dis=this.click_pos.distance(this.mouseX,this.mouseY);if(10<this.use_dis){a=Math.atan((Laya.stage.mouseY-this.y-180)/(Laya.stage.mouseX-this.x-180));var b=Math.atan((this.curpos.y-this.y-180)/(this.curpos.x-this.x-180));0>a&&(a+=Math.PI);0>b&&(b+=Math.PI);this.currotation=this.curbase_rotation+180/Math.PI*(a-b);-90<this.currotation&&30>this.currotation&&(this.base.rotation=this.currotation)}this.updateicon()}};b.onmouseup=function(a){a&&a.touchId&&a.touchId!=this.curTouchid||(this.base.rotation=this.curbase_rotation,this.click_type=0,this.click_ok&&60<this.use_dis&&(0<this.angle?this.base.rotation+=120:this.base.rotation-=120,0<this.angle?g_rotation+=1:--g_rotation,-90>this.base.rotation&&(this.base.rotation=-90),30<this.base.rotation&&(this.base.rotation=30),this.click_ok=!1,2<g_rotation||-2>g_rotation)&&(g_rotation=0),this.updateicon(),Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onmousemove),Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onmouseup),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onmouseup))};b.addskill=function(a,b){12<b&&(b=12);var c=this.skill_list[b];if(null!=c){var g=a.Def.btEffect;38==a.Def.wMagicId&&(g=4);46==a.Def.wMagicId&&(g=42);39==a.Def.wMagicId&&(g=0);var f=GameUtil.ParseMagicResName(2*g),h=this;if(null==c.getChildByName("btn_skill")){var l=new Laya.Button;l.mouseEnabled=!1;Laya.loader.load(f,Laya.Handler.create(this,function(){l.skin=f;l.name="btn_skill";l.width=57;l.height=57;l.pivotX=l.width/2;l.pivotY=l.height/2;l.x=c.width/2;l.y=c.height/2;l.stateNum=2;h.updateicon()}),null,Laya.Loader.IMAGE);c.addChild(l)}else g=c.getChildByName("btn_skill"),Laya.loader.load(f,Laya.Handler.create(this,function(a){a.skin=f;h.updateicon()},[g]),null,Laya.Loader.IMAGE)}};b.delskill=function(a){if(this.skill_list[a]){var b=this.skill_list[a].getChildByName("btn_skill");this.skill_list[a].getChildByName("skilllockani")&&(Animationmodule.removeAniname("skilllockani"),activate_ok=null);b&&b.removeSelf()}};b.updateicon=function(){for(var a=0;a<this.skill_list.length;++a){var b=this.skill_list[a];b&&(b.rotation=-this.base.rotation)}};b.update_icon=function(a){if(12!=a)if(a||0==a)this.addskill(g_SetupMagicList[a],a),g_SetupMagicList[a]==activate_ok&&this.rangeskillani(this.skill_list[a]);else for(a=0;a<this.skill_list.length;a++){var b=parseInt(this.skill_list[a].name);null!=g_SetupMagicList[b]?this.addskill(g_SetupMagicList[b],b):this.delskill(b)}};b.skillrocke=function(a){var b=new Laya.Point(this.base._childs[a].width/2,this.base._childs[a].height/2);Animationmodule.playframe(!1,this.base._childs[a],"gameres/animation/skill/",1,8,50,!1,!0,b)};b.delskillani=function(){for(var a=0;a<this.skill_list.length;a++)this.skill_list[a].getChildByName("skilllockani")&&(activate_ok=null,Laya.stage.event("show_log",[{txt:"\u6280\u80fd\u5df2\u53d6\u6d88\uff01",color:"#ff0000"}]),Animationmodule.removeAniname("skilllockani"))};b.rangeskillani=function(a){a&&(a=Animationmodule.playframe(!1,a,"gameres/animation/mouse_click/",41,52,100,!0,!1),a.name="skilllockani",a.scale(.66,.66),a.pos(-12,-14))};return c}(SkillRockUI),GameApi=function(){function b(){}b.ShowScreen=function(b,a,d,e){var g=GameUtil.InstanceOfMem(ScreenWUI);b?(g||(g=new ScreenWin,Laya.stage.addChild(g)),g.SearchItems(a,d,e)):g&&g.removeSelf();g._zOrder=999};b.ShowDrug=function(b){var a=GameUtil.InstanceOfMem(DrugSetupUI);b?a||(a=new DrugSetup,Laya.stage.addChild(a)):a&&a.removeSelf()};b.Drugnullforidx=function(b){for(var a=!1,d=0;d<g_BagItemsList.length;d++)g_BagItemsList[d]&&g_BagItemsList[d].s.Name==b&&(a=!0);if(!a)for(d=0;d<g_DrugItemsList.length;d++)if(null!=g_DrugItemsList[d]&&g_DrugItemsList[d].s.Name==b){g_DrugItemsList[d]=null;Laya.stage.event("Drug_Item_ico");Laya.stage.event("ShowDrug_Items");g_DrugButNumber=d;break}};b.autounpack=function(b,a,d){function e(a){for(var b=0;b<g_BagItemsList.length;b++){var c=g_BagItemsList[b];if(c&&""!=a&&c.s.Name==a)return c}return null}for(var g=d=0;g<g_BagItemsList.length;++g){var f=g_BagItemsList[g];f&&f.s.Name==a&&d++}if(d<=b&&g_unpackList[a])if(b=g_unpackList[a],-1!=b.indexOf("|"))for(b=b.split("|"),a=0;a<b.length;a++){if((d=e(b[a]))&&CanUserItem)return g_WaitItems.Items=d,GameUtil.DelBagItems(d.MakeIndex),Sendmessage.sendEat(0,d.MakeIndex,d.s.Name),!0}else if((d=e(b))&&CanUserItem)return g_WaitItems.Items=d,GameUtil.DelBagItems(d.MakeIndex),Sendmessage.sendEat(0,d.MakeIndex,d.s.Name),!0;return!1};b.heroAutounpack=function(b,a,d){function e(a){for(var b=0;b<g_HeroBagItemsList.length;b++){var c=g_HeroBagItemsList[b];if(c&&""!=a&&c.s.Name==a)return c}return null}for(var g=d=0;g<g_HeroBagItemsList.length;++g){var f=g_HeroBagItemsList[g];f&&f.s.Name==a&&d++}if(d<=b&&g_unpackList[a])if(b=g_unpackList[a],-1!=b.indexOf("|"))for(b=b.split("|"),a=0;a<b.length;a++){if(d=e(b[a]))return g_WaitItems.Items=d,GameUtil.DelHeroBagItems(d.MakeIndex),Sendmessage.heroEat(d.MakeIndex,d.s.Name),!0}else if(d=e(b))return g_WaitItems.Items=d,GameUtil.DelHeroBagItems(d.MakeIndex),Sendmessage.heroEat(d.MakeIndex,d.s.Name),!0;return!1};b.autofillrule=function(b,a,d){d=[];for(var e=0;e<g_BagItemsList.length;++e){var g=g_BagItemsList[e];if(g&&31!=g.s.StdMode&&g.s.StdMode==b&&g.s.Looks==a){for(var f=!0,h=0;h<g_DrugItemsList.length;++h)if(g_DrugItemsList[h]&&g_DrugItemsList[h].s.Name==g.s.Name){f=!1;break}if(f){d=g;break}}}return d};b.autofillitem=function(c){g_DrugItemsList[g_DrugButNumber]=c;Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("ShowDrug_Items");Laya.stage.event("Drug_Item_ico");Laya.stage.event("Drug_Set_Items",[g_DrugButNumber]);b.ShowScreen(!1);Laya.stage.event("Show_Bag_Item_ico")};b.ShowNewNpcShop=function(b){var a=GameUtil.InstanceOfMem(NewNpcShopUI);b?a||(a=new NewNpcShop,Laya.stage.addChild(a)):a&&a.removeSelf();b=GameUtil.InstanceOfMem(NewNpcWinUI);GameUtil.InstanceOfMem(NewNpcShopUI)&&b&&b.close()};b.ShowNewSaleShop=function(b){var a=GameUtil.InstanceOfMem(NewSaleShopUI);b?a||(a=new NewSaleShop,Laya.stage.addChild(a)):a&&a.removeSelf();b=GameUtil.InstanceOfMem(NewNpcWinUI);GameUtil.InstanceOfMem(NewSaleShopUI)&&b&&b.close()};b.UpdateBagItemsDura=function(b,a,d){for(var e=0;e<g_BagItemsList.length;e++)null!=g_BagItemsList[e]&&g_BagItemsList[e].MakeIndex==b&&(g_BagItemsList[e].Dura=a,g_BagItemsList[e].DuraMax=d,console.log("UpdateBagItemsDura",g_BagItemsList[e].s.Name),Laya.stage.event("Screen_Uptade_Items"))};b.fillitem=function(c,a,d){for(var e=null,g=0;g<g_BagItemsList.length;g++){var f=g_BagItemsList[g];if(null!=f){var h=!0;switch(d){case 1:h=0<f.s.AC;break;case 2:h=0<f.s.MAC;break;case 3:h=-1!=f.s.Name.indexOf("\u4f20\u9001")||-1!=f.s.Name.indexOf("\u56de\u57ce")}f.s.StdMode<=c&&f.s.AniCount>=a&&h&&-1==g_DrugItemsList.indexOf(f)&&(e=f)}}e&&b.autofillitem(e)};b.initdrugtobag=function(){var b=Laya.LocalStorage.getItem("druglist");if(null!=b){for(var b=JSON.parse(b),a=0;a<b.length;++a)if(g_DrugButNumber=a,null!=b[a].mode&&null!=b[a].looks){var d=this.autofillrule(b[a].mode,b[a].looks);0!=d.length&&this.autofillitem(d)}g_DrugButNumber=-1}};b.Showskillwin=function(b){var a=GameUtil.InstanceOfMem(skillwinUI);b?a||(a=new skillwin,Laya.stage.addChild(a)):a&&a.removeSelf()};b.SetSkillKey=function(b,a){if(0<=a)for(var d=0;d<g_UserMagicList.length;d++)if(g_UserMagicList[d].Def.wMagicId==b){g_UserMagicList[d].Key=a;Sendmessage.SendMagicKey(g_UserMagicList[d].Def.wMagicId,a);break}};b.GetMagicDes=function(b){for(var a=0;a<skilldesclist.length;a++)if(-1!=skilldesclist[a].indexOf(b))return skilldesclist[a]};b.ShowLookHum=function(b,a){lookHumData=a;var d=GameUtil.InstanceOfMem(LookHumUI);b?(d||(d=new LookHum,Laya.stage.addChild(d)),d.ShowHum(a)):d&&d.removeSelf()};b.ShowMyShop=function(b,a){var d=GameUtil.InstanceOfMem(NewMyShopUI);b?d||(d=new MyShop,Laya.stage.addChild(d)):d&&d.removeSelf()};b.ShowMyShopMsg=function(b){var a=GameUtil.InstanceOfMem(MyShopMsgUI);b?a||(a=new MyShopMsg,Laya.stage.addChild(a)):a&&a.removeSelf()};b.AddMyShopItems=function(b){if(null!=b.Items)for(var a=0;a<g_MyShopList.length;a++)if(null==g_MyShopList[a]){var d={};d.Items=b.Items;d.Index=b.Index;d.nGold=b.nGold;d.nType=b.nType;g_MyShopList[a]=d;g_WaitItems.Items=null;break}};b.LookHumShop=function(b){var a=GameUtil.InstanceOfMem(LooksShopUI);b?a?a.initlist():(a=new LookShop,Laya.stage.addChild(a)):a&&a.removeSelf()};b.DelLookShopItems=function(b){for(var a=0;20>a;a++)if(G_BaiTanData.Item[a].MakeIndex==b){G_BaiTanData.Item[a].MakeIndex=0;Laya.stage.event("Update_Look_S_List");break}};b.DelMyShopItems=function(b){for(var a=0;20>a;a++)if(null!=g_MyShopList[a]&&g_MyShopList[a].Items.MakeIndex==b){g_MyShopList[a]=null;Laya.stage.event("Update_Shop_List");break}};b.StopMyShop=function(){for(var b=0;b<g_MyShopList.length;b++)null!=g_MyShopList[b]&&(GameUtil.AddItemNewBag(g_MyShopList[b].Items),g_MyShopList[b]=null)};b.ShowJiaoYi=function(b){var a=GameUtil.InstanceOfMem(JiaoYiWinUI);b?a||(a=new JiaoYiWin,Laya.stage.addChild(a)):a&&((b=GameUtil.InstanceOfMem(NewItemInfoUI))&&b.removeSelf(),g_OpenJiaoYi=!1,a.removeSelf())};b.AddJiaoYiItems=function(b){for(var a=!0,d=0;d<g_MyJiaoYiList.length;d++)if(null==g_MyJiaoYiList[d]){g_MyJiaoYiList[d]=b;Laya.stage.event("Update_Me_List_Refresh");a=!1;break}return a};b.DelJiaoYiItems=function(b){for(var a=0;a<g_MyJiaoYiList.length;a++)if(null!=g_MyJiaoYiList[a]&&g_MyJiaoYiList[a].MakeIndex==b){g_MyJiaoYiList[a]=null;Laya.stage.event("Update_Me_List_Refresh");break}};b.CloseJiaoYi=function(){for(var b=0;b<g_MyJiaoYiList.length;b++)null!=g_MyJiaoYiList[b]&&(GameUtil.AddItemNewBag(g_MyJiaoYiList[b]),g_MyJiaoYiList[b]=null)};b.AddHumJiaoYiItems=function(b){if(null!=b)for(var a=0;a<g_HumJiaoYiList.length;a++)if(null==g_HumJiaoYiList[a]){g_HumJiaoYiList[a]=b;Laya.stage.event("Update_Hum_List_Refresh");break}};b.DelHumJiaoYiItems=function(b){for(var a=0;a<g_HumJiaoYiList.length;a++)if(null!=g_HumJiaoYiList[a]&&g_HumJiaoYiList[a].MakeIndex==b){g_HumJiaoYiList[a]=null;Laya.stage.event("Update_Hum_List_Refresh");break}};b.GetUseItemLJ=function(b,a,d,e,g,f,h){var l=a,l=b;a=null;var m=[],n=[];null==lookHumData?a=g_UserItemList:f?a=lookHumData.UseItems:a=g_UserItemList;if(h){e=e.split("~\x26");for(b=0;b<e.length-1;b++)l=e[b].split("~#")[1],n.push(l);for(d=1;d<n.length;d+=2){e=Get2RGB(249);b=n[d];for(l=0;l<a.length;l++)if(a[l]&&b==a[l].s.Name&&-1==m.indexOf(a[l].MakeIndex)){m.push(a[l].MakeIndex);e=Get2RGB(n[d-1]);break}g.push(b+"/*/"+e)}}else if(1==d){for(m=0;m<a.length;m++)if(a[m]&&b==a[m].s.Name){l+="/*/"+Get2RGB(254);break}g.push(l)}else for(b=0;b<e.length-1;b++){d=e[b];n=d.split("~#");l=n[1];for(d=0;d<a.length;d++)if(a[d]&&n[1]==a[d].s.Name&&-1==m.indexOf(a[d].MakeIndex)){m.push(a[d].MakeIndex);l+="/*/"+Get2RGB(254);break}g.push(l)}};b.GomUseItemCnt=function(b,a){var d=0;if(b){var e=b.split("|"),g=null;null==lookHumData?g=g_UserItemList:a?g=lookHumData.UseItems:g=g_UserItemList;for(var f=0;f<g.length;f++)if(null!=g[f]){var h;a:{h=g[f].s.Name;for(var l=0;l<e.length;l++)if(e[l]&&-1!=e[l].indexOf("/")&&e[l].split("/")[1]==h){h=!0;break a}h=!1}h&&d++}}return d};b.GetUseItemCnt=function(b,a,d){var e=0,g=null,f=[];null==lookHumData?g=g_UserItemList:a?g=lookHumData.UseItems:g=g_UserItemList;if(d)for(b=b.split("~\x26"),a=1;a<b.length-1;a+=2){d=b[a].split("~#")[1];for(var h=0;h<g.length;h++)if(g[h]&&d==g[h].s.Name&&-1==f.indexOf(g[h].MakeIndex)){f.push(g[h].MakeIndex);e++;break}}else for(a=0;a<b.length-1;++a)for(d=b[a].split("~#")[1],h=0;h<g.length;h++)if(null!=g[h]&&d==g[h].s.Name&&-1==f.indexOf(g[h].MakeIndex)){f.push(g[h].MakeIndex);e++;break}return e};b.GetUseItemCntByName=function(b,a){var d=null;null==lookHumData?d=g_UserItemList:a?d=lookHumData.UseItems:d=g_UserItemList;for(var e=0;e<d.length;++e)if(null!=d[e]&&d[e].s.Name==b)return!0;return!1};b.setItemBlendMode=function(b,a){};b.AllItemListSelectItem=function(b){for(var a=0;a<AllItemList.length;a++)if(AllItemList[a].itemname==b)return AllItemList[a];return null};b.GetGlobalCfg=function(b){return GlobalCfglist[b]};b.setLocalData=function(b,a){for(var d=0;d<b.length;d++){var e=b[d];e&&a[d]&&(void 0!=e.isshow&&(e.isshow=a[d][0]),void 0!=e.ispickup&&(e.ispickup=a[d][1]),void 0!=e.special&&(e.special=a[d][2]),void 0!=e.prompt&&(e.prompt=a[d][3]),void 0!=e.isExclude&&(e.isExclude=a[d][0]))}};b.initRoleSet=function(){var b=Laya.LocalStorage.getItem("username"),a=Laya.LocalStorage.getItem(b+g_playerName+"role_set_itemlist1");a&&(g_pickPlan1=a=JSON.parse(a));if(a=Laya.LocalStorage.getItem(b+g_playerName+"role_set_itemlist2"))g_pickPlan2=a=JSON.parse(a);if(a=Laya.LocalStorage.getItem(b+g_playerName+"role_set_monsterlist"))a=JSON.parse(a),this.setLocalData(AllMonsterList,a);null==g_serverconfigtxt.gamelist?this.setDefault():this.setDefaultWEB();(b=Laya.LocalStorage.getItem(b+g_playerName+"role_set_cfglist"))?(g_GameConfig&&GlobalCfglist.boUpdate?null==g_serverconfigtxt.gamelist?this.setDefault():this.setDefaultWEB():GlobalCfglist=JSON.parse(b),1==GlobalCfglist.pickPlan&&g_pickPlan1?this.setLocalData(AllItemList,g_pickPlan1):2==GlobalCfglist.pickPlan&&g_pickPlan2&&this.setLocalData(AllItemList,g_pickPlan2),Gameconfig.setItemlist(),Gameconfig.setMonsterList(),G_SHOW_ROLE_HP=GlobalCfglist.showhp,G_SHOW_EXP=GlobalCfglist.showExp,G_SHOW_NAME=GlobalCfglist.ShowName,G_SHOW_TITLE=GlobalCfglist.ShowTitle):(1==g_ClientConfig.boAutoCHangePoison&&(GlobalCfglist.d_autoskill_1="\u4e92\u6362"),GlobalCfglist.d_autoskill_7=30,GlobalCfglist.d_autoskill_8=30,GlobalCfglist.hppercentagetext=75,GlobalCfglist.hptimetext=5,GlobalCfglist.hp_vs=75,GlobalCfglist.hp_time=5,GlobalCfglist.hppercentagetextH=75,GlobalCfglist.hptimetextH=5,GlobalCfglist.hp_vsH=75,GlobalCfglist.hp_timeH=5,GlobalCfglist.mppercentagetext=30,GlobalCfglist.mptimetext=5,GlobalCfglist.mp_vs=30,GlobalCfglist.mp_time=5,GlobalCfglist.mppercentagetextH=30,GlobalCfglist.mptimetextH=5,GlobalCfglist.mp_vsH=30,GlobalCfglist.mp_timeH=5,GlobalCfglist.hppercentagetext1=30,GlobalCfglist.hptimetext1=1,GlobalCfglist.Hp_mp_vs=30,GlobalCfglist.hp_mp_time=1,GlobalCfglist.hppercentagetext2=50,GlobalCfglist.mptimetext1=1,GlobalCfglist.Hp_mp_vs2=50,GlobalCfglist.hp_mp_time2=1,GlobalCfglist.hppercentagetext1H=30,GlobalCfglist.hptimetext1H=1,GlobalCfglist.Hp_mp_vsH=30,GlobalCfglist.hp_mp_timeH=1,GlobalCfglist.hppercentagetext2H=50,GlobalCfglist.mptimetext1H=1,GlobalCfglist.Hp_mp_vs2H=50,GlobalCfglist.hp_mp_time2H=1,GlobalCfglist.tppercentagetext=15,GlobalCfglist.tptimetext=20,GlobalCfglist.tp_vs=15,GlobalCfglist.tp_time_vs=20,GlobalCfglist.tppercentagetext1=15,GlobalCfglist.tptimetext1=20,GlobalCfglist.tp_vs1=15,GlobalCfglist.tp_time_vs2=20,GlobalCfglist.tppercentagetextH=15,GlobalCfglist.tptimetextH=30,GlobalCfglist.tp_vsH=15,GlobalCfglist.tp_time_vsH=30,GlobalCfglist.itemtype=0,GlobalCfglist.pickPlan=1,GlobalCfglist.exercise_list="",GlobalCfglist.exercise_time=1,GlobalCfglist.exercise_slider=1,GlobalCfglist.single_fs_list="\u5927\u706b\u7403",GlobalCfglist.group_fs_list="\u7206\u88c2\u706b\u7130",GlobalCfglist.single_ds_list="\u7075\u9b42\u706b\u7b26",GlobalCfglist.group_ds_list="\u98d3\u98ce\u7834",GlobalCfglist.ds_summon_list="\u53ec\u5524\u9ab7\u9ac5",GlobalCfglist.ds_cure_list="\u6cbb\u6108\u672f",GlobalCfglist.exercise_ds_list="\u53ec\u5524\u795e\u517d",GlobalCfglist.ds_cure_limit=50,GlobalCfglist.ds_cure_time=3,GlobalCfglist.ds_limit_slider=50,GlobalCfglist.ds_time_slider=3,Gameconfig.setItemlist(),Gameconfig.setMonsterList());this.syncViewScale()};b.syncViewScale=function(){GlobalCfglist.viewScale&&(Mapmodule.root.scale(GlobalCfglist.viewScale/100,GlobalCfglist.viewScale/100),Mapmodule.onLocation())};b.syncDelayShow=function(){Laya.stage.event("syncDelayShow")};b.setDefault=function(){g_GameConfig&&(GlobalCfglist.backmusic=1==g_GameConfig.nYingYue,GlobalCfglist.clear=1==g_GameConfig.nShiTi,GlobalCfglist.nameshow1=1==g_GameConfig.nMonName,GlobalCfglist.nameshow2=1==g_GameConfig.nNpcName,GlobalCfglist.nameshow3=1==g_GameConfig.nShowName,GlobalCfglist.nameshow4=1==g_GameConfig.nBBName,GlobalCfglist.showhp=1==g_GameConfig.nXueTiao,GlobalCfglist.showExp=1==g_GameConfig.nShowExp,GlobalCfglist.ShowName=1==g_GameConfig.nOnlyName,GlobalCfglist.ShowTitle=1==g_GameConfig.nChenghao,GlobalCfglist.banCkilcMove=1==g_GameConfig.nJingZhiMov,GlobalCfglist.unpack=1==g_GameConfig.nAutoPack,GlobalCfglist.notLock=1==g_GameConfig.nJingZhiLock,GlobalCfglist.hidePlayer=1==g_GameConfig.nPingBiHum,GlobalCfglist.hideMonster=1==g_GameConfig.nPingBiMon,GlobalCfglist.heroeqsecure=1==g_GameConfig.nHeroDun,GlobalCfglist.z_autoskill_1=1==g_GameConfig.nDaoDaoCiSha,GlobalCfglist.z_autoskill_2=1==g_GameConfig.nAutoLieHuo,GlobalCfglist.z_autoskill_3=1==g_GameConfig.nBanYue,GlobalCfglist.z_autoskill_4=1==g_GameConfig.nAutoKaiTian,GlobalCfglist.zs_gwcs=1==g_GameConfig.nGeWeiCiSsha,GlobalCfglist.zs_lyjf=1==g_GameConfig.nAutoLongYing,GlobalCfglist.zs_zrjf=1==g_GameConfig.nAutoZhuRi,GlobalCfglist.d_autoskill_2=1==g_GameConfig.nChiXuYingShen,GlobalCfglist.d_autoskill_3=1==g_GameConfig.nAutoFu,GlobalCfglist.d_autoskill_4=1==g_GameConfig.nMyZiYu,GlobalCfglist.f_autoskill_1=1==g_GameConfig.nChiXuDun,GlobalCfglist.f_keepskill_1=1==g_GameConfig.nChixuShifa,GlobalCfglist.autohp=1==g_GameConfig.nAutoHP,GlobalCfglist.automp=1==g_GameConfig.nAutoMP,GlobalCfglist.autohp_mp=1==g_GameConfig.nShunAutoHP,GlobalCfglist.autohp_mp2=1==g_GameConfig.nShunAutoMP,GlobalCfglist.autotp=1==g_GameConfig.nChuanSongHP,GlobalCfglist.autotp1=1==g_GameConfig.nChuanSongMP,GlobalCfglist.exercise=1==g_GameConfig.nAutoLianGong,GlobalCfglist.autohpH=1==g_GameConfig.nHeroAutoHP,GlobalCfglist.autompH=1==g_GameConfig.nHeroAutoMP,GlobalCfglist.autohp_mpH=1==g_GameConfig.nHeroShunAutoHP,GlobalCfglist.autohp_mp2H=1==g_GameConfig.nHeroShunAutoMP,GlobalCfglist.autotpH=1==g_GameConfig.nHeroZhaoHui,GlobalCfglist.single_fs=1==g_GameConfig.nFaShiDanTi,GlobalCfglist.group_fs=1==g_GameConfig.nFaShiQunTi,GlobalCfglist.single_ds=1==g_GameConfig.nDaoShiDanTi,GlobalCfglist.ds_summon=1==g_GameConfig.nDaoShiBB,GlobalCfglist.ds_cure=1==g_GameConfig.nDaoShiZhiLiao,GlobalCfglist.poison_ds=1==g_GameConfig.nDaoShiShiDu,GlobalCfglist.group_ds=1==g_GameConfig.nDaoShiQunTi,GlobalCfglist.smooth=1==g_GameConfig.nSmooth,GlobalCfglist.showBlue=1==g_GameConfig.nHumShowBlue,GlobalCfglist.d_autoskill_5=1==g_GameConfig.nAutoMagicMo,GlobalCfglist.d_autoskill_6=1==g_GameConfig.nAutoMagicMFang,GlobalCfglist.auto_dodge=!0,GlobalCfglist.delayShow=!0,GlobalCfglist.humsimple=!1,GlobalCfglist.monsimple=!1,GlobalCfglist.weaponsimple=!1,GlobalCfglist.gameVoice=50)};b.setDefaultWEB=function(){g_GameConfig=g_GameConfigWEB.funActivity.gameConfig;null!=g_GameConfig&&(GlobalCfglist.backmusic=1==g_GameConfig.yingYue,GlobalCfglist.clear=1==g_GameConfig.shiTi,GlobalCfglist.nameshow1=1==g_GameConfig.monName,GlobalCfglist.nameshow2=1==g_GameConfig.npcName,GlobalCfglist.nameshow3=1==g_GameConfig.showName,GlobalCfglist.nameshow4=1==g_GameConfig.bbName,GlobalCfglist.showhp=1==g_GameConfig.xueTiao,GlobalCfglist.showExp=1==g_GameConfig.showExp,GlobalCfglist.ShowName=1==g_GameConfig.onlyName,GlobalCfglist.ShowTitle=1==g_GameConfig.chenghao,GlobalCfglist.banCkilcMove=1==g_GameConfig.jingZhiMov,GlobalCfglist.unpack=1==g_GameConfig.autoPack,GlobalCfglist.notLock=1==g_GameConfig.jingZhiLock,GlobalCfglist.hidePlayer=1==g_GameConfig.pingBiHum,GlobalCfglist.hideMonster=1==g_GameConfig.pingBiMon,GlobalCfglist.heroeqsecure=1==g_GameConfig.heroDun,GlobalCfglist.z_autoskill_1=1==g_GameConfig.daoDaoCiSha,GlobalCfglist.z_autoskill_2=1==g_GameConfig.autoLieHuo,GlobalCfglist.z_autoskill_3=1==g_GameConfig.banYue,GlobalCfglist.z_autoskill_4=1==g_GameConfig.autoKaiTian,GlobalCfglist.zs_gwcs=1==g_GameConfig.geWeiCiSsha,GlobalCfglist.zs_lyjf=1==g_GameConfig.autoLongYing,GlobalCfglist.zs_zrjf=1==g_GameConfig.autoZhuRi,GlobalCfglist.d_autoskill_2=1==g_GameConfig.chiXuYingShen,GlobalCfglist.d_autoskill_3=1==g_GameConfig.autoFu,GlobalCfglist.d_autoskill_4=1==g_GameConfig.myZiYu,GlobalCfglist.f_autoskill_1=1==g_GameConfig.chiXuDun,GlobalCfglist.f_keepskill_1=1==g_GameConfig.chixuShifa,GlobalCfglist.autohp=1==g_GameConfig.autoHP,GlobalCfglist.automp=1==g_GameConfig.autoMP,GlobalCfglist.autohp_mp=1==g_GameConfig.shunAutoHP,GlobalCfglist.autohp_mp2=1==g_GameConfig.shunAutoMP,GlobalCfglist.autotp=1==g_GameConfig.chuanSongHP,GlobalCfglist.autotp1=1==g_GameConfig.chuanSongMP,GlobalCfglist.exercise=1==g_GameConfig.autoLianGong,GlobalCfglist.autohpH=1==g_GameConfig.heroAutoHP,GlobalCfglist.autompH=1==g_GameConfig.heroAutoMP,GlobalCfglist.autohp_mpH=1==g_GameConfig.heroShunAutoHP,GlobalCfglist.autohp_mp2H=1==g_GameConfig.heroShunAutoMP,GlobalCfglist.autotpH=1==g_GameConfig.heroZhaoHui,GlobalCfglist.single_fs=1==g_GameConfig.faShiDanTi,GlobalCfglist.group_fs=1==g_GameConfig.faShiQunTi,GlobalCfglist.single_ds=1==g_GameConfig.daoShiDanTi,GlobalCfglist.ds_summon=1==g_GameConfig.daoShiBB,GlobalCfglist.ds_cure=1==g_GameConfig.daoShiZhiLiao,GlobalCfglist.poison_ds=1==g_GameConfig.daoShiShiDu,GlobalCfglist.group_ds=1==g_GameConfig.daoShiQunTi,GlobalCfglist.smooth=1==g_GameConfig.smooth,GlobalCfglist.showBlue=1==g_GameConfig.humShowBlue,GlobalCfglist.d_autoskill_5=1==g_GameConfig.autoMagicMo,GlobalCfglist.d_autoskill_6=1==g_GameConfig.autoMagicMFang,GlobalCfglist.auto_dodge=1==g_GameConfig.guaJiZiDongDuoBi,GlobalCfglist.delayShow=1==g_GameConfig.yanChiXianShi,GlobalCfglist.humsimple=1==g_GameConfig.renWuJianZhuang,GlobalCfglist.monsimple=1==g_GameConfig.guaiWuJianZhuang,GlobalCfglist.weaponsimple=1==g_GameConfig.wuQiJianZhuang,GlobalCfglist.pickItemsFirst=1==g_GameConfig.youXianShiQuWuPin,GlobalCfglist.gameVoice=g_GameConfig.youXiYinLiang+1,GlobalCfglist.viewScale=g_GameConfig.shiTuSuoFang,GlobalCfglist.doubleRocker=g_GameConfig.shuangYaoGan,GlobalCfglist.autoWear=g_GameConfig.autoWear,GlobalCfglist.boUpdate=g_GameConfig.update)};b.onHitText=function(b,a,d,e){var g=b.getChildByName("yangdaweigood");a=3;d=0;g_main_npcdialog=g=g?g:new Laya.Image;g_main_npcdialogopen=!0;g.removeChildren();g.visilbe=!0;g.name="yangdaweigood";g.skin="gameres/ui/buffkuang.png";g.sizeGrid="4,4,4,4";g.width=100;g.height=100;g.pos(0,30);b.addChild(g);for(var f=0;f<e.length;f++){if(""!=e[f]){if(-1!=e[f].indexOf("#"))var h=e[f].split("#"),l=Get2RGB(h[0]),h=h[1];else l="#ffffff",h=e[f];var m=new Laya.Text;m.fontSize=12;m.color=l;m.text=h;m.pos(3,a);m.width>d&&(d=m.width+7);g.addChild(m)}a+=16}g.pos(0,-20);b.but_fabu.addChild(g);g.width=d;g.height=20*e.length};b.GetBagIndexItems=function(b){for(var a=0;a<g_BagItemsList.length;a++)if(null!=g_BagItemsList[a]&&g_BagItemsList[a].MakeIndex==b)return g_BagItemsList[a]};b.Trim=function(b,a){var d;d=b.replace(/(^\s+)|(\s+$)/g,"");"g"==a.toLowerCase()&&(d=d.replace(/\s/g,""));return d};b.ShowLookShouS=function(b){var a=GameUtil.InstanceOfMem(LookShousUI);a||(a=new LookShous,Laya.stage.addChild(a));null!=b&&a.ShouShiShow(b)};b.ShowShouShi=function(b){var a=GameUtil.InstanceOfMem(ShousWinUI);a||(a=new ShousWin,Laya.stage.addChild(a));null!=b&&a.ShouShiShow(b)};b.ShoushiBox=function(b){var a=GameUtil.InstanceOfMem(ShoushiUI);a||(a=new ShoushiWin,Laya.stage.addChild(a));null!=b&&a.ShowShoushi(b)};b.LookShoushiBox=function(b){var a=GameUtil.InstanceOfMem(LookShoushiUI);a||(a=new LookShoushi,Laya.stage.addChild(a));null!=b&&a.ShowShoushi(b)};b.newcount=function(b){for(var a=0,d=!0,e=0;e<b.text.length;++e)" "==b.text[e]?a+=3:d=!1;return d?a:b.width};b.GetSpWidth=function(b){var a=0;b.replace(/ /g,function(b,c){a++});return 6*a-3*a};b.GetSpWidth2=function(b){for(var a=0,d=b.length,e=-1,g=0;g<d;g++)e=b.charCodeAt(g),a=0<=e&&128>=e?a+1:a+2;return 6*a};b.ShowNewNpcDlgEx=function(b){var a=GameUtil.InstanceOfMem(NewNpcWinUI);a||(a=new NewNpcWin,Laya.stage.addChild(a));a.SetVisible(b);GameUtil.InstanceOfMem(NewNpcShopUI)&&a&&a.close()};b.ShowNewNpcDlg=function(b){var a=GameUtil.InstanceOfMem(NewNpcWinUI),d=GameUtil.InstanceOfMem(NewNpcShopUI);!a&&b&&(a=new NewNpcWin,Laya.stage.addChild(a));d&&!b&&d.close();a&&!b&&a.close()};b.IntNewNpcDLG=function(b){(b=GameUtil.InstanceOfMem(NewNpcWinUI))&&b.intRes()};b.GetPakTo3Img=function(b,a){if(0<=b&&b<g_imgNpcPak.length){var d=g_imgNpcPak[b],e=(Array(5).join("0")+(0+a)).slice(-5);return"data/"+d+"/"+e+".png"}};b.GetPakTo2Img=function(b,a){if(0<=b&&b<g_pak_list.length)return"data/"+g_pak_list[b]+"/"};b.GetSelShopItemsByIndex=function(b){for(var a=0;20>a;a++)if(null!=G_BaiTanData&&null!=G_BaiTanData.Item[a]&&G_BaiTanData.Item[a].MakeIndex==b)return G_BaiTanData.Item[a]};b.IsOverLapItem=function(b){if(b)return""!=b.s.Name&&(17==b.s.StdMode||18==b.s.StdMode||40==b.s.StdMode||41==b.s.StdMode||(31==b.s.StdMode||211==b.s.StdMode)&&30==b.s.Shape&&0<b.s.Reserved1)};b.GetNewMagicLevelString=function(b){var a="\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e".split(""),d="",e=0;0<b&&(d="\u5f3a\u5316",100<=b?d+=a[0]+a[10]:10>b?d+=a[b-1]:(e=Math.floor(b/10),1!=e&&(d+=a[e-1]),d+=a[9],e=b%10,0<e&&(d+=a[e-1])),d+="\u91cd");return d};b.GetItemScore=function(b){var a=0,d=b.s;if(b&&d&&g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen){switch(d.StdMode){case 5:case 6:case 10:case 11:case 15:case 16:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 48:case 53:case 62:case 63:case 64:case 65:case 66:case 67:case 68:case 69:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 178:a=g_ItemScoreRecord.DC*d.DC+g_ItemScoreRecord.MaxDC*d.MaxDC+g_ItemScoreRecord.MC*d.MC+g_ItemScoreRecord.MaxMC*d.MaxMC+g_ItemScoreRecord.SC*d.SC+g_ItemScoreRecord.MaxSC*d.MaxSC+g_ItemScoreRecord.MaxHP*d.HP;switch(d.stdMode){case 19:a+=g_ItemScoreRecord.AntiMC*d.MaxAC;a+=g_ItemScoreRecord.Lucky*d.MaxMAC;break;case 20:case 24:a+=g_ItemScoreRecord.Preciseness*d.MaxAC;a+=g_ItemScoreRecord.Alacrity*d.MaxMAC;break;case 21:a+=g_ItemScoreRecord.HPRecover*d.MaxAC;a+=g_ItemScoreRecord.MPRecover*d.MaxMAC;break;case 23:a+=g_ItemScoreRecord.AckSpeed*d.AC;a+=g_ItemScoreRecord.AntiPoison*d.MaxAC;a+=g_ItemScoreRecord.PoisonRecover*d.MaxMAC;break;default:a+=g_ItemScoreRecord.AC*d.AC,a+=g_ItemScoreRecord.MaxAC*d.MaxAC,a+=g_ItemScoreRecord.MAC*d.MAC,a+=g_ItemScoreRecord.MaxMAC*d.MaxMAC}0<d.NewValue[0]&&(a+=d.NewValue[0]*g_ItemScoreRecord.Crit);0<d.NewValue[1]&&(a+=d.NewValue[1]*g_ItemScoreRecord.ADDHurt);0<d.NewValue[2]&&(a+=d.NewValue[2]*g_ItemScoreRecord.DecAC);0<d.NewValue[3]&&(a+=d.NewValue[3]*g_ItemScoreRecord.DecMAC);0<d.NewValue[4]&&(a+=d.NewValue[4]*g_ItemScoreRecord.CloseDefense);0<d.NewValue[5]&&(a+=d.NewValue[5]*g_ItemScoreRecord.Rebound);0<d.NewValue[6]&&(a+=d.NewValue[6]*g_ItemScoreRecord.HPRecover);0<d.NewValue[7]&&(a+=d.NewValue[7]*g_ItemScoreRecord.ItemAttachEXP);0<d.NewValue[8]&&(a+=d.NewValue[8]*g_ItemScoreRecord.AddDnger);0<d.NewValue[9]&&(a+=d.NewValue[9]*g_ItemScoreRecord.TeamUpHurt);0<d.NewValue[10]&&(a+=d.NewValue[10]*g_ItemScoreRecord.ADDHurt);0<d.NewValue[13]&&(a+=d.NewValue[13]*g_ItemScoreRecord.MPRecover);120==d.AniCount&&(a+=g_ItemScoreRecord.FastTrain);121==d.AniCount&&(a+=g_ItemScoreRecord.ProbeNecklace);111==d.AniCount&&(a+=g_ItemScoreRecord.HideMode);112==d.AniCount&&(a+=g_ItemScoreRecord.Teleport);113==d.AniCount&&(a+=g_ItemScoreRecord.Paralysis);114==d.AniCount&&(a+=g_ItemScoreRecord.Revival);115==d.AniCount&&(a+=g_ItemScoreRecord.FlameRing);116==d.AniCount&&(a+=g_ItemScoreRecord.RecoveryRing);118==d.AniCount&&(a+=g_ItemScoreRecord.MagicShield);119==d.AniCount&&(a+=g_ItemScoreRecord.MuscleRing);135==d.AniCount&&(a+=g_ItemScoreRecord.MoXieSuite);138==d.AniCount&&(a+=g_ItemScoreRecord.HongMoSuite);139==d.AniCount&&(a+=g_ItemScoreRecord.UnParalysis);140==d.AniCount&&(a+=g_ItemScoreRecord.SupermanItem);143==d.AniCount&&(a+=g_ItemScoreRecord.UnMagicShield);144==d.AniCount&&(a+=g_ItemScoreRecord.UnRevival);171==d.AniCount&&(a+=g_ItemScoreRecord.NoDropItem);172==d.AniCount&&(a+=g_ItemScoreRecord.NoDropUseItem);150==d.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.MagicShield);151==d.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.FlameRing);152==d.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.RecoveryRing);153==d.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.MuscleRing);154==d.AniCount&&(a=a+g_ItemScoreRecord.MagicShield+g_ItemScoreRecord.FlameRing);155==d.AniCount&&(a=a+g_ItemScoreRecord.MagicShield+g_ItemScoreRecord.RecoveryRing);156==d.AniCount&&(a=a+g_ItemScoreRecord.MagicShield+g_ItemScoreRecord.MuscleRing);157==d.AniCount&&(a=a+g_ItemScoreRecord.Teleport+g_ItemScoreRecord.Paralysis);158==d.AniCount&&(a=a+g_ItemScoreRecord.Teleport+g_ItemScoreRecord.MagicShield);159==d.AniCount&&(a=a+g_ItemScoreRecord.Teleport+g_ItemScoreRecord.ProbeNecklace);160==d.AniCount&&(a=a+g_ItemScoreRecord.Teleport+g_ItemScoreRecord.Revival);161==d.AniCount&&(a=a+g_ItemScoreRecord.Paralysis+g_ItemScoreRecord.Revival);162==d.AniCount&&(a=a+g_ItemScoreRecord.MagicShield+g_ItemScoreRecord.Revival);163==d.AniCount&&(a=a+g_ItemScoreRecord.UnParalysis+g_ItemScoreRecord.Teleport);180==d.AniCount&&(a+=g_ItemScoreRecord.DropExp);181==d.AniCount&&(a+=g_ItemScoreRecord.DroLevel)}if(g_ItemScoreRecord.boItemBaseScore)for(d=0;d<g_EquipScoreList.length;d++){var e=g_EquipScoreList[d].split(",");if(b.s.Name==e[1]){a+=parseInt(e[2]);break}}}(b=this.addExScore(b))&&(a+=b);return a};b.addExScore=function(b){for(var a=0;a<g_EquipScoreExList.length;a++)if(g_EquipScoreExList[a]&&g_EquipScoreExList[a].MakeIndex==b.MakeIndex)return parseInt(g_EquipScoreExList[a].iExtItemScore)};return b}(),GameMission=function(){function b(){}var c=[];b.GetMissStringInfo=function(a,b,c){for(var g=0,f="",h="";;){if((10==c||11==c)&&""!=a&&""!=MissStringArray[g]){var l=MissStringArray[g];if(l&&0<l.indexOf(a))if(0<=b.indexOf("$")){for(l=b;;){var m=l.indexOf("$"),n=l.indexOf(";");if(-1==m)break;if(0<=m){var n=l.substr(m+1,n-m-1),n="$"+n+";",q=l.substr(0,m);""!=q&&(h+=q);l=l.substr(m,l.length);l=l.replace(n,"");m=l.indexOf(n);if(0==m)break;q=l.substr(0,m);l=l.substr(m+n.length,l.length);""!=q&&(f+=q+"\\")}}this.SetMissionStrIng(a,h,f)}else this.SetMissionStrIng(a,b,"")}g+=1;if(g>=MissStringArray.length)break}};b.GetMissStringArray=function(a,b,c){var g=20;if(0<=a&&9>=a&&-1!=b.indexOf("$"))for(10==c&&(MissStringArray[a]="");g--&&-1!=b.indexOf("$");){if(-1<b.indexOf("$")){var f=b.indexOf("$"),h=b.indexOf(";");if(-1!=f&&-1!=h){var h=b.substr(f+1,h-f-1),h="$"+h+";",l=b.substr(f+h.length,b.length-f-h.length+1),m=l.indexOf("$");if(0==m)break;m=l=l.substr(0,m);l=l.substr(1,h.length)==h?"":h+l+h;b=b.replace(l,"")}}if((10==c||11==c)&&""!=l){MissStringArray[a]+=l+"\\";var n=l.indexOf("@");if(-1!=n){var q=l.indexOf("\x3e"),h=l.substr(n+1,q-n-1);""!=h&&(Sendmessage.gettmissitem(rw_recog,10,"@"+h),""!=m&&(n=m.indexOf("/@"),q=m.indexOf("#"),f="",f=-1!=n&&-1!=q?m.substr(q+2,n-3):m,n=[],n.sShowtxt=f,n.sMemo="",n.sNvStr="",n.sCmdGo=h,g_MissCaptionList[a].sList.push(n)))}}}};b.SetMissionStrIng=function(a,b,c){for(var g=0;g<g_MissCaptionList.length;g++)if(g_MissCaptionList[g])for(var f=0;f<g_MissCaptionList[g].sList.length;f++)if(g_MissCaptionList[g].sList[f]&&"@"+g_MissCaptionList[g].sList[f].sCmdGo==a){g_MissCaptionList[g].sList[f].sNvStr=c;g_MissCaptionList[g].sList[f].sMemo=b;break}Laya.stage.event("UPDATETASK",[""])};b.ShowNavigation=function(a,b){var c=a.split("\\"),g=-1,f=2,h=42;b.height=0;for(var l=this.TaskBgCountShowLine(c);;){g+=1;if(g>=c.length)break;if(""!=c[g]){var m=c[g].indexOf("{"),n=c[g].indexOf("}");-1!=m&&-1!=n&&(c[g]=c[g].replace("{","\x3c"),c[g]=c[g].replace("}","\x3e"));for(var q=c[g].split("\x3c"),p=0;p<q.length;p++)if(""!=q[p])for(var r=q[p].split("\x3e"),v=0;v<r.length;v++)if(""!=r[v]){var w=r[v].toUpperCase();if(-1!=w.indexOf("#NEW"))m=w.indexOf("#NEW("),n=w.indexOf(")"),m=w.substr(m+5,n-m-5),n=w.substr(n+1,w.length),w=GameUtil.GetMissGloba(m,parseInt(n),0),""==w&&(w=n),n=new Laya.Text,n.fontSize=16,n.stroke=1,n.strokeColor="#000000",n.color="#ffffff",n.text=""+w,n.pos(h,f),h+=GameApi.newcount(n)+GameApi.GetSpWidth(n.text),b.addChild(n);else if(-1!=w.indexOf("FCOLOR")||-1!=w.indexOf("SCOLOR")){m=w.indexOf("FCOLOR");n=new Laya.Text;n.fontSize=16;n.stroke=1;n.strokeColor="#000000";n.color="#ffffff";if(-1!=m)var m=w.indexOf("/FCOLOR\x3d"),z=w.substr(m+8,3);else m=w.indexOf("/SCOLOR\x3d"),z=w.substr(m+8,3);w=w.substr(0,m);n.color=Get2RGB(z);n.text=w;n.pos(h,f);h+=GameApi.newcount(n)+GameApi.GetSpWidth(n.text);b.addChild(n)}else if(-1!=w.indexOf("/@"))if(w=w.split("/@"),w[0]&&-1!=w[0].indexOf("IMGEX")){var C=new Laya.Button,n=w[0].split(":");if(6<n.length){m=function(a){C.skin=a;C.size(26,31);b.addChild(C)};z=parseInt(n[1]);if(0<=z&&z<g_pak_list.length){var u=parseInt(n[2]);GameUtil.loadImg(u,g_pak_list[z],m)}C.name=w[1];C.stateNum=1;C.pos(h+parseInt(n[5]),f+parseInt(n[6]));this.TaskBgTrigger(C.name,b,l)}C.on(Laya.Event.MOUSE_DOWN,this,GameUtil.onLa_CLICK);C.on(Laya.Event.MOUSE_UP,this,GameUtil.onLa_CLICK_OVER);C.on(Laya.Event.MOUSE_OUT,this,GameUtil.onLa_CLICK_OVER)}else n=new Laya.Text,n.fontSize=16,n.stroke=1,n.strokeColor="#000000",n.color=Get2RGB("251"),n.text=w[0],n.name=w[1],n.underline=!0,n.on(Laya.Event.MOUSE_DOWN,this,GameUtil.onLa_CLICK),n.on(Laya.Event.MOUSE_UP,this,GameUtil.onLa_CLICK_OVER),n.on(Laya.Event.MOUSE_OUT,this,GameUtil.onLa_CLICK_OVER),n.pos(h,f),h+=GameApi.newcount(n)+GameApi.GetSpWidth(n.text),b.addChild(n),this.TaskBgTrigger(n.name,b,l);else n=new Laya.Text,n.fontSize=16,n.stroke=1,n.strokeColor="#000000",n.color="#ffffff",0==g&&(n.color="#0b9352"),n.text=w,n.pos(h,f),h+=GameApi.newcount(n)+GameApi.GetSpWidth(w),b.addChild(n);cur_use_app&&(h+=5)}h=0;f+=20;b.height=f}}};b.TaskBgCountShowLine=function(a){for(var b=0,c=0;c<a.length;c++)""!=a[c]&&b++;return b};b.TaskBgTrigger=function(a,b,c){if(-1!=a.indexOf("_H5_")){var g="";c=2>c||3<c?0:c-1;var g=a.split("_H5_"),f=-1,h=-1;if(1<g.length)switch(g=g[1],g){case "1":f=36*c;h=f+11;break;case "2":f=12+36*c;h=f+11;break;case "3":f=24+36*c,h=f+11}-1!=f&&-1!=h&&(Animationmodule.playframe(!1,b,"gameres/animation/task/",f,h,100,!0,!1).name="TaskBgTrigger");b.on(Laya.Event.CLICK,this,function(a){Sendmessage.sendtomsg(CM_MERCHANTDLGSELECT,rw_recog,0,0,0,"@"+a)},[a])}};b.GetStringA=function(a){var b=a.indexOf("{"),c=a.indexOf("/"),g=a.indexOf("}");if(-1!=b&&-1!=c&&-1!=g)for(var f=g=!1,h=0;h<a.length;h++)if("{"==a[h])g=!0,b=h;else{if("/"==a[h])if(g){f=!0;c=h;continue}else f=g=!1;if("}"==a[h])if(g&&f){var l=a.substr(c+1,h-c-1),l=l.toUpperCase();-1!=l.indexOf("FCOLOR\x3d")||-1!=l.indexOf("SCOLOR\x3d")||-1!=l.indexOf("AUTOCOLOR\x3d")?(a=a.split(""),a[b]="\x3c",a[h]="\x3e",f=g=!1,a=a.join("")):(l=a.substr(b+1,h-b-1),l=l.toUpperCase(),l.indexOf("IMG:"))}else l=a.substr(b+1,h-b-1),l=l.toUpperCase(),-1!=l.indexOf("IMG:")&&(a=a.split(""),a[b]="\x3c",a[h]="\x3e",a=a.join("")),f=g=!1}return a};b.GetPakSing=function(a){if(a<g_pak_list.length){var b="";a=g_pak_list[a];a.replace("items","");b="data/"+a+"/"}return b};b.LineText_IMGEX=function(a,b,c,g){var f=!1,h=[];if(-1!=a.indexOf("|")){var l=a.split("|");a=a.replace("|"+l[1],"");f=!0}var m=a.split("/"),n=a.split(":");if(6<n.length){var q=parseInt(n[1]);if(0<=q&&q<g_pak_list.length){a=new Laya.Image;var p=parseInt(n[2]),q=this.getUrl(g_pak_list[q],p);a.skin=q;q=parseInt(n[5]);n=n[6].split("/");n=parseInt(n[0]);a.pos(b+q,c+n);if(1<m.length)a.on(Laya.Event.CLICK,this,this.onCmdClick,[m[1]]);else sCmdGo="",f&&""!=l[1]&&(a.sHitText=l[1],a.on(Laya.Event.CLICK,this,this.onHitTextClick),a.BoIsOpen=!1);g.addChild(a);b+=a.width}}h.x=b;h.y=c;return h};b.LineText_IMGEX=function(a,b,c){var g="",f="";Array.isArray(a)?(g=a[0],f=a[1]):g=a;a=g.split(":");var h=parseInt(a[1]),l=parseInt(a[2]);parseInt(a[3]);var m=parseInt(a[4]),n=parseInt(a[5]),q=0,p=-1,r=!1,p=g.indexOf("|");if(-1!=p)var v=g.substr(p+1,g.length-p),g=g.substr(0,p),r=!0;a[7]&&(v=a[7],r=!0);a[6]&&(p=a[6].indexOf(":"),q=-1!=p?a[6].substr(p,0):parseInt(a[6]));var w=new Laya.Image;w.imgEx=!0;w.skin=this.getUrl(g_pak_list[h],l);w.pos(b.x+n,b.y+q);if(l!=m){var z=this;w.on(Laya.Event.MOUSE_UP,this,function(){w.skin=z.getUrl(g_pak_list[h],l)});w.on(Laya.Event.MOUSE_DOWN,this,function(){w.skin=z.getUrl(g_pak_list[h],m)})}r&&""!=v&&(-1<a[6].indexOf("|")||a[7])?(""!==f?w.sHitText=v+"/"+f:w.sHitText=v,w.on(Laya.Event.CLICK,this,this.onHitTextClick),w.BoIsOpen=!1,""!==f&&(w.sCmdsJump=!0)):""!=f&&(w.sCmdsJump=!0,w.on(Laya.Event.CLICK,this,this.onCmdClick,[f]));c.addChild(w);if(!w.sCmdsJump){var g=c._childs[0]._childs,C;for(C in g)if(c=g[C],c.imgEx&&c.sCmdsJump&&GameUtil.isRectOverlap(c,w)){c.x-=w.x;c.y-=w.y;c.removeSelf();w.addChild(c);break}}b.x+=w.width;return b};b.LineText_PLAYIMG=function(a,b,c,g){function f(){if(0<--w){var b=Animationmodule.playframe(!0,c,"data/"+C+"/",n,n+q-1,100,!1,!0,null,this,f);if(b){b.is_use_offest=!1;b.x=r;b.y=v;b.mouseThrough=!0;var d;Array.isArray(a)?d=a[0].split("|"):d=a.split("|");b.sHitText=d[1];b.on(Laya.Event.CLICK,this,function(a){this.onHitTextClick(a);if(""!=h)this.onCmdClick(h)});b.zOrder=0}}}var h="";if(Array.isArray(a))var l=a[0].split(":"),h=a[1];else l=a.split(":");var m=parseInt(l[1]),n=parseInt(l[2]),q=parseInt(l[3]),p=parseInt(l[4]),r=b.x+parseInt(l[5]),v=b.y+parseInt(l[6]);parseInt(l[7]);if(l[8])var w=l[8].indexOf("|")?parseInt(l[8].split("|")[0]):parseInt(l[8]);l="";if(-1!=m&&m<g_pak_list.length){new Laya.Point(r,v);var z=new Laya.Image,C=g_pak_list[m],l=this.getUrl(C,n);z.skin=l;if(w&&0!=w)0<w&&(u=Animationmodule.playframe(!0,c,"data/"+C+"/",n,n+q-1,p,!1,!0,null,this,f));else var u=Animationmodule.playframe(!0,c,"data/"+C+"/",n,n+q-1,p,!0,!1);if(u){u.is_use_offest=!1;u.x=r;u.y=v;u.mouseThrough=!0;var B;Array.isArray(a)?B=a[0].split("|"):B=a.split("|");u.sHitText=B[1];u.on(Laya.Event.CLICK,this,function(a){this.onHitTextClick(a);if(""!=h)this.onCmdClick(h)});u.zOrder=0}b.x+=z.width;g&&20<z.height&&(b.y=z.height)}return b};b.LineText_ITEMSHOW=function(a,b,c){var g=-1,f=-1;if(Array.isArray(a))var h=a[0].split(":"),l=a[1];else h=a.split(":");if(h&&4<h.length){var m=new Laya.Image;a=parseInt(h[3]);for(var n=parseInt(h[4]),q=0;q<g_Showitem.length;q++)if(h[1]==g_Showitem[q].s.nIdx){g=q;f=g_Showitem[q].s.Looks;break}if(-1!=f){q=this.getUrl("items",f);if(-1!=g)m.on(Laya.Event.CLICK,this,this.onShowItemClick,[g]);Laya.loader.getRes(q)?m.skin=q:GameUtil.loadImg(f,"items",function(a){m.skin=a});if("1"==h[5]||"3"==h[5]){var p=new Laya.Image;p.pos(b.x+a,b.y+n);GameUtil.loadImg(265,"prguse",function(a,b){p.skin=a;c.addChild(p);h[6]&&h[7]&&m.pos(parseInt(h[6]),parseInt(h[7]));"3"==h[5]&&m.pos((p.width-m.width)/2,(p.height-m.height)/2);p.addChild(m)})}else m.pos(b.x+a,b.y+n),c.addChild(m);b.x="1"==h[5]?b.x+m.width:"2"==h[5]?b.x+(m.width+a):"3"==h[5]?b.x+(42+a):"4"==h[5]?b.x+(42+a):b.x+m.width}else m.pos(b.x+a,b.x+n),c.addChild(m),b.x+=m.width;h[2]&&0<parseInt(h[2])&&(g=new Laya.Text,g.color="#ffffff",g.align="right",g.text=h[2],GameUtil.setCanAddTxtStroke(g),g.pos(20,18),m.addChild(g))}if(l&&(g=l.split(""),l=l.toUpperCase(),-1!=l.indexOf("AUTOCOLOR")||-1!=l.indexOf("FCOLOR")||-1!=l.indexOf("SCOLOR")?(g=l.indexOf("\x3d"),l=l.substr(g+1,l.length),-1!=l.indexOf("$")?sColor="#"+Get3RGB(l.substr(2,6)):-1==l.indexOf(",")?sColor=Get2RGB(l%256):(l=l.split(","),""==l[l.length-1]&&l.pop(),boIsAColor=!0)):"@"==g[0]&&(boIsline=boIsCmd=!0,sCmd=l),""!=sCmd&&m))m.on(Laya.Event.CLICK,this,this.onCmdClick,[sCmd]);return b};b.LineText_IMG=function(a,b,c,g){if(Array.isArray(a)){var f=a[0];a=a[1]}else f=a,a="";var h=!1;if(-1!=f.indexOf("|"))var l=f.split("|"),f=f.replace("|"+l[1],""),h=!0;var f=f.split(":"),m=parseInt(f[1]),n=parseInt(f[2]),q=new Laya.Image;(n=g_imgNpcPak[n])&&(n=n.toLocaleLowerCase());q.skin=this.getUrl(n,m);q.pos(b.x,b.y);f[3]&&f[4]&&q.pos(b.x+parseInt(f[3]),b.y+parseInt(f[4]));h&&""!=l[1]&&(q.sHitText=l[1],q.on(Laya.Event.CLICK,this,this.onHitTextClick),q.BoIsOpen=!1);if(""!=a)q.on(Laya.Event.CLICK,this,this.onCmdClick,[a]);c.addChild(q);b.x+=q.width;g&&20<q.height&&(b.y=q.height);return b};b.LineText_ITEMBOX=function(a,b,c){a=a.split(":");b=parseInt(a[1]);var g=parseInt(a[2]),f=parseInt(a[3]),h=parseInt(a[4]),l=parseInt(a[5]);parseInt(a[6]);parseInt(a[7]);g_npc_opt_list=a[8];g_Show_Bag_Type="npc_dlg_options";if(-1!=g&&(g=this.getUrl(g_pak_list[g],f))&&""!=g){var m=new Laya.Image;m.BoxId=b;m.BoxType=a[8];m.skin=g;m.pos(h,l);m.name="lb_img";g_npc_opt_boxid=b;c.addChild(m);if(-1!=b)m.on(Laya.Event.CLICK,this,this.onItemBoxClick);if(g_boxItemArr[g_npc_opt_boxid]){GameUtil.loadImg(g_boxItemArr[g_npc_opt_boxid].s.Looks,"items",function(a){a=new Laya.Image(a);a.x=m.width/2-a.width/2;a.y=m.height/2-a.height/2;n.addItemTxtNums(g_boxItemArr[g_npc_opt_boxid],m);m.addChild(a)});var n=this}else for(c=0;c<g_boxItemArr.length;c++)g_boxItemArr[c]&&GameUtil.AddItemNewBag(g_boxItemArr[c]);Laya.stage.on("draw_npc_items",this,function(a,b){if(null==a)this.delOkFrameSpecialHandle(b,m)||m.removeChildren();else if(m.BoxId==g_npc_opt_boxid){GameUtil.loadImg(a.s.Looks,"items",function(b){m.removeChildren();g_boxItemArr[g_npc_opt_boxid]=a;b=new Laya.Image(b);c.addItemTxtNums(a,m);b.x=m.width/2-b.width/2;b.y=m.height/2-b.height/2;m.addChild(b)});var c=this}})}};b.delOkFrameSpecialHandle=function(a,b){if(!a)return!1;b.BoxId==g_npc_opt_boxid&&b.removeChildren();return!0};b.addItemTxtNums=function(a,b){if(a&&a.Dura&&!(0>[17,18,40,41,42].indexOf(a.s.StdMode))){var c=new Laya.Label;c.color=16777215;c.text="x"+(a.Dura+1);c.right=5;c.bottom=5;GameUtil.setCanAddTxtStroke(c);b.addChild(c)}};b.LineText_FONT=function(a,b,c,g){var f=g="",h="";if(Array.isArray(a)){for(g=0;g<a.length;g++)f+=a[g]+(g+1==a.length?"":"/");var l=f.split(":");g=a[1];h=GameUtil.extractRemarkInfoNPC(a[0])}else l=a.split(":"),GameUtil.extractRemarkInfoNPC(a);if(7<=l.length){var m=f=a=0,n=new Laya.Text;n.fontSize=g_npcTxtSize;n.text=GameUtil.clearRemarkInfoNPC(l[1]);l[2]&&l[3]&&(a=parseInt(l[2]),f=parseInt(l[3]));l[4]&&(n.fontSize=parseInt(l[4]),boFSize=!0);l[5]&&(m=parseInt(l[5]),new Laya.Text,3==m&&(n.underline=!0),2==m&&(boFSize=n.italic=!0),1==m&&(boFSize=n.bold=!0));m="#ffffff";l[7]&&(m=-1!=l[7].indexOf("/@")?l[7].split("/@")[0]:l[7],m=Get2RGB(m));-1<l[1].indexOf("|")&&(n.on(Laya.Event.CLICK,this,function(){if(!c.getChildByName("buff_k")){var a=l[1].split("|")[1],b=new Laya.Image;b.name="buff_k";b.skin="gameres/ui/buffkuang.png";b.sizeGrid="4,4,4,4";b.width=GameUtil.getTxtWidthByContent(parseInt(l[4]),a)+12;b.height=g_npcTxtSize+6;b.pos(n.x+20,n.y+20);var f=new Laya.Text;f.text=a;f.x=f.y=3;f.fontSize=g_npcTxtSize;f.color=16777215;b.addChild(f);c.addChild(b)}c.getChildByName("buff_k").visible=!0}),c.on(Laya.Event.CLICK,this,function(){!n.hitTestPoint(Laya.stage.mouseX,Laya.stage.mouseY)&&c.getChildByName("buff_k")&&(c.getChildByName("buff_k").visible=!1)}));n.color=m;""!=h&&(n.sHitText=h);""!=g&&-1!=g.indexOf("@")&&("#ffffff"==m&&(m="#e1f408"),n.on(Laya.Event.CLICK,this,this.onCmdClick,[g,n]),n.on(Laya.Event.CLICK,this,this.onHitTextClick),this.fontsizeToBigOnClick(n));"fontex"!=l[0].toLowerCase()?(n.pos(b.x+a,b.y+f),b.x+=GameApi.newcount(n)+GameApi.GetSpWidth(n.text),b.y+=cur_use_app&&window.conch?f+n.height-1:f+n.height):n.pos(a,f);c.addChild(n)}return b};b.fontsizeToBigOnClick=function(a,b,c){if(a){if(!a.hasMOUSE_DOWN&&(a.on(Laya.Event.MOUSE_DOWN,this,function(){a.hasMOUSE_DOWN="hasMOUSE_DOWN";a.fontSize+=2;b&&(b.fontSize+=2);if(a._events.click&&!a._events.click.length)a._events.click.caller(a._events.click.args);else for(var c in a._events.click)a._events.click[c].caller(a._events.click[c].args)}),b&&c))b.on(Laya.Event.MOUSE_DOWN,this,function(){b.fontSize+=2;if(a._events.click&&!a._events.click.length){var c=a._events.click.args;a._events.click.args.length&&1==a._events.click.args.length&&(c=c[0]);a._events.click.method(c)}else for(var f in a._events.click)c=a._events.click.args,a._events.click.args.length&&1==a._events.click.args.length&&(c=c[0]),a._events.click[f].method(c)});if(!a.hasMOUSE_UP&&(a.on(Laya.Event.MOUSE_UP,this,function(){a.hasMOUSE_UP="hasMOUSE_UP";a.fontSize-=2;b&&(b.fontSize-=2)}),b&&c))b.on(Laya.Event.MOUSE_UP,this,function(){b.fontSize-=2})}};b.downTest=function(a,b){a.fontSize+=2;b()};b.MakeNpcLabel=function(a,d,e,g,f,h){var l=[],m=g_npcTxtSize,n="",q="",p="#ffffff",r=!1,v=!1,w=!1,z=!1,C="",u=!1,B=!1;h=void 0===h?!1:h;l.x=e;l.y=g;if(Array.isArray(a)){if(1<a.length){if(a[0]&&""!=a[0]){var n=a[0].split(""),A=a[0].indexOf("{");e=a[0].indexOf("}");if("}"==n[n.length-1]&&-1!=A)if(n=n.join(""),g=n.indexOf("{"),A=n.indexOf("}"),h=n.substr(g+1,A),-1!=h.toUpperCase().indexOf("FCOLOR")||-1!=h.toUpperCase().indexOf("SCOLOR"))a[0]=n.substr(0,g),p=n.substr(g+8,e-g-8),p=-1!=p.indexOf("$")?"#"+Get3RGB(p.substr(2,6)):Get2RGB(p),a[1]&&-1!=a[1].indexOf("@")&&(B=!0),v=!1;else{if(-1!=h.toUpperCase().indexOf("AUTOCOLOR")){h=a[0].toUpperCase().split("{AUTOCOLOR\x3d");if(h[1]){-1!=h[1].indexOf("}")&&(h[1]=h[1].replace("}",""));var D=h[1].split(",");""==D[D.length-1]&&D.pop();u=!0}a[0]=n.substr(0,g)}}else-1!=a[0].toUpperCase().indexOf("IMGEX")?(l=b.LineText_IMGEX(a,l,d),w=!0):-1!=a[0].toUpperCase().indexOf("PLAYIMG")?(""!=a[1]&&-1!=a[1].indexOf("@")&&(l=b.LineText_PLAYIMG(a,l,d)),w=!0):-1!=a[0].toUpperCase().indexOf("FONT")?(l=b.LineText_FONT(a,l,d),w=!0):-1!=a[0].toUpperCase().indexOf("ITEMSHOW")?(l=b.LineText_ITEMSHOW(a,l,d),w=!0):-1!=a[0].toUpperCase().indexOf("IMG")&&(l=b.LineText_IMG(a,l,d),w=!0);A=a[0].toUpperCase().indexOf("|");-1!=A?(n=a[0].substr(0,A),-1!=n.indexOf("TEXT:")&&(n=n.substr(n.indexOf(":")+1)),z=a[0].substr(A+1,a[0].length-A),-1==z.indexOf("#")&&(z=z.split(":")),3==z.length?(C=z[0],l.x+=parseInt(z[1]),l.y+=parseInt(z[2])):C=a[0].substr(A+1,a[0].length-A),""!=a[1]&&-1!=a[1].indexOf("@")&&(C+="/"+a[1]),z=!0):n=a[0]}""!=a[1]&&(h=a[1].split(""),-1!=a[1].toUpperCase().indexOf("AUTOCOLOR")||-1!=a[1].toUpperCase().indexOf("FCOLOR")||-1!=a[1].toUpperCase().indexOf("SCOLOR")?(A=a[1].indexOf("\x3d"),h=a[1].substr(A+1,a[1].length),-1!=h.indexOf("$")?p="#"+Get3RGB(h.substr(2,6)):-1==h.indexOf(",")?p=Get2RGB(h%256):(D=h.split(","),""==D[D.length-1]&&D.pop(),u=!0)):"@"==h[0]&&(r=v=!0,q=a[1],a[2]&&(-1<q.indexOf("sell")||-1<q.indexOf("repair"))&&(SELL_ITEM_TYPE=a[2].split(","))))}}else if(""!=a){for(;-1!=a.toUpperCase().indexOf("{#NEW")&&-1!=a.toUpperCase().indexOf("}");)A=a.indexOf("{#NEW"),g=a.indexOf("}"),g=a.substr(A+5,g-A-5),e=g.indexOf("("),A=g.indexOf(")"),-1!=e&&-1!=A&&(e=g.substr(e+1,A-e-1),""!=e&&(e=GameUtil.GetMissGloba(e,"",0),g="{#NEW"+g+"}",a=a.replace(g,e)));if(-1!=a.toUpperCase().indexOf("TEXT")&&-1!=a.indexOf("|"))-1!=a.toUpperCase().indexOf("{FCOLOR\x3d")&&(e=a.toUpperCase().split("{FCOLOR\x3d"),e[1]&&(p=e[1].slice(0,e[1].indexOf("}")),p=-1!=p.indexOf("$")?"#"+Get3RGB(p.substr(2,6)):Get2RGB(p),f=!1),e[0]&&(A=e[0].indexOf("|"),-1!=A&&(n=e[0].substr(0,A),-1!=n.toUpperCase().indexOf("TEXT")&&(n=n.split(":")[1]),z=e[0].substr(A+1,e[0].length-A),-1==z.indexOf("#")&&(z=z.split(":")),3==z.length?(C=z[0],l.x+=parseInt(z[1]),l.y+=parseInt(z[2])):C=e[0].substr(A+1,e[0].length-A),z=!0)));else{if(-1!=a.toUpperCase().indexOf("TEXT"))return-1!=a.toUpperCase().indexOf("{FCOLOR\x3d")?(f=a.toUpperCase().split("{FCOLOR\x3d"),e=f[0].split(":"),e.push(f[1].slice(0,f[1].indexOf("}"))),e[4]&&(p=e[4],p=-1!=p.indexOf("$")?"#"+Get3RGB(p.substr(2,6)):Get2RGB(p))):e=a.split(":"),3<e.length&&(w=new Laya.Text,w.fontSize=g_npcTxtSize,e[4]?w.color=p:-1!=a.toUpperCase().indexOf("AUTOCOLOR")?(h=a.toUpperCase().split("{AUTOCOLOR\x3d"),h[1]&&(-1!=h[1].indexOf("}")&&(h[1]=h[1].replace("}","")),D=h[1].split(","),""==D[D.length-1]&&D.pop(),u=!0),u&&D&&(w.m_ColorList=[],w.m_ColorList=D,w.m_nColorIndex=0,w.color=Get2RGB(w.m_ColorList[0]),c.push(w))):w.color="#ffffff",w.text=e[1],a=parseInt(e[2]),p=0,""!=e[3]&&(p=parseInt(e[3])),w.pos(l.x+a,l.y+p),d.addChild(w),l.x+=a+w.width+GameApi.GetSpWidth(w.text),l.y+=p),l;-1!=a.toUpperCase().indexOf("IMGEX")?(l=b.LineText_IMGEX(a,l,d),w=!0):-1!=a.toUpperCase().indexOf("PLAYIMG")?(l=b.LineText_PLAYIMG(a,l,d),w=!0):-1!=a.toUpperCase().indexOf("ITEMSHOW")?(l=b.LineText_ITEMSHOW(a,l,d),w=!0):-1!=a.toUpperCase().indexOf("ITEMBOX")?(b.LineText_ITEMBOX(a,l,d),w=!0):-1!=a.toUpperCase().indexOf("IMG")&&(l=b.LineText_IMG(a,l,d),w=!0)}-1!=a.toUpperCase().indexOf("FONT")?(l=b.LineText_FONT(a,l,d,h),w=!0):(A=a.indexOf("|"),-1!=A?(n=a.substr(0,A),C=a.substr(A+1,a.length-A),a.constructor==Array&&""!=a[1]&&-1!=a[1].indexOf("@")&&(C+="/"+a[1]),z=!0):n=a)}if((""!=n||w)&&!w){w=new Laya.Text;h=new Laya.Image;h.skin="gameres/ui/lb_bg_img.png";w.fontSize=m;u&&D?(w.m_ColorList=[],w.m_ColorList=D,w.m_nColorIndex=0,w.color=Get2RGB(w.m_ColorList[0]),c.push(w)):w.color=p;v&&!B&&(w.color="#e1f408");r&&(w.underline=!0);if(z)w.sHitText=C,w.on(Laya.Event.CLICK,this,this.onHitTextClick),w.BoIsOpen=!1;else if(""!=q)h.on(Laya.Event.CLICK,this,this.onCmdClick,[q]);f&&(w.color="#f40d0d");var F;-1!=n.toUpperCase().indexOf("TEXT:")?(p=n.split(":"),null==p[2]&&null==p[3]&&(u=a[0].split(":"),p[2]=u[2],p[3]=u[3]),p[1]&&(n=p[1]),p[2]&&p[3]&&w.pos(l.x+parseInt(p[2]),l.y+parseInt(p[3])),F=!0):NaN==l.x?w.pos(16,30):w.pos(l.x,l.y);w.text=n;l.x+=GameApi.newcount(w)+GameApi.GetSpWidth(w.text);a[1]&&-1!=a[1].indexOf("@")?(h.width=w.width+15,h.height=w.height+10,h.pos(l.x-h.width+9,l.y-4),d.addChild(h),d.addChild(w),this.fontsizeToBigOnClick(h,w,F)):d.addChild(w)}return l};b.ShowAllNPCTxT=function(a,d){g_TempNPCLabe&&(g_TempNPCLabe=!1);d.removeChildren();c=[];var e=a.split("\\"),g=-1,f=30,h=16,l=!1,m=[];for(sNewNpcStr=a;;){g+=1;if(g>=e.length)break;if(""!=e[g]){e[g]=this.GetStringA(e[g]);for(var n=this.CheckTagCMD(e[g]);""!=n&&-1!=e[g].indexOf(n[0])&&-1!=e[g].indexOf(n[1]);){m="";if(e[g].split("")[0]!=n[0]){var m=e[g].indexOf(n[0]),q=e[g].split(n[0]);e[g]=e[g].substr(m,e[g].length);""!=q[0]&&(m=q[0],m=this.MakeNpcLabel(m,d,f,h,l),f=m.x,h=m.y)}m=e[g].indexOf(n[0]);q=e[g].indexOf(n[1]);-1!=m&&-1!=q?(l=!0,m=e[g].substr(m+1,q-m-1),e[g]=e[g].substr(q+1,e[g].length),"{}"!=n&&""!=m&&-1!=m.indexOf("/")&&(m=m.split("/"),m[1].split(""),l=!1),m=this.MakeNpcLabel(m,d,f,h,l),l=!1,m&&(f=m.x,h=m.y)):(m=this.MakeNpcLabel(e[g],d,f,h,l),f=m.x,h=m.y)}m=this.MakeNpcLabel(e[g],d,f,h,l);h=m.y;h+=16;f=30}}c?(Laya.timer.clear(this,b.TextColor),Laya.timer.loop(600,this,b.TextColor)):Laya.timer.clear(this,b.TextColor)};b.TextColor=function(){for(var a=0;a<c.length;a++){var b=c[a];b&&(b.m_nColorIndex>=b.m_ColorList.length&&(b.m_nColorIndex=0),b.m_nColorIndex<b.m_ColorList.length&&(b.color=Get2RGB(b.m_ColorList[b.m_nColorIndex]),b.m_nColorIndex+=1))}};b.sendnpccmd=function(a,b){30<b.length&&(b=b.substr(0,60));a=a+String.fromCharCode(13)+b;var c=0;-1!=a.indexOf("@InPut")&&(c=99);Sendmessage.SendNpcCMD(a,G_NPC_ID,c)};b.onCmdMouseOver=function(a){Laya.stage.event("show_remark",a)};b.onCmdMouseOut=function(){Laya.stage.event("close_remark")};b.onCmdClick=function(a,b){GameUtil.PlayMusicFormat(S_BUTTON_3);if("string"==typeof a&&-1!=a.toUpperCase().indexOf("@EXIT"))g_NpcCan_s_repair=g_NpcCan_repair=g_NpcCan_sell=g_NpcCan_buy=!1,GameApi.ShowNewNpcDlg(!1),npc_img_name="gameres/png/npc_di.png";else if("@"==a[0]&&"@"==a[1]&&-1==a.indexOf("@@dealybme")){var c=this;if(-1!=a.indexOf("@@buildguildnow"))Laya.stage.event("show_alert_dlg",[{ipttype:"string",type:4,txt:"\u8bf7\u8f93\u5165\u884c\u4f1a\u540d\u79f0",callfn:function(b){c.sendnpccmd(a,b)}}]);else{var g=a.indexOf("(")+1,f=a.indexOf(")"),g=a.substr(g,f-g);""!=g?Laya.stage.event("show_alert_dlg",[{ipttype:"string",type:4,txt:g,callfn:function(b){c.sendnpccmd(a,b)}}]):Laya.stage.event("show_alert_dlg",[{ipttype:"string",type:4,txt:"\u8f93\u5165\u4fe1\u606f",callfn:function(b){c.sendnpccmd(a,b)}}])}}else"@\u539f\u5730\u590d\u6d3b"==a||"@\u5b89\u5168\u590d\u6d3b"==a?(g_NpcCan_s_repair=g_NpcCan_repair=g_NpcCan_sell=g_NpcCan_buy=!1,Sendmessage.SendNpcCMD(a,G_NPC_ID,0),GameApi.ShowNewNpcDlg(!1)):Sendmessage.SendNpcCMD(a,G_NPC_ID,0),g_TempNPCLabe=!0};b.onItemBoxClick=function(a){a&&(g_npc_opt_boxid=a.target.BoxId);if(g_boxItemArr[g_npc_opt_boxid]){a.target.removeChildren();if(a=g_boxItemArr[g_npc_opt_boxid])Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,a.MakeIndex,2),Sendmessage.NpcDlgOptions(G_NPC_ID,g_npc_opt_boxid,a.MakeIndex,1);g_boxItemArr[g_npc_opt_boxid]=null;GameUtil.AddItemNewBag(a)}else"npc_dlg_options"==g_Show_Bag_Type&&(g_OpenIdx=7,GameApi.ShowScreen(!0,a.target.BoxType,3));GameUtil.PlayMusicFormat(S_BUTTON_3)};b.LoadIngimage=function(a,b,c){var g=0,f=a.split("\\");this.dlg_height=0;for(g_ItemImg=[];;)if(g<f.length){var h="";if(""!=f[g]){if(0==g||1==g)h=f[g].split("\r"),1<h.length&&""!=h[0]&&(f[g]=h[1]);if(-1!=f[g].indexOf("\x3c"))for(var h=f[g].split("\x3c"),l=0;l<h.length;l++)if(""!=h[l])for(var m=h[l].split("\x3e"),n=0;n<m.length;n++)if(""!=m[n]){var q=m[n].toUpperCase();if(-1!=q.indexOf("ITEMBOX")){var p=q.split(":"),r=parseInt(p[2]),q=parseInt(p[3]);parseInt(p[4]);parseInt(p[5]);parseInt(p[6]);parseInt(p[7]);if(-1!=r&&r<g_pak_list.length){var p=g_pak_list[r],v=("000000"+q).slice(-6),w="data/"+p+"/"+v;(v=Laya.loader.getRes(w))||g_ItemImg.push(w)}}else if(-1!=q.indexOf("PLAYIMG")){if(p=q.split(":"),v=parseInt(p[1]),q=parseInt(p[2]),r=parseInt(p[3]),-1!=v&&v<g_pak_list.length)for(var p=g_pak_list[v],z=0;z<r;z++)v=("000000"+q).slice(-6),w="data/"+p+"/"+v,(v=Laya.loader.getRes(w))||g_ItemImg.push(w)}else if(-1!=q.indexOf("ITEMSHOW")){if(p=q.split(":"),4<p.length){for(n=q=0;n<g_Showitem.length;n++)if(p[1]==g_Showitem[n].s.nIdx){q=g_Showitem[n].s.Looks;break}r=q;p="";1E4<=q&&(p=Math.floor(q/1E4),r=q%1E4);v=("000000"+r).slice(-6);q="data/items"+p+"/"+v;(v=Laya.loader.getRes(q))||g_ItemImg.push(q)}}else-1!=q.indexOf("IMGEX")?(p=q.split(":"),5<p.length&&(q=parseInt(p[1]),0<=q&&q<g_pak_list.length&&(r=parseInt(p[2]),p=g_pak_list[q],v=("000000"+r).slice(-6),q="data/"+p+"/"+v,(v=Laya.loader.getRes(q))||g_ItemImg.push(q)))):-1!=q.indexOf("IMG")&&(p=q.split(":"),1<p.length&&(q=parseInt(p[2]),0<=q&&q<g_imgNpcPak.length&&(r=parseInt(p[1]),(p=g_imgNpcPak[q])&&(p=p.toLocaleLowerCase()),v=("000000"+r).slice(-6),q="data/"+p+"/"+v,(v=Laya.loader.getRes(q))||g_ItemImg.push(q))))}}g+=1}else break;c||(this.nIndex=0,this.LoadIngimageEx(a,b))};b.CheckTagCMD=function(a){for(var b=["\x3c\x3e","{}"],c=0;c<b.length;c++)if(-1!=a.indexOf(b[c][0]))return b[c];return""};b.LoadIngimageEx=function(a,c){0<g_ItemImg.length?(g_ItemImg.push("data/items/000000"),GameUtil.loadImgEx(g_ItemImg,function(){c&&(a=a.replace(/\ue7e3/g,"\r\n"),b.ShowAllNPCTxT(a,c),g_Hit_Text=c)})):c&&(b.ShowAllNPCTxT(a,c),g_Hit_Text=c)};b.onHitTextClick=function(a){var b=a.target.sHitText;if(b){var c=Laya.stage.getChildByName("yangdaweigood"),g=3,f=0,c=c?c:new Laya.Image;c.removeChildren();g_main_npcdialog=c;g_main_npcdialogopen=!0;c.visilbe=!0;c.name="yangdaweigood";c.skin="gameres/ui/buffkuang.png";c.sizeGrid="4,4,4,4";c.width=100;c.height=100;c.pos(Laya.stage.mouseX,Laya.stage.mouseY);var h="";Laya.stage.addChild(c);if(b&&-1!=b.indexOf("/@")){var l=b.split("/@"),b=l[0].split("^");if(a.target.BoIsOpen){if(-1!=l[1].indexOf("@"))-1!=l[1].indexOf("inputstring")&&(-1!=l[1].indexOf("(")&&-1!=l[1].indexOf(")")?(h=l[1],h=h.substring(h.indexOf("(")+1,h.indexOf(")"))):h="\u8f93\u5165\u4fe1\u606f:"),Laya.stage.event("show_alert_dlg",[{type:4,txt:h,ipttype:"string",callfn:function(a){Sendmessage.SendNpcCMD("@"+l[1]+"\r"+a,G_NPC_ID,99)}}]);else if(Sendmessage.SendNpcCMD("@"+l[1],G_NPC_ID,0),"\u539f\u5730\u590d\u6d3b"==l[1]||"\u5b89\u5168\u590d\u6d3b"==l[1])g_NpcCan_s_repair=g_NpcCan_repair=g_NpcCan_sell=g_NpcCan_buy=!1,GameApi.ShowNewNpcDlg(!1);GameUtil.PlayMusicFormat(S_BUTTON_3)}}else b=b.split("^");for(h=0;h<b.length;h++){if(""!=b[h]){if(-1!=b[h].indexOf("#"))var m=b[h].split("#"),n=m[0].split("|"),n=null==n[1]?Get2RGB(n[0]):Get2RGB(n[1]),m=m[1];else n="#ffffff",m=b[h].split("|"),m=null==m[1]?m[0]:m[1];-1!=m.indexOf(":")&&(m=m.split(":")[0]);var q=new Laya.Text;q.fontSize=g_npcTxtSize;q.color=n;q.text=m;q.pos(3,g);q.width>f&&(f=q.width+7);c.addChild(q)}g+=16}a.target.BoIsOpen=!0;c.pos(Laya.stage.mouseX,Laya.stage.mouseY);c.width=f;c.height=20*b.length}};b.onShowItemClick=function(a){-1!=a&&a<g_Showitem.length&&null!=g_Showitem[a]&&(g_OpenIdx=5,g_MoveItems.Items=g_Showitem[a],GameUtil.NewShowItemsInf(g_MoveItems.Items))};b.FindNewTaskByID=function(a){for(var b=0;b<g_newTaskList.length;b++)if(g_newTaskList[b][0]===a)return g_newTaskList[b];return null};b.CheckSameTaskByID=function(a){for(var b=0;b<g_newTaskNodeList.length;b++)if(g_newTaskNodeList[b].name==a+"")return b;return-1};b.GetSameTaskByID=function(a){for(var b=0;b<g_newTaskNodeList.length;b++)if(g_newTaskNodeList[b].name==a+"")return g_newTaskNodeList[b];return null};b.ReflashTaskShow=function(){for(var a=0,b=0;b<g_newTaskNodeList.length;b++)g_newTaskNodeList[b].y=a,a+=g_newTaskNodeList[b].height};b.ReplaceNewTaskVar=function(a,b){var c=-1;return a.replace(/%s/ig,function(){c++;return c<b.length?b[c]:""})};b.DelNewTaskShow=function(a){if(this.FindNewTaskByID(a)){var b=this.CheckSameTaskByID(a);-1!=b&&(a=g_taskPanel.getChildByName(a+""))&&(g_newTaskNodeList.splice(b,1),a.removeSelf(),this.ReflashTaskShow(),g_taskPanel.refresh())}};b.AddNewTaskShow=function(a,b,c){var g=this.FindNewTaskByID(a);if(g&&b){var f=g_newTaskNodeList;c||(c=[]);var h=this.CheckSameTaskByID(a);if(-1==h){h=new Laya.HTMLDivElement;switch(b){case 1:h.innerHTML="\x3cbr\x3e"+g[1]+"\x3cbr\x3e"+g[2];break;case 2:h.innerHTML="\x3cbr\x3e"+g[1]+"\x3cbr\x3e"+this.ReplaceNewTaskVar(g[3],c);break;case 3:h.innerHTML="\x3cbr\x3e"+g[1]+"\x3cbr\x3e"+g[4]}c=new Laya.Button("gameres/ui/btn_newtask.png");c.stateNum=2;c.height=65<h.contextHeight?h.contextHeight+5:65;h.y+=5;h.name="html_task";h.mouseEnabled=!1;c.name=a+"";c.addChild(h);c.on(Laya.Event.CLICK,this,function(a){Sendmessage.sendNewTask(a)},[a]);c.order=g[6];g_taskPanel.addChild(c);f.push(c);f.sort(function(a,b){return a.order-b.order});console.log(f);this.NewTaskAddEffect(g,c,b);this.ReflashTaskShow()}else if(a=f[h])if(h=a.getChildByName("html_task")){switch(b){case 1:h.innerHTML="\x3cbr\x3e"+g[1]+"\x3cbr\x3e"+g[2];break;case 2:h.innerHTML="\x3cbr\x3e"+g[1]+"\x3cbr\x3e"+this.ReplaceNewTaskVar(g[3],c);break;case 3:h.innerHTML="\x3cbr\x3e"+g[1]+"\x3cbr\x3e"+g[4];break;default:return}a.height=65<h.contextHeight?h.contextHeight+5:65;this.NewTaskAddEffect(g,a,b);this.ReflashTaskShow()}}};b.NewTaskAddEffect=function(a,b,c){var g=0;switch(c){case 1:case 2:case 3:g=a[5][c-1]}if(b&&0!=g){a=72;var f=a+11;switch(g){case 2:a=84;f=a+11;break;case 3:a=96,f=a+11}for(var h=1;3>=h;h++){var l=b.getChildByName("taskeffcet"+h);l&&h!=c&&l.removeSelf();if(l&&h==c){l.scale(200/185,b.height/62);return}}c=Animationmodule.playframe(!1,b,"gameres/animation/task/",a,f,100,!0,!1);c.scale(200/185,b.height/62);c.name="taskeffcet"+g}};b.newTaskHandle=function(a,b){if(a)switch(a.record){case 1:case 3:this.AddNewTaskShow(a.param,a.record);break;case 2:var c=b.split("|");this.AddNewTaskShow(a.param,a.record,c);break;case 4:this.DelNewTaskShow(a.param);break;case 5:b=b.split("\u0001");var c=Number(b[1]),g=Number(b[2]);isNaN(c)&&(c=0);isNaN(g)&&(g=0);g_newTaskNpcIcon={map:b[0].toLowerCase(),x:a.param,y:a.tag,type:a.series,offsetx:c,offsety:g};this.SetNewTaskNpc(g_newTaskNpcIcon);break;case 6:g_newTaskNpcIcon=null,this.DelNewTaskNpc()}};b.SetNewTaskNpc=function(a){for(var b=0;b<ObjectManage.object_list.length;b++){var c=ObjectManage.object_list[b];if(c&&2==c.type){var g=c.getChildByName("tasknpc");g&&g.removeSelf();this.SetNewTaskNpcIcon(c,a)}}};b.DelNewTaskNpc=function(a){for(a=0;a<ObjectManage.object_list.length;a++){var b=ObjectManage.object_list[a];b&&2==b.type&&(b=b.getChildByName("tasknpc"))&&b.removeSelf()}};b.SetNewTaskNpcIcon=function(a,b){if(a&&b&&Mapdata.cur_id==b.map&&a.grid.x==b.x&&a.grid.y==b.y){var c=new Laya.Point(25+b.offsetx,-80+b.offsety),g=0,f=7;2==b.type&&(g=8,f=15);Animationmodule.playframe(!1,a,"gameres/animation/tasknpc/",g,f,120,!0,!1,c).name="tasknpc"}};b.getUrl=function(a,b){var c="",g=b;1E4<=b&&(c=Math.floor(b/1E4),g=b%1E4);g=("000000"+g).slice(-6);return c=GameUtil.getImageSetNameByPath("data/"+a+c+"/"+g).replace(".atlas","/"+g+".png")};return b}(),GameUtil=function(){function b(){this.SkillRockeNum=this.SkillListType=null;this.boShowBoundary=!1;this.canvas2D=null;this.currLoadMusic={}}b.GetItemType=function(a){var b=-1;if(void 0==a)return b;5==a.StdMode||6==a.StdMode||95==a.StdMode?b=U_WEAPON:10==a.StdMode||11==a.StdMode?b=U_DRESS:15==a.StdMode?b=U_HELMET:19==a.StdMode||20==a.StdMode||21==a.StdMode?b=U_NECKLACE:22==a.StdMode||23==a.StdMode?(b=U_RINGL,1<=a.Expand1&&12>=a.Expand1&&4<=a.OverLap&&7>=a.OverLap&&(b=U_GODBLESS1+a.Expand1-1)):24==a.StdMode||26==a.StdMode?b=U_ARMRINGR:29==a.StdMode||30==a.StdMode?b=U_RIGHTHAND:70<=a.StdMode&&74>=a.StdMode?b=U_ICON:25==a.StdMode||51==a.StdMode||96==a.StdMode?b=U_BUJUK:52==a.StdMode||62==a.StdMode||28==a.StdMode?b=U_BOOTS:7==a.StdMode||53==a.StdMode||63==a.StdMode?b=U_CHARM:54==a.StdMode||64==a.StdMode||27==a.StdMode?b=U_BELT:16==a.StdMode?b=U_HAT:48==a.StdMode?b=U_SHIELD:65==a.StdMode?b=U_DRUM:66==a.StdMode||67==a.StdMode?b=U_FASHIONDRESS:68==a.StdMode||69==a.StdMode?b=U_FASHIONWEAPON:178==a.StdMode?b=U_FASHIONHELMET:75==a.StdMode||76==a.StdMode||77==a.StdMode?b=U_FASHIONNECKLACE:79==a.StdMode||80==a.StdMode?b=U_FASHIONARMRINGR:81==a.StdMode||82==a.StdMode?b=U_FASHIONRINGL:83==a.StdMode?b=U_FASHIONRIGHTHAND:84==a.StdMode||85==a.StdMode?b=U_FASHIONBELT:86==a.StdMode||87==a.StdMode?b=U_FASHIONBOOTS:88==a.StdMode||89==a.StdMode?b=U_FASHIONCHARM:78==a.StdMode&&(b=U_HORSE);if(b==U_RINGL||b==U_ARMRINGR||b==U_HELMET||b==U_NECKLACE)if(4==a.OverLap)b=U_GODBLESS1;else if(6==a.OverLap)b=U_JEWELRYGODBLESSANYPOS;else if(7==a.OverLap)b=U_ANYPOS;else if(2==a.OverLap)if(1<=a.Expand1&&6>=a.Expand1)b=U_JEWELRY1+a.Expand1-1;else if(0==a.Expand1||7==a.Expand1)b=U_JEWELRYRandom;return b};b.UserInFriendHMD=function(a){for(var b=0;b<G_Friend_HMD_List.length;b++)if(G_Friend_HMD_List[b].split(":")[0]==a)return!0;return!1};b.UserInFriendList=function(a){a.split(",");for(var b=0;b<G_Friend_List.length;b++)if(G_Friend_List[b].split(",")==a)return G_FightSetList[b]=a,!0;return!1};b.InstanceOfMem=function(a){for(var b=0;b<Laya.stage._childs.length;++b){var c=Laya.stage._childs[b];if(c.__super==a)return c}return!1};b.hasArrive=function(a,b,c){return a.distance(b.x,b.y)<c};b.reverse8dis=function(a){if(0==a)return 4;if(1==a)return 5;if(2==a)return 6;if(3==a)return 7;if(4==a)return 0;if(5==a)return 1;if(6==a)return 2;if(7==a)return 3};b.equalcoordinate=function(a,b,c,d){c=(b.x-a.x)/c;x=a.x+d*c;y=(a.y*(b.x-a.x)+(a.x+d*c-a.x)*(b.y-a.y))/(b.x-a.x);return new Laya.Point(Math.floor(x),Math.floor(y))};b.getpointdir=function(a,b,c){if(a.x==b.x&&a.y==b.y)return 0;a=new Laya.Point(b.x-a.x,b.y-a.y);a.normalize();c*=Math.sqrt(1/(a.x*a.x+a.y*a.y));return new Laya.Point(c*a.x,c*a.y)};b.ParseUIPos=function(a){if(a==U_ARMRINGL)return 9;if(a==U_RINGL)return 3;if(a==U_BUJUK)return 4;if(a==U_BELT)return 5;if(a==U_BOOTS)return 6;if(a==U_CHARM)return 7;if(a==U_RINGR)return 8;if(a==U_ARMRINGR)return 2;if(a==U_RIGHTHAND)return 1;if(a==U_NECKLACE)return 10;if(a==U_HORSE)return 11;if(a==U_HELMET)return 12;if(a==U_DRESS)return 13;if(a==U_WEAPON)return 14};b.getmoverule=function(a,b,c){var d=2;b&&c&&(a=this.getorientation(a,b),b=this.getorientation(b,c),a==b?d=3:d=2);return d};b.getMovePoint=function(a,b,c){var d=new Laya.Point;switch(b){case DIR_UP:d.x=a.x;d.y=a.y-c;break;case DIR_RIGHT_UP:d.x=a.x+c;d.y=a.y-c;break;case DIR_RIGHT:d.x=a.x+c;d.y=a.y;break;case DIR_RIGHT_DOWN:d.x=a.x+c;d.y=a.y+c;break;case DIR_DOWN:d.x=a.x;d.y=a.y+c;break;case DIR_LEFT_DOWN:d.x=a.x-c;d.y=a.y+c;break;case DIR_LEFT:d.x=a.x-c;d.y=a.y;break;case DIR_LEFT_UP:d.x=a.x-c,d.y=a.y-c}0>d.x&&(d.x=0);0>d.y&&(d.y=0);return d};b.getmovedir=function(a,b,c,d){c=new Laya.Point;c.x=a-d/1.414;c.y=b+d/1.414*.667;return c};b.getAngle=function(a,b){var c=Math.atan2(a.y-b.y,a.x-b.x);0<c?c=180*c/Math.PI:c=180*(2*Math.PI+c)/Math.PI;return c};b.getorientation16=function(a){return a>22.5-22.4&&44.9>=a?13:22.6<a&&67.4>=a?14:45.1<a&&89.9>=a?15:67.6<a&&112.4>=a?0:90.1<a&&134.9>=a?1:112.6<a&&157.4>=a?2:135.1<a&&179.9>=a?3:157.6<a&&202.4>=a?4:180.1<a&&224.9>=a?5:202.6<a&&247.4>=a?6:225.1<a&&269.9>=a?7:247.6<a&&292.4>=a?8:270.1<a&&314.9>=a?9:292.6<a&&337.4>=a?10:315.1<a&&359.9>=a?11:12};b.get8orientation=function(a){return 22.6<a&&67.4>=a?7:67.6<a&&112.4>=a?0:112.6<a&&157.4>=a?1:157.6<a&&202.4>=a?2:202.6<a&&247.4>=a?3:247.6<a&&292.4>=a?4:292.6<a&&337.4>=a?5:6};b.getorientation=function(a,b){var c=0,d=1,c=a.x<b.x?1:a.x==b.x?0:-1;2<Math.abs(a.y-b.y)&&a.x>=b.x-1&&a.x<=b.x+1&&(c=0);d=a.y<b.y?1:a.y==b.y?0:-1;2<Math.abs(a.x-b.x)&&a.y>=b.y-1&&a.y<=b.y+1&&(d=0);if(0==c&&-1==d)return DIR_UP;if(1==c&&-1==d)return DIR_RIGHT_UP;if(1==c&&0==d)return DIR_RIGHT;if(1==c&&1==d)return DIR_RIGHT_DOWN;if(0==c&&1==d)return DIR_DOWN;if(-1==c&&1==d)return DIR_LEFT_DOWN;if(-1==c&&0==d)return DIR_LEFT;if(-1==c&&-1==d)return DIR_LEFT_UP};b.setbodycolor=function(a,b,c){if(null!=b)if(0!=(b&67108864)?(a.setbodycolor(3),c==playerID&&(a.paralysis_state=!0,Actionlock=!1)):0!=(b&1073741824)?(a.setbodycolor(1),this.playerActionLockReset(c,a)):0!=(b&2147483648)?(a.setbodycolor(2),this.playerActionLockReset(c,a)):0!=(b&536870912)?(a.setbodycolor(4),this.playerActionLockReset(c,a)):0!=(b&134217728)?(a.setbodycolor(5),this.playerActionLockReset(c,a)):0!=(b&524288)?(a.setbodycolor(6),this.playerActionLockReset(c,a)):(a.setbodycolor(0),c==playerID&&(Actionlock=!1,a.paralysis_state=!1)),a.setInvisable(0!=(b&8388608)),0!=(b&1048576)&&0==(b&67108864)){if(THumFeature(a.data.fea.buffer))var d=THumFeature(a.data.fea.buffer).btJob;2==d?Skillmodule.EQsecure(29,a,58):Skillmodule.EQsecure(29,a,31)}else c&&Skillmodule.closeEQsecure(c)};b.checkParalysisM2=function(a){var b=1==g_ClientConfig.boParalyCanWalk,c=1==g_ClientConfig.boParalyCanRun,d=1==g_ClientConfig.boParalyCanSpell,e=1==g_ClientConfig.boParalyCanHit;return a==E_PARALYSISACTIVE.WALK?b:a==E_PARALYSISACTIVE.RUN?c:a==E_PARALYSISACTIVE.MAGIC?d:a==E_PARALYSISACTIVE.ATTACK?e:!1};b.playerActionLockReset=function(a,b){a==playerID&&(Actionlock=!1,b.paralysis_state=!1)};b.getJobName=function(a){switch(a){case 0:return"\u6218\u58eb";case 1:return"\u6cd5\u5e08";case 2:return"\u9053\u58eb"}};b.getprefixname=function(a,b){return(Array(b).join("0")+a).slice(-b)};b.loadDressSurface=function(a,b){};b.conversions2=function(a,b){};b.delhalo=function(a){if(a=ObjectManage.findobject(a)){object.is_halo=!1;var b=a.getChildByName("halo");b&&b.removeSelf();Animationmodule.removeAniname("halo");Laya.stage.event("del_unlock_icon");lockingList=[];attackerID=lockingID=0;chaseing=!1;Fightmodule.path_list=[];Objectcontrol.use_attack=!1;Laya.stage.event("show_target_head",[!1]);3==a.type&&a.txt_Img&&(a.txt_Img.visible=!0===GlobalCfglist.nameshow3&&!1===GlobalCfglist.ShowName,a.txt_name.y=a.txt_Img.visible?a.txt_Img.x+a.txt_Img.height-25:-25);!0===GlobalCfglist.nameshow3&&!0===GlobalCfglist.ShowName&&3==a.type&&(a.txt_name.text=a.txt_name.lines[a.txt_name.lines.length-1])}};b.clearResByUrl=function(a,c){c=void 0===c?!1:c;0!=a.indexOf("gameres/animation")&&a.indexOf(".atlas")!=a.length-6&&(a=b.getImageSetNameByPath(a));c?Laya.loader.clearTextureRes(a):Laya.loader.clearRes(a,!0)};b.addhalo=function(a){a.is_halo=!0;this.delhalo(lockingID);g_boMagicGood=!1;var b=a.getChildByName("halo");b&&b.removeSelf();a.data&&(1==a.type?b=Animationmodule.playframe(!0,a,"gameres/animation/halo/",550,555,100,!0,!1):3==a.type&&(b=Animationmodule.playframe(!0,a,"gameres/animation/halo/",556,561,100,!0,!1)),b&&(b.name="halo",b.x-=18,b.y-=18,b.zOrder=0),3==a.type&&1==GlobalCfglist.nameshow3&&a.txt_Img&&(a.txt_Img.visible=!0,a.txt_name.y=a.txt_Img.x+a.txt_Img.height-25),3==a.type&&1==GlobalCfglist.nameshow3&&!0===GlobalCfglist.ShowName&&(a.txt_name.visible=!0,a.txt_name.update(a.txt_name.cur_name,null,a)),lockingID=a.data.record,lockingList.push(a.data.record),Laya.stage.event("add_unlock_icon"),Laya.stage.event("show_target_head",[!0]))};b.clickfly=function(){clickname&&(Sendmessage.SendNpcCMD(clickname,rw_recog),clickname=null)};b.getcomplete=function(){taskcomplete&&(Sendmessage.SendNpcCMD(taskcomplete,rw_recog),taskcomplete=null)};b.onLa_CLICK=function(a){Sendmessage.sendtomsg(CM_MERCHANTDLGSELECT,rw_recog,0,0,0,"@"+a.target.name);Laya.stage.event("UPDATETASK",[""]);Laya.Tween.to(a.target,{scaleX:.7,scaleY:.7},150)};b.onLa_CLICK_OVER=function(a){Laya.Tween.to(a.target,{scaleX:1,scaleY:1},150)};b.onRWWin_CLICK=function(){};b.GetMissGloba=function(a,b,c){for(var d=!1,e=b,g=0;g<g_GlobalList.length;g++)if(g_GlobalList[g].sName==a){0==c?e=g_GlobalList[g].nCount:(g_GlobalList[g].nCount=b,""!=sNewNpcStr&&0<parseInt(b)&&Laya.stage.event("Show_NewNpc",[sNewNpcStr]));d=!0;break}d||(c=new TaskGloba,c.sName=a,c.nCount=b,g_GlobalList.push(c));return e};b.movestep=function(a,b,c,d){var e=new Laya.Point;switch(a){case 0:0>c.y?e.y=32*b.y+c.y:e.y=32*(b.y-d)+c.y;break;case 1:0<c.x?e.x=48*b.x+c.x:e.x=48*(b.x+d)+c.x;0>c.y?e.y=32*b.y+c.y:e.y=32*(b.y-d)+c.y;break;case 2:0<c.x?e.x=48*b.x+c.x:e.x=48*(b.x+d)+c.x;break;case 3:0<c.x?e.x=48*b.x+c.x:e.x=48*(b.x+d)+c.x;0<c.y?e.y=32*b.y+c.y:e.y=32*(b.y+d)+c.y;break;case 4:0<c.y?e.y=32*b.y+c.y:e.y=32*(b.y+d)+c.y;break;case 5:0>c.x?e.x=48*b.x+c.x:e.x=48*(b.x-d)+c.x;0<c.y?e.y=32*b.y+c.y:e.y=32*(b.y+d)+c.y;break;case 6:0>c.x?e.x=48*b.x+c.x:e.x=48*(b.x-d)+c.x;break;case 7:0>c.x?e.x=48*b.x+c.x:e.x=48*(b.x-d)+c.x,0>c.y?e.y=32*b.y+c.y:e.y=32*(b.y-d)+c.y}return e};b.moverule=function(a,c,d){var e=Mapmodule.CanMove(a,c,d),g=ObjectManage.hasobstacle(a,c,d);return e&&g?b.getMovePoint(a,c,d):!1};b.moveshift=function(a,b,c,d,e,g){g=e=0;var p=48*b,r=32*b;c>d&&(c=d);var v=Math.round((d-c-1)/d)*b;switch(a){case 0:v=Math.round((d-c)/d-1E-5)*b;e=0;g=v==b?-Math.round(r/d*c):Math.round(r/d*(d-c));break;case 1:v=Math.round((d-c+(6<=d?2:0))/d-1E-5)*b;v==b?(e=Math.round(p/d*c),g=-Math.round(r/d*c)):(e=-Math.round(p/d*(d-c)),g=Math.round(r/d*(d-c)));break;case 2:v=Math.round((d-c)/d-1E-5)*b;e=v==b?Math.round(p/d*c):-Math.round(p/d*(d-c));g=0;break;case 3:v=Math.round((d-c-(6<=d?2:0))/d-1E-5)*b;v==b?(e=Math.round(p/d*c),g=Math.round(r/d*c)):(e=-Math.round(p/d*(d-c)),g=-Math.round(r/d*(d-c)));break;case 4:v=Math.round((d-c-(6<=d?1:0))/d-1E-5)*b;e=0;g=v==b?Math.round(r/d*c):-Math.round(r/d*(d-c));break;case 5:v=Math.round((d-c-(6<=d?2:0))/d-1E-5)*b;v==b?(e=-Math.round(p/d*c),g=Math.round(r/d*c)):(e=Math.round(p/d*(d-c)),g=-Math.round(r/d*(d-c)));break;case 6:v=Math.round((d-c)/d-1E-5)*b;e=v==b?-Math.round(p/d*c):Math.round(p/d*(d-c));g=0;break;case 7:v=Math.round((d-c+(6<=d?2:0))/d-1E-5)*b,v==b?(e=-Math.round(p/d*c),g=-Math.round(r/d*c)):(e=Math.round(p/d*(d-c)),g=Math.round(r/d*(d-c)))}return new Laya.Point(e,g)};b.GetDiyNpcData=function(a){for(var b=null,c=0;c<g_DiyNPCList.length;c++)if(a==g_DiyNPCList[c].Index){b=g_DiyNPCList[c];break}return b};b.rulebymon=function(a,c,d,e,g){var q=this.getActonModel(a,c),p,r,v,w=0,z=0,C=0,u=0;if(50==a)if(DiyNpc=this.GetDiyNpcData(c),null!=DiyNpc){if(0==DiyNpc.UseDirs[e])for(var B=0;B<DiyNpc.UseDirs.length;B++)DiyNpc.UseDirs[B]&&(e=B);if(DiyNpc.UseDirs[e]){p=[];a=[];1==d?(v=g_pak_list[DiyNpc.ImgFrames[e].StandBaseImg.FileID],q=DiyNpc.ImgFrames[e].StandBaseImg.Speed,u=DiyNpc.ImgFrames[e].StandBaseImg.ImageID,d=DiyNpc.ImgFrames[e].StandBaseImg.Count,sublen=DiyNpc.ImgFrames[e].StandAddImg.Count,subidx=DiyNpc.ImgFrames[e].StandAddImg.ImageID,subfile=g_pak_list[DiyNpc.ImgFrames[e].StandAddImg.FileID]):(v=g_pak_list[DiyNpc.ImgFrames[e].ActBaseImg.FileID],q=DiyNpc.ImgFrames[e].ActBaseImg.Speed,u=DiyNpc.ImgFrames[e].ActBaseImg.ImageID,d=DiyNpc.ImgFrames[e].ActBaseImg.Count,sublen=DiyNpc.ImgFrames[e].ActAddImg.Count,subidx=DiyNpc.ImgFrames[e].ActAddImg.ImageID,subfile=g_pak_list[DiyNpc.ImgFrames[e].ActAddImg.FileID]);for(B=u;B<u+d;B++)p.push(this.getprefixname(B,6));for(B=subidx;B<subidx+sublen;B++)a.push(this.getprefixname(B,6));B=[];B.file=v;B.ftime=q;B.frames=p;-1!=subfile&&(B.sub_file=subfile);B.sub_frames=a;return B}}else p=this.loadNpcSurface(a,c),r=this.getNpcOffSet(c),v="npc",0<p&&(v="npc"+p),z=e%3,p=0;else p=parseInt(c/10)+1,r=b.getMonsterOffSet(c),z=e,1E3<=c?(p=0,v="graphics/mon/"+c,3700<=c&&3800>c?(v="mon",p=parseInt(c/100)+1):156==a&&0<c&&(v="shijiemon")):950<=c&&960>c?(v="mon-kulou",p=0):v="mon";83!=a||904!=c&&800!=c||(v="dragon",p=r=0,7==d&&(d=3));if(obj_config){e=0==p?"":p;p=[];var u=this.getstatenamebymon(d),A=obj_config[q][u].frame,D=obj_config[q][u].frame,F=obj_config[q][u].skip,E=obj_config[q][u].start;50==a&&45==c?(u="ActStand",z=0,A=obj_config[q][u].frame):34==a&&131==c?z=0:34==a&&141==c?z=0:43==a&&41==c?z=0:33==a&&140==c?z=0:50==a&&34==c?(z=0,u="ActStand",A=4,C=2130):83!=a||904!=c&&800!=c?23==a&&37==c&&"ActDeath"==u?z=0:49==a&&63==c&&"ActDeath"==u?z=0:13!=a||10!=c||"ActDeath"!=u&&"ActStand"!=u?100==a&&173==c&&"ActDie"==u?A=6:50!=a||78!=c&&83!=c&&84!=c&&85!=c&&86!=c&&87!=c?50!=a||67!=c&&68!=c&&69!=c&&70!=c&&71!=c&&72!=c?50!=a||64!=c&&65!=c&&66!=c&&82!=c?50!=a||60!=c&&61!=c?19==a&&1005==c&&"ActDie"==u?A=5:78==a&&221==c&&"ActDie"==u?(A=10,z/=2):156==a&&242==c?"ActAttack"==u||"ActStand"==u?(r=1090,A=4):"ActWalk"==u?r=1090:"ActDie"==u?(r=1090,A=10):"ActStruck"==u&&(r=1090):50==a&&89==c?(A=1,z=0,u="ActStand",C=12,w=9,E=0):160==a&&324==c?(z=0,"ActDie"==u&&(r=2370)):109==a&&325==c?z=0:109==a&&326==c?z=0:161==a&&327==c?(z=0,"ActDie"==u&&(r=3040,A=18)):112==a&&336==c?z=0:112==a&&337==c?z=0:162==a&&370==c?"ActAttack"==u?r=90:"ActStand"==u?r=170:"ActDie"==u?r=90:"ActDeath"==u?(u="ActWalk",r=-80,A=9):"ActStruck"==u&&(r=90):165==a&&3712==c?10==d?(r=6370,u="ActAttack",D=A=8,F=2,E=0):11==d?(r=6290,u="ActAttack",D=A=8,F=2,E=0):12==d?(r=6450,u="ActAttack",D=A=8,F=2,E=0):"ActDie"==u&&(r=6130,D=A=16,F=4,E=0):165==a&&3713==c?10==d?(r=7180,u="ActAttack",D=A=8,F=2,E=0):11==d?(r=7100,u="ActAttack",D=A=10,E=F=0):"ActDie"==u&&(r=6940,D=A=14,F=6,E=0):19==a&&290==c?("ActWalk"==u&&(r=440),"ActDie"==u&&(D=10,F=0,E=260)):19==a&&291==c?("ActWalk"==u?(r=440,E=0):"ActStand"==u&&(r=360),"ActStruck"==u&&(r=600,D=2,E=F=0),"ActDie"==u&&(r=620,D=10,E=F=0)):19==a&&292==c?("ActWalk"==u?(r=800,E=0):"ActStand"==u&&(r=720),"ActDie"==u&&(r=980,D=10,E=F=0),"ActStruck"==u&&(r=960,D=2,E=F=0)):99==a&&900==c?(v="effect",z=0,e="","ActStand"==u?(A=0,p.push("00080")):"ActStruck"==u?(A=4,r=80):"ActDie"==u&&(A=10,r=80,E=24)):98==a&&901==c?(v="effect",z=0,e="","ActDie"==u?(A=5,r=168,E=0):(A=0,null==g&&(g=0),p.push("000"+(168+g)))):98==a&&902==c?(v="effect",z=0,e="","ActDie"==u?(A=5,r=184,E=0):(A=0,null==g&&(g=0),p.push("000"+(184+g)))):98==a&&903==c?(v="effect",z=0,e="","ActDie"==u?(A=5,r=200,E=0):(A=0,null==g&&(g=0),p.push("000"+(200+g)))):50!=a||308!=c&&312!=c&&313!=c&&314!=c&&315!=c&&316!=c&&317!=c?50!=a||318!=c&&319!=c&&320!=c&&324!=c&&325!=c&&326!=c&&327!=c&&328!=c&&329!=c&&300!=c?50!=a||88!=c&&321!=c&&322!=c&&323!=c?50==a&&310==c?(A=4,E=0,u="ActStand",w=C=0):50==a&&311==c?"ActAttack"==u&&(A=15,r=770,z=E=0):50==a&&46==c&&(A=4,E=z=0,u="ActStand",w=C=0):(A=1,E=z=0,u="ActStand",w=C=0):(A=1,E=z=0,u="ActStand",w=C=0):(A=1,E=z=0,u="ActStand",w=C=0):(z=1,u="ActStand",A=4,E=0):(z=0,u="ActStand",A=4,E=0):(z=0,u="ActStand",C=A=4,E=0):(z=0,u="ActStand",A=10,E=0):(z=0,"ActDeath"==u&&(r=10,E=0,A=8)):z=0;for(B=0;B<A;B++){var G=""+this.getprefixname(r+E+B+z*(D+F),6);p.push(G)}a=[];if(0!=C)if(1E3<C)for(B=0;10>B;B++)a.push(this.getprefixname(C+w+B,6));else for(B=1;B<=C;B++)a.push(this.getprefixname(parseInt(G)+w+B,6));B=[];B.file=v+e;B.ftime=obj_config[q][u].ftime;B.frames=p;B.sub_frames=a;return B}};b.getstatenamebymon=function(a){var b="ActStand";switch(a){case 0:case 1:b="ActStand";break;case 2:b="ActWalk";break;case 3:b="ActAttack";break;case 4:b="ActCritical";break;case 5:b="ActStruck";break;case 6:b="ActDie";break;case 7:b="ActDeath";break;case 8:b="ActAttack2";break;case 9:b="ActWalk";break;case 10:b="ActAttack";break;case 11:b="ActAttack";break;case 12:b="ActAttack"}return b};b.getstatenamebyplayer=function(a){var b="ActStand";switch(a){case 1:b="ActStand";break;case 2:b="ActWalk";break;case 3:b="ActRun";break;case 4:b="ActRushLeft";break;case 5:b="ActRushRight";break;case 6:b="ActWarMode";break;case 7:b="ActHit";break;case 8:b="ActHeavyHit";break;case 9:b="ActBigHit";break;case 10:b="ActFireHitReady";break;case 11:b="ActSpell";break;case 12:b="ActSitdown";break;case 13:b="ActStruck";break;case 14:b="ActDie"}return b};b.getresfilename=function(a,b,c,d){var e="";d=d?"":"data/";switch(b){case 1:e=d+a.file+"/";break;case 2:e=d+a.file+"/";break;case 3:e=d+a.file+"/";break;case 4:a.use_hores?e=d+"l-hairhorse/":e=d+a.hair_file+"/";break;case 5:e=d+a.weapon_file+"/";break;case 6:e=d+"l-horse/";break;case 7:e=d+a.wing_file+"/";break;case 8:e=d+a.wapeff_file+"/";break;case 11:e=d+a.shield_file+"/";break;case 12:e=d+a.shdeff_file+"/";break;case 13:e=d+c+"/"}return e};b.rulebyhat=function(a,b,c,d){var e;e=8>b?3600+1200*b+600*a:1200*(b-8)+600*a;a=[];if(obj_config){c=this.getstatenamebyplayer(c);for(var g=0;g<obj_config.HA[c].frame;g++){var p=""+this.getprefixname(e+obj_config.HA[c].start+g+d*(obj_config.HA[c].frame+obj_config.HA[c].skip),6);a.push(p)}}d=[];d.ftime=obj_config.HA[c].ftime;d.frames=a;d.file=8>b?"hair2":"hair3";return d};b.rulebyhair=function(a,b,c,d,e){var g=0;if(6>a)if(4>a||0<c)switch(b){case 0:g=1200*a;break;case 1:g=600*(2*a+1)}else switch(a){case 4:g=3600;break;case 5:g=4800;break;default:g=-1}else m_btHair=255,g=600*(4+2*b);a=[];if(obj_config)for(d=this.getstatenamebyplayer(d),b=0;b<obj_config.HA[d].frame;b++)c=""+this.getprefixname(g+obj_config.HA[d].start+b+e*(obj_config.HA[d].frame+obj_config.HA[d].skip),6),a.push(c);e=[];e.ftime=obj_config.HA[d].ftime;e.frames=a;e.file="hair2";return e};b.rulebydressforhores=function(a,c,d,e){var g=600*a,q=g_UserItemList[15],p=b.getMyObject();1==g_ridingShow&&(null!=q?(g=q.s.Reserved,g=0==p.skin_feature.btGender?0==parseInt(g%10)?10800:1200*(parseInt(g%10)-1):0==parseInt(g%10)?11400:1200*(parseInt(g%10)-.5)):g=0!=Math.floor((a-c)/2)?600*(2+c):g=600*c);p=[];if(obj_config)for(d=this.getstatenamebyplayer(d),a=0;a<obj_config.HA[d].frame;a++)c=""+this.getprefixname(g+obj_config.HA[d].start+a+e*(obj_config.HA[d].frame+obj_config.HA[d].skip),6),p.push(c);e=[];e.file="l-humhorse";e.ftime=obj_config.HA[d].ftime;e.frames=p;return e};b.rulebyhores=function(a,b,c,d){b=600*(a-1);a=[];if(obj_config){c=this.getstatenamebyplayer(c);for(var e=0;e<obj_config.HA[c].frame;e++){var g=""+this.getprefixname(b+obj_config.HA[c].start+e+d*(obj_config.HA[c].frame+obj_config.HA[c].skip),6);a.push(g)}}d=[];d.ftime=obj_config.HA[c].ftime;d.frames=a;d.file="l-horse";return d};b.rulebydress=function(a,b,c,d){var e=0;b="hum";2100<=a?(e=Math.floor(a/100),b+=e-16,e=a-100*e):2006<=a?(b="hum4",e=a-2006):2E3<=a?(b="hum3",e=a-1962):200<=a?(b="graphics/human/"+Math.floor(a/2),e=a%2):160<=a?(b="hum3",e=a-160):130<=a?(b="hum2",e=a-130):(b="hum",e=a);e*=600;a=[];if(obj_config){c=this.getstatenamebyplayer(c);for(var g=0;g<obj_config.HA[c].frame;g++){var p=""+this.getprefixname(e+obj_config.HA[c].start+g+d*(obj_config.HA[c].frame+obj_config.HA[c].skip),6);a.push(p)}}d=[];d.xid=e;d.ftime=obj_config.HA[c].ftime;d.frames=a;d.file=b;return d};b.GetJSDateTimeFromDelphi8Bytes=function(a){for(var b=new ArrayBuffer(8),c=new Uint8Array(b),d=0;8>d;d++)c[d]=a[d];a=new Float64Array(b);var e=new Date(parseInt(864E5*(a[0]-25569)-288E5));a=e.getFullYear();var b=e.getMonth()+1,b=10>b?"0"+b:b,c=e.getDate(),c=10>c?"0"+c:c,d=e.getHours(),d=10>d?"0"+d:d,g=e.getMinutes(),g=10>g?"0"+g:g,e=e.getSeconds();return a+"-"+b+"-"+c+" "+d+":"+g+":"+(10>e?"0"+e:e)};b.getformattimestamp=function(a){var b=new Date(a);a=b.getFullYear();var c=b.getMonth()+1,c=10>c?"0"+c:c,d=b.getDate(),d=10>d?"0"+d:d,e=b.getHours(),e=10>e?"0"+e:e,g=b.getMinutes(),b=b.getSeconds();return a+"-"+c+"-"+d+" "+e+":"+(10>g?"0"+g:g)+":"+(10>b?"0"+b:b)};b.rulebyweaponeeffect=function(a,b,c,d,e){if(0==g_pak_list.length)return null;var g=0,p="";if(0<=a){if(240<=a&&247>=a){switch(a){case 240:g=0+600*c;break;case 241:g=1200+600*c;break;case 242:g=6E3+600*c;break;case 243:g=8400+600*c;break;case 244:g=9600+600*c;break;case 245:g=10800+600*c;break;case 246:g=12600+600*c;break;case 247:g=13200+600*c}p="humeffect2"}else 0<=a&&a<g_pak_list.length&&(g=b+600*c,p=g_pak_list[a]);a=[];if(obj_config)for(d=this.getstatenamebyplayer(d),b=0;b<obj_config.HA[d].frame;b++)c=""+this.getprefixname(g+obj_config.HA[d].start+b+e*(obj_config.HA[d].frame+obj_config.HA[d].skip),6),a.push(c);e=[];e.ftime=obj_config.HA[d].ftime;e.frames=a;e.file=p;return e}};b.HumBodyEffect=function(a){a.wing_frames=[];a.obj_wing&&a.obj_wing.graphics.clear();var b=a.getChildByName("HumBodyEffect");null==b&&(b=Animationmodule.playframe(!1,a,"data/effect/",352,371,280,!0,!1))&&(b.name="HumBodyEffect")};b.rulebywing=function(a,b,c,d){var e=0,g="effect";switch(a){case 50:e=352;g="effect";break;case 242:e=2400+600*b;g="humeffect2";break;case 243:e=3600+600*b;g="humeffect2";break;case 244:e=4800+600*b;g="humeffect2";break;case 245:e=7200+600*b;g="humeffect2";break;default:e=600*(a-1),g="humeffect"}a=[];if(obj_config)for(c=this.getstatenamebyplayer(c),b=0;b<obj_config.HA[c].frame;b++){var p=""+this.getprefixname(e+obj_config.HA[c].start+b+d*(obj_config.HA[c].frame+obj_config.HA[c].skip),6);a.push(p)}d=[];d.ftime=obj_config.HA[c].ftime;d.frames=a;d.file=g;return d};b.DreesEffect=function(a,b,c,d,e){c="";var g=-1;6E4<a&&(a-=65536);0<=a&&a<g_pak_list.length?(c=g_pak_list[a],g=b):-9==a&&(c="humeffect",g=1200*b);if(""!=c&&0<=g){a=[];if(obj_config)for(d=this.getstatenamebyplayer(d),b=0;b<obj_config.HA[d].frame;b++){var p=""+this.getprefixname(g+obj_config.HA[d].start+b+e*(obj_config.HA[d].frame+obj_config.HA[d].skip),6);a.push(p)}e=[];e.ftime=obj_config.HA[d].ftime;e.frames=a;e.file=c;return e}};b.rulebyShieldEffect=function(a,b,c,d,e){c="";var g=-1;6E4<a&&(a-=65536);0<=a&&a<g_pak_list.length?(c=g_pak_list[a],g=b):-9==a&&(c="humeffect",g=1200*b);if(""!=c&&0<=g){a=[];if(obj_config)for(d=this.getstatenamebyplayer(d),b=0;b<obj_config.HA[d].frame;b++){var p=""+this.getprefixname(g+obj_config.HA[d].start+b+e*(obj_config.HA[d].frame+obj_config.HA[d].skip),6);a.push(p)}e=[];e.ftime=obj_config.HA[d].ftime;e.frames=a;e.file=c;return e}};b.rulebyShield=function(a,b,c,d){b=[];--a;if(0<=a){a*=600;if(obj_config){c=this.getstatenamebyplayer(c);for(var e=0;e<obj_config.HA[c].frame;e++){var g=""+this.getprefixname(a+obj_config.HA[c].start+e+d*(obj_config.HA[c].frame+obj_config.HA[c].skip),6);b.push(g)}}d=[];d.ftime=obj_config.HA[c].ftime;d.frames=b;d.file="s-shield";return d}};b.rulebyWeapon=function(a,b,c,d){if(2100<=a){var e=Math.floor(a/100);b="weapon"+(e-15);a=600*(a-100*e)}else 1024<=a&&1100>a?(a=600*(a-1024),b="weapon2"):1254<=a&&2E3>a?(a-=1254,a*=600,b="weapon3"):2078<=a?(a-=2078,a*=600,b="weapon5"):2024<=a?(a-=2024,a*=600,b="weapon4"):2E3<=a?(a-=1976,a*=600,b="weapon3"):200<=a&&2E3>=a?(e=Math.floor(a/2),a=600*(0+b),b="graphics/weapon/"+e):176<=a?(a-=176,a*=600,b="weapon3"):130<=a?(a-=130,a*=600,b="weapon2"):(a*=600,b="weapon");e=[];if(obj_config){c=this.getstatenamebyplayer(c);for(var g=0;g<obj_config.HA[c].frame;g++){var p=""+this.getprefixname(a+obj_config.HA[c].start+g+d*(obj_config.HA[c].frame+obj_config.HA[c].skip),6);e.push(p)}}d=[];d.ftime=obj_config.HA[c].ftime;d.frames=e;d.file=b;return d};b.loadDressSurfaceByHit=function(a,b){var c=0,d=b,d=Math.floor((a-b)/2);1E3>d?(204>=d&&(c=0),160<=d?d=2*(d-181)+b:80<=d?(d=2*(d-80)+b,c=3):d=65<=d?2*(d-65+12)+b:a):(c=Math.floor((d-100)/50)+2,d=2*Math.floor((d-100)%50)+b);return{nAppr:c,nDress:d}};b.loadHairSurfaceByHit=function(){};b.loadWeaponSurfaceByHit=function(a,b){};b.loadNpcSurface=function(a,b){var c=0;50==a&&(c=2E3<=b?10:1E3<=b?9:500<=b?1:300>b?0:300<=b&&328>=b?2:0);return c};b.getNpcOffSet=function(a){return 23>=a?60*a:24==a||25==a?60*(a-24)+1470:26==a||28==a||29==a||30==a||31==a||33<=a&&41>=a?60*(a-26)+1620:27==a||32==a?60*(a-26)+1620-30:42<=a&&47>=a?2580+60*(a-42):48==a?2960:49==a||50==a?3040:51<=a&&54>=a?3041+(a-51):55<=a&&62>=a?3060+60*(a-55):63==a?3600:64<=a&&72>=a?3750+10*(a-64):73<=a&&75>=a?3840+60*(a-73):76==a?3980:77==a?4E3:78==a?4030:79==a?4060:80==a?4120:81==a?4180:82==a?4240:83<=a&&88>=a?4490+10*(a-83):89==a?4560:90==a?4600:91<=a&&100>=a?4630+10*(a-91):101==a?4770:102==a?4810:300<=a&&310>=a?70*(a-300):311==a?740:312<=a&&317>=a?810+10*(a-312):318<=a&&320>=a?870+30*(a-318):321<=a&&323>=a?970+10*(a-321):324==a?1020:325==a?1030:326==a?1060:327==a?1061:328==a?1062:500<=a&&699>=a?60*(a-500):700<=a&&900>=a?70*(a-700):1E3<=a&&1999>=a?a-1E3:2E3<=a&&3E3>=a?a-2E3:3E3<=a&&4E3>=a?60*(a-3E3):1E3<=a?60*(a-1E3):200<a?70*(a-200):60*(a-200)};var c=0,a=0,d=0,e=0;b.Shift=function(b,h,l,g,n){var q=n.x;n=n.y;var p=48*h,r=32*h;d=n;e=q;switch(b){case 0:ss=parseInt(Math.round(g-l)/g)*h;c=0;e=q+ss;a=ss==h?-parseInt(Math.round(r/g*l)):parseInt(Math.round(r/g*(g-l)));break;case 1:b=6<=g?b=2:b=0;ss=parseInt(Math.round(g-l+b)/g)*h;d=n-ss;e=q+ss;ss==h?(c=parseInt(Math.round(p/g*l)),a=-parseInt(Math.round(r/g*l))):(c=-parseInt(Math.round(p/g*(g-l))),a=parseInt(Math.round(r/g*(g-l))));break;case 2:ss=parseInt(Math.round(g-l)/g)*h;d=n-ss;ss==h?c=parseInt(Math.round(p/g*l)):a=-parseInt(Math.round(p/g*(g-l)));a=0;break;case 3:b=6<=g?b=2:b=0;ss=parseInt(Math.round(g-l-b)/g)*h;d=n-ss;d=q-ss;ss==h?(c=parseInt(Math.round(p/g*l)),a=parseInt(Math.round(r/g*l))):(c=-parseInt(Math.round(p/g*(g-l))),a=-parseInt(Math.round(r/g*(g-l))));break;case 4:b=6<=g?b=1:b=0;ss=parseInt(Math.round(g-l-b)/g)*h;c=0;e=q-ss;a=ss==h?parseInt(Math.round(r/g*l)):-parseInt(Math.round(r/g*(g-l)));break;case 5:b=6<=g?b=2:b=0;ss=parseInt(Math.round(g-l-b)/g)*h;d=n+ss;e=q-ss;ss==h?(c=-parseInt(Math.round(p/g*l)),a=parseInt(Math.round(r/g*l))):(c=parseInt(Math.round(p/g*(g-l))),a=-parseInt(Math.round(r/g*(g-l))));break;case 6:ss=parseInt(Math.round(g-l)/g)*h;d=n+ss;c=ss==h?-parseInt(Math.round(p/g*l)):parseInt(Math.round(p/g*(g-l)));a=0;break;case 7:b=6<=g?b=2:b=0,ss=parseInt(Math.round(g-l+b)/g)*h,d=n+ss,e=q+ss,ss==h?(c=-parseInt(Math.round(p/g*l)),parseInt(Math.round(r/g*l))):(c=parseInt(Math.round(p/g*(g-l))),a=parseInt(Math.round(r/g*(g-l))))}};b.Countdir=function(a){a=0<a?180*a/Math.PI:180*(2*Math.PI+a)/Math.PI;return 10<a&&80>=a?3:80<a&&100>=a?2:100<a&&170>=a?1:170<a&&190>=a?0:190<a&&260>=a?7:260<a&&280>=a?6:280<a&&350>=a?5:4};b.GetDirByTargetPoint=function(a,b,c,d){return this.Countdir(Math.atan2(a-c,b-d))};b.GetNextPoint=function(a,b,c){0==c&&(b+=1);4==c&&--b;6==c&&(a+=1);2==c&&--a;7==c&&(a+=1,b+=1);1==c&&(--a,--b);5==c&&(a+=1,--b);3==c&&(--a,--b);return{x:a,y:b}};b.convertMapToScreen=function(b,h){return{x:48*(b-d)+532-c,y:48*(h-e)+336-a}};b.convertScreenToMap=function(b,h){var l=parseInt(Math.round(b-576+c)/48)+d,g=parseInt(Math.round(h-368+a)/32)+e;return{x:l,y:g}};b.getActonModel=function(a,b){switch(a){case 9:return"MA9";case 10:return"MA10";case 11:return"MA11";case 12:return"MA12";case 13:return"MA13";case 14:return"MA14";case 15:return"MA15";case 16:return"MA16";case 17:return"MA14";case 18:return"MA14";case 19:switch(b){case 258:return"MA258";case 264:return"MA264";default:return"MA19"}case 20:return"MA19";case 21:return"MA19";case 22:return"MA15";case 23:return"MA14";case 24:return"MA12";case 30:return"MA17";case 31:return"MA17";case 32:return"MA24";case 33:return"MA25";case 34:return"MA30";case 35:return"MA31";case 36:return"MA32";case 37:return"MA19";case 40:return"MA19";case 41:return"MA20";case 42:return"MA20";case 43:return"MA21";case 45:return"MA19";case 47:return"MA22";case 48:return"MA23";case 49:return"MA23";case 50:switch(b){case 23:return"MA36";case 24:return"MA37";case 25:return"MA37";case 26:return"MA35";case 27:return"MA37";case 28:return"MA35";case 29:return"MA35";case 30:return"MA35";case 31:return"MA35";case 32:return"MA37";case 33:return"MA35";case 34:return"MA35";case 35:return"MA41";case 36:return"MA41";case 37:return"MA41";case 38:return"MA41";case 39:return"MA41";case 40:return"MA41";case 41:return"MA41";case 42:return"MA46";case 43:return"MA46";case 44:return"MA36";case 45:return"MA36";case 46:return"MA36";case 48:return"MA41";case 49:return"MA41";case 50:return"MA41";case 51:return"MA35";case 52:return"MA41";case 53:return"MA41";case 71:return"MA50";case 76:return"MA35";case 99:return"MA60";case 100:return"MA1";case 101:return"MA101";case 102:return"MA60";case 304:return"MA60";case 305:return"MA60";case 306:return"MA60";case 309:return"MA60";case 310:return"MA210";default:return"MA35"}case 52:return"MA19";case 53:return"MA19";case 54:return"MA28";case 55:return"MA29";case 56:return"MA56";case 60:return"MA33";case 61:return"MA33";case 62:return"MA33";case 63:return"MA34";case 64:return"MA19";case 65:return"MA19";case 66:return"MA19";case 67:return"MA19";case 68:return"MA19";case 69:return"MA19";case 70:return"MA33";case 71:return"MA33";case 72:return"MA33";case 73:return"MA19";case 74:return"MA19";case 75:return"MA39";case 76:return"MA38";case 77:return"MA39";case 78:return"MA40";case 79:return"MA19";case 80:return"MA42";case 81:return"MA43";case 83:return"MA44";case 84:return"MA45";case 85:return"MA45";case 86:return"MA45";case 87:return"MA45";case 88:return"MA45";case 89:return"MA45";case 90:return"MA30";case 98:return"MA27";case 99:return"MA26";case 100:return"MA19";case 101:return"MA19";case 102:return"MA102";case 103:return"MA103";case 104:return"MA104";case 105:return"MA33";case 106:return"MA106";case 107:return"MA107";case 108:return"MA108";case 109:return"MA109";case 110:return"MA110";case 151:return"MA151";case 111:return"MA19";case 112:return"MA112";case 113:return"MA113";case 114:return"MA114";case 115:return"MA115";case 116:return"MA33";case 155:return"MA155a";case 92:return"MA92";case 27:return"MA92";case 29:return"MA92";case 150:return"MA92";default:return"MA19"}};b.getMonsterOffSet=function(a){if(1E3<a&&3700<=a&&3800>a){var b=parseInt(a/100);a%=100}else if(1E3>=a)b=parseInt(a/10),a%=10;else return 0;switch(b){case 0:return 280*a;case 1:return 230*a;case 4:return 1==a?600:360*a;case 5:return 430*a;case 6:return 440*a;case 13:switch(a){case 2:return 440;case 3:return 550;default:return 360*a}case 15:return 1<=a&&3>=a?360*a:0;case 17:switch(a){case 2:return 920;case 3:return 1280;default:return 350*a}case 18:switch(a){case 1:return 520;case 2:return 950;case 3:return 1574;case 4:return 1934;case 5:return 2294;case 6:return 2654;case 7:return 3014;default:return 0}case 19:switch(a){case 1:return 370;case 2:return 810;case 3:return 1250;case 4:return 1630;case 5:return 2010;case 6:return 2390;default:return 0}case 20:switch(a){case 1:return 360;case 2:return 720;case 3:return 1080;case 4:return 1440;case 5:return 1800;case 6:return 2350;case 7:return 3060;default:return 0}case 21:switch(a){case 1:return 460;case 2:return 820;case 3:return 1180;case 4:return 1540;case 5:return 1900;case 6:return 2440;case 7:return 2570;case 8:return 2700;default:return 0}case 22:switch(a){case 1:return 430;case 2:return 1290;case 3:return 1810;default:return 0}case 23:switch(a){case 1:return 340;case 2:return 680;case 3:return 1180;case 4:return 1770;case 5:return 2610;case 6:return 2950;case 7:return 3290;case 8:return 3750;case 9:return 4460;default:return 0}case 24:switch(a){case 1:return 510;case 2:return 1020;case 3:return 1030;case 4:return 1090;default:return 0}case 25:switch(a){case 1:return 510;case 2:return 1020;case 3:return 1370;case 4:return 1720;case 5:return 2070;case 6:return 2740;case 7:return 3780;case 8:return 3820;case 9:return 4170;default:return 0}case 26:switch(a){case 1:return 340;case 2:return 680;case 3:return 1190;case 4:return 2100;case 5:return 2440;case 6:return 2540;case 7:return 3570;default:return 0}case 27:switch(a){case 1:return 350;case 2:return 780;case 3:return 1130;case 4:return 1560;case 5:return 1910;default:return 0}case 28:return 0<=a&&8>=a?360*a:0;case 29:case 32:switch(a){case 1:return 440;case 2:return 820;case 3:return 1360;case 4:return 2650;case 5:return 2680;case 6:return 2790;case 7:return 2900;case 8:return 3500;case 9:return 3930;default:return 0}case 33:switch(a){case 1:return 720;case 2:return 1160;case 3:return 1840;case 4:return 2540;case 5:return 2900;case 6:return 3250;case 7:return 3310;default:return 20}case 34:switch(a){case 1:return 680;case 2:return 1030;default:return 0}case 37:switch(a){case 1:return 610;case 2:return 1050;case 3:return 1420;case 4:return 1860;case 5:return 2230;case 6:return 2670;case 7:return 3190;case 8:return 3710;case 9:return 4390;case 10:return 4750;case 11:return 5270;case 12:return 5870;case 13:return 6680;default:return 0}case 44:switch(a){case 1:return 340;case 2:return 690;case 3:return 1060;case 4:return 1420;case 5:return 1880;case 6:return 2810;case 7:return 3830;case 8:return 4760;case 9:return 5860;default:return 0}case 45:switch(a){case 1:return 1030;case 2:return 3610;case 3:return 4100;case 4:return 4610;case 5:return 5190;case 6:return 6010;case 7:return 6600;case 8:return 7100;case 9:return 7610;default:return 0}case 52:switch(a){case 1:return 520;case 2:return 1040;case 3:return 1560;case 4:return 2170;case 5:return 3240;case 6:return 4E3;case 7:return 4560;case 8:return 5560;case 9:return 5980;default:return 0}case 80:switch(a){case 1:return 80;case 2:return 300;case 3:return 301;case 4:return 302;case 5:return 320;case 6:return 321;case 7:return 322;case 8:return 321;default:return 0}case 90:switch(a){case 1:return 168;case 2:return 184;case 3:return 200;case 4:return 1770;case 5:return 1780;case 6:return 1790;default:return 0}default:return 360*a}};b.GetMagicJob=function(a){return 0==a?"\u6218\u58eb\u79d8\u7c4d":1==a?"\u6cd5\u5e08\u79d8\u7c4d":2==a?"\u9053\u58eb\u79d8\u7c4d":3==a?"\u523a\u5ba2\u79d8\u7c4d":98==a?"\u5408\u51fb\u79d8\u7c4d":"\u901a\u7528\u79d8\u7c4d"};var g=!0;b.GetDuraStr=function(a,b,c){1==g_ItemInfoFromShop&&(a=b);var d="";return d=g?Math.round(a/c)+"/"+Math.round(b/c):Math.round(a/c)};b.ShowItemValue=function(a,b){return a};b.GetColor=function(a){return 0<a?"#00ff00":"#ffffff"};b.GetColorString=function(a){return 0==a?"":"(+"+a+")"};b.GetTakeOnPosition=function(a,b,c,d){a||(a=-1);c||(c=-1);d||(d=-1);b=-1;5==a||6==a||95==a?b=U_WEAPON:10==a||11==a?b=U_DRESS:15==a?b=U_HELMET:19==a||20==a||21==a?b=U_NECKLACE:22==a?b=U_RINGL:23==a?b=U_RINGL:24==a||26==a?b=U_ARMRINGR:30==a||29==a?b=U_RIGHTHAND:70<=a&&74>=a?b=U_ICON:25==a||51==a||96==a?b=U_BUJUK:52==a||62==a||28==a?b=U_BOOTS:7==a||53==a||63==a?b=U_CHARM:54==a||27==a||64==a?b=U_BELT:16==a?b=U_HAT:48==a?b=U_SHIELD:65==a?b=U_DRUM:66==a||67==a?b=U_FASHIONDRESS:68==a||69==a?b=U_FASHIONWEAPON:178==a?b=U_FASHIONHELMET:75<=a&&77>=a?b=U_FASHIONNECKLACE:79==a||80==a?b=U_FASHIONARMRINGR:81==a||82==a?b=U_FASHIONRINGL:83==a?b=U_FASHIONRIGHTHAND:84==a||85==a?b=U_FASHIONBELT:86==a||87==a?b=U_FASHIONBOOTS:88==a||89==a?b=U_FASHIONCHARM:78==a&&(b=U_HORSE);if(b==U_RINGL||b==U_ARMRINGR||b==U_HELMET||b==U_NECKLACE)switch(d){case 4:case 6:case 7:b=U_ANYPOS;case 2:switch(c){case 1:case 2:case 3:case 4:case 5:case 6:b=U_JEWELRY1+c-1;break;case 0:case 7:b=U_JEWELRYRandom}}return b};b.GetGemInfo=function(a,b){var c="",d=0,e=0,g=0,p=0;1==b?(d=a.StdMode,e=a.Shape,g=a.AniCount,p=a.MaxMAC):(d=a.s.StdMode,e=a.s.Shape,g=a.s.AniCount,p=a.s.MaxMAC);if(46==d&&3==e)switch(g){case 1:c="\u9632\u5fa1:+"+p;break;case 2:c="\u9b54\u5fa1:+"+p;break;case 3:c="\u653b\u51fb\u529b:+"+p;break;case 4:c="\u9b54\u6cd5\u529b:+"+p;break;case 5:c="\u9053\u672f\u529b:+"+p;break;case 6:c="\u751f\u547d\u503c:+"+p;break;case 7:c="\u9b54\u6cd5\u503c:+"+p;break;case 8:c="\u51c6\u786e:+"+p;break;case 9:c="\u654f\u6377:+"+p;break;case 10:c="\u5e78\u8fd0:+"+p;break;case 11:1<=p&&10>=p?c="\u653b\u51fb\u901f\u5ea6:+"+p+"0%":10<p&&(c="\u653b\u51fb\u901f\u5ea6:+100%");break;case 12:1<=p&&10>=p?c="\u9b54\u6cd5\u8eb2\u907f:+"+p+"0%":10<p&&(c="\u9b54\u6cd5\u8eb2\u907f:+100%");break;case 13:1<=p&&10>=p?c="\u6bd2\u7269\u8eb2\u907f:+"+p+"0%":10<p&&(c="\u6bd2\u7269\u8eb2\u907f:+100%");break;case 14:1<=p&&10>=p?c="\u4e2d\u6bd2\u6062\u590d:+"+p+"0%":10<p&&(c="\u4e2d\u6bd2\u6062\u590d:+100%");break;case 15:1<=p&&10>=p?c="\u4f53\u529b\u6062\u590d:+"+p+"0%":10<p&&(c="\u4f53\u529b\u6062\u590d:+100%");break;case 16:1<=p&&10>=p?c="\u9b54\u6cd5\u6062\u590d:+"+p+"0%":10<p&&(c="\u9b54\u6cd5\u6062\u590d:+100%");break;case 17:1<=p&&10>=p?c="\u8d1f\u91cd(\u7a7f\u6234):+"+p+"0%":10<p&&(c="\u8d1f\u91cd(\u7a7f\u6234):+100%");break;case 18:1<=p&&10>=p?c="\u8d1f\u91cd(\u80cc\u5305):+"+p+"0%":10<p&&(c="\u8d1f\u91cd(\u80cc\u5305):+100%");break;case 19:c="\u9632\u5fa1\u4e0b\u9650:+"+p;break;case 20:c="\u9b54\u5fa1\u4e0b\u9650:+"+p;break;case 21:c="\u653b\u51fb\u529b\u4e0b\u9650:+"+p;break;case 22:c="\u9b54\u6cd5\u529b\u4e0b\u9650:+"+p;break;case 23:c="\u9053\u672f\u529b\u4e0b\u9650:+"+p;break;case 24:c="\u8bc5\u5492:+"+p}return c};b.GetGemInfoEX=function(a,b){var c="",d=0,e=0,g=0;1==b?(d=a.StdMode,e=a.Shape,g=a.AC,_MaxAC=a.MaxAC):(d=a.s.StdMode,e=a.s.Shape,g=a.s.AC,_MaxAC=a.s.MaxAC);if(46==d&&3==e)switch(g){case 1:c="\u66b4\u51fb\u51e0\u7387:+"+_MaxAC+"%";break;case 2:c="\u653b\u51fb\u4f24\u5bb3:+"+_MaxAC+"%";break;case 3:c="\u7269\u4f24\u51cf\u5c11:+"+_MaxAC+"%";break;case 4:c="\u9b54\u4f24\u51cf\u5c11:+"+_MaxAC+"%";break;case 5:c="\u5ffd\u89c6\u9632\u5fa1:+"+_MaxAC+"%";break;case 6:c="\u4f24\u5bb3\u53cd\u5f39:+"+_MaxAC+"%";break;case 7:c="\u4eba\u7269\u66b4\u7387:+"+_MaxAC+"%";break;case 8:c="\u4f53\u529b\u589e\u52a0:+"+_MaxAC;break;case 9:c="\u9b54\u529b\u589e\u52a0:+"+_MaxAC;break;case 10:c="\u6012\u6c14\u6062\u590d:+"+_MaxAC+"%";break;case 11:c="\u5408\u51fb\u4f24\u5bb3:+"+_MaxAC+"%";break;case 12:c="\u9632\u6b62\u9ebb\u75f9";break;case 13:c="\u9632\u6b62\u62a4\u8eab";break;case 14:c="\u9632\u6b62\u590d\u6d3b";break;case 15:c="\u9ebb\u75f9";break;case 16:c="\u590d\u6d3b";break;case 17:c="\u62a4\u8eab";break;case 18:c="\u8d1f\u91cd";break;case 19:c="\u8679\u9b54\u5438\u8840";break;case 20:c="\u6280\u5de7";break;case 21:c="\u63a2\u6d4b";break;case 22:c="\u9b54\u8840";break;case 23:c="\u4f53\u529b\u589e\u52a0:+"+_MaxAC+"%";break;case 24:c="\u9b54\u529b\u589e\u52a0:+"+_MaxAC+"%"}return c};b.GetLegTZInfo=function(a,c,d){this.GetTakeOnPosition(a.s.StdMode,a.s.Shape);var e=[];if(GomSuitOpen){if(!(1>Gomsuitlist.length)){for(var g=0;g<Gomsuitlist.length;g++){var q=Gomsuitlist[g];if(!q.suitname||-1!=(q.suititem+"|").indexOf("/"+a.s.Name+"|")){if(q.suitname&&-1!=q.suitname.indexOf("/")&&null!=q.suitnum){var p=q.suitname.split("/"),r=p[0],v=p[1],w=q.suitnum,z=GameApi.GomUseItemCnt(q.suititem,d);c.push(v+"("+z+"/"+w+")/*/"+Get2RGB(r))}if(q.suititem){w=q.suititem.split("|");z="";r=null;null==lookHumData?r=g_UserItemList:d?r=lookHumData.UseItems:r=g_UserItemList;for(p=0;p<r.length;++p)null!=r[p]&&(z+="|"+r[p].s.Name+"|");for(p=0;p<w.length;p++)if(r=249,w[p]&&-1!=w[p].indexOf("/")){var v=w[p].split("/"),C=v[1],u="|"+C+"|";-1!=z.indexOf(u)&&(r=v[0],z=z.replace(u,""));c.push(C+"/*/"+Get2RGB(r))}}q.suitdesc&&(q.suitdesc.split("\\"),c.push({name:"desc",str:q.suitdesc}))}}if(0!=e.length)for(p=0;p<e.length;p++){q=[];g=e[p].split("~@");for(z=0;z<g.length;z++)if(-1!=g[z].indexOf("\u5957\u88c5\u540d"))var B=g[z];else if(-1!=g[z].indexOf(a.s.DBName))var A=g[z];else if(-1!=g[z].indexOf("\u5907\u6ce8"))var D=g[z];g=B.split("~\x26");v=g[0].split("~#")[1];r=g[1].split("~#")[1];w=g[2].split("~#")[1];z=GameApi.GetUseItemCnt(A,d,!0);c.push(v+"("+z+"/"+w+")/*/"+Get2RGB(r));GameApi.GetUseItemLJ(a.s.Name,a.tag,w,A,c,d,!0);g=D.split("~\x26");for(w=0;w<g.length-1;w++)z=g[w].split("~#")[1],q.push(z);for(w=1;w<q.length;w+=2)g=q[w],z=Get2RGB(q[w-1]),c.push(g+"/*/"+z)}}}else if(!(1>Allsuitlist.length)){for(g=0;g<Allsuitlist.length;++g)if(q=Allsuitlist[g],B=q.split("~@"),-1!=q.indexOf(a.s.DBName)){for(z=0;z<B.length;z++)if(w=B[z],-1!=w.indexOf(a.s.DBName)){r=w;break}B=r.split("~\x26");for(A=0;A<B.length;A++)if(B[A].split("~#")[1]==a.s.DBName){e.push(q);break}}if(0!=e.length)for(B=0;B<e.length;B++){g=e[B];A=g.split("~@");for(z=0;z<A.length;z++)if(w=A[z],-1!=w.indexOf(a.s.DBName)){p=w;break}D=p.split("~\x26");w=D.length-1;z=GameApi.GetUseItemCnt(D,d,!1);c.push("\u5957\u88c5\u6fc0\u6d3b\u6761\u4ef6: "+z+" / "+w+"/*/"+clWhite);GameApi.GetUseItemLJ(a.s.Name,a.tag,w,D,c,d,!1);c.push("\u6fc0\u6d3b\u6548\u679c:/*/"+clWhite);D="";q=clGray;z>=w&&(q=Get2RGB(254));for(w=0;w<Suitelementlist.length;w++)-1!=g.indexOf(Suitelementlist[w])&&(D=b.Suitvalue(Suitelementlist[w],A,D,q,c,w));""!=D&&c.push(D+"/*/"+q)}}};b.WineInfos=function(a,b){var c=[];if(null==a)return c;0!=b?(c.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff"),c.push("\u5bb9\u91cf: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#00ff00"),c.push("\u54c1\u8d28: "+a.s.Rource+"/*/#ffffff"),c.push("\u9152\u7cbe\u5ea6: "+a.s.Reserved+"\u00b0/*/#00ff00")):c.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");switch(b){case 1:c.push("\u767d\u9152\uff0c\u9152\u4f53\u9187\u539a\uff0c\u53e3\u611f\u7ef5\u957f\uff0c\u591a\u4e3a\u8c6a\u4fa0\u6240\u559c/*/#ffffff");break;case 2:c.push("\u767d\u9152\uff0c\u7565\u5e26\u7518\u751c\uff0c\u5e26\u6709\u6d53\u539a\u7684\u4e61\u571f\u6c14\u606f/*/#ffffff");break;case 3:c.push("\u767d\u9152\uff0c\u5e26\u6709\u9ad8\u539f\u7684\u72ec\u7279\u98ce\u60c5\uff0c\u53e3\u611f\u9187\u548c/*/#ffffff");break;case 4:c.push("\u767d\u9152\uff0c\u4ee5\u679c\u5473\u5165\u9152\uff0c\u4e0d\u7ecf\u610f\u95f4\u50ac\u4eba\u5165\u9189\u4e61/*/#ffffff");break;case 5:c.push("\u9ec4\u9152\uff0c\u9152\u6027\u67d4\u548c\uff0c\u6a59\u9ec4\u6e05\u4eae\uff0c\u6709\u6696\u80c3\u4e4b\u529f\u6548/*/#ffffff");break;case 6:c.push("\u9ec4\u9152\uff0c\u7ea2\u66f2\u4f5c\u5f15\uff0c\u5165\u53e3\u7518\u751c\u5374\u65e0\u7c98\u7a20\u4e4b\u611f/*/#ffffff");break;case 7:c.push("\u9ec4\u9152\uff0c\u9152\u8272\u7ea2\u8910\uff0c\u76c8\u76c5\u4e0d\u6ea2\uff0c\u591a\u6d41\u4f20\u4e8e\u6c11\u95f4/*/#ffffff");break;case 8:c.push("\u6709\u5f3a\u7b4b\u5065\u9aa8\u4e4b\u7528\uff0c\u9700\u9152\u91cf"+a.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff");break;case 9:c.push("\u6b64\u9152\u53ef\u517b\u5fc3\u548c\u8840\uff0c\u9700\u9152\u91cf"+a.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff");break;case 10:c.push("\u53ef\u4f7f\u4eba\u8eab\u624b\u66f4\u4e3a\u7075\u6d3b\uff0c\u9700\u9152\u91cf"+a.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff");break;case 11:c.push("\u53ef\u575a\u7b4b\u9aa8\uff0c\u8010\u5bd2\u6691\uff0c\u9700\u9152\u91cf"+a.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff");break;case 12:c.push("\u53ef\u76ca\u6c14\u8865\u80be\uff0c\u9700\u9152\u91cf"+a.s.Need+"\u65b9\u53ef\u996e\u7528/*/#ffffff")}return c};b.CountItemInfos=function(a,b){var c=[];c.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");if(4>b||5==b)6==b||99==b?(c.push("\u4f7f\u7528\u6b21\u6570: "+this.GetDuraStr(a.Dura,a.DuraMax,1)+" \u6b21/*/#0040ff"),1==a.s.btValue[0]?(c.push("\u8bb0\u5f55\u5730\u56fe: "+a.s.DBName+"/*/"+clYellow),c.push("\u8bb0\u5f55X\u5750\u6807: "+a.s.AC+"/*/"+clYellow),c.push("\u8bb0\u5f55y\u5750\u6807: "+a.s.MAC+"/*/"+clYellow)):c.push("\u672a\u8bb0\u5f55\u5730\u56fe\u5750\u6807/*/#ffffff")):c.push("\u4f7f\u7528\u6b21\u6570: "+this.GetDuraStr(a.Dura,a.DuraMax,100)+" \u6b21/*/#0040ff");return c};b.SkillBookInfo1=function(a,b){var c=[];c.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");0==b?c.push("\u4f7f\u7528\u6b21\u6570: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+" \u6b21/*/#ffffff"):1==b?c.push("HP: "+this.GetDuraStr(a.Dura,a.DuraMax,1)+" \u6b21/*/#ffffff"):2==b?c.push("MP: "+this.GetDuraStr(a.Dura,a.DuraMax,1)+" \u6b21/*/#ffffff"):3==b&&c.push("HPMP: "+this.GetDuraStr(a.Dura,a.DuraMax,1)+" \u6b21/*/#ffffff");var d=ObjectManage.findobject(playerID);0==a.s.Need&&d.m_Abil.Level>=a.s.NeedLevel&&c.push("\u6240\u9700\u7b49\u7ea7: "+a.s.NeedLevel+"/*/#ffffff");return c};b.SkillBookInfo2=function(a,b){var c=[],d="#ff0000",e=ObjectManage.findobject(playerID);c.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");if(!(e==e&&0<a.s.Name.indexOf("\u82f1\u96c4")||e==e&&0==a.s.Name.indexOf("\u82f1\u96c4"))){switch(b){case 0:0==e.skin_feature.btJob&&e.m_Abil.Level>=a.s.DuraMax&&(d="#00ff00");break;case 1:1==e.skin_feature.btJob&&e.m_Abil.Level>=a.s.DuraMax&&(d="#00ff00");break;case 2:2==e.skin_feature.btJob&&e.m_Abil.Level>=a.s.DuraMax&&(d="#00ff00");break;case 3:3==e.skin_feature.btJob&&e.m_Abil.Level>=a.s.DuraMax&&(d="#00ff00");break;default:e.m_Abil.Level>=a.s.DuraMax&&(d="#00ff00")}c.push("\u6240\u9700\u804c\u4e1a: "+this.GetMagicJob(a.s.Shape)+"/*/"+d);c.push("\u6240\u9700\u7b49\u7ea7: "+a.s.DuraMax+"/*/"+d)}return c};b.WeaponInfos=function(a){var b=[];b.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");3>a.Dura/1E3?b.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ff0000"):b.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ffffff");if(0!=a.s.MaxDC||0!=a.s.DC){var c="\u653b\u51fb: "+a.s.DC+"-"+a.s.MaxDC,c=this.ShowItemValue(c,a.s.btValue[0]);b.push(c+this.GetColorString(a.s.btValue[0])+"/*/"+this.GetColor(a.s.btValue[0]))}if(0!=a.s.MaxMC||0!=a.s.MC)c="\u9b54\u6cd5: "+a.s.MC+"-"+a.s.MaxMC,c=this.ShowItemValue(c,a.s.btValue[1]),b.push(c+this.GetColorString(a.s.btValue[1])+"/*/"+this.GetColor(a.s.btValue[1]));if(0!=a.s.MaxSC||0!=a.s.SC)c="\u9053\u672f: "+a.s.SC+"-"+a.s.MaxSC,c=this.ShowItemValue(c,a.s.btValue[2]),b.push(c+this.GetColorString(a.s.btValue[2])+"/*/"+this.GetColor(a.s.btValue[2]));-1>=a.s.Source&&-50<=a.s.Source&&(c="\u795e\u5723: +"+-a.s.Source,c=this.ShowItemValue(c,a.s.btValue[7]),b.push(c+this.GetColorString(a.s.btValue[7])+"/*/"+this.GetColor(a.s.btValue[7])));-51>=a.s.Source&&-100<=a.s.Source&&(c="\u795e\u5723: -"+(-a.s.Source-50),b.push(c+this.GetColorString(a.s.btValue[7])+"/*/"+this.GetColor(a.s.btValue[7])));if(48==a.s.StdMode){if(0!=a.s.MaxAC||0!=a.s.AC)c="\u9632\u5fa1: "+a.s.AC+"-"+a.s.MaxAC,c=this.ShowItemValue(c,a.s.btValue[3]),b.push(c+this.GetColorString(a.s.btValue[3])+"/*/"+this.GetColor(a.s.btValue[3]));if(0!=a.s.MaxMAC||0!=a.s.MAC)c="\u9b54\u9632: "+a.s.MAC+"-"+a.s.MaxMAC,c=this.ShowItemValue(c,a.s.btValue[4]),b.push(c+this.GetColorString(a.s.btValue[4])+"/*/"+this.GetColor(a.s.btValue[4]))}else 0<a.s.MaxAC&&(c="\u51c6\u786e: +"+a.s.MaxAC,this.ShowItemValue(c,a.s.btValue[5]),b.push(c+this.GetColorString(a.s.btValue[5])+"/*/"+this.GetColor(a.s.btValue[5]))),0<a.s.MaxMAC&&(c=10<a.s.MaxMAC?"\u653b\u51fb\u901f\u5ea6: +"+(a.s.MaxMAC-10):0<a.s.MaxMAC&&10>=a.s.MaxMAC?"\u653b\u51fb\u901f\u5ea6: +"+a.s.MaxMAC:"\u653b\u51fb\u901f\u5ea6: "+a.s.MaxMAC,b.push(c+this.GetColorString(a.s.btValue[6])+"/*/"+this.GetColor(a.s.btValue[6]))),0<a.s.AC&&(c="\u5e78\u8fd0: +"+a.s.AC,this.ShowItemValue(c,a.s.btValue[3]),b.push(c+this.GetColorString(a.s.btValue[3])+"/*/"+this.GetColor(a.s.btValue[3]))),0<a.s.MAC&&(c="\u8bc5\u5492: +"+a.s.MAC,b.push(c+"/*/"+this.GetColor(a.s.btValue[4])));0<a.s.HP&&b.push("\u4f53\u529b\u503c: +"+a.s.HP+"/*/#00ff00");0<a.s.MP&&b.push("\u9b54\u6cd5\u503c: +"+a.s.MP+"/*/#00ff00");var c=ObjectManage.findobject(playerID),d="#ff0000",e="";switch(a.s.Need){case 0:case 18:case 22:c.m_Abil.Level>=a.s.NeedLevel&&(d="#00ff00");b.push("\u6240\u9700\u7b49\u7ea7: "+a.s.NeedLevel+"/*/"+d);break;case 10:case 11:case 12:case 13:var g=c.skin_feature.btJob,p=CodeUtil._LOWORD(a.s.NeedLevel);g==p&&(d="#00ff00");g="\u672a\u77e5";switch(p){case 0:g="\u6218\u58eb";break;case 1:g="\u6cd5\u5e08";break;case 2:g="\u9053\u58eb"}b.push("\u6240\u9700\u804c\u4e1a: "+g+"/*/"+d);10==a.s.Need&&(e="\u6240\u9700\u7b49\u7ea7: ",c.m_Abil.Level>=CodeUtil._HIWORD(a.s.NeedLevel)&&(d="#00ff00"));11==a.s.Need&&(e="\u9700\u8981\u653b\u51fb: ",c.m_Abil.MaxDc>=CodeUtil._HIWORD(a.s.NeedLevel)&&(d="#00ff00"));12==a.s.Need&&(e="\u9b54\u6cd5\u6240\u9700: ",c.m_Abil.MaxMC>=CodeUtil._HIWORD(a.s.NeedLevel)&&(d="#00ff00"));13==a.s.Need&&(e="\u9053\u672f\u6240\u9700: ",c.m_Abil.MAXSC>=CodeUtil._HIWORD(a.s.NeedLevel)&&(d="#00ff00"));b.push(e+CodeUtil._HIWORD(a.s.NeedLevel)+"/*/"+d);break;case 1:case 19:case 23:c.m_Abil.MaxDC>=a.s.NeedLevel&&(d="#00ff00");b.push("\u9700\u8981\u653b\u51fb: "+a.s.NeedLevel+"/*/"+d);break;case 2:case 20:case 24:c.m_Abil.MaxMC>=a.s.NeedLevel&&(d="#00ff00");b.push("\u9b54\u6cd5\u6240\u9700: "+a.s.NeedLevel+"/*/"+d);break;case 3:case 21:case 25:c.m_Abil.MAXSC>=a.s.NeedLevel&&(d="#00ff00");b.push("\u9053\u672f\u6240\u9700: "+a.s.NeedLevel+"/*/"+d);break;case 4:b.push("\u6240\u9700\u8f6c\u751f\u7b49\u7ea7: "+a.s.NeedLevel+"/*/#ffffff");break;case 40:b.push("\u6240\u9700\u8f6c\u751f\x26\u7b49\u7ea7: "+a.s.NeedLevel+"/*/#ffffff");break;case 41:b.push("\u6240\u9700\u8f6c\u751f\x26\u653b\u51fb: "+a.s.NeedLevel+"/*/#ffffff");break;case 42:b.push("\u6240\u9700\u8f6c\u751f\x26\u9b54\u6cd5: "+a.s.NeedLevel+"/*/#ffffff");break;case 43:b.push("\u6240\u9700\u8f6c\u751f\x26\u9053\u672f: "+a.s.NeedLevel+"/*/#ffffff");break;case 44:b.push("\u6240\u9700\u8f6c\u751f\x26\u58f0\u671b: "+a.s.NeedLevel+"/*/#ffffff");break;case 5:b.push("\u6240\u9700\u58f0\u671b: "+a.s.NeedLevel+"/*/#ffffff");break;case 6:b.push("\u884c\u4f1a\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 7:b.push("\u6c99\u57ce\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 70:b.push("\u6c99\u57ce\u57ce\u4e3b\u4e13\u7528/*/#ffffff");break;case 8:b.push("\u4f1a\u5458\u4e13\u7528/*/#ffffff");break;case 81:case 82:b.push("\u4f1a\u5458\u7c7b\u578b: "+CodeUtil._LOWORD(a.s.NeedLevel)+"/*/#ffffff"),b.push("\u4f1a\u5458\u7b49\u7ea7\x3e\x3d"+CodeUtil._HIWORD(a.s.NeedLevel)+"/*/#ffffff")}return b};b.ClothesTypeInfo=function(a){var b=[],c=a.s.StdMode;if(10==c||11==c||65<=c&&67>=c){b.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");3>a.Dura/1E3?b.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ff0000"):b.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ffffff");0==a.s.MaxAC&&0==a.s.AC||b.push("\u9632\u5fa1: "+a.s.AC+"-"+a.s.MaxAC+this.GetColorString(a.s.btValue[0])+"/*/"+this.GetColor(a.s.btValue[0]));0==a.s.MaxMAC&&0==a.s.MAC||b.push("\u9b54\u9632: "+a.s.MAC+"-"+a.s.MaxMAC+this.GetColorString(a.s.btValue[1])+"/*/"+this.GetColor(a.s.btValue[1]));0==a.s.MaxDC&&0==a.s.DC||b.push("\u653b\u51fb: "+a.s.DC+"-"+a.s.MaxDC+this.GetColorString(a.s.btValue[2])+"/*/"+this.GetColor(a.s.btValue[2]));(0!=a.s.MaxMC||a.s.MC)&&b.push("\u9b54\u6cd5: "+a.s.MC+"-"+a.s.MaxMC+this.GetColorString(a.s.btValue[3])+"/*/"+this.GetColor(a.s.btValue[3]));0==a.s.MaxSC&&0==a.s.SC||b.push("\u9053\u672f: "+a.s.SC+"-"+a.s.MaxSC+this.GetColorString(a.s.btValue[4])+"/*/"+this.GetColor(a.s.btValue[4]));0<a.s.HP&&b.push("\u4f53\u529b\u503c: +"+a.s.HP+"/*/#00ff00");0<a.s.MP&&b.push("\u9b54\u6cd5\u503c: +"+a.s.MP+"/*/#00ff00");var c="#ff0000",d=ObjectManage.findobject(playerID);switch(a.s.Need){case 0:case 18:case 22:d.m_Abil.Level>=a.s.NeedLevel&&(c="#00ff00");b.push("\u6240\u9700\u7b49\u7ea7: "+a.s.NeedLevel+"/*/"+c);break;case 10:case 11:case 12:case 13:var e=d.skin_feature.btJob,g=CodeUtil._LOWORD(a.s.NeedLevel);e==g&&(c="#00ff00");e="\u672a\u77e5";switch(g){case 0:e="\u6218\u58eb";break;case 1:e="\u6cd5\u5e08";break;case 2:e="\u9053\u58eb"}b.push("\u6240\u9700\u804c\u4e1a: "+e+"/*/"+c);g="";switch(a.s.Need){case 10:g="\u6240\u9700\u7b49\u7ea7\uff1a";d.m_Abil.Level>=CodeUtil._HIWORD(a.s.NeedLevel)&&(c="#00ff00");break;case 11:g="\u9700\u8981\u653b\u51fb\uff1a";d.m_Abil.MaxDc>=CodeUtil._HIWORD(a.s.NeedLevel)&&(c="#00ff00");break;case 12:g="\u9b54\u6cd5\u6240\u9700\uff1a";d.m_Abil.MaxMC>=CodeUtil._HIWORD(a.s.NeedLevel)&&(c="#00ff00");break;case 13:g="\u9053\u672f\u6240\u9700\uff1a",d.m_Abil.MAXSC>=CodeUtil._HIWORD(a.s.NeedLevel)&&(c="#00ff00")}b.push(g+CodeUtil._HIWORD(a.s.NeedLevel)+"/*/"+c);break;case 1:case 19:case 23:d.m_Abil.MaxDC>=a.s.NeedLevel&&(c="#00ff00");b.push("\u9700\u8981\u653b\u51fb: "+a.s.NeedLevel+"/*/"+c);break;case 2:case 20:case 24:d.m_Abil.MaxMC>=a.s.NeedLevel&&(c="#00ff00");b.push("\u6240\u9700\u9b54\u6cd5: "+a.s.NeedLevel+"/*/"+c);break;case 3:case 21:case 25:d.m_Abil.MaxSc>=a.s.NeedLevel&&(c="#00ff00");b.push("\u6240\u9700\u9053\u672f: "+a.s.NeedLevel+"/*/"+c);break;case 4:b.push("\u6240\u9700\u8f6c\u751f\u7b49\u7ea7: "+a.s.NeedLevel+"/*/#ffffff");break;case 40:b.push("\u6240\u9700\u8f6c\u751f\x26\u7b49\u7ea7: "+a.s.NeedLevel+"/*/#ffffff");break;case 41:b.push("\u6240\u9700\u8f6c\u751f\x26\u653b\u51fb: "+a.s.NeedLevel+"/*/#ffffff");break;case 42:b.push("\u6240\u9700\u8f6c\u751f\x26\u9b54\u6cd5: "+a.s.NeedLevel+"/*/#ffffff");break;case 43:b.push("\u6240\u9700\u8f6c\u751f\x26\u9053\u672f: "+a.s.NeedLevel+"/*/#ffffff");break;case 44:b.push("\u6240\u9700\u8f6c\u751f\x26\u58f0\u671b: "+a.s.NeedLevel+"/*/#ffffff");break;case 5:b.push("\u6240\u9700\u58f0\u671b: "+a.s.NeedLevel+"/*/#ffffff");break;case 6:b.push("\u884c\u4f1a\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 60:b.push("\u884c\u4f1a\u638c\u95e8\u4e13\u7528/*/#ffffff");break;case 7:b.push("\u6c99\u57ce\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 70:b.push("\u6c99\u57ce\u57ce\u4e3b\u4e13\u7528/*/#ffffff");break;case 8:b.push("\u4f1a\u5458\u4e13\u7528/*/#ffffff");break;case 81:case 82:b.push("\u4f1a\u5458\u7c7b\u578b: "+CodeUtil._LOWORD(a.s.NeedLevel)+"/*/#ffffff"),b.push("\u4f1a\u5458\u7b49\u7ea7\x3e\x3d"+CodeUtil._HIWORD(a.s.NeedLevel)+"/*/#ffffff")}}return b};b.EquipmentInfos=function(a){var b=[],c=a.s.StdMode;if(15==c||16==c||19<=c&&24>=c||26<=c&&30>=c||51<=c&&54>=c||62<=c&&64>=c||75<=c&&89>=c||178==c){var d=ObjectManage.findobject(playerID),c=!1;(15==a.s.StdMode||16==a.s.StdMode||22==a.s.StdMode||23==a.s.StdMode||24==a.s.StdMode||26==a.s.StdMode)&&130<=a.s.Shape&&132>=a.s.Shape&&(c=!0);if(!c){b.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");53==a.s.StdMode?1==a.s.AniCount?b.push("HP: "+this.GetDuraHPStoneStr(a.Dura,a.DuraMax)+"/*/#ffffff"):2==a.s.AniCount?b.push("MP: "+this.GetDuraMPStoneStr(a.Dura,a.DuraMax)+"/*/#ffffff"):3==a.s.AniCount?b.push("HPMP: "+this.GetDuraHPStoneStr(a.Dura,a.DuraMax)+"/*/#ffffff"):3>a.Dura/1E3?b.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ff0000"):b.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ffffff"):3>a.Dura/1E3?b.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ff0000"):b.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ffffff");c=a.s.StdMode;switch(c){case 20:case 52:case 24:0!=a.s.MaxAC&&b.push("\u51c6\u786e: +"+a.s.MaxAC+"/*/"+this.GetColor(a.s.btValue[0]));0!=a.s.MaxMAC&&b.push("\u654f\u6377: +"+a.s.MaxMAC+"/*/"+this.GetColor(a.s.btValue[1]));break;case 19:0!=a.s.MaxAC?b.push("\u9b54\u6cd5\u8eb2\u907f: +"+a.s.MaxAC+"0%"+this.GetColorString(a.s.btValue[0])+"/*/"+this.GetColor(a.s.btValue[0])):0<a.s.MAC&&b.push("\u8bc5\u5492: +"+a.s.MAC);0<a.s.MaxMAC&&b.push("\u5e78\u8fd0: +"+a.s.MaxMAC+this.GetColorString(a.s.btValue[1])+"/*/"+this.GetColor(a.s.btValue[1]));break;case 28:0!=a.s.AniCount&&b.push("\u8d1f\u91cd: "+CodeUtil._LOWORD(a.s.AniCount)+this.GetColorString(a.s.btValue[0])+"/*/"+this.GetColor(a.s.btValue[0]));break;case 21:case 54:0<a.s.AC?b.push("\u653b\u51fb\u901f\u5ea6: +"+a.s.AC+"/*/#ffffff"):a.s.MAC&&b.push("\u653b\u51fb\u901f\u5ea6: -"+a.s.MAC+"/*/#ffffff");0<a.s.MaxAC&&b.push("\u4f53\u529b\u6062\u590d: +"+a.s.MaxAC+this.GetColorString(a.s.btValue[0])+"/*/"+this.GetColor(a.s.btValue[0]));0<a.s.MaxMAC&&b.push("\u9b54\u6cd5\u6062\u590d: +"+a.s.MaxMAC+this.GetColorString(a.s.btValue[1])+"/*/"+this.GetColor(a.s.btValue[1]));break;case 23:0<a.s.AC&&b.push("\u653b\u51fb\u901f\u5ea6: +"+a.s.AC+"/*/#ffffff"),a.s.MAC&&b.push("\u653b\u51fb\u901f\u5ea6: -"+a.s.MAC+"/*/#ffffff"),0<a.s.MaxAC&&b.push("\u6bd2\u7269\u8eb2\u907f: +"+a.s.MaxAC+"0% "+this.GetColorString(a.s.btValue[0])+"/*/"+this.GetColor(a.s.btValue[0])),0<a.s.MaxMAC&&b.push("\u4e2d\u6bd2\u6062\u590d: +"+a.s.MaxMAC+"0% "+this.GetColorString(a.s.btValue[1])+"/*/"+this.GetColor(a.s.btValue[1]))}52!=a.s.StdMode&&19!=a.s.StdMode&&20!=a.s.StdMode&&21!=a.s.StdMode&&23!=a.s.StdMode&&24!=a.s.StdMode&&54!=a.s.StdMode&&(0==a.s.MaxAC&&0==a.s.AC||b.push("\u9632\u5fa1: "+a.s.AC+"-"+a.s.MaxAC+this.GetColorString(a.s.btValue[0])+"/*/"+this.GetColor(a.s.btValue[0])),0==a.s.MaxMAC&&0==a.s.MAC||b.push("\u9b54\u9632: "+a.s.MAC+"-"+a.s.MaxMAC+this.GetColorString(a.s.btValue[1])+"/*/"+this.GetColor(a.s.btValue[1])));0==a.s.MaxDC&&0==a.s.DC||b.push("\u653b\u51fb: "+a.s.DC+"-"+a.s.MaxDC+this.GetColorString(a.s.btValue[2])+"/*/"+this.GetColor(a.s.btValue[2]));0==a.s.MaxMC&&0==a.s.MC||b.push("\u9b54\u6cd5: "+a.s.MC+"-"+a.s.MaxMC+this.GetColorString(a.s.btValue[3])+"/*/"+this.GetColor(a.s.btValue[3]));0==a.s.MaxSC&&0==a.s.SC||b.push("\u9053\u672f: "+a.s.SC+"-"+a.s.MaxSC+this.GetColorString(a.s.btValue[4])+"/*/"+this.GetColor(a.s.btValue[4]));0<a.s.HP&&b.push("\u4f53\u529b\u503c: "+a.s.HP+"/*/#00ff00");0<a.s.MP&&b.push("\u9b54\u6cd5\u503c: "+a.s.MP+"/*/#00ff00");c="#ff0000";switch(a.s.Need){case 0:case 18:case 22:d.m_Abil.Level>=a.s.NeedLevel&&(c="#00ff00");b.push("\u6240\u9700\u7b49\u7ea7: "+a.s.NeedLevel+"/*/"+c);break;case 10:case 11:case 12:case 13:var e=d.skin_feature.btJob,g=CodeUtil._LOWORD(a.s.NeedLevel);e==g&&(c="#00ff00");e="\u672a\u77e5";switch(g){case 0:e="\u6218\u58eb";break;case 1:e="\u6cd5\u5e08";break;case 2:e="\u9053\u58eb"}b.push("\u6240\u9700\u804c\u4e1a: "+e+"/*/"+c);g="";10==a.s.Need&&(g="\u6240\u9700\u7b49\u7ea7: ",d.m_Abil.Level>=CodeUtil._HIWORD(a.s.NeedLevel)&&(c="#00ff00"));11==a.s.Need&&(g="\u9700\u8981\u653b\u51fb: ",d.m_Abil.MaxDc>=CodeUtil._HIWORD(a.s.NeedLevel)&&(c="#00ff00"));12==a.s.Need&&(g="\u9b54\u6cd5\u6240\u9700: ",d.m_Abil.MaxMC>=CodeUtil._HIWORD(a.s.NeedLevel)&&(c="#00ff00"));13==a.s.Need&&(g="\u9053\u672f\u6240\u9700: ",d.m_Abil.MAXSC>=CodeUtil._HIWORD(a.s.NeedLevel)&&(c="#00ff00"));b.push(g+CodeUtil._HIWORD(a.s.NeedLevel)+"/*/"+c);break;case 1:case 19:case 23:d.m_Abil.MaxDC>=a.s.NeedLevel?b.push("\u653b\u51fb\u6240\u9700: "+a.s.NeedLevel+"/*/#00ff00"):b.push("\u653b\u51fb\u6240\u9700: "+a.s.NeedLevel+"/*/#ff0000");break;case 2:case 20:case 24:d.m_Abil.MaxDC>=a.s.NeedLevel?b.push("\u6240\u9700\u9b54\u6cd5: "+a.s.NeedLevel+"/*/#00ff00"):b.push("\u6240\u9700\u9b54\u6cd5: "+a.s.NeedLevel+"/*/#ff0000");break;case 3:case 21:case 25:d.m_Abil.MaxDC>=a.s.NeedLevel?b.push("\u6240\u9700\u9053\u672f: "+a.s.NeedLevel+"/*/#00ff00"):b.push("\u6240\u9700\u9053\u672f: "+a.s.NeedLevel+"/*/#ff0000");break;case 4:b.push("\u6240\u9700\u8f6c\u751f\u7b49\u7ea7: "+a.s.NeedLevel+"/*/#ffffff");break;case 40:b.push("\u6240\u9700\u8f6c\u751f\x26\u7b49\u7ea7: "+a.s.NeedLevel+"/*/#ffffff");break;case 41:b.push("\u6240\u9700\u8f6c\u751f\x26\u653b\u51fb: "+a.s.NeedLevel+"/*/#ffffff");break;case 42:b.push("\u6240\u9700\u8f6c\u751f\x26\u9b54\u6cd5: "+a.s.NeedLevel+"/*/#ffffff");break;case 43:b.push("\u6240\u9700\u8f6c\u751f\x26\u9053\u672f: "+a.s.NeedLevel+"/*/#ffffff");break;case 44:b.push("\u6240\u9700\u8f6c\u751f\x26\u58f0\u671b: "+a.s.NeedLevel+"/*/#ffffff");break;case 5:b.push("\u6240\u9700\u58f0\u671b: "+a.s.NeedLevel+"/*/#ffffff");break;case 6:b.push("\u884c\u4f1a\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 60:b.push("\u884c\u4f1a\u638c\u95e8\u4e13\u7528/*/#ffffff");break;case 7:b.push("\u6c99\u57ce\u6210\u5458\u4e13\u7528/*/#ffffff");break;case 70:b.push("\u6c99\u57ce\u57ce\u4e3b\u4e13\u7528/*/#ffffff");break;case 8:b.push("\u4f1a\u5458\u4e13\u7528/*/#ffffff");break;case 81:case 82:b.push("\u4f1a\u5458\u7c7b\u578b: "+CodeUtil._LOWORD(a.s.NeedLevel)+"/*/#ffffff"),b.push("\u4f1a\u5458\u7b49\u7ea7\x3e\x3d"+CodeUtil._HIWORD(a.s.NeedLevel)+"/*/#ffffff")}}}return b};b.EquipmentSuitInfos=function(a){var b=a.s.StdMode,c=[];if(5==b||6==b||10==b||11==b||15==b||16==b||48==b||18<=b&&30>=b||51<=b&&54>=b||62<=b&&69>=b||70<=b&&89>=b||178==b)this.boShowBoundary&&c.push("-/*/#ffffff"),0<a.s.NewValue[0]&&c.push("\u66b4\u51fb\u51e0\u7387\u589e\u52a0: "+a.s.NewValue[0]+"%/*/"+clAqua),0<a.s.NewValue[1]&&c.push("\u589e\u52a0\u653b\u51fb\u4f24\u5bb3: "+a.s.NewValue[1]+"%/*/"+clAqua),0<a.s.NewValue[2]&&c.push("\u7269\u7406\u4f24\u5bb3\u51cf\u5c11: "+a.s.NewValue[2]+"%/*/"+clAqua),0<a.s.NewValue[3]&&c.push("\u9b54\u6cd5\u4f24\u5bb3\u51cf\u5c11: "+a.s.NewValue[3]+"%/*/"+clAqua),0<a.s.NewValue[4]&&c.push("\u5ffd\u89c6\u76ee\u6807\u9632\u5fa1: "+a.s.NewValue[4]+"%/*/"+clAqua),0<a.s.NewValue[5]&&c.push("\u6240\u6709\u4f24\u5bb3\u53cd\u5f39: "+a.s.NewValue[5]+"%/*/"+clAqua),0<a.s.NewValue[6]&&c.push("\u4eba\u7269\u4f53\u8d28\u589e\u52a0: "+a.s.NewValue[6]+"/*/"+clAqua),0<a.s.NewValue[7]&&c.push("\u88c5\u5907\u9644\u52a0\u7ecf\u9a8c: "+a.s.NewValue[7]+"%/*/"+clAqua),0<a.s.NewValue[8]&&c.push("\u6012\u6c14\u6062\u590d\u589e\u52a0: "+a.s.NewValue[8]+"%/*/"+clAqua),0<a.s.NewValue[9]&&c.push("\u5408\u51fb\u653b\u51fb\u589e\u52a0: "+a.s.NewValue[9]+"%/*/"+clAqua),0<a.s.NewValue[10]&&c.push("\u589e\u52a0\u76ee\u6807\u66b4\u7387: "+a.s.NewValue[10]+"%/*/"+clAqua),0<a.s.NewValue[11]&&(b=MagicMgr.getInstance().FindMagicFromStatic(a.s.NewValue[11]),0<a.s.NewValue[12]&&null!=b&&c.push("\u589e\u52a0["+b.Def.sMagicName+"]\u6280\u80fd\u5a01\u529b"+a.s.NewValue[12]+"%/*/"+clAqua)),0<a.s.NewValue[13]&&c.push("\u4eba\u7269\u9b54\u529b\u589e\u52a0: "+a.s.NewValue[13]+"/*/"+clAqua),0<a.s.NewValue[14]&&c.push("\u4eba\u7269\u4f53\u529b\u589e\u52a0: "+a.s.NewValue[14]+"%/*/"+clAqua),0<a.s.NewValue[15]&&c.push("\u4eba\u7269\u9b54\u529b\u589e\u52a0: "+a.s.NewValue[15]+"%/*/"+clAqua);return c};b.TitleInfos=function(a){var b=[];if(70<=a.s.StdMode&&74>=a.s.StdMode){if(0<a.DuraMax)if(3600<=a.s.NeedLevel){var c=parseInt(a.s.NeedLevel/3600),d=parseInt(a.s.NeedLevel%3600/60);b.push("\u5269\u4f59\u65f6\u95f4: "+(c+" \u5c0f\u65f6 ")+(0<d?d+" \u5206":""))}else b.push("\u5269\u4f59\u65f6\u95f4: "+parseInt(a.s.NeedLevel/60)+" \u5206");else b.push("[\u6c38\u4e45\u79f0\u53f7]");73==a.s.StdMode&&(0==a.s.MaxAC&&0==a.s.AC||b.push("\u9632\u5fa1: "+a.s.AC+"-"+a.s.MaxAC+this.GetColorString(a.s.btValue[0])+"/*/"+this.GetColor(a.s.btValue[0])),0==a.s.MaxMAC&&0==a.s.MAC||b.push("\u9b54\u9632: "+a.s.MAC+"-"+a.s.MaxMAC+this.GetColorString(a.s.btValue[1])+"/*/"+this.GetColor(a.s.btValue[1])));0==a.s.MaxDC&&0==a.s.DC||b.push("\u653b\u51fb: "+a.s.DC+"-"+a.s.MaxDC+this.GetColorString(a.s.btValue[2])+"/*/"+this.GetColor(a.s.btValue[2]));0==a.s.MaxMC&&0==a.s.MC||b.push("\u9b54\u6cd5: "+a.s.MC+"-"+a.s.MaxMC+this.GetColorString(a.s.btValue[3])+"/*/"+this.GetColor(a.s.btValue[3]));0==a.s.MaxSC&&0==a.s.SC||b.push("\u9053\u672f: "+a.s.SC+"-"+a.s.MaxSC+this.GetColorString(a.s.btValue[4])+"/*/"+this.GetColor(a.s.btValue[4]));0<a.s.HP&&b.push("\u4f53\u529b\u503c: "+a.s.HP+"/*/#00ff00");0<a.s.MP&&b.push("\u9b54\u6cd5\u503c: "+a.s.MP+"/*/#00ff00");70==a.s.StdMode&&(0!=a.s.MaxAC&&b.push("\u9b54\u6cd5\u8eb2\u907f: +"+a.s.MaxAC+"0%"+this.GetColorString(a.s.btValue[0])+"/*/"+this.GetColor(a.s.btValue[0])),0<a.s.MAC&&b.push("\u8bc5\u5492: +"+a.s.MAC),0<a.s.MaxMAC&&b.push("\u5e78\u8fd0: +"+a.s.MaxMAC+this.GetColorString(a.s.btValue[1])+"/*/"+this.GetColor(a.s.btValue[1])));71==a.s.StdMode&&(0!=a.s.MaxAC&&b.push("\u51c6\u786e: +"+a.s.MaxAC+"/*/"+this.GetColor(a.s.btValue[0])),0!=a.s.MaxMAC&&b.push("\u654f\u6377: +"+a.s.MaxMAC+"/*/"+this.GetColor(a.s.btValue[1])));72==a.s.StdMode&&(0!=a.s.AC&&b.push("\u653b\u51fb\u901f\u5ea6: +"+a.s.AC+"/*/"+this.GetColor(a.s.btValue[0])),0!=a.s.MAC&&b.push("\u653b\u51fb\u901f\u5ea6: -"+a.s.MAC+"/*/"+this.GetColor(a.s.btValue[1])),0!=a.s.MaxAC&&b.push("\u4f53\u529b\u6062\u590d: +"+a.s.MaxAC+"0%/*/"+this.GetColor(a.s.btValue[0])),0!=a.s.MaxMAC&&b.push("\u9b54\u6cd5\u6062\u590d: +"+a.s.MaxMAC+"0%/*/"+this.GetColor(a.s.btValue[1])));74==a.s.StdMode&&(0!=a.s.AC&&b.push("\u653b\u51fb\u901f\u5ea6: +"+a.s.AC+"/*/"+this.GetColor(a.s.btValue[0])),0!=a.s.MaxAC&&b.push("\u6bd2\u7269\u8eb2\u907f: +"+a.s.MaxAC+"0%/*/"+this.GetColor(a.s.btValue[1])),0!=a.s.MaxMAC&&b.push("\u4e2d\u6bd2\u6062\u590d: +"+a.s.MaxMAC+"0%/*/"+this.GetColor(a.s.btValue[0])))}return b};b.PaperPoisonInfos=function(a){var b=[];25==a.s.StdMode&&(b.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff"),3==a.s.Shape?b.push("\u6570\u91cf: "+a.Dura+"/"+a.DuraMax+"/*/#00ff00"):0<=a.s.Shape&&2>=a.s.Shape||5==a.s.Shape?8==a.s.Source?b.push("\u6570\u91cf: "+this.GetDuraStr(a.Dura,100*a.s.MAC,100)+"/*/#00ff00"):b.push("\u6570\u91cf: "+this.GetDuraStr(a.Dura,a.DuraMax,1)+"/*/#00ff00"):8==a.s.Shape?b.push("\u5bb9\u91cf: "+parseInt(a.Dura/100)+"/"+parseInt(a.DuraMax)+"/*/#00ff00"):6==a.s.Shape?b.push("\u6b21\u6570: "+parseInt(a.Dura/100)+"/"+parseInt(a.DuraMax)+"/*/#00ff00"):9==a.s.Shape?b.push("\u5bb9\u91cf: "+parseInt(a.Dura/100)+"/"+parseInt(a.DuraMax)+"/*/#ffffff"):10==a.s.Shape&&b.push("\u5bb9\u91cf: "+parseInt(a.Dura/100)+"/"+parseInt(a.DuraMax)+"/*/#ffffff"),0==a.s.Source&&(0!=a.s.MaxAC&&b.push("\u9632\u5fa1: "+a.s.AC+"-"+a.s.MaxAC+"/*/"+this.GetColor(a.s.btValue[0])),0!=a.s.MaxMAC&&b.push("\u9b54\u9632: "+a.s.MAC+"-"+a.s.MaxMAC+"/*/"+this.GetColor(a.s.btValue[1])),0!=a.s.MaxDC&&b.push("\u653b\u51fb: "+a.s.DC+"-"+a.s.MaxDC+"/*/"+this.GetColor(a.s.btValue[1])),0!=a.s.MaxMC&&b.push("\u9b54\u6cd5: "+a.s.MC+"-"+a.s.MaxMC+"/*/"+this.GetColor(a.s.btValue[1])),0!=a.s.MaxSC&&b.push("\u9053\u672f: "+a.s.SC+"-"+a.s.MaxSC+"/*/"+this.GetColor(a.s.btValue[1]))));return b};b.StrengthenEquip=function(a){var b=[];if(55<=a.s.StdMode&&59>=a.s.StdMode){b.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");59!=a.s.StdMode&&(58==a.s.StdMode&&b.push("\u968f\u673a\u589e\u52a0: "+a.s.Source+"\u5c5e\u6027\u70b9/*/#00ff00"),0<a.s.AniCount&&b.push("+"+a.s.AniCount+"\u4ee5\u4e0b\u88c5\u5907/*/#00ff00"));b.push("\u6210\u529f\u673a\u7387"+a.s.DuraMax+"%/*/#ff0000");if(55==a.s.StdMode||57==a.s.StdMode){if(57!=a.s.StdMode||2!=a.s.Shape)0<a.s.MaxAC&&b.push("\u9632\u5fa1+"+a.s.MaxAC+"/*/#ffffff"),a.s.MaxMAC&&b.push("\u9b54\u5fa1+"+a.s.MaxMAC+"/*/#ffffff");if(57!=a.s.StdMode||1!=a.s.Shape)0<a.s.MaxDC&&b.push("\u653b\u51fb+"+a.s.MaxDC+"/*/#ffffff"),0<a.s.MaxMC&&b.push("\u9b54\u6cd5+"+a.s.MaxMC+"/*/#ffffff"),0<a.s.MaxSC&&b.push("\u9053\u672f+"+a.s.MaxSC+"/*/#ffffff")}56==a.s.StdMode&&1<=a.s.NeedLevel&&100>=a.s.NeedLevel&&b.push("\u5931\u8d25\u540e\u51cf\u53bb\u76f8\u5173\u5c5e\u6027:\u51e0\u7387"+a.s.NeedLevel+"%/*/#ffffff");if(58==a.s.StdMode){var c="",d=0;1<=a.s.Need&&100>=a.s.Need?(c="\u6e05\u96f6",d=a.s.Need):101<=a.s.Need&&200>=a.s.Need?(c="\u6d88\u5931",d=a.s.Need-100):(c="\u4e0d\u53d8",d=100);0<d?b.push("\u5931\u8d25\u540e\u5c5e\u6027["+c+"']:\u51e0\u7387"+d+"%/*/#ffffff"):(d=-1,1<=a.s.Need&&100>=a.s.Need?(c="\u6e05\u96f6",d=a.s.Need):101<=a.s.Need&&200>=a.s.Need?(c="\u6d88\u5931",d=a.s.Need-100):201<=a.s.Need&&300>=a.s.Need&&(c="\u4e0d\u53d8",d=a.s.Need-200),0<d&&b.push("\u5931\u8d25\u540e\u5c5e\u6027["+c+"']:\u51e0\u7387"+d+"%/*/#ffffff"))}b.push("\u7528\u4e8e["+this.GetUpgradeItemName(a.s.Shape)+"]/*/#ffffff")}return b};b.SetGemstones=function(a){var b=[];switch(a.s.StdMode){case 66:case 67:case 68:case 69:case 75:case 76:case 77:case 178:case 79:case 80:case 81:case 82:case 83:case 84:case 86:case 88:case 5:case 6:case 10:case 11:case 15:case 16:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 51:case 52:case 53:case 54:case 62:case 64:case 30:case 48:case 201:if(0<a.nFlutCount){this.boShowBoundary&&b.push("-/*/#ffffff");for(var c=0,d=0;d<a.nFlutCount&&!(8<a.nFlutCount);d++)if(""!=a.GemItem[d].Name&&a.nGemCount>c){var e=this.GetGemInfo(a.GemItem[d],!0),e=""!=e?e+" "+this.GetGemInfoEX(a.GemItem[d],!0):this.GetGemInfoEX(a.GemItem[d],!0);b.push(a.GemItem[d].Name+":"+e+"/*/"+Get2RGB(a.GemItem[d].w26));c++}else b.push("\u672a\u9576\u5d4c\u5b9d\u77f3/*/"+clGray)}}return b};b.ItemDescs=function(a){var b=[];if(g_ItemDesc)for(var c,d,e=0;e<g_ItemDesc.length;e++)c=g_ItemDesc[e].indexOf("\x3d"),d=g_ItemDesc[e].indexOf("\uff1d"),d=-1<c?c:d,c=g_ItemDesc[e].substring(0,d).trim(),d=g_ItemDesc[e].substring(d+1),c&&c==a.s.DBName&&d&&b.push({name:"desc",str:d});return b};b.GetItemInfo=function(a,b){var c,d,e=[];if(a){c=a.s.StdMode;d=a.s.Shape;0<a.s.btValue[10]&&-1==a.s.Name.indexOf("(*)")&&(a.s.Name="(*)"+a.s.Name);if(""!=a.s.Name){var g=a.s.Name,g=this.trimSpecialUnicode(g);a.s.IsBind&&(g+=" \u5df2\u7ed1\u5b9a");e.push(g+"/*/"+Get2RGB(a.s.Color));if((15==c||19<=c&&26>=c)&&130<=d&&132>=d)e.push("????/*/#ffffff");else if(0<=this.GetTakeOnPosition(c,d)&&0<a.s.btUpgradeCount){for(var p=parseInt(a.s.btUpgradeCount/10),r=a.s.btUpgradeCount%10,g="",v=0;v<p;v++)g+="\u2605";for(p=0;p<r;p++)g+="\u25cf";for(r=0;r<g.length;r+=10)e.push(g.substr(r,10))}}switch(c){case 0:e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");0<a.s.AC&&e.push("HP: +"+a.s.AC+"/*/#00ff00");0<a.s.MAC&&e.push("MP: "+a.s.MAC+"/*/#00ff00");break;case 1:(0!=d&&3>d||4<d&&8>d)&&e.push("\u6301\u7eed\u4f7f\u7528: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+" \u5c0f\u65f6/*/#ffffff");(2<a.s.Shape&&5>a.s.Shape||7<a.s.Shape&&11>a.s.Shape)&&e.push("\u7d2f\u79ef\u4f7f\u7528: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+" \u5c0f\u65f6/*/#ffffff");e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");break;case 2:c=this.CountItemInfos(a,d);e=e.concat(c);break;case 3:e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");break;case 7:c=this.SkillBookInfo1(a,d),e=e.concat(c);case 9:case 41:case 12:case 13:case 14:case 44:case 211:e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");break;case 8:e.push("\u54c1\u8d28: "+a.s.AC+"/*/#ffffff");break;case 60:c=this.WineInfos(a,d);0!=c.length&&(e=e.concat(c));break;case 4:c=this.SkillBookInfo2(a,d);0!=c.length&&(e=e.concat(c));break;case 5:case 6:case 48:case 68:case 69:c=this.WeaponInfos(a);0!=c.length&&(e=e.concat(c));break;case 25:c=this.TitleInfos(a);0!=c.length&&(e=e.concat(c));break;case 95:(0<a.s.AC||a.s.MaxAC)&&e.push("\u9493\u529b: "+a.s.AC+"-"+a.s.MaxAC+"/*/#ffffff");3>a.Dura/1E3?e.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ff0000"):e.push("\u6301\u4e45: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ffffff");e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");break;case 96:(0<a.s.AC||0<a.s.MaxAC)&&e.push("\u4e0a\u94a9\u51e0\u7387\u589e\u52a0: "+a.s.AC+"-"+a.s.MaxAC+"/*/#ffffff");e.push("\u6570\u91cf: "+a.Dura+"-"+a.DuraMax+"/*/#ffffff");e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");break;case 40:e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");0==a.s.Shape&&e.push("\u54c1\u8d28: "+this.GetDuraStr(a.Dura,a.DuraMax,1E3)+"/*/#ffffff");break;case 42:e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");break;case 43:e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");e.push("\u7eaf\u5ea6: "+Math.round(a.Dura/1E3)+"/*/#ffffff");break;case 49:c=0==a.s.AniCount?g_GameGoldNum.key:g_GameCionNum.key;d=a.s.Need;e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");a.Dura>=a.DuraMax?(e.push("\u7ecf\u9a8c\u503c\u5bb9\u91cf("+a.DuraMax+")\u4e07  /*/#ffffff"),e.push("\u53ef\u6d88\u8017"+d+c+"\u91ca\u653e/*/#ffffff")):e.push("\u7d2f\u79ef\u7ecf\u9a8c"+a.Dura+"/"+a.DuraMax+"\u4e07 /*/#ffffff");break;case 31:0==a.s.AniCount||0!=a.s.Shape&&3!=a.s.Shape||1!=a.s.Source||e.push("\u4f7f\u7528\u6b21\u6570: "+this.GetDuraStr(a.Dura,a.DuraMax,1)+"/*/#ffffff");e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff");break;case 149:e.push("\u91cd\u91cf: "+a.s.Weight+"/*/#ffffff"),e.push("\u5f00\u542f\u5b9d\u7bb1\u94a5\u5319\uff0c\u79fb\u52a8\u5230\u5b9d\u7bb1\u5185\u65e2\u53ef/*/#ffffff")}c=this.ClothesTypeInfo(a);0!=c.length&&(e=e.concat(c));c=this.EquipmentInfos(a);0!=c.length&&(e=e.concat(c));c=this.TitleInfos(a);0!=c.length&&(e=e.concat(c));c=this.PaperPoisonInfos(a);0!=c.length&&(e=e.concat(c));c=this.StrengthenEquip(a);0!=c.length&&(e=e.concat(c));c=this.EquipmentSuitInfos(a);0!=c.length&&(e=e.concat(c));c=this.GetGemInfo(a);""!=c&&e.push(c+"/*/"+clLime);c=this.GetGemInfoEX(a);""!=c&&e.push(c+"/*/"+clLime);if(101==a.s.Need||102==a.s.Need||103==a.s.Need||104==a.s.Need)c=this.convertSecondToMinutes(a.s.NeedLevel),e.push("\u9650\u65f6\u88c5\u5907: "+c+"\u5206\u949f/*/"+clLime);c=this.SetGemstones(a);0!=c.length&&(e=e.concat(c));a.TUserItemAdd&&a.TUserItemAdd.nMakeIndex&&e.push({name:"custom",obj:a.TUserItemAdd});this.GetLegTZInfo(a,e,b);c=a.s.StdMode;(5==c||6==c||10==c||11==c||15==c||16==c||19<=c&&24>=c||25==c||26<=c&&30>=c||48==c||53==c||62<=c&&69>=c||78==c||75==c||76==c||77==c||79<=c&&89>=c||178==c)&&g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen&&g_ItemScoreRecord.boOpenShowItemScore&&(c=GameApi.GetItemScore(a),e.push("\u88c5\u5907\u8bc4\u5206: "+c+"/*/#ffffff"));c=this.ItemDescs(a);0!=c.length&&(e=e.concat(c));return null!=a.ItemSrc?this.ItemsMakeInf(a.ItemSrc,e):e}};b.GetItemMinfo=function(a){};b.ItemsMakeInf=function(a,b){if(0<a.MakeType&&51>a.MakeType){b.push(" /*/"+clYellow);b.push("[\u7269\u54c1\u6765\u6e90]/*/#a2b5cd");switch(a.MakeType){case 1:b.push("\u7269\u54c1\u6765\u6e90: GM\u5236\u9020/*/"+clYellow);b.push("\u5236\u9020\u8005: "+a.MakePlay+"/*/"+clYellow);break;case 2:b.push("\u7269\u54c1\u6765\u6e90: NPC\u5236\u9020/*/"+clYellow);b.push("\u83b7\u53d6\u4eba: "+a.MakePlay+"/*/"+clYellow);b.push("NPC: "+a.MakeObject+"/*/"+clYellow);break;case 3:case 13:b.push("\u7269\u54c1\u6765\u6e90: \u5546\u5e97\u8d2d\u4e70/*/"+clYellow);b.push("\u8d2d\u4e70\u4eba: "+a.MakePlay+"/*/"+clYellow);break;case 4:b.push("\u7269\u54c1\u6765\u6e90: \u6740\u602a\u6389\u843d/*/"+clYellow);b.push("\u5730\u56fe: "+a.MakeMap+"/*/"+clYellow);b.push("\u602a\u7269: "+a.MakeObject+"/*/"+clYellow);b.push("\u51fb\u6740\u8005: "+a.MakePlay+"/*/"+clYellow);break;case 15:b.push("\u7269\u54c1\u6765\u6e90: \u65b0\u4eba\u8d60\u9001/*/"+clYellow);b.push("\u8d60\u9001\u4eba: "+a.MakePlay+"/*/"+clYellow);break;case 5:case 7:b.push("\u7269\u54c1\u6765\u6e90: \u7cfb\u7edf\u7ed9\u4e0e/*/"+clYellow);b.push("\u7ecf\u624b\u4eba: "+a.MakePlay+"/*/"+clYellow);break;case 6:b.push("\u7269\u54c1\u6765\u6e90: \u6316\u77ff\u83b7\u53d6/*/"+clYellow);b.push("\u5730\u56fe: "+a.MakeMap+"/*/"+clYellow);b.push("\u7ecf\u624b\u4eba: "+a.MakePlay+"/*/"+clYellow);break;case 8:b.push("\u7269\u54c1\u6765\u6e90: \u5b9d\u7bb1\u83b7\u53d6/*/"+clYellow);b.push("\u5f00\u7bb1\u4eba: "+a.MakePlay+"/*/"+clYellow);b.push("\u5b9d\u7bb1: "+a.MakeObject+"/*/"+clYellow);break;case 9:b.push("\u7269\u54c1\u6765\u6e90: \u6316\u8089\u83b7\u53d6/*/"+clYellow),b.push("\u5730\u56fe: "+a.MakeMap+"/*/"+clYellow),b.push("\u7ecf\u624b\u4eba: "+a.MakePlay+"/*/"+clYellow),b.push("\u602a\u7269: "+a.MakeObject+"/*/"+clYellow)}b.push("\u65f6\u95f4: "+a.MakeDate+"/*/"+clYellow)}return b};b.GetUpgradeItemName=function(a){var b="";if(19<=a&&21<=a)return"\u9879\u94fe";switch(a){case 10:case 11:b="\u8863\u670d";break;case 5:case 6:b="\u6b66\u5668";break;case 15:b="\u5934\u76d4";break;case 22:case 23:b="\u6212\u6307";break;case 24:case 26:b="\u624b\u956f";break;case 52:case 62:case 28:b="\u978b";break;case 7:case 53:case 63:b="\u5b9d\u77f3";break;case 54:case 64:case 27:b="\u8170\u5e26";break;case 16:b="\u6597\u7b20";break;case 65:b="\u519b\u9f13";break;default:b="\u6240\u6709\u88c5\u5907"}return b};b.GetMagicItemDuraStr=function(a,b){g=!1;return 0==g?Math.round(a/g_nMagicItemRate)+"/"+Math.round(b/g_nMagicItemRate):Math.round(a/g_nMagicItemRate)};b.GetDuraHPStoneStr=function(a,b){if(g_HPStoneDec)return parseInt(Math.round(a/1E3))+"\u4e07/"+parseInt(Math.round(b/1E3))+"\u4e07"};b.GetDuraMPStoneStr=function(a,b){if(g_MPStoneDec)return parseInt(Math.round(a/1E3))+"\u4e07/"+parseInt(Math.round(b/1E3))+"\u4e07"};b.ParseNameFormat=function(a){var b="",c=0,d=a;1E4<=a&&(c=Math.floor(a/1E4),d=a%1E4);for(var d=d+"",e=d.length;5>e;e++)b+="0";return 1E4<=a&&0!=c?"data/items"+c+"/"+b+d+".png":"data/items/"+b+a+".png"};b.onfloorImageFormat=function(a){var b="",c=0,d=a;1E4<=a&&(c=Math.floor(a/1E4),d=a%1E4);for(var e=d.toString().length;5>e;e++)b+="0";return 1E4<=a&&0!=c?"data/dnitems"+c+"/"+b+d+".png":"data/dnitems/"+b+a+".png"};b.onroleImageFormat=function(a){var b="",c=0,d=a;1E4<=a&&(c=Math.floor(a/1E4),d=a%1E4);for(var e=d.toString().length;5>e;e++)b+="0";return 1E4<=a&&0!=c?"data/stateitem"+c+"/"+b+d+".png":"data/stateitem/"+b+a+".png"};b.ParseNameFormatSkill=function(a){var c=b.getprefixname(a,6),d="";1E4<=a&&(d=Math.floor(a/1E4));resName=this.getImageSetNameByPath("data/magicon"+d+"/"+c);return resName=resName.replace(".atlas","/"+c+".png")};b.ParseNameFormat3=function(a){var b="",c=0,d=a;1E4<=a&&(c=Math.floor(a/1E4),d=a%1E4);for(var e=d.toString().length;5>e;e++)b+="0";return 1E4<=a&&0!=c?"data/dnitems"+c+"/"+b+d+".png":"data/dnitems/"+b+a+".png"};b.GetHumWinoffset=function(a){a=a.s.Looks;var b="stateitem";if(1E4<=a){var c=Math.floor(a/1E4);a%=1E4;b="stateitem1";0!=c&&(b="stateitem"+c)}return Offsetmodule.getoffset(b,parseInt(a))};b.ParseMagicNameFormat=function(a){for(var b="",c=a.toString().length;5>c;c++)b+="0";return"data/magicion/"+b+a+".png"};b.ParseMagicResName=function(a){for(var b="",c=a.toString().length;5>c;c++)b+="0";return"gameres/ui/magic_res/"+b+a+".png"};b.IsRepleaseItem=function(a){if(null==a||void 0==a)return!1;a=b.GetItemType(a.s);for(var c=ItemMgr.getInstance().UseItemList,d=0,e=0;e<c.length;e++){var g=b.GetItemType(c[e].s);a==g&&d++}if(5<=a&&8>=a){if(!(2>d))return!0}else if(0<d)return!0;return!1};b.CheckItemCanTakeOn=function(a,b){if(a==b)return!0;if(5==a||6==a)if(5==b||6==b)return!0;if(7==a||8==a)if(7==b||8==b)return!0;return!1};b.CheckItemPos=function(a,c){var d=b.ParsePos(c);return a==d?!0:!1};b.ParsePos=function(a){if(1==a)return U_RIGHTHAND;if(2==a)return U_ARMRINGR;if(3==a)return U_RINGL;if(4==a)return U_BUJUK;if(5==a)return U_BELT;if(6==a)return U_BOOTS;if(7==a)return U_CHARM;if(8==a)return U_RINGR;if(9==a)return U_ARMRINGL;if(10==a)return U_NECKLACE;if(11==a)return U_HORSE;if(12==a)return U_HELMET;if(13==a)return U_DRESS;if(14==a)return U_WEAPON};b.WeaponAttackSound=function(a,c,d,e){var g;switch(a){case SM_THROW:case SM_HIT:case SM_HIT+1:case SM_HIT+2:case SM_POWERHIT:case SM_43HIT:case SM_LONGHIT:case SM_WIDEHIT:case SM_FIREHIT:case SM_CRSHIT:case SM_TWNHIT:case SM_66HIT:switch(Math.floor(c/2)){case 6:case 20:g=s_hit_short;break;case 1:g=s_hit_wooden;break;case 2:case 13:case 9:case 5:case 14:case 22:g=s_hit_sword;break;case 4:case 17:case 10:case 15:case 16:case 23:g=s_hit_do;break;case 3:case 7:case 11:g=s_hit_axe;break;case 24:g=s_hit_club;break;case 8:case 12:case 18:case 21:g=s_hit_long;break;default:g=s_hit_fist}break;case SM_101HIT:0==d?g=s_cboZs1_start_m:g=s_cboZs1_start_w;break;case SM_100HIT:g=s_cboZs2_start;break;case SM_102HIT:0==d?g=s_cboZs3_start_m:g=s_cboZs3_start_w;break;case SM_103HIT:g=s_cboZs4_start;break;case SM_60HIT:g=s_60HIT;break;case SM_61HIT:g=s_61HIT;break;case SM_62HIT:g=s_61HIT;break;case SM_SWORDHIT:0==d?g=s_hit_ZRJF_M:g=s_hit_ZRJF_W;break;case SM_STRUCK:if(a=Math.floor(c/2),3==Math.floor(e/2))switch(a){case 6:g=s_struck_armor_sword;break;case 1:case 2:case 4:case 5:case 9:case 10:case 13:case 14:case 15:case 16:case 17:g=s_struck_armor_sword;break;case 3:case 7:case 11:g=s_struck_armor_axe;break;case 8:case 12:case 18:g=s_struck_armor_longstick;break;default:g=s_struck_armor_fist}else switch(a){case 6:g=s_struck_body_sword;break;case 1:case 2:case 4:case 5:case 9:case 10:case 13:case 14:case 15:case 16:case 17:g=s_struck_body_sword;break;case 3:case 7:case 11:g=s_struck_body_axe;break;case 8:case 12:case 18:g=s_struck_body_longstick;break;default:g=s_struck_body_fist}}b.PlayMusicFormat(g)};b.SkillStartSound=function(a,b){if(sound_json){var c=0;b&&(c=b);a=1E4+10*a+c;for(c=0;c<sound_json.length;++c)if(sound_json[c].id==a&&sound_json[c].type)return"wav/"+sound_json[c].type}};b.SkillFireSound=function(a){if(sound_json){a=10*a+10001;for(var b=0;b<sound_json.length;++b)if(sound_json[b].id==a&&sound_json[b].type)return"wav/"+sound_json[b].type}};b.SkillExplosionSound=function(a){if(sound_json){a=10*a+10002;for(var b=0;b<sound_json.length;++b)if(sound_json[b].id==a&&sound_json[b].type)return"wav/"+sound_json[b].type}};b.ClickSound=function(a){switch(a.s.StdMode){case 0:b.PlayMusicFormat(s_click_drug);break;case 31:b.PlayMusicFormat(s_itmclick);break;case 5:case 6:b.PlayMusicFormat(s_click_weapon);break;case 10:case 11:b.PlayMusicFormat(s_click_armor);break;case 22:case 23:b.PlayMusicFormat(s_click_ring);break;case 24:case 26:b.PlayMusicFormat(s_click_armring);break;case 19:case 20:case 21:b.PlayMusicFormat(s_click_necklace);break;case 15:b.PlayMusicFormat(s_click_helmet);break;default:b.PlayMusicFormat(s_itmclick)}};b.PlayMusicFormat=function(a){a=void 0===a?"":a;if(1==s_temp_play)Laya.SoundManager.playSound(a);else{var c="",d=a,d=a.split(".");a=a.split("/");""!=d[0]&&(0!=a.length&&(c=a[a.length-1]),""!=S_LIMIT_FORMAT?(d=d[0]+"."+S_LIMIT_FORMAT,Laya.SoundManager.playSound(d)):(this.currLoadMusic={},null==SOUND_PLAY[c]?b.CheckIsHaveMusic(d[0]+".ogg",E_MUSICFORMAT.OGG):Laya.SoundManager.playSound(SOUND_PLAY[c])))}};b.RuningPlayCall=function(a,b){var c="";null!=this.currLoadMusic.ogg?c=this.currLoadMusic.ogg.url:null!=this.currLoadMusic.mp3?c=this.currLoadMusic.mp3.url:null!=this.currLoadMusic.wav&&(c=this.currLoadMusic.wav.url);if(""!=c){var d="",e=c.split("/");0!=e.length&&(d=e[e.length-1]);SOUND_PLAY[d]=c;Laya.SoundManager.playSound(c)}this.currLoadMusic={}};b.CheckIsHaveMusic=function(a,b){Laya.loader.load(a,Laya.Handler.create(this,function(c){switch(b){case E_MUSICFORMAT.OGG:this.currLoadMusic.ogg=c;break;case E_MUSICFORMAT.MP3:this.currLoadMusic.mp3=c;break;case E_MUSICFORMAT.WAV:this.currLoadMusic.wav=c}1<=Object.keys(this.currLoadMusic).length&&this.RuningPlayCall(a,b)}.bind(this)))};b.hasmining=function(a,b){var c=ItemMgr.getInstance().FindUseItemByPos(U_WEAPON);return c&&c.s&&6==c.s.StdMode&&19==c.s.Shape?0==Mapmodule.CanMove(a,b,1):!1};b.hasexcavate=function(){var a=ObjectManage.findobject(lockingID);return a?a.is_die:!1};b.timetosec=function(a){var b=Math.floor(a/3600),c=Math.floor(a/60)%60;a%=60;var d;10>b?d="0"+b+":":d=b+":";10>c&&(d+="0");d+=c+":";10>a&&(d+="0");return d+a};b.strtoTime=function(a){a=a.split(":");return 3600*a[0]+60*a[1]+1*a[2]};b.GetPakRes=function(a,b){if(a<g_pak_list.length){var c=g_pak_list[a],d=(Array(5).join("0")+(0+b)).slice(-5);return"data/"+c+"/"+d+".png"}};b.checkBlendMode=function(a,b){"\u8d85\u7ea7\u795e\u79d8\u9762\u7eb1"!=a&&"\u6218\u8bb0\u52cb\u7ae0\u00b7Lv5"!=a&&-1==a.indexOf("\u9ec4\u91d1")||!b._style||(b.blendMode="overlay")};b.updatebuff=function(a,c){function d(){for(var a=0;a<g_buffID.length;a++)if(g_buffID[a].key==g){var c=p.getChildByName(g_buffID[a].key);if(c)c=c.getChildByName("time");else break;0<g_buffID[a].value?c.text=b.timetosec(--g_buffID[a].value):(Laya.timer.clear(this,d),g_TimeIndex=-1,v=!0)}}if(null!=c&&null!=c.root){var e=DecodeString(a).split("/"),g=parseInt(e[0]),q=e[6],p=c.root.onLine_bonus;g_TimeIndex=parseInt(e[6]);if(!(1>g||20<g)){var r=p.getChildByName(g);r&&r.removeSelf();var v=!1,w=new Laya.Button("gameres/ui/btn_tab.png");w.stateNum=2;w.name=g;w.on(Laya.Event.CLICK,this,function(){for(var a=1;a<p._childs.length;a++)p._childs[a].name!=g&&(p._childs[a].getChildByName("buff_kuang").visible=!1);a=w.getChildByName("buff_kuang");a.visible=!a.visible;a.visible||(a=60091,-1==g_TimeIndex&&v||(a=60092),Sendmessage.sendActorBuffClick(a,g))});p.addChild(w);for(var z=1;z<p._childs.length;z++)p._childs[z].pos(13+70*(z-1),17);if(""!=e[8]){r=e[8].split("#");if(1<r.length&&(z=r[1].split("|"),z=new Laya.Label(z[0].slice(0,4)+"..."),w.labelColors=Get2RGB(parseInt(r[0])),w.label=z.text,""!=q))if(buff_use_time=parseInt(q),r=new Laya.Label,r.name="time",r.color="#ffe100",r.fontSize=16,r.pos(5,30),w.addChild(r),0>buff_use_time&&(buff_use_time=1),r.text=b.timetosec(--buff_use_time),0==g_buffID.length)g_buffID.push({key:g,value:buff_use_time});else{r=!0;for(z=0;z<g_buffID.length;z++)if(g_buffID[z].key==g){g_buffID[z].value=buff_use_time;r=!1;break}r&&g_buffID.push({key:g,value:buff_use_time})}Laya.timer.loop(1E3,this,d)}if(""!=e[7]){q=new Laya.Image("gameres/ui/buffkuang.png");q.name="buff_kuang";q.visible=!1;q.sizeGrid="4,4,4,4";q.width=100;q.height=100;q.pos(0,30);w.addChild(q);r=e[7].split("|");for(z=e=0;z<r.length;++z){var C=r[z].split("#"),u=new Laya.Label(C[1]);u.fontSize=14;isNaN(parseInt(C[0]))?u.color="#FFFFFF":u.color=Get2RGB(parseInt(C[0]));u.pos(20,20*z+20);q.addChild(u);u.width>e&&(e=u.width)}q.width=e+50;q.height=30*r.length+20;q.pos((p.width-q.width)/2-q.parent.x,80)}}}};b.GetStringWith=function(a){if(null==this.lbl||void 0==this.lbl)this.lbl=new Laya.Text;this.lbl.text=a;a=this.lbl.width;for(var b="",c=0;9999>c;c++)if(b+=" ",this.lbl.text=b,this.lbl.width>a)return b+"";return""};b.GetColorText=function(a,b,c,d,e){b.indexOf("{");b.indexOf("}");c=0;var g="";d=0;for(var p=!1;c<b.length;){if("}"==b[c]){if(p&&0<g.length){var g=g.split("|"),r=new Laya.Label(g[0]);r.fontSize=18;r.color=Get2RGB(g[1].split(":")[0]);a.addChild(r);r.pos(d,0);d+=r.width;g="";p=!1}}else"{"==b[c]?(r=new Laya.Label(g),r.fontSize=18,r.color=e?e:Get2RGB(255),a.addChild(r),r.pos(d,0),d+=r.width,g="",p=!0):c==b.length-1?(r=new Laya.Label(g+=b[c]),r.fontSize=18,r.color=e?e:Get2RGB(255),a.addChild(r),r.pos(d,0),d+=r.width):g+=b[c];c++}return d};b.slice=function(a,b,c){for(var d=0,e=new Uint8Array(c-b);b<c;b++,d++)e[d]=a[b];return e};b.splitStr=function(a,b){var c=Laya.stage.getChildByName("splitStr");null==c&&(c=new Laya.Text,Laya.stage.addChild(c),c.name="splitStr",c.visible=!1);for(var d="",e=0;e<a.length;e++)if(d+=a[e],c.text=d,c.width>b)return{idx:e,str:a.substring(e,a.length)};return null};b.israngeskill=function(a){return 31==a||20==a||11==a||12==a||14==a||27==a||38==a||51==a||119==a||121==a||17==a||21==a||47==a||99==a||85==a||40==a||46==a};b.isselfskill=function(a){return 29==a||19==a||2==a||2==a||15==a||16==a||28==a||5==a||13==a||24==a||25==a};b.numtopng=function(a,c,d){a+="";var e=[];switch(c){case 150:d?e.push("gameres/ui/000161.png"):e.push("gameres/ui/000160.png");break;case 170:d?e.push("gameres/ui/000181.png"):e.push("gameres/ui/000180.png");break;case 190:d?e.push("gameres/ui/000201.png"):e.push("gameres/ui/000200.png");break;case 130:d?e.push("gameres/ui/000141.png"):e.push("gameres/ui/000140.png");break;case 210:d?e.push("gameres/ui/000221.png"):e.push("gameres/ui/000220.png");break;case 230:d?e.push("gameres/ui/000241.png"):e.push("gameres/ui/000240.png")}for(d=0;d<a.length;++d){var g=parseInt(a[d]),g="gameres/ui/"+b.getprefixname(g+c,6)+".png";e.push(g)}return e};b.showvaule=function(a,c,d,e){if(2!=d.type){var g=[],q=new Laya.Point(25,-(d.sp.height/2)),p=0;switch(c){case SM_STRUCK_BLAST:g=this.numtopng(a,150,e);break;case SM_HEROGROUPATTACK:g=this.numtopng(a,150,e);break;case SM_REBOUND:g=this.numtopng(a,170,e);break;case SM_NPCHSPELLCHANGED:g=0<a?this.numtopng(a,190,e):this.numtopng(Math.abs(a),210,e);break;case E_ROLE_CHANGE_HP:g=this.numtopng(a,210,e);break;case E_ROLE_CHANGE_MP:g=this.numtopng(a,230,e);break;case E_ROLE_POISONING_RED:if(a=Animationmodule.playframe(!1,d,"gameres/animation/goneWord/",360,364,200,!1,!0,q))a.name="hongdu";break;case E_ROLE_POISONING_GRE:if(a=Animationmodule.playframe(!1,d,"gameres/animation/goneWord/",370,374,200,!1,!0,q))a.name="lvdu";break;case E_ROLE_ALIVE:Animationmodule.playframe(!1,d,"gameres/animation/goneWord/",380,384,200,!1,!0,q);break;case E_ROLE_LULL:if(a=Animationmodule.playframe(!1,d,"gameres/animation/goneWord/",390,394,200,!1,!0,q))a.name="mabi";break;default:g=this.numtopng(a,130,e)}if(a=b.InstanceOfMem(GameSceneUI))for(c=this.getBloodGonePosX(d,g.length,10),e=0;e<g.length;++e)q=new Laya.Image(g[e]),200<d.sp.height&&(d.sp.height=170),q.pos(c+p,d.y-d.sp.height),a.maplayer.addChild(q),q.zOrder=999999,q.alpha=.2,q.scaleX=.8,q.scaleY=.8,Laya.Tween.to(q,{y:q.y-60,alpha:1,scaleX:1,scaleY:1},300,Laya.Ease.cubicInOut,Laya.Handler.create(this,this.delvaule2,[q])),p+=0==e?17:10}};b.getBloodGonePosX=function(a,b,c){a=a.Blood.x+a.Blood.width/2;b=ontHalfLen=(c*b+7)/2;return a-b+2};b.delvaule2=function(a){Laya.Tween.to(a,{alpha:0,scaleX:.8,scaleY:.8},400,Laya.Ease.quartIn,Laya.Handler.create(b,b.delvaule,[a]))};b.delvaule=function(a){a.removeSelf()};b.ShowNewBag=function(a){var c=b.InstanceOfMem(NewBagUI);a?c?0==c.visible&&(c.visible=!0):(c=new NewBag,Laya.stage.addChild(c)):c&&c.close()};b.ShowNewTeamGroup=function(a){var c=b.InstanceOfMem(TreamGroupUI);a?c?0==c.visible&&(c.visible=!0):(c=new TeamGroup,Laya.stage.addChild(c)):c&&c.BtnClick_exit()};b.ShowNewHeroBag=function(a){var c=b.InstanceOfMem(NewHeroBagUI);a?c||(c=new NewHeroBag,Laya.stage.addChild(c)):c&&c.removeSelf()};b.ShowNewDoudizhu=function(a){var c=b.InstanceOfMem(doudizhuUI);a?c||(c=new UIdoudizhu,Laya.stage.addChild(c)):c&&UIdoudizhu.removeSelf()};b.IntBagList=function(){g_BagItemsList=[];for(var a=0;a<b.MaxBagItems();a++)g_BagItemsList.push(null)};b.IntHeroBagList=function(){g_HeroBagItemsList=[];for(var a=0;46>a;a++)g_HeroBagItemsList.push(null)};b.LoadBagItemIcon=function(a,c){var d=[];if(null!=a)for(var e=0;e<a.length;e++)if(null!=a[e]){var g=b.ParseNameFormat(a[e].s.Looks);""!=g&&(g=g.replace(".png",""),g=this.getImageSetNameByPath(g),d.push(g))}Laya.loader.load(d,Laya.Handler.create(this,function(){0==c?Laya.stage.event("ShowDrug_Items"):1==c&&Laya.stage.event("Update_Npc_Items2")}),null,Laya.Loader.ATLAS)};b.LoadBagItemIcon2=function(a){if(null!=a){var c=this.trimSpecialUnicode(a.s.DBName);b.AddItemNewBag(a);Laya.stage.event("show_log",[{txt:c+" \u88ab\u53d1\u73b0",color:"#00ff00"}])}};b.GetItemNewBag=function(a){null!=a&&""!=a.s.Name&&this.SelfAddItem(a)};b.SelfAddItem=function(a){b.MaxBagItems();for(var c=0;c<b.MaxBagItems();c++)if(null==g_BagItemsList[c]){for(var d=!0,e=0;e<g_boxItemArr.length;e++)if(g_boxItemArr[e]&&g_boxItemArr[e].MakeIndex==a.MakeIndex){d=!1;break}for(e=0;e<g_BagItemsList.length;e++){var g=g_BagItemsList[e];if(g&&g.MakeIndex==a.MakeIndex){d=!1;break}}d&&(g_BagItemsList[c]=a);break}g_OpenBag&&Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems");Laya.stage.event("ShowDrug_Items");Laya.stage.event("show_bag_hint")};b.HeroAddItem=function(a){if(null!=a&&""!=a.s.Name){for(var b=0;b<g_HeroBagItemsList.length;b++)if(null==g_HeroBagItemsList[b]){g_HeroBagItemsList[b]=a;break}g_OpenHeroBag&&Laya.stage.event("Show_HeroBag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems")}};b.AddItemNewBag=function(a){null!=a&&""!=a.s.Name&&this.SelfAddItem(a)};b.DelBagItems=function(a){var c=!1;if(-1!=a){for(var d=0;d<g_BagItemsList.length;d++)if(null!=g_BagItemsList[d]&&g_BagItemsList[d].MakeIndex==a){g_BagItemsList[d]=null;c=!0;break}Laya.stage.event("Show_Bag_Item_ico");b.InstanceOfMem(ScreenWUI)&&Laya.stage.event("Screen_Refresh_SearchItems");return c}};b.DelBagItemByName=function(a){var b=!1;if(""!=a){for(var c=0;c<g_BagItemsList.length;c++)if(null!=g_BagItemsList[c]&&g_BagItemsList[c].s.Name==a){g_WaitItems.Items=g_BagItemsList[c];Sendmessage.sendEat(0,g_BagItemsList[c].MakeIndex,g_BagItemsList[c].s.Name);g_BagItemsList[c]=null;b=!0;break}Laya.stage.event("Show_Bag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems");return b}};b.DelHeroBagItems=function(a){if(-1!=a){for(var b=0;b<g_HeroBagItemsList.length;b++)if(null!=g_HeroBagItemsList[b]&&g_HeroBagItemsList[b].MakeIndex==a){g_HeroBagItemsList[b]=null;break}Laya.stage.event("Show_HeroBag_Item_ico");Laya.stage.event("Screen_Refresh_SearchItems")}};b.GetTakeOnPosition22=function(a,b,c,d){b=-1;switch(a){case 5:case 6:case 95:b=U_WEAPON;break;case 10:case 11:b=U_DRESS;break;case 15:b=U_HELMET;break;case 19:case 20:case 21:b=U_NECKLACE;break;case 22:b=1<=c&&12>=c&&4<=d&&7>=d?40+c-1:U_RINGL;break;case 23:b=U_RINGL;break;case 24:case 26:b=U_ARMRINGR;break;case 30:case 29:b=U_RIGHTHAND;break;case 70:case 71:case 72:case 73:case 74:b=U_ICON;break;case 25:case 51:case 96:b=U_BUJUK;break;case 52:case 62:case 28:b=U_BOOTS;break;case 7:case 53:case 63:b=U_CHARM;break;case 54:case 27:case 64:b=U_BELT;break;case 16:b=U_HAT;break;case 48:b=U_SHIELD;break;case 65:b=U_DRUM;break;case 66:case 67:b=U_FASHIONDRESS;break;case 68:case 69:b=U_FASHIONWEAPON;break;case 178:b=U_FASHIONHELMET;break;case 75:case 76:case 77:b=U_FASHIONNECKLACE;break;case 79:case 80:b=U_FASHIONARMRINGR;break;case 81:case 82:b=U_FASHIONARMRINGL;break;case 83:b=U_FASHIONRIGHTHAND;break;case 84:case 85:b=U_FASHIONBELT;break;case 86:case 87:b=U_FASHIONBOOTS;break;case 88:case 89:b=U_FASHIONCHARM;break;case 78:b=U_HORSE}if(b==U_RINGL||b==U_ARMRINGR||b==U_HELMET||b==U_NECKLACE)if(4==d&&(b=40),6==d&&(b=207),7==d&&(b=208),2==d)if(1<=c&&6>=c)b=30+c-1;else if(0==c||7==c)b=209;return b};b.GetHumPos=function(a){var b=-1;switch(a){case 5:case 6:case 95:b=U_WEAPON;break;case 10:case 11:b=U_DRESS;break;case 15:b=U_HELMET;break;case 19:case 20:case 21:b=U_NECKLACE;break;case 22:b=U_RINGL;break;case 23:b=U_RINGL;break;case 24:case 26:b=U_ARMRINGR;break;case 30:case 29:b=U_RIGHTHAND;break;case 70:case 71:case 72:case 73:case 74:b=U_ICON;break;case 25:case 51:case 96:b=U_BUJUK;break;case 52:case 62:case 28:b=U_BOOTS;break;case 7:case 53:case 63:b=U_CHARM;break;case 54:case 27:case 64:b=U_BELT;break;case 16:b=U_HAT;break;case 48:b=U_SHIELD;break;case 65:b=U_DRUM;break;case 66:case 67:b=U_FASHIONDRESS;break;case 68:case 69:b=U_FASHIONWEAPON;break;case 178:b=U_FASHIONHELMET;break;case 75:case 76:case 77:b=U_FASHIONNECKLACE;break;case 79:case 80:b=U_FASHIONARMRINGR;break;case 81:case 82:b=U_FASHIONARMRINGL;break;case 83:b=U_FASHIONRIGHTHAND;break;case 84:case 85:b=U_FASHIONBELT;break;case 86:case 87:b=U_FASHIONBOOTS;break;case 88:case 89:b=U_FASHIONCHARM;break;case 78:b=U_HORSE}return b};b.IntUserItems=function(a){g_UserItemList=[];for(var b=0;b<a;b++)g_UserItemList.push(null)};b.IntHeroItems=function(a){g_HeroItemList=[];for(var b=0;b<a;b++)g_HeroItemList.push(null)};b.GetUserItems=function(a){if(-1!=a)for(var b=0;b<g_UserItemList.length;b++)if(null!=g_UserItemList[b]&&g_UserItemList[b].MakeIndex==a)return g_UserItemList[b]};b.GetBagItems=function(a){if(-1!=a)for(var b=0;b<g_BagItemsList.length;b++)if(null!=g_BagItemsList[b]&&g_BagItemsList[b].MakeIndex==a)return g_BagItemsList[b]};b.DelUserItems=function(a){var b=!1;if(-1!=a){for(var c=0;c<g_UserItemList.length;c++)if(null!=g_UserItemList[c]&&g_UserItemList[c].MakeIndex==a){a=g_UserItemList[c];g_UserItemList[c]=null;GlobalCfglist.d_autoskill_3&&Gameconfig.add_Use_Up(a);b=!0;Laya.stage.event("Show_Item_ico",-1);break}return b}};b.DelHeroItems=function(a){if(-1!=a){for(var b=0;b<g_HeroItemList.length;b++)if(null!=g_HeroItemList[b]&&g_HeroItemList[b].MakeIndex==a){g_HeroItemList[b]=null;break}Laya.stage.event("Show_HeroItem_ico",-1)}};b.UpdateHeroItems=function(a){for(var b=!1,c=-1,d=0;d<g_HeroBagItemsList.length;d++)if(null!=g_HeroBagItemsList[d]&&g_HeroBagItemsList[d].MakeIndex==a.MakeIndex){c=a.Dura-g_HeroBagItemsList[d].Dura;g_HeroBagItemsList[d]=a;Laya.stage.event("Show_HeroBag_Item_ico",-1);b=!0;break}if(!b)for(d=0;d<g_HeroItemList.length;d++)if(g_HeroItemList[d]&&g_HeroItemList[d].MakeIndex==a.MakeIndex){c=Math.abs(a.Dura-g_HeroItemList[d].Dura);g_HeroItemList[d]=a;break}return c};b.UpdateItems=function(a){for(var c=!1,d=-1,e=0;e<g_BagItemsList.length;e++)if(null!=g_BagItemsList[e]&&g_BagItemsList[e].MakeIndex==a.MakeIndex&&(d=a.Dura-g_BagItemsList[e].Dura,-1!=b.CheckHaveGlobalList(g_BagItemsList,a)||-1==b.CheckHaveGlobalList(g_StoreItemList,a))){g_BagItemsList[e]=a;Laya.stage.event("Show_Bag_Item_ico",-1);c=!0;break}if(!c){c=!1;for(e=0;e<g_UserItemList.length;e++)if(g_UserItemList[e]&&g_UserItemList[e].MakeIndex==a.MakeIndex){d=Math.abs(a.Dura-g_UserItemList[e].Dura);g_UserItemList[e]=a;c=!0;Laya.stage.event("showDuraHum");break}if(!c&&a){if(-1==b.CheckHaveGlobalList(g_BagItemsList,a))return Laya.stage.event("ShowDrug_Items"),d;b.AddItemNewBag(a)}}Laya.stage.event("ShowDrug_Items");return d};b.CheckHaveGlobalList=function(a,b){for(var c=0;c<a.length;c++)if(null!=a[c]&&a[c].MakeIndex==b.MakeIndex)return c;return-1};b.UpdateUserItems=function(a){if(null!=a)for(var b=0;b<g_UserItemList.length;b++)if(null!=g_UserItemList[b]&&g_UserItemList[b].MakeIndex==a.MakeIndex){g_UserItemList[b]=a;break}};b.UpdateUserItemsForIdx=function(a,b,c){a<g_UserItemList.length&&null!=g_UserItemList[a]&&(g_UserItemList[a].Dura=b,g_UserItemList[a].DuraMax=c)};b.ShowNewLogo=function(a,c,d,e){this.SkillListType=c;this.SkillRockeNum=d;d=null;var g={target:null},q=b.InstanceOfMem(HumWinUI);if(a){q?null!=e&&(d=q._childs[0].getChildByName(e),null!=d?g.target=d:g.target.name=e.toString(),q.ontab1_Click(g)):(q=new HumWin,null!=e&&(d=q._childs[0].getChildByName(e),null!=d?g.target=d:g.target.name=e.toString(),q.ontab1_Click(g)),Laya.stage.addChild(q));if(1==c)q.onState_skill();q.ShowItemico(-1)}else q&&q.removeSelf()};b.ShowHeroWin=function(a,c,d,e){this.SkillListType=c;this.SkillRockeNum=d;d=b.InstanceOfMem(HeroWinUI);var g=null,q={target:{name:e}};if(a){d?null!=e&&(g=d._childs[0].getChildByName(e),null!=g?q.target=g:q.target.name=e.toString(),d.ontab1_Click(q)):(d=new HeroWin,null!=e&&(g=d._childs[0].getChildByName(e),null!=g?q.target=g:q.target.name=e.toString(),d.ontab1_Click(q)),Laya.stage.addChild(d));if(1==c)d.onState_skill();d.ShowItemico(-1)}else d&&d.removeSelf()};b.NewShowItemsClose=function(){var a=b.InstanceOfMem(NewItemInfoUI);a||(a=new NewItemInfo,Laya.stage.addChild(a));a.removeSelf()};b.NewShowItemsInf=function(a,c,d){function e(b){r&&r.ShowInfo(q,b,d,a)}function g(a){C&&C.ShowInfo(u,a,d,z)}if(a){d||(d=Laya.stage.width/2);var q=b.GetItemInfo(a,c),p=GameApi.GetItemScore(a),r=Laya.stage.getChildByName("comparison");r||(r=new NewItemInfo,r.name="comparison",r.x=null==d?100:d-r.width/2,Laya.stage.addChild(r),r.Item_bg.y=(Laya.stage.height-r.height)/2);r.item=a;var v=70<=a.s.StdMode&&74>=a.s.StdMode?0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items":"items";if(1!=g_OpenIdx&&g_serverconfigtxt.boItemCompare){var w=b.GetItemType(a.s),z=g_UserItemList[w];if(z){var C=Laya.stage.getChildByName("comparison1"),u=b.GetItemInfo(z,c),B=GameApi.GetItemScore(z);C||(C=new NewItemInfo,C.name="comparison1",null!=d&&(C.x=r.x+r.Item_bg.width+4),Laya.stage.addChild(C),C.Item_bg.y=r.Item_bg.y);C.item=z;var A=70<=z.s.StdMode&&74>=z.s.StdMode?0<=g_ClientConfig.nShowUserIcon&&g_ClientConfig.nShowUserIcon<g_pak_list.length?g_pak_list[g_ClientConfig.nShowUserIcon]:"items":"items";C.but_bg.visible=!1;if(5==w||6==w||7==w||8==w){var D=null;switch(w){case 5:D=g_UserItemList[6];C.change_idx=6;break;case 6:D=g_UserItemList[5];C.change_idx=5;break;case 7:D=g_UserItemList[8];C.change_idx=8;break;case 8:D=g_UserItemList[7],C.change_idx=7}D&&(C.change_item=D,C.change_type=c,C.change_x=d,C.change_side.visible=!0)}p==B?(r.gradeColor=2,C.gradeColor=2):B||0==B?p>B?(r.gradeColor=1,C.gradeColor=0):p<B&&(r.gradeColor=0,C.gradeColor=1):r.gradeColor=1}else Laya.stage.removeChildByName("comparison1")}a&&b.loadImg(a.s.Looks,v,e);z&&b.loadImg(z.s.Looks,A,g)}};b.NewShowMagicInf=function(){if(1==this.SkillListType)b.AddSkill(this.SkillRockeNum);else{var a=GameApi.GetMagicDes(g_MoveSkill.Def.sMagicName),c=[];if(null!=g_MoveSkill){c.push(g_MoveSkill.Def.sMagicName+"/*/#ffffff");var d="";b.getJobName(g_MoveSkill.Def.btJob)&&(d=b.getJobName(g_MoveSkill.Def.btJob));c.push("\u9002\u7528\u804c\u4e1a: "+d+"/*/#ffffff");a&&c.push(a+"/*/#ffffff");a=g_MoveSkill.Def.btEffect;38==g_MoveSkill.Def.wMagicId&&(a=4);46==g_MoveSkill.Def.wMagicId&&(a=42);39==g_MoveSkill.Def.wMagicId&&(a=0);a=this.ParseNameFormatSkill(2*a);1E3<=g_MoveSkill.Def.wMagicId&&1500>=g_MoveSkill.Def.wMagicId&&(d=Skillmodule.findCustomSkill(g_MoveSkill.Def.wMagicId,g_MoveSkill.Level))&&(a=GameMission.getUrl(g_pak_list[d.iconFileIndex],d.wIconImageIndex));g_MoveItems.Items=null;d=b.InstanceOfMem(NewItemInfoUI);d||(d=new NewItemInfo,Laya.stage.addChild(d));d.ShowInfo(c,a)}}};b.AddSkill=function(a){if(null!=g_MoveSkill)if("\u57fa\u672c\u5251\u672f"==g_MoveSkill.Def.sMagicName||"\u653b\u6740\u5251\u672f"==g_MoveSkill.Def.sMagicName||"\u7cbe\u795e\u529b\u6218\u6cd5"==g_MoveSkill.Def.sMagicName||"\u62a4\u4f53\u795e\u76fe"==g_MoveSkill.Def.sMagicName)Laya.stage.event("show_log",[{txt:"\u88ab\u52a8\u6280\u80fd\u65e0\u6cd5\u4e3b\u52a8\u5e03\u7f6e",color:"#ff0000"}]);else{for(var b=0;b<g_SetupMagicList.length;b++)if(null!=g_SetupMagicList[b]&&g_MoveSkill.Def.wMagicId==g_SetupMagicList[b].Def.wMagicId){GameApi.SetSkillKey(g_SetupMagicList[b].Def.wMagicId,0);Laya.stage.event("remove_magic",b);g_SetupMagicList[b]=null;break}null!=g_SetupMagicList[a]&&(GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,0),Laya.stage.event("remove_magic",a));g_SetupMagicList[a]=g_MoveSkill;GameApi.SetSkillKey(g_SetupMagicList[a].Def.wMagicId,a+49);null==g_SetupMagicList[12]?Laya.stage.event("add_magic_attack"):Laya.stage.event("add_magic_attack",[g_SetupMagicList[12]]);Laya.stage.event("Magic_Refresh");Laya.stage.event("update_icon",a)}};b.ShowItemeffect=function(a,c){if(null!=c){var d=c.s.EffectFileIndex,e=c.s.EffectStartOffSet,g=c.s.EffectImageCount,q=c.s.EffectFrameTime,p=a.getChildByName("effect");if(p&&(65535==d||0==d))p.removeSelf();else if(65535!=d&&null==p&&0!=d){for(var p=[],r=e;r<=e+g-1;r++){var v=("000000"+r).slice(-6),v=b.getImageSetNameByPath("data/"+g_pak_list[d]+"/"+v);p.push(v)}this.loadImgEx(p,function(){var b=Offsetmodule.getoffsets("data/"+g_pak_list[d]+"/",e,e+g-1),b=0<b.length?new Laya.Point(a.width/2-b[0].x,a.height/2-b[0].y):new Laya.Point(a.width/2,a.height/2);if(b=Animationmodule.playframe(!0,a,"data/"+g_pak_list[d]+"/",e,e+g-1,q,!0,!1,b))b.name="effect"})}}};b.setitemoff=function(a,b){var c=new Laya.Point;a==U_WEAPON?(c.x=-20+b.x,c.y=52+b.y):a==U_DRESS?(c.x=-71+b.x,c.y=-18+b.y):a==U_HELMET?(c.x=-69+b.x,c.y=16+b.y):a==U_SHIELD?(c.x=-50+b.x,c.y=-24+b.y):a==U_HAT?(c.x=-69+b.x,c.y=20+b.y):a==U_FASHIONDRESS?(c.x=-64+b.x,c.y=-18+b.y):a==U_FASHIONWEAPON?(c.x=-20+b.x,c.y=52+b.y):a==U_FASHIONHELMET&&(c.x=-75+b.x,c.y=21+b.y);return c};b.hasuseblend=function(a){return 1890==a?!0:!1};b.ShowItemeffectEx=function(a,b,c,d,e){if(null!=c){a=c.s.BodyEffectFileIndex;var g="",p=null,r=c.s.BodyEffectStartOffSet,v=c.s.BodyEffectImageCount,w=c.s.BodyEffectFrameTime;if(0<a&&a<g_pak_list.length){var g=g_pak_list[a],z=b.getChildByName("bodyeffect");if(z&&(65535==a||0==a))Animationmodule.removeAni(z);else if(65535!=a&&null==z&&0!=a){if(d)switch(e){case U_WEAPON:var C=new Laya.Point(-25,55);break;case U_DRESS:C=new Laya.Point(-75,-18);break;case U_HELMET:C=new Laya.Point(0,0);break;case U_HAT:C=new Laya.Point(0,0);break;case U_FASHIONDRESS:C=new Laya.Point(-178,-142);break;case U_FASHIONWEAPON:C=new Laya.Point(-131,-77);break;case U_FASHIONHELMET:C=new Laya.Point(0,0);break;case U_SHIELD:C=new Laya.Point(-118,-30)}else C=new Laya.Point(b.width/2,b.height/2);"stateitem"==g&&(p="data/stateitem/");if(z=Animationmodule.playframe(!0,b,"data/"+g+"/",r,r+v-1,w,!0,!1,C,null,null,null,p,!d))z.name="bodyeffect"+c.MakeIndex}}}};b.ShowNewStore=function(a,c){var d=b.InstanceOfMem(NewStoreRomUI);a?(d||(d=new NewStore,Laya.stage.addChild(d)),d.ShowItemico(c)):d&&d.removeSelf()};b.DelStoreItems=function(a){if(-1!=a)for(var b=0;b<g_StoreItemList.length;b++)if(null!=g_StoreItemList[b]&&g_StoreItemList[b].MakeIndex==a){g_StoreItemList[b]=null;Laya.stage.event("Show_Store_Item_ico",g_StoreLimitCount);break}};b.AddStoreItems=function(a){if(null!=a){for(var b=!1,c=0;c<g_StoreItemList.length;c++)if(null==g_StoreItemList[c]){g_StoreItemList[c]=a;Laya.stage.event("Show_Store_Item_ico",[g_StoreLimitCount]);b=!0;break}b||(g_StoreItemList.push(a),Laya.stage.event("Show_Store_Item_ico",[g_StoreLimitCount]))}};b.ReStoreItems=function(a){console.log("ReStoreItems",a)};b.AddMagic=function(a){null!=a&&(g_UserMagicList.push(a),Laya.stage.event("Magic_Refresh"))};b.AddHeroMagic=function(a){null!=a&&(g_HeroMagicList.push(a),Laya.stage.event("HeroMagic_Refresh"))};b.DelMagic=function(a){for(var b=0;b<g_UserMagicList.length;b++)if(null!=g_UserMagicList[b]&&g_UserMagicList[b].Def.wMagicId==a){g_SetupMagicList[g_UserMagicList[b].Key-49]=null;g_UserMagicList.splice(b,1);Laya.stage.event("Magic_Refresh");Laya.stage.event("update_icon");break}};b.DelHeroMagic=function(a){for(var b=0;b<g_HeroMagicList.length;b++)if(null!=g_HeroMagicList[b]&&g_HeroMagicList[b].Def.wMagicId==a){g_HeroMagicList.splice(b,1);Laya.stage.event("HeroMagic_Refresh");break}};b.UpdateMagicLvExp=function(a,b,c,d){for(var e=0;e<g_UserMagicList.length;e++)if(null!=g_UserMagicList[e]&&g_UserMagicList[e].Def.wMagicId==a){g_UserMagicList[e].Level=b;g_UserMagicList[e].CurTrain=c;g_UserMagicList[e].btStrengLevel=d;Laya.stage.event("Magic_Refresh");break}};b.UpdateHeroMagicLvExp=function(a,b,c,d){for(d=0;d<g_HeroMagicList.length;d++)if(null!=g_HeroMagicList[d]&&g_HeroMagicList[d].Def.wMagicId==a){g_HeroMagicList[d].Level=b;g_HeroMagicList[d].CurTrain=c;Laya.stage.event("HeroMagic_Refresh");break}};b.CountMoveDown=function(a){7==a?a=0:a++;return a};b.CountMoveUp=function(a){0==a?a=7:a--;return a};b.escapedir=function(a){var b=[];0==a?(b.push(6),b.push(7),b.push(0),b.push(1),b.push(2)):1==a?(b.push(7),b.push(0),b.push(1),b.push(2),b.push(3)):2==a?(b.push(0),b.push(1),b.push(2),b.push(3),b.push(4)):3==a?(b.push(1),b.push(2),b.push(3),b.push(4),b.push(5)):4==a?(b.push(2),b.push(3),b.push(4),b.push(5),b.push(6)):5==a?(b.push(3),b.push(4),b.push(5),b.push(6),b.push(7)):6==a?(b.push(4),b.push(5),b.push(6),b.push(7),b.push(0)):7==a&&(b.push(5),b.push(6),b.push(7),b.push(0),b.push(1));return b};b.rollMsg=function(a){var c=a[0];if(c){var d=new Laya.Image;Laya.stage.addChild(d);d.width=Laya.stage.width;d.height=25;d.x=0;d.y=20;d.name="roll_img";d.skin="gameres/ui/img_roll.png";var e=b.msgSetColor(c.txt,c.fcolor,c.bcolor,16);if(d&&e){var g=function(){e.x-=2;if(e.x<-e.width){if(0<--c.count)b.rollMsg(a);else if(a[0]){var d=a[0].y;a.shift();0<a.length?b.rollMsg(a):delete G_RollMsg[d]}Laya.stage.getChildByName("roll_img")&&Laya.stage.getChildByName("roll_img").removeSelf();Laya.timer.clear(this,g)}};d.addChild(e);e.x=d.width;c.y&&d.pos(c.x,c.y);Laya.timer.loop(20,this,g,[c.y])}}};b.superMsg=function(a,c,d){function e(){Laya.Tween.to(a[0],{y:c-a[0].height,alpha:0},1500,null,Laya.Handler.create(this,function(){a[0].removeSelf();a.shift();1>a.length&&(0<--d?0<g_superMsg.length&&(a=a.concat(g_superMsg[0]),b.superMsg(a,c,d)):(g_superMsg.shift(),0<g_superMsg.length&&(a=a.concat(g_superMsg[0]),b.superMsg(a,g_superMsg[0].nY,g_superMsg[0].nCount))))}));a[1]&&(a[1].name="superTxt",a[1].alpha=0,a[1].x=(Laya.stage.width-a[1].width)/2,a[1].y=c+a[1].fontSize,Laya.stage.addChild(a[1]),Laya.Tween.to(a[1],{y:c,alpha:1},1500,null,Laya.Handler.create(this,function(){0<a.length&&b.superMsg(a,c,d)})))}var g=Laya.stage.getChildByName("superTxt");1>a.length||(g||(Laya.stage.addChild(a[0]),a[0].name="superTxt",a[0].alpha=1,a[0].x=(Laya.stage.width-a[0].width)/2,a[0].y=c),Laya.timer.once(3E3,this,e))};b.msgSetColor=function(a,b,c,d){var e=new Laya.Panel;e.width=0;e.y=4;-1!=a.indexOf("{")&&-1!=a.indexOf("}")&&(a=a.replace(/{/g,"\x3c"),a=a.replace(/}/g,"\x3e"));if(-1==a.indexOf("\x3c")||-1==a.indexOf("\x3e")||-1==a.toUpperCase().indexOf("/FCOLOR")&&-1==a.indexOf("|"))return e=new Laya.Label,e.fontSize=d,e.text=a,e.align="center",e.y=5,e.stroke=1,b&&e&&(e.color=Get2RGB(b)),c&&e&&(e.strokeColor=Get2RGB(c)),e;for(var g=[];-1!=a.indexOf("\x3c")&&-1!=a.indexOf("\x3e");){if(0!=a.indexOf("\x3c")){var p=a.indexOf("\x3c");g.push(a.substring(0,p));a=a.substring(p)}var p=a.indexOf("\x3c"),r=a.indexOf("\x3e");-1!=p&&-1!=r?(g.push(a.substring(p+1,r)),a=a.substring(r+1)):g.push(a)}""!=a&&g.push(a);for(a=0;a<g.length;a++)p=new Laya.Label,p.fontSize=d,-1!=g[a].toUpperCase().indexOf("/FCOLOR\x3d")?(r=g[a].toUpperCase().split("/FCOLOR\x3d"),r[0]&&(p.text=r[0]),r[1]&&(p.color=Get2RGB(parseInt(r[1])))):-1!=g[a].indexOf("|")?(r=g[a].split("|"),p.text=r[0],-1!=r[1].indexOf(":")&&(r=r[1].split(":"),3==r.length&&(p.color=Get2RGB(r[0]),"0"==r[2]?p.borderColor=Get2RGB(r[1]):(p.stroke=2,p.strokeColor=Get2RGB(r[1]))))):(p.text=g[a],p.color=Get2RGB(b)),p.align="center",c&&p&&(p.strokeColor=Get2RGB(c)),p.x=e.width,p.y=1,cur_use_app?e.width+=p.width+3:e.width+=p.width,e.addChild(p);return e};b.newLineMsg=function(a,b){var c=Laya.stage.getChildByName("newline"+b);if(!c&&a[0]&&(c=a[0],Laya.stage.addChild(c),c.nTime))if(1==c.nMode)c.alpha=.1,c.y+=c.y,Laya.Tween.to(c,{y:c.y/2,alpha:1},1500,null,Laya.Handler.create(this,function(){Laya.timer.once(1E3*c.nTime-1500,this,function(){Laya.Tween.to(c,{y:c.y/2,alpha:.1},1500,null,Laya.Handler.create(this,function(){c.removeSelf();a.shift();a[0]&&this.newLineMsg(a,b)}))})}));else Laya.timer.once(1E3*c.nTime,this,function(){c.removeSelf();a.shift();a[0]&&this.newLineMsg(a,b)})};b.countDownMsg=function(){function a(c,d,e){c.time--;e&&e[1]?c.text=e[0]+b(c.time)+e[1]:e&&e[0]&&(c.text=e[0]+b(c.time));for(d=0;d<G_countDownMsg.length;d++)G_countDownMsg[d].y=400-18*(G_countDownMsg.length-d),0>G_countDownMsg[d].time&&(G_countDownMsg[d].removeSelf(),G_countDownMsg.splice(d,1));0==G_countDownMsg.length&&Laya.timer.clear(this,a)}function b(a){var c=a%60,f="";return f=60>d.time?c+"\u79d2":~~(a/60)+"\u5206"+c+"\u79d2"}for(var c=0;c<G_countDownMsg.length;c++)G_countDownMsg[c].y=400-18*(G_countDownMsg.length-c);for(c=0;c<G_countDownMsg.length;c++){var d=G_countDownMsg[c];if(d){if(-1!=d.text.indexOf("%d")){var e=d.text.split("%d");d.text=d.text.replace("%d",b(d.time))}else-1!=d.text.indexOf("%s")&&(e=d.text.split("%s"),d.text=d.text.replace("%s",b(d.time)));Laya.stage.addChild(d);Laya.timer.loop(1E3,this,a,[d,c,e])}}};b.printcaller=function(){function a(b){if("function"==typeof b||"object"==typeof b)var c=(""+b).substr(0,100)+"#   \r";return c}for(var b=0,c=arguments.callee.caller;c&&!(15<b++);)Laya.stage.event("open_gm_info",a(c)),c=c&&c.caller};b.DelUserIcon=function(a){if(-1!=a)for(var b=0;b<g_IconCList.length;b++)if(null!=g_IconCList[b]&&g_IconCList[b].MakeIndex==a){g_UserItemList[U_ICON]&&g_UserItemList[U_ICON].MakeIndex==a&&(g_UserItemList[U_ICON]=null);g_IconCList.splice(b,1);Laya.stage.event("Show_Item_ico",-1);break}};b.Suitvalue=function(a,b,c,d,e,g){for(var p="",p=0;p<b.length;p++)if(-1!=b[p].indexOf(a)){var r=b[p].split("~!");if(r[0]!=a)return c;break}""!=c?(15<=g&&20>=g?r[1]+="0%":24<=g&&34>=g?r[1]+="%":46<=g&&(r[1]+="%"),p="\u62a4\u8eab"==a||"\u590d\u6d3b"==a||"\u9ebb\u75f9"==a||"\u9632\u6b62\u62a4\u8eab"==a||"\u9632\u6b62\u590d\u6d3b"==a||"\u9632\u6b62\u9ebb\u75f9"==a||"\u6280\u5de7"==a||"\u63a2\u6d4b"==a||"\u8d1f\u91cd"==a?a:a+"+"+r[1],c=c+"  "+p,e.push(c+"/*/"+d),a=new Laya.Text,a.text=c,180<a.textWidth&&e.push("/*/"+d),c=""):(15<=g&&20>=g?r[1]+="0%":24<=g&&34>=g?r[1]+="%":46<=g&&(r[1]+="%"),c="\u62a4\u8eab"==a||"\u590d\u6d3b"==a||"\u9ebb\u75f9"==a||"\u9632\u6b62\u62a4\u8eab"==a||"\u9632\u6b62\u590d\u6d3b"==a||"\u9632\u6b62\u9ebb\u75f9"==a||"\u6280\u5de7"==a||"\u63a2\u6d4b"==a||"\u8d1f\u91cd"==a?a:a+"+"+r[1]);return c};b.ShowPersonalStore=function(a){var c=b.InstanceOfMem(PersonalStoreUI);a?c||(c=new PersonalStore,Laya.stage.addChild(c)):c&&c.removeSelf()};b.ShowStore=function(a){var c=b.InstanceOfMem(StoreUI);a?c||(c=new StoreWin,Laya.stage.addChild(c)):c&&c.removeSelf()};b.ShowMyShop=function(a){var c=b.InstanceOfMem(MyStoreUI);a?c||(c=new MyStoreWin,Laya.stage.addChild(c)):c&&c.removeSelf()};b.ShowItemNum=function(a,c,d,e){b.loadImg(a.s.Looks,"items",function(g){g=new Laya.Image(g);1<c._childs.length?c.removeChild(c._childs[1]):0<c._childs.length&&"laya.ui.Image"==c._childs[0].__className&&c.removeChild(c._childs[0]);c.addChild(g);b.ShowItemeffect(g,a);if((17==a.s.StdMode||18==a.s.StdMode||41==a.s.StdMode||40==a.s.StdMode||42==a.s.StdMode||31==a.s.StdMode&&-1!=a.s.Name.indexOf("\u7ecf\u9a8c\u5377\u8f74"))&&0<a.s.Reserved&&0<a.Dura){var q=new Laya.Text;q.color="#ffffff";q.text="x"+(a.Dura+1);b.setCanAddTxtStroke(q);q.align="right";q.width=30;g.addChild(q)}else 0==a.s.StdMode&&5==a.s.Source&&0<a.Dura&&(q=new Laya.Text,q.color="#ffffff",q.align="right",q.width=30,q.text="x"+a.Dura,b.setCanAddTxtStroke(q),g.addChild(q));d&&e&&(g.pos(d-g.width/2,e-g.height/2),b.setTxtFixedPos(g,c.width,c.height))})};b.ShowMoneyType=function(a){var b="";0==a?b=g_GameGoldNum.key:1==a?b=g_GamePointNum.key:2==a?b=g_GameCionNum.key:3==a?b=g_nGameDiamond.key:4==a&&(b=g_nGameGird.key);return b};b.ShowbtItemType=function(a){var b="";0==a?b="\u88c5\u9970":1==a?b="\u8865\u7ed9":2==a?b="\u5f3a\u5316":3==a?b="\u597d\u53cb":4==a?b="\u9650\u91cf":5==a&&(b="\u5947\u73cd");return b};b.ShowSelectedIdx=function(a){var b=0;"\u4e0d\u9650"==a?b=0:a==g_GameGoldNum.key?b=0:a==g_GamePointNum.key?b=1:a==g_GameCionNum.key?b=2:a==g_nGameDiamond.key?b=3:a==g_nGameGird.key&&(b=4);return b};b.ApplyDoorState=function(a,b,c){if(AStart.cur_matx&&AStart.cur_matx[0]&&a<AStart.cur_matx.length&&b<AStart.cur_matx[0].length){AStart.cur_matx[b-2][a]=!1;AStart.cur_matx[b-1][a+1]=!1;AStart.cur_matx[b-2][a+1]=!1;var d=c==dsClose?!0:!1;AStart.cur_matx[b][a]=d;AStart.cur_matx[b-1][a]=d;AStart.cur_matx[b-2][a]=d;AStart.cur_matx[b-1][a+1]=d;AStart.cur_matx[b-2][a+1]=d;AStart.cur_matx[b-1][a-1]=d;AStart.cur_matx[b][a-1]=d;AStart.cur_matx[b+1][a-1]=d;AStart.cur_matx[b][a-2]=d;c==dsOpen&&(AStart.cur_matx[b-2][a]=!0,AStart.cur_matx[b-1][a+1]=!0,AStart.cur_matx[b-2][a+1]=!0)}};b.JudgeMagicMp=function(a,b){if(a&&b&&a.Def&&void 0!=a.Level&&b.m_Abil){var c=a.Def.wSpell/(a.Def.btTrainLv+1)*(a.Level+1),d=Math.round(c),e=Math.floor(c);0==e%2&&.5==c-e&&(d=e);d+=a.Def.btDefSpell;if(b.m_Abil.MP>=d)return!0}return!1};b.IfOpenBlend=function(a,b){if(IsBlendFileName&&""!=IsBlendFileName){var c="",c=[];-1!=a.indexOf("/")?(c=a.split("/"),c=c[c.length-2]):c=a;for(var d=0;d<IsBlendFileName.length;d++){var e=IsBlendFileName[d].split(","),g=e[0],p=e[1],e=e[2];if(c&&g&&g==c&&(-1==b||b>=p&&b<=e))return!0}}return!1};b.GetItemTypeEx=function(a){var b=-1;if(void 0==a)return b;5==a.StdMode||6==a.StdMode||95==a.StdMode?b=U_WEAPON:10==a.StdMode||11==a.StdMode?b=U_DRESS:15==a.StdMode?b=U_HELMET:19==a.StdMode||20==a.StdMode||21==a.StdMode?b=U_NECKLACE:22==a.StdMode||23==a.StdMode?(b=U_RINGL,1<=a.Expand1&&12>=a.Expand1&&4<=a.OverLap&&7>=a.OverLap&&(b=U_GODBLESS1+a.Expand1-1)):24==a.StdMode||26==a.StdMode?b=U_ARMRINGR:29==a.StdMode||30==a.StdMode?b=U_RIGHTHAND:70<=a.StdMode&&74>=a.StdMode?b=U_ICON:25==a.StdMode||51==a.StdMode||96==a.StdMode?b=U_BUJUK:52==a.StdMode||62==a.StdMode||28==a.StdMode?b=U_BOOTS:7==a.StdMode||53==a.StdMode||63==a.StdMode?b=U_CHARM:54==a.StdMode||64==a.StdMode||27==a.StdMode?b=U_BELT:16==a.StdMode?b=U_HAT:48==a.StdMode?b=U_SHIELD:65==a.StdMode?b=U_DRUM:66==a.StdMode||67==a.StdMode?b=U_FASHIONDRESS:68==a.StdMode||69==a.StdMode?b=U_FASHIONWEAPON:178==a.StdMode?b=U_FASHIONHELMET:75==a.StdMode||76==a.StdMode||77==a.StdMode?b=U_FASHIONNECKLACE:79==a.StdMode||80==a.StdMode?b=U_FASHIONARMRINGR:81==a.StdMode||82==a.StdMode?b=U_FASHIONRINGL:83==a.StdMode?b=U_FASHIONRIGHTHAND:84==a.StdMode||85==a.StdMode?b=U_FASHIONBELT:86==a.StdMode||87==a.StdMode?b=U_FASHIONBOOTS:88==a.StdMode||89==a.StdMode?b=U_FASHIONCHARM:78==a.StdMode&&(b=U_HORSE);return b};b.ReadShieldPak=function(a,b,c,d){--a;if(0<=a)var e=600*a,g="s-shield";a=[];if(obj_config)for(c=this.getstatenamebyplayer(c),b=0;b<obj_config.HA[c].frame;b++){var p=""+this.getprefixname(e+obj_config.HA[c].start+b+d*(obj_config.HA[c].frame+obj_config.HA[c].skip),6);a.push(p)}d=[];d.ftime=obj_config.HA[c].ftime;d.frames=a;d.file=g;return d};b.scoreComparison=function(a){if(a&&g_ItemScoreRecord&&g_ItemScoreRecord.BoOpen){var c=b.GetItemType(a.s);return 24==a.s.StdMode||26==a.s.StdMode?this.isShowArrow(5,a)||this.isShowArrow(6,a):22==a.s.StdMode||23==a.s.StdMode?this.isShowArrow(7,a)||this.isShowArrow(8,a):this.isShowArrow(c,a)}return!1};b.isShowArrow=function(a,b){if(g_ItemScoreRecord.boJobShowItemScore){var c=ObjectManage.findobject(playerID),d=0;c&&c.skin_feature&&(d=c.skin_feature.btGender);var e=THumFeature(c.data.fea.buffer).btJob,c=b.s.StdMode;if((10==b.s.Need||11==b.s.Need||12==b.s.Need||13==b.s.Need)&&e!=CodeUtil._LOWORD(b.s.NeedLevel)||10==c&&1!=d||11==c&&2!=d)return!1;if(g_UserItemList[a]){if(1==e){var d=b.s.MaxMC,g=g_UserItemList[a].s.MaxMC;if(d>g)return!0;if(d<g)return!1}if(2==e){e=b.s.MaxSC;d=g_UserItemList[a].s.MaxSC;if(e>d)return!0;if(e<d)return!1}e=b.s.MaxDC;d=g_UserItemList[a].s.MaxDC;if(e>d)return!0;if(e<d)return!1;e=GameApi.GetItemScore(b);if((d=GameApi.GetItemScore(g_UserItemList[a]))||0==d){if(e>d)return!0;if(e<d)return!1}else return!0;if(0==c){if(b.s.NeedLevel>g_UserItemList[a].s.NeedLevel)return!0;if(b.s.NeedLevel<g_UserItemList[a].s.NeedLevel)return!1}if(10==c){if(CodeUtil._HIWORD(b.s.NeedLevel)>CodeUtil._HIWORD(g_UserItemList[a].s.NeedLevel))return!0;if(CodeUtil._HIWORD(b.s.NeedLevel)<CodeUtil._HIWORD(g_UserItemList[a].s.NeedLevel))return!1}return b.s.Weight>g_UserItemList[a].s.Weight?!0:!1}return!0}e=GameApi.GetItemScore(b);g_UserItemList[a]&&(d=GameApi.GetItemScore(g_UserItemList[a]));return e==d?!1:d||0==d?e>d?!0:!1:!0};b.check_showItem=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){for(var d=[];-1!=c.indexOf("\x3c")&&-1!=c.indexOf("\\")&&-1!=c.indexOf("\x3e");){if(0!=c.indexOf("\x3c")){var e=c.indexOf("\x3c");d.push(c.substring(0,e));c=c.substring(e)}var e=c.indexOf("\x3c"),g=c.indexOf("\x3e");-1!=e&&-1!=g?(d.push(c.substring(0,g+1)),c=c.substring(g+1)):d.push(c)}""!=c&&d.push(c);if(1<d.length){c=[];for(e=0;e<a.length;e++)if(e==b)for(g=0;g<d.length;g++)c.push(d[g]);else c.push(a[e]);a=c}}}return a};b.makeLable=function(a,c,d,e,g,q){q=[];for(var p,r=0;r<a.length;r++){var v=a[r];if(v)if(p=v.indexOf("\x3c/:"),-1!=p){var w=new Laya.Image;w.bg=d;w.type=g;w.size(22,22);w.y-=5;v=v.substring(p+3,v.length-1);v=v.toLowerCase();w.skin="gameres/ui/chat_face/"+v+".png";w.name="face";q.push(w)}else if(-1!=v.indexOf("IMG:HTTP")){var r=a.indexOf("IMG:HTTP"),z=a.substr(0,r),C=a.substr(r+4),v=new Laya.Sprite;v.bg=d;v.type=g;v.name="sprite";v.loadImage(C,this.getTxtWidthByContent("18px Arial",u.text)+10,0,80,80);q.push(v);v.on(Laya.Event.CLICK,this,function(){var a=new Laya.Sprite;a.loadImage(C);a.name="openimage";a.pos(browser_width/2-a.width/2,browser_height/2-a.height/2);a.zOrder=9999999;a.on(Laya.Event.CLICK,this,function(){a.removeSelf()});Laya.stage.addChild(a)})}else{var u=new Laya.Sprite;u.name="label";u.fontSize=18;u.type=g;u.bg=d;if(-1!=v.indexOf("|name")){u.text=v.substr(0,v.indexOf("|name"));z=u.text;0==z.indexOf("(!)")?z=z.substr(3):0==z.indexOf("\u7ec4\u961f\uff1a")?z=z.substr(3):-1!=z.indexOf("[Lv")&&(z=z.substr(0,u.text.indexOf("[")));if(e)u.on(Laya.Event.CLICK,this,function(){Laya.stage.event("get_chat_name",[z])});u.graphics.fillText(u.text,0,0,"18px Arial",Get2RGB(parseInt(c)));u.width=this.getTxtWidthByContent("18px Arial",u.text);u.height=18}else if(-1!=v.indexOf("\x3c[")&&-1!=v.indexOf("]\x3e")&&-1!=v.indexOf("\\")){u.name="item";w=v.split("\\");v=w[0].substr(2);w=w[1].substring(0,w[1].length-2);u.text=v;u.color=Get2RGB(parseInt(c));this.resetGraphicsTxtAttr(u);u.width=this.getTxtWidthByContent("18px Arial",u.text);u.height=18;for(v=0;v<g_showChatItem.length;v++)if(w==g_showChatItem[v].MakeIndex){var B=g_showChatItem[v];break}if(B&&(u.item=B,u.color="#fd1313",this.resetGraphicsTxtAttr(u),u.underline=!0,e))u.on(Laya.Event.CLICK,this,function(){b.NewShowItemsInf(B)})}else if(-1!=v.indexOf("{pos|")){u.name="pos";var A=v.split("|");if(A[3])var D=A[3].substr(0,A[3].length-1);D&&A[1]&&(u.text=D+A[1],this.resetGraphicsTxtAttr(u),u.width=this.getTxtWidthByContent("18px Arial",u.text),u.height=18);0==A[1].indexOf("(")&&-1!=A[1].indexOf(",")&&A[1].indexOf(")")==A[1].length-1&&(A[1].substring(1,A[1].indexOf(",")),A[1].substring(A[1].indexOf(",")+1,A[1].indexOf(")")));u.color="#fd1313";this.resetGraphicsTxtAttr(u);u.underline=!0;if(e)u.on(Laya.Event.CLICK,this,function(){if(!autohookstate&&0==A[1].indexOf("(")&&-1!=A[1].indexOf(",")&&A[1].indexOf(")")==A[1].length-1){var a=A[1].substring(1,A[1].indexOf(",")),b=A[1].substring(A[1].indexOf(",")+1,A[1].indexOf(")"));Mapdata.cur_id==A[2]?(a=new Laya.Point(parseInt(a),parseInt(b)),Movemodule.autoMove(a)):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8be5\u73a9\u5bb6\u4e0e\u4f60\u4e0d\u5728\u540c\u4e00\u5f20\u5730\u56fe!",callfn:function(){}}])}})}else-1!=v.indexOf("{")&&-1!=v.indexOf("}")&&-1!=v.indexOf("|")?(w=v.substring(v.indexOf("{")+1,v.indexOf("|")),v=v.substring(v.indexOf("|")+1,v.indexOf("}")),-1!=v.indexOf(":")&&(v=v.split(":")),u.name="label",u.text=w,u.color=Get2RGB(parseInt(v[0]))):(u.name="label",u.text=v.replace(/\\/g,"/"),u.color=Get2RGB(parseInt(c))),u.width=this.getTxtWidthByContent("18px Arial",u.text),u.height=18,this.resetGraphicsTxtAttr(u);q.push(u)}}return q};b.resetGraphicsTxtAttr=function(a){a.graphics.clear();a.graphics.fillText(a.text,0,0,"18px Arial",a.color)};b.makeBigNum=function(a){1E5<=parseInt(a)&&1E8>parseInt(a)?a=parseInt(a/1E4)+"\u4e07":1E8<=parseInt(a)&&(a=parseInt(a/1E8)+"\u4ebf");return a};b.extractRemarkInfoNPC=function(a){var b="",c="",d=0;if("string"!=typeof a||-1==a.indexOf("|"))return"";for(c=a.split("|")[1];":"!=c[d]&&!(d>=c.length);)b+=c[d],d++;return b};b.clearRemarkInfoNPC=function(a){var b="";return"string"!=typeof a?"":-1==a.indexOf("|")?a:b=a.split("|")[0]};b.dismantlingItemDescText=function(a){for(var b=a.length,c=0,d="",e=[];null!=a[c]&&c<b;)d+=a[c],"\n"==a[c]&&(e.push(d),d=""),c++;g_ItemDesc=e};b.bubbleSort=function(a,b){b=void 0===b?1:b;for(var c=[],d=0,c=c.concat(a),e=0;e<c.length;e++)for(var g=0;g<c.length;g++)switch(b){case 1:c[g]>c[g+1]&&(d=c[g+1],c[g+1]=c[g],c[g]=d);break;case 2:c[g]<c[g+1]&&(d=c[g+1],c[g+1]=c[g],c[g]=d)}return c};b.valueLimit=function(a,b,c){c=void 0===c?0:c;return null!=b&&void 0!=b&&a>b?b:null!=c&&void 0!=c&&a<c?c:a};b.getTxtWidthByContent=function(a,b){this.canvas2D||(this.canvas2D=Laya.Browser.canvas.getContext("2d")||Laya.Browser.createElement("canvas").getContext("2d"));this.canvas2D.font=a+" Arial";return this.canvas2D.measureText(b).width};b.getTxtHeightByContent=function(a,b){this.canvas2D||(this.canvas2D=Laya.Browser.canvas.getContext("2d")||Laya.Browser.createElement("canvas").getContext("2d"));this.canvas2D.font=a+" Arial";return this.canvas2D.measureText(b).height};b.GetWearItemWeight=function(a){for(var b=0,c=0;c<g_UserItemList.length;c++)if(c!=a&&1!=c&&2!=c){var d=g_UserItemList[c];d&&(b+=d.s.Weight)}return b};b.CheckEquipItem=function(a,b){var c=ObjectManage.findobject(playerID);if(0>b&&!c&&!a||null==c.m_Abil||(10==a.s.StdMode||3==g_ClientConfig.btShowItemType&&66==a.s.StdMode)&&0!=c.skin_feature.btGender||(11==a.s.StdMode||3==g_ClientConfig.btShowItemType&&67==a.s.StdMode)&&1!=c.skin_feature.btGender||16==a.s.StdMode&&2==a.s.AniCount)return!1;if(b==U_WEAPON||b==U_RIGHTHAND){if(a.s.Weight>c.m_Abil.MaxHandWeight)return!1}else if(a.s.Weight+this.GetWearItemWeight(b)>c.m_Abil.MaxWearWeight)return!1;var d=0;switch(a.s.Need){case 0:case 18:case 22:d=0===g_rolelevel?c.m_Abil.Level:g_rolelevel;if(d>=a.s.NeedLevel)return!0;break;case 10:case 11:case 12:case 13:var d=c.skin_feature.btJob,e=CodeUtil._LOWORD(a.s.NeedLevel);if(d==e)switch(a.s.Need){case 10:d=0===g_rolelevel?c.m_Abil.Level:g_rolelevel;if(d>=CodeUtil._HIWORD(a.s.NeedLevel))return!0;break;case 11:if(c.m_Abil.MaxDc>=CodeUtil._HIWORD(a.s.NeedLevel))return!0;break;case 12:if(c.m_Abil.MaxMC>=CodeUtil._HIWORD(a.s.NeedLevel))return!0;break;case 13:if(c.m_Abil.MaxSC>=CodeUtil._HIWORD(a.s.NeedLevel))return!0}break;case 1:case 19:case 23:if(c.m_Abil.MaxDC>=a.s.NeedLevel)return!0;break;case 2:case 20:case 24:if(c.m_Abil.MaxMC>=a.s.NeedLevel)return!0;break;case 3:case 21:case 25:if(c.m_Abil.MaxSC>=a.s.NeedLevel)return!0;break;case 4:if(g_relevel>=a.s.NeedLevel)return!0;break;case 40:case 41:case 42:case 43:case 44:if(g_relevel>=CodeUtil._LOWORD(a.s.NeedLevel))switch(a.s.Need){case 40:d=0===g_rolelevel?c.m_Abil.Level:g_rolelevel;if(d>=CodeUtil._HIWORD(a.s.NeedLevel))return!0;break;case 41:if(c.m_Abil.MaxDC>=CodeUtil._HIWORD(a.s.NeedLevel))return!0;break;case 42:if(c.m_Abil.MaxMC>=CodeUtil._HIWORD(a.s.NeedLevel))return!0;break;case 43:if(c.m_Abil.MaxSC>=CodeUtil._HIWORD(a.s.NeedLevel))return!0;break;case 44:if(g_gamePopNum.value>=CodeUtil._HIWORD(a.s.NeedLevel))return!0}break;case 5:if(g_gamePopNum.value>=a.s.NeedLevel)return!0;break;case 6:if(""!=G_Guild_Name&&-1===G_Guild_Name.indexOf("[\u638c\u95e8\u4eba]"))return!0;break;case 60:if(""!=G_Guild_Name&&-1!=G_Guild_Name.indexOf("[\u638c\u95e8\u4eba]"))return!0;break;case 7:if(U_WEAPON==c.skin_feature.btCaseltGuild)return!0;break;case 70:if(U_RIGHTHAND==c.skin_feature.btCaseltGuild)return!0;break;case 101:case 102:case 103:case 104:return!0}return!1};b.getEquipPosRL=function(a,b){if(b==U_RINGL||b==U_FASHIONRINGL){var c=g_UserItemList[b+1],d=g_UserItemList[b],c=c?GameApi.GetItemScore(c):0,d=d?GameApi.GetItemScore(d):0;if(a<=c&&a<=d||a>c&&a<=d||a>c&&a>d&&c<d)return b+1;if(a<c&&a>d||a>c&&a>d&&c>d)return b}if(b==U_ARMRINGR||b==U_FASHIONARMRINGR)if(c=g_UserItemList[b-1],d=g_UserItemList[b],c=c?GameApi.GetItemScore(c):0,d=d?GameApi.GetItemScore(d):0,a<=c&&a<=d||a>c&&a<=d||a>c&&a>d&&c<d)return b-1;return b};b.CheckAutoItemList=function(a){var b=!0;if(a)for(var c=0;c<g_autoEquipItemList.length;c++)if(g_autoEquipItemList[c][0].MakeIndex==a.MakeIndex){b=!1;break}return b};b.AddAutoItemList=function(a,c){if(a&&this.CheckAutoItemList(a)&&(g_autoEquipItemList.push([a,c]),1===g_autoEquipItemList.length)){var d=g_autoEquipItemList[0][0],e=g_autoEquipItemList[0][1];g_WaitItems.Items=d;g_WaitItems.Index=e;b.DelBagItems(d.MakeIndex);Sendmessage.sendTakeOnItem(e,d.MakeIndex,d.s.Name)}};b.SendAutoItemList=function(a){for(var c=0,d=0;d<g_autoEquipItemList.length;d++){var e=g_autoEquipItemList[d][0];if(e&&e.MakeIndex==a){c=d;break}}g_autoEquipItemList.splice(c,1);0<g_autoEquipItemList.length&&(a=g_autoEquipItemList[0][0],c=g_autoEquipItemList[0][1],d=GameApi.GetItemScore(a),0<d?(c=b.getEquipPosRL(d,c),g_autoEquipItemList[0][1]=c,e=g_UserItemList[c],!e||e&&GameApi.GetItemScore(e)<d?(g_WaitItems.Items=a,g_WaitItems.Index=c,b.DelBagItems(a.MakeIndex),Sendmessage.sendTakeOnItem(c,a.MakeIndex,a.s.Name)):b.SendAutoItemList(a.MakeIndex)):b.SendAutoItemList(a.MakeIndex))};b.PlayerAutoHandleItem=function(a,c){if(a)switch(c){case 0:var d=GameApi.GetItemScore(a);if(0<d){var e=b.GetItemType(a.s);if(!(0>e)&&this.CheckEquipItem(a,e)&&(e=b.getEquipPosRL(d,e),this.scoreComparison(a))){var g={PlayerEquipItem:function(a,c,d,f,e){f&&(d=b.getEquipPosRL(a,d),b.scoreComparison(c)&&b.AddAutoItemList(c,d),Laya.timer.clear(e,e.PlayerEquipItem),Laya.timer.clear(e,e.countDown),f.removeSelf())},closeAutoItem:function(a,b){a&&(Laya.timer.clear(b,b.PlayerEquipItem),Laya.timer.clear(b,b.countDown),a.removeSelf())},countDown:function(a,b){a&&(a.countTime=0<a.countTime?a.countTime-1:0,a.btn_use.label="\u4f7f\u7528("+a.countTime+")")}};if(GlobalCfglist.autoWear){var q=new AutoItemUI;q.right=200;q.bottom=200;q.zOrder=9998;Laya.stage.addChild(q);q.countTime=5;q.lab_itemName.text=a.s.Name;b.loadImg(a.s.Looks,"items",function(a){q.img_item.skin=a});var p=q.img_itembg.getChildByName("effect");p&&Animationmodule.removeAni(p);this.ShowItemeffect(q.img_itembg,a);q.img_itembg.on(Laya.Event.CLICK,this,this.NewShowItemsInf,[a]);q.btn_use.on(Laya.Event.CLICK,g,g.PlayerEquipItem,[d,a,e,q,g]);q.btn_close.on(Laya.Event.CLICK,g,g.closeAutoItem,[q,g]);Laya.timer.once(5E3,g,g.PlayerEquipItem,[d,a,e,q,g]);Laya.timer.loop(1E3,g,g.countDown,[q,g])}}}}};b.HeroAutoHandleItem=function(a,b){if(a)switch(b){case 0:GameApi.GetItemScore(a)}};b.setCanAddTxtStroke=function(a){a.stroke=2;a.strokeColor="#030303"};b.setTxtFixedPos=function(a,b,c){if(0<a._childs.length){var d=a._childs[0];d.pos(-a.x+b-d.width-3,-a.y+(c?c:b)-d.height-3)}};b.checkEx=function(a){return a?0==a.indexOf("graphics/")?a:"data/"+a:"data/"};b.getSpaceTime=function(a){var b;g_initTimes?(b=Laya.Browser.now()-g_initTimes,g_initTimes=Laya.Browser.now(),a?console.log(a+"\u95f4\u9694\u65f6\u95f4\u4e3a"+b+"\u6beb\u79d2\uff01\uff01"):console.log("\u95f4\u9694\u65f6\u95f4\u4e3a"+b+"\u6beb\u79d2\uff01\uff01")):(console.log("\u5f00\u59cb\u8ba1\u7b97\u95f4\u9694\u503c"),console.log("\u521d\u59cb\u5316\u65f6\u95f4\u95f4\u9694\u503c"),g_initTimes=Laya.Browser.now());return b};b.clearMapItemCacheAssets=function(){for(var a in g_item_clearlist)a&&(this.clearResByUrl(a),delete g_item_clearlist[a])};b.addChildToGameSceneMapLayer=function(a,b,c){if(b=b?b:this.InstanceOfMem(GameSceneUI).maplayer)b.addChild(a),c&&(a.zOrder=c)};b.getAngleByRadian=function(a){return 0<a?180*a/Math.PI:180*(2*Math.PI+a)/Math.PI};b.getMoveDirNumberByAngle=function(a){return 247.5<a&&292.5>=a?0:292.5<a&&337.5>=a?1:22.5<a&&67.5>=a?3:67.5<a&&112.5>=a?4:112.5<a&&157.5>=a?5:157.5<a&&202.5>=a?6:202.5<a&&247.5>=a?7:2};b.updateNeiGuanHair=function(a,c,d){a.removeChildren();a.removeChildren();c=this.getNeiGuanHairResNum(c,d);b.loadImg(c,"prguse",function(b,c){var d=new Laya.Image;d.skin=b;d.pos(-82+c.x,8+c.y);a.addChild(d)});a.y=1==g_GameType?35:39};b.getNeiGuanHairResNum=function(a,b){switch(a){case 0:return 0===b?440:441;case 1:return 0===b?442:443;case 2:return 0===b?444:445;case 3:return 0===b?446:447}};b.createZipByTempData=function(a,b,c){c||(c="application/octet-stream");var d=document.createElement("a");b=new Blob([b],{type:c});d.href=window.URL.createObjectURL(b);d.download=a;d.click()};b.getName=function(a,b,c){if(3!=a)return c[0];-1!=b.indexOf("\n")&&(a=b.split("\n"),b=a[a.length-1]);if(b)return b};b.getImageSetNameByPath=function(a){var b="";if(g_getAtlas[a])return g_getAtlas[a];var c=a.split("/"),d=c.length;if(2>d)return b;for(var e=g_atlasRule,g=0;g<d-1;){if("undefined"==typeof e[c[g]])return b;e=e[c[g]];g++}c=c[d-1];d=parseInt(c);for(rangeSlice in e){var p=rangeSlice.indexOf("-"),g=parseInt(rangeSlice.substr(0,p)),p=parseInt(rangeSlice.substr(p+1,rangeSlice.length));if(d>=g&&d<=p){b=e[rangeSlice];imageSetIndexStr=("000000"+(Math.floor((d-g)/b)*b+g).toString()).slice(-6);b=a.replace(c,imageSetIndexStr)+".atlas";break}}return g_getAtlas[a]=b};b.loadImg=function(a,c,d){var e="",g=a;1E4<=a&&(e=Math.floor(a/1E4),g=a%1E4);g=("000000"+g).slice(-6);a=b.getImageSetNameByPath("data/"+c+e+"/"+g);c=a.replace(".atlas","/"+g+".png");g={atlas:a,img:g};""!=a&&""!=c&&Laya.loader.load(a,Laya.Handler.create(this,d,[c,g]),null,Laya.Loader.ATLAS)};b.loadImgEx=function(a,c){for(var d=[],e=[],g=0;g<a.length;g++){var q=a[g].split("/"),p=b.getImageSetNameByPath(a[g]);d.push(p);q[2]&&(q=p.replace(".atlas","/"+q[2]+".png"),e.push(q))}Laya.loader.load(d,Laya.Handler.create(this,c,[e]),null,Laya.Loader.ATLAS)};b.getFile=function(a){1E4<=a&&(file=Math.floor(a/1E4));return""};b.convertSecondToMinutes=function(a,b){b=void 0===b?0:b;var c=a/60;return 0==b?Math.round(c):parseFloat(c.toFixed(b))};b.MaxBagItems=function(){return g_ClientConfig.boExtendDB?MAXBAGITEM+g_extendBagItemCount:MAXBAGITEM};b.LimitMaxBagItems=function(){return g_ClientConfig.boExtendDB?MAXBAGITEM+g_ClientConfig.maxExtendItemCount:MAXBAGITEM};b.UpdateExtendBagItemCount=function(){var a=b.InstanceOfMem(NewBagUI);a&&a.Bag_Refresh()};b.intervalFrameDeal=function(a,b,c,d){for(var e=[],g=3;g<arguments.length;++g)e[g-3]=arguments[g];if(1==g_intervalDeal)Laya.timer.once(a,b,c);else c.apply(b,e)};b.FindSoundByID=function(){};b.cutChatInfoStr=function(a,b){};b.getMyObject=function(){return ObjectManage.findobject(playerID)};b.getCatcherInList=function(a){if(!(1>catcherList.length))for(var b=0;b<catcherList.length;b++)if(catcherList[b].data.record===a)return catcherList[b]};b.getGolbalPointX=function(a){var b=new Laya.Point;b.setTo(a.x,a.y);return a.localToGlobal(b).x};b.isYuDanShuang=function(a){if(a)return-1<a.txt_name.text.indexOf("\u96e8\u53cc\u5355")};b.getSpaceTime1=function(a){var b;g_newInitTimes?(b=Laya.Browser.now()-g_newInitTimes,g_newInitTimes=Laya.Browser.now(),a?console.log(a+"\u95f4\u9694\u65f6\u95f4\u4e3a"+b+"\u6beb\u79d2\uff01\uff01"):console.log("\u95f4\u9694\u65f6\u95f4\u4e3a"+b+"\u6beb\u79d2\uff01\uff01")):(console.log("\u5f00\u59cb\u8ba1\u7b97\u95f4\u9694\u503c"),console.log("\u521d\u59cb\u5316\u65f6\u95f4\u95f4\u9694\u503c"),g_newInitTimes=Laya.Browser.now());return b};b.onShowTip=function(a,b,c,d){Laya.stage.event("show_alert_dlg",[{type:void 0===b?1:b,txt:a,callfn:c,callcancelfun:d}])};b.replacePlaceholder=function(a,b){return a.replace("|",b)};b.openWin=function(a,b,c,d){a||(a=new c,b.addChild(a),a.x=(b.width-a.width)/2,a.y=(b.height-a.height)/2,a.visible=!1);a.visible=d?!a.visible:!0;return a};b.trimSpecialUnicode=function(a){for(var b=0,c="",d=0;d<a.length;d++)b=a[d].charCodeAt(0).toString(10),c=59299==b?c+" ":c+a[d];return c};b.getPureName=function(a){return a&&a.txt_name?a.txt_name.lines[a.txt_name.lines.length-1]:""};b.showOperationBtnsSort=function(a,b){for(var c,d=[],e=b.length,g=0;g<e;g++)c=b[g],a.length<e&&a.push({x:c.x,y:c.y}),c.visible&&d.push(c);for(c=0;c<d.length;c++)d[c].x=a[c].x,d[c].y=a[c].y;return d.length};b.getCurrencyByGoldType=function(a){switch(a){case 1:return g_GameCionNum?g_GameCionNum.key:"\u91d1\u5e01";case 2:return g_bindCionNum?g_bindCionNum.key:"\u7ed1\u5b9a\u91d1\u5e01";case 3:return g_GameGoldNum?g_GameGoldNum.key:"\u5143\u5b9d";case 4:return g_bindGoldNum?g_bindGoldNum.key:"\u7ed1\u5b9a\u5143\u5b9d";case 5:return g_GamePointNum?g_GamePointNum.key:"\u6e38\u620f\u70b9";case 6:return g_nGameDiamond?g_nGameDiamond.key:"\u91d1\u521a\u77f3";case 7:return g_nGameGird?g_nGameGird.key:"\u7075\u7b26";case 8:return g_gameGlory?g_gameGlory.key:"\u8363\u8a89\u70b9";case 9:return g_gamePopNum?g_gamePopNum.key:"\u58f0\u671b\u70b9"}};b.setCurrencyKey=function(a){!a||1>a.length||(g_GameCionNum.key=a[0],g_bindCionNum.key=a[1],g_GameGoldNum.key=a[2],g_bindGoldNum.key=a[3],g_GamePointNum.key=a[4],g_nGameDiamond.key=a[5],g_nGameGird.key=a[6],g_gameGlory.key=a[7],g_gamePopNum.key=a[8])};b.isRectOverlap=function(a,b){return!(a.right<b.left||a.bottom>b.top||b.right<a.left||b.bottom>b.top)};b.checkPosPointIsTrue=function(a,b){return 2>a.distance(b.x,b.y)};return b}();function CreateRole(b,c,a,d){b=new object;b.create(1,c,1,4,"stand");null!=a&&b&&(c=new object,c.create(2,a,1,4,"stand"),c.zOrder=2,b.addChild(c),b.bind(c));null!=d&&b&&(a=new object,a.create(3,d,1,4,"stand"),a.zOrder=2,b.addChild(a),b.bind(a));return b}function ChangeProp(b,c,a,d,e){null!=a&&b.InitPlayerframedata(a);for(c=0;c<b.bind_list.length;++c)a=b.bind_list[c],0==c&&d?a.InitPlayerframedata(d):1==c&&e&&a.InitPlayerframedata(e);b.playAni(null,"stand",!0)}function transformstruct(b,c){Laya.loader.load(b,Laya.Handler.create(this,onanalyzetxt,[b,c]),null,Laya.Loader.TEXT)}function hasArraydata(b){for(var c="",a="",d=!1,e=0;e<b.length&&"]"!=b[e];++e){if("["==b[e]){d=!0;continue}d?a+=b[e]:c+=b[e]}return d?(b=[],b.name=c,b.num=parseInt(a),b):null}function printoffer(b,c,a,d,e){var g=hasArraydata(a);b=Math.min(b,4);0!=c%b&&(c+=b-1);a=a.substring(0,a.length-1);g&&(a=g.name,e=8);switch(e){case 1:console.log("      ","obj.",a," \x3d (buff[",c,"] + (buff[",c+1,"] \x3c\x3c 8)  + (buff[",c+2,"] \x3c\x3c 16)  + (buff[",c+3,"] \x3c\x3c 24)) \x3e\x3e\x3e\u30000;","      ",d);break;case 2:console.log("      ","obj.",a," \x3d (buff[",c,"] + (buff[",c+1,"] \x3c\x3c 8)  + (buff[",c+2,"] \x3c\x3c 16)  + (buff[",c+3,"] \x3c\x3c 24));","      ",d);break;case 3:console.log("      ","obj.",a," \x3d (buff[",c,"] + (buff[",c+1,"] \x3c\x3c 8)) \x3e\x3e\x3e 0;","      ",d);break;case 4:console.log("      ","obj.",a," \x3d (buff[",c,"] + (buff[",c+1,"] \x3c\x3c 8));","      ",d);break;case 5:console.log("      ","obj.",a," \x3d parseInt(buff[",c,"]);","      ",d);break;case 6:console.log("      ","obj.",a," \x3d parseInt(buff[",c,"]) \x3e\x3e\x3e 0;","      ",d);break;case 7:console.log("      ","obj.",a," \x3d parseInt(buff[",c,"]);","      ",d);break;case 8:console.log("      ","obj.",a," \x3d byteArray2String( buff.slice(",c,",",c+g.num-1,") ,",g.num,");","      ",d)}return c=g?c+g.num:c+b}function discernType(b,c,a,d){return"int"==b?printoffer(4,d,c,a,2):"bool"==b?printoffer(1,d,c,a,5):"char"==b?printoffer(1,d,c,a,7):"short"==b?printoffer(2,d,c,a,4):"unsigned char"==b?printoffer(1,d,c,a,6):"unsigned short"==b?printoffer(2,d,c,a,3):"unsigned int"==b?printoffer(4,d,c,a,1):0}function onanalyzetxt(b,c){var a=Laya.loader.getRes(b);if(a){var d=[],d=a.split("\n");console.log("\n");console.log("\n");console.log("function ",c,"(buff)");console.log("{");console.log("   var obj \x3d new Object;");for(var e=0,g=2;g<d.length-1;++g){for(var a=d[g].split("\t"),f=[],h=0;h<a.length;++h)""!=a[h]&&"\r"!=a[h]&&f.push(a[h]);for(a=0;a<f.length;a+=3)e=discernType(f[a],f[a+1],f[a+2],e)}console.log("   return obj; ");console.log("};");console.log("\n");console.log("\n")}}var saveAs=saveAs||function(b){if(!("undefined"===typeof b||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var c=b.document.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in c,d=/constructor/i.test(b.HTMLElement)||b.safari,e=/CriOS\/[\d]+/.test(navigator.userAgent),g=function(a){(b.setImmediate||b.setTimeout)(function(){throw a;},0)},f=function(a){setTimeout(function(){"string"===typeof a?(b.URL||b.webkitURL||b).revokeObjectURL(a):a.remove()},4E4)},h=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},l=function(l,m,p){p||(l=h(l));var r=this,v="application/octet-stream"===l.type,w,z=function(){for(var a=["writestart","progress","write","writeend"],a=[].concat(a),b=a.length;b--;){var c=r["on"+a[b]];if("function"===typeof c)try{c.call(r,r)}catch(d){g(d)}}};p=function(){if((e||v&&d)&&b.FileReader){var a=new FileReader;a.onloadend=function(){var c=e?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;");b.open(c,"_blank")||(b.location.href=c);r.readyState=r.DONE;z()};a.readAsDataURL(l);r.readyState=r.INIT}else w||(w=(b.URL||b.webkitURL||b).createObjectURL(l)),v?b.location.href=w:b.open(w,"_blank")||(b.location.href=w),r.readyState=r.DONE,z(),f(w)};r.readyState=r.INIT;a?(w=(b.URL||b.webkitURL||b).createObjectURL(l),setTimeout(function(){c.href=w;c.download=m;var a=new MouseEvent("click");c.dispatchEvent(a);z();f(w);r.readyState=r.DONE})):p()},m=l.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(a,b,c){b=b||a.name||"download";c||(a=h(a));return navigator.msSaveOrOpenBlob(a,b)};m.abort=function(){};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;return function(a,b,c){return new l(a,b||a.name||"download",c)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);"undefined"!==typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!==typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});var ToolsUtil=function(){function b(){}b.isJson=function(b){if("string"==typeof b)try{if("#"==b[0])return!1;if(-1<b.indexOf("{"))return JSON.parse(b),!0}catch(a){console.log(a)}return!1};return b}();function changeOrientation(b){var c=document.documentElement.clientWidth,a=document.documentElement.clientHeight;c<a&&(console.log(c+" "+a),b.width(a),b.height(c),b.css("top",(a-c)/2),b.css("left",0-(a-c)/2),b.css("transform","rotate(90deg)"),b.css("transform-origin","50% 50%"));var d="onorientationchange"in window?"orientationchange":"resize";window.addEventListener(d,function(){console.log(d);setTimeout(function(){var a=document.documentElement.clientWidth,c=document.documentElement.clientHeight;a>c?(b.width(a),b.height(c),b.css("top",0),b.css("left",0),b.css("transform","none")):(b.width(c),b.height(a),b.css("top",(c-a)/2),b.css("left",0-(c-a)/2),b.css("transform","rotate(90deg)"));b.css("transform-origin","50% 50%")},300)},!1)}(function(){function b(){b.__super.call(this);this.noticeIcon=this.ui=null;this.lastShowMailIdx=this.onSelectIndex=-1;this.newMailCount=0;this.Init()}Laya["class"](b,"mail",laya.display.Sprite);var c=b.prototype;c.Init=function(){Laya.stage.on("get_user_mail",this,this.getUserMail);Laya.stage.on("get_mail_content",this,this.updateMailContent);Laya.stage.on("update_mail_state",this,this.updateMailState);Laya.stage.on("delete_all_mail",this,this.deleteAllMail);Laya.stage.on("add_new_mail",this,this.addNewMail);Laya.stage.on("new_mail_notice",this,this.newMailNotice);g_mailLogo.on(Laya.Event.CLICK,this,this.openMail)};c.newMailNotice=function(){g_mailLogo.visible=!0};c.updateMailList=function(a,b){if(-1!=this.onSelectIndex&&this.onSelectIndex==b){a.getChildByName("img_skin").skin="gameres/png/select_bg3.png";var c=this.getContentMail(a.dataSource.nMailIdx);c?(a.dataSource.state=c.btState,this.updateMailContent(c)):Sendmessage.sendGetMailContent(a.dataSource.nMailIdx)}else a.getChildByName("img_skin").skin="gameres/png/select_bg2.png";var c=a.getChildByName("lab_state"),g=a.getChildByName("lab_sendName"),f=a.getChildByName("lab_caption");a.getChildByName("lab_date");a.getChildByName("lab_limited");switch(a.dataSource.state){case 0:c.text="\u672a\u8bfb";c.color="#cd1411";g.color="#e2720c";f.color="#e2b984";a.gray=!1;break;case 1:c.text="\u5df2\u8bfb";c.color="#c8c1b9";g.color="#e2720c";f.color="#e2b984";a.gray=!1;break;case 2:c.text="\u5df2\u8bfb",c.color="#808080",g.color="#808080",f.color="#808080",a.gray=!0}};c.getContentMail=function(a){for(var b=0;b<g_mailList.length;b++)if(g_mailList[b].nMailIdx==a&&null!=g_mailList[b].content)return g_mailList[b];return null};c.selectMailList=function(a){this.onSelectIndex=a};c.createMailUI=function(){if(!this.ui){this.ui=new MailUI;this.ui.list_mailList.vScrollBarSkin="";this.ui.list_mailList.selectEnable=!0;this.ui.list_mailList.selectHandler=new Laya.Handler(this,this.selectMailList);this.ui.list_mailList.renderHandler=new Laya.Handler(this,this.updateMailList);this.ui.list_itemList.hScrollBarSkin="";this.ui.list_itemList.renderHandler=new Laya.Handler(this,this.updateMailItems);this.ui.list_itemList.array=[];this.ui.text_mome.on(Laya.Event.MOUSE_DOWN,this,this.startScrollText);this.ui.StartPos=new Laya.Point(0,0);this.ui.textStartPosY=0;this.ui.box_move.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.ui.btn_getItem.visible=!1;this.ui.btn_deleteMail.visible=!1;this.ui.btn_getAllItem.on(Laya.Event.CLICK,this,this.onGetAllItem);this.ui.btn_deleteMail.on(Laya.Event.CLICK,this,this.ondeleteMail);this.ui.btn_deleteAll.on(Laya.Event.CLICK,this,this.ondeleteAllMail);this.ui.btn_close.on(Laya.Event.CLICK,this,this.onClose);for(var a=[],b=0;b<g_mailList.length;b++){var c=g_mailList[b];a.push({nMailIdx:c.nMailIdx,lab_sendName:c.sSendName,lab_caption:c.sCaption,state:c.btState,lab_date:c.SendDate,lab_limited:this.getLimitedDate(c.SendDate,c.nLimited)})}this.ui.list_mailList.array=a;this.ui.lab_maxMailCount.text=g_mailMaxCount;this.ui.lab_currentMailCount.text=this.ui.list_mailList.length;Laya.stage.addChild(this.ui)}};c.getLimitedDate=function(a,b){if(0>=b)return"";var c=(new Date(a)).getTime(),g=(new Date).getTime(),c=864E5*b-(g-c);if(0>=c)return"\u5df2\u8fc7\u671f";c=parseInt(c/1E3);g=parseInt(c/86400);if(1<=g)return g+"\u5929\u540e\u8fc7\u671f";g=parseInt(c/3600);if(1<=g)return g+"\u5c0f\u65f6\u540e\u8fc7\u671f";g=parseInt(c/60);return 1<=g?g+"\u5206\u949f\u540e\u8fc7\u671f":c+"\u79d2\u540e\u8fc7\u671f"};c.getUserMail=function(a){this.isGetMail=!0;this.newMailCount=a;this.createMailUI()};c.openMail=function(){this.isGetMail?this.createMailUI():(g_mailList=[],Sendmessage.sendGetMail())};c.updateMailContent=function(a,b){if((!b||a.nMailIdx==this.lastShowMailIdx)&&a&&this.ui){this.ui.text_caption.text=" \u4e3b\u9898: "+a.sCaption;this.ui.text_sendName.text=" \u53d1\u9001\u8005: "+a.sSendName;this.ui.text_time.text=""+a.SendDate;this.ui.text_mome.text=a.content.sMemo.replace(/\\/g,"\n");this.ui.btn_getItem.on(Laya.Event.CLICK,this,this.onGetItem);this.ui.lab_limited.text="";0<a.nLimited&&(this.ui.lab_limited.text="\u9650\u65f6: "+a.nLimited+" \u5929");this.ui.list_itemList.array=[];for(var c=[],g=!0,f=0;f<a.content.items.length;f++)c.push(a.content.items[f]),0<a.content.items[f].nCurrentCount&&(g=!1);this.ui.list_itemList.array=c;this.ui.btn_getItem.visible=!0;this.ui.btn_getItem.gray=!1;this.ui.btn_getItem.label="\u63d0\u53d6";this.ui.btn_getItem.stateNum=2;this.ui.btn_getItem.skin="gameres/ui/btn_extract.png";this.ui.btn_deleteMail.visible=!0;this.lastShowMailIdx=a.nMailIdx;if(2<=a.btState||g)this.ui.btn_getItem.gray=!0,this.ui.btn_getItem.label="",this.ui.btn_getItem.stateNum=1,this.ui.btn_getItem.skin="gameres/ui/btn_extracted.png",this.ui.btn_getItem.off(Laya.Event.CLICK,this,this.onGetItem),a.btState=2;this.ui.lab_currentMailCount.text=this.ui.list_mailList.length}};c.clearContent=function(){this.ui&&(this.ui.text_caption.text="",this.ui.text_sendName.text="",this.ui.text_time.text="",this.ui.text_mome.text="",this.ui.lab_limited.text="",this.ui.btn_getItem.visible=!1,this.ui.btn_deleteMail.visible=!1,this.ui.list_itemList.array=[],this.ui.list_itemList.refresh())};c.deleteMailView=function(a){if(this.ui)for(var b=0;b<this.ui.list_mailList.array.length;b++)if(this.ui.list_mailList.array[b].nMailIdx==a){this.ui.list_mailList.array.splice(b,1);this.ui.list_mailList.refresh();this.ui.list_mailList.selectedIndex=-1;break}};c.updateMailItems=function(a){var b=a.getChildByName("img_itembg");GameUtil.loadImg(a.dataSource.item.s.Looks,"items",function(c){b.getChildByName("img_item").skin=c;GameUtil.ShowItemeffect(b,a.dataSource.item);g_OpenIdx=-1;b.on(Laya.Event.CLICK,this,GameUtil.NewShowItemsInf,[a.dataSource.item,null,b.x]);b.getChildByName("lab_currentCount").text=a.dataSource.nCurrentCount;b.getChildByName("lab_maxCount").text=a.dataSource.nCount;a.slotIndex=a.dataSource.btIndex})};c.updateMailState=function(a,b){if(this.ui)for(var c=this.ui.list_mailList.array,g=0;g<c.length;g++)if(c[g].nMailIdx==a.nMailIdx){c[g].state=a.btState;null==b?2<=a.btState&&0<this.newMailCount&&(this.newMailCount--,this.checkMailNotice()):1==b&&2<=a.btState&&0<this.newMailCount&&(this.newMailCount--,this.checkMailNotice());this.ui.list_mailList.refresh();break}};c.onGetItem=function(){if(-1!=this.lastShowMailIdx)var a=this.getContentMail(this.lastShowMailIdx);a&&2>a.btState&&Sendmessage.sendGetMailItem(this.lastShowMailIdx)};c.onGetAllItem=function(){if(0<g_mailList.length)for(var a=0;a<g_mailList.length;a++)if(2>g_mailList[a].btState){Sendmessage.sendGetAllMailItem();break}};c.ondeleteMail=function(){if(this.ui&&-1!=this.lastShowMailIdx){var a=this.getContentMail(this.lastShowMailIdx);if(a&&2<=a.btState){a=this.lastShowMailIdx;this.lastShowMailIdx=-1;Sendmessage.sendDeleteMail(a);for(var b=0;b<g_mailList.length;b++)if(g_mailList[b].nMailIdx==a){g_mailList.splice(b,1);break}this.clearContent();this.deleteMailView(a);this.ui.lab_currentMailCount.text=this.ui.list_mailList.length}}};c.ondeleteAllMail=function(){if(0<g_mailList.length)for(var a=0;a<g_mailList.length;a++)if(1<=g_mailList[a].btState){Sendmessage.sendDeleteAllMail();break}};c.deleteAllMail=function(a){for(var b=0;b<a.length;b++)for(var c=0;c<g_mailList.length;c++)if(a[b]==g_mailList[c].nMailIdx){g_mailList.splice(c,1);break}if(this.ui){for(b=0;b<a.length;b++)for(var g=this.ui.list_mailList.array,c=0;c<g.length;c++)if(a[b]==g[c].nMailIdx){g[c].nMailIdx==this.lastShowMailIdx&&(this.lastShowMailIdx=-1,this.clearContent(),this.ui.list_mailList.selectedIndex=-1);g.splice(c,1);break}this.ui.list_mailList.refresh();this.ui.lab_currentMailCount.text=this.ui.list_mailList.length}};c.onClose=function(){this.onSelectIndex=this.lastShowMailIdx=-1;this.ui.removeSelf();this.ui=null};c.addNewMail=function(a){this.newMailCount++;this.checkMailNotice();if(this.ui){var b=this.ui.list_mailList,c=-1;0<b.length&&-1!=b.selectedIndex&&-1!=this.lastShowMailIdx&&(c=b.selectedIndex+1);b.array.unshift({nMailIdx:a.nMailIdx,lab_sendName:a.sSendName,lab_caption:a.sCaption,state:a.btState,lab_date:a.SendDate,lab_limited:this.getLimitedDate(a.SendDate,a.nLimited)});-1!=c&&(b.selectedIndex=c);b.refresh();this.ui.lab_currentMailCount.text=b.length}};c.checkMailNotice=function(){0>=this.newMailCount&&g_mailLogo&&g_mailLogo.visible?g_mailLogo.visible=!1:0<this.newMailCount&&g_mailLogo&&!g_mailLogo.visible&&this.newMailNotice()};c.clearEvent=function(){g_mailLogo.off(Laya.Event.CLICK,this,this.openMail);Laya.stage.offAll("get_user_mail");Laya.stage.offAll("get_mail_content");Laya.stage.offAll("update_mail_state");Laya.stage.offAll("delete_all_mail");Laya.stage.offAll("add_new_mail");Laya.stage.offAll("new_mail_notice")};c.onMouseDown=function(a){this.ui.StartPos.x=a.stageX;this.ui.StartPos.y=a.stageY;this.ui.box_move.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.ui.box_move.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp);this.ui.box_move.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.onMouseUp=function(){this.ui.box_move.off(Laya.Event.MOUSE_MOVE,this,this.onMouseMove)};c.onMouseMove=function(a){this.ui.x+=a.stageX-this.ui.StartPos.x;this.ui.y+=a.stageY-this.ui.StartPos.y;this.ui.StartPos.x=a.stageX;this.ui.StartPos.y=a.stageY};c.startScrollText=function(a){this.ui.textStartPosY=this.ui.text_mome.mouseY;this.ui.text_mome.on(Laya.Event.MOUSE_MOVE,this,this.scrollText);this.ui.text_mome.on(Laya.Event.MOUSE_UP,this,this.finiseScrollText);this.ui.text_mome.on(Laya.Event.MOUSE_OUT,this,this.finiseScrollText)};c.scrollText=function(a){a=this.ui.text_mome.mouseY;this.ui.text_mome.scrollY+=this.ui.textStartPosY-a;this.ui.textStartPosY=a};c.finiseScrollText=function(a){this.ui.text_mome.off(Laya.Event.MOUSE_MOVE,this,this.scrollText);this.ui.text_mome.off(Laya.Event.MOUSE_UP,this,this.finiseScrollText)}})();var VersionMgr=function(){function b(){this.init();Laya.stage.on("checkUpdateVersion",this,this.checkUpdateVersion)}_proto=b.prototype;_proto.init=function(){this.versionNumbList=[{2021:"2023"},{2022:"2021"}];this.curVersionNumb="2022";this.serverVersionNumb};_proto.checkUpdateVersion=function(){this.versionNumbList&&0!=this.versionNumbList.length&&this.serverVersionNumb&&""!=this.serverVersionNumb&&!this.isVersionSame()&&(console.log("loadCodeAndUpdate"),this.loadCodeAndUpdate())};_proto.loadCodeAndUpdate=function(){if(window.appcache){console.log("has window.appcache");console.log("\u6e38\u620f\u5f00\u59cb\u66f4\u65b0\uff0c\u8bf7\u7b49\u5f85");var b=new XMLHttpRequest;b.open("GET","http://app1cs.zjzst.com/data/codeforapp.js",!0);b.responseType="arraybuffer";b.onload=function(a){if(4==b.readyState&&200==b.status){console.log("XMLHttpRequest onload success");a=b.response;console.log("arrayBuffer:::"+a);var d=window.appcache.hashstr("js/codeforapp.js");console.log("fid:::"+d);a&&window.appcache.updateFile(d,0,a,!0)&&(console.log("openTipWin"),Versionmgr.openTipWin())}};b.onerror=function(a){console.log("\u52a0\u8f7d\u7f51\u7edccodeforapp.js\u51fa\u9519")};b.send(null)}};_proto.showTip=function(b){Laya.stage.event("show_alert_dlg",[{type:1,txt:b,callfn:function(){}}])};_proto.openTipWin=function(){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6e38\u620f\u66f4\u65b0\u5b8c\u6bd5\uff0c\u8bf7\u91cd\u8fdb",callfn:function(){Laya.Browser.window.location.reload()}}])};_proto.isVersionSame=function(){return this.curVersionNumb===this.getNeedVersionNumbByServer()};_proto.getNeedVersionNumbByServer=function(){var b,a,d;for(d in this.versionNumbList)if(b=this.versionNumbList[d],a=Object.keys(b)[0],a==this.serverVersionNumb)return b[a]};_proto.setServerVersionNumb=function(b){this.serverVersionNumb=b};return b}(),crystal=function(b){function c(){c.__super.call(this);this.init()}Laya["class"](c,"crystal",crystalUI);b=c.prototype;b.init=function(){this.httpUrl="https://pgg-user-prod.paiguagua.com/mile-user-api/";this.isLogin=!1;this.latitude="30.472857";this.longitude="114.420166";this.userid=this.token=this.myCQB=this.price=this.exchangePer=this.exchangeType=this.exchangeNum=this.phone=0;Laya.stage.on("update_cqbInfo",this,this.updateCQB);Laya.stage.on("update_crystal",this,this.crystalInfo);this.btn_close.on(Laya.Event.CLICK,this,this.close);this.btn_smelt.on(Laya.Event.CLICK,this,this.buyCQB);this.btn_change.on(Laya.Event.CLICK,this,this.sellCQB);this.txt_login_register.on(Laya.Event.CLICK,this,this.showPopup,[this.bg_register]);this.txt_login_mail.on(Laya.Event.CLICK,this,this.showPopup,[this.bg_cell]);this.txt_login_psw.on(Laya.Event.CLICK,this,this.showPopup,[this.bg_login]);this.txt_cell_register.on(Laya.Event.CLICK,this,this.showPopup,[this.bg_register]);this.btn_register_back.on(Laya.Event.CLICK,this,this.showPopup,[this.bg_login]);this.btn_cregister_close.on(Laya.Event.CLICK,this,this.closePopup,[this.bg_register]);this.btn_cell_close.on(Laya.Event.CLICK,this,this.closePopup,[this.bg_cell]);this.btn_login_close.on(Laya.Event.CLICK,this,this.closePopup,[this.bg_login]);this.btn_register_code.on(Laya.Event.CLICK,this,this.getCheckCode,[this.ipt_register_account]);this.btn_cell_code.on(Laya.Event.CLICK,this,this.getCheckCode,[this.ipt_cell_account]);this.btn_register.on(Laya.Event.CLICK,this,this.sendRegister);this.btn_bind_ok.on(Laya.Event.CLICK,this,this.bindAccount);this.btn_bind_close.on(Laya.Event.CLICK,this,this.closeHint);this.btn_cell.on(Laya.Event.CLICK,this,this.sendCellLogin);this.btn_login.on(Laya.Event.CLICK,this,this.sendLogin);this.btn_buycqb_minus.on(Laya.Event.CLICK,this,this.minusCqbNum);this.btn_buycqb_plus.on(Laya.Event.CLICK,this,this.plusCqbNum);this.btn_buycqb_max.on(Laya.Event.CLICK,this,this.maxCqbNum);this.btn_sellcqb_minus.on(Laya.Event.CLICK,this,this.minusSellNum);this.btn_sellcqb_plus.on(Laya.Event.CLICK,this,this.plusSellNum);this.btn_sellcqb_max.on(Laya.Event.CLICK,this,this.maxSellNum);this.btn_buycqb_ok.on(Laya.Event.CLICK,this,this.sendBuyCQB);this.btn_sellcqb_ok.on(Laya.Event.CLICK,this,this.sendSellCQB);this.btn_buycqb_cancel.on(Laya.Event.CLICK,this,this.closeBuy);this.btn_sellcqb_cancel.on(Laya.Event.CLICK,this,this.closeSell);this.btn_spsw_close.on(Laya.Event.CLICK,this,this.closeSpsw);this.btn_spsw_cancel.on(Laya.Event.CLICK,this,this.closeSpsw);this.btn_spsw_ok.on(Laya.Event.CLICK,this,this.sendExchangeMsg);this.lab_buycqb_num.on(Laya.Event.INPUT,this,this.onBuyNumChange);this.lab_sellcqb_num.on(Laya.Event.INPUT,this,this.onSellNumChange);this.crystalInfo()};b.updateCQB=function(a,b){this.lab_owniron.text=g_nGameGird.value;this.lab_havesmelt.text=g_nGameGird.value;a&&b&&""!=a&&(a=JSON.parse(a),this.lab_cqb_all2.text=a.TotalNum,1==b&&(this.myCQB+=parseFloat(a.TradeNum)),2==b&&(this.myCQB-=parseFloat(a.TradeNum)),this.lab_havecqb.text=this.myCQB,console.log("updateCQB:",this.myCQB))};b.onBuyNumChange=function(){var a=parseInt(this.lab_havesmelt.text/this.exchangePer);0>this.lab_buycqb_num.text?this.lab_buycqb_num.text=0:this.lab_buycqb_num.text>a&&(this.lab_buycqb_num.text=a);this.lab_costsmelt.text=this.lab_buycqb_num.text*this.exchangePer;this.lab_havesmelt.text=parseInt(this.lab_havesmelt.text)-parseInt(this.lab_costsmelt.text)};b.onSellNumChange=function(){var a=parseInt(this.lab_change2.text);0>this.lab_sellcqb_num.text?this.lab_sellcqb_num.text=0:this.lab_sellcqb_num.text>this.myCQB&&(this.lab_sellcqb_num.text=this.myCQB);this.lab_havecqb.text-=this.lab_sellcqb_num.text;this.lab_changecoin.text=parseInt(this.lab_sellcqb_num.text*a)};b.crystalInfo=function(){this.lab_owniron.text=g_nGameGird.value;this.lab_havesmelt.text=g_nGameGird.value;if(""!=g_crystalInfo){var a=JSON.parse(g_crystalInfo);this.exchangePer=parseInt(a.ExchangePer);this.price=parseFloat(a.Price);this.lab_smelt1.text=this.exchangePer;this.lab_change2.text=parseInt(this.price*a.ExchangeGame*(1-a.Commision/100));this.lab_exchange.text="1:"+this.exchangePer;this.lab_price.text=this.price;this.lab_havecqb.text=this.myCQB;this.lab_cqb_all2.text=a.CristalCount;this.lab_cqb_all1.text=a.CristalAdd}};b.buyCQB=function(){this.bg_bind.visible=!this.isLogin;this.bg_buy.visible=this.isLogin;this.bg_cqb.mouseEnabled=!1};b.minusCqbNum=function(){0<this.lab_buycqb_num.text&&(this.lab_buycqb_num.text=parseInt(this.lab_buycqb_num.text)-1,0>this.lab_buycqb_num.text&&(this.lab_buycqb_num.text=0),this.lab_costsmelt.text=parseInt(this.lab_costsmelt.text)-this.exchangePer,this.lab_havesmelt.text=parseInt(this.lab_havesmelt.text)+this.exchangePer)};b.plusCqbNum=function(){this.lab_havesmelt.text>=this.exchangePer&&(this.lab_buycqb_num.text=parseInt(this.lab_buycqb_num.text)+1,this.lab_costsmelt.text=parseInt(this.lab_costsmelt.text)+this.exchangePer,this.lab_havesmelt.text=parseInt(this.lab_havesmelt.text)-this.exchangePer)};b.maxCqbNum=function(){this.lab_havesmelt.text=g_nGameGird.value;this.lab_buycqb_num.text=0;this.lab_costsmelt.text=0;var a=parseInt(this.lab_havesmelt.text/this.exchangePer);this.lab_buycqb_num.text=a;this.lab_costsmelt.text=this.exchangePer*a;this.lab_havesmelt.text=parseInt(this.lab_havesmelt.text)-parseInt(this.lab_costsmelt.text)};b.minusSellNum=function(){if(0<this.lab_sellcqb_num.text){var a=parseInt(this.lab_change2.text);this.lab_havecqb.text=parseInt(this.lab_havecqb.text)+1;this.lab_sellcqb_num.text=parseInt(this.lab_sellcqb_num.text)-1;this.lab_changecoin.text=parseInt(this.lab_changecoin.text)-a}};b.plusSellNum=function(){if(0<this.lab_havecqb.text){var a=parseInt(this.lab_change2.text);this.lab_havecqb.text=parseInt(this.lab_havecqb.text)-1;this.lab_sellcqb_num.text=parseInt(this.lab_sellcqb_num.text)+1;this.lab_changecoin.text=parseInt(this.lab_changecoin.text)+a}};b.maxSellNum=function(){this.lab_havecqb.text=this.myCQB;this.lab_sellcqb_num.text=0;this.lab_changecoin.text=0;var a=parseInt(this.lab_change2.text);this.lab_havecqb.text=0;this.lab_sellcqb_num.text=parseInt(this.myCQB);this.lab_changecoin.text=parseInt(this.myCQB*a)};b.sendBuyCQB=function(){"0"==this.lab_buycqb_num.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u51b6\u70bc\u6570\u91cf\u4e0d\u80fd\u4e3a0\uff01",callfn:function(){}}]):parseInt(this.lab_buycqb_num.text)>parseInt(this.lab_cqb_all2.text)?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5f53\u524d\u672a\u5151\u6362CQB\u603b\u91cf\u4e0d\u8db3\uff01",callfn:function(){}}]):0!=this.lab_buycqb_num.text&&(this.exchangeNum=this.lab_buycqb_num.text,this.exchangeType=CM_BUYCRISTAL,this.closeBuy(),this.sendExchangeMsg())};b.sendSellCQB=function(){"0"==this.lab_sellcqb_num.text?Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5151\u6362\u6570\u91cf\u4e0d\u80fd\u4e3a0\uff01",callfn:function(){}}]):(this.exchangeNum=this.lab_sellcqb_num.text,this.exchangeType=CM_SELLCRISTAL,this.closeSell(),this.showSpsw())};b.sellCQB=function(){this.bg_bind.visible=!this.isLogin;this.bg_sell.visible=this.isLogin;this.bg_cqb.mouseEnabled=!1;this.isLogin&&this.getMyCQB()};b.showSpsw=function(){this.bg_cqb.mouseEnabled=!1;this.bg_secondPsw.visible=!0};b.closeSpsw=function(){this.bg_cqb.mouseEnabled=!0;this.bg_secondPsw.visible=!1;this.ipt_secondPsw.text="";this.exchangeType=this.exchangeNum=0};b.sendExchangeMsg=function(){if(0!=this.exchangeType&&0!=this.exchangeNum){var a=this.exchangeType,b={sname:g_RoleName,phone:this.phone,num:this.exchangeNum,token:this.token,password:this.ipt_secondPsw.text},b=JSON.stringify(b);Sendmessage.sendCqbExchange(a,b);this.closeSpsw()}};b.showPopup=function(a){this.bg_login.visible=!1;this.bg_cell.visible=!1;this.bg_register.visible=!1;a&&(a.visible=!0)};b.bindAccount=function(){this.bg_bind.visible=!1;this.bg_login.visible=!0;this.bg_cqb.mouseEnabled=!1};b.closeHint=function(){this.bg_bind.visible=!1;this.bg_cqb.mouseEnabled=!0};b.closePopup=function(a){a&&(a.visible=!1,this.bg_cqb.mouseEnabled=!0)};b.getCheckCode=function(a,b){function c(){l--;m.label="\u91cd\u65b0\u83b7\u53d6("+l+")";0>=l&&(m.disabled=!1,m.label="\u83b7\u53d6\u9a8c\u8bc1\u7801",Laya.timer.clear(this,c))}function g(a){a&&(a.msg&&"\u53d1\u9001\u6210\u529f"!=a.msg?Laya.stage.event("show_alert_dlg",[{type:1,txt:a.msg,callfn:function(){}}]):Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u9a8c\u8bc1\u7801\u53d1\u9001\u6210\u529f\uff01",callfn:function(){}}]))}if(a&&b&&b.target)if(""==a.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else if(11!=a.text.length)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u9519\u8bef\uff01",callfn:function(){}}]);else{var f=new Laya.HttpRequest;f.once(Laya.Event.COMPLETE,this,g);f.once(Laya.Event.ERROR,this,function(a){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u9a8c\u8bc1\u7801\u53d1\u9001\u5931\u8d25\uff01",callfn:function(){}}])});var h={action:"SendMsgCode",object:{mobile:a.text}},h=JSON.stringify(h);f.send(this.httpUrl,h,"post","json",["Content-Type","application/json;charset\x3dUTF-8"]);var l=60,m=b.target;m.disabled=!0;Laya.timer.loop(1E3,this,c)}};b.sendRegister=function(){function a(a){a&&(a.msg&&"SUCCESS\uff5e"!=a.msg?Laya.stage.event("show_alert_dlg",[{type:1,txt:a.msg,callfn:function(){}}]):a.result&&(g.userid=a.result.userId,g.token=a.result.token,Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6ce8\u518c\u6210\u529f\uff01",callfn:function(){}}]),g.showPopup(g.bg_login)))}if(""==this.ipt_register_account.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else if(""==this.ipt_register_code.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else if(""==this.ipt_register_psw.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else{var b=new Laya.HttpRequest;b.once(Laya.Event.COMPLETE,this,a);b.once(Laya.Event.ERROR,this,function(a){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u6ce8\u518c\u5931\u8d25\uff01",callfn:function(){}}])});var c={action:"AppSignInSignUp",object:{latitude:this.latitude,longitude:this.longitude,mobile:this.ipt_register_account.text,inviterNum:this.ipt_register_invite.text,passWord:this.ipt_register_psw.text,msgcode:this.ipt_register_code.text}},c=JSON.stringify(c);b.send(this.httpUrl,c,"post","json",["Content-Type","application/json;charset\x3dUTF-8"])}var g=this};b.sendCellLogin=function(){function a(a){a&&(a.msg&&"SUCCESS\uff5e"!=a.msg?Laya.stage.event("show_alert_dlg",[{type:1,txt:a.msg,callfn:function(){}}]):a.result&&(g.userid=a.result.userId,g.token=a.result.token,g.phone=this.ipt_cell_account.text,Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u6210\u529f\uff01",callfn:function(){}}]),g.closePopup(g.bg_cell),g.lab_cqb_state.text="\u6b63\u5e38",g.lab_cqb_state.color="#28ff00",g.isLogin=!0,g.getMyCQB()))}if(""==this.ipt_cell_account.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else if(""==this.ipt_cell_code.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else{var b=new Laya.HttpRequest;b.once(Laya.Event.COMPLETE,this,a);b.once(Laya.Event.ERROR,this,function(a){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u5931\u8d25\uff01",callfn:function(){}}])});var c={action:"AppSignInSignUp",object:{mobile:this.ipt_cell_account.text,msgcode:this.ipt_cell_code.text}},c=JSON.stringify(c);b.send(this.httpUrl,c,"post","json",["Content-Type","application/json;charset\x3dUTF-8"])}var g=this};b.sendLogin=function(){function a(a){a&&(a.msg&&"SUCCESS\uff5e"!=a.msg?Laya.stage.event("show_alert_dlg",[{type:1,txt:a.msg,callfn:function(){}}]):a.result&&(g.userid=a.result.userId,g.token=a.result.token,g.phone=this.ipt_login_account.text,Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u767b\u5f55\u6210\u529f\uff01",callfn:function(){}}]),g.closePopup(g.bg_login),g.lab_cqb_state.text="\u6b63\u5e38",g.lab_cqb_state.color="#28ff00",g.isLogin=!0,g.getMyCQB()))}if(""==this.ipt_login_account.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else if(""==this.ipt_login_psw.text)Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",callfn:function(){}}]);else{var b=new Laya.HttpRequest;b.once(Laya.Event.COMPLETE,this,a);b.once(Laya.Event.ERROR,this,function(a){Laya.stage.event("show_alert_dlg",[{type:1,txt:"\u8fde\u63a5\u5931\u8d25\uff01",callfn:function(){}}])});var c={action:"AppSignInSignUp",object:{mobile:this.ipt_login_account.text,passWord:this.ipt_login_psw.text}},c=JSON.stringify(c);b.send(this.httpUrl,c,"post","json",["Content-Type","application/json;charset\x3dUTF-8"])}var g=this};b.getMyCQB=function(){var a=new Laya.HttpRequest;a.once(Laya.Event.COMPLETE,this,function(a){a&&(a.msg&&"\u6210\u529f"!=a.msg?Laya.stage.event("show_alert_dlg",[{type:1,txt:a.msg,callfn:function(){}}]):a.data&&(b.myCQB=a.data.crystalTotal,b.lab_havecqb.text=a.data.crystalTotal,console.log("MyCQB:",b.myCQB)))});a.send("https://pgg-account.paiguagua.com/account/getCrystalDetail","{}","post","json",["Content-Type","application/json;charset\x3dUTF-8","Authorization","Bearer "+this.token]);var b=this};b.closeBuy=function(){this.bg_buy.visible=!1;this.bg_cqb.mouseEnabled=!0;this.lab_havesmelt.text=g_nGameGird.value;this.lab_buycqb_num.text=0;this.lab_costsmelt.text=0};b.closeSell=function(){this.bg_sell.visible=!1;this.bg_cqb.mouseEnabled=!0;this.lab_havecqb.text=this.myCQB;this.lab_sellcqb_num.text=0;this.lab_changecoin.text=0};b.close=function(){this.visible=!1;this.bg_bind.visible=!1;this.bg_buy.visible=!1;this.bg_sell.visible=!1;this.bg_login.visible=!1;this.bg_cell.visible=!1;this.bg_register.visible=!1;this.bg_secondPsw.visible=!1;this.bg_cqb.mouseEnabled=!0};return c}(crystalUI);